(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{2070:(Sn,Ct,U)=>{"use strict";U.d(Ct,{a:()=>qe});var I=U(4080),l=U(4650);function q(Ne,ze){1&Ne&&l.Hsn(0)}const h=["*"];let qe=(()=>{class Ne{constructor(ye,me){this.injector=ye,this.appRef=me}ngAfterViewInit(){const ye=document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items");if(!ye)throw new Error("LayoutToolbarMenuComponent: No target found");this.portalOutlet=new I.u0(ye,void 0,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return Ne.\u0275fac=function(ye){return new(ye||Ne)(l.Y36(l.zs3),l.Y36(l.z2F))},Ne.\u0275cmp=l.Xpm({type:Ne,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(ye,me){if(1&ye&&l.Gf(I.ig,5),2&ye){let Ce;l.iGM(Ce=l.CRH())&&(me.portal=Ce.first)}},inputs:{position:"position"},ngContentSelectors:h,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(ye,me){1&ye&&(l.F$t(),l.YNc(0,q,1,0,"ng-template",0))},dependencies:[I.bH],encapsulation:2}),Ne})()},9174:(Sn,Ct,U)=>{"use strict";U.d(Ct,{$:()=>Ne});var I=U(4650),l=U(2510),q=U(3683),h=U(7392),qe=U(4859);let Ne=(()=>{class ze{}return ze.\u0275fac=function(me){return new(me||ze)},ze.\u0275cmp=I.Xpm({type:ze,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-mapbox-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/Wykks/ngx-mapbox-gl"],["svgIcon","github"]],template:function(me,Ce){1&me&&(I.TgZ(0,"mat-toolbar",0)(1,"div"),I._UZ(2,"div",1),I.TgZ(3,"a",2),I._UZ(4,"mat-icon",3),I._uU(5," ngx-mapbox-gl "),I.qZA(),I.TgZ(6,"a",4),I._uU(7," Demo "),I.qZA(),I.TgZ(8,"a",5),I._uU(9," Documentation "),I.qZA()(),I.TgZ(10,"div"),I._UZ(11,"div",6),I.TgZ(12,"a",7),I._UZ(13,"mat-icon",8),I._uU(14," GitHub "),I.qZA()()(),I._UZ(15,"router-outlet"))},dependencies:[l.lC,l.yS,q.Ye,h.Hw,qe.zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),ze})()},5978:(Sn,Ct,U)=>{"use strict";U.d(Ct,{x:()=>tt});var I=U(4080),l=U(6895),q=U(4859),h=U(7392),qe=U(3683),Ne=U(2510),me=(U(2070),U(9174),U(4650));let tt=(()=>{class Ue{}return Ue.\u0275fac=function(st){return new(st||Ue)},Ue.\u0275mod=me.oAB({type:Ue}),Ue.\u0275inj=me.cJS({imports:[l.ez,Ne.Bz,qe.g0,h.Ps,q.ot,I.eL]}),Ue})()},2987:(Sn,Ct,U)=>{"use strict";var I=U(1481),l=U(4650),q=U(2510);let h=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-root"]],decls:1,vars:0,template:function(i,m){1&i&&l._UZ(0,"router-outlet")},dependencies:[q.lC],encapsulation:2}),u})();var qe=U(7392),Ne=U(7340);const ze=!1;function me(u){return new l.vHH(3e3,ze)}function Dn(){return typeof window<"u"&&typeof window.document<"u"}function jn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function wn(u){switch(u.length){case 0:return new Ne.ZN;case 1:return u[0];default:return new Ne.ZE(u)}}function hi(u,f,i,m,M=new Map,L=new Map){const le=[],we=[];let Je=-1,St=null;if(m.forEach(Kt=>{const Qt=Kt.get("offset"),Vn=Qt==Je,ii=Vn&&St||new Map;Kt.forEach((Kn,Jn)=>{let vi=Jn,Oi=Kn;if("offset"!==Jn)switch(vi=f.normalizePropertyName(vi,le),Oi){case Ne.k1:Oi=M.get(Jn);break;case Ne.l3:Oi=L.get(Jn);break;default:Oi=f.normalizeStyleValue(Jn,vi,Oi,le)}ii.set(vi,Oi)}),Vn||we.push(ii),St=ii,Je=Qt}),le.length)throw function Jt(u){return new l.vHH(3502,ze)}();return we}function Fi(u,f,i,m){switch(f){case"start":u.onStart(()=>m(i&&Hi(i,"start",u)));break;case"done":u.onDone(()=>m(i&&Hi(i,"done",u)));break;case"destroy":u.onDestroy(()=>m(i&&Hi(i,"destroy",u)))}}function Hi(u,f,i){const L=ur(u.element,u.triggerName,u.fromState,u.toState,f||u.phaseName,i.totalTime??u.totalTime,!!i.disabled),le=u._data;return null!=le&&(L._data=le),L}function ur(u,f,i,m,M="",L=0,le){return{element:u,triggerName:f,fromState:i,toState:m,phaseName:M,totalTime:L,disabled:!!le}}function Ln(u,f,i){let m=u.get(f);return m||u.set(f,m=i),m}function pr(u){const f=u.indexOf(":");return[u.substring(1,f),u.slice(f+1)]}let zn=(u,f)=>!1,qt=(u,f,i)=>[],nt=null;function ne(u){const f=u.parentNode||u.host;return f===nt?null:f}(jn()||typeof Element<"u")&&(Dn()?(nt=(()=>document.documentElement)(),zn=(u,f)=>{for(;f;){if(f===u)return!0;f=ne(f)}return!1}):zn=(u,f)=>u.contains(f),qt=(u,f,i)=>{if(i)return Array.from(u.querySelectorAll(f));const m=u.querySelector(f);return m?[m]:[]});let W=null,ce=!1;const un=zn,Cn=qt;let Zn=(()=>{class u{validateStyleProperty(i){return function Ae(u){W||(W=function Nt(){return typeof document<"u"?document.body:null}()||{},ce=!!W.style&&"WebkitAppearance"in W.style);let f=!0;return W.style&&!function V(u){return"ebkit"==u.substring(1,6)}(u)&&(f=u in W.style,!f&&ce&&(f="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in W.style)),f}(i)}matchesElement(i,m){return!1}containsElement(i,m){return un(i,m)}getParentElement(i){return ne(i)}query(i,m,M){return Cn(i,m,M)}computeStyle(i,m,M){return M||""}animate(i,m,M,L,le,we=[],Je){return new Ne.ZN(M,L)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})(),mi=(()=>{class u{}return u.NOOP=new Zn,u})();const wt="ng-enter",mt="ng-leave",lt="ng-trigger",je=".ng-trigger",Qe="ng-animating",Be=".ng-animating";function ft(u){if("number"==typeof u)return u;const f=u.match(/^(-?[\.\d]+)(m?s)/);return!f||f.length<2?0:Rt(parseFloat(f[1]),f[2])}function Rt(u,f){return"s"===f?1e3*u:u}function he(u,f,i){return u.hasOwnProperty("duration")?u:function ee(u,f,i){let M,L=0,le="";if("string"==typeof u){const we=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===we)return f.push(me()),{duration:0,delay:0,easing:""};M=Rt(parseFloat(we[1]),we[2]);const Je=we[3];null!=Je&&(L=Rt(parseFloat(Je),we[4]));const St=we[5];St&&(le=St)}else M=u;if(!i){let we=!1,Je=f.length;M<0&&(f.push(function Ce(){return new l.vHH(3100,ze)}()),we=!0),L<0&&(f.push(function tt(){return new l.vHH(3101,ze)}()),we=!0),we&&f.splice(Je,0,me())}return{duration:M,delay:L,easing:le}}(u,f,i)}function oe(u,f={}){return Object.keys(u).forEach(i=>{f[i]=u[i]}),f}function Se(u){const f=new Map;return Object.keys(u).forEach(i=>{f.set(i,u[i])}),f}function gt(u,f=new Map,i){if(i)for(let[m,M]of i)f.set(m,M);for(let[m,M]of u)f.set(m,M);return f}function _t(u,f,i){return i?f+":"+i+";":""}function ot(u){let f="";for(let i=0;i<u.style.length;i++){const m=u.style.item(i);f+=_t(0,m,u.style.getPropertyValue(m))}for(const i in u.style)u.style.hasOwnProperty(i)&&!i.startsWith("_")&&(f+=_t(0,An(i),u.style[i]));u.setAttribute("style",f)}function He(u,f,i){u.style&&(f.forEach((m,M)=>{const L=Gn(M);i&&!i.has(M)&&i.set(M,u.style[L]),u.style[L]=m}),jn()&&ot(u))}function Dt(u,f){u.style&&(f.forEach((i,m)=>{const M=Gn(m);u.style[M]=""}),jn()&&ot(u))}function Fe(u){return Array.isArray(u)?1==u.length?u[0]:(0,Ne.vP)(u):u}const Me=new RegExp("{{\\s*(.+?)\\s*}}","g");function ue(u){let f=[];if("string"==typeof u){let i;for(;i=Me.exec(u);)f.push(i[1]);Me.lastIndex=0}return f}function We(u,f,i){const m=u.toString(),M=m.replace(Me,(L,le)=>{let we=f[le];return null==we&&(i.push(function dt(u){return new l.vHH(3003,ze)}()),we=""),we.toString()});return M==m?u:M}function Xt(u){const f=[];let i=u.next();for(;!i.done;)f.push(i.value),i=u.next();return f}const Fn=/-+([a-z0-9])/g;function Gn(u){return u.replace(Fn,(...f)=>f[1].toUpperCase())}function An(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rr(u,f,i){switch(f.type){case 7:return u.visitTrigger(f,i);case 0:return u.visitState(f,i);case 1:return u.visitTransition(f,i);case 2:return u.visitSequence(f,i);case 3:return u.visitGroup(f,i);case 4:return u.visitAnimate(f,i);case 5:return u.visitKeyframes(f,i);case 6:return u.visitStyle(f,i);case 8:return u.visitReference(f,i);case 9:return u.visitAnimateChild(f,i);case 10:return u.visitAnimateRef(f,i);case 11:return u.visitQuery(f,i);case 12:return u.visitStagger(f,i);default:throw function st(u){return new l.vHH(3004,ze)}()}}function En(u,f){return window.getComputedStyle(u)[f]}function Yi(u,f){const i=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(m=>function ss(u,f,i){if(":"==u[0]){const Je=function Jo(u,f){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,m)=>parseFloat(m)>parseFloat(i);case":decrement":return(i,m)=>parseFloat(m)<parseFloat(i);default:return f.push(function Mt(u){return new l.vHH(3016,ze)}()),"* => *"}}(u,i);if("function"==typeof Je)return void f.push(Je);u=Je}const m=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==m||m.length<4)return i.push(function bt(u){return new l.vHH(3015,ze)}()),f;const M=m[1],L=m[2],le=m[3];f.push(sr(M,le));"<"==L[0]&&!("*"==M&&"*"==le)&&f.push(sr(le,M))}(m,i,f)):i.push(u),i}const yr=new Set(["true","1"]),Kr=new Set(["false","0"]);function sr(u,f){const i=yr.has(u)||Kr.has(u),m=yr.has(f)||Kr.has(f);return(M,L)=>{let le="*"==u||u==M,we="*"==f||f==L;return!le&&i&&"boolean"==typeof M&&(le=M?yr.has(u):Kr.has(u)),!we&&m&&"boolean"==typeof L&&(we=L?yr.has(f):Kr.has(f)),le&&we}}const fi=new RegExp("s*:selfs*,?","g");function br(u,f,i,m){return new Br(u).build(f,i,m)}class Br{constructor(f){this._driver=f}build(f,i,m){const M=new As(i);return this._resetContextStyleTimingState(M),rr(this,Fe(f),M)}_resetContextStyleTimingState(f){f.currentQuerySelector="",f.collectedStyles=new Map,f.collectedStyles.set("",new Map),f.currentTime=0}visitTrigger(f,i){let m=i.queryCount=0,M=i.depCount=0;const L=[],le=[];return"@"==f.name.charAt(0)&&i.errors.push(function At(){return new l.vHH(3006,ze)}()),f.definitions.forEach(we=>{if(this._resetContextStyleTimingState(i),0==we.type){const Je=we,St=Je.name;St.toString().split(/\s*,\s*/).forEach(Kt=>{Je.name=Kt,L.push(this.visitState(Je,i))}),Je.name=St}else if(1==we.type){const Je=this.visitTransition(we,i);m+=Je.queryCount,M+=Je.depCount,le.push(Je)}else i.errors.push(function vt(){return new l.vHH(3007,ze)}())}),{type:7,name:f.name,states:L,transitions:le,queryCount:m,depCount:M,options:null}}visitState(f,i){const m=this.visitStyle(f.styles,i),M=f.options&&f.options.params||null;if(m.containsDynamicStyles){const L=new Set,le=M||{};m.styles.forEach(we=>{we instanceof Map&&we.forEach(Je=>{ue(Je).forEach(St=>{le.hasOwnProperty(St)||L.add(St)})})}),L.size&&(Xt(L.values()),i.errors.push(function Zt(u,f){return new l.vHH(3008,ze)}()))}return{type:0,name:f.name,style:m,options:M?{params:M}:null}}visitTransition(f,i){i.queryCount=0,i.depCount=0;const m=rr(this,Fe(f.animation),i);return{type:1,matchers:Yi(f.expr,i.errors),animation:m,queryCount:i.queryCount,depCount:i.depCount,options:io(f.options)}}visitSequence(f,i){return{type:2,steps:f.steps.map(m=>rr(this,m,i)),options:io(f.options)}}visitGroup(f,i){const m=i.currentTime;let M=0;const L=f.steps.map(le=>{i.currentTime=m;const we=rr(this,le,i);return M=Math.max(M,i.currentTime),we});return i.currentTime=M,{type:3,steps:L,options:io(f.options)}}visitAnimate(f,i){const m=function Hs(u,f){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return Mr(he(u,f).duration,0,"");const i=u;if(i.split(/\s+/).some(L=>"{"==L.charAt(0)&&"{"==L.charAt(1))){const L=Mr(0,0,"");return L.dynamic=!0,L.strValue=i,L}const M=he(i,f);return Mr(M.duration,M.delay,M.easing)}(f.timings,i.errors);i.currentAnimateTimings=m;let M,L=f.styles?f.styles:(0,Ne.oB)({});if(5==L.type)M=this.visitKeyframes(L,i);else{let le=f.styles,we=!1;if(!le){we=!0;const St={};m.easing&&(St.easing=m.easing),le=(0,Ne.oB)(St)}i.currentTime+=m.duration+m.delay;const Je=this.visitStyle(le,i);Je.isEmptyStep=we,M=Je}return i.currentAnimateTimings=null,{type:4,timings:m,style:M,options:null}}visitStyle(f,i){const m=this._makeStyleAst(f,i);return this._validateStyleAst(m,i),m}_makeStyleAst(f,i){const m=[],M=Array.isArray(f.styles)?f.styles:[f.styles];for(let we of M)"string"==typeof we?we===Ne.l3?m.push(we):i.errors.push(new l.vHH(3002,ze)):m.push(Se(we));let L=!1,le=null;return m.forEach(we=>{if(we instanceof Map&&(we.has("easing")&&(le=we.get("easing"),we.delete("easing")),!L))for(let Je of we.values())if(Je.toString().indexOf("{{")>=0){L=!0;break}}),{type:6,styles:m,easing:le,offset:f.offset,containsDynamicStyles:L,options:null}}_validateStyleAst(f,i){const m=i.currentAnimateTimings;let M=i.currentTime,L=i.currentTime;m&&L>0&&(L-=m.duration+m.delay),f.styles.forEach(le=>{"string"!=typeof le&&le.forEach((we,Je)=>{const St=i.collectedStyles.get(i.currentQuerySelector),Kt=St.get(Je);let Qt=!0;Kt&&(L!=M&&L>=Kt.startTime&&M<=Kt.endTime&&(i.errors.push(function Bt(u,f,i,m,M){return new l.vHH(3010,ze)}()),Qt=!1),L=Kt.startTime),Qt&&St.set(Je,{startTime:L,endTime:M}),i.options&&function De(u,f,i){const m=f.params||{},M=ue(u);M.length&&M.forEach(L=>{m.hasOwnProperty(L)||i.push(function Ue(u){return new l.vHH(3001,ze)}())})}(we,i.options,i.errors)})})}visitKeyframes(f,i){const m={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(function ke(){return new l.vHH(3011,ze)}()),m;let L=0;const le=[];let we=!1,Je=!1,St=0;const Kt=f.steps.map(Oi=>{const ji=this._makeStyleAst(Oi,i);let xo=null!=ji.offset?ji.offset:function xr(u){if("string"==typeof u)return null;let f=null;if(Array.isArray(u))u.forEach(i=>{if(i instanceof Map&&i.has("offset")){const m=i;f=parseFloat(m.get("offset")),m.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const i=u;f=parseFloat(i.get("offset")),i.delete("offset")}return f}(ji.styles),Hr=0;return null!=xo&&(L++,Hr=ji.offset=xo),Je=Je||Hr<0||Hr>1,we=we||Hr<St,St=Hr,le.push(Hr),ji});Je&&i.errors.push(function $e(){return new l.vHH(3012,ze)}()),we&&i.errors.push(function sn(){return new l.vHH(3200,ze)}());const Qt=f.steps.length;let Vn=0;L>0&&L<Qt?i.errors.push(function Gt(){return new l.vHH(3202,ze)}()):0==L&&(Vn=1/(Qt-1));const ii=Qt-1,Kn=i.currentTime,Jn=i.currentAnimateTimings,vi=Jn.duration;return Kt.forEach((Oi,ji)=>{const xo=Vn>0?ji==ii?1:Vn*ji:le[ji],Hr=xo*vi;i.currentTime=Kn+Jn.delay+Hr,Jn.duration=Hr,this._validateStyleAst(Oi,i),Oi.offset=xo,m.styles.push(Oi)}),m}visitReference(f,i){return{type:8,animation:rr(this,Fe(f.animation),i),options:io(f.options)}}visitAnimateChild(f,i){return i.depCount++,{type:9,options:io(f.options)}}visitAnimateRef(f,i){return{type:10,animation:this.visitReference(f.animation,i),options:io(f.options)}}visitQuery(f,i){const m=i.currentQuerySelector,M=f.options||{};i.queryCount++,i.currentQuery=f;const[L,le]=function Xr(u){const f=!!u.split(/\s*,\s*/).find(i=>":self"==i);return f&&(u=u.replace(fi,"")),u=u.replace(/@\*/g,je).replace(/@\w+/g,i=>je+"-"+i.slice(1)).replace(/:animating/g,Be),[u,f]}(f.selector);i.currentQuerySelector=m.length?m+" "+L:L,Ln(i.collectedStyles,i.currentQuerySelector,new Map);const we=rr(this,Fe(f.animation),i);return i.currentQuery=null,i.currentQuerySelector=m,{type:11,selector:L,limit:M.limit||0,optional:!!M.optional,includeSelf:le,animation:we,originalSelector:f.selector,options:io(f.options)}}visitStagger(f,i){i.currentQuery||i.errors.push(function $t(){return new l.vHH(3013,ze)}());const m="full"===f.timings?{duration:0,delay:0,easing:"full"}:he(f.timings,i.errors,!0);return{type:12,animation:rr(this,Fe(f.animation),i),timings:m,options:null}}}class As{constructor(f){this.errors=f,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set,this.nonAnimatableCSSPropertiesFound=new Set}}function io(u){return u?(u=oe(u)).params&&(u.params=function Eo(u){return u?oe(u):null}(u.params)):u={},u}function Mr(u,f,i){return{duration:u,delay:f,easing:i}}function Is(u,f,i,m,M,L,le=null,we=!1){return{type:1,element:u,keyframes:f,preStyleProps:i,postStyleProps:m,duration:M,delay:L,totalTime:M+L,easing:le,subTimeline:we}}class fr{constructor(){this._map=new Map}get(f){return this._map.get(f)||[]}append(f,i){let m=this._map.get(f);m||this._map.set(f,m=[]),m.push(...i)}has(f){return this._map.has(f)}clear(){this._map.clear()}}const pc=new RegExp(":enter","g"),vl=new RegExp(":leave","g");function $s(u,f,i,m,M,L=new Map,le=new Map,we,Je,St=[]){return(new jo).buildKeyframes(u,f,i,m,M,L,le,we,Je,St)}class jo{buildKeyframes(f,i,m,M,L,le,we,Je,St,Kt=[]){St=St||new fr;const Qt=new Io(f,i,St,M,L,Kt,[]);Qt.options=Je;const Vn=Je.delay?ft(Je.delay):0;Qt.currentTimeline.delayNextStep(Vn),Qt.currentTimeline.setStyles([le],null,Qt.errors,Je),rr(this,m,Qt);const ii=Qt.timelines.filter(Kn=>Kn.containsAnimation());if(ii.length&&we.size){let Kn;for(let Jn=ii.length-1;Jn>=0;Jn--){const vi=ii[Jn];if(vi.element===i){Kn=vi;break}}Kn&&!Kn.allowOnlyTimelineStyles()&&Kn.setStyles([we],null,Qt.errors,Je)}return ii.length?ii.map(Kn=>Kn.buildKeyframes()):[Is(i,[],[],[],0,Vn,"",!1)]}visitTrigger(f,i){}visitState(f,i){}visitTransition(f,i){}visitAnimateChild(f,i){const m=i.subInstructions.get(i.element);if(m){const M=i.createSubContext(f.options),L=i.currentTimeline.currentTime,le=this._visitSubInstructions(m,M,M.options);L!=le&&i.transformIntoNewTimeline(le)}i.previousNode=f}visitAnimateRef(f,i){const m=i.createSubContext(f.options);m.transformIntoNewTimeline(),this.visitReference(f.animation,m),i.transformIntoNewTimeline(m.currentTimeline.currentTime),i.previousNode=f}_visitSubInstructions(f,i,m){let L=i.currentTimeline.currentTime;const le=null!=m.duration?ft(m.duration):null,we=null!=m.delay?ft(m.delay):null;return 0!==le&&f.forEach(Je=>{const St=i.appendInstructionToTimeline(Je,le,we);L=Math.max(L,St.duration+St.delay)}),L}visitReference(f,i){i.updateOptions(f.options,!0),rr(this,f.animation,i),i.previousNode=f}visitSequence(f,i){const m=i.subContextCount;let M=i;const L=f.options;if(L&&(L.params||L.delay)&&(M=i.createSubContext(L),M.transformIntoNewTimeline(),null!=L.delay)){6==M.previousNode.type&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Zs);const le=ft(L.delay);M.delayNextStep(le)}f.steps.length&&(f.steps.forEach(le=>rr(this,le,M)),M.currentTimeline.applyStylesToKeyframe(),M.subContextCount>m&&M.transformIntoNewTimeline()),i.previousNode=f}visitGroup(f,i){const m=[];let M=i.currentTimeline.currentTime;const L=f.options&&f.options.delay?ft(f.options.delay):0;f.steps.forEach(le=>{const we=i.createSubContext(f.options);L&&we.delayNextStep(L),rr(this,le,we),M=Math.max(M,we.currentTimeline.currentTime),m.push(we.currentTimeline)}),m.forEach(le=>i.currentTimeline.mergeTimelineCollectedStyles(le)),i.transformIntoNewTimeline(M),i.previousNode=f}_visitTiming(f,i){if(f.dynamic){const m=f.strValue;return he(i.params?We(m,i.params,i.errors):m,i.errors)}return{duration:f.duration,delay:f.delay,easing:f.easing}}visitAnimate(f,i){const m=i.currentAnimateTimings=this._visitTiming(f.timings,i),M=i.currentTimeline;m.delay&&(i.incrementTime(m.delay),M.snapshotCurrentStyles());const L=f.style;5==L.type?this.visitKeyframes(L,i):(i.incrementTime(m.duration),this.visitStyle(L,i),M.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=f}visitStyle(f,i){const m=i.currentTimeline,M=i.currentAnimateTimings;!M&&m.hasCurrentStyleProperties()&&m.forwardFrame();const L=M&&M.easing||f.easing;f.isEmptyStep?m.applyEmptyStep(L):m.setStyles(f.styles,L,i.errors,i.options),i.previousNode=f}visitKeyframes(f,i){const m=i.currentAnimateTimings,M=i.currentTimeline.duration,L=m.duration,we=i.createSubContext().currentTimeline;we.easing=m.easing,f.styles.forEach(Je=>{we.forwardTime((Je.offset||0)*L),we.setStyles(Je.styles,Je.easing,i.errors,i.options),we.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(we),i.transformIntoNewTimeline(M+L),i.previousNode=f}visitQuery(f,i){const m=i.currentTimeline.currentTime,M=f.options||{},L=M.delay?ft(M.delay):0;L&&(6===i.previousNode.type||0==m&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Zs);let le=m;const we=i.invokeQuery(f.selector,f.originalSelector,f.limit,f.includeSelf,!!M.optional,i.errors);i.currentQueryTotal=we.length;let Je=null;we.forEach((St,Kt)=>{i.currentQueryIndex=Kt;const Qt=i.createSubContext(f.options,St);L&&Qt.delayNextStep(L),St===i.element&&(Je=Qt.currentTimeline),rr(this,f.animation,Qt),Qt.currentTimeline.applyStylesToKeyframe(),le=Math.max(le,Qt.currentTimeline.currentTime)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(le),Je&&(i.currentTimeline.mergeTimelineCollectedStyles(Je),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=f}visitStagger(f,i){const m=i.parentContext,M=i.currentTimeline,L=f.timings,le=Math.abs(L.duration),we=le*(i.currentQueryTotal-1);let Je=le*i.currentQueryIndex;switch(L.duration<0?"reverse":L.easing){case"reverse":Je=we-Je;break;case"full":Je=m.currentStaggerTime}const Kt=i.currentTimeline;Je&&Kt.delayNextStep(Je);const Qt=Kt.currentTime;rr(this,f.animation,i),i.previousNode=f,m.currentStaggerTime=M.currentTime-Qt+(M.startTime-m.currentTimeline.startTime)}}const Zs={};class Io{constructor(f,i,m,M,L,le,we,Je){this._driver=f,this.element=i,this.subInstructions=m,this._enterClassName=M,this._leaveClassName=L,this.errors=le,this.timelines=we,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Je||new _a(this._driver,i,0),we.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(f,i){if(!f)return;const m=f;let M=this.options;null!=m.duration&&(M.duration=ft(m.duration)),null!=m.delay&&(M.delay=ft(m.delay));const L=m.params;if(L){let le=M.params;le||(le=this.options.params={}),Object.keys(L).forEach(we=>{(!i||!le.hasOwnProperty(we))&&(le[we]=We(L[we],le,this.errors))})}}_copyOptions(){const f={};if(this.options){const i=this.options.params;if(i){const m=f.params={};Object.keys(i).forEach(M=>{m[M]=i[M]})}}return f}createSubContext(f=null,i,m){const M=i||this.element,L=new Io(this._driver,M,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(M,m||0));return L.previousNode=this.previousNode,L.currentAnimateTimings=this.currentAnimateTimings,L.options=this._copyOptions(),L.updateOptions(f),L.currentQueryIndex=this.currentQueryIndex,L.currentQueryTotal=this.currentQueryTotal,L.parentContext=this,this.subContextCount++,L}transformIntoNewTimeline(f){return this.previousNode=Zs,this.currentTimeline=this.currentTimeline.fork(this.element,f),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(f,i,m){const M={duration:i??f.duration,delay:this.currentTimeline.currentTime+(m??0)+f.delay,easing:""},L=new Ps(this._driver,f.element,f.keyframes,f.preStyleProps,f.postStyleProps,M,f.stretchStartingKeyframe);return this.timelines.push(L),M}incrementTime(f){this.currentTimeline.forwardTime(this.currentTimeline.duration+f)}delayNextStep(f){f>0&&this.currentTimeline.delayNextStep(f)}invokeQuery(f,i,m,M,L,le){let we=[];if(M&&we.push(this.element),f.length>0){f=(f=f.replace(pc,"."+this._enterClassName)).replace(vl,"."+this._leaveClassName);let St=this._driver.query(this.element,f,1!=m);0!==m&&(St=m<0?St.slice(St.length+m,St.length):St.slice(0,m)),we.push(...St)}return!L&&0==we.length&&le.push(function dn(u){return new l.vHH(3014,ze)}()),we}}class _a{constructor(f,i,m,M){this._driver=f,this.element=i,this.startTime=m,this._elementTimelineStylesLookup=M,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(f){const i=1===this._keyframes.size&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+f),i&&this.snapshotCurrentStyles()):this.startTime+=f}fork(f,i){return this.applyStylesToKeyframe(),new _a(this._driver,f,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(f){this.applyStylesToKeyframe(),this.duration=f,this._loadKeyframe()}_updateStyle(f,i){this._localTimelineStyles.set(f,i),this._globalTimelineStyles.set(f,i),this._styleSummary.set(f,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(f){f&&this._previousKeyframe.set("easing",f);for(let[i,m]of this._globalTimelineStyles)this._backFill.set(i,m||Ne.l3),this._currentKeyframe.set(i,Ne.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(f,i,m,M){i&&this._previousKeyframe.set("easing",i);const L=M&&M.params||{},le=function Ws(u,f){const i=new Map;let m;return u.forEach(M=>{if("*"===M){m=m||f.keys();for(let L of m)i.set(L,Ne.l3)}else gt(M,i)}),i}(f,this._globalTimelineStyles);for(let[we,Je]of le){const St=We(Je,L,m);this._pendingStyles.set(we,St),this._localTimelineStyles.has(we)||this._backFill.set(we,this._globalTimelineStyles.get(we)||Ne.l3),this._updateStyle(we,St)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((f,i)=>{this._currentKeyframe.set(i,f)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((f,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,f)}))}snapshotCurrentStyles(){for(let[f,i]of this._localTimelineStyles)this._pendingStyles.set(f,i),this._updateStyle(f,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const f=[];for(let i in this._currentKeyframe)f.push(i);return f}mergeTimelineCollectedStyles(f){f._styleSummary.forEach((i,m)=>{const M=this._styleSummary.get(m);(!M||i.time>M.time)&&this._updateStyle(m,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const f=new Set,i=new Set,m=1===this._keyframes.size&&0===this.duration;let M=[];this._keyframes.forEach((we,Je)=>{const St=gt(we,new Map,this._backFill);St.forEach((Kt,Qt)=>{Kt===Ne.k1?f.add(Qt):Kt===Ne.l3&&i.add(Qt)}),m||St.set("offset",Je/this.duration),M.push(St)});const L=f.size?Xt(f.values()):[],le=i.size?Xt(i.values()):[];if(m){const we=M[0],Je=new Map(we);we.set("offset",0),Je.set("offset",1),M=[we,Je]}return Is(this.element,M,L,le,this.duration,this.startTime,this.easing,!1)}}class Ps extends _a{constructor(f,i,m,M,L,le,we=!1){super(f,i,le.delay),this.keyframes=m,this.preStyleProps=M,this.postStyleProps=L,this._stretchStartingKeyframe=we,this.timings={duration:le.duration,delay:le.delay,easing:le.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let f=this.keyframes,{delay:i,duration:m,easing:M}=this.timings;if(this._stretchStartingKeyframe&&i){const L=[],le=m+i,we=i/le,Je=gt(f[0]);Je.set("offset",0),L.push(Je);const St=gt(f[0]);St.set("offset",Qa(we)),L.push(St);const Kt=f.length-1;for(let Qt=1;Qt<=Kt;Qt++){let Vn=gt(f[Qt]);const ii=Vn.get("offset");Vn.set("offset",Qa((i+ii*m)/le)),L.push(Vn)}m=le,i=0,M="",f=L}return Is(this.element,f,this.preStyleProps,this.postStyleProps,m,i,M,!0)}}function Qa(u,f=3){const i=Math.pow(10,f-1);return Math.round(u*i)/i}class Ua{}const vs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ja extends Ua{normalizePropertyName(f,i){return Gn(f)}normalizeStyleValue(f,i,m,M){let L="";const le=m.toString().trim();if(vs.has(i)&&0!==m&&"0"!==m)if("number"==typeof m)L="px";else{const we=m.match(/^[+-]?[\d\.]+([a-z]*)$/);we&&0==we[1].length&&M.push(function rt(u,f){return new l.vHH(3005,ze)}())}return le+L}}function Po(u,f,i,m,M,L,le,we,Je,St,Kt,Qt,Vn){return{type:0,element:u,triggerName:f,isRemovalTransition:M,fromState:i,fromStyles:L,toState:m,toStyles:le,timelines:we,queriedElements:Je,preStyleProps:St,postStyleProps:Kt,totalTime:Qt,errors:Vn}}const bs={};class ba{constructor(f,i,m){this._triggerName=f,this.ast=i,this._stateStyles=m}match(f,i,m,M){return function Os(u,f,i,m,M){return u.some(L=>L(f,i,m,M))}(this.ast.matchers,f,i,m,M)}buildStyles(f,i,m){let M=this._stateStyles.get("*");return void 0!==f&&(M=this._stateStyles.get(f?.toString())||M),M?M.buildStyles(i,m):new Map}build(f,i,m,M,L,le,we,Je,St,Kt){const Qt=[],Vn=this.ast.options&&this.ast.options.params||bs,Kn=this.buildStyles(m,we&&we.params||bs,Qt),Jn=Je&&Je.params||bs,vi=this.buildStyles(M,Jn,Qt),Oi=new Set,ji=new Map,xo=new Map,Hr="void"===M,Ba={params:ks(Jn,Vn),delay:this.ast.options?.delay},Na=Kt?[]:$s(f,i,this.ast.animation,L,le,Kn,vi,Ba,St,Qt);let Yr=0;if(Na.forEach(Xa=>{Yr=Math.max(Xa.duration+Xa.delay,Yr)}),Qt.length)return Po(i,this._triggerName,m,M,Hr,Kn,vi,[],[],ji,xo,Yr,Qt);Na.forEach(Xa=>{const gl=Xa.element,js=Ln(ji,gl,new Set);Xa.preStyleProps.forEach(hc=>js.add(hc));const _l=Ln(xo,gl,new Set);Xa.postStyleProps.forEach(hc=>_l.add(hc)),gl!==i&&Oi.add(gl)});const Xo=Xt(Oi.values());return Po(i,this._triggerName,m,M,Hr,Kn,vi,Na,Xo,ji,xo,Yr)}}function ks(u,f){const i=oe(f);for(const m in u)u.hasOwnProperty(m)&&null!=u[m]&&(i[m]=u[m]);return i}class Ja{constructor(f,i,m){this.styles=f,this.defaultParams=i,this.normalizer=m}buildStyles(f,i){const m=new Map,M=oe(this.defaultParams);return Object.keys(f).forEach(L=>{const le=f[L];null!==le&&(M[L]=le)}),this.styles.styles.forEach(L=>{"string"!=typeof L&&L.forEach((le,we)=>{le&&(le=We(le,M,i));const Je=this.normalizer.normalizePropertyName(we,i);le=this.normalizer.normalizeStyleValue(we,Je,le,i),m.set(Je,le)})}),m}}class Rs{constructor(f,i,m){this.name=f,this.ast=i,this._normalizer=m,this.transitionFactories=[],this.states=new Map,i.states.forEach(M=>{this.states.set(M.name,new Ja(M.style,M.options&&M.options.params||{},m))}),Qr(this.states,"true","1"),Qr(this.states,"false","0"),i.transitions.forEach(M=>{this.transitionFactories.push(new ba(f,M,this.states))}),this.fallbackTransition=function Ni(u,f,i){return new ba(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(le,we)=>!0],options:null,queryCount:0,depCount:0},f)}(f,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(f,i,m,M){return this.transitionFactories.find(le=>le.match(f,i,m,M))||null}matchStyles(f,i,m){return this.fallbackTransition.buildStyles(f,i,m)}}function Qr(u,f,i){u.has(f)?u.has(i)||u.set(i,u.get(f)):u.has(i)&&u.set(f,u.get(i))}const sa=new fr;class Ys{constructor(f,i,m){this.bodyNode=f,this._driver=i,this._normalizer=m,this._animations=new Map,this._playersById=new Map,this.players=[]}register(f,i){const m=[],L=br(this._driver,i,m,[]);if(m.length)throw function Nn(u){return new l.vHH(3503,ze)}();this._animations.set(f,L)}_buildPlayer(f,i,m){const M=f.element,L=hi(0,this._normalizer,0,f.keyframes,i,m);return this._driver.animate(M,L,f.duration,f.delay,f.easing,[],!0)}create(f,i,m={}){const M=[],L=this._animations.get(f);let le;const we=new Map;if(L?(le=$s(this._driver,i,L,wt,mt,new Map,new Map,m,sa,M),le.forEach(Kt=>{const Qt=Ln(we,Kt.element,new Map);Kt.postStyleProps.forEach(Vn=>Qt.set(Vn,null))})):(M.push(function Rn(){return new l.vHH(3300,ze)}()),le=[]),M.length)throw function gi(u){return new l.vHH(3504,ze)}();we.forEach((Kt,Qt)=>{Kt.forEach((Vn,ii)=>{Kt.set(ii,this._driver.computeStyle(Qt,ii,Ne.l3))})});const St=wn(le.map(Kt=>{const Qt=we.get(Kt.element);return this._buildPlayer(Kt,new Map,Qt)}));return this._playersById.set(f,St),St.onDestroy(()=>this.destroy(f)),this.players.push(St),St}destroy(f){const i=this._getPlayer(f);i.destroy(),this._playersById.delete(f);const m=this.players.indexOf(i);m>=0&&this.players.splice(m,1)}_getPlayer(f){const i=this._playersById.get(f);if(!i)throw function bn(u){return new l.vHH(3301,ze)}();return i}listen(f,i,m,M){const L=ur(i,"","","");return Fi(this._getPlayer(f),m,L,M),()=>{}}command(f,i,m,M){if("register"==m)return void this.register(f,M[0]);if("create"==m)return void this.create(f,i,M[0]||{});const L=this._getPlayer(f);switch(m){case"play":L.play();break;case"pause":L.pause();break;case"reset":L.reset();break;case"restart":L.restart();break;case"finish":L.finish();break;case"init":L.init();break;case"setPosition":L.setPosition(parseFloat(M[0]));break;case"destroy":this.destroy(f)}}}const $r="ng-animate-queued",Fs="ng-animate-disabled",bl=[],Qi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ls={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fo="__ng_removed";class Sr{constructor(f,i=""){this.namespaceId=i;const m=f&&f.hasOwnProperty("value");if(this.value=function gn(u){return u??null}(m?f.value:f),m){const L=oe(f);delete L.value,this.options=L}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(f){const i=f.params;if(i){const m=this.options.params;Object.keys(i).forEach(M=>{null==m[M]&&(m[M]=i[M])})}}}const K="void",ge=new Sr(K);class X{constructor(f,i,m){this.id=f,this.hostElement=i,this._engine=m,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+f,tr(i,this._hostClassName)}listen(f,i,m,M){if(!this._triggers.has(i))throw function wi(u,f){return new l.vHH(3302,ze)}();if(null==m||0==m.length)throw function Pi(u){return new l.vHH(3303,ze)}();if(!function ar(u){return"start"==u||"done"==u}(m))throw function li(u,f){return new l.vHH(3400,ze)}();const L=Ln(this._elementListeners,f,[]),le={name:i,phase:m,callback:M};L.push(le);const we=Ln(this._engine.statesByElement,f,new Map);return we.has(i)||(tr(f,lt),tr(f,lt+"-"+i),we.set(i,ge)),()=>{this._engine.afterFlush(()=>{const Je=L.indexOf(le);Je>=0&&L.splice(Je,1),this._triggers.has(i)||we.delete(i)})}}register(f,i){return!this._triggers.has(f)&&(this._triggers.set(f,i),!0)}_getTrigger(f){const i=this._triggers.get(f);if(!i)throw function en(u){return new l.vHH(3401,ze)}();return i}trigger(f,i,m,M=!0){const L=this._getTrigger(i),le=new pt(this.id,i,f);let we=this._engine.statesByElement.get(f);we||(tr(f,lt),tr(f,lt+"-"+i),this._engine.statesByElement.set(f,we=new Map));let Je=we.get(i);const St=new Sr(m,this.id);if(!(m&&m.hasOwnProperty("value"))&&Je&&St.absorbOptions(Je.options),we.set(i,St),Je||(Je=ge),St.value!==K&&Je.value===St.value){if(!function aa(u,f){const i=Object.keys(u),m=Object.keys(f);if(i.length!=m.length)return!1;for(let M=0;M<i.length;M++){const L=i[M];if(!f.hasOwnProperty(L)||u[L]!==f[L])return!1}return!0}(Je.params,St.params)){const Jn=[],vi=L.matchStyles(Je.value,Je.params,Jn),Oi=L.matchStyles(St.value,St.params,Jn);Jn.length?this._engine.reportError(Jn):this._engine.afterFlush(()=>{Dt(f,vi),He(f,Oi)})}return}const Vn=Ln(this._engine.playersByElement,f,[]);Vn.forEach(Jn=>{Jn.namespaceId==this.id&&Jn.triggerName==i&&Jn.queued&&Jn.destroy()});let ii=L.matchTransition(Je.value,St.value,f,St.params),Kn=!1;if(!ii){if(!M)return;ii=L.fallbackTransition,Kn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:i,transition:ii,fromState:Je,toState:St,player:le,isFallbackTransition:Kn}),Kn||(tr(f,$r),le.onStart(()=>{Ui(f,$r)})),le.onDone(()=>{let Jn=this.players.indexOf(le);Jn>=0&&this.players.splice(Jn,1);const vi=this._engine.playersByElement.get(f);if(vi){let Oi=vi.indexOf(le);Oi>=0&&vi.splice(Oi,1)}}),this.players.push(le),Vn.push(le),le}deregister(f){this._triggers.delete(f),this._engine.statesByElement.forEach(i=>i.delete(f)),this._elementListeners.forEach((i,m)=>{this._elementListeners.set(m,i.filter(M=>M.name!=f))})}clearElementCache(f){this._engine.statesByElement.delete(f),this._elementListeners.delete(f);const i=this._engine.playersByElement.get(f);i&&(i.forEach(m=>m.destroy()),this._engine.playersByElement.delete(f))}_signalRemovalForInnerTriggers(f,i){const m=this._engine.driver.query(f,je,!0);m.forEach(M=>{if(M[fo])return;const L=this._engine.fetchNamespacesByElement(M);L.size?L.forEach(le=>le.triggerLeaveAnimation(M,i,!1,!0)):this.clearElementCache(M)}),this._engine.afterFlushAnimationsDone(()=>m.forEach(M=>this.clearElementCache(M)))}triggerLeaveAnimation(f,i,m,M){const L=this._engine.statesByElement.get(f),le=new Map;if(L){const we=[];if(L.forEach((Je,St)=>{if(le.set(St,Je.value),this._triggers.has(St)){const Kt=this.trigger(f,St,K,M);Kt&&we.push(Kt)}}),we.length)return this._engine.markElementAsRemoved(this.id,f,!0,i,le),m&&wn(we).onDone(()=>this._engine.processLeaveNode(f)),!0}return!1}prepareLeaveAnimationListeners(f){const i=this._elementListeners.get(f),m=this._engine.statesByElement.get(f);if(i&&m){const M=new Set;i.forEach(L=>{const le=L.name;if(M.has(le))return;M.add(le);const Je=this._triggers.get(le).fallbackTransition,St=m.get(le)||ge,Kt=new Sr(K),Qt=new pt(this.id,le,f);this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:le,transition:Je,fromState:St,toState:Kt,player:Qt,isFallbackTransition:!0})})}}removeNode(f,i){const m=this._engine;if(f.childElementCount&&this._signalRemovalForInnerTriggers(f,i),this.triggerLeaveAnimation(f,i,!0))return;let M=!1;if(m.totalAnimations){const L=m.players.length?m.playersByQueriedElement.get(f):[];if(L&&L.length)M=!0;else{let le=f;for(;le=le.parentNode;)if(m.statesByElement.get(le)){M=!0;break}}}if(this.prepareLeaveAnimationListeners(f),M)m.markElementAsRemoved(this.id,f,!1,i);else{const L=f[fo];(!L||L===Qi)&&(m.afterFlush(()=>this.clearElementCache(f)),m.destroyInnerAnimations(f),m._onRemovalComplete(f,i))}}insertNode(f,i){tr(f,this._hostClassName)}drainQueuedTransitions(f){const i=[];return this._queue.forEach(m=>{const M=m.player;if(M.destroyed)return;const L=m.element,le=this._elementListeners.get(L);le&&le.forEach(we=>{if(we.name==m.triggerName){const Je=ur(L,m.triggerName,m.fromState.value,m.toState.value);Je._data=f,Fi(m.player,we.phase,Je,we.callback)}}),M.markedForDestroy?this._engine.afterFlush(()=>{M.destroy()}):i.push(m)}),this._queue=[],i.sort((m,M)=>{const L=m.transition.ast.depCount,le=M.transition.ast.depCount;return 0==L||0==le?L-le:this._engine.driver.containsElement(m.element,M.element)?1:-1})}destroy(f){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,f)}elementContainsData(f){let i=!1;return this._elementListeners.has(f)&&(i=!0),i=!!this._queue.find(m=>m.element===f)||i,i}}class xe{constructor(f,i,m){this.bodyNode=f,this.driver=i,this._normalizer=m,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(M,L)=>{}}_onRemovalComplete(f,i){this.onRemovalComplete(f,i)}get queuedPlayers(){const f=[];return this._namespaceList.forEach(i=>{i.players.forEach(m=>{m.queued&&f.push(m)})}),f}createNamespace(f,i){const m=new X(f,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(m,i):(this.newHostElements.set(i,m),this.collectEnterElement(i)),this._namespaceLookup[f]=m}_balanceNamespaceList(f,i){const m=this._namespaceList,M=this.namespacesByHostElement;if(m.length-1>=0){let le=!1,we=this.driver.getParentElement(i);for(;we;){const Je=M.get(we);if(Je){const St=m.indexOf(Je);m.splice(St+1,0,f),le=!0;break}we=this.driver.getParentElement(we)}le||m.unshift(f)}else m.push(f);return M.set(i,f),f}register(f,i){let m=this._namespaceLookup[f];return m||(m=this.createNamespace(f,i)),m}registerTrigger(f,i,m){let M=this._namespaceLookup[f];M&&M.register(i,m)&&this.totalAnimations++}destroy(f,i){if(!f)return;const m=this._fetchNamespace(f);this.afterFlush(()=>{this.namespacesByHostElement.delete(m.hostElement),delete this._namespaceLookup[f];const M=this._namespaceList.indexOf(m);M>=0&&this._namespaceList.splice(M,1)}),this.afterFlushAnimationsDone(()=>m.destroy(i))}_fetchNamespace(f){return this._namespaceLookup[f]}fetchNamespacesByElement(f){const i=new Set,m=this.statesByElement.get(f);if(m)for(let M of m.values())if(M.namespaceId){const L=this._fetchNamespace(M.namespaceId);L&&i.add(L)}return i}trigger(f,i,m,M){if(Hn(i)){const L=this._fetchNamespace(f);if(L)return L.trigger(i,m,M),!0}return!1}insertNode(f,i,m,M){if(!Hn(i))return;const L=i[fo];if(L&&L.setForRemoval){L.setForRemoval=!1,L.setForMove=!0;const le=this.collectedLeaveElements.indexOf(i);le>=0&&this.collectedLeaveElements.splice(le,1)}if(f){const le=this._fetchNamespace(f);le&&le.insertNode(i,m)}M&&this.collectEnterElement(i)}collectEnterElement(f){this.collectedEnterElements.push(f)}markElementAsDisabled(f,i){i?this.disabledNodes.has(f)||(this.disabledNodes.add(f),tr(f,Fs)):this.disabledNodes.has(f)&&(this.disabledNodes.delete(f),Ui(f,Fs))}removeNode(f,i,m,M){if(Hn(i)){const L=f?this._fetchNamespace(f):null;if(L?L.removeNode(i,M):this.markElementAsRemoved(f,i,!1,M),m){const le=this.namespacesByHostElement.get(i);le&&le.id!==f&&le.removeNode(i,M)}}else this._onRemovalComplete(i,M)}markElementAsRemoved(f,i,m,M,L){this.collectedLeaveElements.push(i),i[fo]={namespaceId:f,setForRemoval:M,hasAnimation:m,removedBeforeQueried:!1,previousTriggersValues:L}}listen(f,i,m,M,L){return Hn(i)?this._fetchNamespace(f).listen(i,m,M,L):()=>{}}_buildInstruction(f,i,m,M,L){return f.transition.build(this.driver,f.element,f.fromState.value,f.toState.value,m,M,f.fromState.options,f.toState.options,i,L)}destroyInnerAnimations(f){let i=this.driver.query(f,je,!0);i.forEach(m=>this.destroyActiveAnimationsForElement(m)),0!=this.playersByQueriedElement.size&&(i=this.driver.query(f,Be,!0),i.forEach(m=>this.finishActiveQueriedAnimationOnElement(m)))}destroyActiveAnimationsForElement(f){const i=this.playersByElement.get(f);i&&i.forEach(m=>{m.queued?m.markedForDestroy=!0:m.destroy()})}finishActiveQueriedAnimationOnElement(f){const i=this.playersByQueriedElement.get(f);i&&i.forEach(m=>m.finish())}whenRenderingDone(){return new Promise(f=>{if(this.players.length)return wn(this.players).onDone(()=>f());f()})}processLeaveNode(f){const i=f[fo];if(i&&i.setForRemoval){if(f[fo]=Qi,i.namespaceId){this.destroyInnerAnimations(f);const m=this._fetchNamespace(i.namespaceId);m&&m.clearElementCache(f)}this._onRemovalComplete(f,i.setForRemoval)}f.classList?.contains(Fs)&&this.markElementAsDisabled(f,!1),this.driver.query(f,".ng-animate-disabled",!0).forEach(m=>{this.markElementAsDisabled(m,!1)})}flush(f=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((m,M)=>this._balanceNamespaceList(m,M)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let m=0;m<this.collectedEnterElements.length;m++)tr(this.collectedEnterElements[m],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const m=[];try{i=this._flushAnimations(m,f)}finally{for(let M=0;M<m.length;M++)m[M]()}}else for(let m=0;m<this.collectedLeaveElements.length;m++)this.processLeaveNode(this.collectedLeaveElements[m]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(m=>m()),this._flushFns=[],this._whenQuietFns.length){const m=this._whenQuietFns;this._whenQuietFns=[],i.length?wn(i).onDone(()=>{m.forEach(M=>M())}):m.forEach(M=>M())}}reportError(f){throw function si(u){return new l.vHH(3402,ze)}()}_flushAnimations(f,i){const m=new fr,M=[],L=new Map,le=[],we=new Map,Je=new Map,St=new Map,Kt=new Set;this.disabledNodes.forEach(ri=>{Kt.add(ri);const ci=this.driver.query(ri,".ng-animate-queued",!0);for(let Ei=0;Ei<ci.length;Ei++)Kt.add(ci[Ei])});const Qt=this.bodyNode,Vn=Array.from(this.statesByElement.keys()),ii=di(Vn,this.collectedEnterElements),Kn=new Map;let Jn=0;ii.forEach((ri,ci)=>{const Ei=wt+Jn++;Kn.set(ci,Ei),ri.forEach(cr=>tr(cr,Ei))});const vi=[],Oi=new Set,ji=new Set;for(let ri=0;ri<this.collectedLeaveElements.length;ri++){const ci=this.collectedLeaveElements[ri],Ei=ci[fo];Ei&&Ei.setForRemoval&&(vi.push(ci),Oi.add(ci),Ei.hasAnimation?this.driver.query(ci,".ng-star-inserted",!0).forEach(cr=>Oi.add(cr)):ji.add(ci))}const xo=new Map,Hr=di(Vn,Array.from(Oi));Hr.forEach((ri,ci)=>{const Ei=mt+Jn++;xo.set(ci,Ei),ri.forEach(cr=>tr(cr,Ei))}),f.push(()=>{ii.forEach((ri,ci)=>{const Ei=Kn.get(ci);ri.forEach(cr=>Ui(cr,Ei))}),Hr.forEach((ri,ci)=>{const Ei=xo.get(ci);ri.forEach(cr=>Ui(cr,Ei))}),vi.forEach(ri=>{this.processLeaveNode(ri)})});const Ba=[],Na=[];for(let ri=this._namespaceList.length-1;ri>=0;ri--)this._namespaceList[ri].drainQueuedTransitions(i).forEach(Ei=>{const cr=Ei.player,Rr=Ei.element;if(Ba.push(cr),this.collectedEnterElements.length){const Qo=Rr[fo];if(Qo&&Qo.setForMove){if(Qo.previousTriggersValues&&Qo.previousTriggersValues.has(Ei.triggerName)){const vu=Qo.previousTriggersValues.get(Ei.triggerName),ma=this.statesByElement.get(Ei.element);if(ma&&ma.has(Ei.triggerName)){const np=ma.get(Ei.triggerName);np.value=vu,ma.set(Ei.triggerName,np)}}return void cr.destroy()}}const za=!Qt||!this.driver.containsElement(Qt,Rr),oa=xo.get(Rr),yl=Kn.get(Rr),zr=this._buildInstruction(Ei,m,yl,oa,za);if(zr.errors&&zr.errors.length)return void Na.push(zr);if(za)return cr.onStart(()=>Dt(Rr,zr.fromStyles)),cr.onDestroy(()=>He(Rr,zr.toStyles)),void M.push(cr);if(Ei.isFallbackTransition)return cr.onStart(()=>Dt(Rr,zr.fromStyles)),cr.onDestroy(()=>He(Rr,zr.toStyles)),void M.push(cr);const Fc=[];zr.timelines.forEach(Qo=>{Qo.stretchStartingKeyframe=!0,this.disabledNodes.has(Qo.element)||Fc.push(Qo)}),zr.timelines=Fc,m.append(Rr,zr.timelines),le.push({instruction:zr,player:cr,element:Rr}),zr.queriedElements.forEach(Qo=>Ln(we,Qo,[]).push(cr)),zr.preStyleProps.forEach((Qo,vu)=>{if(Qo.size){let ma=Je.get(vu);ma||Je.set(vu,ma=new Set),Qo.forEach((np,dg)=>ma.add(dg))}}),zr.postStyleProps.forEach((Qo,vu)=>{let ma=St.get(vu);ma||St.set(vu,ma=new Set),Qo.forEach((np,dg)=>ma.add(dg))})});if(Na.length){const ri=[];Na.forEach(ci=>{ri.push(function Vt(u,f){return new l.vHH(3505,ze)}())}),Ba.forEach(ci=>ci.destroy()),this.reportError(ri)}const Yr=new Map,Xo=new Map;le.forEach(ri=>{const ci=ri.element;m.has(ci)&&(Xo.set(ci,ci),this._beforeAnimationBuild(ri.player.namespaceId,ri.instruction,Yr))}),M.forEach(ri=>{const ci=ri.element;this._getPreviousPlayers(ci,!1,ri.namespaceId,ri.triggerName,null).forEach(cr=>{Ln(Yr,ci,[]).push(cr),cr.destroy()})});const Xa=vi.filter(ri=>Bs(ri,Je,St)),gl=new Map;lr(gl,this.driver,ji,St,Ne.l3).forEach(ri=>{Bs(ri,Je,St)&&Xa.push(ri)});const _l=new Map;ii.forEach((ri,ci)=>{lr(_l,this.driver,new Set(ri),Je,Ne.k1)}),Xa.forEach(ri=>{const ci=gl.get(ri),Ei=_l.get(ri);gl.set(ri,new Map([...Array.from(ci?.entries()??[]),...Array.from(Ei?.entries()??[])]))});const hc=[],Bd=[],Nd={};le.forEach(ri=>{const{element:ci,player:Ei,instruction:cr}=ri;if(m.has(ci)){if(Kt.has(ci))return Ei.onDestroy(()=>He(ci,cr.toStyles)),Ei.disabled=!0,Ei.overrideTotalTime(cr.totalTime),void M.push(Ei);let Rr=Nd;if(Xo.size>1){let oa=ci;const yl=[];for(;oa=oa.parentNode;){const zr=Xo.get(oa);if(zr){Rr=zr;break}yl.push(oa)}yl.forEach(zr=>Xo.set(zr,Rr))}const za=this._buildAnimation(Ei.namespaceId,cr,Yr,L,_l,gl);if(Ei.setRealPlayer(za),Rr===Nd)hc.push(Ei);else{const oa=this.playersByElement.get(Rr);oa&&oa.length&&(Ei.parentPlayer=wn(oa)),M.push(Ei)}}else Dt(ci,cr.fromStyles),Ei.onDestroy(()=>He(ci,cr.toStyles)),Bd.push(Ei),Kt.has(ci)&&M.push(Ei)}),Bd.forEach(ri=>{const ci=L.get(ri.element);if(ci&&ci.length){const Ei=wn(ci);ri.setRealPlayer(Ei)}}),M.forEach(ri=>{ri.parentPlayer?ri.syncPlayerEvents(ri.parentPlayer):ri.destroy()});for(let ri=0;ri<vi.length;ri++){const ci=vi[ri],Ei=ci[fo];if(Ui(ci,mt),Ei&&Ei.hasAnimation)continue;let cr=[];if(we.size){let za=we.get(ci);za&&za.length&&cr.push(...za);let oa=this.driver.query(ci,Be,!0);for(let yl=0;yl<oa.length;yl++){let zr=we.get(oa[yl]);zr&&zr.length&&cr.push(...zr)}}const Rr=cr.filter(za=>!za.destroyed);Rr.length?ti(this,ci,Rr):this.processLeaveNode(ci)}return vi.length=0,hc.forEach(ri=>{this.players.push(ri),ri.onDone(()=>{ri.destroy();const ci=this.players.indexOf(ri);this.players.splice(ci,1)}),ri.play()}),hc}elementContainsData(f,i){let m=!1;const M=i[fo];return M&&M.setForRemoval&&(m=!0),this.playersByElement.has(i)&&(m=!0),this.playersByQueriedElement.has(i)&&(m=!0),this.statesByElement.has(i)&&(m=!0),this._fetchNamespace(f).elementContainsData(i)||m}afterFlush(f){this._flushFns.push(f)}afterFlushAnimationsDone(f){this._whenQuietFns.push(f)}_getPreviousPlayers(f,i,m,M,L){let le=[];if(i){const we=this.playersByQueriedElement.get(f);we&&(le=we)}else{const we=this.playersByElement.get(f);if(we){const Je=!L||L==K;we.forEach(St=>{St.queued||!Je&&St.triggerName!=M||le.push(St)})}}return(m||M)&&(le=le.filter(we=>!(m&&m!=we.namespaceId||M&&M!=we.triggerName))),le}_beforeAnimationBuild(f,i,m){const L=i.element,le=i.isRemovalTransition?void 0:f,we=i.isRemovalTransition?void 0:i.triggerName;for(const Je of i.timelines){const St=Je.element,Kt=St!==L,Qt=Ln(m,St,[]);this._getPreviousPlayers(St,Kt,le,we,i.toState).forEach(ii=>{const Kn=ii.getRealPlayer();Kn.beforeDestroy&&Kn.beforeDestroy(),ii.destroy(),Qt.push(ii)})}Dt(L,i.fromStyles)}_buildAnimation(f,i,m,M,L,le){const we=i.triggerName,Je=i.element,St=[],Kt=new Set,Qt=new Set,Vn=i.timelines.map(Kn=>{const Jn=Kn.element;Kt.add(Jn);const vi=Jn[fo];if(vi&&vi.removedBeforeQueried)return new Ne.ZN(Kn.duration,Kn.delay);const Oi=Jn!==Je,ji=function es(u){const f=[];return Go(u,f),f}((m.get(Jn)||bl).map(Yr=>Yr.getRealPlayer())).filter(Yr=>!!Yr.element&&Yr.element===Jn),xo=L.get(Jn),Hr=le.get(Jn),Ba=hi(0,this._normalizer,0,Kn.keyframes,xo,Hr),Na=this._buildPlayer(Kn,Ba,ji);if(Kn.subTimeline&&M&&Qt.add(Jn),Oi){const Yr=new pt(f,we,Jn);Yr.setRealPlayer(Na),St.push(Yr)}return Na});St.forEach(Kn=>{Ln(this.playersByQueriedElement,Kn.element,[]).push(Kn),Kn.onDone(()=>function Yt(u,f,i){let m=u.get(f);if(m){if(m.length){const M=m.indexOf(i);m.splice(M,1)}0==m.length&&u.delete(f)}return m}(this.playersByQueriedElement,Kn.element,Kn))}),Kt.forEach(Kn=>tr(Kn,Qe));const ii=wn(Vn);return ii.onDestroy(()=>{Kt.forEach(Kn=>Ui(Kn,Qe)),He(Je,i.toStyles)}),Qt.forEach(Kn=>{Ln(M,Kn,[]).push(ii)}),ii}_buildPlayer(f,i,m){return i.length>0?this.driver.animate(f.element,i,f.duration,f.delay,f.easing,m):new Ne.ZN(f.duration,f.delay)}}class pt{constructor(f,i,m){this.namespaceId=f,this.triggerName=i,this.element=m,this._player=new Ne.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(f){this._containsRealPlayer||(this._player=f,this._queuedCallbacks.forEach((i,m)=>{i.forEach(M=>Fi(f,m,void 0,M))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(f.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(f){this.totalTime=f}syncPlayerEvents(f){const i=this._player;i.triggerCallback&&f.onStart(()=>i.triggerCallback("start")),f.onDone(()=>this.finish()),f.onDestroy(()=>this.destroy())}_queueEvent(f,i){Ln(this._queuedCallbacks,f,[]).push(i)}onDone(f){this.queued&&this._queueEvent("done",f),this._player.onDone(f)}onStart(f){this.queued&&this._queueEvent("start",f),this._player.onStart(f)}onDestroy(f){this.queued&&this._queueEvent("destroy",f),this._player.onDestroy(f)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(f){this.queued||this._player.setPosition(f)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(f){const i=this._player;i.triggerCallback&&i.triggerCallback(f)}}function Hn(u){return u&&1===u.nodeType}function er(u,f){const i=u.style.display;return u.style.display=f??"none",i}function lr(u,f,i,m,M){const L=[];i.forEach(Je=>L.push(er(Je)));const le=[];m.forEach((Je,St)=>{const Kt=new Map;Je.forEach(Qt=>{const Vn=f.computeStyle(St,Qt,M);Kt.set(Qt,Vn),(!Vn||0==Vn.length)&&(St[fo]=Ls,le.push(St))}),u.set(St,Kt)});let we=0;return i.forEach(Je=>er(Je,L[we++])),le}function di(u,f){const i=new Map;if(u.forEach(we=>i.set(we,[])),0==f.length)return i;const M=new Set(f),L=new Map;function le(we){if(!we)return 1;let Je=L.get(we);if(Je)return Je;const St=we.parentNode;return Je=i.has(St)?St:M.has(St)?1:le(St),L.set(we,Je),Je}return f.forEach(we=>{const Je=le(we);1!==Je&&i.get(Je).push(we)}),i}function tr(u,f){u.classList?.add(f)}function Ui(u,f){u.classList?.remove(f)}function ti(u,f,i){wn(i).onDone(()=>u.processLeaveNode(f))}function Go(u,f){for(let i=0;i<u.length;i++){const m=u[i];m instanceof Ne.ZE?Go(m.players,f):f.push(m)}}function Bs(u,f,i){const m=i.get(u);if(!m)return!1;let M=f.get(u);return M?m.forEach(L=>M.add(L)):f.set(u,m),i.delete(u),!0}class la{constructor(f,i,m){this.bodyNode=f,this._driver=i,this._normalizer=m,this._triggerCache={},this.onRemovalComplete=(M,L)=>{},this._transitionEngine=new xe(f,i,m),this._timelineEngine=new Ys(f,i,m),this._transitionEngine.onRemovalComplete=(M,L)=>this.onRemovalComplete(M,L)}registerTrigger(f,i,m,M,L){const le=f+"-"+M;let we=this._triggerCache[le];if(!we){const Je=[],Kt=br(this._driver,L,Je,[]);if(Je.length)throw function zt(u,f){return new l.vHH(3404,ze)}();we=function qs(u,f,i){return new Rs(u,f,i)}(M,Kt,this._normalizer),this._triggerCache[le]=we}this._transitionEngine.registerTrigger(i,M,we)}register(f,i){this._transitionEngine.register(f,i)}destroy(f,i){this._transitionEngine.destroy(f,i)}onInsert(f,i,m,M){this._transitionEngine.insertNode(f,i,m,M)}onRemove(f,i,m,M){this._transitionEngine.removeNode(f,i,M||!1,m)}disableAnimations(f,i){this._transitionEngine.markElementAsDisabled(f,i)}process(f,i,m,M){if("@"==m.charAt(0)){const[L,le]=pr(m);this._timelineEngine.command(L,i,le,M)}else this._transitionEngine.trigger(f,i,m,M)}listen(f,i,m,M,L){if("@"==m.charAt(0)){const[le,we]=pr(m);return this._timelineEngine.listen(le,i,we,L)}return this._transitionEngine.listen(f,i,m,M,L)}flush(f=-1){this._transitionEngine.flush(f)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let el=(()=>{class u{constructor(i,m,M){this._element=i,this._startStyles=m,this._endStyles=M,this._state=0;let L=u.initialStylesByElement.get(i);L||u.initialStylesByElement.set(i,L=new Map),this._initialStyles=L}start(){this._state<1&&(this._startStyles&&He(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(He(this._element,this._initialStyles),this._endStyles&&(He(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(Dt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Dt(this._element,this._endStyles),this._endStyles=null),He(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function te(u){let f=null;return u.forEach((i,m)=>{(function N(u){return"display"===u||"position"===u})(m)&&(f=f||new Map,f.set(m,i))}),f}class G{constructor(f,i,m,M){this.element=f,this.keyframes=i,this.options=m,this._specialStyles=M,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=m.duration,this._delay=m.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(f=>f()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const f=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,f,this.options),this._finalKeyframe=f.length?f[f.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(f){const i=[];return f.forEach(m=>{i.push(Object.fromEntries(m))}),i}_triggerWebAnimation(f,i,m){return f.animate(this._convertKeyframesToObject(i),m)}onStart(f){this._onStartFns.push(f)}onDone(f){this._onDoneFns.push(f)}onDestroy(f){this._onDestroyFns.push(f)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(f=>f()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(f=>f()),this._onDestroyFns=[])}setPosition(f){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=f*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const f=new Map;this.hasStarted()&&this._finalKeyframe.forEach((m,M)=>{"offset"!==M&&f.set(M,this._finished?m:En(this.element,M))}),this.currentSnapshot=f}triggerCallback(f){const i="start"===f?this._onStartFns:this._onDoneFns;i.forEach(m=>m()),i.length=0}}class Ee{validateStyleProperty(f){return!0}validateAnimatableStyleProperty(f){return!0}matchesElement(f,i){return!1}containsElement(f,i){return un(f,i)}getParentElement(f){return ne(f)}query(f,i,m){return Cn(f,i,m)}computeStyle(f,i,m){return window.getComputedStyle(f)[i]}animate(f,i,m,M,L,le=[]){const Je={duration:m,delay:M,fill:0==M?"both":"forwards"};L&&(Je.easing=L);const St=new Map,Kt=le.filter(ii=>ii instanceof G);(function Ci(u,f){return 0===u||0===f})(m,M)&&Kt.forEach(ii=>{ii.currentSnapshot.forEach((Kn,Jn)=>St.set(Jn,Kn))});let Qt=function Oe(u){return u.length?u[0]instanceof Map?u:u.map(f=>Se(f)):[]}(i).map(ii=>gt(ii));Qt=function qi(u,f,i){if(i.size&&f.length){let m=f[0],M=[];if(i.forEach((L,le)=>{m.has(le)||M.push(le),m.set(le,L)}),M.length)for(let L=1;L<f.length;L++){let le=f[L];M.forEach(we=>le.set(we,En(u,we)))}}return f}(f,Qt,St);const Vn=function Ks(u,f){let i=null,m=null;return Array.isArray(f)&&f.length?(i=te(f[0]),f.length>1&&(m=te(f[f.length-1]))):f instanceof Map&&(i=te(f)),i||m?new el(u,i,m):null}(f,Qt);return new G(f,Qt,Je,Vn)}}var kt=U(6895);let Wn=(()=>{class u extends Ne._j{constructor(i,m){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(m.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(i){const m=this._nextAnimationId.toString();this._nextAnimationId++;const M=Array.isArray(i)?(0,Ne.vP)(i):i;return ro(this._renderer,null,m,"register",[M]),new Zr(m,this._renderer)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.FYo),l.LFG(kt.K0))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();class Zr extends Ne.LC{constructor(f,i){super(),this._id=f,this._renderer=i}create(f,i){return new Do(this._id,f,i||{},this._renderer)}}class Do{constructor(f,i,m,M){this.id=f,this.element=i,this._renderer=M,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",m)}_listen(f,i){return this._renderer.listen(this.element,`@@${this.id}:${f}`,i)}_command(f,...i){return ro(this._renderer,this.element,this.id,f,i)}onDone(f){this._listen("done",f)}onStart(f){this._listen("start",f)}onDestroy(f){this._listen("destroy",f)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(f){this._command("setPosition",f)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ro(u,f,i,m,M){return u.setProperty(f,`@@${i}:${m}`,M)}const cs="@.disabled";let Wu=(()=>{class u{constructor(i,m,M){this.delegate=i,this.engine=m,this._zone=M,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),m.onRemovalComplete=(L,le)=>{const we=le?.parentNode(L);we&&le.removeChild(we,L)}}createRenderer(i,m){const L=this.delegate.createRenderer(i,m);if(!(i&&m&&m.data&&m.data.animation)){let Kt=this._rendererCache.get(L);return Kt||(Kt=new Lc("",L,this.engine),this._rendererCache.set(L,Kt)),Kt}const le=m.id,we=m.id+"-"+this._currentId;this._currentId++,this.engine.register(we,i);const Je=Kt=>{Array.isArray(Kt)?Kt.forEach(Je):this.engine.registerTrigger(le,we,i,Kt.name,Kt)};return m.data.animation.forEach(Je),new bu(this,we,L,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,m,M){i>=0&&i<this._microtaskId?this._zone.run(()=>m(M)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(L=>{const[le,we]=L;le(we)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([m,M]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.FYo),l.LFG(la),l.LFG(l.R0b))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();class Lc{constructor(f,i,m){this.namespaceId=f,this.delegate=i,this.engine=m,this.destroyNode=this.delegate.destroyNode?M=>i.destroyNode(M):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(f,i){return this.delegate.createElement(f,i)}createComment(f){return this.delegate.createComment(f)}createText(f){return this.delegate.createText(f)}appendChild(f,i){this.delegate.appendChild(f,i),this.engine.onInsert(this.namespaceId,i,f,!1)}insertBefore(f,i,m,M=!0){this.delegate.insertBefore(f,i,m),this.engine.onInsert(this.namespaceId,i,f,M)}removeChild(f,i,m){this.engine.onRemove(this.namespaceId,i,this.delegate,m)}selectRootElement(f,i){return this.delegate.selectRootElement(f,i)}parentNode(f){return this.delegate.parentNode(f)}nextSibling(f){return this.delegate.nextSibling(f)}setAttribute(f,i,m,M){this.delegate.setAttribute(f,i,m,M)}removeAttribute(f,i,m){this.delegate.removeAttribute(f,i,m)}addClass(f,i){this.delegate.addClass(f,i)}removeClass(f,i){this.delegate.removeClass(f,i)}setStyle(f,i,m,M){this.delegate.setStyle(f,i,m,M)}removeStyle(f,i,m){this.delegate.removeStyle(f,i,m)}setProperty(f,i,m){"@"==i.charAt(0)&&i==cs?this.disableAnimations(f,!!m):this.delegate.setProperty(f,i,m)}setValue(f,i){this.delegate.setValue(f,i)}listen(f,i,m){return this.delegate.listen(f,i,m)}disableAnimations(f,i){this.engine.disableAnimations(f,i)}}class bu extends Lc{constructor(f,i,m,M){super(i,m,M),this.factory=f,this.namespaceId=i}setProperty(f,i,m){"@"==i.charAt(0)?"."==i.charAt(1)&&i==cs?this.disableAnimations(f,m=void 0===m||!!m):this.engine.process(this.namespaceId,f,i.slice(1),m):this.delegate.setProperty(f,i,m)}listen(f,i,m){if("@"==i.charAt(0)){const M=function Xs(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(f);let L=i.slice(1),le="";return"@"!=L.charAt(0)&&([L,le]=function ko(u){const f=u.indexOf(".");return[u.substring(0,f),u.slice(f+1)]}(L)),this.engine.listen(this.namespaceId,M,L,le,we=>{this.factory.scheduleListenerCallback(we._data||-1,m,we)})}return this.delegate.listen(f,i,m)}}let ts=(()=>{class u extends la{constructor(i,m,M){super(i.body,m,M)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(kt.K0),l.LFG(mi),l.LFG(Ua))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();const ws=[{provide:Ne._j,useClass:Wn},{provide:Ua,useFactory:function wa(){return new ja}},{provide:la,useClass:ts},{provide:l.FYo,useFactory:function tl(u,f,i){return new Wu(u,f,i)},deps:[I.se,la,l.R0b]}],nr=[{provide:mi,useFactory:()=>new Ee},{provide:l.QbO,useValue:"BrowserAnimations"},...ws],xl=[{provide:mi,useClass:Zn},{provide:l.QbO,useValue:"NoopAnimations"},...ws];let qu=(()=>{class u{static withConfig(i){return{ngModule:u,providers:i.disableAnimations?xl:nr}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:nr,imports:[I.b2]}),u})();var Ro=U(9898);function Vl(u,f,i,m,M,L,le){try{var we=u[L](le),Je=we.value}catch(St){return void i(St)}we.done?f(Je):Promise.resolve(Je).then(m,M)}function oo(u){return function(){var f=this,i=arguments;return new Promise(function(m,M){var L=u.apply(f,i);function le(Je){Vl(L,m,M,le,we,"next",Je)}function we(Je){Vl(L,m,M,le,we,"throw",Je)}le(void 0)})}}var Vr=U(7579);class Ku extends Vr.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(f){const{hasError:i,_hasValue:m,_value:M,thrownError:L,isStopped:le,_isComplete:we}=this;i?f.error(L):(le||we)&&(m&&f.next(M),f.complete())}next(f){this.isStopped||(this._value=f,this._hasValue=!0)}complete(){const{_hasValue:f,_value:i,_isComplete:m}=this;m||(this._isComplete=!0,f&&super.next(i),super.complete())}}var Qs=U(727),Ho=U(590);const Ga=new l.OlP("MapboxApiKey");let Tr=(()=>{class u{constructor(i,m){this.zone=i,this.MAPBOX_API_KEY=m,this.mapCreated=new Ku,this.mapLoaded=new Ku,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new Qs.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(i){this.zone.onStable.pipe((0,Ho.P)()).subscribe(()=>{i.customMapboxApiUrl&&this.assign(Ro,"config.API_URL",i.customMapboxApiUrl),this.createMap({...i.mapOptions,accessToken:i.accessToken||this.MAPBOX_API_KEY||""}),this.hookEvents(i.mapEvents),this.mapEvents=i.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(i)})}updateMaxZoom(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(i)})}updateMinPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(i)})}updateMaxPitch(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(i)})}updateRenderWorldCopies(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(i)})}updateScrollZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(i){return this.zone.runOutsideAngular(()=>{i?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(i)})}updateMaxBounds(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(i)})}changeCanvasCursor(i){this.mapInstance.getCanvasContainer().style.cursor=i}queryRenderedFeatures(i,m){return this.mapInstance.queryRenderedFeatures(i,m)}panTo(i,m){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(i,m)})}move(i,m,M,L,le,we){return this.zone.runOutsideAngular(()=>{this.mapInstance[i]({...m,zoom:M??this.mapInstance.getZoom(),center:L??this.mapInstance.getCenter(),bearing:le??this.mapInstance.getBearing(),pitch:we??this.mapInstance.getPitch()})})}addLayer(i,m,M){this.zone.runOutsideAngular(()=>{Object.keys(i.layerOptions).forEach(L=>{void 0===i.layerOptions[L]&&delete i.layerOptions[L]}),this.mapInstance.addLayer(i.layerOptions,M),m&&((i.layerEvents.layerClick.observed||i.layerEvents.click.observed)&&this.mapInstance.on("click",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerClick.emit(L),i.layerEvents.click.emit(L)})}),(i.layerEvents.layerDblClick.observed||i.layerEvents.dblClick.observed)&&this.mapInstance.on("dblclick",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerDblClick.emit(L),i.layerEvents.dblClick.emit(L)})}),(i.layerEvents.layerMouseDown.observed||i.layerEvents.mouseDown.observed)&&this.mapInstance.on("mousedown",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseDown.emit(L),i.layerEvents.mouseDown.emit(L)})}),(i.layerEvents.layerMouseUp.observed||i.layerEvents.mouseUp.observed)&&this.mapInstance.on("mouseup",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseUp.emit(L),i.layerEvents.mouseUp.emit(L)})}),(i.layerEvents.layerMouseEnter.observed||i.layerEvents.mouseEnter.observed)&&this.mapInstance.on("mouseenter",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseEnter.emit(L),i.layerEvents.mouseEnter.emit(L)})}),(i.layerEvents.layerMouseLeave.observed||i.layerEvents.mouseLeave.observed)&&this.mapInstance.on("mouseleave",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseLeave.emit(L),i.layerEvents.mouseLeave.emit(L)})}),(i.layerEvents.layerMouseMove.observed||i.layerEvents.mouseMove.observed)&&this.mapInstance.on("mousemove",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseMove.emit(L),i.layerEvents.mouseMove.emit(L)})}),(i.layerEvents.layerMouseOver.observed||i.layerEvents.mouseOver.observed)&&this.mapInstance.on("mouseover",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseOver.emit(L),i.layerEvents.mouseOver.emit(L)})}),(i.layerEvents.layerMouseOut.observed||i.layerEvents.mouseOut.observed)&&this.mapInstance.on("mouseout",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerMouseOut.emit(L),i.layerEvents.mouseOut.emit(L)})}),(i.layerEvents.layerContextMenu.observed||i.layerEvents.contextMenu.observed)&&this.mapInstance.on("contextmenu",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerContextMenu.emit(L),i.layerEvents.contextMenu.emit(L)})}),(i.layerEvents.layerTouchStart.observed||i.layerEvents.touchStart.observed)&&this.mapInstance.on("touchstart",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerTouchStart.emit(L),i.layerEvents.touchStart.emit(L)})}),(i.layerEvents.layerTouchEnd.observed||i.layerEvents.touchEnd.observed)&&this.mapInstance.on("touchend",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerTouchEnd.emit(L),i.layerEvents.touchEnd.emit(L)})}),(i.layerEvents.layerTouchCancel.observed||i.layerEvents.touchCancel.observed)&&this.mapInstance.on("touchcancel",i.layerOptions.id,L=>{this.zone.run(()=>{i.layerEvents.layerTouchCancel.emit(L),i.layerEvents.touchCancel.emit(L)})}))})}removeLayer(i){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(i)&&this.mapInstance.removeLayer(i)})}addMarker(i){const m={offset:i.markersOptions.offset,anchor:i.markersOptions.anchor,draggable:!!i.markersOptions.draggable,rotationAlignment:i.markersOptions.rotationAlignment,pitchAlignment:i.markersOptions.pitchAlignment,clickTolerance:i.markersOptions.clickTolerance};i.markersOptions.element.childNodes.length>0&&(m.element=i.markersOptions.element);const M=new Ro.Marker(m);return(i.markersEvents.markerDragStart.observed||i.markersEvents.dragStart.observed)&&M.on("dragstart",le=>{if(le){const{target:we}=le;this.zone.run(()=>{i.markersEvents.markerDragStart.emit(we),i.markersEvents.dragStart.emit(we)})}}),(i.markersEvents.markerDrag.observed||i.markersEvents.drag.observed)&&M.on("drag",le=>{if(le){const{target:we}=le;this.zone.run(()=>{i.markersEvents.markerDrag.emit(we),i.markersEvents.drag.emit(we)})}}),(i.markersEvents.markerDragEnd.observed||i.markersEvents.dragEnd.observed)&&M.on("dragend",le=>{if(le){const{target:we}=le;this.zone.run(()=>{i.markersEvents.markerDragEnd.emit(we),i.markersEvents.dragEnd.emit(we)})}}),M.setLngLat(i.markersOptions.feature?i.markersOptions.feature.geometry.coordinates:i.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(M.addTo(this.mapInstance),M))}removeMarker(i){this.markersToRemove.push(i)}createPopup(i,m){return this.zone.runOutsideAngular(()=>{Object.keys(i.popupOptions).forEach(L=>void 0===i.popupOptions[L]&&delete i.popupOptions[L]);const M=new Ro.Popup(i.popupOptions);return M.setDOMContent(m),(i.popupEvents.popupClose.observed||i.popupEvents.close.observed)&&M.on("close",()=>{this.zone.run(()=>{i.popupEvents.popupClose.emit(),i.popupEvents.close.emit()})}),(i.popupEvents.popupOpen.observed||i.popupEvents.open.observed)&&M.on("open",()=>{this.zone.run(()=>{i.popupEvents.popupOpen.emit(),i.popupEvents.open.emit()})}),M})}addPopupToMap(i,m,M=!1){return this.zone.runOutsideAngular(()=>{M&&i._listeners&&delete i._listeners.open,i.setLngLat(m),i.addTo(this.mapInstance)})}addPopupToMarker(i,m){return this.zone.runOutsideAngular(()=>{i.setPopup(m)})}removePopupFromMap(i,m=!1){m&&i._listeners&&delete i._listeners.close,this.popupsToRemove.push(i)}removePopupFromMarker(i){return this.zone.runOutsideAngular(()=>{i.setPopup(void 0)})}addControl(i,m){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(i,m)})}removeControl(i){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(i)})}loadAndAddImage(i,m,M){var L=this;return oo(function*(){return L.zone.runOutsideAngular(()=>new Promise((le,we)=>{L.mapInstance.loadImage(m,(Je,St)=>{Je?we(Je):(L.addImage(i,St,M),le())})}))})()}addImage(i,m,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(i,m,M)})}removeImage(i){this.imageIdsToRemove.push(i)}addSource(i,m){return this.zone.runOutsideAngular(()=>{Object.keys(m).forEach(M=>void 0===m[M]&&delete m[M]),this.mapInstance.addSource(i,m)})}getSource(i){return this.mapInstance.getSource(i)}removeSource(i){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(i).forEach(m=>this.mapInstance.removeLayer(m.id)),this.mapInstance.removeSource(i)})}setAllLayerPaintProperty(i,m){return this.zone.runOutsideAngular(()=>{Object.keys(m).forEach(M=>{this.mapInstance.setPaintProperty(i,M,m[M])})})}setAllLayerLayoutProperty(i,m){return this.zone.runOutsideAngular(()=>{Object.keys(m).forEach(M=>{this.mapInstance.setLayoutProperty(i,M,m[M])})})}setLayerFilter(i,m){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(i,m)})}setLayerBefore(i,m){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(i,m)})}setLayerZoomRange(i,m,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(i,m||0,M||20)})}fitBounds(i,m){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(i,m)})}fitScreenCoordinates(i,m,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(i[0],i[1],m,M)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(i){l.R0b.assertNotInAngularZone(),Object.keys(i).forEach(M=>{void 0===i[M]&&delete i[M]}),this.mapInstance=new Ro.Map(i),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(i.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const i of this.markersToRemove)i.remove();this.markersToRemove=[]}removePopups(){for(const i of this.popupsToRemove)i.remove();this.popupsToRemove=[]}removeImages(){for(const i of this.imageIdsToRemove)this.mapInstance.removeImage(i);this.imageIdsToRemove=[]}findLayersBySourceId(i){const m=this.mapInstance.getStyle().layers;return null==m?[]:m.filter(M=>"source"in M&&M.source===i)}hookEvents(i){this.mapInstance.on("load",m=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{i.mapLoad.emit(m.target),i.load.emit(m.target)})}),(i.mapResize.observed||i.resize.observed)&&this.mapInstance.on("resize",m=>this.zone.run(()=>{i.mapResize.emit(m),i.resize.emit(m)})),(i.mapRemove.observed||i.remove.observed)&&this.mapInstance.on("remove",m=>this.zone.run(()=>{i.mapRemove.emit(m),i.remove.emit(m)})),(i.mapMouseDown.observed||i.mouseDown.observed)&&this.mapInstance.on("mousedown",m=>this.zone.run(()=>{i.mapMouseDown.emit(m),i.mouseDown.emit(m)})),(i.mapMouseUp.observed||i.mouseUp.observed)&&this.mapInstance.on("mouseup",m=>this.zone.run(()=>{i.mapMouseUp.emit(m),i.mouseUp.emit(m)})),(i.mapMouseMove.observed||i.mouseMove.observed)&&this.mapInstance.on("mousemove",m=>this.zone.run(()=>{i.mapMouseMove.emit(m),i.mouseMove.emit(m)})),(i.mapClick.observed||i.click.observed)&&this.mapInstance.on("click",m=>this.zone.run(()=>{i.mapClick.emit(m),i.click.emit(m)})),(i.mapDblClick.observed||i.dblClick.observed)&&this.mapInstance.on("dblclick",m=>this.zone.run(()=>{i.mapDblClick.emit(m),i.dblClick.emit(m)})),(i.mapMouseOver.observed||i.mouseOver.observed)&&this.mapInstance.on("mouseover",m=>this.zone.run(()=>{i.mapMouseOver.emit(m),i.mouseOver.emit(m)})),(i.mapMouseOut.observed||i.mouseOut.observed)&&this.mapInstance.on("mouseout",m=>this.zone.run(()=>{i.mapMouseOut.emit(m),i.mouseOut.emit(m)})),(i.mapContextMenu.observed||i.contextMenu.observed)&&this.mapInstance.on("contextmenu",m=>this.zone.run(()=>{i.mapContextMenu.emit(m),i.contextMenu.emit(m)})),(i.mapTouchStart.observed||i.touchStart.observed)&&this.mapInstance.on("touchstart",m=>this.zone.run(()=>{i.mapTouchStart.emit(m),i.touchStart.emit(m)})),(i.mapTouchEnd.observed||i.touchEnd.observed)&&this.mapInstance.on("touchend",m=>this.zone.run(()=>{i.mapTouchEnd.emit(m),i.touchEnd.emit(m)})),(i.mapTouchMove.observed||i.touchMove.observed)&&this.mapInstance.on("touchmove",m=>this.zone.run(()=>{i.mapTouchMove.emit(m),i.touchMove.emit(m)})),(i.mapTouchCancel.observed||i.touchCancel.observed)&&this.mapInstance.on("touchcancel",m=>this.zone.run(()=>{i.mapTouchCancel.emit(m),i.touchCancel.emit(m)})),(i.mapWheel.observed||i.wheel.observed)&&this.mapInstance.on("wheel",m=>this.zone.run(()=>{i.mapWheel.emit(m),i.wheel.emit(m)})),i.moveStart.observed&&this.mapInstance.on("movestart",m=>this.zone.run(()=>i.moveStart.emit(m))),i.move.observed&&this.mapInstance.on("move",m=>this.zone.run(()=>i.move.emit(m))),i.moveEnd.observed&&this.mapInstance.on("moveend",m=>this.zone.run(()=>i.moveEnd.emit(m))),(i.mapDragStart.observed||i.dragStart.observed)&&this.mapInstance.on("dragstart",m=>this.zone.run(()=>{i.mapDragStart.emit(m),i.dragStart.emit(m)})),(i.mapDrag.observed||i.drag.observed)&&this.mapInstance.on("drag",m=>this.zone.run(()=>{i.mapDrag.emit(m),i.drag.emit(m)})),(i.mapDragEnd.observed||i.dragEnd.observed)&&this.mapInstance.on("dragend",m=>this.zone.run(()=>{i.mapDragEnd.emit(m),i.dragEnd.emit(m)})),i.zoomStart.observed&&this.mapInstance.on("zoomstart",m=>this.zone.run(()=>i.zoomStart.emit(m))),i.zoomEvt.observed&&this.mapInstance.on("zoom",m=>this.zone.run(()=>i.zoomEvt.emit(m))),i.zoomEnd.observed&&this.mapInstance.on("zoomend",m=>this.zone.run(()=>i.zoomEnd.emit(m))),i.rotateStart.observed&&this.mapInstance.on("rotatestart",m=>this.zone.run(()=>i.rotateStart.emit(m))),i.rotate.observed&&this.mapInstance.on("rotate",m=>this.zone.run(()=>i.rotate.emit(m))),i.rotateEnd.observed&&this.mapInstance.on("rotateend",m=>this.zone.run(()=>i.rotateEnd.emit(m))),i.pitchStart.observed&&this.mapInstance.on("pitchstart",m=>this.zone.run(()=>i.pitchStart.emit(m))),i.pitchEvt.observed&&this.mapInstance.on("pitch",m=>this.zone.run(()=>i.pitchEvt.emit(m))),i.pitchEnd.observed&&this.mapInstance.on("pitchend",m=>this.zone.run(()=>i.pitchEnd.emit(m))),i.boxZoomStart.observed&&this.mapInstance.on("boxzoomstart",m=>this.zone.run(()=>i.boxZoomStart.emit(m))),i.boxZoomEnd.observed&&this.mapInstance.on("boxzoomend",m=>this.zone.run(()=>i.boxZoomEnd.emit(m))),i.boxZoomCancel.observed&&this.mapInstance.on("boxzoomcancel",m=>this.zone.run(()=>i.boxZoomCancel.emit(m))),i.webGlContextLost.observed&&this.mapInstance.on("webglcontextlost",m=>this.zone.run(()=>i.webGlContextLost.emit(m))),i.webGlContextRestored.observed&&this.mapInstance.on("webglcontextrestored",m=>this.zone.run(()=>i.webGlContextRestored.emit(m))),i.render.observed&&this.mapInstance.on("render",m=>this.zone.run(()=>i.render.emit(m))),(i.mapError.observed||i.error.observed)&&this.mapInstance.on("error",m=>this.zone.run(()=>{i.mapError.emit(m),i.error.emit(m)})),i.data.observed&&this.mapInstance.on("data",m=>this.zone.run(()=>i.data.emit(m))),i.styleData.observed&&this.mapInstance.on("styledata",m=>this.zone.run(()=>i.styleData.emit(m))),i.sourceData.observed&&this.mapInstance.on("sourcedata",m=>this.zone.run(()=>i.sourceData.emit(m))),i.dataLoading.observed&&this.mapInstance.on("dataloading",m=>this.zone.run(()=>i.dataLoading.emit(m))),i.styleDataLoading.observed&&this.mapInstance.on("styledataloading",m=>this.zone.run(()=>i.styleDataLoading.emit(m))),i.sourceDataLoading.observed&&this.mapInstance.on("sourcedataloading",m=>this.zone.run(()=>i.sourceDataLoading.emit(m))),i.styleImageMissing.observed&&this.mapInstance.on("styleimagemissing",m=>this.zone.run(()=>i.styleImageMissing.emit(m))),i.idle.observed&&this.mapInstance.on("idle",m=>this.zone.run(()=>i.idle.emit(m)))}assign(i,m,M){if("string"==typeof m&&(m=m.split(".")),m.length>1){const L=m.shift();this.assign(i[L]="[object Object]"===Object.prototype.toString.call(i[L])?i[L]:{},m,M)}else i[m[0]]=M}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(l.R0b),l.LFG(Ga,8))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac}),u})();const wl=["content"],Bc=["*"];class Js{constructor(f){this.container=f}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let Ur=(()=>{class u{constructor(i){this.mapService=i,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Js(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-control"]],viewQuery:function(i,m){if(1&i&&l.Gf(wl,7),2&i){let M;l.iGM(M=l.CRH())&&(m.content=M.first)}},inputs:{position:"position"},ngContentSelectors:Bc,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(i,m){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),u})(),us=(()=>{class u{constructor(i,m){this.mapService=i,this.controlComponent=m}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.compact&&(i.compact=this.compact),void 0!==this.customAttribution&&(i.customAttribution=this.customAttribution),this.controlComponent.control=new Ro.AttributionControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(Ur,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),u})(),co=(()=>{class u{constructor(i,m){this.mapService=i,this.controlComponent=m}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new Ro.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(Ur,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglFullscreen",""]],hostBindings:function(i,m){1&i&&l.NdJ("webkitfullscreenchange",function(L){return m.onFullscreen(L.target)},!1,l.Jf7)},inputs:{container:"container"}}),u})(),Ns=(()=>{class u{constructor(i,m){this.mapService=i,this.controlComponent=m,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(i).forEach(m=>{void 0===i[m]&&delete i[m]}),this.controlComponent.control=new Ro.GeolocateControl(i),this.controlComponent.control.on("geolocate",m=>{this.geolocate.emit(m)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(Ur,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),u})(),wr=(()=>{class u{constructor(i,m){this.mapService=i,this.controlComponent=m}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.showCompass&&(i.showCompass=this.showCompass),void 0!==this.showZoom&&(i.showZoom=this.showZoom),this.controlComponent.control=new Ro.NavigationControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(Ur,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),u})(),zs=(()=>{class u{constructor(i,m){this.mapService=i,this.controlComponent=m}ngOnChanges(i){i.unit&&!i.unit.isFirstChange()&&this.controlComponent.control.setUnit(i.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const i={};void 0!==this.maxWidth&&(i.maxWidth=this.maxWidth),void 0!==this.unit&&(i.unit=this.unit),this.controlComponent.control=new Ro.ScaleControl(i),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(Ur,1))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),u})();var Fo=U(4968),mo=U(9300),Ul=U(8505),Cs=U(3900),vr=U(2722),ca=U(5698),ea=U(9718),ta=U(8675);const Ca=(u,f,i)=>{console.warn(`[ngx-mapbox-gl]: ${u}: ${f} is deprecated, please use ${i} instead.`)};let so=(()=>{class u{constructor(i){this.mapService=i,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.click=new l.vpe,this.dblClick=new l.vpe,this.mouseDown=new l.vpe,this.mouseUp=new l.vpe,this.mouseEnter=new l.vpe,this.mouseLeave=new l.vpe,this.mouseMove=new l.vpe,this.mouseOver=new l.vpe,this.mouseOut=new l.vpe,this.contextMenu=new l.vpe,this.touchStart=new l.vpe,this.touchEnd=new l.vpe,this.touchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,Cs.w)(()=>(0,Fo.R)(this.mapService.mapInstance,"styledata").pipe((0,ea.h)(!1),(0,mo.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,ta.O)(!0)))).subscribe(i=>this.init(i))}ngOnChanges(i){!this.layerAdded||(i.paint&&!i.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,i.paint.currentValue),i.layout&&!i.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,i.layout.currentValue),i.filter&&!i.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,i.filter.currentValue),i.before&&!i.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,i.before.currentValue),(i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.mapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(i){this.mapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},i,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.click.observed&&i("click","layerClick"),this.dblClick.observed&&i("dblClick","layerDblClick"),this.mouseDown.observed&&i("mouseDown","layerMouseDown"),this.mouseUp.observed&&i("mouseUp","layerMouseUp"),this.mouseEnter.observed&&i("mouseEnter","layerMouseEnter"),this.mouseLeave.observed&&i("mouseLeave","layerMouseLeave"),this.mouseMove.observed&&i("mouseMove","layerMouseMove"),this.mouseOver.observed&&i("mouseOver","layerMouseOver"),this.mouseOut.observed&&i("mouseOut","layerMouseOut"),this.contextMenu.observed&&i("contextMenu","layerContextMenu"),this.touchStart.observed&&i("touchStart","layerTouchStart"),this.touchEnd.observed&&i("touchEnd","layerTouchEnd"),this.touchCancel.observed&&i("touchCancel","layerTouchCancel")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[l.TTD],decls:0,vars:0,template:function(i,m){},encapsulation:2}),u})();var Ha=U(8372);let Wr=(()=>{class u{constructor(i,m){this.mapService=i,this.zone=m,this.updateFeatureData=new Vr.x,this.sub=new Qs.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const m=(0,Fo.R)(this.mapService.mapInstance,"styledata").pipe((0,mo.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(m)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded&&((i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.buffer&&!i.buffer.isFirstChange()||i.tolerance&&!i.tolerance.isFirstChange()||i.cluster&&!i.cluster.isFirstChange()||i.clusterRadius&&!i.clusterRadius.isFirstChange()||i.clusterMaxZoom&&!i.clusterMaxZoom.isFirstChange()||i.clusterMinPoints&&!i.clusterMinPoints.isFirstChange()||i.clusterProperties&&!i.clusterProperties.isFirstChange()||i.lineMetrics&&!i.lineMetrics.isFirstChange()||i.generateId&&!i.generateId.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange()||i.filter&&!i.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),i.data&&!i.data.isFirstChange())){const m=this.mapService.getSource(this.id);if(void 0===m)return;m.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(i){var m=this;return oo(function*(){const M=m.mapService.getSource(m.id);return m.zone.run(oo(function*(){return new Promise((L,le)=>{M.getClusterExpansionZoom(i,(we,Je)=>{we?le(we):L(Je)})})}))})()}getClusterChildren(i){var m=this;return oo(function*(){const M=m.mapService.getSource(m.id);return m.zone.run(oo(function*(){return new Promise((L,le)=>{M.getClusterChildren(i,(we,Je)=>{we?le(we):L(Je)})})}))})()}getClusterLeaves(i,m,M){var L=this;return oo(function*(){const le=L.mapService.getSource(L.id);return L.zone.run(oo(function*(){return new Promise((we,Je)=>{le.getClusterLeaves(i,m,M,(St,Kt)=>{St?Je(St):we(Kt)})})}))})()}_addFeature(i){this.data.features.push(i),this.updateFeatureData.next(null)}_removeFeature(i){const m=this.data,M=m.features.indexOf(i);M>-1&&m.features.splice(M,1),this.updateFeatureData.next(null)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const m=this.updateFeatureData.pipe((0,Ha.b)(0)).subscribe(()=>{const M=this.mapService.getSource(this.id);void 0!==M&&M.setData(this.data)});this.sub.add(m),this.sourceAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(i,m){},encapsulation:2,changeDetection:0}),u})(),uo=(()=>{class u{constructor(i){this.GeoJSONSourceComponent=i,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(i){this.feature.geometry.coordinates=i,this.GeoJSONSourceComponent.updateFeatureData.next(null)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36((0,l.Gpc)(()=>Wr)))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(i,m){},encapsulation:2,changeDetection:0}),u})(),jl=(()=>{class u{constructor(i,m,M){this.mapService=i,this.ngZone=m,this.featureComponent=M,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.dragStart=new l.vpe,this.dragEnd=new l.vpe,this.drag=new l.vpe,this.sub=new Qs.w0}ngOnInit(){let i,m,M;if(this.warnDeprecatedOutputs(),!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(i=this.layer.layerMouseEnter,m=this.layer.layerMouseLeave,M=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(i,m,M)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(i,m,M){let L=!1,le=!1;this.mapService.mapCreated$.subscribe(()=>{const we=(0,Fo.R)(this.mapService.mapInstance,"mouseup"),Je=i.pipe((0,mo.h)(()=>!L),(0,mo.h)(Qt=>this.filterFeature(Qt)),(0,Ul.b)(()=>{le=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,Cs.w)(()=>(0,Fo.R)(this.mapService.mapInstance,"mousedown").pipe((0,vr.R)(m)))),St=Je.pipe((0,Cs.w)(()=>(0,Fo.R)(this.mapService.mapInstance,"mousemove").pipe((0,vr.R)(we)))),Kt=Je.pipe((0,Cs.w)(()=>we.pipe((0,ca.q)(1))));this.sub.add(Je.subscribe(Qt=>{L=!0,(this.featureDragStart.observed||this.dragStart.observed)&&this.ngZone.run(()=>{this.featureDragStart.emit(Qt),this.dragStart.emit(Qt)})})),this.sub.add(St.subscribe(Qt=>{M([Qt.lngLat.lng,Qt.lngLat.lat]),(this.featureDrag.observed||this.drag.observed)&&this.ngZone.run(()=>{this.featureDrag.emit(Qt),this.drag.emit(Qt)})})),this.sub.add(Kt.subscribe(Qt=>{L=!1,(this.featureDragEnd.observed||this.dragEnd.observed)&&this.ngZone.run(()=>{this.featureDragEnd.emit(Qt),this.dragEnd.emit(Qt)}),le||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(m.pipe((0,Ul.b)(()=>le=!1),(0,mo.h)(()=>!L)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(i){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(i.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.dragStart.observed&&i("dragStart","featureDragStart"),this.dragEnd.observed&&i("dragEnd","featureDragEnd"),this.drag.observed&&i("drag","featureDrag")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(l.R0b),l.Y36(uo,9))},u.\u0275dir=l.lG2({type:u,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"}}),u})(),Lo=(()=>{class u{constructor(i,m){this.mapService=i,this.zone=m,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.error=new l.vpe,this.loaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,Cs.w)(()=>(0,Fo.R)(this.mapService.mapInstance,"styledata").pipe((0,ta.O)(void 0),(0,mo.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(i){(i.data&&!i.data.isFirstChange()||i.options&&!i.options.isFirstChange()||i.url&&!i.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var i=this;return oo(function*(){if(i.isAdding=!0,i.data)i.mapService.addImage(i.id,i.data,i.options),i.isAdded=!0,i.isAdding=!1;else if(i.url)try{yield i.mapService.loadAndAddImage(i.id,i.url,i.options),i.isAdded=!0,i.isAdding=!1,i.zone.run(()=>{i.imageLoaded.emit(),i.loaded.emit()})}catch(m){i.zone.run(()=>{i.imageError.emit(m),i.error.emit(m)})}})()}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.error.observed&&i("error","imageError"),this.loaded.observed&&i("loaded","imageLoaded")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded",error:"error",loaded:"loaded"},features:[l.TTD],decls:0,vars:0,template:function(i,m){},encapsulation:2}),u})();const Cl=["container"];let Ai=(()=>{class u{constructor(i){this.mapService=i,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe,this.resize=new l.vpe,this.remove=new l.vpe,this.mouseDown=new l.vpe,this.mouseUp=new l.vpe,this.mouseMove=new l.vpe,this.click=new l.vpe,this.dblClick=new l.vpe,this.mouseOver=new l.vpe,this.mouseOut=new l.vpe,this.contextMenu=new l.vpe,this.touchStart=new l.vpe,this.touchEnd=new l.vpe,this.touchMove=new l.vpe,this.touchCancel=new l.vpe,this.wheel=new l.vpe,this.dragStart=new l.vpe,this.drag=new l.vpe,this.dragEnd=new l.vpe,this.load=new l.vpe,this.error=new l.vpe}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.mapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(i){var m=this;return oo(function*(){yield m.mapService.mapCreated$.toPromise(),i.cursorStyle&&!i.cursorStyle.isFirstChange()&&m.mapService.changeCanvasCursor(i.cursorStyle.currentValue),i.minZoom&&!i.minZoom.isFirstChange()&&m.mapService.updateMinZoom(i.minZoom.currentValue),i.maxZoom&&!i.maxZoom.isFirstChange()&&m.mapService.updateMaxZoom(i.maxZoom.currentValue),i.minPitch&&!i.minPitch.isFirstChange()&&m.mapService.updateMinPitch(i.minPitch.currentValue),i.maxPitch&&!i.maxPitch.isFirstChange()&&m.mapService.updateMaxPitch(i.maxPitch.currentValue),i.renderWorldCopies&&!i.renderWorldCopies.isFirstChange()&&m.mapService.updateRenderWorldCopies(i.renderWorldCopies.currentValue),i.scrollZoom&&!i.scrollZoom.isFirstChange()&&m.mapService.updateScrollZoom(i.scrollZoom.currentValue),i.dragRotate&&!i.dragRotate.isFirstChange()&&m.mapService.updateDragRotate(i.dragRotate.currentValue),i.touchPitch&&!i.touchPitch.isFirstChange()&&m.mapService.updateTouchPitch(i.touchPitch.currentValue),i.touchZoomRotate&&!i.touchZoomRotate.isFirstChange()&&m.mapService.updateTouchZoomRotate(i.touchZoomRotate.currentValue),i.doubleClickZoom&&!i.doubleClickZoom.isFirstChange()&&m.mapService.updateDoubleClickZoom(i.doubleClickZoom.currentValue),i.keyboard&&!i.keyboard.isFirstChange()&&m.mapService.updateKeyboard(i.keyboard.currentValue),i.dragPan&&!i.dragPan.isFirstChange()&&m.mapService.updateDragPan(i.dragPan.currentValue),i.boxZoom&&!i.boxZoom.isFirstChange()&&m.mapService.updateBoxZoom(i.boxZoom.currentValue),i.style&&!i.style.isFirstChange()&&m.mapService.updateStyle(i.style.currentValue),i.maxBounds&&!i.maxBounds.isFirstChange()&&m.mapService.updateMaxBounds(i.maxBounds.currentValue),i.fitBounds&&i.fitBounds.currentValue&&!i.fitBounds.isFirstChange()&&m.mapService.fitBounds(i.fitBounds.currentValue,m.fitBoundsOptions),i.fitScreenCoordinates&&i.fitScreenCoordinates.currentValue&&((m.center||m.zoom||m.pitch||m.fitBounds)&&i.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),m.mapService.fitScreenCoordinates(i.fitScreenCoordinates.currentValue,m.bearing?m.bearing[0]:0,m.movingOptions)),!m.centerWithPanTo||!i.center||i.center.isFirstChange()||i.zoom||i.bearing||i.pitch?(i.center&&!i.center.isFirstChange()||i.zoom&&!i.zoom.isFirstChange()||i.bearing&&!i.bearing.isFirstChange()&&!i.fitScreenCoordinates||i.pitch&&!i.pitch.isFirstChange())&&m.mapService.move(m.movingMethod,m.movingOptions,i.zoom&&m.zoom?m.zoom[0]:void 0,i.center?m.center:void 0,i.bearing&&m.bearing?m.bearing[0]:void 0,i.pitch&&m.pitch?m.pitch[0]:void 0):m.mapService.panTo(m.center,m.panToOptions)})()}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.resize.observed&&i("resize","mapResize"),this.remove.observed&&i("remove","mapRemove"),this.mouseDown.observed&&i("mouseDown","mapMouseDown"),this.mouseUp.observed&&i("mouseUp","mapMouseUp"),this.mouseMove.observed&&i("mouseMove","mapMouseMove"),this.click.observed&&i("click","mapClick"),this.dblClick.observed&&i("dblClick","mapDblClick"),this.mouseOver.observed&&i("mouseOver","mapMouseOver"),this.mouseOut.observed&&i("mouseOut","mapMouseOut"),this.contextMenu.observed&&i("contextMenu","mapContextMenu"),this.touchStart.observed&&i("touchStart","mapTouchStart"),this.touchEnd.observed&&i("touchEnd","mapTouchEnd"),this.touchMove.observed&&i("touchMove","mapTouchMove"),this.touchCancel.observed&&i("touchCancel","mapTouchCancel"),this.wheel.observed&&i("wheel","mapWheel"),this.dragStart.observed&&i("dragStart","mapDragStart"),this.drag.observed&&i("drag","mapDrag"),this.dragEnd.observed&&i("dragEnd","mapDragEnd"),this.load.observed&&i("load","mapLoad"),this.error.observed&&i("error","mapError")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-map"]],viewQuery:function(i,m){if(1&i&&l.Gf(Cl,7),2&i){let M;l.iGM(M=l.CRH())&&(m.mapContainer=M.first)}},inputs:{accessToken:"accessToken",collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[l._Bn([Tr]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(i,m){1&i&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),u})();const $a=["content"],nl=["*"];let il=(()=>{class u{constructor(i){this.mapService=i,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe,this.dragStart=new l.vpe,this.dragEnd=new l.vpe,this.drag=new l.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(i){i.lngLat&&!i.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),i.feature&&!i.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),i.draggable&&!i.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),i.popupShown&&!i.popupShown.isFirstChange()&&(i.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),i.pitchAlignment&&!i.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(i.pitchAlignment.currentValue),i.rotationAlignment&&!i.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(i.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd,dragStart:this.markerDragStart,drag:this.markerDrag,dragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(i){this.markerInstance.setLngLat(i)}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.markerDragStart.observed&&i("dragStart","markerDragStart"),this.markerDragEnd.observed&&i("dragEnd","markerDragEnd"),this.markerDrag.observed&&i("drag","markerDrag")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-marker"]],viewQuery:function(i,m){if(1&i&&l.Gf($a,7),2&i){let M;l.iGM(M=l.CRH())&&(m.content=M.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"},features:[l.TTD],ngContentSelectors:nl,decls:3,vars:2,consts:[["content",""]],template:function(i,m){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&i&&l.Tol(m.className)},encapsulation:2,changeDetection:0}),u})();var fc=U(6451);function El(u,f){1&u&&l.GkF(0)}const mc=function(u){return{$implicit:u}};function rl(u,f){if(1&u&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,El,1,0,"ng-container",4),l.qZA(),l.BQk()),2&u){const i=l.oxw().$implicit,m=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",m.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,mc,i))}}function Mo(u,f){1&u&&l.GkF(0)}function gc(u,f){if(1&u&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Mo,1,0,"ng-container",4),l.qZA(),l.BQk()),2&u){const i=l.oxw().$implicit,m=l.oxw();l.xp6(1),l.Q6J("feature",i),l.xp6(1),l.Q6J("ngTemplateOutlet",m.pointTpl)("ngTemplateOutletContext",l.VKq(3,mc,i))}}function Vs(u,f){if(1&u&&(l.ynx(0),l.YNc(1,rl,3,5,"ng-container",2),l.YNc(2,gc,3,5,"ng-container",2),l.BQk()),2&u){const i=f.$implicit;l.xp6(1),l.Q6J("ngIf",i.properties.cluster),l.xp6(1),l.Q6J("ngIf",!i.properties.cluster)}}const Ea=function(){return{"circle-radius":0}};let ua=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["ng-template","mglPoint",""]]}),u})(),Jr=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["ng-template","mglClusterPoint",""]]}),u})(),Gl=0,Hl=(()=>{class u{constructor(i,m,M){this.mapService=i,this.ChangeDetectorRef=m,this.zone=M,this.layerId="mgl-markers-for-clusters-"+Gl++,this.sub=new Qs.w0}ngAfterContentInit(){const m=this.mapService.mapCreated$.pipe((0,Cs.w)(()=>(0,Fo.R)(this.mapService.mapInstance,"data").pipe((0,mo.h)(M=>M.sourceId===this.source&&"metadata"!==M.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,Cs.w)(()=>(0,fc.T)((0,Fo.R)(this.mapService.mapInstance,"move"),(0,Fo.R)(this.mapService.mapInstance,"moveend")).pipe((0,ta.O)(void 0)))).subscribe(()=>{this.zone.run(()=>{this.updateCluster()})});this.sub.add(m)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(i,m){return m.id}updateCluster(){const i={layers:[this.layerId]};this.pointTpl||(i.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(i),this.ChangeDetectorRef.markForCheck()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr),l.Y36(l.sBO),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(i,m,M){if(1&i&&(l.Suo(M,ua,5,l.Rgc),l.Suo(M,Jr,5,l.Rgc)),2&i){let L;l.iGM(L=l.CRH())&&(m.pointTpl=L.first),l.iGM(L=l.CRH())&&(m.clusterPointTpl=L.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,m){1&i&&(l._UZ(0,"mgl-layer",0),l.YNc(1,Vs,3,2,"ng-container",1)),2&i&&(l.Q6J("id",m.layerId)("source",m.source)("paint",l.DdM(5,Ea)),l.xp6(1),l.Q6J("ngForOf",m.clusterPoints)("ngForTrackBy",m.trackByClusterPoint))},dependencies:[kt.sg,kt.O5,kt.tP,so,il],encapsulation:2,changeDetection:0}),u})(),Nc=(()=>{class u{static withConfig(i){return{ngModule:u,providers:[{provide:Ga,useValue:i.accessToken}]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[kt.ez]}),u})();const xu=["content"],$l=["*"];let Da=(()=>{class u{constructor(i){this.mapService=i,this.popupClose=new l.vpe,this.popupOpen=new l.vpe,this.close=new l.vpe,this.open=new l.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(i){if(i.lngLat&&!i.lngLat.isFirstChange()||i.feature&&!i.feature.isFirstChange()){const m=i.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const M=this.createPopup();this.mapService.addPopupToMap(M,m,this.popupInstance.isOpen()),this.popupInstance=M}if(i.marker&&!i.marker.isFirstChange()){const m=i.marker.previousValue;m.markerInstance&&this.mapService.removePopupFromMarker(m.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}i.offset&&!i.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{open:this.open,close:this.close,popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(i){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(i,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,i)}})}warnDeprecatedOutputs(){const i=Ca.bind(void 0,u.name);this.close.observed&&i("close","popupClose"),this.open.observed&&i("open","popupOpen")}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-popup"]],viewQuery:function(i,m){if(1&i&&l.Gf(xu,7),2&i){let M;l.iGM(M=l.CRH())&&(m.content=M.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen",close:"close",open:"open"},features:[l.TTD],ngContentSelectors:$l,decls:3,vars:0,consts:[["content",""]],template:function(i,m){1&i&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),u})(),zc=(()=>{class u{constructor(i){this.mapService=i}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(i){if(void 0===this.sourceId)return;const m=this.mapService.getSource(this.sourceId);void 0!==m&&m.updateImage({url:void 0===i.url?void 0:this.url,coordinates:void 0===i.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(i,m){},encapsulation:2,changeDetection:0}),u})(),Un=(()=>{class u{constructor(i){this.mapService=i,this.type="vector",this.sourceAdded=!1,this.sub=new Qs.w0}ngOnInit(){const i=this.mapService.mapLoaded$.subscribe(()=>{this.init();const m=(0,Fo.R)(this.mapService.mapInstance,"styledata").pipe((0,mo.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(m)});this.sub.add(i)}ngOnChanges(i){if(this.sourceAdded)if(i.bounds&&!i.bounds.isFirstChange()||i.scheme&&!i.scheme.isFirstChange()||i.minzoom&&!i.minzoom.isFirstChange()||i.maxzoom&&!i.maxzoom.isFirstChange()||i.attribution&&!i.attribution.isFirstChange()||i.promoteId&&!i.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(i.url&&!i.url.isFirstChange()||i.tiles&&!i.tiles.isFirstChange()){const m=this.mapService.getSource(this.id);if(void 0===m)return;i.url&&this.url&&m.setUrl(this.url),i.tiles&&this.tiles&&m.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Tr))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(i,m){},encapsulation:2,changeDetection:0}),u})();var Ml=U(5978);const Za="object"==typeof global&&global&&global.Object===Object&&global;var Vc="object"==typeof self&&self&&self.Object===Object&&self;const F=Za||Vc||Function("return this")(),P=F.Symbol;var Z=Object.prototype,ie=Z.hasOwnProperty,ve=Z.toString,Ze=P?P.toStringTag:void 0;var Ii=Object.prototype.toString;var $o=P?P.toStringTag:void 0;const ds=function Ma(u){return null==u?void 0===u?"[object Undefined]":"[object Null]":$o&&$o in Object(u)?function ct(u){var f=ie.call(u,Ze),i=u[Ze];try{u[Ze]=void 0;var m=!0}catch{}var M=ve.call(u);return m&&(f?u[Ze]=i:delete u[Ze]),M}(u):function Qn(u){return Ii.call(u)}(u)},hs=function Wa(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)},Yl=function Uc(u){if(!hs(u))return!1;var f=ds(u);return"[object Function]"==f||"[object GeneratorFunction]"==f||"[object AsyncFunction]"==f||"[object Proxy]"==f};var u,Ud=F["__core-js_shared__"],jc=(u=/[^.]+$/.exec(Ud&&Ud.keys&&Ud.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";var Qu=Function.prototype.toString;const t=function _(u){if(null!=u){try{return Qu.call(u)}catch{}try{return u+""}catch{}}return""};var y=/^\[object .+?Constructor\]$/,H=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const se=function Q(u){return!(!hs(u)||function jd(u){return!!jc&&jc in u}(u))&&(Yl(u)?H:y).test(t(u))},Ie=function be(u,f){var i=function de(u,f){return u?.[f]}(u,f);return se(i)?i:void 0};var Re=function(){try{var u=Ie(Object,"defineProperty");return u({},"",{}),u}catch{}}();const et=Re,Ge=function Te(u,f,i){"__proto__"==f&&et?et(u,f,{configurable:!0,enumerable:!0,value:i,writable:!0}):u[f]=i},ut=function it(u,f,i,m){for(var M=-1,L=null==u?0:u.length;++M<L;){var le=u[M];f(m,le,i(le),u)}return m};var Tt=function xt(u){return function(f,i,m){for(var M=-1,L=Object(f),le=m(f),we=le.length;we--;){var Je=le[u?we:++M];if(!1===i(L[Je],Je,L))break}return f}}();const rn=Tt,an=function _n(u){return null!=u&&"object"==typeof u},In=function qn(u){return an(u)&&"[object Arguments]"==ds(u)};var Yn=Object.prototype,bi=Yn.hasOwnProperty,Ji=Yn.propertyIsEnumerable,Er=In(function(){return arguments}())?In:function(u){return an(u)&&bi.call(u,"callee")&&!Ji.call(u,"callee")};const Ar=Er,Mi=Array.isArray;var ns="object"==typeof exports&&exports&&!exports.nodeType&&exports,is=ns&&"object"==typeof module&&module&&!module.nodeType&&module,ps=is&&is.exports===ns?F.Buffer:void 0;const Li=(ps?ps.isBuffer:void 0)||function eo(){return!1};var To=/^(?:0|[1-9]\d*)$/;const Zo=function Ir(u,f){var i=typeof u;return!!(f=f??9007199254740991)&&("number"==i||"symbol"!=i&&To.test(u))&&u>-1&&u%1==0&&u<f},Es=function No(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=9007199254740991};var jr={};jr["[object Float32Array]"]=jr["[object Float64Array]"]=jr["[object Int8Array]"]=jr["[object Int16Array]"]=jr["[object Int32Array]"]=jr["[object Uint8Array]"]=jr["[object Uint8ClampedArray]"]=jr["[object Uint16Array]"]=jr["[object Uint32Array]"]=!0,jr["[object Arguments]"]=jr["[object Array]"]=jr["[object ArrayBuffer]"]=jr["[object Boolean]"]=jr["[object DataView]"]=jr["[object Date]"]=jr["[object Error]"]=jr["[object Function]"]=jr["[object Map]"]=jr["[object Number]"]=jr["[object Object]"]=jr["[object RegExp]"]=jr["[object Set]"]=jr["[object String]"]=jr["[object WeakMap]"]=!1;const ed=function Zd(u){return function(f){return u(f)}};var td="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tl=td&&"object"==typeof module&&module&&!module.nodeType&&module,Ds=Tl&&Tl.exports===td&&Za.process;const Ta=function(){try{return Tl&&Tl.require&&Tl.require("util").types||Ds&&Ds.binding&&Ds.binding("util")}catch{}}();var Al=Ta&&Ta.isTypedArray;const Bf=Al?ed(Al):function Lf(u){return an(u)&&Es(u.length)&&!!jr[ds(u)]};var Mu=Object.prototype.hasOwnProperty;const op=function Nf(u,f){var i=Mi(u),m=!i&&Ar(u),M=!i&&!m&&Li(u),L=!i&&!m&&!M&&Bf(u),le=i||m||M||L,we=le?function hn(u,f){for(var i=-1,m=Array(u);++i<u;)m[i]=f(i);return m}(u.length,String):[],Je=we.length;for(var St in u)(f||Mu.call(u,St))&&(!le||!("length"==St||M&&("offset"==St||"parent"==St)||L&&("buffer"==St||"byteLength"==St||"byteOffset"==St)||Zo(St,Je)))&&we.push(St);return we};var Wd=Object.prototype;const sp=function al(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||Wd)},rs=function yg(u,f){return function(i){return u(f(i))}},ap=rs(Object.keys,Object);var Zc=Object.prototype.hasOwnProperty;const nd=function Wc(u){return null!=u&&Es(u.length)&&!Yl(u)},Pl=function Il(u){return nd(u)?op(u):function Su(u){if(!sp(u))return ap(u);var f=[];for(var i in Object(u))Zc.call(u,i)&&"constructor"!=i&&f.push(i);return f}(u)};var bg=function Uf(u,f){return function(i,m){if(null==i)return i;if(!nd(i))return u(i,m);for(var M=i.length,L=f?M:-1,le=Object(i);(f?L--:++L<M)&&!1!==m(le[L],L,le););return i}}(function Vf(u,f){return u&&rn(u,f,Pl)});const xg=bg,Kd=function bc(u,f,i,m){return xg(u,function(M,L,le){f(m,M,i(M),le)}),m},id=function cp(u,f){return u===f||u!=u&&f!=f},Qd=function jf(u,f){for(var i=u.length;i--;)if(id(u[i][0],f))return i;return-1};var da=Array.prototype.splice;function Ql(u){var f=-1,i=null==u?0:u.length;for(this.clear();++f<i;){var m=u[f];this.set(m[0],m[1])}}Ql.prototype.clear=function lp(){this.__data__=[],this.size=0},Ql.prototype.delete=function up(u){var f=this.__data__,i=Qd(f,u);return!(i<0||(i==f.length-1?f.pop():da.call(f,i,1),--this.size,0))},Ql.prototype.get=function dp(u){var f=this.__data__,i=Qd(f,u);return i<0?void 0:f[i][1]},Ql.prototype.has=function Jd(u){return Qd(this.__data__,u)>-1},Ql.prototype.set=function qc(u,f){var i=this.__data__,m=Qd(i,u);return m<0?(++this.size,i.push([u,f])):i[m][1]=f,this};const Au=Ql,Iu=Ie(F,"Map"),Ol=Ie(Object,"create");var xc=Object.prototype.hasOwnProperty;var Sg=Object.prototype.hasOwnProperty;function Jl(u){var f=-1,i=null==u?0:u.length;for(this.clear();++f<i;){var m=u[f];this.set(m[0],m[1])}}Jl.prototype.clear=function Dg(){this.__data__=Ol?Ol(null):{},this.size=0},Jl.prototype.delete=function Zf(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},Jl.prototype.get=function Aa(u){var f=this.__data__;if(Ol){var i=f[u];return"__lodash_hash_undefined__"===i?void 0:i}return xc.call(f,u)?f[u]:void 0},Jl.prototype.has=function Tg(u){var f=this.__data__;return Ol?void 0!==f[u]:Sg.call(f,u)},Jl.prototype.set=function Ag(u,f){var i=this.__data__;return this.size+=this.has(u)?0:1,i[u]=Ol&&void 0===f?"__lodash_hash_undefined__":f,this};const kl=Jl,ih=function Ig(u,f){var i=u.__data__;return function od(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?i["string"==typeof f?"string":"hash"]:i.map};function wc(u){var f=-1,i=null==u?0:u.length;for(this.clear();++f<i;){var m=u[f];this.set(m[0],m[1])}}wc.prototype.clear=function Kc(){this.size=0,this.__data__={hash:new kl,map:new(Iu||Au),string:new kl}},wc.prototype.delete=function Yf(u){var f=ih(this,u).delete(u);return this.size-=f?1:0,f},wc.prototype.get=function rh(u){return ih(this,u).get(u)},wc.prototype.has=function Xc(u){return ih(this,u).has(u)},wc.prototype.set=function _o(u,f){var i=ih(this,u),m=i.size;return i.set(u,f),this.size+=i.size==m?0:1,this};const Qc=wc;function Jc(u){var f=this.__data__=new Au(u);this.size=f.size}Jc.prototype.clear=function Hf(){this.__data__=new Au,this.size=0},Jc.prototype.delete=function rd(u){var f=this.__data__,i=f.delete(u);return this.size=f.size,i},Jc.prototype.get=function Eg(u){return this.__data__.get(u)},Jc.prototype.has=function eh(u){return this.__data__.has(u)},Jc.prototype.set=function Rl(u,f){var i=this.__data__;if(i instanceof Au){var m=i.__data__;if(!Iu||m.length<199)return m.push([u,f]),this.size=++i.size,this;i=this.__data__=new Qc(m)}return i.set(u,f),this.size=i.size,this};const Cc=Jc;function Pu(u){var f=-1,i=null==u?0:u.length;for(this.__data__=new Qc;++f<i;)this.add(u[f])}Pu.prototype.add=Pu.prototype.push=function ah(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this},Pu.prototype.has=function ll(u){return this.__data__.has(u)};const vp=Pu,tu=function Xf(u,f){for(var i=-1,m=null==u?0:u.length;++i<m;)if(f(u[i],i,u))return!0;return!1},ch=function lh(u,f){return u.has(f)},Rg=function Qf(u,f,i,m,M,L){var le=1&i,we=u.length,Je=f.length;if(we!=Je&&!(le&&Je>we))return!1;var St=L.get(u),Kt=L.get(f);if(St&&Kt)return St==f&&Kt==u;var Qt=-1,Vn=!0,ii=2&i?new vp:void 0;for(L.set(u,f),L.set(f,u);++Qt<we;){var Kn=u[Qt],Jn=f[Qt];if(m)var vi=le?m(Jn,Kn,Qt,f,u,L):m(Kn,Jn,Qt,u,f,L);if(void 0!==vi){if(vi)continue;Vn=!1;break}if(ii){if(!tu(f,function(Oi,ji){if(!ch(ii,ji)&&(Kn===Oi||M(Kn,Oi,i,m,L)))return ii.push(ji)})){Vn=!1;break}}else if(Kn!==Jn&&!M(Kn,Jn,i,m,L)){Vn=!1;break}}return L.delete(u),L.delete(f),Vn},nu=F.Uint8Array,Fg=function iu(u){var f=-1,i=Array(u.size);return u.forEach(function(m,M){i[++f]=[M,m]}),i},Jf=function wp(u){var f=-1,i=Array(u.size);return u.forEach(function(m){i[++f]=m}),i};var ec=P?P.prototype:void 0,uh=ec?ec.valueOf:void 0;const ad=function rm(u,f){for(var i=-1,m=f.length,M=u.length;++i<m;)u[M+i]=f[i];return u},Dp=function Ug(u,f,i){var m=f(u);return Mi(u)?m:ad(m,i(u))},ph=function hh(){return[]};var fh=Object.prototype.propertyIsEnumerable,Mp=Object.getOwnPropertySymbols,Sp=Mp?function(u){return null==u?[]:(u=Object(u),function dh(u,f){for(var i=-1,m=null==u?0:u.length,M=0,L=[];++i<m;){var le=u[i];f(le,i,u)&&(L[M++]=le)}return L}(Mp(u),function(f){return fh.call(u,f)}))}:ph;const mh=Sp,su=function gh(u){return Dp(u,Pl,mh)};var Tp=Object.prototype.hasOwnProperty;const yh=Ie(F,"DataView"),cd=Ie(F,"Promise"),Ec=Ie(F,"Set"),ud=Ie(F,"WeakMap");var Ia="[object Map]",ul="[object Promise]",lu="[object Set]",Ip="[object WeakMap]",lm="[object DataView]",jg=t(yh),cm=t(Iu),Gg=t(cd),Hg=t(Ec),$g=t(ud),Si=ds;(yh&&Si(new yh(new ArrayBuffer(1)))!=lm||Iu&&Si(new Iu)!=Ia||cd&&Si(cd.resolve())!=ul||Ec&&Si(new Ec)!=lu||ud&&Si(new ud)!=Ip)&&(Si=function(u){var f=ds(u),i="[object Object]"==f?u.constructor:void 0,m=i?t(i):"";if(m)switch(m){case jg:return lm;case cm:return Ia;case Gg:return ul;case Hg:return lu;case $g:return Ip}return f});const Ru=Si;var Fu="[object Arguments]",cu="[object Array]",dd="[object Object]",hm=Object.prototype.hasOwnProperty;const Pp=function pm(u,f,i,m,M,L){var le=Mi(u),we=Mi(f),Je=le?cu:Ru(u),St=we?cu:Ru(f),Kt=(Je=Je==Fu?dd:Je)==dd,Qt=(St=St==Fu?dd:St)==dd,Vn=Je==St;if(Vn&&Li(u)){if(!Li(f))return!1;le=!0,Kt=!1}if(Vn&&!Kt)return L||(L=new Cc),le||Bf(u)?Rg(u,f,i,m,M,L):function im(u,f,i,m,M,L,le){switch(i){case"[object DataView]":if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=f.byteLength||!L(new nu(u),new nu(f)));case"[object Boolean]":case"[object Date]":case"[object Number]":return id(+u,+f);case"[object Error]":return u.name==f.name&&u.message==f.message;case"[object RegExp]":case"[object String]":return u==f+"";case"[object Map]":var we=Fg;case"[object Set]":if(we||(we=Jf),u.size!=f.size&&!(1&m))return!1;var St=le.get(u);if(St)return St==f;m|=2,le.set(u,f);var Kt=Rg(we(u),we(f),m,M,L,le);return le.delete(u),Kt;case"[object Symbol]":if(uh)return uh.call(u)==uh.call(f)}return!1}(u,f,Je,i,m,M,L);if(!(1&i)){var ii=Kt&&hm.call(u,"__wrapped__"),Kn=Qt&&hm.call(f,"__wrapped__");if(ii||Kn){var Jn=ii?u.value():u,vi=Kn?f.value():f;return L||(L=new Cc),M(Jn,vi,i,m,L)}}return!!Vn&&(L||(L=new Cc),function _h(u,f,i,m,M,L){var le=1&i,we=su(u),Je=we.length;if(Je!=su(f).length&&!le)return!1;for(var Qt=Je;Qt--;){var Vn=we[Qt];if(!(le?Vn in f:Tp.call(f,Vn)))return!1}var ii=L.get(u),Kn=L.get(f);if(ii&&Kn)return ii==f&&Kn==u;var Jn=!0;L.set(u,f),L.set(f,u);for(var vi=le;++Qt<Je;){var Oi=u[Vn=we[Qt]],ji=f[Vn];if(m)var xo=le?m(ji,Oi,Vn,f,u,L):m(Oi,ji,Vn,u,f,L);if(!(void 0===xo?Oi===ji||M(Oi,ji,i,m,L):xo)){Jn=!1;break}vi||(vi="constructor"==Vn)}if(Jn&&!vi){var Hr=u.constructor,Ba=f.constructor;Hr!=Ba&&"constructor"in u&&"constructor"in f&&!("function"==typeof Hr&&Hr instanceof Hr&&"function"==typeof Ba&&Ba instanceof Ba)&&(Jn=!1)}return L.delete(u),L.delete(f),Jn}(u,f,i,m,M,L))},fm=function bh(u,f,i,m,M){return u===f||(null==u||null==f||!an(u)&&!an(f)?u!=u&&f!=f:Pp(u,f,i,m,bh,M))},du=function fd(u){return u==u&&!hs(u)},Op=function xh(u,f){return function(i){return null!=i&&i[u]===f&&(void 0!==f||u in Object(i))}},Dc=function kp(u){var f=function gy(u){for(var f=Pl(u),i=f.length;i--;){var m=f[i],M=u[m];f[i]=[m,M,du(M)]}return f}(u);return 1==f.length&&f[0][2]?Op(f[0][0],f[0][1]):function(i){return i===u||function pd(u,f,i,m){var M=i.length,L=M,le=!m;if(null==u)return!L;for(u=Object(u);M--;){var we=i[M];if(le&&we[2]?we[1]!==u[we[0]]:!(we[0]in u))return!1}for(;++M<L;){var Je=(we=i[M])[0],St=u[Je],Kt=we[1];if(le&&we[2]){if(void 0===St&&!(Je in u))return!1}else{var Qt=new Cc;if(m)var Vn=m(St,Kt,Je,u,f,Qt);if(!(void 0===Vn?fm(Kt,St,3,m,Qt):Vn))return!1}}return!0}(i,u,f)}},wh=function md(u){return"symbol"==typeof u||an(u)&&"[object Symbol]"==ds(u)};var Fp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gd=/^\w*$/;const Lu=function Mc(u,f){if(Mi(u))return!1;var i=typeof u;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=u&&!wh(u))||gd.test(u)||!Fp.test(u)||null!=f&&u in Object(f)};function tc(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new TypeError("Expected a function");var i=function(){var m=arguments,M=f?f.apply(this,m):m[0],L=i.cache;if(L.has(M))return L.get(M);var le=u.apply(this,m);return i.cache=L.set(M,le)||L,le};return i.cache=new(tc.Cache||Qc),i}tc.Cache=Qc;const Lp=tc;var Np=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hu=/\\(\\)?/g,Wg=function Zg(u){var f=Lp(u,function(m){return 500===i.size&&i.clear(),m}),i=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(Np,function(i,m,M,L){f.push(M?L.replace(hu,"$1"):m||i)}),f});const Bu=Wg;var yd=P?P.prototype:void 0,Sc=yd?yd.toString:void 0;const Dh=function Ya(u){if("string"==typeof u)return u;if(Mi(u))return function _d(u,f){for(var i=-1,m=null==u?0:u.length,M=Array(m);++i<m;)M[i]=f(u[i],i,u);return M}(u,Ya)+"";if(wh(u))return Sc?Sc.call(u):"";var f=u+"";return"0"==f&&1/u==-1/0?"-0":f},qg=function Sh(u,f){return Mi(u)?u:Lu(u,f)?[u]:Bu(function Mh(u){return null==u?"":Dh(u)}(u))},Th=function yy(u){if("string"==typeof u||wh(u))return u;var f=u+"";return"0"==f&&1/u==-1/0?"-0":f},zp=function pu(u,f){for(var i=0,m=(f=qg(f,u)).length;null!=u&&i<m;)u=u[Th(f[i++])];return i&&i==m?u:void 0},vm=function Vp(u,f){return null!=u&&f in Object(u)},Ah=function Up(u,f){return null!=u&&function dl(u,f,i){for(var m=-1,M=(f=qg(f,u)).length,L=!1;++m<M;){var le=Th(f[m]);if(!(L=null!=u&&i(u,le)))break;u=u[le]}return L||++m!=M?L:!!(M=null==u?0:u.length)&&Es(M)&&Zo(le,M)&&(Mi(u)||Ar(u))}(u,f,vm)},Xg=function Kg(u,f){return Lu(u)&&du(f)?Op(Th(u),f):function(i){var m=function ym(u,f,i){var m=null==u?void 0:zp(u,f);return void 0===m?i:m}(i,u);return void 0===m&&m===f?Ah(i,u):fm(f,m,3)}},Gp=function vd(u){return u},$p=function Hp(u){return Lu(u)?function xm(u){return function(f){return f?.[u]}}(Th(u)):function bd(u){return function(f){return zp(f,u)}}(u)};var Zp=Object.prototype.hasOwnProperty,Cm=function wm(u,f){return function(i,m){var M=Mi(i)?ut:Kd,L=f?f():{};return M(i,u,function Qg(u){return"function"==typeof u?u:null==u?Gp:"object"==typeof u?Mi(u)?Xg(u[0],u[1]):Dc(u):$p(u)}(m),L)}}(function(u,f,i){Zp.call(u,i)?u[i].push(f):Ge(u,i,[f])});const vy=Cm;var i_=Object.prototype.hasOwnProperty;const Oh=function Wp(u,f,i){var m=u[f];(!i_.call(u,f)||!id(m,i)||void 0===i&&!(f in u))&&Ge(u,f,i)},mu=function Tc(u,f,i,m){var M=!i;i||(i={});for(var L=-1,le=f.length;++L<le;){var we=f[L],Je=m?m(i[we],u[we],we,i,u):void 0;void 0===Je&&(Je=u[we]),M?Ge(i,we,Je):Oh(i,we,Je)}return i};var Pa=Object.prototype.hasOwnProperty;const Kp=function wd(u){if(!hs(u))return function qp(u){var f=[];if(null!=u)for(var i in Object(u))f.push(i);return f}(u);var f=sp(u),i=[];for(var m in u)"constructor"==m&&(f||!Pa.call(u,m))||i.push(m);return i},Oa=function Ac(u){return nd(u)?op(u,!0):Kp(u)};var Cd="object"==typeof exports&&exports&&!exports.nodeType&&exports,r_=Cd&&"object"==typeof module&&module&&!module.nodeType&&module,Jp=r_&&r_.exports===Cd?F.Buffer:void 0,Vu=Jp?Jp.allocUnsafe:void 0;const ef=rs(Object.getPrototypeOf,Object);var tf=Object.getOwnPropertySymbols?function(u){for(var f=[];u;)ad(f,mh(u)),u=ef(u);return f}:ph;const Tm=tf,ic=function nf(u){return Dp(u,Oa,Tm)};var Uu=Object.prototype.hasOwnProperty;const Fh=function Pm(u){var f=new u.constructor(u.byteLength);return new nu(f).set(new nu(u)),f};var km=/\w*$/;var Rm=P?P.prototype:void 0,Bl=Rm?Rm.valueOf:void 0;const Pe=function pe(u,f,i){var m=u.constructor;switch(f){case"[object ArrayBuffer]":return Fh(u);case"[object Boolean]":case"[object Date]":return new m(+u);case"[object DataView]":return function rc(u,f){var i=f?Fh(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.byteLength)}(u,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function rf(u,f){var i=f?Fh(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.length)}(u,i);case"[object Map]":case"[object Set]":return new m;case"[object Number]":case"[object String]":return new m(u);case"[object RegExp]":return function Ll(u){var f=new u.constructor(u.source,km.exec(u));return f.lastIndex=u.lastIndex,f}(u);case"[object Symbol]":return function Gu(u){return Bl?Object(Bl.call(u)):{}}(u)}};var Xe=Object.create,ht=function(){function u(){}return function(f){if(!hs(f))return{};if(Xe)return Xe(f);u.prototype=f;var i=new u;return u.prototype=void 0,i}}();const Et=ht;var pn=Ta&&Ta.isMap;const Pn=pn?ed(pn):function Ut(u){return an(u)&&"[object Map]"==Ru(u)};var cn=Ta&&Ta.isSet;const Bi=cn?ed(cn):function tn(u){return an(u)&&"[object Set]"==Ru(u)};var _r="[object Arguments]",zo="[object Function]",po="[object Object]",Wi={};Wi[_r]=Wi["[object Array]"]=Wi["[object ArrayBuffer]"]=Wi["[object DataView]"]=Wi["[object Boolean]"]=Wi["[object Date]"]=Wi["[object Float32Array]"]=Wi["[object Float64Array]"]=Wi["[object Int8Array]"]=Wi["[object Int16Array]"]=Wi["[object Int32Array]"]=Wi["[object Map]"]=Wi["[object Number]"]=Wi[po]=Wi["[object RegExp]"]=Wi["[object Set]"]=Wi["[object String]"]=Wi["[object Symbol]"]=Wi["[object Uint8Array]"]=Wi["[object Uint8ClampedArray]"]=Wi["[object Uint16Array]"]=Wi["[object Uint32Array]"]=!0,Wi["[object Error]"]=Wi[zo]=Wi["[object WeakMap]"]=!1;const Lh=function Ra(u,f,i,m,M,L){var le,we=1&f,Je=2&f,St=4&f;if(i&&(le=M?i(u,m,M,L):i(u)),void 0!==le)return le;if(!hs(u))return u;var Kt=Mi(u);if(Kt){if(le=function xy(u){var f=u.length,i=new u.constructor(f);return f&&"string"==typeof u[0]&&Uu.call(u,"index")&&(i.index=u.index,i.input=u.input),i}(u),!we)return function kh(u,f){var i=-1,m=u.length;for(f||(f=Array(m));++i<m;)f[i]=u[i];return f}(u,le)}else{var Qt=Ru(u),Vn=Qt==zo||"[object GeneratorFunction]"==Qt;if(Li(u))return function ms(u,f){if(f)return u.slice();var i=u.length,m=Vu?Vu(i):new u.constructor(i);return u.copy(m),m}(u,we);if(Qt==po||Qt==_r||Vn&&!M){if(le=Je||Vn?{}:function Pt(u){return"function"!=typeof u.constructor||sp(u)?{}:Et(ef(u))}(u),!we)return Je?function Am(u,f){return mu(u,Tm(u),f)}(u,function Xp(u,f){return u&&mu(f,Oa(f),u)}(le,u)):function by(u,f){return mu(u,mh(u),f)}(u,function ao(u,f){return u&&mu(f,Pl(f),u)}(le,u))}else{if(!Wi[Qt])return M?u:{};le=Pe(u,Qt,we)}}L||(L=new Cc);var ii=L.get(u);if(ii)return ii;L.set(u,le),Bi(u)?u.forEach(function(vi){le.add(Ra(vi,f,i,vi,u,L))}):Pn(u)&&u.forEach(function(vi,Oi){le.set(Oi,Ra(vi,f,i,Oi,u,L))});var Jn=Kt?void 0:(St?Je?ic:su:Je?Oa:Pl)(u);return function Ph(u,f){for(var i=-1,m=null==u?0:u.length;++i<m&&!1!==f(u[i],i,u););}(Jn||u,function(vi,Oi){Jn&&(vi=u[Oi=vi]),Oh(le,Oi,Ra(vi,f,i,Oi,u,L))}),le};function Bh(u){return"object"==typeof u&&null!=u&&1===u.nodeType}function Md(u,f){return(!f||"hidden"!==u)&&"visible"!==u&&"clip"!==u}function Hu(u,f){if(u.clientHeight<u.scrollHeight||u.clientWidth<u.scrollWidth){var i=getComputedStyle(u,null);return Md(i.overflowY,f)||Md(i.overflowX,f)||!!(M=function(L){if(!L.ownerDocument||!L.ownerDocument.defaultView)return null;try{return L.ownerDocument.defaultView.frameElement}catch{return null}}(m=u))&&(M.clientHeight<m.scrollHeight||M.clientWidth<m.scrollWidth)}var m,M;return!1}function Fa(u,f,i,m,M,L,le,we){return L<u&&le>f||L>u&&le<f?0:L<=u&&we<=i||le>=f&&we>=i?L-u-m:le>f&&we<i||L<u&&we>i?le-f+M:0}function Sd(u,f){var i=window,m=f.scrollMode,M=f.block,L=f.inline,le=f.boundary,we=f.skipOverflowHiddenElements,Je="function"==typeof le?le:function(np){return np!==le};if(!Bh(u))throw new TypeError("Invalid target");for(var St=document.scrollingElement||document.documentElement,Kt=[],Qt=u;Bh(Qt)&&Je(Qt);){if((Qt=Qt.parentElement)===St){Kt.push(Qt);break}null!=Qt&&Qt===document.body&&Hu(Qt)&&!Hu(document.documentElement)||null!=Qt&&Hu(Qt,we)&&Kt.push(Qt)}for(var Vn=i.visualViewport?i.visualViewport.width:innerWidth,ii=i.visualViewport?i.visualViewport.height:innerHeight,Kn=window.scrollX||pageXOffset,Jn=window.scrollY||pageYOffset,vi=u.getBoundingClientRect(),Oi=vi.height,ji=vi.width,xo=vi.top,Hr=vi.right,Ba=vi.bottom,Na=vi.left,Yr="start"===M||"nearest"===M?xo:"end"===M?Ba:xo+Oi/2,Xo="center"===L?Na+ji/2:"end"===L?Hr:Na,Xa=[],gl=0;gl<Kt.length;gl++){var js=Kt[gl],_l=js.getBoundingClientRect(),hc=_l.height,Bd=_l.width,Nd=_l.top,ri=_l.right,ci=_l.bottom,Ei=_l.left;if("if-needed"===m&&xo>=0&&Na>=0&&Ba<=ii&&Hr<=Vn&&xo>=Nd&&Ba<=ci&&Na>=Ei&&Hr<=ri)return Xa;var cr=getComputedStyle(js),Rr=parseInt(cr.borderLeftWidth,10),za=parseInt(cr.borderTopWidth,10),oa=parseInt(cr.borderRightWidth,10),yl=parseInt(cr.borderBottomWidth,10),zr=0,Fc=0,tp="offsetWidth"in js?js.offsetWidth-js.clientWidth-Rr-oa:0,Qo="offsetHeight"in js?js.offsetHeight-js.clientHeight-za-yl:0;if(St===js)zr="start"===M?Yr:"end"===M?Yr-ii:"nearest"===M?Fa(Jn,Jn+ii,ii,za,yl,Jn+Yr,Jn+Yr+Oi,Oi):Yr-ii/2,Fc="start"===L?Xo:"center"===L?Xo-Vn/2:"end"===L?Xo-Vn:Fa(Kn,Kn+Vn,Vn,Rr,oa,Kn+Xo,Kn+Xo+ji,ji),zr=Math.max(0,zr+Jn),Fc=Math.max(0,Fc+Kn);else{zr="start"===M?Yr-Nd-za:"end"===M?Yr-ci+yl+Qo:"nearest"===M?Fa(Nd,ci,hc,za,yl+Qo,Yr,Yr+Oi,Oi):Yr-(Nd+hc/2)+Qo/2,Fc="start"===L?Xo-Ei-Rr:"center"===L?Xo-(Ei+Bd/2)+tp/2:"end"===L?Xo-ri+oa+tp:Fa(Ei,ri,Bd,Rr,oa+tp,Xo,Xo+ji,ji);var vu=js.scrollLeft,ma=js.scrollTop;Yr+=ma-(zr=Math.max(0,Math.min(ma+zr,js.scrollHeight-hc+Qo))),Xo+=vu-(Fc=Math.max(0,Math.min(vu+Fc,js.scrollWidth-Bd+tp)))}Xa.push({el:js,top:zr,left:Fc})}return Xa}function fl(u){return u===Object(u)&&0!==Object.keys(u).length}let Ad=(()=>{class u{constructor(){this.resize$=new Vr.x}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var bo=U(4006),wy=U(2070),$u=U(4859),yi=U(3238),Gi=U(1281),ac=U(2687),Nm=U(5017),lc=U(9521);let Cy=(()=>{class u{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=(0,Gi.Ig)(i)}get inset(){return this._inset}set inset(i){this._inset=(0,Gi.Ig)(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,m){2&i&&(l.uIk("aria-orientation",m.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",m.vertical)("mat-divider-horizontal",!m.vertical)("mat-divider-inset",m.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,m){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),u})(),r1=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.BQ,yi.BQ]}),u})();const zm=["*"],sb=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],o1=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],l_=(0,yi.Id)((0,yi.Kr)(class{})),a1=(0,yi.Kr)(class{}),zl=new l.OlP("MatList"),cb=new l.OlP("MatNavList");let l1=(()=>{class u extends l_{constructor(){super(...arguments),this._stateChanges=new Vr.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return u.\u0275fac=function(){let f;return function(m){return(f||(f=l.n5z(u)))(m||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:cb,useExisting:u}]),l.qOj,l.TTD],ngContentSelectors:zm,decls:1,vars:0,template:function(i,m){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),u})(),My=(()=>{class u extends l_{constructor(i){super(),this._elementRef=i,this._stateChanges=new Vr.x,"action-list"===this._getListType()&&i.nativeElement.classList.add("mat-action-list")}_getListType(){const i=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===i?"list":"mat-action-list"===i?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:zl,useExisting:u}]),l.qOj,l.TTD],ngContentSelectors:zm,decls:1,vars:0,template:function(i,m){1&i&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),u})(),c_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),u})(),u_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),u})(),ub=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275dir=l.lG2({type:u,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),u})(),db=(()=>{class u extends a1{constructor(i,m,M,L){super(),this._element=i,this._isInteractiveList=!1,this._destroyed=new Vr.x,this._disabled=!1,this._isInteractiveList=!!(M||L&&"action-list"===L._getListType()),this._list=M||L;const le=this._getHostElement();"button"===le.nodeName.toLowerCase()&&!le.hasAttribute("type")&&le.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,vr.R)(this._destroyed)).subscribe(()=>{m.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(i){this._disabled=(0,Gi.Ig)(i)}ngAfterContentInit(){(0,yi.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(cb,8),l.Y36(zl,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,m,M){if(1&i&&(l.Suo(M,c_,5),l.Suo(M,u_,5),l.Suo(M,yi.X2,5)),2&i){let L;l.iGM(L=l.CRH())&&(m._avatar=L.first),l.iGM(L=l.CRH())&&(m._icon=L.first),l.iGM(L=l.CRH())&&(m._lines=L)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(i,m){2&i&&l.ekj("mat-list-item-disabled",m.disabled)("mat-list-item-with-avatar",m._avatar||m._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:o1,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(i,m){1&i&&(l.F$t(sb),l.TgZ(0,"span",0),l._UZ(1,"span",1),l.Hsn(2),l.TgZ(3,"span",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&i&&(l.xp6(1),l.Q6J("matRippleTrigger",m._getHostElement())("matRippleDisabled",m._isRippleDisabled()))},dependencies:[yi.wG],encapsulation:2,changeDetection:0}),u})(),fb=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.uc,yi.si,yi.BQ,yi.us,kt.ez,yi.uc,yi.BQ,yi.us,r1]}),u})();var Id=U(9549),Ic=U(3353),mb=U(515);const df=(0,Ic.i$)({passive:!0});let Pd=(()=>{class u{constructor(i,m){this._platform=i,this._ngZone=m,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return mb.E;const m=(0,Gi.fI)(i),M=this._monitoredElements.get(m);if(M)return M.subject;const L=new Vr.x,le="cdk-text-field-autofilled",we=Je=>{"cdk-text-field-autofill-start"!==Je.animationName||m.classList.contains(le)?"cdk-text-field-autofill-end"===Je.animationName&&m.classList.contains(le)&&(m.classList.remove(le),this._ngZone.run(()=>L.next({target:Je.target,isAutofilled:!1}))):(m.classList.add(le),this._ngZone.run(()=>L.next({target:Je.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{m.addEventListener("animationstart",we,df),m.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(m,{subject:L,unlisten:()=>{m.removeEventListener("animationstart",we,df)}}),L}stopMonitoring(i){const m=(0,Gi.fI)(i),M=this._monitoredElements.get(m);M&&(M.unlisten(),M.subject.complete(),m.classList.remove("cdk-text-field-autofill-monitored"),m.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(m))}ngOnDestroy(){this._monitoredElements.forEach((i,m)=>this.stopMonitoring(m))}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(Ic.t4),l.LFG(l.R0b))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),Ay=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({}),u})();const p_=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),gb=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Pc=0;const hf=(0,yi.FD)(class{constructor(u,f,i,m){this._defaultErrorStateMatcher=u,this._parentForm=f,this._parentFormGroup=i,this.ngControl=m,this.stateChanges=new Vr.x}});let pa=(()=>{class u extends hf{constructor(i,m,M,L,le,we,Je,St,Kt,Qt){super(we,L,le,M),this._elementRef=i,this._platform=m,this._autofillMonitor=St,this._formField=Qt,this._uid="mat-input-"+Pc++,this.focused=!1,this.stateChanges=new Vr.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Kn=>(0,Ic.qK)().has(Kn)),this._iOSKeyupListener=Kn=>{const Jn=Kn.target;!Jn.value&&0===Jn.selectionStart&&0===Jn.selectionEnd&&(Jn.setSelectionRange(1,1),Jn.setSelectionRange(0,0))};const Vn=this._elementRef.nativeElement,ii=Vn.nodeName.toLowerCase();this._inputValueAccessor=Je||Vn,this._previousNativeValue=this.value,this.id=this.id,m.IOS&&Kt.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ii,this._isTextarea="textarea"===ii,this._isInFormField=!!Qt,this._isNativeSelect&&(this.controlType=Vn.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(i){this._disabled=(0,Gi.Ig)(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(bo.kI.required)??!1}set required(i){this._required=(0,Gi.Ig)(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&(0,Ic.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=(0,Gi.Ig)(i)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const i=this._formField,m=i&&"legacy"===i.appearance&&!i._hasLabel?.()?null:this.placeholder;if(m!==this._previousPlaceholder){const M=this._elementRef.nativeElement;this._previousPlaceholder=m,m?M.setAttribute("placeholder",m):M.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_validateType(){gb.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const i=this._elementRef.nativeElement,m=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&m&&m.label)}return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(Ic.t4),l.Y36(bo.a5,10),l.Y36(bo.F,8),l.Y36(bo.sg,8),l.Y36(yi.rD),l.Y36(p_,10),l.Y36(Pd),l.Y36(l.R0b),l.Y36(Id.G_,8))},u.\u0275dir=l.lG2({type:u,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(i,m){1&i&&l.NdJ("focus",function(){return m._focusChanged(!0)})("blur",function(){return m._focusChanged(!1)})("input",function(){return m._onInput()}),2&i&&(l.Ikx("disabled",m.disabled)("required",m.required),l.uIk("id",m.id)("data-placeholder",m.placeholder)("name",m.name||null)("readonly",m.readonly&&!m._isNativeSelect||null)("aria-invalid",m.empty&&m.required?null:m.errorState)("aria-required",m.required),l.ekj("mat-input-server",m._isServer)("mat-native-select-inline",m._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:Id.Eo,useExisting:u}]),l.qOj,l.TTD]}),u})(),Od=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[yi.rD],imports:[Ay,Id.lN,yi.BQ,Ay,Id.lN]}),u})();var fa=U(8605),ml=U(445),Nh=U(4004),zh=U(1884);const _u=["*"],Vh=["content"];function Uh(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const M=l.oxw();return l.KtG(M._onBackdropClicked())}),l.qZA()}if(2&u){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function jh(u,f){1&u&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const Gh=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Hh=["mat-drawer","mat-drawer-content","*"];function $h(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(i);const M=l.oxw();return l.KtG(M._onBackdropClicked())}),l.qZA()}if(2&u){const i=l.oxw();l.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function Zh(u,f){1&u&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const Iy=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Py=["mat-sidenav","mat-sidenav-content","*"],f_={transformDrawer:(0,Ne.X$)("transform",[(0,Ne.SB)("open, open-instant",(0,Ne.oB)({transform:"none",visibility:"visible"})),(0,Ne.SB)("void",(0,Ne.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Ne.eR)("void => open-instant",(0,Ne.jt)("0ms")),(0,Ne.eR)("void <=> open, open-instant => void",(0,Ne.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ky=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Ry(){return!1}}),Um=new l.OlP("MAT_DRAWER_CONTAINER");let pf=(()=>{class u extends fa.PQ{constructor(i,m,M,L,le){super(M,L,le),this._changeDetectorRef=i,this._container=m}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>m_)),l.Y36(l.SBq),l.Y36(fa.mF),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,m){2&i&&l.Udp("margin-left",m._container._contentMargins.left,"px")("margin-right",m._container._contentMargins.right,"px")},features:[l._Bn([{provide:fa.PQ,useExisting:u}]),l.qOj],ngContentSelectors:_u,decls:1,vars:0,template:function(i,m){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),u})(),Fy=(()=>{class u{constructor(i,m,M,L,le,we,Je,St){this._elementRef=i,this._focusTrapFactory=m,this._focusMonitor=M,this._platform=L,this._ngZone=le,this._interactivityChecker=we,this._doc=Je,this._container=St,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Vr.x,this._animationEnd=new Vr.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,mo.h)(Kt=>Kt),(0,Nh.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,mo.h)(Kt=>Kt.fromState!==Kt.toState&&0===Kt.toState.indexOf("open")),(0,ea.h)(void 0)),this._closedStream=this.openedChange.pipe((0,mo.h)(Kt=>!Kt),(0,Nh.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,mo.h)(Kt=>Kt.fromState!==Kt.toState&&"void"===Kt.toState),(0,ea.h)(void 0)),this._destroyed=new Vr.x,this.onPositionChanged=new l.vpe,this._modeChanged=new Vr.x,this.openedChange.subscribe(Kt=>{Kt?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Fo.R)(this._elementRef.nativeElement,"keydown").pipe((0,mo.h)(Kt=>Kt.keyCode===lc.hY&&!this.disableClose&&!(0,lc.Vb)(Kt)),(0,vr.R)(this._destroyed)).subscribe(Kt=>this._ngZone.run(()=>{this.close(),Kt.stopPropagation(),Kt.preventDefault()}))}),this._animationEnd.pipe((0,zh.x)((Kt,Qt)=>Kt.fromState===Qt.fromState&&Kt.toState===Qt.toState)).subscribe(Kt=>{const{fromState:Qt,toState:Vn}=Kt;(0===Vn.indexOf("open")&&"void"===Qt||"void"===Vn&&0===Qt.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(i){(i="end"===i?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(i),this._position=i,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(i){this._mode=i,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(i){this._disableClose=(0,Gi.Ig)(i)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(i){("true"===i||"false"===i||null==i)&&(i=(0,Gi.Ig)(i)),this._autoFocus=i}get opened(){return this._opened}set opened(i){this.toggle((0,Gi.Ig)(i))}_forceFocus(i,m){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const M=()=>{i.removeEventListener("blur",M),i.removeEventListener("mousedown",M),i.removeAttribute("tabindex")};i.addEventListener("blur",M),i.addEventListener("mousedown",M)})),i.focus(m)}_focusByCssSelector(i,m){let M=this._elementRef.nativeElement.querySelector(i);M&&this._forceFocus(M,m)}_takeFocus(){if(!this._focusTrap)return;const i=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(m=>{!m&&"function"==typeof this._elementRef.nativeElement.focus&&i.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(i){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,i):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const i=this._doc.activeElement;return!!i&&this._elementRef.nativeElement.contains(i)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(i){return this.toggle(!0,i)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(i=!this.opened,m){i&&m&&(this._openedVia=m);const M=this._setOpen(i,!i&&this._isFocusWithinDrawer(),this._openedVia||"program");return i||(this._openedVia=null),M}_setOpen(i,m,M){return this._opened=i,i?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",m&&this._restoreFocus(M)),this._updateFocusTrapState(),new Promise(L=>{this.openedChange.pipe((0,ca.q)(1)).subscribe(le=>L(le?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(i){const m=this._elementRef.nativeElement,M=m.parentNode;"end"===i?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),M.insertBefore(this._anchor,m)),M.appendChild(m)):this._anchor&&this._anchor.parentNode.insertBefore(m,this._anchor)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(ac.qV),l.Y36(ac.tE),l.Y36(Ic.t4),l.Y36(l.R0b),l.Y36(ac.ic),l.Y36(kt.K0,8),l.Y36(Um,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer"]],viewQuery:function(i,m){if(1&i&&l.Gf(Vh,5),2&i){let M;l.iGM(M=l.CRH())&&(m._content=M.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,m){1&i&&l.WFA("@transform.start",function(L){return m._animationStarted.next(L)})("@transform.done",function(L){return m._animationEnd.next(L)}),2&i&&(l.uIk("align",null),l.d8E("@transform",m._animationState),l.ekj("mat-drawer-end","end"===m.position)("mat-drawer-over","over"===m.mode)("mat-drawer-push","push"===m.mode)("mat-drawer-side","side"===m.mode)("mat-drawer-opened",m.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:_u,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,m){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[fa.PQ],encapsulation:2,data:{animation:[f_.transformDrawer]},changeDetection:0}),u})(),m_=(()=>{class u{constructor(i,m,M,L,le,we=!1,Je){this._dir=i,this._element=m,this._ngZone=M,this._changeDetectorRef=L,this._animationMode=Je,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new Vr.x,this._doCheckSubject=new Vr.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Vr.x,i&&i.change.pipe((0,vr.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),le.change().pipe((0,vr.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=we}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(i){this._autosize=(0,Gi.Ig)(i)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(i){this._backdropOverride=null==i?null:(0,Gi.Ig)(i)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,ta.O)(this._allDrawers),(0,vr.R)(this._destroyed)).subscribe(i=>{this._drawers.reset(i.filter(m=>!m._container||m._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,ta.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(i=>{this._watchDrawerToggle(i),this._watchDrawerPosition(i),this._watchDrawerMode(i)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Ha.b)(10),(0,vr.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(i=>i.open())}close(){this._drawers.forEach(i=>i.close())}updateContentMargins(){let i=0,m=0;if(this._left&&this._left.opened)if("side"==this._left.mode)i+=this._left._getWidth();else if("push"==this._left.mode){const M=this._left._getWidth();i+=M,m-=M}if(this._right&&this._right.opened)if("side"==this._right.mode)m+=this._right._getWidth();else if("push"==this._right.mode){const M=this._right._getWidth();m+=M,i-=M}i=i||null,m=m||null,(i!==this._contentMargins.left||m!==this._contentMargins.right)&&(this._contentMargins={left:i,right:m},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(i){i._animationStarted.pipe((0,mo.h)(m=>m.fromState!==m.toState),(0,vr.R)(this._drawers.changes)).subscribe(m=>{"open-instant"!==m.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==i.mode&&i.openedChange.pipe((0,vr.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(i.opened))}_watchDrawerPosition(i){!i||i.onPositionChanged.pipe((0,vr.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,ca.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(i){i&&i._modeChanged.pipe((0,vr.R)((0,fc.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(i){const m=this._element.nativeElement.classList,M="mat-drawer-container-has-open";i?m.add(M):m.remove(M)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(i=>{"end"==i.position?this._end=i:this._start=i}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(i=>i&&!i.disableClose&&this._canHaveBackdrop(i)).forEach(i=>i._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(i){return"side"!==i.mode||!!this._backdropOverride}_isDrawerOpen(i){return null!=i&&i.opened}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(ml.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(fa.rL),l.Y36(ky),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-drawer-container"]],contentQueries:function(i,m,M){if(1&i&&(l.Suo(M,pf,5),l.Suo(M,Fy,5)),2&i){let L;l.iGM(L=l.CRH())&&(m._content=L.first),l.iGM(L=l.CRH())&&(m._allDrawers=L)}},viewQuery:function(i,m){if(1&i&&l.Gf(pf,5),2&i){let M;l.iGM(M=l.CRH())&&(m._userContent=M.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,m){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",m._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:Um,useExisting:u}])],ngContentSelectors:Hh,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,m){1&i&&(l.F$t(Gh),l.YNc(0,Uh,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,jh,2,0,"mat-drawer-content",1)),2&i&&(l.Q6J("ngIf",m.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!m._content))},dependencies:[kt.O5,pf],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),u})(),g_=(()=>{class u extends pf{constructor(i,m,M,L,le){super(i,m,M,L,le)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>jm)),l.Y36(l.SBq),l.Y36(fa.mF),l.Y36(l.R0b))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(i,m){2&i&&l.Udp("margin-left",m._container._contentMargins.left,"px")("margin-right",m._container._contentMargins.right,"px")},features:[l._Bn([{provide:fa.PQ,useExisting:u}]),l.qOj],ngContentSelectors:_u,decls:1,vars:0,template:function(i,m){1&i&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),u})(),__=(()=>{class u extends Fy{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(i){this._fixedInViewport=(0,Gi.Ig)(i)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(i){this._fixedTopGap=(0,Gi.su)(i)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(i){this._fixedBottomGap=(0,Gi.su)(i)}}return u.\u0275fac=function(){let f;return function(m){return(f||(f=l.n5z(u)))(m||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(i,m){2&i&&(l.uIk("align",null),l.Udp("top",m.fixedInViewport?m.fixedTopGap:null,"px")("bottom",m.fixedInViewport?m.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===m.position)("mat-drawer-over","over"===m.mode)("mat-drawer-push","push"===m.mode)("mat-drawer-side","side"===m.mode)("mat-drawer-opened",m.opened)("mat-sidenav-fixed",m.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:_u,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,m){1&i&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[fa.PQ],encapsulation:2,data:{animation:[f_.transformDrawer]},changeDetection:0}),u})(),jm=(()=>{class u extends m_{}return u.\u0275fac=function(){let f;return function(m){return(f||(f=l.n5z(u)))(m||u)}}(),u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-sidenav-container"]],contentQueries:function(i,m,M){if(1&i&&(l.Suo(M,g_,5),l.Suo(M,__,5)),2&i){let L;l.iGM(L=l.CRH())&&(m._content=L.first),l.iGM(L=l.CRH())&&(m._allDrawers=L)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,m){2&i&&l.ekj("mat-drawer-container-explicit-backdrop",m._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:Um,useExisting:u}]),l.qOj],ngContentSelectors:Py,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,m){1&i&&(l.F$t(Iy),l.YNc(0,$h,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,Zh,2,0,"mat-sidenav-content",1)),2&i&&(l.Q6J("ngIf",m.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!m._content))},dependencies:[kt.O5,g_],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),u})(),y_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[kt.ez,yi.BQ,fa.ZD,fa.ZD,yi.BQ]}),u})();var Ly=U(9643);const Gm=["input"],Hm=function(u){return{enterDuration:u}},v_=["*"],yb=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let $m=0;const Zm={provide:bo.JU,useExisting:(0,l.Gpc)(()=>w_),multi:!0};class b_{constructor(f,i){this.source=f,this.checked=i}}const By=(0,yi.sb)((0,yi.pj)((0,yi.Kr)((0,yi.Id)(class{constructor(u){this._elementRef=u}}))));let x_=(()=>{class u extends By{constructor(i,m,M,L,le,we,Je){super(i),this._focusMonitor=m,this._changeDetectorRef=M,this.defaults=le,this._onChange=St=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(L)||0,this.color=this.defaultColor=le.color||"accent",this._noopAnimations="NoopAnimations"===we,this.id=this._uniqueId=`${Je}${++$m}`}get required(){return this._required}set required(i){this._required=(0,Gi.Ig)(i)}get checked(){return this._checked}set checked(i){this._checked=(0,Gi.Ig)(i),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?this._focused=!0:i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[l.qOj]}),u})(),w_=(()=>{class u extends x_{constructor(i,m,M,L,le,we){super(i,m,M,L,le,we,"mat-slide-toggle-")}_createChangeEvent(i){return new b_(this,i)}_onChangeEvent(i){i.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(i){i.stopPropagation()}focus(i,m){m?this._focusMonitor.focusVia(this._inputElement,m,i):this._inputElement.nativeElement.focus(i)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.SBq),l.Y36(ac.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(yb),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-slide-toggle"]],viewQuery:function(i,m){if(1&i&&l.Gf(Gm,5),2&i){let M;l.iGM(M=l.CRH())&&(m._inputElement=M.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(i,m){2&i&&(l.Ikx("id",m.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),l.ekj("mat-checked",m.checked)("mat-disabled",m.disabled)("mat-slide-toggle-label-before","before"==m.labelPosition)("_mat-animation-noopable",m._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[l._Bn([Zm]),l.qOj],ngContentSelectors:v_,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(i,m){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),l.NdJ("change",function(L){return m._onChangeEvent(L)})("click",function(L){return m._onInputClick(L)}),l.qZA(),l.TgZ(5,"span",5),l._UZ(6,"span",6),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()()(),l.TgZ(9,"span",9,10),l.NdJ("cdkObserveContent",function(){return m._onLabelTextChange()}),l.TgZ(11,"span",11),l._uU(12,"\xa0"),l.qZA(),l.Hsn(13),l.qZA()()),2&i){const M=l.MAs(1),L=l.MAs(10);l.uIk("for",m.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!L.textContent||!L.textContent.trim()),l.xp6(1),l.Q6J("id",m.inputId)("required",m.required)("tabIndex",m.tabIndex)("checked",m.checked)("disabled",m.disabled),l.uIk("name",m.name)("aria-checked",m.checked)("aria-label",m.ariaLabel)("aria-labelledby",m.ariaLabelledby)("aria-describedby",m.ariaDescribedby),l.xp6(4),l.Q6J("matRippleTrigger",M)("matRippleDisabled",m.disableRipple||m.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,Hm,m._noopAnimations?0:150))}},dependencies:[yi.wG,Ly.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}"],encapsulation:2,changeDetection:0}),u})(),Wm=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({}),u})(),vb=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[Wm,yi.si,yi.BQ,Ly.Q8,Wm,yi.BQ]}),u})();const zy=["exampleLink"];function Vy(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(i);const M=l.oxw();return l.KtG(M.clearSearch())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}const E_=function(u){return{_routerLinkActiveWakeUpHack_:u}};function Uy(u,f){if(1&u&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&u){const i=l.oxw().$implicit,m=l.oxw(2);l.Q6J("routerLink","/demo/"+(m.isEditMode?"/edit/":"")+i.path)("routerLinkActiveOptions",l.VKq(3,E_,m.isEditMode)),l.xp6(2),l.hij(" ",i.data.label," ")}}function bb(u,f){if(1&u&&(l.ynx(0),l.YNc(1,Uy,3,5,"a",13),l.BQk()),2&u){const i=f.$implicit;l.xp6(1),l.Q6J("ngIf",i)}}function jy(u,f){if(1&u&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,bb,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&u){const i=f.$implicit,m=l.oxw();l.xp6(2),l.Oqu(i),l.xp6(1),l.Q6J("ngForOf",m.routes[i])}}let Gy=(()=>{class u{constructor(i,m,M,L){this.zone=i,this.router=m,this.activatedRoute=M,this.mapResizeService=L,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild?.params.demoUrl,this.originalRoutes=vy(Q0[0].children,le=>le.data?le.data.cat:null),this.categories=[zi.STYLES,zi.LAYERS,zi.SOURCES,zi.USER_INTERACTION,zi.CAMERA,zi.CONTROLS_AND_OVERLAYS]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(i){const m=this.activatedRoute.snapshot.firstChild;this.router.navigate(i.checked?["demo","edit",m.url[0].path]:["demo",m.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Lm(u){return Lh(u,5)}(this.originalRoutes),Object.values(this.routes).forEach(i=>{i.forEach((m,M)=>{m.data&&!m.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete i[M]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Ho.P)()).subscribe(()=>{const i=this.exampleLinks.find(m=>m.nativeElement.classList.contains("active"));i&&function Td(u,f){var i=u.isConnected||u.ownerDocument.documentElement.contains(u);if(fl(f)&&"function"==typeof f.behavior)return f.behavior(i?Sd(u,f):[]);if(i){var m=function ha(u){return!1===u?{block:"end",inline:"nearest"}:fl(u)?u:{block:"start",inline:"nearest"}}(f);(function Ss(u,f){void 0===f&&(f="auto");var i="scrollBehavior"in document.body.style;u.forEach(function(m){var M=m.el,L=m.top,le=m.left;M.scroll&&i?M.scroll({top:L,left:le,behavior:f}):(M.scrollTop=L,M.scrollLeft=le)})})(Sd(u,m),m.behavior)}}(i.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.R0b),l.Y36(q.F0),l.Y36(q.gz),l.Y36(Ad))},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],viewQuery:function(i,m){if(1&i&&l.Gf(zy,5,l.SBq),2&i){let M;l.iGM(M=l.CRH())&&(m.exampleLinks=M)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(i,m){1&i&&(l.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),l.NdJ("click",function(){return m.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA()()(),l.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(L){return m.isEditMode=L})("change",function(L){return m.toggleEdit(L)}),l._uU(6," Edit! "),l.qZA()(),l.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return m.onSidenavChange()}),l.TgZ(10,"mat-form-field",6)(11,"input",7),l.NdJ("ngModelChange",function(L){return m.searchTerm=L})("ngModelChange",function(){return m.search()}),l.qZA(),l.YNc(12,Vy,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,jy,5,2,"ng-container",9),l.qZA()(),l.TgZ(15,"mat-sidenav-content")(16,"section",10),l._UZ(17,"router-outlet"),l.qZA()()()),2&i&&(l.xp6(5),l.Q6J("ngModel",m.isEditMode),l.xp6(3),l.Q6J("opened",m.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",m.searchTerm),l.xp6(1),l.Q6J("ngIf",m.searchTerm),l.xp6(2),l.Q6J("ngForOf",m.categories))},dependencies:[q.lC,q.yS,q.Od,kt.sg,kt.O5,bo.Fj,bo.JJ,bo.On,wy.a,$u.lW,l1,db,ub,Cy,Id.KE,Id.R9,pa,qe.Hw,__,jm,g_,w_],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),u})(),ir=(()=>{class u{constructor(i,m){this.mapResizeService=i,this.map=m,this.sub=new Qs.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Ad),l.Y36(Ai))},u.\u0275dir=l.lG2({type:u,selectors:[["mgl-map"]]}),u})();const D_=function(){return[15.5]},Hy=function(u){return[u,40.7135]},$y=function(){return[45]},Zy=function(u){return[u]},Wy=function(){return["==","extrude","true"]},M_=function(){return["linear"]},S_=function(){return["zoom"]},qy=function(){return["get","height"]},T_=function(u,f,i){return["interpolate",u,f,15,0,15.05,i]},u1=function(){return["get","min_height"]},xb=function(u,f){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":u,"fill-extrusion-base":f,"fill-extrusion-opacity":.6}};let wb=(()=>{class u{onLoad(i){const m=i.getStyle().layers;!m||(this.labelLayerId=this.getLabelLayerId(m))}getLabelLayerId(i){for(const m of i)if("symbol"===m.type&&m.layout?.["text-field"])return m.id}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:34,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","composite","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(L){return m.onLoad(L)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("zoom",l.DdM(10,D_))("center",l.VKq(11,Hy,-74.0066))("pitch",l.DdM(13,$y))("bearing",l.VKq(14,Zy,-17.6)),l.xp6(1),l.Q6J("filter",l.DdM(16,Wy))("minzoom",15)("paint",l.WLB(31,xb,l.kEZ(20,T_,l.DdM(17,M_),l.DdM(18,S_),l.DdM(19,qy)),l.kEZ(27,T_,l.DdM(24,M_),l.DdM(25,S_),l.DdM(26,u1))))("before",m.labelLayerId))},dependencies:[Ai,so,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Yy=function(u){return{width:64,height:64,data:u}},Cb=function(){return{}},Ts=function(){return[0,0]},Ky=function(u){return{type:"Point",coordinates:u}},Eb=function(u,f){return{type:"Feature",properties:u,geometry:f}},Db=function(u){return[u]},Xy=function(u){return{type:"FeatureCollection",features:u}},Mb=function(u){return{type:"geojson",data:u}},Qy=function(){return{"icon-image":"gradient"}};let Jy=(()=>{class u{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const M=new Uint8Array(16384);for(let L=0;L<64;L++)for(let le=0;le<64;le++){const we=4*(64*le+L);M[we+0]=le/64*255,M[we+1]=L/64*255,M[we+2]=128,M[we+3]=255}return M}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:21,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0)(2,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.xp6(1),l.Q6J("data",l.VKq(5,Yy,m.imageData)),l.xp6(1),l.Q6J("source",l.VKq(18,Mb,l.VKq(16,Xy,l.VKq(14,Db,l.WLB(11,Eb,l.DdM(7,Cb),l.VKq(9,Ky,l.DdM(8,Ts)))))))("layout",l.DdM(20,Qy)))},dependencies:[Ai,so,Lo,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Wh(u,f){if(1&u&&l._UZ(0,"mgl-image",3),2&u){const i=f.$implicit;l.Q6J("id",i.id)("data",i)}}const Sb=function(){return[0,0]},A_=function(u){return{type:"Point",coordinates:u}},ev=function(){return{color:"255,0,0"}},I_=function(u,f){return{type:"Feature",geometry:u,properties:f}},tv=function(){return[50,0]},d1=function(){return{color:"255,209,28"}},P_=function(u){return[u,0]},O_=function(){return{color:"242,127,32"}},cc=function(u,f,i){return[u,f,i]},Tb=function(u){return{type:"FeatureCollection",features:u}},nv=function(u){return{type:"geojson",data:u}},Oc=function(){return["get","color"]},uc=function(u){return["concat","square-rgb-",u]},dc=function(u){return{"icon-image":u}};let iv=(()=>{class u{constructor(){this.imagesData=[]}generateImage({id:i}){const m="square-rgb-";if(0!==i.indexOf(m))return;const M=i.replace(m,"").split(",").map(Number),we=new Uint8Array(16384);for(let St=0;St<64;St++)for(let Kt=0;Kt<64;Kt++){const Qt=4*(64*Kt+St);we[Qt+0]=M[0],we[Qt+1]=M[1],we[Qt+2]=M[2],we[Qt+3]=255}this.imagesData=[...this.imagesData,{id:i,width:64,height:64,data:we}]}trackByImage(i,m){return m.id}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(L){return m.generateImage(L)}),l.YNc(1,Wh,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.xp6(1),l.Q6J("ngForOf",m.imagesData)("ngForTrackBy",m.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,nv,l.VKq(32,Tb,l.kEZ(28,cc,l.WLB(10,I_,l.VKq(7,A_,l.DdM(6,Sb)),l.DdM(9,ev)),l.WLB(17,I_,l.VKq(14,A_,l.DdM(13,tv)),l.DdM(16,d1)),l.WLB(25,I_,l.VKq(22,A_,l.VKq(20,P_,-50)),l.DdM(24,O_))))))("layout",l.VKq(39,dc,l.VKq(37,uc,l.DdM(36,Oc)))))},dependencies:[kt.sg,Ai,so,Lo,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const rv=function(){return{}},Ab=function(){return[0,0]},Ib=function(u){return{type:"Point",coordinates:u}},Pb=function(u,f){return{type:"Feature",properties:u,geometry:f}},Ob=function(u){return[u]},k_=function(u){return{type:"FeatureCollection",features:u}},ff=function(u){return{type:"geojson",data:u}},kb=function(){return{"icon-image":"cat","icon-size":.25}};function ov(u,f){1&u&&l._UZ(0,"mgl-layer",2),2&u&&l.Q6J("source",l.VKq(13,ff,l.VKq(11,k_,l.VKq(9,Ob,l.WLB(6,Pb,l.DdM(2,rv),l.VKq(4,Ib,l.DdM(3,Ab)))))))("layout",l.DdM(15,kb))}let Rb=(()=>{class u{constructor(){this.imageLoaded=!1}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map")(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return m.imageLoaded=!0}),l.qZA(),l.YNc(2,ov,1,16,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.xp6(2),l.Q6J("ngIf",m.imageLoaded))},dependencies:[kt.O5,Ai,so,Lo,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const sv=function(u){return[u,38.907]},av=function(){return[11.15]};let qm=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("center",l.VKq(5,sv,-77.04))("zoom",l.DdM(7,av))("attributionControl",!1))},dependencies:[Ai,Ur,us,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Fb(u,f){1&u&&l._UZ(0,"mgl-feature",4),2&u&&l.Q6J("geometry",f.$implicit)}const lv=function(){return[8]},cv=function(){return{"icon-image":"rocket-15"}};let R_=(()=>{class u{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(i){this.center=i.features[0].geometry.coordinates}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(L){return m.map=L}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,Fb,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(L){return m.centerMapTo(L)})("layerMouseEnter",function(){return m.cursorStyle="pointer"})("layerMouseLeave",function(){return m.cursorStyle=""}),l.qZA()()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("zoom",l.DdM(7,lv))("center",m.center)("cursorStyle",m.cursorStyle),l.xp6(2),l.Q6J("ngForOf",m.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,cv)))},dependencies:[kt.sg,Ai,so,Wr,uo,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Ym(u,f){1&u&&l._UZ(0,"showcase-cluster-point",6),2&u&&l.Q6J("properties",f.$implicit.properties)}const uv=function(){return[.3]},dv=function(){return[0,20]},F_=function(){return["!=","cluster",!0]},hv=function(u){return{fill:u}};function pv(u,f){if(1&u&&(l.O4$(),l._UZ(0,"path",4)),2&u){const i=f.$implicit;l.Q6J("ngStyle",l.VKq(2,hv,i.fill)),l.uIk("d",i.d)}}const fv=function(u){return{font:u}},kd=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let mv=(()=>{class u{constructor(){const i=["<",["get","mag"],2],m=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],M=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],L=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",i,1,0]],mag2:["+",["case",m,1,0]],mag3:["+",["case",M,1,0]],mag4:["+",["case",L,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",i,kd[0],m,kd[1],M,kd[2],L,kd[3],kd[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,Ym,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v10"),l.Q6J("zoom",l.DdM(12,uv))("center",l.DdM(13,dv)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",m.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,F_))("paint",m.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,F_))("layout",m.labelLayout)("paint",m.labelPaint))},dependencies:function(){return[Ai,so,Wr,Jr,Hl,ir,gv]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),gv=(()=>{class u{ngOnInit(){const i=[],m=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let M=0;for(const le of m)i.push(M),M+=le;this.font=(M>=1e3?22:M>=100?20:M>=10?18:16)+"px sans-serif",this.r=M>=1e3?50:M>=100?32:M>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let le=0;le<m.length;le++)this.segments.push(this.donutSegment(i[le]/M,(i[le]+m[le])/M,kd[le]));this.totalString=M.toLocaleString()}donutSegment(i,m,M){m-i==1&&(m-=1e-5);const L=2*Math.PI*(i-.25),le=2*Math.PI*(m-.25),we=Math.cos(L),Je=Math.sin(L),St=Math.cos(le),Kt=Math.sin(le),Qt=m-i>.5?1:0;return{d:`M ${this.r+this.r0*we} ${this.r+this.r0*Je} L ${this.r+this.r*we} ${this.r+this.r*Je} A ${this.r} ${this.r} 0 ${Qt} 1 ${this.r+this.r*St} ${this.r+this.r*Kt} L ${this.r+this.r0*St} ${this.r+this.r0*Kt} A ${this.r0} ${this.r0} 0 ${Qt} 0 ${this.r+this.r0*we} ${this.r+this.r0*Je}`,fill:M}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(i,m){1&i&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,pv,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA()()),2&i&&(l.Q6J("ngStyle",l.VKq(10,fv,m.font)),l.uIk("width",m.w)("height",m.w)("viewbox",m.viewbox),l.xp6(1),l.Q6J("ngForOf",m.segments),l.xp6(1),l.uIk("cx",m.r)("cy",m.r)("r",m.r0),l.xp6(1),l.uIk("transform",m.textTransform),l.xp6(1),l.hij(" ",m.totalString," "))},dependencies:[kt.sg,kt.PC],encapsulation:2}),u})();const _v=function(){return["has","point_count"]},Lb=function(){return[0,"#51bbd6"]},Bb=function(){return[100,"#f1f075"]},Nb=function(){return[750,"#f28cb1"]},yv=function(u,f,i){return[u,f,i]},vv=function(u){return{property:"point_count",type:"interval",stops:u}},zb=function(){return[0,20]},Vb=function(){return[100,30]},Ub=function(){return[750,40]},jb=function(u,f){return{"circle-color":u,"circle-radius":f}},Gb=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},Hb=function(u){return{"text-field":"{point_count_abbreviated}","text-font":u,"text-size":12}},$b=function(){return["!has","point_count"]},Zb=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Wb(u,f){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,_v))("paint",l.WLB(29,jb,l.VKq(18,vv,l.kEZ(14,yv,l.DdM(11,Lb),l.DdM(12,Bb),l.DdM(13,Nb))),l.VKq(27,vv,l.kEZ(23,yv,l.DdM(20,zb),l.DdM(21,Vb),l.DdM(22,Ub))))),l.xp6(1),l.Q6J("filter",l.DdM(32,_v))("layout",l.VKq(34,Hb,l.DdM(33,Gb))),l.xp6(1),l.Q6J("filter",l.DdM(36,$b))("paint",l.DdM(37,Zb))}}const qb=function(){return[3]},Yb=function(u){return[u,40.66995747013945]};let bv=(()=>{class u{ngOnInit(){var i=this;return oo(function*(){i.earthquakes=yield U.e(841).then(U.t.bind(U,6841,19))})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Wb,5,38,"ng-container",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/dark-v9"),l.Q6J("zoom",l.DdM(5,qb))("center",l.VKq(6,Yb,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",m.earthquakes))},dependencies:[kt.O5,Ai,so,Wr,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const xv=function(u){return[u,38.907]},wv=function(){return[11.15]},Ev=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let Dv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("center",l.VKq(6,xv,-77.04))("zoom",l.DdM(8,wv))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Ev)))},dependencies:[Ai,Ur,us,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Mv=function(){return[36.235656,50.00387]},Sv=function(){return[11.15]};let Tv=(()=>{class u{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("center",l.DdM(5,Mv))("zoom",l.DdM(6,Sv))("locale",m.locale))},dependencies:[Ai,Ur,co,wr,Ns,zs,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const L_=function(u,f,i){return{"background-image":u,width:f,height:i}};function B_(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"mgl-marker",2)(1,"div",3),l.NdJ("click",function(){const L=l.CHM(i).$implicit,le=l.oxw();return l.KtG(le.alert(L.properties.message))}),l.qZA()()}if(2&u){const i=f.$implicit;l.Q6J("feature",i),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,L_,"url(https://placekitten.com/g/"+i.properties.iconSize.join("/")+"/)",i.properties.iconSize[0]+"px",i.properties.iconSize[1]+"px"))}}const Rd=function(){return[5]},Kb=function(u,f){return[u,f]};let Xb=(()=>{class u{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(i){alert(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,B_,2,6,"mgl-marker",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(5,Rd))("center",l.WLB(6,Kb,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",m.geojson.features))},dependencies:[kt.sg,kt.PC,Ai,il,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),u})();const qh=function(){return[3]},h1=function(u){return[u,39]};let N_=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,m){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("mapbox://styles/mapbox/dark-v9"),l.Q6J("zoom",l.DdM(4,qh))("center",l.VKq(5,h1,-77.38)))},dependencies:[Ai,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const p1=function(){return[9]},Av=function(u){return[u,40]};let Iv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(i,m){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(4,p1))("center",l.VKq(5,Av,-74.5)))},dependencies:[Ai,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const f1=["*",[["mat-card-footer"]]],Ti=["*","mat-card-footer"];let U_=(()=>{class u{constructor(i){this._animationMode=i}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(i,m){2&i&&l.ekj("_mat-animation-noopable","NoopAnimations"===m._animationMode)},exportAs:["matCard"],ngContentSelectors:Ti,decls:2,vars:0,template:function(i,m){1&i&&(l.F$t(f1),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),u})(),ix=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.BQ,yi.BQ]}),u})();function gf(u,f){if(1&u&&(l.TgZ(0,"mgl-control",3)(1,"mat-card")(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA()()()),2&u){const i=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",i.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",i.coordinates[1],"")}}const rx=function(){return[2]},Pv=function(){return[0,0]};let ox=(()=>{class u{constructor(){this.color="#3887be"}onDragEnd(i){this.coordinates=i.getLngLat().toArray()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(L){return m.onDragEnd(L)}),l.qZA(),l.YNc(2,gf,6,2,"mgl-control",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,rx))("center",l.DdM(8,Pv)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,Pv))("draggable",!0),l.xp6(1),l.Q6J("ngIf",m.coordinates))},dependencies:[kt.O5,Ai,il,Ur,U_,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Km=function(){return[13]},Ov=function(){return[11.255,43.77]};let kv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/outdoors-v9"),l.Q6J("zoom",l.DdM(4,Km))("center",l.DdM(5,Ov)))},dependencies:[Ai,Ur,co,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Rv=function(){return[15]},sx=function(u){return[u,37.830348]},_f=function(){return{}},yf=function(u){return[u,37.83381888486939]},ax=function(u){return[u,37.83317489144141]},lx=function(u){return[u,37.83270036637107]},cx=function(u){return[u,37.832056363179625]},Fv=function(u){return[u,37.83114119107971]},Lv=function(u){return[u,37.83049717427869]},Bv=function(u){return[u,37.829920943955045]},ux=function(u){return[u,37.82954808664175]},Nv=function(u){return[u,37.82944639795659]},dx=function(u){return[u,37.82880236636284]},hx=function(u){return[u,37.82931081282506]},w1=function(u){return[u,37.83080223556934]},C1=function(u){return[u,37.83168351665737]},E1=function(u){return[u,37.832158048267786]},D1=function(u){return[u,37.83297152392784]},zv=function(u){return[u,37.83263257682617]},Xm=function(u){return[u,37.832937629287755]},px=function(u){return[u,37.832429207817725]},fx=function(u){return[u,37.832564787218985]},Vv=function(u){return[u,37.83337825839438]},vf=function(u){return[u,37.83368330777276]},mx=function(u,f,i,m,M,L,le,we,Je,St,Kt,Qt,Vn,ii,Kn,Jn,vi,Oi,ji,xo,Hr){return[u,f,i,m,M,L,le,we,Je,St,Kt,Qt,Vn,ii,Kn,Jn,vi,Oi,ji,xo,Hr]},gx=function(u){return{type:"LineString",coordinates:u}},_x=function(u,f){return{type:"Feature",properties:u,geometry:f}},yx=function(u){return{type:"geojson",data:u}},vx=function(){return{"line-join":"round","line-cap":"round"}},Uv=function(){return{"line-color":"#888","line-width":8}};let bx=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,Rv))("center",l.VKq(8,sx,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,yx,l.WLB(77,_x,l.DdM(10,_f),l.VKq(75,gx,l.rFY(53,mx,[l.VKq(11,yf,-122.48369693756104),l.VKq(13,ax,-122.48348236083984),l.VKq(15,lx,-122.48339653015138),l.VKq(17,cx,-122.48356819152832),l.VKq(19,Fv,-122.48404026031496),l.VKq(21,Lv,-122.48404026031496),l.VKq(23,Bv,-122.48348236083984),l.VKq(25,ux,-122.48356819152832),l.VKq(27,Nv,-122.48507022857666),l.VKq(29,dx,-122.48610019683838),l.VKq(31,hx,-122.48695850372314),l.VKq(33,w1,-122.48700141906738),l.VKq(35,C1,-122.48751640319824),l.VKq(37,E1,-122.48803138732912),l.VKq(39,D1,-122.48888969421387),l.VKq(41,zv,-122.48987674713133),l.VKq(43,Xm,-122.49043464660643),l.VKq(45,px,-122.49125003814696),l.VKq(47,fx,-122.49163627624512),l.VKq(49,Vv,-122.49223709106445),l.VKq(51,vf,-122.49378204345702)])))))("layout",l.DdM(82,vx))("paint",l.DdM(83,Uv)))},dependencies:[Ai,so,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function xx(u,f){if(1&u&&l._UZ(0,"mgl-layer",5),2&u){const i=f.$implicit;l.Q6J("id",i.id)("type",i.type)("filter",i.filter)("paint",i.paint)}}const Yh=function(){return["!=","cluster",!0]},wx=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function jv(u,f){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,xx,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",i.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,Yh))("paint",l.DdM(8,wx))}}const Cx=function(){return[3]},Gv=function(u){return[u,40.66995747013945]};let Ex=(()=>{class u{ngOnInit(){var i=this;return oo(function*(){i.earthquakes=yield U.e(841).then(U.t.bind(U,6841,19));const m=[[0,"green"],[20,"orange"],[200,"red"]];i.clusterLayers=m.map((M,L)=>({type:"circle",id:`cluster-${L}`,paint:{"circle-color":M[1],"circle-radius":70,"circle-blur":1},filter:L===m.length-1?[">=","point_count",M[0]]:["all",[">=","point_count",M[0]],["<","point_count",m[L+1][0]]]}))})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes","before","waterway-label",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes","before","waterway-label",3,"filter","paint"],["source","earthquakes","before","waterway-label",3,"id","type","filter","paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,jv,4,9,"ng-container",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/dark-v9"),l.Q6J("zoom",l.DdM(5,Cx))("center",l.VKq(6,Gv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",m.earthquakes))},dependencies:[kt.sg,kt.O5,Ai,so,Wr,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Hv=function(){return[2]},Dx=function(u){return[u,37.830348]},j_=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},Mx=function(){return{"line-color":"#627BC1","line-width":2}},$v=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let Zv=(()=>{class u{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(i){this.hoverFilter=["==","name",i.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(L){return m.activateHoverOn(L)})("layerMouseLeave",function(){return m.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(8,Hv))("center",l.VKq(9,Dx,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,j_)),l.xp6(1),l.Q6J("paint",l.DdM(12,Mx)),l.xp6(1),l.Q6J("paint",l.DdM(13,$v))("filter",m.hoverFilter))},dependencies:[Ai,so,Wr,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Sx=function(){return[9]},Tx=function(u){return[u,40]};let Ax=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(i,m){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(5,Sx))("center",l.VKq(6,Tx,-74.5))("interactive",!1))},dependencies:[Ai,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const G_=function(){return[2.9]},Ix=function(){return[16.05,48]};let Wv=(()=>{class u{changeLangTo(i){this.map.setLayoutProperty("country-label-lg","text-field","{name_"+i+"}")}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(L){return m.map=L}),l.TgZ(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return m.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return m.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return m.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return m.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA()()()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("zoom",l.DdM(4,G_))("center",l.DdM(5,Ix)))},dependencies:[Ai,Ur,$u.lW,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function Px(u,f){if(1&u&&l._UZ(0,"mgl-geojson-source",3),2&u){const i=l.oxw();l.Q6J("data",i.data)}}const Ox=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function kx(u,f){1&u&&l._UZ(0,"mgl-layer",4),2&u&&l.Q6J("paint",l.DdM(1,Ox))}const Rx=function(u){return[u]};let Fx=(()=>{class u{constructor(){this.zoom=[0]}ngOnInit(){var i=this;return oo(function*(){const m=yield U.e(731).then(U.t.bind(U,9731,19)),M=m.features[0].geometry.coordinates;m.features[0].geometry.coordinates=[M[0]],i.data=m,i.center=M[0],i.zoom=[14],i.pitch=30;let L=0;i.timer=window.setInterval(()=>{L<M.length?(i.center=M[L],m.features[0].geometry.coordinates.push(M[L]),i.data={...i.data},L++):window.clearInterval(i.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Px,1,1,"mgl-geojson-source",1),l.YNc(2,kx,1,2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/satellite-v9"),l.Q6J("zoom",m.zoom)("center",m.center)("centerWithPanTo",!0)("pitch",l.VKq(8,Rx,m.pitch)),l.xp6(1),l.Q6J("ngIf",m.data),l.xp6(1),l.Q6J("ngIf",m.data))},dependencies:[kt.O5,Ai,so,Wr,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();var Lx=U(4986),Bx=U(5963);const qv=function(){return[14]},Yv=function(){return{"raster-fade-duration":0}};let zx=(()=>{class u{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var i=this;return oo(function*(){const M=(yield U.e(731).then(U.t.bind(U,9731,19))).features[0].geometry?.coordinates,L=M.map(we=>i.makeRectangle(we));i.center=M[0],i.coordinates=L[0];let le=0;i.sub=function Nx(u=0,f=Lx.z){return u<0&&(u=0),(0,Bx.H)(u,u,f)}(250).subscribe(()=>{i.url=Math.random()<.5?"assets/red.png":"assets/blue.png",i.coordinates=L[le],le=(le+1)%L.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([i,m]){return[[i,m],[i+this.size,m],[i+this.size,m-this.size],[i,m-this.size]]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/satellite-v9"),l.Q6J("center",m.center)("zoom",l.DdM(7,qv)),l.xp6(1),l.Q6J("url",m.url)("coordinates",m.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,Yv)))},dependencies:[Ai,so,zc,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Vx=function(){return{enableHighAccuracy:!0}};let Kv=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,Vx))("trackUserLocation",!0))},dependencies:[Ai,Ur,Ns,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Xv=function(u){return[u]},Ux=function(){return[17]},jx=function(){return[4.577979,51.038189]},H_=function(){return[4.577979,51.03816]};let $_=(()=>{class u{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let i=0;setInterval(()=>{i+=.01,1===i&&(i=0),this.pitch=45+15*Math.cos(i),this.bearing=20*Math.sin(i)-103},20)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.qZA()()()()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Xv,m.pitch))("bearing",l.VKq(10,Xv,m.bearing))("zoom",l.DdM(12,Ux))("center",l.DdM(13,jx)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,H_)))},dependencies:[Ai,il,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),u})();const Qv=function(){return[9]},Z_=function(u){return[u,40]};let Gx=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(4,Qv))("center",l.VKq(5,Z_,-74.5)))},dependencies:[Ai,Ur,wr,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();var Jv=U(4385),bf=U(2561),e0=U(2289),t0=U(4080);const Hx=["tooltip"],r0="tooltip-panel",Kh=(0,Ic.i$)({passive:!0}),o0=new l.OlP("mat-tooltip-scroll-strategy"),Zx={provide:o0,deps:[bf.aV],useFactory:function s0(u){return()=>u.scrollStrategies.reposition({scrollThrottle:20})}},Xh=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function xf(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Wx=(()=>{class u{constructor(i,m,M,L,le,we,Je,St,Kt,Qt,Vn,ii){this._overlay=i,this._elementRef=m,this._scrollDispatcher=M,this._viewContainerRef=L,this._ngZone=le,this._platform=we,this._ariaDescriber=Je,this._focusMonitor=St,this._dir=Qt,this._defaultOptions=Vn,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Vr.x,this._scrollStrategy=Kt,this._document=ii,Vn&&(Vn.position&&(this.position=Vn.position),Vn.touchGestures&&(this.touchGestures=Vn.touchGestures)),Qt.change.pipe((0,vr.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(i){i!==this._position&&(this._position=i,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Gi.Ig)(i),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(i){this._showDelay=(0,Gi.su)(i)}get hideDelay(){return this._hideDelay}set hideDelay(i){this._hideDelay=(0,Gi.su)(i),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(i){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=i?String(i).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(i){this._tooltipClass=i,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,vr.R)(this._destroyed)).subscribe(i=>{i?"keyboard"===i&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const i=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([m,M])=>{i.removeEventListener(m,M,Kh)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(i,this.message,"tooltip"),this._focusMonitor.stopMonitoring(i)}show(i=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const m=this._createOverlay();this._detach(),this._portal=this._portal||new t0.C5(this._tooltipComponent,this._viewContainerRef);const M=this._tooltipInstance=m.attach(this._portal).instance;M._triggerElement=this._elementRef.nativeElement,M._mouseLeaveHideDelay=this._hideDelay,M.afterHidden().pipe((0,vr.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),M.show(i)}hide(i=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(i)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),m=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return m.positionChanges.pipe((0,vr.R)(this._destroyed)).subscribe(M=>{this._updateCurrentPositionClass(M.connectionPair),this._tooltipInstance&&M.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:m,panelClass:`${this._cssClassPrefix}-${r0}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,vr.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,vr.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,vr.R)(this._destroyed)).subscribe(M=>{this._isTooltipVisible()&&M.keyCode===lc.hY&&!(0,lc.Vb)(M)&&(M.preventDefault(),M.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(i){const m=i.getConfig().positionStrategy,M=this._getOrigin(),L=this._getOverlayPosition();m.withPositions([this._addOffset({...M.main,...L.main}),this._addOffset({...M.fallback,...L.fallback})])}_addOffset(i){return i}_getOrigin(){const i=!this._dir||"ltr"==this._dir.value,m=this.position;let M;"above"==m||"below"==m?M={originX:"center",originY:"above"==m?"top":"bottom"}:"before"==m||"left"==m&&i||"right"==m&&!i?M={originX:"start",originY:"center"}:("after"==m||"right"==m&&i||"left"==m&&!i)&&(M={originX:"end",originY:"center"});const{x:L,y:le}=this._invertPosition(M.originX,M.originY);return{main:M,fallback:{originX:L,originY:le}}}_getOverlayPosition(){const i=!this._dir||"ltr"==this._dir.value,m=this.position;let M;"above"==m?M={overlayX:"center",overlayY:"bottom"}:"below"==m?M={overlayX:"center",overlayY:"top"}:"before"==m||"left"==m&&i||"right"==m&&!i?M={overlayX:"end",overlayY:"center"}:("after"==m||"right"==m&&i||"left"==m&&!i)&&(M={overlayX:"start",overlayY:"center"});const{x:L,y:le}=this._invertPosition(M.overlayX,M.overlayY);return{main:M,fallback:{overlayX:L,overlayY:le}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,ca.q)(1),(0,vr.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(i){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=i,this._tooltipInstance._markForCheck())}_invertPosition(i,m){return"above"===this.position||"below"===this.position?"top"===m?m="bottom":"bottom"===m&&(m="top"):"end"===i?i="start":"start"===i&&(i="end"),{x:i,y:m}}_updateCurrentPositionClass(i){const{overlayY:m,originX:M,originY:L}=i;let le;if(le="center"===m?this._dir&&"rtl"===this._dir.value?"end"===M?"left":"right":"start"===M?"left":"right":"bottom"===m&&"top"===L?"above":"below",le!==this._currentPosition){const we=this._overlayRef;if(we){const Je=`${this._cssClassPrefix}-${r0}-`;we.removePanelClass(Je+this._currentPosition),we.addPanelClass(Je+le)}this._currentPosition=le}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",m=>{const M=m.relatedTarget;(!M||!this._overlayRef?.overlayElement.contains(M))&&this.hide()}],["wheel",m=>this._wheelListener(m)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const m=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};i.push(["touchend",m],["touchcancel",m])}this._addListeners(i),this._passiveListeners.push(...i)}_addListeners(i){i.forEach(([m,M])=>{this._elementRef.nativeElement.addEventListener(m,M,Kh)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(i){if(this._isTooltipVisible()){const m=this._document.elementFromPoint(i.clientX,i.clientY),M=this._elementRef.nativeElement;m!==M&&!M.contains(m)&&this.hide()}}_disableNativeGesturesIfNecessary(){const i=this.touchGestures;if("off"!==i){const m=this._elementRef.nativeElement,M=m.style;("on"===i||"INPUT"!==m.nodeName&&"TEXTAREA"!==m.nodeName)&&(M.userSelect=M.msUserSelect=M.webkitUserSelect=M.MozUserSelect="none"),("on"===i||!m.draggable)&&(M.webkitUserDrag="none"),M.touchAction="none",M.webkitTapHighlightColor="transparent"}}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),u})(),M1=(()=>{class u extends Wx{constructor(i,m,M,L,le,we,Je,St,Kt,Qt,Vn,ii){super(i,m,M,L,le,we,Je,St,Kt,Qt,Vn,ii),this._tooltipComponent=qx}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(bf.aV),l.Y36(l.SBq),l.Y36(fa.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(Ic.t4),l.Y36(ac.$s),l.Y36(ac.tE),l.Y36(o0),l.Y36(ml.Is,8),l.Y36(Xh,8),l.Y36(kt.K0))},u.\u0275dir=l.lG2({type:u,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),u})(),a0=(()=>{class u{constructor(i,m){this._changeDetectorRef=i,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Vr.x,this._animationsDisabled="NoopAnimations"===m}show(i){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},i)}hide(i){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},i)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:i}){(!i||!this._triggerElement.contains(i))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:i}){(i===this._showAnimation||i===this._hideAnimation)&&this._finalizeAnimation(i===this._showAnimation)}_finalizeAnimation(i){i?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(i){const m=this._tooltip.nativeElement,M=this._showAnimation,L=this._hideAnimation;if(m.classList.remove(i?L:M),m.classList.add(i?M:L),this._isVisible=i,i&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const le=getComputedStyle(m);("0s"===le.getPropertyValue("animation-duration")||"none"===le.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}i&&this._onShow(),this._animationsDisabled&&(m.classList.add("_mat-animation-noopable"),this._finalizeAnimation(i))}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36(l.QbO,8))},u.\u0275dir=l.lG2({type:u}),u})(),qx=(()=>{class u extends a0{constructor(i,m,M){super(i,M),this._breakpointObserver=m,this._isHandset=this._breakpointObserver.observe(e0.u3.Handset),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO),l.Y36(e0.Yg),l.Y36(l.QbO,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-tooltip-component"]],viewQuery:function(i,m){if(1&i&&l.Gf(Hx,7),2&i){let M;l.iGM(M=l.CRH())&&(m._tooltip=M.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(i,m){1&i&&l.NdJ("mouseleave",function(L){return m._handleMouseLeave(L)}),2&i&&l.Udp("zoom",m.isVisible()?1:null)},features:[l.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(i,m){if(1&i&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(L){return m._handleAnimationEnd(L)}),l.ALo(2,"async"),l._uU(3),l.qZA()),2&i){let M;l.ekj("mat-tooltip-handset",null==(M=l.lcZ(2,4,m._isHandset))?null:M.matches),l.Q6J("ngClass",m.tooltipClass),l.xp6(3),l.Oqu(m.message)}},dependencies:[kt.mk,kt.Ov],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),u})(),Yx=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[Zx],imports:[ac.rt,kt.ez,bf.U8,yi.BQ,yi.BQ,fa.ZD]}),u})();function Kx(u,f){if(1&u&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&u){const i=f.$implicit;l.Q6J("value",i),l.xp6(1),l.hij(" ",i," ")}}function l0(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(M){l.CHM(i);const L=l.oxw(2);return l.KtG(L._changePageSize(M.value))}),l.YNc(2,Kx,2,2,"mat-option",18),l.qZA()()}if(2&u){const i=l.oxw(2);l.Q6J("appearance",i._formFieldAppearance)("color",i.color),l.xp6(1),l.Q6J("value",i.pageSize)("disabled",i.disabled)("panelClass",i.selectConfig.panelClass||"")("disableOptionCentering",i.selectConfig.disableOptionCentering)("aria-label",i._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",i._displayedPageSizeOptions)}}function Xx(u,f){if(1&u&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&u){const i=l.oxw(2);l.xp6(1),l.Oqu(i.pageSize)}}function W_(u,f){if(1&u&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,l0,3,8,"mat-form-field",14),l.YNc(4,Xx,2,1,"div",15),l.qZA()),2&u){const i=l.oxw();l.xp6(2),l.hij(" ",i._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",i._displayedPageSizeOptions.length<=1)}}function Qm(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(i);const M=l.oxw();return l.KtG(M.firstPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&u){const i=l.oxw();l.Q6J("matTooltip",i._intl.firstPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),l.uIk("aria-label",i._intl.firstPageLabel)}}function wf(u,f){if(1&u){const i=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(i);const M=l.oxw();return l.KtG(M.lastPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&u){const i=l.oxw();l.Q6J("matTooltip",i._intl.lastPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),l.uIk("aria-label",i._intl.lastPageLabel)}}let Jm=(()=>{class u{constructor(){this.changes=new Vr.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(i,m,M)=>{if(0==M||0==m)return`0 of ${M}`;const L=i*m;return`${L+1} \u2013 ${L<(M=Math.max(M,0))?Math.min(L+m,M):L+m} of ${M}`}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const c0={provide:Jm,deps:[[new l.FiY,new l.tp0,Jm]],useFactory:function q_(u){return u||new Jm}},Y_=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),Jx=(0,yi.Id)((0,yi.dB)(class{}));let A1=(()=>{class u extends Jx{constructor(i,m,M){if(super(),this._intl=i,this._changeDetectorRef=m,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new l.vpe,this._intlChanges=i.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),M){const{pageSize:L,pageSizeOptions:le,hidePageSize:we,showFirstLastButtons:Je}=M;null!=L&&(this._pageSize=L),null!=le&&(this._pageSizeOptions=le),null!=we&&(this._hidePageSize=we),null!=Je&&(this._showFirstLastButtons=Je)}}get pageIndex(){return this._pageIndex}set pageIndex(i){this._pageIndex=Math.max((0,Gi.su)(i),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(i){this._length=(0,Gi.su)(i),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(i){this._pageSize=Math.max((0,Gi.su)(i),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(i){this._pageSizeOptions=(i||[]).map(m=>(0,Gi.su)(m)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(i){this._hidePageSize=(0,Gi.Ig)(i)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(i){this._showFirstLastButtons=(0,Gi.Ig)(i)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(i)}previousPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(i)}firstPage(){if(!this.hasPreviousPage())return;const i=this.pageIndex;this.pageIndex=0,this._emitPageEvent(i)}lastPage(){if(!this.hasNextPage())return;const i=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(i)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const i=this.getNumberOfPages()-1;return this.pageIndex<i&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(i){const M=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/i)||0,this.pageSize=i,this._emitPageEvent(M)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((i,m)=>i-m),this._changeDetectorRef.markForCheck())}_emitPageEvent(i){this.page.emit({previousPageIndex:i,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[l.qOj]}),u})(),u0=(()=>{class u extends A1{constructor(i,m,M){super(i,m,M),M&&null!=M.formFieldAppearance&&(this._formFieldAppearance=M.formFieldAppearance)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(Jm),l.Y36(l.sBO),l.Y36(Y_,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,m){1&i&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,W_,5,3,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,Qm,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return m.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return m.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,wf,3,5,"button",11),l.qZA()()()),2&i&&(l.xp6(2),l.Q6J("ngIf",!m.hidePageSize),l.xp6(3),l.hij(" ",m._intl.getRangeLabel(m.pageIndex,m.pageSize,m.length)," "),l.xp6(1),l.Q6J("ngIf",m.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",m._intl.previousPageLabel)("matTooltipDisabled",m._previousButtonsDisabled())("matTooltipPosition","above")("disabled",m._previousButtonsDisabled()),l.uIk("aria-label",m._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",m._intl.nextPageLabel)("matTooltipDisabled",m._nextButtonsDisabled())("matTooltipPosition","above")("disabled",m._nextButtonsDisabled()),l.uIk("aria-label",m._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",m.showFirstLastButtons))},dependencies:[kt.sg,kt.O5,$u.lW,Id.KE,Jv.gD,yi.ey,M1],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),u})(),ew=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[c0],imports:[kt.ez,$u.ot,Jv.LD,Yx,yi.BQ]}),u})();function d0(u,f){if(1&u&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&u){const i=f.$implicit;l.Q6J("title",i.properties["Secondary ID"]),l.xp6(1),l.hij(" ",i.properties["Primary ID"]," ")}}function K_(u,f){if(1&u){const i=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(M){const le=l.CHM(i).$implicit,we=l.oxw(2);return l.KtG(we.selectCluster(M,le))}),l._uU(1),l.qZA()}if(2&u){const i=f.$implicit;l.xp6(1),l.hij(" ",null==i.properties?null:i.properties.point_count," ")}}function tw(u,f){if(1&u&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&u){l.oxw();const i=l.MAs(2),m=l.oxw();l.Q6J("feature",m.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",i)("selectedCluster",m.selectedCluster)}}function X_(u,f){if(1&u&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,d0,2,2,"ng-template",5),l.YNc(5,K_,2,1,"ng-template",6),l.qZA(),l.YNc(6,tw,2,3,"mgl-popup",7),l.BQk()),2&u){const i=l.oxw();l.xp6(1),l.Q6J("data",i.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",i.selectedCluster)}}const nw=function(){return[3]},iw=function(u){return[u,40.66995747013945]};function rw(u,f){if(1&u&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&u){const i=f.$implicit;l.xp6(1),l.hij(" ",null==i.properties?null:i.properties["Primary ID"]," ")}}let h0=(()=>{class u{ngOnInit(){var i=this;return oo(function*(){const m=yield U.e(841).then(U.t.bind(U,6841,19));setInterval(()=>{m.features.length&&m.features.pop(),i.earthquakes={...m}},500)})()}selectCluster(i,m){i.stopPropagation(),this.selectedCluster=m}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.YNc(1,X_,7,5,"ng-container",1),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/dark-v9"),l.Q6J("zoom",l.DdM(5,nw))("center",l.VKq(6,iw,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",m.earthquakes))},dependencies:function(){return[kt.O5,Ai,Wr,Da,ua,Jr,Hl,ir,p0]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),u})(),p0=(()=>{class u{ngOnChanges(i){this.changePage(),i.selectedCluster&&!i.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(i){var m=this;return oo(function*(){let M=0;i&&(M=5*i.pageIndex),m.leaves=yield m.clusterComponent.getClusterLeaves(m.selectedCluster.properties?.cluster_id??0,5,M)})()}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-cluster-popup"]],viewQuery:function(i,m){if(1&i&&l.Gf(u0,7),2&i){let M;l.iGM(M=l.CRH())&&(m.paginator=M.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(i,m){1&i&&(l.TgZ(0,"mat-list"),l.YNc(1,rw,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(L){return m.changePage(L)}),l.qZA()),2&i&&(l.xp6(1),l.Q6J("ngForOf",m.leaves),l.xp6(1),l.Q6J("length",null==m.selectedCluster.properties?null:m.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[kt.sg,My,db,u0],encapsulation:2}),u})(),f0=(()=>{class u{alert(i){alert(i)}onGeolocate(i){console.log("geolocate",i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:10,vars:2,consts:[["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeocoder","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map")(1,"mgl-control")(2,"button",0),l.NdJ("click",function(){return m.alert("Hello")}),l._uU(3," Hello "),l.qZA()(),l._UZ(4,"mgl-control",1)(5,"mgl-control",2)(6,"mgl-control",3),l.TgZ(7,"mgl-control",4),l.NdJ("geolocate",function(L){return m.onGeolocate(L)}),l.qZA(),l._UZ(8,"mgl-control",5)(9,"mgl-control",6),l.qZA()),2&i&&l.Akn("mapbox://styles/mapbox/streets-v9")},dependencies:[Ai,Ur,co,wr,Ns,us,zs,$u.lW,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const m0=function(){return[5]},eg=function(u,f){return[u,f]};let ow=(()=>{class u{alert(i){alert(i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.NdJ("click",function(){return m.alert("Foo")}),l.qZA()(),l.TgZ(3,"mgl-marker",1)(4,"div",3),l.NdJ("click",function(){return m.alert("Bar")}),l.qZA()(),l.TgZ(5,"mgl-marker",1)(6,"div",4),l.NdJ("click",function(){return m.alert("Baz")}),l.qZA()()()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,m0))("center",l.WLB(8,eg,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,eg,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,eg,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,eg,-63.29223632812499,-18.28151823530889)))},dependencies:[Ai,il,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),u})();const sw=function(){return[2]},g0=function(){return[0,0]},aw=function(u){return{type:"Point",coordinates:u}};let _0=(()=>{class u{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(i){console.log("onDragStart",i)}onDragEnd(i){console.log("onDragEnd",i)}onDrag(i){console.log("onDrag",i),this.coordinates=i.lngLat.toArray()}changeColor(i){this.layerPaint={...this.layerPaint,"circle-color":i}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(i,m){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),l.NdJ("featureDragStart",function(L){return m.onDragStart(L)})("featureDragEnd",function(L){return m.onDragEnd(L)})("featureDrag",function(L){return m.onDrag(L)}),l.qZA()(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return m.changeColor("#3bb2d0")})("layerMouseLeave",function(){return m.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5)(6,"mat-card")(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA()()()()),2&i){const M=l.MAs(4);l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(9,sw))("center",l.DdM(10,g0)),l.xp6(2),l.Q6J("geometry",l.VKq(12,aw,l.DdM(11,g0)))("mglDraggable",M),l.xp6(1),l.Q6J("paint",m.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",m.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",m.coordinates[1],"")}},dependencies:[Ai,so,jl,Wr,uo,Ur,U_,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const Cf=function(){return[15]},y0=function(u){return[u,37.830348]},v0=function(){return{"line-join":"round","line-cap":"round"}},b0=function(){return{"line-color":"#888","line-width":8}};let x0=(()=>{class u{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,Cf))("center",l.VKq(8,y0,-122.486052)),l.xp6(2),l.Q6J("geometry",m.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,v0))("paint",l.DdM(11,b0)))},dependencies:[Ai,so,Wr,uo,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),w0=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&i&&l.Akn("mapbox://styles/mapbox/streets-v9")},dependencies:[Ai,Ur,zs,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function C0(u,f){if(1&u&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&u){const i=l.oxw();l.Q6J("lngLat",i.selectedLngLat),l.xp6(1),l.Q6J("innerHTML",null==i.selectedElement?null:i.selectedElement.name,l.oJD)}}const lw=function(){return[3]},I1=function(u){return[u,38.907]},cw=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},uw=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let dw=(()=>{class u{onClick(i){this.selectedLngLat=i.lngLat,this.selectedElement=i.features?.[0].properties}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat",4,"ngIf"],[3,"lngLat"],[3,"innerHTML"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return m.cursorStyle="pointer"})("layerMouseLeave",function(){return m.cursorStyle=""})("layerClick",function(L){return m.onClick(L)}),l.qZA(),l.YNc(2,C0,2,2,"mgl-popup",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(8,lw))("center",l.VKq(9,I1,-100.04))("cursorStyle",m.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,cw))("paint",l.DdM(12,uw)),l.xp6(1),l.Q6J("ngIf",m.selectedLngLat))},dependencies:[kt.O5,Ai,so,Da,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();function hw(u,f){if(1&u&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&u){const i=l.oxw();l.Q6J("feature",i.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==i.selectedPoint.properties?null:i.selectedPoint.properties.description,l.oJD)}}const Ef=function(){return[11.15]},pw=function(u){return[u,38.907]},Q_=function(){return{"icon-image":"{icon}-15","icon-allow-overlap":!0}};let kc=(()=>{class u{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art-gallery"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(i){this.selectedPoint=i.features?.[0]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(L){return m.onClick(L)})("layerMouseEnter",function(){return m.cursorStyle="pointer"})("layerMouseLeave",function(){return m.cursorStyle=""}),l.qZA(),l.YNc(3,hw,2,2,"mgl-popup",3),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(8,Ef))("center",l.VKq(9,pw,-77.04))("cursorStyle",m.cursorStyle),l.xp6(1),l.Q6J("data",m.points),l.xp6(1),l.Q6J("layout",l.DdM(11,Q_)),l.xp6(1),l.Q6J("ngIf",m.selectedPoint))},dependencies:[kt.O5,Ai,so,Wr,Da,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const fw=function(){return[3]},Df=function(u){return[u,37.8]};let Mf=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l._uU(3,"Hello world !"),l.qZA()()()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,fw))("center",l.VKq(8,Df,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Df,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[Ai,Da,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),u})();const mw=function(){return[9]},gw=function(){return[137.9150899566626,36.25956997955441]};let _w=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:1,vars:6,consts:[[3,"zoom","center"]],template:function(i,m){1&i&&l._UZ(0,"mgl-map",0),2&i&&(l.Akn("mapbox://styles/mapbox/satellite-v9"),l.Q6J("zoom",l.DdM(4,mw))("center",l.DdM(5,gw)))},dependencies:[Ai,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const tg=function(){return[15]},Sf=function(u){return[u,38.8895]},vw=function(){return{"background-image":"url(https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let D0=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(i,m){if(1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA()()),2&i){const M=l.MAs(2);l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("zoom",l.DdM(7,tg))("center",l.VKq(8,Sf,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Sf,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,vw)),l.xp6(1),l.Q6J("marker",M)}},dependencies:[kt.PC,Ai,il,Da,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})();const M0=["input"],J_=function(u){return{enterDuration:u}},S0=["*"],bw=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function xw(){return{color:"accent"}}});let ww=0;const ey={provide:bo.JU,useExisting:(0,l.Gpc)(()=>ig),multi:!0};class ng{constructor(f,i){this.source=f,this.value=i}}const ty=new l.OlP("MatRadioGroup");let ny=(()=>{class u{constructor(i){this._changeDetector=i,this._value=null,this._name="mat-radio-group-"+ww++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(i){this._name=i,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(i){this._labelPosition="before"===i?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(i){this._selected=i,this.value=i?i.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(i){this._disabled=(0,Gi.Ig)(i),this._markRadiosForCheck()}get required(){return this._required}set required(i){this._required=(0,Gi.Ig)(i),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(i=>{i.name=this.name,i._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(m=>{m.checked=this.value===m.value,m.checked&&(this._selected=m)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new ng(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(i=>i._markForCheck())}writeValue(i){this.value=i,this._changeDetector.markForCheck()}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetector.markForCheck()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.sBO))},u.\u0275dir=l.lG2({type:u,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),u})(),ig=(()=>{class u extends ny{}return u.\u0275fac=function(){let f;return function(m){return(f||(f=l.n5z(u)))(m||u)}}(),u.\u0275dir=l.lG2({type:u,selectors:[["mat-radio-group"]],contentQueries:function(i,m,M){if(1&i&&l.Suo(M,T0,5),2&i){let L;l.iGM(L=l.CRH())&&(m._radios=L)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([ey,{provide:ty,useExisting:u}]),l.qOj]}),u})();class Cw{constructor(f){this._elementRef=f}}const Ew=(0,yi.Kr)((0,yi.sb)(Cw));let Dw=(()=>{class u extends Ew{constructor(i,m,M,L,le,we,Je,St){super(m),this._changeDetector=M,this._focusMonitor=L,this._radioDispatcher=le,this._providerOverride=Je,this._uniqueId="mat-radio-"+ ++ww,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=i,this._noopAnimations="NoopAnimations"===we,St&&(this.tabIndex=(0,Gi.su)(St,0)),this._removeUniqueSelectionListener=le.listen((Kt,Qt)=>{Kt!==this.id&&Qt===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(i){const m=(0,Gi.Ig)(i);this._checked!==m&&(this._checked=m,m&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!m&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),m&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===i),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(i){this._labelPosition=i}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(i){this._setDisabled((0,Gi.Ig)(i))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(i){this._required=(0,Gi.Ig)(i)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(i){this._color=i}get inputId(){return`${this.id||this._uniqueId}-input`}focus(i,m){m?this._focusMonitor.focusVia(this._inputElement,m,i):this._inputElement.nativeElement.focus(i)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{!i&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ng(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(i){i.stopPropagation()}_onInputInteraction(i){if(i.stopPropagation(),!this.checked&&!this.disabled){const m=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),m&&this.radioGroup._emitChangeEvent())}}_setDisabled(i){this._disabled!==i&&(this._disabled=i,this._changeDetector.markForCheck())}_updateTabIndex(){const i=this.radioGroup;let m;if(m=i&&i.selected&&!this.disabled?i.selected===this?this.tabIndex:-1:this.tabIndex,m!==this._previousTabIndex){const M=this._inputElement?.nativeElement;M&&(M.setAttribute("tabindex",m+""),this._previousTabIndex=m)}}}return u.\u0275fac=function(i){l.$Z()},u.\u0275dir=l.lG2({type:u,viewQuery:function(i,m){if(1&i&&l.Gf(M0,5),2&i){let M;l.iGM(M=l.CRH())&&(m._inputElement=M.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),u})(),T0=(()=>{class u extends Dw{constructor(i,m,M,L,le,we,Je,St){super(i,m,M,L,le,we,Je,St)}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(ty,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(ac.tE),l.Y36(Nm.A8),l.Y36(l.QbO,8),l.Y36(bw,8),l.$8M("tabindex"))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(i,m){1&i&&l.NdJ("focus",function(){return m._inputElement.nativeElement.focus()}),2&i&&(l.uIk("tabindex",null)("id",m.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",m.checked)("mat-radio-disabled",m.disabled)("_mat-animation-noopable",m._noopAnimations)("mat-primary","primary"===m.color)("mat-accent","accent"===m.color)("mat-warn","warn"===m.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:S0,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(i,m){if(1&i&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2),l._UZ(3,"span",3)(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(L){return m._onInputInteraction(L)})("click",function(L){return m._onInputClick(L)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()(),l.TgZ(9,"span",9)(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA()()),2&i){const M=l.MAs(1);l.uIk("for",m.inputId),l.xp6(5),l.Q6J("id",m.inputId)("checked",m.checked)("disabled",m.disabled)("required",m.required),l.uIk("name",m.name)("value",m.value)("aria-label",m.ariaLabel)("aria-labelledby",m.ariaLabelledby)("aria-describedby",m.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",M)("matRippleDisabled",m._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(17,J_,m._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==m.labelPosition)}},dependencies:[yi.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}"],encapsulation:2,changeDetection:0}),u})(),A0=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.si,yi.BQ,yi.BQ]}),u})();const iy=function(){return[13]},I0=function(){return[4.899,52.372]};let P0=(()=>{class u{constructor(){this.layerId="basic"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(i){this.style=`mapbox://styles/mapbox/${i}-v9`}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:14,vars:7,consts:[[3,"zoom","center"],[3,"ngModel","ngModelChange"],["value","basic"],["value","streets"],["value","bright"],["value","light"],["value","dark"],["value","satellite"]],template:function(i,m){1&i&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(L){return m.changeStyle(L)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"basic"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"streets"),l.qZA(),l.TgZ(6,"mat-radio-button",4),l._uU(7,"bright"),l.qZA(),l.TgZ(8,"mat-radio-button",5),l._uU(9,"light"),l.qZA(),l.TgZ(10,"mat-radio-button",6),l._uU(11,"dark"),l.qZA(),l.TgZ(12,"mat-radio-button",7),l._uU(13,"satellite"),l.qZA()()),2&i&&(l.Akn(m.style),l.Q6J("zoom",l.DdM(5,iy))("center",l.DdM(6,I0)),l.xp6(1),l.Q6J("ngModel",m.layerId))},dependencies:[bo.JJ,bo.On,Ai,ig,T0,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),u})();const O0=["button"],k0=["*"],R0=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),ry=new l.OlP("MatButtonToggleGroup");let L0=0;class oy{constructor(f,i){this.source=f,this.value=i}}const La=(0,yi.Kr)(class{});let Ld=(()=>{class u extends La{constructor(i,m,M,L,le,we){super(),this._changeDetectorRef=m,this._elementRef=M,this._focusMonitor=L,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const Je=Number(le);this.tabIndex=Je||0===Je?Je:null,this.buttonToggleGroup=i,this.appearance=we&&we.appearance?we.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(i){this._appearance=i}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(i){const m=(0,Gi.Ig)(i);m!==this._checked&&(this._checked=m,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(i){this._disabled=(0,Gi.Ig)(i)}ngOnInit(){const i=this.buttonToggleGroup;this._isSingleSelector=i&&!i.multiple,this.id=this.id||"mat-button-toggle-"+L0++,this._isSingleSelector&&(this.name=i.name),i&&(i._isPrechecked(this)?this.checked=!0:i._isSelected(this)!==this._checked&&i._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const i=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),i&&i._isSelected(this)&&i._syncButtonToggle(this,!1,!1,!0)}focus(i){this._buttonElement.nativeElement.focus(i)}_onButtonClick(){const i=!!this._isSingleSelector||!this._checked;i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new oy(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(ry,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(ac.tE),l.$8M("tabindex"),l.Y36(R0,8))},u.\u0275cmp=l.Xpm({type:u,selectors:[["mat-button-toggle"]],viewQuery:function(i,m){if(1&i&&l.Gf(O0,5),2&i){let M;l.iGM(M=l.CRH())&&(m._buttonElement=M.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(i,m){1&i&&l.NdJ("focus",function(){return m.focus()}),2&i&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",m.id)("name",null),l.ekj("mat-button-toggle-standalone",!m.buttonToggleGroup)("mat-button-toggle-checked",m.checked)("mat-button-toggle-disabled",m.disabled)("mat-button-toggle-appearance-standard","standard"===m.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:k0,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,m){if(1&i&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return m._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA()(),l._UZ(4,"span",3)(5,"span",4)),2&i){const M=l.MAs(1);l.Q6J("id",m.buttonId)("disabled",m.disabled||null),l.uIk("tabindex",m.disabled?-1:m.tabIndex)("aria-pressed",m.checked)("name",m.name||null)("aria-label",m.ariaLabel)("aria-labelledby",m.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",M)("matRippleDisabled",m.disableRipple||m.disabled)}},dependencies:[yi.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),u})(),Sw=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.BQ,yi.si,yi.BQ]}),u})();const Tw=function(){return[15]},P1=function(u,f){return[u,f]},O1=function(){return{"circle-radius":8,"circle-color":"rgba(55,148,179,1)"}},B0=function(){return{"line-color":"#877b59","line-width":1}};let N0=(()=>{class u{constructor(){this.layouts={contours:{visibility:"visible","line-join":"round","line-cap":"round"},museums:{visibility:"visible"}}}toggleLayer(i){this.layouts[i.value]={...this.layouts[i.value],visibility:"visible"===this.layouts[i.value].visibility?"none":"visible"}}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","museums","url","mapbox://mapbox.2opop9hr"],["id","contours","url","mapbox://mapbox.mapbox-terrain-v2"],["id","museums","type","circle","source","museums","sourceLayer","museum-cusco",3,"layout","paint"],["id","contours","type","line","source","contours","sourceLayer","contour",3,"layout","paint"],[1,"menu"],["value","contours",3,"checked","change"],["value","museums",3,"checked","change"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5)(6,"mat-button-toggle",6),l.NdJ("change",function(L){return m.toggleLayer(L)}),l._uU(7,"contours"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(L){return m.toggleLayer(L)}),l._uU(9,"museums"),l.qZA()()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(10,Tw))("center",l.WLB(11,P1,-71.97722138410576,-13.517379300798098)),l.xp6(3),l.Q6J("layout",m.layouts.museums)("paint",l.DdM(14,O1)),l.xp6(1),l.Q6J("layout",m.layouts.contours)("paint",l.DdM(15,B0)),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},dependencies:[Ai,so,Un,Ld,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),u})();const Tf=function(){return[12]},Aw=function(u){return[u,38.897]},sy=function(){return{padding:20}},Iw=function(){return{"line-color":"#BF93E4","line-width":5}},z0=function(){return{"line-join":"round","line-cap":"round"}};let Pw=(()=>{class u{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const i=this.source.data.features[0].geometry.coordinates;this.bounds=i.reduce((m,M)=>m.extend(M),new Ro.LngLatBounds(i[0],i[0]))}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return m.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA()(),l._UZ(4,"mgl-layer",2),l.qZA()),2&i&&(l.Akn("mapbox://styles/mapbox/light-v9"),l.Q6J("zoom",l.DdM(9,Tf))("center",l.VKq(10,Aw,-77.0214))("fitBounds",m.bounds)("fitBoundsOptions",l.DdM(12,sy)),l.xp6(4),l.Q6J("source",m.source)("paint",l.DdM(13,Iw))("layout",l.DdM(14,z0)))},dependencies:[Ai,so,Ur,$u.lW,ir],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),u})(),V0=(()=>{class u{constructor(i){this.router=i}canActivate(i){return!!Q0[0].children?.some(m=>m.path===i.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(q.F0))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function U0(){return Math.random().toString(36).substring(7)}function Zu(u){var f="";return u?(u.forceEmbedLayout&&(f+="embed=1"),u.clickToLoad&&(f+=(f.length?"&":"")+"ctl=1"),u.openFile&&(f+=(f.length?"&":"")+"file="+u.openFile),!u.view||"preview"!==u.view&&"editor"!==u.view||(f+=(f.length?"&":"")+"view="+u.view),u.hideExplorer&&(f+=(f.length?"&":"")+"hideExplorer=1"),u.hideNavigation&&(f+=(f.length?"&":"")+"hideNavigation=1;"),u.hideDevTools&&(f+=(f.length?"&":"")+"hidedevtools=1"),"number"==typeof u.devToolsHeight&&u.devToolsHeight>0&&u.devToolsHeight<100&&(f+=(f.length?"&":"")+"devtoolsheight="+u.devToolsHeight),f.length?"?"+f:f):f}function rg(u,f,i){if(null===u.parentNode)throw new Error("Invalid Element");f.id=u.id,function ay(u,f){f&&(f.hasOwnProperty("height")&&(u.height=""+f.height),f.hasOwnProperty("width")&&(u.width=""+f.width)),u.height||(u.height="300"),u.width||u.setAttribute("style","width:100%;")}(f,i),u.parentNode.replaceChild(f,u)}function og(u){if("string"==typeof u){var f=document.getElementById(u);if(null!==f)return f}else if(u instanceof HTMLElement)return u;throw new Error("Invalid Element")}function Jh(u){return u&&!1===u.newWindow?"_self":"_blank"}var Ow=function(u){var f=this;this.pending={},this.port=u,this.port.onmessage=function(i){if(i.data.payload.__reqid){var m=i.data.payload.__reqid,M=i.data.payload.__success;if(f.pending[m]){if(delete i.data.payload.__reqid,delete i.data.payload.__success,M){var L=0===Object.keys(i.data.payload).length&&i.data.payload.constructor===Object?null:i.data.payload;f.pending[m].resolve(L)}else f.pending[m].reject(i.data.payload.error?i.data.type+": "+i.data.payload.error:i.data.type);delete f.pending[m]}}}};Ow.prototype.request=function(u){var f=this,i=U0();return new Promise(function(m,M){f.pending[i]={resolve:m,reject:M},u.payload.__reqid=i,f.port.postMessage(u)})};var Af=function(u,f){var i=this;this.rdc=new Ow(u),this.preview={},Object.defineProperty(this.preview,"origin",{value:f.previewOrigin,writable:!1}),this.editor={openFile:function(m){return i.rdc.request({type:"SDK_OPEN_FILE",payload:{path:m}})}}};Af.prototype.applyFsDiff=function(u){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:u})},Af.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Af.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var sg=[],j0=function(u){var f=this;this.id=U0(),this.element=u,this.pending=new Promise(function(i,m){var M=function(St){St.data.action&&"SDK_INIT_SUCCESS"===St.data.action&&St.data.id===f.id&&(f.vm=new Af(St.ports[0],St.data.payload),i(f.vm),le())},L=function(){f.element.contentWindow&&f.element.contentWindow.postMessage({action:"SDK_INIT",id:f.id},"*")};function le(){window.clearInterval(Je),window.removeEventListener("message",M)}window.addEventListener("message",M),L();var we=0,Je=window.setInterval(function(){if(f.vm)le();else{if(we>=20)return le(),m("Timeout: Unable to establish a connection with the StackBlitz VM"),void sg.forEach(function(St,Kt){St.id===f.id&&sg.splice(Kt,1)});we++,L()}},500)}),sg.push(this)},G0=["typescript","create-react-app","angular-cli","javascript","polymer"],ly="https://stackblitz.com/run";function yu(u,f){var i=document.createElement("input");return i.type="hidden",i.name=u,i.value=f,i}function kw(u){-1===G0.indexOf(u.template)&&console.warn("Unsupported project template, must be one of: "+G0.join(", "));var f=document.createElement("form");return f.method="POST",f.setAttribute("style","display:none;"),f.appendChild(yu("project[title]",u.title)),f.appendChild(yu("project[description]",u.description)),f.appendChild(yu("project[template]",u.template)),u.tags&&u.tags.forEach(function(i){f.appendChild(yu("project[tags][]",i))}),u.dependencies&&f.appendChild(yu("project[dependencies]",JSON.stringify(u.dependencies))),u.settings&&f.appendChild(yu("project[settings]",JSON.stringify(u.settings))),Object.keys(u.files).forEach(function(i){f.appendChild(yu("project[files]["+i+"]",u.files[i]))}),f}var ag={connect:function(u){if(!u||!u.contentWindow)return Promise.reject("Provided element is not an iframe.");var f=function(u){var f=u instanceof Element?"element":"id";return sg.find(function(m){return m[f]===u})||null}(u);return f?f.pending:new j0(u).pending},openGithubProject:function(u,f){window.open("https://stackblitz.com/github/"+u+Zu(f),Jh(f))},openProject:function(u,f){!function k1(u,f){var i=kw(u);i.action=ly+Zu(f),i.target=Jh(f),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}(u,f)},openProjectId:function(u,f){window.open("https://stackblitz.com/edit/"+u+Zu(f),Jh(f))},embedGithubProject:function(u,f,i){var m=og(u),M=document.createElement("iframe");return M.src="https://stackblitz.com/github/"+f+Zu(i),rg(m,M,i),ag.connect(M)},embedProject:function(u,f,i){var m=og(u),M=function Rw(u,f){var i=kw(u);return i.action=ly+Zu(f),i.id="sb","<html><head><title></title></head><body>"+i.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(f,i),L=document.createElement("iframe");return rg(m,L,i),L.contentDocument&&L.contentDocument.write(M),ag.connect(L)},embedProjectId:function(u,f,i){var m=og(u),M=document.createElement("iframe");return M.src="https://stackblitz.com/edit/"+f+Zu(i),rg(m,M,i),ag.connect(M)}};const Fw=ag;var cy=U(4128),H0=U(2076),lg=U(3151),Lw=U(8746),Z0=U(9646),uy=U(529);const W0="app/demo/examples/";let q0=(()=>{class u{constructor(i){this.http=i,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(i){let m=this.fileCache.get(i);return m||(m=this.http.get(`${W0}${i}.component.ts`,{responseType:"text"}).pipe((0,Cs.w)(M=>this.loadAdditionnalFilesIfNecessary(M)),(0,lg.d)(1)),this.fileCache.set(i,m),m)}loadAdditionnalFilesIfNecessary(i){const m=/'\.\/([\w-.]+\.\w+)'/g;let M;const L=[],le={"src/demo.ts":i};for(;M=m.exec(i);)L.push(this.loadFile(M[1]));return L.length?(0,cy.D)(L).pipe((0,Nh.U)(we=>({...Object.assign({},...we),...le}))):(0,Z0.of)(le)}loadFile(i){let m=this.fileCache.get(i);return m||(m=this.http.get(`${W0}${i}`,{responseType:"text"}).pipe((0,Nh.U)(M=>({[`src/${i}`]:M})),(0,lg.d)(1)),this.fileCache.set(i,m),m)}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(uy.eN))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function Bw(u,f){if(1&u&&(l.O4$(),l._UZ(0,"circle",4)),2&u){const i=l.oxw(),m=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+i._spinnerAnimationLabel)("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(m)),l.uIk("r",i._getCircleRadius())}}function Y0(u,f){if(1&u&&(l.O4$(),l._UZ(0,"circle",4)),2&u){const i=l.oxw(),m=l.MAs(1);l.Udp("stroke-dashoffset",i._getStrokeDashOffset(),"px")("stroke-dasharray",i._getStrokeCircumference(),"px")("stroke-width",i._getCircleStrokeWidth(),"%")("transform-origin",i._getCircleTransformOrigin(m)),l.uIk("r",i._getCircleRadius())}}const X0=(0,yi.pj)(class{constructor(u){this._elementRef=u}},"primary"),Nw=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function zw(){return{diameter:100}}});class Rc extends X0{constructor(f,i,m,M,L,le,we,Je){super(f),this._document=m,this._diameter=100,this._value=0,this._resizeSubscription=Qs.w0.EMPTY,this.mode="determinate";const St=Rc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),St.has(m.head)||St.set(m.head,new Set([100])),this._noopAnimations="NoopAnimations"===M&&!!L&&!L._forceAnimations,"mat-spinner"===f.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),L&&(L.color&&(this.color=this.defaultColor=L.color),L.diameter&&(this.diameter=L.diameter),L.strokeWidth&&(this.strokeWidth=L.strokeWidth)),i.isBrowser&&i.SAFARI&&we&&le&&Je&&(this._resizeSubscription=we.change(150).subscribe(()=>{"indeterminate"===this.mode&&Je.run(()=>le.markForCheck())}))}get diameter(){return this._diameter}set diameter(f){this._diameter=(0,Gi.su)(f),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(f){this._strokeWidth=(0,Gi.su)(f)}get value(){return"determinate"===this.mode?this._value:0}set value(f){this._value=Math.max(0,Math.min(100,(0,Gi.su)(f)))}ngOnInit(){const f=this._elementRef.nativeElement;this._styleRoot=(0,Ic.kV)(f)||this._document.head,this._attachStyleNode(),f.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const f=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${f} ${f}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(f){const i=50*(f.currentScale??1);return`${i}% ${i}%`}_attachStyleNode(){const f=this._styleRoot,i=this._diameter,m=Rc._diameters;let M=m.get(f);if(!M||!M.has(i)){const L=this._document.createElement("style");L.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),L.textContent=this._getAnimationText(),f.appendChild(L),M||(M=new Set,m.set(f,M)),M.add(i)}}_getAnimationText(){const f=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*f).replace(/END_VALUE/g,""+.2*f).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Rc._diameters=new WeakMap,Rc.\u0275fac=function(f){return new(f||Rc)(l.Y36(l.SBq),l.Y36(Ic.t4),l.Y36(kt.K0,8),l.Y36(l.QbO,8),l.Y36(Nw),l.Y36(l.sBO),l.Y36(fa.rL),l.Y36(l.R0b))},Rc.\u0275cmp=l.Xpm({type:Rc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(f,i){2&f&&(l.uIk("aria-valuemin","determinate"===i.mode?0:null)("aria-valuemax","determinate"===i.mode?100:null)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.ekj("_mat-animation-noopable",i._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(f,i){1&f&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,Bw,1,11,"circle",2),l.YNc(3,Y0,1,9,"circle",3),l.qZA()),2&f&&(l.Udp("width",i.diameter,"px")("height",i.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===i.mode),l.uIk("viewBox",i._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[kt.RF,kt.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let F1=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[yi.BQ,kt.ez,yi.BQ]}),u})();const L1=["container"];function B1(u,f){1&u&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner")(2,"div"),l.qZA())}let N1=(()=>{class u{constructor(i,m,M,L,le){this.zone=i,this.activatedRoute=m,this.demoFileLoaderService=M,this.http=L,this.ChangeDetectorRef=le,this.loading=!0,this.projectbase$=(0,cy.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,lg.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,Ul.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,Cs.w)(i=>(0,cy.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(i.demoUrl)])),(0,Cs.w)(([i,m])=>(0,H0.D)(this.openExample(i,m)).pipe((0,Lw.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(i,m){var M=this;return oo(function*(){if(M.vm)return void(yield M.vm.applyFsDiff({create:m,destroy:[]}));const L=((u,f)=>({files:{"src/main.ts":u[0],"angular.json":u[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...f},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","mapbox-gl":"*","ngx-mapbox-gl":"*","@angular/cdk":"*","@angular/material":"*","@angular/animations":"*","@angular/forms":"*",url:"*",querystring:"*",events:"*","@types/mapbox-gl":"*","@types/supercluster":"*","@types/geojson":"*"}}))(i,m);yield M.zone.runOutsideAngular(oo(function*(){M.vm=yield Fw.embedProject(M.stackblitzContainer.nativeElement,L,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return u.\u0275fac=function(i){return new(i||u)(l.Y36(l.R0b),l.Y36(q.gz),l.Y36(q0),l.Y36(uy.eN),l.Y36(l.sBO))},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],viewQuery:function(i,m){if(1&i&&l.Gf(L1,5),2&i){let M;l.iGM(M=l.CRH())&&(m.stackblitzContainer=M.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(i,m){1&i&&(l._UZ(0,"div",null,0),l.YNc(2,B1,3,0,"div",1)),2&i&&(l.xp6(2),l.Q6J("ngIf",m.loading))},dependencies:[kt.O5,Rc],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),u})();var zi=(()=>(function(u){u.STYLES="Styles",u.LAYERS="Layers",u.SOURCES="Sources",u.USER_INTERACTION="User interaction",u.CAMERA="Camera",u.CONTROLS_AND_OVERLAYS="Controls and overlays"}(zi||(zi={})),zi))();const Q0=[{path:"",component:Gy,children:[{path:"edit/:demoUrl",component:N1,canActivate:[V0]},{path:"display-map",component:Iv,data:{label:"Display a map",cat:zi.STYLES}},{path:"custom-style-id",component:N_,data:{label:"Display a map with a custom style",cat:zi.STYLES}},{path:"set-style",component:P0,data:{label:"Change a map's style",cat:zi.STYLES}},{path:"satellite-map",component:_w,data:{label:"Display a satellite map",cat:zi.STYLES}},{path:"add-image-generated",component:Jy,data:{label:"Add a generated icon to the map",cat:zi.LAYERS}},{path:"add-image",component:Rb,data:{label:"Add an icon to the map",cat:zi.LAYERS}},{path:"toggle-layers",component:N0,data:{label:"Show and hide layers",cat:zi.LAYERS}},{path:"3d-buildings",component:wb,data:{label:"Display 3d buildings",cat:zi.LAYERS}},{path:"cluster",component:bv,data:{label:"Create and style clusters",cat:zi.LAYERS}},{path:"heatmap",component:Ex,data:{label:"Create a heatmap layer",cat:zi.LAYERS}},{path:"geojson-line",component:bx,data:{label:"Add a GeoJSON line",cat:zi.LAYERS}},{path:"ngx-geojson-line",component:x0,data:{label:"[NGX] Add a GeoJSON line",cat:zi.LAYERS}},{path:"custom-marker-icons",component:Xb,data:{label:"Add custom icons with Markers",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:ow,data:{label:"[NGX] Add custom icons with Markers",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:Fx,data:{label:"Update a feature in realtime",cat:zi.SOURCES}},{path:"live-update-image-source",component:zx,data:{label:"Update an image source in realtime",cat:zi.SOURCES}},{path:"popup",component:Mf,data:{label:"Display a popup",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:D0,data:{label:"Attach a popup to a marker instance",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:kv,data:{label:"View a fullscreen map",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:Gx,data:{label:"Display map navigation controls",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:Kv,data:{label:"Locate the user",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:qm,data:{label:"Change the default position for attribution",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:w0,data:{label:"[NGX] Show scale information",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:f0,data:{label:"[NGX] Add a custom control",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Ax,data:{label:"Display a non-interactive map",cat:zi.USER_INTERACTION}},{path:"language-switch",component:Wv,data:{label:"Change a map's language",cat:zi.USER_INTERACTION}},{path:"center-on-symbol",component:R_,data:{label:"Center the map on a clicked symbol",cat:zi.USER_INTERACTION}},{path:"ngx-drag-a-point",component:_0,data:{label:"[NGX] Create a draggable point",cat:zi.USER_INTERACTION}},{path:"drag-a-marker",component:ox,data:{label:"Create a draggable marker",cat:zi.USER_INTERACTION}},{path:"hover-styles",component:Zv,data:{label:"Create a hover effect",cat:zi.USER_INTERACTION}},{path:"popup-on-click",component:kc,data:{label:"Display a popup on click",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:Pw,data:{label:"Fit to the bounds of a LineString",cat:zi.USER_INTERACTION}},{path:"cluster-html",component:mv,data:{label:"Display HTML clusters with custom properties",cat:zi.LAYERS}},{path:"ngx-cluster-html",component:h0,data:{label:"[NGX] Display HTML clusters with custom properties",cat:zi.LAYERS}},{path:"polygon-popup-on-click",component:dw,data:{label:"Show polygon information on click",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:iv,data:{label:"Generate and add a missing icon to the map",cat:zi.STYLES}},{path:"custom-attribution",component:Dv,data:{label:"Add custom attributions",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:Tv,data:{label:"Add custom localization for controls",cat:zi.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:$_,data:{label:"Marker alignment options",cat:zi.CAMERA}},{path:"**",redirectTo:"display-map"}]}],z1=function(){return[2]},V1=[{path:"",component:(()=>{class u{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:i=>i}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const i=this.center[0];0===i?this.center=[90,0]:90===i?this.center=[180,0]:180===i?this.center=[-90,0]:-90===i&&(this.center=[0,0])}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-mapbox-gl-red",1,"logo"]],template:function(i,m){1&i&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return m.moveCenter()})("moveEnd",function(){return m.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of mapbox-gl-js"),l.qZA()()),2&i&&(l.Akn("mapbox://styles/mapbox/streets-v9"),l.Q6J("zoom",l.DdM(7,z1))("center",m.center)("centerWithPanTo",!0)("panToOptions",m.panToOptions)("interactive",!1))},dependencies:[Ai,qe.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0px;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),u})(),pathMatch:"full"}],ug=[{path:"",component:U(9174).$,children:[{path:"demo",children:Q0},...V1,{path:"doc",loadChildren:()=>U.e(196).then(U.bind(U,4196)).then(u=>u.DocModule)}]},{path:"**",redirectTo:""}];let eb=(()=>{class u{constructor(i,m){i.addSvgIcon("ngx-mapbox-gl",m.bypassSecurityTrustResourceUrl("assets/ngx-mapbox-gl.svg")),i.addSvgIcon("ngx-mapbox-gl-red",m.bypassSecurityTrustResourceUrl("assets/ngx-mapbox-gl-red.svg")),i.addSvgIcon("github",m.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return u.\u0275fac=function(i){return new(i||u)(l.LFG(qe.jv),l.LFG(I.H7))},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[I.b2,qu,qe.Ps,q.Bz.forRoot(ug,{relativeLinkResolution:"legacy"}),Nc.withConfig({accessToken:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA"}),Ml.x]}),u})(),tb=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({providers:[V0],imports:[q.Bz,uy.JF,kt.ez,bo.u5,Nc,Ml.x,A0,Sw,$u.ot,fb,ix,F1,Od,qe.Ps,y_,ew,vb]}),u})(),U1=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[Nc,qe.Ps]}),u})(),hy=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=l.oAB({type:u,bootstrap:[h]}),u.\u0275inj=l.cJS({imports:[q.Bz,eb,U1,tb]}),u})();(0,l.G48)(),I.q6().bootstrapModule(hy).catch(u=>console.error(u))},9898:function(Sn){Sn.exports=function(){"use strict";var Ct,U,I;function l(h,qe){if(Ct)if(U){var Ne="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+Ct+")(sharedChunk); ("+U+")(sharedChunk); self.onerror = null;",ze={};Ct(ze),I=qe(ze),typeof window<"u"&&(I.workerUrl=window.URL.createObjectURL(new Blob([Ne],{type:"text/javascript"})))}else U=qe;else Ct=qe}return l(0,function(h){var Ne=ze;function ze(o,e,s,c){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(c-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=c,this.p2x=s,this.p2y=c}ze.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},ze.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},ze.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},ze.prototype.solveCurveX=function(o,e){var s,c,g,v,x;for(void 0===e&&(e=1e-6),g=o,x=0;x<8;x++){if(v=this.sampleCurveX(g)-o,Math.abs(v)<e)return g;var D=this.sampleCurveDerivativeX(g);if(Math.abs(D)<1e-6)break;g-=v/D}if((g=o)<(s=0))return s;if(g>(c=1))return c;for(;s<c;){if(v=this.sampleCurveX(g),Math.abs(v-o)<e)return g;o>v?s=g:c=g,g=.5*(c-s)+s}return g},ze.prototype.solve=function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))};var ye=me;function me(o,e){this.x=o,this.y=e}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,e){return this.clone()._rotateAround(o,e)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var e=o.x-this.x,s=o.y-this.y;return e*e+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,e){return Math.atan2(this.x*e-this.y*o,this.x*o+this.y*e)},_matMult:function(o){var e=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=e,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var e=Math.cos(o),s=Math.sin(o),c=s*this.x+e*this.y;return this.x=e*this.x-s*this.y,this.y=c,this},_rotateAround:function(o,e){var s=Math.cos(o),c=Math.sin(o),g=e.y+c*(this.x-e.x)+s*(this.y-e.y);return this.x=e.x+s*(this.x-e.x)-c*(this.y-e.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(o){return o instanceof me?o:Array.isArray(o)?new me(o[0],o[1]):o};var Ce=typeof self<"u"?self:{};const tt=Math.pow(2,53)-1,Ue=Math.PI/180,dt=180/Math.PI;function st(o){return o*Ue}const rt=[[0,0],[1,0],[1,1],[0,1]];function At(o){if(o<=0)return 0;if(o>=1)return 1;const e=o*o,s=e*o;return 4*(o<.5?s:3*(o-e)+s-.75)}function vt(o,e,s,c){const g=new Ne(o,e,s,c);return function(v){return g.solve(v)}}const Zt=vt(.25,.1,.25,1);function vn(o,e,s){return Math.min(s,Math.max(e,o))}function Tn(o,e,s){const c=s-e,g=((o-e)%c+c)%c+e;return g===e?s:g}function Bt(o,e,s){if(!o.length)return s(null,[]);let c=o.length;const g=new Array(o.length);let v=null;o.forEach((x,D)=>{e(x,(S,k)=>{S&&(v=S),g[D]=k,0==--c&&s(v,g)})})}function ke(o){const e=[];for(const s in o)e.push(o[s]);return e}function $e(o,...e){for(const s of e)for(const c in s)o[c]=s[c];return o}let sn=1;function Gt(){return sn++}function $t(){return function o(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function dn(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function bt(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function Mt(o,e){o.forEach(s=>{e[s]&&(e[s]=e[s].bind(e))})}function Ot(o,e){return-1!==o.indexOf(e,o.length-e.length)}function Ht(o,e,s){const c={};for(const g in o)c[g]=e.call(s||this,o[g],g,o);return c}function zt(o,e,s){const c={};for(const g in o)e.call(s||this,o[g],g,o)&&(c[g]=o[g]);return c}function Jt(o){return Array.isArray(o)?o.map(Jt):"object"==typeof o&&o?Ht(o,Jt):o}const Nn={};function Rn(o){Nn[o]||(typeof console<"u"&&console.warn(o),Nn[o]=!0)}function gi(o,e,s){return(s.y-o.y)*(e.x-o.x)>(e.y-o.y)*(s.x-o.x)}function bn(o){let e=0;for(let s,c,g=0,v=o.length,x=v-1;g<v;x=g++)s=o[g],c=o[x],e+=(c.x-s.x)*(s.y+c.y);return e}function wi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pi(o){const e={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,g,v)=>{const x=g||v;return e[c]=!x||x.toLowerCase(),""}),e["max-age"]){const s=parseInt(e["max-age"],10);isNaN(s)?delete e["max-age"]:e["max-age"]=s}return e}let li,en,si,It=null;function Vt(o){if(null==It){const e=o.navigator?o.navigator.userAgent:null;It=!!o.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return It}function xn(o){try{const e=Ce[o];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}const Dn={now:()=>void 0!==si?si:Ce.performance.now(),setNow(o){si=o},restoreNow(){si=void 0},frame(o){const e=Ce.requestAnimationFrame(o);return{cancel:()=>Ce.cancelAnimationFrame(e)}},getImageData(o,e=0){const s=Ce.document.createElement("canvas"),c=s.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return s.width=o.width,s.height=o.height,c.drawImage(o,0,0,o.width,o.height),c.getImageData(-e,-e,o.width+2*e,o.height+2*e)},resolveURL:o=>(li||(li=Ce.document.createElement("a")),li.href=o,li.href),get devicePixelRatio(){return Ce.devicePixelRatio},get prefersReducedMotion(){return!!Ce.matchMedia&&(null==en&&(en=Ce.matchMedia("(prefers-reduced-motion: reduce)")),en.matches)}};let jn;const wn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==jn){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{jn=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):o}catch{jn=o}}return jn},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},hi={supported:!1,testSupport:function(o){!ur&&Hi&&(Ln?pr(o):Fi=o)}};let Fi,Hi,ur=!1,Ln=!1;function pr(o){const e=o.createTexture();o.bindTexture(o.TEXTURE_2D,e);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Hi),o.isContextLost())return;hi.supported=!0}catch{}o.deleteTexture(e),ur=!0}Ce.document&&(Hi=Ce.document.createElement("img"),Hi.onload=function(){Fi&&pr(Fi),Fi=null,Ln=!0},Hi.onerror=function(){ur=!0,Fi=null},Hi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const zn="01",qt="NO_ACCESS_TOKEN";function nt(o){return 0===o.indexOf("mapbox:")}function ne(o){return wn.API_URL_REGEX.test(o)}const $=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function V(o){const e=o.match($);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function W(o){const e=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${e}`}function ce(o){if(!o)return null;const e=o.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(Ce.atob(e[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ae{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const s=ce(wn.ACCESS_TOKEN);let c="";return c=s&&s.u?Ce.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(g,v)=>String.fromCharCode(Number("0x"+v)))):wn.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${c}`:`mapbox.eventData:${c}`}fetchEventData(){const e=xn("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(e)try{const g=Ce.localStorage.getItem(s);g&&(this.eventData=JSON.parse(g));const v=Ce.localStorage.getItem(c);v&&(this.anonId=v)}catch{Rn("Unable to read from LocalStorage")}}saveEventData(){const e=xn("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(e)try{Ce.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&Ce.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Rn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,s,c,g){if(!wn.EVENTS_URL)return;const v=V(wn.EVENTS_URL);v.params.push(`access_token=${g||wn.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.3.1",skuId:zn,userId:this.anonId},D=s?$e(x,s):x,S={url:W(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([D])};this.pendingRequest=oe(S,k=>{this.pendingRequest=null,c(k),this.saveEventData(),this.processRequests(g)})}queueRequest(e,s){this.queue.push(e),this.processRequests(s)}}const Le=new class extends Ae{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,e){wn.EVENTS_URL&&wn.ACCESS_TOKEN&&Array.isArray(o)&&o.some(s=>nt(s)||ne(s))&&this.queueRequest(Date.now(),e)}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=ce(wn.ACCESS_TOKEN),s=e?e.u:wn.ACCESS_TOKEN;let c=s!==this.eventData.tokenU;bt(this.anonId)||(this.anonId=$t(),c=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),x=new Date(g),D=(g-this.eventData.lastSuccess)/864e5;c=c||D>=1||D<-1||v.getDate()!==x.getDate()}else c=!0;if(!c)return this.processRequests();this.postEvent(g,{"enabled.telemetry":!1},v=>{v||(this.eventData.lastSuccess=g,this.eventData.tokenU=s)},o)}},Nt=Le.postTurnstileEvent.bind(Le),un=new class extends Ae{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,e,s,c){this.skuToken=e,this.errorCb=c,wn.EVENTS_URL&&(s||wn.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(qt)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:s}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),bt(this.anonId)||(this.anonId=$t()),this.postEvent(s,{skuToken:this.skuToken},c=>{c?this.errorCb(c):e&&(this.success[e]=!0)},o))}},Cn=un.postMapLoadEvent.bind(un),Wt=new class extends Ae{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,e,s,c){if(!wn.API_URL||!wn.SESSION_PATH)return;const g=V(wn.API_URL+wn.SESSION_PATH);g.params.push(`sku=${e||""}`),g.params.push(`access_token=${c||wn.ACCESS_TOKEN||""}`);const v={url:W(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Se(v,x=>{this.pendingRequest=null,s(x),this.saveEventData(),this.processRequests(c)})}getSessionAPI(o,e,s,c){this.skuToken=e,this.errorCb=c,wn.SESSION_PATH&&wn.API_URL&&(s||wn.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(qt)))}processRequests(o){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:s}=this.queue.shift();e&&this.success[e]||this.getSession(s,this.skuToken,c=>{c?this.errorCb(c):e&&(this.success[e]=!0)},o)}},Zn=Wt.getSessionAPI.bind(Wt),mi=new Set,$n="mapbox-tiles";let kn,ni,wt=500,mt=50;function lt(){Ce.caches&&!kn&&(kn=Ce.caches.open($n))}function je(o){const e=o.indexOf("?");return e<0?o:o.slice(0,e)}let Qe=1/0;const Be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Be);class ft extends Error{constructor(e,s,c){401===s&&ne(c)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=s,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Rt=wi()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Ce.location.protocol?Ce.parent:Ce).location.href,he=function(o,e){if(!(/^file:/.test(s=o.url)||/^file:/.test(Rt())&&!/^\w+:/.test(s))){if(Ce.fetch&&Ce.Request&&Ce.AbortController&&Ce.Request.prototype.hasOwnProperty("signal"))return function(c,g){const v=new Ce.AbortController,x=new Ce.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Rt(),signal:v.signal});let D=!1,S=!1;const k=(j=x.url).indexOf("sku=")>0&&ne(j);var j;"json"===c.type&&x.headers.set("Accept","application/json");const Y=(ae,pe,Pe)=>{if(S)return;if(ae&&"SecurityError"!==ae.message&&Rn(ae),pe&&Pe)return J(pe);const Xe=Date.now();Ce.fetch(x).then(ht=>{if(ht.ok){const Et=k?ht.clone():null;return J(ht,Et,Xe)}return g(new ft(ht.statusText,ht.status,c.url))}).catch(ht=>{20!==ht.code&&g(new Error(ht.message))})},J=(ae,pe,Pe)=>{("arrayBuffer"===c.type?ae.arrayBuffer():"json"===c.type?ae.json():ae.text()).then(Xe=>{S||(pe&&Pe&&function(ht,Et,Pt){if(lt(),!kn)return;const Ft={status:Et.status,statusText:Et.statusText,headers:new Ce.Headers};Et.headers.forEach((Ut,yn)=>Ft.headers.set(yn,Ut));const Lt=Pi(Et.headers.get("Cache-Control")||"");Lt["no-store"]||(Lt["max-age"]&&Ft.headers.set("Expires",new Date(Pt+1e3*Lt["max-age"]).toUTCString()),new Date(Ft.headers.get("Expires")).getTime()-Pt<42e4||function(Ut,yn){if(void 0===ni)try{new Response(new ReadableStream),ni=!0}catch{ni=!1}ni?yn(Ut.body):Ut.blob().then(yn)}(Et,Ut=>{const yn=new Ce.Response(Ut,Ft);lt(),kn&&kn.then(pn=>pn.put(je(ht.url),yn)).catch(pn=>Rn(pn.message))}))}(x,pe,Pe),D=!0,g(null,Xe,ae.headers.get("Cache-Control"),ae.headers.get("Expires")))}).catch(Xe=>{S||g(new Error(Xe.message))})};return k?function(ae,pe){if(lt(),!kn)return pe(null);const Pe=je(ae.url);kn.then(Xe=>{Xe.match(Pe).then(ht=>{const Et=function(Pt){if(!Pt)return!1;const Ft=new Date(Pt.headers.get("Expires")||0),Lt=Pi(Pt.headers.get("Cache-Control")||"");return Ft>Date.now()&&!Lt["no-cache"]}(ht);Xe.delete(Pe),Et&&Xe.put(Pe,ht.clone()),pe(null,ht,Et)}).catch(pe)}).catch(pe)}(x,Y):Y(null,null),{cancel:()=>{S=!0,D||v.abort()}}}(o,e);if(wi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e,void 0,!0)}var s;return function(c,g){const v=new Ce.XMLHttpRequest;v.open(c.method||"GET",c.url,!0),"arrayBuffer"===c.type&&(v.responseType="arraybuffer");for(const x in c.headers)v.setRequestHeader(x,c.headers[x]);return"json"===c.type&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials="include"===c.credentials,v.onerror=()=>{g(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||0===v.status)&&null!==v.response){let x=v.response;if("json"===c.type)try{x=JSON.parse(v.response)}catch(D){return g(D)}g(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else g(new ft(v.statusText,v.status,c.url))},v.send(c.body),{cancel:()=>v.abort()}}(o,e)},ee=function(o,e){return he($e(o,{type:"arrayBuffer"}),e)},oe=function(o,e){return he($e(o,{method:"POST"}),e)},Se=function(o,e){return he($e(o,{method:"GET"}),e)};function Oe(o){const e=Ce.document.createElement("a");return e.href=o,e.protocol===Ce.document.location.protocol&&e.host===Ce.document.location.host}const Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let gt,_t;gt=[],_t=0;const ot=function(o,e){if(hi.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),_t>=wn.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return gt.push(v),v}_t++;let s=!1;const c=()=>{if(!s)for(s=!0,_t--;gt.length&&_t<wn.MAX_PARALLEL_IMAGE_REQUESTS;){const v=gt.shift(),{requestParameters:x,callback:D,cancelled:S}=v;S||(v.cancel=ot(x,D).cancel)}},g=ee(o,(v,x,D,S)=>{c(),v?e(v):x&&(Ce.createImageBitmap?function(k,j){const Y=new Ce.Blob([new Uint8Array(k)],{type:"image/png"});Ce.createImageBitmap(Y).then(J=>{j(null,J)}).catch(J=>{j(new Error(`Could not load image because of ${J.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(k,j)=>e(k,j,D,S)):function(k,j){const Y=new Ce.Image,J=Ce.URL;Y.onload=()=>{j(null,Y),J.revokeObjectURL(Y.src),Y.onload=null,Ce.requestAnimationFrame(()=>{Y.src=Ye})},Y.onerror=()=>j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ae=new Ce.Blob([new Uint8Array(k)],{type:"image/png"});Y.src=k.byteLength?J.createObjectURL(ae):Ye}(x,(k,j)=>e(k,j,D,S)))});return{cancel:()=>{g.cancel(),c()}}};function He(o,e,s){s[o]&&-1!==s[o].indexOf(e)||(s[o]=s[o]||[],s[o].push(e))}function Dt(o,e,s){if(s&&s[o]){const c=s[o].indexOf(e);-1!==c&&s[o].splice(c,1)}}class Fe{constructor(e,s={}){$e(this,s),this.type=e}}class De extends Fe{constructor(e,s={}){super("error",$e({error:e},s))}}class Me{on(e,s){return this._listeners=this._listeners||{},He(e,s,this._listeners),this}off(e,s){return Dt(e,s,this._listeners),Dt(e,s,this._oneTimeListeners),this}once(e,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},He(e,s,this._oneTimeListeners),this):new Promise(c=>this.once(e,c))}fire(e,s){"string"==typeof e&&(e=new Fe(e,s||{}));const c=e.type;if(this.listens(c)){e.target=this;const g=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const D of g)D.call(this,e);const v=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const D of v)Dt(c,D,this._oneTimeListeners),D.call(this,e);const x=this._eventedParent;x&&($e(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),x.fire(e))}else e instanceof De&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,s){return this._eventedParent=e,this._eventedParentData=s,this}}var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class We{constructor(e,s,c,g){this.message=(e?`${e}: `:"")+c,g&&(this.identifier=g),null!=s&&s.__line__&&(this.line=s.__line__)}}function Xt(o){const e=o.value;return e?[new We(o.key,e,"constants have been deprecated as of v8")]:[]}function Fn(o,...e){for(const s of e)for(const c in s)o[c]=s[c];return o}function Gn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function An(o){if(Array.isArray(o))return o.map(An);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const s in o)e[s]=An(o[s]);return e}return Gn(o)}class Ci extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}class qi{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[c,g]of s)this.bindings[c]=g}concat(e){return new qi(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const rr={kind:"null"},En={kind:"number"},ei={kind:"string"},ui={kind:"boolean"},or={kind:"color"},Lr={kind:"object"},pi={kind:"value"},Gs={kind:"collator"},Xi={kind:"formatted"},wo={kind:"resolvedImage"};function dr(o,e){return{kind:"array",itemType:o,N:e}}function Yi(o){if("array"===o.kind){const e=Yi(o.itemType);return"number"==typeof o.N?`array<${e}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${e}>`}return o.kind}const ss=[rr,En,ei,ui,or,Xi,Lr,dr(pi),wo];function Jo(o,e){if("error"===e.kind)return null;if("array"===o.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Jo(o.itemType,e.itemType))&&("number"!=typeof o.N||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if("value"===o.kind)for(const s of ss)if(!Jo(s,e))return null}return`Expected ${Yi(o)} but found ${Yi(e)} instead.`}function yr(o,e){return e.some(s=>s.kind===o.kind)}function Kr(o,e){return e.some(s=>"null"===s?null===o:"array"===s?Array.isArray(o):"object"===s?o&&!Array.isArray(o)&&"object"==typeof o:s===typeof o)}function sr(o){var e={exports:{}};return o(e,e.exports),e.exports}var Co=sr(function(o,e){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(D){return(D=Math.round(D))<0?0:D>255?255:D}function g(D){return c("%"===D[D.length-1]?parseFloat(D)/100*255:parseInt(D))}function v(D){return(S="%"===D[D.length-1]?parseFloat(D)/100:parseFloat(D))<0?0:S>1?1:S;var S}function x(D,S,k){return k<0?k+=1:k>1&&(k-=1),6*k<1?D+(S-D)*k*6:2*k<1?S:3*k<2?D+(S-D)*(2/3-k)*6:D}try{e.parseCSSColor=function(D){var S,k=D.replace(/ /g,"").toLowerCase();if(k in s)return s[k].slice();if("#"===k[0])return 4===k.length?(S=parseInt(k.substr(1),16))>=0&&S<=4095?[(3840&S)>>4|(3840&S)>>8,240&S|(240&S)>>4,15&S|(15&S)<<4,1]:null:7===k.length&&(S=parseInt(k.substr(1),16))>=0&&S<=16777215?[(16711680&S)>>16,(65280&S)>>8,255&S,1]:null;var j=k.indexOf("("),Y=k.indexOf(")");if(-1!==j&&Y+1===k.length){var J=k.substr(0,j),ae=k.substr(j+1,Y-(j+1)).split(","),pe=1;switch(J){case"rgba":if(4!==ae.length)return null;pe=v(ae.pop());case"rgb":return 3!==ae.length?null:[g(ae[0]),g(ae[1]),g(ae[2]),pe];case"hsla":if(4!==ae.length)return null;pe=v(ae.pop());case"hsl":if(3!==ae.length)return null;var Pe=(parseFloat(ae[0])%360+360)%360/360,Xe=v(ae[1]),ht=v(ae[2]),Et=ht<=.5?ht*(Xe+1):ht+Xe-ht*Xe,Pt=2*ht-Et;return[c(255*x(Pt,Et,Pe+1/3)),c(255*x(Pt,Et,Pe)),c(255*x(Pt,Et,Pe-1/3)),pe];default:return null}}return null}}catch{}});class fi{constructor(e,s,c,g=1){this.r=e,this.g=s,this.b=c,this.a=g}static parse(e){if(!e)return;if(e instanceof fi)return e;if("string"!=typeof e)return;const s=Co.parseCSSColor(e);return s?new fi(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[e,s,c,g]=this.toArray();return`rgba(${Math.round(e)},${Math.round(s)},${Math.round(c)},${g})`}toArray(){const{r:e,g:s,b:c,a:g}=this;return 0===g?[0,0,0,0]:[255*e/g,255*s/g,255*c/g,g]}}fi.black=new fi(0,0,0,1),fi.white=new fi(1,1,1,1),fi.transparent=new fi(0,0,0,0),fi.red=new fi(1,0,0,1),fi.blue=new fi(0,0,1,1);class br{constructor(e,s,c){this.sensitivity=e?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ys{constructor(e,s,c,g,v){this.text=e,this.image=s,this.scale=c,this.fontStack=g,this.textColor=v}}class Br{constructor(e){this.sections=e}static fromString(e){return new Br([new ys(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Br?e:Br.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const s of this.sections){if(s.image){e.push(["image",s.image.name]);continue}e.push(s.text);const c={};s.fontStack&&(c["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(c["font-scale"]=s.scale),s.textColor&&(c["text-color"]=["rgba"].concat(s.textColor.toArray())),e.push(c)}return e}}class Xr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Xr({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Eo(o,e,s,c){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===c||"number"==typeof c&&c>=0&&c<=1?null:`Invalid rgba value [${[o,e,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof c?[o,e,s,c]:[o,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function As(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof fi||o instanceof br||o instanceof Br||o instanceof Xr)return!0;if(Array.isArray(o)){for(const e of o)if(!As(e))return!1;return!0}if("object"==typeof o){for(const e in o)if(!As(o[e]))return!1;return!0}return!1}function xr(o){if(null===o)return rr;if("string"==typeof o)return ei;if("boolean"==typeof o)return ui;if("number"==typeof o)return En;if(o instanceof fi)return or;if(o instanceof br)return Gs;if(o instanceof Br)return Xi;if(o instanceof Xr)return wo;if(Array.isArray(o)){const e=o.length;let s;for(const c of o){const g=xr(c);if(s){if(s===g)continue;s=pi;break}s=g}return dr(s||pi,e)}return Lr}function Hs(o){const e=typeof o;return null===o?"":"string"===e||"number"===e||"boolean"===e?String(o):o instanceof fi||o instanceof Br||o instanceof Xr?o.toString():JSON.stringify(o)}class io{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(2!==e.length)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!As(e[1]))return s.error("invalid value");const c=e[1];let g=xr(c);const v=s.expectedType;return"array"!==g.kind||0!==g.N||!v||"array"!==v.kind||"number"==typeof v.N&&0!==v.N||(g=v),new io(g,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof fi?["rgba"].concat(this.value.toArray()):this.value instanceof Br?this.value.serialize():this.value}}class Mr{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Is={string:ei,number:En,boolean:ui,object:Lr};class fr{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let c,g=1;const v=e[0];if("array"===v){let D,S;if(e.length>2){const k=e[1];if("string"!=typeof k||!(k in Is)||"object"===k)return s.error('The item type argument of "array" must be one of string, number, boolean',1);D=Is[k],g++}else D=pi;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);S=e[2],g++}c=dr(D,S)}else c=Is[v];const x=[];for(;g<e.length;g++){const D=s.parse(e[g],g,pi);if(!D)return null;x.push(D)}return new fr(c,x)}evaluate(e){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(e);if(!Jo(this.type,xr(c)))return c;if(s===this.args.length-1)throw new Mr(`Expected value to be of type ${Yi(this.type)}, but found ${Yi(xr(c))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,s=[e.kind];if("array"===e.kind){const c=e.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){s.push(c.kind);const g=e.N;("number"==typeof g||this.args.length>1)&&s.push(g)}}return s.concat(this.args.map(c=>c.serialize()))}}class Va{constructor(e){this.type=Xi,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const c=e[1];if(!Array.isArray(c)&&"object"==typeof c)return s.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=e.length-1;++x){const D=e[x];if(v&&"object"==typeof D&&!Array.isArray(D)){v=!1;let S=null;if(D["font-scale"]&&(S=s.parse(D["font-scale"],1,En),!S))return null;let k=null;if(D["text-font"]&&(k=s.parse(D["text-font"],1,dr(ei)),!k))return null;let j=null;if(D["text-color"]&&(j=s.parse(D["text-color"],1,or),!j))return null;const Y=g[g.length-1];Y.scale=S,Y.font=k,Y.textColor=j}else{const S=s.parse(e[x],1,pi);if(!S)return null;const k=S.type.kind;if("string"!==k&&"value"!==k&&"null"!==k&&"resolvedImage"!==k)return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:S,scale:null,font:null,textColor:null})}}return new Va(g)}evaluate(e){return new Br(this.sections.map(s=>{const c=s.content.evaluate(e);return xr(c)===wo?new ys("",c,null,null,null):new ys(Hs(c),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)}))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const s of this.sections){e.push(s.content.serialize());const c={};s.scale&&(c["font-scale"]=s.scale.serialize()),s.font&&(c["text-font"]=s.font.serialize()),s.textColor&&(c["text-color"]=s.textColor.serialize()),e.push(c)}return e}}class ga{constructor(e){this.type=wo,this.input=e}static parse(e,s){if(2!==e.length)return s.error("Expected two arguments.");const c=s.parse(e[1],1,ei);return c?new ga(c):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),c=Xr.fromString(s);return c&&e.availableImages&&(c.available=e.availableImages.indexOf(s)>-1),c}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const pc={"to-boolean":ui,"to-color":or,"to-number":En,"to-string":ei};class as{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const c=e[0];if(("to-boolean"===c||"to-string"===c)&&2!==e.length)return s.error("Expected one argument.");const g=pc[c],v=[];for(let x=1;x<e.length;x++){const D=s.parse(e[x],x,pi);if(!D)return null;v.push(D)}return new as(g,v)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let s,c;for(const g of this.args){if(s=g.evaluate(e),c=null,s instanceof fi)return s;if("string"==typeof s){const v=e.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Eo(s[0],s[1],s[2],s[3]),!c))return new fi(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Mr(c||`Could not parse color from value '${"string"==typeof s?s:String(JSON.stringify(s))}'`)}if("number"===this.type.kind){let s=null;for(const c of this.args){if(s=c.evaluate(e),null===s)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Mr(`Could not convert ${JSON.stringify(s)} to number.`)}return"formatted"===this.type.kind?Br.fromString(Hs(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Xr.fromString(Hs(this.args[0].evaluate(e))):Hs(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Va([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ga(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(s=>{e.push(s.serialize())}),e}}const vl=["Unknown","Point","LineString","Polygon"];class $s{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?vl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=fi.parse(e)),s}}class jo{constructor(e,s,c,g){this.name=e,this.type=s,this._evaluate=c,this.args=g}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,s){const c=e[0],g=jo.definitions[c];if(!g)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,D=x.filter(([k])=>!Array.isArray(k)||k.length===e.length-1);let S=null;for(const[k,j]of D){S=new Ys(s.registry,s.path,null,s.scope);const Y=[];let J=!1;for(let ae=1;ae<e.length;ae++){const pe=e[ae],Pe=Array.isArray(k)?k[ae-1]:k.type,Xe=S.parse(pe,1+Y.length,Pe);if(!Xe){J=!0;break}Y.push(Xe)}if(!J)if(Array.isArray(k)&&k.length!==Y.length)S.error(`Expected ${k.length} arguments, but found ${Y.length} instead.`);else{for(let ae=0;ae<Y.length;ae++){const pe=Array.isArray(k)?k[ae]:k.type,Pe=Y[ae];S.concat(ae+1).checkSubtype(pe,Pe.type)}if(0===S.errors.length)return new jo(c,v,j,Y)}}if(1===D.length)s.errors.push(...S.errors);else{const k=(D.length?D:x).map(([Y])=>{return J=Y,Array.isArray(J)?`(${J.map(Yi).join(", ")})`:`(${Yi(J.type)}...)`;var J}).join(" | "),j=[];for(let Y=1;Y<e.length;Y++){const J=s.parse(e[Y],1+j.length);if(!J)return null;j.push(Yi(J.type))}s.error(`Expected arguments of type ${k}, but found (${j.join(", ")}) instead.`)}return null}static register(e,s){jo.definitions=s;for(const c in s)e[c]=jo}}class Zs{constructor(e,s,c){this.type=Gs,this.locale=c,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(2!==e.length)return s.error("Expected one argument.");const c=e[1];if("object"!=typeof c||Array.isArray(c))return s.error("Collator options argument must be an object.");const g=s.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,ui);if(!g)return null;const v=s.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,ui);if(!v)return null;let x=null;return c.locale&&(x=s.parse(c.locale,1,ei),!x)?null:new Zs(g,v,x)}evaluate(e){return new br(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Io=8192;function _a(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function Ps(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function Qa(o,e){const s=(180+o[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,e.z);return[Math.round(s*g*Io),Math.round(c*g*Io)]}function Ws(o,e,s){const c=o[0]-e[0],g=o[1]-e[1],v=o[0]-s[0],x=o[1]-s[1];return c*x-v*g==0&&c*v<=0&&g*x<=0}function ya(o,e){let s=!1;for(let x=0,D=e.length;x<D;x++){const S=e[x];for(let k=0,j=S.length;k<j-1;k++){if(Ws(o,S[k],S[k+1]))return!1;(g=S[k])[1]>(c=o)[1]!=(v=S[k+1])[1]>c[1]&&c[0]<(v[0]-g[0])*(c[1]-g[1])/(v[1]-g[1])+g[0]&&(s=!s)}}var c,g,v;return s}function Ua(o,e){for(let s=0;s<e.length;s++)if(ya(o,e[s]))return!0;return!1}function va(o,e,s,c){const g=c[0]-s[0],v=c[1]-s[1],x=(o[0]-s[0])*v-g*(o[1]-s[1]),D=(e[0]-s[0])*v-g*(e[1]-s[1]);return x>0&&D<0||x<0&&D>0}function vs(o,e,s){for(const k of s)for(let j=0;j<k.length-1;++j)if((D=[(x=k[j+1])[0]-(v=k[j])[0],x[1]-v[1]])[0]*(S=[(g=e)[0]-(c=o)[0],g[1]-c[1]])[1]-D[1]*S[0]!=0&&va(c,g,v,x)&&va(v,x,c,g))return!0;var c,g,v,x,D,S;return!1}function ja(o,e){for(let s=0;s<o.length;++s)if(!ya(o[s],e))return!1;for(let s=0;s<o.length-1;++s)if(vs(o[s],o[s+1],e))return!1;return!0}function Po(o,e){for(let s=0;s<e.length;s++)if(ja(o,e[s]))return!0;return!1}function bs(o,e,s){const c=[];for(let g=0;g<o.length;g++){const v=[];for(let x=0;x<o[g].length;x++){const D=Qa(o[g][x],s);_a(e,D),v.push(D)}c.push(v)}return c}function ba(o,e,s){const c=[];for(let g=0;g<o.length;g++){const v=bs(o[g],e,s);c.push(v)}return c}function Os(o,e,s,c){if(o[0]<s[0]||o[0]>s[2]){const g=.5*c;let v=o[0]-s[0]>g?-c:s[0]-o[0]>g?c:0;0===v&&(v=o[0]-s[2]>g?-c:s[2]-o[0]>g?c:0),o[0]+=v}_a(e,o)}function ks(o,e,s,c){const g=Math.pow(2,c.z)*Io,v=[c.x*Io,c.y*Io],x=[];for(const D of o)for(const S of D){const k=[S.x+v[0],S.y+v[1]];Os(k,e,s,g),x.push(k)}return x}function Ja(o,e,s,c){const g=Math.pow(2,c.z)*Io,v=[c.x*Io,c.y*Io],x=[];for(const S of o){const k=[];for(const j of S){const Y=[j.x+v[0],j.y+v[1]];_a(e,Y),k.push(Y)}x.push(k)}if(e[2]-e[0]<=g/2){(D=e)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const S of x)for(const k of S)Os(k,e,s,g)}var D;return x}class qs{constructor(e,s){this.type=ui,this.geojson=e,this.geometries=s}static parse(e,s){if(2!==e.length)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(As(e[1])){const c=e[1];if("FeatureCollection"===c.type)for(let g=0;g<c.features.length;++g){const v=c.features[g].geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new qs(c,c.features[g].geometry)}else if("Feature"===c.type){const g=c.geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new qs(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new qs(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(s,c){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if("Polygon"===c.type){const D=bs(c.coordinates,v,x),S=ks(s.geometry(),g,v,x);if(!Ps(g,v))return!1;for(const k of S)if(!ya(k,D))return!1}if("MultiPolygon"===c.type){const D=ba(c.coordinates,v,x),S=ks(s.geometry(),g,v,x);if(!Ps(g,v))return!1;for(const k of S)if(!Ua(k,D))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(s,c){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if("Polygon"===c.type){const D=bs(c.coordinates,v,x),S=Ja(s.geometry(),g,v,x);if(!Ps(g,v))return!1;for(const k of S)if(!ja(k,D))return!1}if("MultiPolygon"===c.type){const D=ba(c.coordinates,v,x),S=Ja(s.geometry(),g,v,x);if(!Ps(g,v))return!1;for(const k of S)if(!Po(k,D))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Rs(o){if(o instanceof jo&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof qs)return!1;let e=!0;return o.eachChild(s=>{e&&!Rs(s)&&(e=!1)}),e}function Ni(o){if(o instanceof jo&&"feature-state"===o.name)return!1;let e=!0;return o.eachChild(s=>{e&&!Ni(s)&&(e=!1)}),e}function Qr(o,e){if(o instanceof jo&&e.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(c=>{s&&!Qr(c,e)&&(s=!1)}),s}class sa{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(2!==e.length||"string"!=typeof e[1])return s.error("'var' expression requires exactly one string literal argument.");const c=e[1];return s.scope.has(c)?new sa(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ys{constructor(e,s=[],c,g=new qi,v=[]){this.registry=e,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=g,this.errors=v,this.expectedType=c}parse(e,s,c,g,v={}){return s?this.concat(s,c,g)._parse(e,v):this._parse(e,v)}_parse(e,s){function c(g,v,x){return"assert"===x?new fr(v,[g]):"coerce"===x?new as(v,[g]):g}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=e[0];if("string"!=typeof g)return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(e,this);if(!x)return null;if(this.expectedType){const D=this.expectedType,S=x.type;if("string"!==D.kind&&"number"!==D.kind&&"boolean"!==D.kind&&"object"!==D.kind&&"array"!==D.kind||"value"!==S.kind)if("color"!==D.kind&&"formatted"!==D.kind&&"resolvedImage"!==D.kind||"value"!==S.kind&&"string"!==S.kind){if(this.checkSubtype(D,S))return null}else x=c(x,D,s.typeAnnotation||"coerce");else x=c(x,D,s.typeAnnotation||"assert")}if(!(x instanceof io)&&"resolvedImage"!==x.type.kind&&$r(x)){const D=new $s;try{x=new io(x.type,x.evaluate(D))}catch(S){return this.error(S.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,s,c){const g="number"==typeof e?this.path.concat(e):this.path,v=c?this.scope.concat(c):this.scope;return new Ys(this.registry,g,s||null,v,this.errors)}error(e,...s){const c=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ci(c,e))}checkSubtype(e,s){const c=Jo(e,s);return c&&this.error(c),c}}function $r(o){if(o instanceof sa)return $r(o.boundExpression);if(o instanceof jo&&"error"===o.name||o instanceof Zs||o instanceof qs)return!1;const e=o instanceof as||o instanceof fr;let s=!0;return o.eachChild(c=>{s=e?s&&$r(c):s&&c instanceof io}),!!s&&Rs(o)&&Qr(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function ls(o,e){const s=o.length-1;let c,g,v=0,x=s,D=0;for(;v<=x;)if(D=Math.floor((v+x)/2),c=o[D],g=o[D+1],c<=e){if(D===s||e<g)return D;v=D+1}else{if(!(c>e))throw new Mr("Input is not a number.");x=D-1}return 0}class Fs{constructor(e,s,c){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[g,v]of c)this.labels.push(g),this.outputs.push(v)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(e[1],1,En);if(!c)return null;const g=[];let v=null;s.expectedType&&"value"!==s.expectedType.kind&&(v=s.expectedType);for(let x=1;x<e.length;x+=2){const D=1===x?-1/0:e[x],S=e[x+1],k=x,j=x+1;if("number"!=typeof D)return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(g.length&&g[g.length-1][0]>=D)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const Y=s.parse(S,j,v);if(!Y)return null;v=v||Y.type,g.push([D,Y])}return new Fs(v,c,g)}evaluate(e){const s=this.labels,c=this.outputs;if(1===s.length)return c[0].evaluate(e);const g=this.input.evaluate(e);if(g<=s[0])return c[0].evaluate(e);const v=s.length;return g>=s[v-1]?c[v-1].evaluate(e):c[ls(s,g)].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&e.push(this.labels[s]),e.push(this.outputs[s].serialize());return e}}function Vi(o,e,s){return o*(1-s)+e*s}var xa=Object.freeze({__proto__:null,number:Vi,color:function(o,e,s){return new fi(Vi(o.r,e.r,s),Vi(o.g,e.g,s),Vi(o.b,e.b,s),Vi(o.a,e.a,s))},array:function(o,e,s){return o.map((c,g)=>Vi(c,e[g],s))}});const Qi=4/29,Ls=6/29,fo=3*Ls*Ls,Sr=Math.PI/180,K=180/Math.PI;function ge(o){return o>.008856451679035631?Math.pow(o,1/3):o/fo+Qi}function X(o){return o>Ls?o*o*o:fo*(o-Qi)}function xe(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function pt(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Yt(o){const e=pt(o.r),s=pt(o.g),c=pt(o.b),g=ge((.4124564*e+.3575761*s+.1804375*c)/.95047),v=ge((.2126729*e+.7151522*s+.072175*c)/1);return{l:116*v-16,a:500*(g-v),b:200*(v-ge((.0193339*e+.119192*s+.9503041*c)/1.08883)),alpha:o.a}}function gn(o){let e=(o.l+16)/116,s=isNaN(o.a)?e:e+o.a/500,c=isNaN(o.b)?e:e-o.b/200;return e=1*X(e),s=.95047*X(s),c=1.08883*X(c),new fi(xe(3.2404542*s-1.5371385*e-.4985314*c),xe(-.969266*s+1.8760108*e+.041556*c),xe(.0556434*s-.2040259*e+1.0572252*c),o.alpha)}function Hn(o,e,s){const c=e-o;return o+s*(c>180||c<-180?c-360*Math.round(c/360):c)}const ar={forward:Yt,reverse:gn,interpolate:function(o,e,s){return{l:Vi(o.l,e.l,s),a:Vi(o.a,e.a,s),b:Vi(o.b,e.b,s),alpha:Vi(o.alpha,e.alpha,s)}}},er={forward:function(o){const{l:e,a:s,b:c}=Yt(o),g=Math.atan2(c,s)*K;return{h:g<0?g+360:g,c:Math.sqrt(s*s+c*c),l:e,alpha:o.a}},reverse:function(o){const e=o.h*Sr,s=o.c;return gn({l:o.l,a:Math.cos(e)*s,b:Math.sin(e)*s,alpha:o.alpha})},interpolate:function(o,e,s){return{h:Hn(o.h,e.h,s),c:Vi(o.c,e.c,s),l:Vi(o.l,e.l,s),alpha:Vi(o.alpha,e.alpha,s)}}};var lr=Object.freeze({__proto__:null,lab:ar,hcl:er});class di{constructor(e,s,c,g,v){this.type=e,this.operator=s,this.interpolation=c,this.input=g,this.labels=[],this.outputs=[];for(const[x,D]of v)this.labels.push(x),this.outputs.push(D)}static interpolationFactor(e,s,c,g){let v=0;if("exponential"===e.name)v=tr(s,e.base,c,g);else if("linear"===e.name)v=tr(s,1,c,g);else if("cubic-bezier"===e.name){const x=e.controlPoints;v=new Ne(x[0],x[1],x[2],x[3]).solve(tr(s,1,c,g))}return v}static parse(e,s){let[c,g,v,...x]=e;if(!Array.isArray(g)||0===g.length)return s.error("Expected an interpolation type expression.",1);if("linear"===g[0])g={name:"linear"};else if("exponential"===g[0]){const k=g[1];if("number"!=typeof k)return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:k}}else{if("cubic-bezier"!==g[0])return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const k=g.slice(1);if(4!==k.length||k.some(j=>"number"!=typeof j||j<0||j>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:k}}}if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,En),!v)return null;const D=[];let S=null;"interpolate-hcl"===c||"interpolate-lab"===c?S=or:s.expectedType&&"value"!==s.expectedType.kind&&(S=s.expectedType);for(let k=0;k<x.length;k+=2){const j=x[k],Y=x[k+1],J=k+3,ae=k+4;if("number"!=typeof j)return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(D.length&&D[D.length-1][0]>=j)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);const pe=s.parse(Y,ae,S);if(!pe)return null;S=S||pe.type,D.push([j,pe])}return"number"===S.kind||"color"===S.kind||"array"===S.kind&&"number"===S.itemType.kind&&"number"==typeof S.N?new di(S,c,g,v,D):s.error(`Type ${Yi(S)} is not interpolatable.`)}evaluate(e){const s=this.labels,c=this.outputs;if(1===s.length)return c[0].evaluate(e);const g=this.input.evaluate(e);if(g<=s[0])return c[0].evaluate(e);const v=s.length;if(g>=s[v-1])return c[v-1].evaluate(e);const x=ls(s,g),D=di.interpolationFactor(this.interpolation,g,s[x],s[x+1]),S=c[x].evaluate(e),k=c[x+1].evaluate(e);return"interpolate"===this.operator?xa[this.type.kind.toLowerCase()](S,k,D):"interpolate-hcl"===this.operator?er.reverse(er.interpolate(er.forward(S),er.forward(k),D)):ar.reverse(ar.interpolate(ar.forward(S),ar.forward(k),D))}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,e,this.input.serialize()];for(let c=0;c<this.labels.length;c++)s.push(this.labels[c],this.outputs[c].serialize());return s}}function tr(o,e,s,c){const g=c-s,v=o-s;return 0===g?0:1===e?v/g:(Math.pow(e,v)-1)/(Math.pow(e,g)-1)}class Ui{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let c=null;const g=s.expectedType;g&&"value"!==g.kind&&(c=g);const v=[];for(const D of e.slice(1)){const S=s.parse(D,1+v.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,v.push(S)}const x=g&&v.some(D=>Jo(g,D.type));return new Ui(x?pi:c,v)}evaluate(e){let s,c=null,g=0;for(const v of this.args)if(g++,c=v.evaluate(e),c&&c instanceof Xr&&!c.available&&(s||(s=c.name),c=null,g===this.args.length&&(c=s)),null!==c)break;return c}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class ti{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const c=[];for(let v=1;v<e.length-1;v+=2){const x=e[v];if("string"!=typeof x)return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const D=s.parse(e[v+1],v+1);if(!D)return null;c.push([x,D])}const g=s.parse(e[e.length-1],e.length-1,s.expectedType,c);return g?new ti(c,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[s,c]of this.bindings)e.push(s,c.serialize());return e.push(this.result.serialize()),e}}class es{constructor(e,s,c){this.type=e,this.index=s,this.input=c}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=s.parse(e[1],1,En),g=s.parse(e[2],2,dr(s.expectedType||pi));return c&&g?new es(g.type.itemType,c,g):null}evaluate(e){const s=this.index.evaluate(e),c=this.input.evaluate(e);if(s<0)throw new Mr(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new Mr(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new Mr(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Go{constructor(e,s){this.type=ui,this.needle=e,this.haystack=s}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=s.parse(e[1],1,pi),g=s.parse(e[2],2,pi);return c&&g?yr(c.type,[ui,ei,En,rr,pi])?new Go(c,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yi(c.type)} instead`):null}evaluate(e){const s=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!c)return!1;if(!Kr(s,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${Yi(xr(s))} instead.`);if(!Kr(c,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${Yi(xr(c))} instead.`);return c.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class aa{constructor(e,s,c){this.type=En,this.needle=e,this.haystack=s,this.fromIndex=c}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=s.parse(e[1],1,pi),g=s.parse(e[2],2,pi);if(!c||!g)return null;if(!yr(c.type,[ui,ei,En,rr,pi]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yi(c.type)} instead`);if(4===e.length){const v=s.parse(e[3],3,En);return v?new aa(c,g,v):null}return new aa(c,g)}evaluate(e){const s=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!Kr(s,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${Yi(xr(s))} instead.`);if(!Kr(c,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${Yi(xr(c))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(e);return c.indexOf(s,g)}return c.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Bs{constructor(e,s,c,g,v,x){this.inputType=e,this.type=s,this.input=c,this.cases=g,this.outputs=v,this.otherwise=x}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return s.error("Expected an even number of arguments.");let c,g;s.expectedType&&"value"!==s.expectedType.kind&&(g=s.expectedType);const v={},x=[];for(let k=2;k<e.length-1;k+=2){let j=e[k];const Y=e[k+1];Array.isArray(j)||(j=[j]);const J=s.concat(k);if(0===j.length)return J.error("Expected at least one branch label.");for(const pe of j){if("number"!=typeof pe&&"string"!=typeof pe)return J.error("Branch labels must be numbers or strings.");if("number"==typeof pe&&Math.abs(pe)>Number.MAX_SAFE_INTEGER)return J.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof pe&&Math.floor(pe)!==pe)return J.error("Numeric branch labels must be integer values.");if(c){if(J.checkSubtype(c,xr(pe)))return null}else c=xr(pe);if(void 0!==v[String(pe)])return J.error("Branch labels must be unique.");v[String(pe)]=x.length}const ae=s.parse(Y,k,g);if(!ae)return null;g=g||ae.type,x.push(ae)}const D=s.parse(e[1],1,pi);if(!D)return null;const S=s.parse(e[e.length-1],e.length-1,g);return S?"value"!==D.type.kind&&s.concat(1).checkSubtype(c,D.type)?null:new Bs(c,g,D,v,x,S):null}evaluate(e){const s=this.input.evaluate(e);return(xr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),c=[],g={};for(const x of s){const D=g[this.cases[x]];void 0===D?(g[this.cases[x]]=c.length,c.push([this.cases[x],[x]])):c[D][1].push(x)}const v=x=>"number"===this.inputType.kind?Number(x):x;for(const[x,D]of c)e.push(1===D.length?v(D[0]):D.map(v)),e.push(this.outputs[x].serialize());return e.push(this.otherwise.serialize()),e}}class la{constructor(e,s,c){this.type=e,this.branches=s,this.otherwise=c}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&"value"!==s.expectedType.kind&&(c=s.expectedType);const g=[];for(let x=1;x<e.length-1;x+=2){const D=s.parse(e[x],x,ui);if(!D)return null;const S=s.parse(e[x+1],x+1,c);if(!S)return null;g.push([D,S]),c=c||S.type}const v=s.parse(e[e.length-1],e.length-1,c);return v?new la(c,g,v):null}evaluate(e){for(const[s,c]of this.branches)if(s.evaluate(e))return c.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,c]of this.branches)e(s),e(c);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class Ks{constructor(e,s,c,g){this.type=e,this.input=s,this.beginIndex=c,this.endIndex=g}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=s.parse(e[1],1,pi),g=s.parse(e[2],2,En);if(!c||!g)return null;if(!yr(c.type,[dr(pi),ei,pi]))return s.error(`Expected first argument to be of type array or string, but found ${Yi(c.type)} instead`);if(4===e.length){const v=s.parse(e[3],3,En);return v?new Ks(c.type,c,g,v):null}return new Ks(c.type,c,g)}evaluate(e){const s=this.input.evaluate(e),c=this.beginIndex.evaluate(e);if(!Kr(s,["string","array"]))throw new Mr(`Expected first argument to be of type array or string, but found ${Yi(xr(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(e);return s.slice(c,g)}return s.slice(c)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function el(o,e){return"=="===o||"!="===o?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function te(o,e,s,c){return 0===c.compare(e,s)}function N(o,e,s){const c="=="!==o&&"!="!==o;return class rC{constructor(v,x,D){this.type=ui,this.lhs=v,this.rhs=x,this.collator=D,this.hasUntypedArgument="value"===v.type.kind||"value"===x.type.kind}static parse(v,x){if(3!==v.length&&4!==v.length)return x.error("Expected two or three arguments.");const D=v[0];let S=x.parse(v[1],1,pi);if(!S)return null;if(!el(D,S.type))return x.concat(1).error(`"${D}" comparisons are not supported for type '${Yi(S.type)}'.`);let k=x.parse(v[2],2,pi);if(!k)return null;if(!el(D,k.type))return x.concat(2).error(`"${D}" comparisons are not supported for type '${Yi(k.type)}'.`);if(S.type.kind!==k.type.kind&&"value"!==S.type.kind&&"value"!==k.type.kind)return x.error(`Cannot compare types '${Yi(S.type)}' and '${Yi(k.type)}'.`);c&&("value"===S.type.kind&&"value"!==k.type.kind?S=new fr(k.type,[S]):"value"!==S.type.kind&&"value"===k.type.kind&&(k=new fr(S.type,[k])));let j=null;if(4===v.length){if("string"!==S.type.kind&&"string"!==k.type.kind&&"value"!==S.type.kind&&"value"!==k.type.kind)return x.error("Cannot use collator to compare non-string types.");if(j=x.parse(v[3],3,Gs),!j)return null}return new rC(S,k,j)}evaluate(v){const x=this.lhs.evaluate(v),D=this.rhs.evaluate(v);if(c&&this.hasUntypedArgument){const S=xr(x),k=xr(D);if(S.kind!==k.kind||"string"!==S.kind&&"number"!==S.kind)throw new Mr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=xr(x),k=xr(D);if("string"!==S.kind||"string"!==k.kind)return e(v,x,D)}return this.collator?s(v,x,D,this.collator.evaluate(v)):e(v,x,D)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const G=N("==",function(o,e,s){return e===s},te),Ee=N("!=",function(o,e,s){return e!==s},function(o,e,s,c){return!te(0,e,s,c)}),kt=N("<",function(o,e,s){return e<s},function(o,e,s,c){return c.compare(e,s)<0}),Wn=N(">",function(o,e,s){return e>s},function(o,e,s,c){return c.compare(e,s)>0}),Zr=N("<=",function(o,e,s){return e<=s},function(o,e,s,c){return c.compare(e,s)<=0}),Do=N(">=",function(o,e,s){return e>=s},function(o,e,s,c){return c.compare(e,s)>=0});class ro{constructor(e,s,c,g,v){this.type=ei,this.number=e,this.locale=s,this.currency=c,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(e,s){if(3!==e.length)return s.error("Expected two arguments.");const c=s.parse(e[1],1,En);if(!c)return null;const g=e[2];if("object"!=typeof g||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=s.parse(g.locale,1,ei),!v))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,ei),!x))return null;let D=null;if(g["min-fraction-digits"]&&(D=s.parse(g["min-fraction-digits"],1,En),!D))return null;let S=null;return g["max-fraction-digits"]&&(S=s.parse(g["max-fraction-digits"],1,En),!S)?null:new ro(c,v,x,D,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class xs{constructor(e){this.type=En,this.input=e}static parse(e,s){if(2!==e.length)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const c=s.parse(e[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?s.error(`Expected argument of type string or array, but found ${Yi(c.type)} instead.`):new xs(c):null}evaluate(e){const s=this.input.evaluate(e);if("string"==typeof s||Array.isArray(s))return s.length;throw new Mr(`Expected value to be of type string or array, but found ${Yi(xr(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(s=>{e.push(s.serialize())}),e}}const cs={"==":G,"!=":Ee,">":Wn,"<":kt,">=":Do,"<=":Zr,array:fr,at:es,boolean:fr,case:la,coalesce:Ui,collator:Zs,format:Va,image:ga,in:Go,"index-of":aa,interpolate:di,"interpolate-hcl":di,"interpolate-lab":di,length:xs,let:ti,literal:io,match:Bs,number:fr,"number-format":ro,object:fr,slice:Ks,step:Fs,string:fr,"to-boolean":as,"to-color":as,"to-number":as,"to-string":as,var:sa,within:qs};function Wu(o,[e,s,c,g]){e=e.evaluate(o),s=s.evaluate(o),c=c.evaluate(o);const v=g?g.evaluate(o):1,x=Eo(e,s,c,v);if(x)throw new Mr(x);return new fi(e/255*v,s/255*v,c/255*v,v)}function Lc(o,e){return o in e}function bu(o,e){const s=e[o];return void 0===s?null:s}function Xs(o){return{type:o}}function ko(o){return{result:"success",value:o}}function ts(o){return{result:"error",value:o}}function wa(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function tl(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ws(o){return!!o.expression&&o.expression.interpolated}function nr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function xl(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function qu(o){return o}function Yu(o,e){const s="color"===e.type,c=o.stops&&"object"==typeof o.stops[0][0],g=c||!(c||void 0!==o.property),v=o.type||(ws(e)?"exponential":"interval");if(s&&((o=Fn({},o)).stops&&(o.stops=o.stops.map(k=>[k[0],fi.parse(k[1])])),o.default=fi.parse(o.default?o.default:e.default)),o.colorSpace&&"rgb"!==o.colorSpace&&!lr[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,D,S;if("exponential"===v)x=Vr;else if("interval"===v)x=oo;else if("categorical"===v){x=Vl,D=Object.create(null);for(const k of o.stops)D[k[0]]=k[1];S=typeof o.stops[0][0]}else{if("identity"!==v)throw new Error(`Unknown function type "${v}"`);x=Ku}if(c){const k={},j=[];for(let ae=0;ae<o.stops.length;ae++){const pe=o.stops[ae],Pe=pe[0].zoom;void 0===k[Pe]&&(k[Pe]={zoom:Pe,type:o.type,property:o.property,default:o.default,stops:[]},j.push(Pe)),k[Pe].stops.push([pe[0].value,pe[1]])}const Y=[];for(const ae of j)Y.push([k[ae].zoom,Yu(k[ae],e)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:di.interpolationFactor.bind(void 0,J),zoomStops:Y.map(ae=>ae[0]),evaluate:({zoom:ae},pe)=>Vr({stops:Y,base:o.base},e,ae).evaluate(ae,pe)}}if(g){const k="exponential"===v?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:di.interpolationFactor.bind(void 0,k),zoomStops:o.stops.map(j=>j[0]),evaluate:({zoom:j})=>x(o,e,j,D,S)}}return{kind:"source",evaluate(k,j){const Y=j&&j.properties?j.properties[o.property]:void 0;return void 0===Y?Ro(o.default,e.default):x(o,e,Y,D,S)}}}function Ro(o,e,s){return void 0!==o?o:void 0!==e?e:void 0!==s?s:void 0}function Vl(o,e,s,c,g){return Ro(typeof s===g?c[s]:void 0,o.default,e.default)}function oo(o,e,s){if("number"!==nr(s))return Ro(o.default,e.default);const c=o.stops.length;if(1===c||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[c-1][0])return o.stops[c-1][1];const g=ls(o.stops.map(v=>v[0]),s);return o.stops[g][1]}function Vr(o,e,s){const c=void 0!==o.base?o.base:1;if("number"!==nr(s))return Ro(o.default,e.default);const g=o.stops.length;if(1===g||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[g-1][0])return o.stops[g-1][1];const v=ls(o.stops.map(j=>j[0]),s),x=function(j,Y,J,ae){const pe=ae-J,Pe=j-J;return 0===pe?0:1===Y?Pe/pe:(Math.pow(Y,Pe)-1)/(Math.pow(Y,pe)-1)}(s,c,o.stops[v][0],o.stops[v+1][0]),D=o.stops[v][1],S=o.stops[v+1][1];let k=xa[e.type]||qu;if(o.colorSpace&&"rgb"!==o.colorSpace){const j=lr[o.colorSpace];k=(Y,J)=>j.reverse(j.interpolate(j.forward(Y),j.forward(J),x))}return"function"==typeof D.evaluate?{evaluate(...j){const Y=D.evaluate.apply(void 0,j),J=S.evaluate.apply(void 0,j);if(void 0!==Y&&void 0!==J)return k(Y,J,x)}}:k(D,S,x)}function Ku(o,e,s){return"color"===e.type?s=fi.parse(s):"formatted"===e.type?s=Br.fromString(s.toString()):"resolvedImage"===e.type?s=Xr.fromString(s.toString()):nr(s)===e.type||"enum"===e.type&&e.values[s]||(s=void 0),Ro(s,o.default,e.default)}jo.register(cs,{error:[{kind:"error"},[ei],(o,[e])=>{throw new Mr(e.evaluate(o))}],typeof:[ei,[pi],(o,[e])=>Yi(xr(e.evaluate(o)))],"to-rgba":[dr(En,4),[or],(o,[e])=>e.evaluate(o).toArray()],rgb:[or,[En,En,En],Wu],rgba:[or,[En,En,En,En],Wu],has:{type:ui,overloads:[[[ei],(o,[e])=>Lc(e.evaluate(o),o.properties())],[[ei,Lr],(o,[e,s])=>Lc(e.evaluate(o),s.evaluate(o))]]},get:{type:pi,overloads:[[[ei],(o,[e])=>bu(e.evaluate(o),o.properties())],[[ei,Lr],(o,[e,s])=>bu(e.evaluate(o),s.evaluate(o))]]},"feature-state":[pi,[ei],(o,[e])=>bu(e.evaluate(o),o.featureState||{})],properties:[Lr,[],o=>o.properties()],"geometry-type":[ei,[],o=>o.geometryType()],id:[pi,[],o=>o.id()],zoom:[En,[],o=>o.globals.zoom],"heatmap-density":[En,[],o=>o.globals.heatmapDensity||0],"line-progress":[En,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[En,[],o=>o.globals.skyRadialProgress||0],accumulated:[pi,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[En,Xs(En),(o,e)=>{let s=0;for(const c of e)s+=c.evaluate(o);return s}],"*":[En,Xs(En),(o,e)=>{let s=1;for(const c of e)s*=c.evaluate(o);return s}],"-":{type:En,overloads:[[[En,En],(o,[e,s])=>e.evaluate(o)-s.evaluate(o)],[[En],(o,[e])=>-e.evaluate(o)]]},"/":[En,[En,En],(o,[e,s])=>e.evaluate(o)/s.evaluate(o)],"%":[En,[En,En],(o,[e,s])=>e.evaluate(o)%s.evaluate(o)],ln2:[En,[],()=>Math.LN2],pi:[En,[],()=>Math.PI],e:[En,[],()=>Math.E],"^":[En,[En,En],(o,[e,s])=>Math.pow(e.evaluate(o),s.evaluate(o))],sqrt:[En,[En],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[En,[En],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[En,[En],(o,[e])=>Math.log(e.evaluate(o))],log2:[En,[En],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[En,[En],(o,[e])=>Math.sin(e.evaluate(o))],cos:[En,[En],(o,[e])=>Math.cos(e.evaluate(o))],tan:[En,[En],(o,[e])=>Math.tan(e.evaluate(o))],asin:[En,[En],(o,[e])=>Math.asin(e.evaluate(o))],acos:[En,[En],(o,[e])=>Math.acos(e.evaluate(o))],atan:[En,[En],(o,[e])=>Math.atan(e.evaluate(o))],min:[En,Xs(En),(o,e)=>Math.min(...e.map(s=>s.evaluate(o)))],max:[En,Xs(En),(o,e)=>Math.max(...e.map(s=>s.evaluate(o)))],abs:[En,[En],(o,[e])=>Math.abs(e.evaluate(o))],round:[En,[En],(o,[e])=>{const s=e.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[En,[En],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[En,[En],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[ui,[ei,pi],(o,[e,s])=>o.properties()[e.value]===s.value],"filter-id-==":[ui,[pi],(o,[e])=>o.id()===e.value],"filter-type-==":[ui,[ei],(o,[e])=>o.geometryType()===e.value],"filter-<":[ui,[ei,pi],(o,[e,s])=>{const c=o.properties()[e.value],g=s.value;return typeof c==typeof g&&c<g}],"filter-id-<":[ui,[pi],(o,[e])=>{const s=o.id(),c=e.value;return typeof s==typeof c&&s<c}],"filter->":[ui,[ei,pi],(o,[e,s])=>{const c=o.properties()[e.value],g=s.value;return typeof c==typeof g&&c>g}],"filter-id->":[ui,[pi],(o,[e])=>{const s=o.id(),c=e.value;return typeof s==typeof c&&s>c}],"filter-<=":[ui,[ei,pi],(o,[e,s])=>{const c=o.properties()[e.value],g=s.value;return typeof c==typeof g&&c<=g}],"filter-id-<=":[ui,[pi],(o,[e])=>{const s=o.id(),c=e.value;return typeof s==typeof c&&s<=c}],"filter->=":[ui,[ei,pi],(o,[e,s])=>{const c=o.properties()[e.value],g=s.value;return typeof c==typeof g&&c>=g}],"filter-id->=":[ui,[pi],(o,[e])=>{const s=o.id(),c=e.value;return typeof s==typeof c&&s>=c}],"filter-has":[ui,[pi],(o,[e])=>e.value in o.properties()],"filter-has-id":[ui,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[ui,[dr(ei)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[ui,[dr(pi)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[ui,[ei,dr(pi)],(o,[e,s])=>s.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[ui,[ei,dr(pi)],(o,[e,s])=>function(c,g,v,x){for(;v<=x;){const D=v+x>>1;if(g[D]===c)return!0;g[D]>c?x=D-1:v=D+1}return!1}(o.properties()[e.value],s.value,0,s.value.length-1)],all:{type:ui,overloads:[[[ui,ui],(o,[e,s])=>e.evaluate(o)&&s.evaluate(o)],[Xs(ui),(o,e)=>{for(const s of e)if(!s.evaluate(o))return!1;return!0}]]},any:{type:ui,overloads:[[[ui,ui],(o,[e,s])=>e.evaluate(o)||s.evaluate(o)],[Xs(ui),(o,e)=>{for(const s of e)if(s.evaluate(o))return!0;return!1}]]},"!":[ui,[ui],(o,[e])=>!e.evaluate(o)],"is-supported-script":[ui,[ei],(o,[e])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(e.evaluate(o))}],upcase:[ei,[ei],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[ei,[ei],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[ei,Xs(pi),(o,e)=>e.map(s=>Hs(s.evaluate(o))).join("")],"resolved-locale":[ei,[Gs],(o,[e])=>e.evaluate(o).resolvedLocale()]});class Qs{constructor(e,s){var c;this.expression=e,this._warningHistory={},this._evaluator=new $s,this._defaultValue=s?"color"===(c=s).type&&xl(c.default)?new fi(0,0,0,0):"color"===c.type?fi.parse(c.default)||null:void 0===c.default?null:c.default:null,this._enumValues=s&&"enum"===s.type?s.values:null}evaluateWithoutErrorHandling(e,s,c,g,v,x){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(e,s,c,g,v,x){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const D=this.expression.evaluate(this._evaluator);if(null==D||"number"==typeof D&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Ho(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in cs}function Ga(o,e){const s=new Ys(cs,[],e?function(g){const v={color:or,string:ei,number:En,enum:ei,boolean:ui,formatted:Xi,resolvedImage:wo};return"array"===g.type?dr(v[g.value]||pi,g.length):v[g.type]}(e):void 0),c=s.parse(o,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return c?ko(new Qs(c,e)):ts(s.errors)}class Tr{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent="constant"!==e&&!Ni(s.expression)}evaluateWithoutErrorHandling(e,s,c,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(e,s,c,g,v,x)}evaluate(e,s,c,g,v,x){return this._styleExpression.evaluate(e,s,c,g,v,x)}}class wl{constructor(e,s,c,g){this.kind=e,this.zoomStops=c,this._styleExpression=s,this.isStateDependent="camera"!==e&&!Ni(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(e,s,c,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(e,s,c,g,v,x)}evaluate(e,s,c,g,v,x){return this._styleExpression.evaluate(e,s,c,g,v,x)}interpolationFactor(e,s,c){return this.interpolationType?di.interpolationFactor(this.interpolationType,e,s,c):0}}function Bc(o,e){if("error"===(o=Ga(o,e)).result)return o;const s=o.value.expression,c=Rs(s);if(!c&&!wa(e))return ts([new Ci("","data expressions not supported")]);const g=Qr(s,["zoom"]);if(!g&&!tl(e))return ts([new Ci("","zoom expressions not supported")]);const v=Ur(s);return v||g?v instanceof Ci?ts([v]):v instanceof di&&!ws(e)?ts([new Ci("",'"interpolate" expressions cannot be used with this property')]):ko(v?new wl(c?"camera":"composite",o.value,v.labels,v instanceof di?v.interpolation:void 0):new Tr(c?"constant":"source",o.value)):ts([new Ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Js{constructor(e,s){this._parameters=e,this._specification=s,Fn(this,Yu(this._parameters,this._specification))}static deserialize(e){return new Js(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ur(o){let e=null;if(o instanceof ti)e=Ur(o.result);else if(o instanceof Ui){for(const s of o.args)if(e=Ur(s),e)break}else(o instanceof Fs||o instanceof di)&&o.input instanceof jo&&"zoom"===o.input.name&&(e=o);return e instanceof Ci||o.eachChild(s=>{const c=Ur(s);c instanceof Ci?e=c:!e&&c?e=new Ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&c&&e!==c&&(e=new Ci("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function us(o){const e=o.key,s=o.value,c=o.valueSpec||{},g=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let D=[];const S=nr(s);if("object"!==S)return[new We(e,s,`object expected, ${S} found`)];for(const k in s){const j=k.split(".")[0],Y=c[j]||c["*"];let J;if(g[j])J=g[j];else if(c[j])J=Mo;else if(g["*"])J=g["*"];else{if(!c["*"]){D.push(new We(e,s[k],`unknown property "${k}"`));continue}J=Mo}D=D.concat(J({key:(e&&`${e}.`)+k,value:s[k],valueSpec:Y,style:v,styleSpec:x,object:s,objectKey:k},s))}for(const k in c)g[k]||c[k].required&&void 0===c[k].default&&void 0===s[k]&&D.push(new We(e,s,`missing required property "${k}"`));return D}function co(o){const e=o.value,s=o.valueSpec,c=o.style,g=o.styleSpec,v=o.key,x=o.arrayElementValidator||Mo;if("array"!==nr(e))return[new We(v,e,`array expected, ${nr(e)} found`)];if(s.length&&e.length!==s.length)return[new We(v,e,`array length ${s.length} expected, length ${e.length} found`)];if(s["min-length"]&&e.length<s["min-length"])return[new We(v,e,`array length at least ${s["min-length"]} expected, length ${e.length} found`)];let D={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum};g.$version<7&&(D.function=s.function),"object"===nr(s.value)&&(D=s.value);let S=[];for(let k=0;k<e.length;k++)S=S.concat(x({array:e,arrayIndex:k,value:e[k],valueSpec:D,style:c,styleSpec:g,key:`${v}[${k}]`}));return S}function Ns(o){const e=o.key,s=o.value,c=o.valueSpec;let g=nr(s);if("number"===g&&s!=s&&(g="NaN"),"number"!==g)return[new We(e,s,`number expected, ${g} found`)];if("minimum"in c){let v=c.minimum;if("array"===nr(c.minimum)&&(v=c.minimum[o.arrayIndex]),s<v)return[new We(e,s,`${s} is less than the minimum value ${v}`)]}if("maximum"in c){let v=c.maximum;if("array"===nr(c.maximum)&&(v=c.maximum[o.arrayIndex]),s>v)return[new We(e,s,`${s} is greater than the maximum value ${v}`)]}return[]}function wr(o){const e=o.valueSpec,s=Gn(o.value.type);let c,g,v,x={};const D="categorical"!==s&&void 0===o.value.property,S=!D,k="array"===nr(o.value.stops)&&"array"===nr(o.value.stops[0])&&"object"===nr(o.value.stops[0][0]),j=us({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ae){if("identity"===s)return[new We(ae.key,ae.value,'identity function may not have a "stops" property')];let pe=[];const Pe=ae.value;return pe=pe.concat(co({key:ae.key,value:Pe,valueSpec:ae.valueSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:Y})),"array"===nr(Pe)&&0===Pe.length&&pe.push(new We(ae.key,Pe,"array must have at least one stop")),pe},default:function(ae){return Mo({key:ae.key,value:ae.value,valueSpec:e,style:ae.style,styleSpec:ae.styleSpec})}}});return"identity"===s&&D&&j.push(new We(o.key,o.value,'missing required property "property"')),"identity"===s||o.value.stops||j.push(new We(o.key,o.value,'missing required property "stops"')),"exponential"===s&&o.valueSpec.expression&&!ws(o.valueSpec)&&j.push(new We(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(S&&!wa(o.valueSpec)?j.push(new We(o.key,o.value,"property functions not supported")):D&&!tl(o.valueSpec)&&j.push(new We(o.key,o.value,"zoom functions not supported"))),"categorical"!==s&&!k||void 0!==o.value.property||j.push(new We(o.key,o.value,'"property" property is required')),j;function Y(ae){let pe=[];const Pe=ae.value,Xe=ae.key;if("array"!==nr(Pe))return[new We(Xe,Pe,`array expected, ${nr(Pe)} found`)];if(2!==Pe.length)return[new We(Xe,Pe,`array length 2 expected, length ${Pe.length} found`)];if(k){if("object"!==nr(Pe[0]))return[new We(Xe,Pe,`object expected, ${nr(Pe[0])} found`)];if(void 0===Pe[0].zoom)return[new We(Xe,Pe,"object stop key must have zoom")];if(void 0===Pe[0].value)return[new We(Xe,Pe,"object stop key must have value")];if(v&&v>Gn(Pe[0].zoom))return[new We(Xe,Pe[0].zoom,"stop zoom values must appear in ascending order")];Gn(Pe[0].zoom)!==v&&(v=Gn(Pe[0].zoom),g=void 0,x={}),pe=pe.concat(us({key:`${Xe}[0]`,value:Pe[0],valueSpec:{zoom:{}},style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:Ns,value:J}}))}else pe=pe.concat(J({key:`${Xe}[0]`,value:Pe[0],valueSpec:{},style:ae.style,styleSpec:ae.styleSpec},Pe));return Ho(An(Pe[1]))?pe.concat([new We(`${Xe}[1]`,Pe[1],"expressions are not allowed in function stops.")]):pe.concat(Mo({key:`${Xe}[1]`,value:Pe[1],valueSpec:e,style:ae.style,styleSpec:ae.styleSpec}))}function J(ae,pe){const Pe=nr(ae.value),Xe=Gn(ae.value),ht=null!==ae.value?ae.value:pe;if(c){if(Pe!==c)return[new We(ae.key,ht,`${Pe} stop domain type must match previous stop domain type ${c}`)]}else c=Pe;if("number"!==Pe&&"string"!==Pe&&"boolean"!==Pe)return[new We(ae.key,ht,"stop domain value must be a number, string, or boolean")];if("number"!==Pe&&"categorical"!==s){let Et=`number expected, ${Pe} found`;return wa(e)&&void 0===s&&(Et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(ae.key,ht,Et)]}return"categorical"!==s||"number"!==Pe||isFinite(Xe)&&Math.floor(Xe)===Xe?"categorical"!==s&&"number"===Pe&&void 0!==g&&Xe<g?[new We(ae.key,ht,"stop domain values must appear in ascending order")]:(g=Xe,"categorical"===s&&Xe in x?[new We(ae.key,ht,"stop domain values must be unique")]:(x[Xe]=!0,[])):[new We(ae.key,ht,`integer expected, found ${Xe}`)]}}function zs(o){const e=("property"===o.expressionContext?Bc:Ga)(An(o.value),o.valueSpec);if("error"===e.result)return e.value.map(c=>new We(`${o.key}${c.key}`,o.value,c.message));const s=e.value.expression||e.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!s.outputDefined())return[new We(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!Ni(s))return[new We(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!Ni(s))return[new We(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!Qr(s,["zoom","feature-state"]))return[new We(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Rs(s))return[new We(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fo(o){const e=o.key,s=o.value,c=o.valueSpec,g=[];return Array.isArray(c.values)?-1===c.values.indexOf(Gn(s))&&g.push(new We(e,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):-1===Object.keys(c.values).indexOf(Gn(s))&&g.push(new We(e,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function mo(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!mo(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Ul={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Cs(o){if(null==o)return{filter:()=>!0,needGeometry:!1};mo(o)||(o=ea(o));const e=Ga(o,Ul);if("error"===e.result)throw new Error(e.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,c,g)=>e.value.evaluate(s,c,{},g),needGeometry:ca(o)}}function vr(o,e){return o<e?-1:o>e?1:0}function ca(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let e=1;e<o.length;e++)if(ca(o[e]))return!0;return!1}function ea(o){if(!o)return!0;const e=o[0];return o.length<=1?"any"!==e:"=="===e?ta(o[1],o[2],"=="):"!="===e?Ha(ta(o[1],o[2],"==")):"<"===e||">"===e||"<="===e||">="===e?ta(o[1],o[2],e):"any"===e?(s=o.slice(1),["any"].concat(s.map(ea))):"all"===e?["all"].concat(o.slice(1).map(ea)):"none"===e?["all"].concat(o.slice(1).map(ea).map(Ha)):"in"===e?Ca(o[1],o.slice(2)):"!in"===e?Ha(Ca(o[1],o.slice(2))):"has"===e?so(o[1]):"!has"===e?Ha(so(o[1])):"within"!==e||o;var s}function ta(o,e,s){switch(o){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,o,e]}}function Ca(o,e){if(0===e.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",o,["literal",e.sort(vr)]]:["filter-in-small",o,["literal",e]]}}function so(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ha(o){return["!",o]}function Wr(o){return mo(An(o.value))?zs(Fn({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):uo(o)}function uo(o){const e=o.value,s=o.key;if("array"!==nr(e))return[new We(s,e,`array expected, ${nr(e)} found`)];const c=o.styleSpec;let g,v=[];if(e.length<1)return[new We(s,e,"filter array must have at least 1 element")];switch(v=v.concat(Fo({key:`${s}[0]`,value:e[0],valueSpec:c.filter_operator,style:o.style,styleSpec:o.styleSpec})),Gn(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Gn(e[1])&&v.push(new We(s,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&v.push(new We(s,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(g=nr(e[1]),"string"!==g&&v.push(new We(`${s}[1]`,e[1],`string expected, ${g} found`)));for(let x=2;x<e.length;x++)g=nr(e[x]),"$type"===Gn(e[1])?v=v.concat(Fo({key:`${s}[${x}]`,value:e[x],valueSpec:c.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==g&&"number"!==g&&"boolean"!==g&&v.push(new We(`${s}[${x}]`,e[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<e.length;x++)v=v.concat(uo({key:`${s}[${x}]`,value:e[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=nr(e[1]),2!==e.length?v.push(new We(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==g&&v.push(new We(`${s}[1]`,e[1],`string expected, ${g} found`));break;case"within":g=nr(e[1]),2!==e.length?v.push(new We(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==g&&v.push(new We(`${s}[1]`,e[1],`object expected, ${g} found`))}return v}function jl(o,e){const s=o.key,c=o.style,g=o.styleSpec,v=o.value,x=o.objectKey,D=g[`${e}_${o.layerType}`];if(!D)return[];const S=x.match(/^(.*)-transition$/);if("paint"===e&&S&&D[S[1]]&&D[S[1]].transition)return Mo({key:s,value:v,valueSpec:g.transition,style:c,styleSpec:g});const k=o.valueSpec||D[x];if(!k)return[new We(s,v,`unknown property "${x}"`)];let j;if("string"===nr(v)&&wa(k)&&!k.tokens&&(j=/^{([^}]+)}$/.exec(v)))return[new We(s,v,`"${x}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const Y=[];return"symbol"===o.layerType&&("text-field"===x&&c&&!c.glyphs&&Y.push(new We(s,v,'use of "text-field" requires a style "glyphs" property')),"text-font"===x&&xl(An(v))&&"identity"===Gn(v.type)&&Y.push(new We(s,v,'"text-font" does not support identity functions'))),Y.concat(Mo({key:o.key,value:v,valueSpec:k,style:c,styleSpec:g,expressionContext:"property",propertyType:e,propertyKey:x}))}function Lo(o){return jl(o,"paint")}function Cl(o){return jl(o,"layout")}function Ai(o){let e=[];const s=o.value,c=o.key,g=o.style,v=o.styleSpec;s.type||s.ref||e.push(new We(c,s,'either "type" or "ref" is required'));let x=Gn(s.type);const D=Gn(s.ref);if(s.id){const S=Gn(s.id);for(let k=0;k<o.arrayIndex;k++){const j=g.layers[k];Gn(j.id)===S&&e.push(new We(c,s.id,`duplicate layer id "${s.id}", previously used at line ${j.id.__line__}`))}}if("ref"in s){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in s&&e.push(new We(c,s[k],`"${k}" is prohibited for ref layers`))}),g.layers.forEach(k=>{Gn(k.id)===D&&(S=k)}),S?S.ref?e.push(new We(c,s.ref,"ref cannot reference another ref layer")):x=Gn(S.type):e.push(new We(c,s.ref,`ref layer "${D}" not found`))}else if("background"!==x&&"sky"!==x)if(s.source){const S=g.sources&&g.sources[s.source],k=S&&Gn(S.type);S?"vector"===k&&"raster"===x?e.push(new We(c,s.source,`layer "${s.id}" requires a raster source`)):"raster"===k&&"raster"!==x?e.push(new We(c,s.source,`layer "${s.id}" requires a vector source`)):"vector"!==k||s["source-layer"]?"raster-dem"===k&&"hillshade"!==x?e.push(new We(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==x||!s.paint||!s.paint["line-gradient"]||"geojson"===k&&S.lineMetrics||e.push(new We(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new We(c,s,`layer "${s.id}" must specify a "source-layer"`)):e.push(new We(c,s.source,`source "${s.source}" not found`))}else e.push(new We(c,s,'missing required property "source"'));return e=e.concat(us({key:c,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mo({key:`${c}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:s,objectKey:"type"}),filter:Wr,layout:S=>us({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":k=>Cl(Fn({layerType:x},k))}}),paint:S=>us({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":k=>Lo(Fn({layerType:x},k))}})}})),e}function $a(o){const e=o.value,s=o.key,c=nr(e);return"string"!==c?[new We(s,e,`string expected, ${c} found`)]:[]}const nl={promoteId:function({key:o,value:e}){if("string"===nr(e))return $a({key:o,value:e});{const s=[];for(const c in e)s.push(...$a({key:`${o}.${c}`,value:e[c]}));return s}}};function il(o){const e=o.value,s=o.key,c=o.styleSpec,g=o.style;if(!e.type)return[new We(s,e,'"type" is required')];const v=Gn(e.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=us({key:s,value:e,valueSpec:c[`source_${v.replace("-","_")}`],style:o.style,styleSpec:c,objectElementValidators:nl}),x;case"geojson":if(x=us({key:s,value:e,valueSpec:c.source_geojson,style:g,styleSpec:c,objectElementValidators:nl}),e.cluster)for(const D in e.clusterProperties){const[S,k]=e.clusterProperties[D],j="string"==typeof S?[S,["accumulated"],["get",D]]:S;x.push(...zs({key:`${s}.${D}.map`,value:k,expressionContext:"cluster-map"})),x.push(...zs({key:`${s}.${D}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return x;case"video":return us({key:s,value:e,valueSpec:c.source_video,style:g,styleSpec:c});case"image":return us({key:s,value:e,valueSpec:c.source_image,style:g,styleSpec:c});case"canvas":return[new We(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fo({key:`${s}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,styleSpec:c})}}function fc(o){const e=o.value,s=o.styleSpec,c=s.light,g=o.style;let v=[];const x=nr(e);if(void 0===e)return v;if("object"!==x)return v=v.concat([new We("light",e,`object expected, ${x} found`)]),v;for(const D in e){const S=D.match(/^(.*)-transition$/);v=v.concat(S&&c[S[1]]&&c[S[1]].transition?Mo({key:D,value:e[D],valueSpec:s.transition,style:g,styleSpec:s}):c[D]?Mo({key:D,value:e[D],valueSpec:c[D],style:g,styleSpec:s}):[new We(D,e[D],`unknown property "${D}"`)])}return v}function El(o){const e=o.value,s=o.key,c=o.style,g=o.styleSpec,v=g.terrain;let x=[];const D=nr(e);if(void 0===e)return x;if("object"!==D)return x=x.concat([new We("terrain",e,`object expected, ${D} found`)]),x;for(const S in e){const k=S.match(/^(.*)-transition$/);x=x.concat(k&&v[k[1]]&&v[k[1]].transition?Mo({key:S,value:e[S],valueSpec:g.transition,style:c,styleSpec:g}):v[S]?Mo({key:S,value:e[S],valueSpec:v[S],style:c,styleSpec:g}):[new We(S,e[S],`unknown property "${S}"`)])}if(e.source){const S=c.sources&&c.sources[e.source],k=S&&Gn(S.type);S?"raster-dem"!==k&&x.push(new We(s,e.source,`terrain cannot be used with a source of type ${k}, it only be used with a "raster-dem" source type`)):x.push(new We(s,e.source,`source "${e.source}" not found`))}else x.push(new We(s,e,'terrain is missing required property "source"'));return x}function mc(o){const e=o.value,s=o.style,c=o.styleSpec,g=c.fog;let v=[];const x=nr(e);if(void 0===e)return v;if("object"!==x)return v=v.concat([new We("fog",e,`object expected, ${x} found`)]),v;for(const D in e){const S=D.match(/^(.*)-transition$/);v=v.concat(S&&g[S[1]]&&g[S[1]].transition?Mo({key:D,value:e[D],valueSpec:c.transition,style:s,styleSpec:c}):g[D]?Mo({key:D,value:e[D],valueSpec:g[D],style:s,styleSpec:c}):[new We(D,e[D],`unknown property "${D}"`)])}return v}const rl={"*":()=>[],array:co,boolean:function(o){const e=o.value,s=o.key,c=nr(e);return"boolean"!==c?[new We(s,e,`boolean expected, ${c} found`)]:[]},number:Ns,color:function(o){const e=o.key,s=o.value,c=nr(s);return"string"!==c?[new We(e,s,`color expected, ${c} found`)]:null===Co.parseCSSColor(s)?[new We(e,s,`color expected, "${s}" found`)]:[]},constants:Xt,enum:Fo,filter:Wr,function:wr,layer:Ai,object:us,source:il,light:fc,terrain:El,fog:mc,string:$a,formatted:function(o){return 0===$a(o).length?[]:zs(o)},resolvedImage:function(o){return 0===$a(o).length?[]:zs(o)}};function Mo(o){const e=o.value,s=o.valueSpec,c=o.styleSpec;return s.expression&&xl(Gn(e))?wr(o):s.expression&&Ho(An(e))?zs(o):s.type&&rl[s.type]?rl[s.type](o):us(Fn({},o,{valueSpec:s.type?c[s.type]:s}))}function gc(o){const e=o.value,s=o.key,c=$a(o);return c.length||(-1===e.indexOf("{fontstack}")&&c.push(new We(s,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&c.push(new We(s,e,'"glyphs" url must include a "{range}" token'))),c}function Vs(o,e=ue){let s=[];return s=s.concat(Mo({key:"",value:o,valueSpec:e.$root,styleSpec:e,style:o,objectElementValidators:{glyphs:gc,"*":()=>[]}})),o.constants&&(s=s.concat(Xt({key:"constants",value:o.constants,style:o,styleSpec:e}))),Ea(s)}function Ea(o){return[].concat(o).sort((e,s)=>e.line-s.line)}function ua(o){return function(...e){return Ea(o.apply(this,e))}}Vs.source=ua(il),Vs.light=ua(fc),Vs.terrain=ua(El),Vs.fog=ua(mc),Vs.layer=ua(Ai),Vs.filter=ua(Wr),Vs.paintProperty=ua(Lo),Vs.layoutProperty=ua(Cl);const Jr=Vs,Gl=Jr.light,Hl=Jr.fog,Nc=Jr.paintProperty,xu=Jr.layoutProperty;function $l(o,e){let s=!1;if(e&&e.length)for(const c of e)o.fire(new De(new Error(c.message))),s=!0;return s}var Da=So;function So(o,e,s){var c=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var g=new Int32Array(this.arrayBuffer);o=g[0],this.d=(e=g[1])+2*(s=g[2]);for(var v=0;v<this.d*this.d;v++){var x=g[3+v],D=g[3+v+1];c.push(x===D?null:g.subarray(x,D))}var S=g[3+c.length+1];this.keys=g.subarray(g[3+c.length],S),this.bboxes=g.subarray(S),this.insert=this._insertReadonly}else{this.d=e+2*s;for(var k=0;k<this.d*this.d;k++)c.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=o,this.padding=s,this.scale=e/o,this.uid=0;var j=s/e*o;this.min=-j,this.max=o+j}So.prototype.insert=function(o,e,s,c,g){this._forEachCell(e,s,c,g,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(e),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(g)},So.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},So.prototype._insertCell=function(o,e,s,c,g,v){this.cells[g].push(v)},So.prototype.query=function(o,e,s,c,g){var v=this.min,x=this.max;if(o<=v&&e<=v&&x<=s&&x<=c&&!g)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(o,e,s,c,this._queryCell,D,{},g),D},So.prototype._queryCell=function(o,e,s,c,g,v,x,D){var S=this.cells[g];if(null!==S)for(var k=this.keys,j=this.bboxes,Y=0;Y<S.length;Y++){var J=S[Y];if(void 0===x[J]){var ae=4*J;(D?D(j[ae+0],j[ae+1],j[ae+2],j[ae+3]):o<=j[ae+2]&&e<=j[ae+3]&&s>=j[ae+0]&&c>=j[ae+1])?(x[J]=!0,v.push(k[J])):x[J]=!1}}},So.prototype._forEachCell=function(o,e,s,c,g,v,x,D){for(var S=this._convertToCellCoord(o),k=this._convertToCellCoord(e),j=this._convertToCellCoord(s),Y=this._convertToCellCoord(c),J=S;J<=j;J++)for(var ae=k;ae<=Y;ae++){var pe=this.d*ae+J;if((!D||D(this._convertFromCellCoord(J),this._convertFromCellCoord(ae),this._convertFromCellCoord(J+1),this._convertFromCellCoord(ae+1)))&&g.call(this,o,e,s,c,pe,v,x,D))return}},So.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},So.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},So.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,e=3+this.cells.length+1+1,s=0,c=0;c<this.cells.length;c++)s+=this.cells[c].length;var g=new Int32Array(e+s+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var v=e,x=0;x<o.length;x++){var D=o[x];g[3+x]=v,g.set(D,v),v+=D.length}return g[3+o.length]=v,g.set(this.keys,v),g[3+o.length+1]=v+=this.keys.length,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer};const{ImageData:zc,ImageBitmap:Zl}=Ce,ol={};function Un(o,e,s={}){Object.defineProperty(e,"_classRegistryKey",{value:o,writeable:!1}),ol[o]={klass:e,omit:s.omit||[],shallow:s.shallow||[]}}Un("Object",Object),Da.serialize=function(o,e){const s=o.toArrayBuffer();return e&&e.push(s),{buffer:s}},Da.deserialize=function(o){return new Da(o.buffer)},Un("Grid",Da),Un("Color",fi),Un("Error",Error),Un("ResolvedImage",Xr),Un("StylePropertyFunction",Js),Un("StyleExpression",Qs,{omit:["_evaluator"]}),Un("ZoomDependentExpression",wl),Un("ZoomConstantExpression",Tr),Un("CompoundExpression",jo,{omit:["_evaluate"]});for(const o in cs)cs[o]._classRegistryKey||Un(`Expression_${o}`,cs[o]);function Dl(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function Ml(o){return Zl&&o instanceof Zl}function Wl(o,e){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Dl(o)||Ml(o))return e&&e.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return e&&e.push(s.buffer),s}if(o instanceof zc)return e&&e.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const c of o)s.push(Wl(c,e));return s}if("object"==typeof o){const s=o.constructor,c=s._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");const g=s.serialize?s.serialize(o,e):{};if(!s.serialize){for(const v in o){if(!o.hasOwnProperty(v)||ol[c].omit.indexOf(v)>=0)continue;const x=o[v];g[v]=ol[c].shallow.indexOf(v)>=0?x:Wl(x,e)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==c&&(g.$name=c),g}throw new Error("can't serialize object of type "+typeof o)}function Za(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Dl(o)||Ml(o)||ArrayBuffer.isView(o)||o instanceof zc)return o;if(Array.isArray(o))return o.map(Za);if("object"==typeof o){const e=o.$name||"Object",{klass:s}=ol[e];if(!s)throw new Error(`can't deserialize unregistered class ${e}`);if(s.deserialize)return s.deserialize(o);const c=Object.create(s.prototype);for(const g of Object.keys(o)){if("$name"===g)continue;const v=o[g];c[g]=ol[e].shallow.indexOf(g)>=0?v:Za(v)}return c}throw new Error("can't deserialize object of type "+typeof o)}class Vc{constructor(){this.first=!0}update(e,s){const c=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=c,!0))}}const wu=o=>o>=1536&&o<=1791,F=o=>o>=1872&&o<=1919,O=o=>o>=2208&&o<=2303,P=o=>o>=11904&&o<=12031,Z=o=>o>=12032&&o<=12255,ie=o=>o>=12272&&o<=12287,ve=o=>o>=12288&&o<=12351,Ze=o=>o>=12352&&o<=12447,ct=o=>o>=12448&&o<=12543,nn=o=>o>=12544&&o<=12591,Bn=o=>o>=12704&&o<=12735,Ii=o=>o>=12736&&o<=12783,Qn=o=>o>=12784&&o<=12799,hr=o=>o>=12800&&o<=13055,Nr=o=>o>=13056&&o<=13311,Bo=o=>o>=13312&&o<=19903,$o=o=>o>=19968&&o<=40959,Ma=o=>o>=40960&&o<=42127,ds=o=>o>=42128&&o<=42191,Wa=o=>o>=44032&&o<=55215,hs=o=>o>=63744&&o<=64255,zd=o=>o>=64336&&o<=65023,Vd=o=>o>=65040&&o<=65055,Cr=o=>o>=65072&&o<=65103,ql=o=>o>=65104&&o<=65135,Uc=o=>o>=65136&&o<=65279,Yl=o=>o>=65280&&o<=65519;function Ud(o){for(const e of o)if(jd(e.charCodeAt(0)))return!0;return!1}function Xu(o){for(const e of o)if(!jc(e.charCodeAt(0)))return!1;return!0}function jc(o){return!(wu(o)||F(o)||O(o)||zd(o)||Uc(o))}function jd(o){return!(746!==o&&747!==o&&(o<4352||!(Bn(o)||nn(o)||Cr(o)&&!(o>=65097&&o<=65103)||hs(o)||Nr(o)||P(o)||Ii(o)||!(!ve(o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||Bo(o)||$o(o)||hr(o)||(e=o,e>=12592&&e<=12687)||(e=>e>=43360&&e<=43391)(o)||(e=>e>=55216&&e<=55295)(o)||(e=>e>=4352&&e<=4607)(o)||Wa(o)||Ze(o)||ie(o)||(e=>e>=12688&&e<=12703)(o)||Z(o)||Qn(o)||ct(o)&&12540!==o||!(!Yl(o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!ql(o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||(e=>e>=5120&&e<=5759)(o)||(e=>e>=6320&&e<=6399)(o)||Vd(o)||(e=>e>=19904&&e<=19967)(o)||Ma(o)||ds(o))));var e}function _c(o){return!(jd(o)||(e=o,(s=e)>=128&&s<=255&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(s=>s>=8192&&s<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(s=>s>=8448&&s<=8527)(e)||(s=>s>=8528&&s<=8591)(e)||(s=>s>=8960&&s<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(s=>s>=9216&&s<=9279)(e)&&9251!==e||(s=>s>=9280&&s<=9311)(e)||(s=>s>=9312&&s<=9471)(e)||(s=>s>=9632&&s<=9727)(e)||(s=>s>=9728&&s<=9983)(e)&&!(e>=9754&&e<=9759)||(s=>s>=11008&&s<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ve(e)||ct(e)||(s=>s>=57344&&s<=63743)(e)||Cr(e)||ql(e)||Yl(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e,s}function Gd(o){return o>=1424&&o<=2303||zd(o)||Uc(o)}function Qu(o,e){return!(!e&&Gd(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||(s=o,s>=6016&&s<=6143));var s}function _(o){for(const e of o)if(Gd(e.charCodeAt(0)))return!0;return!1}const t="deferred",d="loading",y="loaded";let w=null,E="unavailable",A=null;const B=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(E="error"),w&&w(o)};function H(){Q.fire(new Fe("pluginStateChange",{pluginStatus:E,pluginURL:A}))}const Q=new Me,se=function(){return E},de=function(){if(E!==t||!A)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");E=d,H(),A&&ee({url:A},o=>{o?B(o):(E=y,H())})},fe={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>E===y||null!=fe.applyArabicShaping,isLoading:()=>E===d,setState(o){E=o.pluginStatus,A=o.pluginURL},isParsed:()=>null!=fe.applyArabicShaping&&null!=fe.processBidirectionalText&&null!=fe.processStyledBidirectionalText,getPluginURL:()=>A};class be{constructor(e,s){this.zoom=e,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vc,this.transition={})}isSupportedScript(e){return function(s,c){for(const g of s)if(!Qu(g.charCodeAt(0),c))return!1;return!0}(e,fe.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,s=e-Math.floor(e),c=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class Ie{constructor(e,s){this.property=e,this.value=s,this.expression=function(c,g){if(xl(c))return new Js(c,g);if(Ho(c)){const v=Bc(c,g);if("error"===v.result)throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=c;return"string"==typeof c&&"color"===g.type&&(v=fi.parse(c)),{kind:"constant",evaluate:()=>v}}}(void 0===s?e.specification.default:s,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,s,c){return this.property.possiblyEvaluate(this,e,s,c)}}class Re{constructor(e){this.property=e,this.value=new Ie(e,void 0)}transitioned(e,s){return new Te(this.property,this.value,s,$e({},e.transition,this.transition),e.now)}untransitioned(){return new Te(this.property,this.value,null,{},0)}}class et{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Jt(this._values[e].value.value)}setValue(e,s){this._values.hasOwnProperty(e)||(this._values[e]=new Re(this._values[e].property)),this._values[e].value=new Ie(this._values[e].property,null===s?void 0:Jt(s))}getTransition(e){return Jt(this._values[e].transition)}setTransition(e,s){this._values.hasOwnProperty(e)||(this._values[e]=new Re(this._values[e].property)),this._values[e].transition=Jt(s)||void 0}serialize(){const e={};for(const s of Object.keys(this._values)){const c=this.getValue(s);void 0!==c&&(e[s]=c);const g=this.getTransition(s);void 0!==g&&(e[`${s}-transition`]=g)}return e}transitioned(e,s){const c=new Ge(this._properties);for(const g of Object.keys(this._values))c._values[g]=this._values[g].transitioned(e,s._values[g]);return c}untransitioned(){const e=new Ge(this._properties);for(const s of Object.keys(this._values))e._values[s]=this._values[s].untransitioned();return e}}class Te{constructor(e,s,c,g,v){const x=g.delay||0,D=g.duration||0;v=v||0,this.property=e,this.value=s,this.begin=v+x,this.end=this.begin+D,e.specification.transition&&(g.delay||g.duration)&&(this.prior=c)}possiblyEvaluate(e,s,c){const g=e.now||0,v=this.value.possiblyEvaluate(e,s,c),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(e,s,c);{const D=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(e,s,c),v,At(D))}}return v}}class Ge{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,s,c){const g=new xt(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(e,s,c);return g}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class it{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Jt(this._values[e].value)}setValue(e,s){this._values[e]=new Ie(this._values[e].property,null===s?void 0:Jt(s))}serialize(){const e={};for(const s of Object.keys(this._values)){const c=this.getValue(s);void 0!==c&&(e[s]=c)}return e}possiblyEvaluate(e,s,c){const g=new xt(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(e,s,c);return g}}class ut{constructor(e,s,c){this.property=e,this.value=s,this.parameters=c}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,s,c,g){return this.property.evaluate(this.value,this.parameters,e,s,c,g)}}class xt{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ke{constructor(e){this.specification=e}possiblyEvaluate(e,s){return e.expression.evaluate(s)}interpolate(e,s,c){const g=xa[this.specification.type];return g?g(e,s,c):e}}class Tt{constructor(e,s){this.specification=e,this.overrides=s}possiblyEvaluate(e,s,c,g){return new ut(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(s,null,{},c,g)}:e.expression,s)}interpolate(e,s,c){if("constant"!==e.value.kind||"constant"!==s.value.kind)return e;if(void 0===e.value.value||void 0===s.value.value)return new ut(this,{kind:"constant",value:void 0},e.parameters);const g=xa[this.specification.type];return g?new ut(this,{kind:"constant",value:g(e.value.value,s.value.value,c)},e.parameters):e}evaluate(e,s,c,g,v,x){return"constant"===e.kind?e.value:e.evaluate(s,c,g,v,x)}}class rn extends Tt{possiblyEvaluate(e,s,c,g){if(void 0===e.value)return new ut(this,{kind:"constant",value:void 0},s);if("constant"===e.expression.kind){const v=e.expression.evaluate(s,null,{},c,g),x="resolvedImage"===e.property.specification.type&&"string"!=typeof v?v.name:v,D=this._calculate(x,x,x,s);return new ut(this,{kind:"constant",value:D},s)}if("camera"===e.expression.kind){const v=this._calculate(e.expression.evaluate({zoom:s.zoom-1}),e.expression.evaluate({zoom:s.zoom}),e.expression.evaluate({zoom:s.zoom+1}),s);return new ut(this,{kind:"constant",value:v},s)}return new ut(this,e.expression,s)}evaluate(e,s,c,g,v,x){if("source"===e.kind){const D=e.evaluate(s,c,g,v,x);return this._calculate(D,D,D,s)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(s.zoom)-1},c,g),e.evaluate({zoom:Math.floor(s.zoom)},c,g),e.evaluate({zoom:Math.floor(s.zoom)+1},c,g),s):e.value}_calculate(e,s,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:s,other:c}:{from:c,to:s,other:e}}interpolate(e){return e}}class hn{constructor(e){this.specification=e}possiblyEvaluate(e,s,c,g){if(void 0!==e.value){if("constant"===e.expression.kind){const v=e.expression.evaluate(s,null,{},c,g);return this._calculate(v,v,v,s)}return this._calculate(e.expression.evaluate(new be(Math.floor(s.zoom-1),s)),e.expression.evaluate(new be(Math.floor(s.zoom),s)),e.expression.evaluate(new be(Math.floor(s.zoom+1),s)),s)}}_calculate(e,s,c,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:c,to:s}}interpolate(e){return e}}class at{constructor(e){this.specification=e}possiblyEvaluate(e,s,c,g){return!!e.expression.evaluate(s,null,{},c,g)}interpolate(){return!1}}class _n{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in e){const c=e[s];c.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Ie(c,void 0),v=this.defaultTransitionablePropertyValues[s]=new Re(c);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}function an(o,e){return 256*(o=vn(Math.floor(o),0,255))+vn(Math.floor(e),0,255)}Un("DataDrivenProperty",Tt),Un("DataConstantProperty",Ke),Un("CrossFadedDataDrivenProperty",rn),Un("CrossFadedProperty",hn),Un("ColorRampProperty",at);const ai={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qn{constructor(e,s){this._structArray=e,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class In{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,s){return e._trim(),s&&(e.isTransferred=!0,s.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const s=Object.create(this.prototype);return s.arrayBuffer=e.arrayBuffer,s.length=e.length,s.capacity=e.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Yn(o,e=1){let s=0,c=0;return{members:o.map(g=>{const v=ai[g.type].BYTES_PER_ELEMENT,x=s=bi(s,Math.max(e,v)),D=g.components||1;return c=Math.max(c,v),s+=v*D,{name:g.name,type:g.type,components:D,offset:x}}),size:bi(s,Math.max(c,e)),alignment:e}}function bi(o,e){return Math.ceil(o/e)*e}class Ji extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s){const c=this.length;return this.resize(c+1),this.emplace(c,e,s)}emplace(e,s,c){const g=2*e;return this.int16[g+0]=s,this.int16[g+1]=c,e}}Ji.prototype.bytesPerElement=4,Un("StructArrayLayout2i4",Ji);class Er extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,c,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,c,g)}emplace(e,s,c,g,v){const x=4*e;return this.int16[x+0]=s,this.int16[x+1]=c,this.int16[x+2]=g,this.int16[x+3]=v,e}}Er.prototype.bytesPerElement=8,Un("StructArrayLayout4i8",Er);class Ar extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D){const S=this.length;return this.resize(S+1),this.emplace(S,e,s,c,g,v,x,D)}emplace(e,s,c,g,v,x,D,S){const k=6*e,j=12*e,Y=3*e;return this.int16[k+0]=s,this.int16[k+1]=c,this.uint8[j+4]=g,this.uint8[j+5]=v,this.uint8[j+6]=x,this.uint8[j+7]=D,this.float32[Y+2]=S,e}}Ar.prototype.bytesPerElement=12,Un("StructArrayLayout2i4ub1f12",Ar);class Ri extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s){const c=this.length;return this.resize(c+1),this.emplace(c,e,s)}emplace(e,s,c){const g=2*e;return this.float32[g+0]=s,this.float32[g+1]=c,e}}Ri.prototype.bytesPerElement=8,Un("StructArrayLayout2f8",Ri);class Mi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S,k,j){const Y=this.length;return this.resize(Y+1),this.emplace(Y,e,s,c,g,v,x,D,S,k,j)}emplace(e,s,c,g,v,x,D,S,k,j,Y){const J=10*e;return this.uint16[J+0]=s,this.uint16[J+1]=c,this.uint16[J+2]=g,this.uint16[J+3]=v,this.uint16[J+4]=x,this.uint16[J+5]=D,this.uint16[J+6]=S,this.uint16[J+7]=k,this.uint16[J+8]=j,this.uint16[J+9]=Y,e}}Mi.prototype.bytesPerElement=20,Un("StructArrayLayout10ui20",Mi);class eo extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S){const k=this.length;return this.resize(k+1),this.emplace(k,e,s,c,g,v,x,D,S)}emplace(e,s,c,g,v,x,D,S,k){const j=8*e;return this.uint16[j+0]=s,this.uint16[j+1]=c,this.uint16[j+2]=g,this.uint16[j+3]=v,this.uint16[j+4]=x,this.uint16[j+5]=D,this.uint16[j+6]=S,this.uint16[j+7]=k,e}}eo.prototype.bytesPerElement=16,Un("StructArrayLayout8ui16",eo);class mr extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S,k,j,Y,J){const ae=this.length;return this.resize(ae+1),this.emplace(ae,e,s,c,g,v,x,D,S,k,j,Y,J)}emplace(e,s,c,g,v,x,D,S,k,j,Y,J,ae){const pe=12*e;return this.int16[pe+0]=s,this.int16[pe+1]=c,this.int16[pe+2]=g,this.int16[pe+3]=v,this.uint16[pe+4]=x,this.uint16[pe+5]=D,this.uint16[pe+6]=S,this.uint16[pe+7]=k,this.int16[pe+8]=j,this.int16[pe+9]=Y,this.int16[pe+10]=J,this.int16[pe+11]=ae,e}}mr.prototype.bytesPerElement=24,Un("StructArrayLayout4i4ui4i24",mr);class ns extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,c)}emplace(e,s,c,g){const v=3*e;return this.float32[v+0]=s,this.float32[v+1]=c,this.float32[v+2]=g,e}}ns.prototype.bytesPerElement=12,Un("StructArrayLayout3f12",ns);class is extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint32[1*e+0]=s,e}}is.prototype.bytesPerElement=4,Un("StructArrayLayout1ul4",is);class na extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S,k,j){const Y=this.length;return this.resize(Y+1),this.emplace(Y,e,s,c,g,v,x,D,S,k,j)}emplace(e,s,c,g,v,x,D,S,k,j,Y){const J=16*e,ae=8*e;return this.int16[J+0]=s,this.int16[J+1]=c,this.float32[ae+1]=g,this.float32[ae+2]=v,this.float32[ae+3]=x,this.float32[ae+4]=D,this.int16[J+10]=S,this.uint32[ae+6]=k,this.uint16[J+14]=j,this.uint16[J+15]=Y,e}}na.prototype.bytesPerElement=32,Un("StructArrayLayout2i4f1i1ul2ui32",na);class ps extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x){const D=this.length;return this.resize(D+1),this.emplace(D,e,s,c,g,v,x)}emplace(e,s,c,g,v,x,D){const S=6*e;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=g,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=D,e}}ps.prototype.bytesPerElement=12,Un("StructArrayLayout2i2i2i12",ps);class to extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,c,g,v)}emplace(e,s,c,g,v,x){const D=4*e,S=8*e;return this.float32[D+0]=s,this.float32[D+1]=c,this.float32[D+2]=g,this.int16[S+6]=v,this.int16[S+7]=x,e}}to.prototype.bytesPerElement=16,Un("StructArrayLayout2f1f2i16",to);class go extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,c,g)}emplace(e,s,c,g,v){const x=12*e,D=3*e;return this.uint8[x+0]=s,this.uint8[x+1]=c,this.float32[D+1]=g,this.float32[D+2]=v,e}}go.prototype.bytesPerElement=12,Un("StructArrayLayout2ub2f12",go);class Li extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,c)}emplace(e,s,c,g){const v=3*e;return this.uint16[v+0]=s,this.uint16[v+1]=c,this.uint16[v+2]=g,e}}Li.prototype.bytesPerElement=6,Un("StructArrayLayout3ui6",Li);class qr extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht){const Et=this.length;return this.resize(Et+1),this.emplace(Et,e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht)}emplace(e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht,Et){const Pt=24*e,Ft=12*e,Lt=48*e;return this.int16[Pt+0]=s,this.int16[Pt+1]=c,this.uint16[Pt+2]=g,this.uint16[Pt+3]=v,this.uint32[Ft+2]=x,this.uint32[Ft+3]=D,this.uint32[Ft+4]=S,this.uint16[Pt+10]=k,this.uint16[Pt+11]=j,this.uint16[Pt+12]=Y,this.float32[Ft+7]=J,this.float32[Ft+8]=ae,this.uint8[Lt+36]=pe,this.uint8[Lt+37]=Pe,this.uint8[Lt+38]=Xe,this.uint32[Ft+10]=ht,this.int16[Pt+22]=Et,e}}qr.prototype.bytesPerElement=48,Un("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qr);class To extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht,Et,Pt,Ft,Lt,Ut,yn,pn,fn,Pn,ln){const tn=this.length;return this.resize(tn+1),this.emplace(tn,e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht,Et,Pt,Ft,Lt,Ut,yn,pn,fn,Pn,ln)}emplace(e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe,Xe,ht,Et,Pt,Ft,Lt,Ut,yn,pn,fn,Pn,ln,tn){const on=32*e,cn=16*e;return this.int16[on+0]=s,this.int16[on+1]=c,this.int16[on+2]=g,this.int16[on+3]=v,this.int16[on+4]=x,this.int16[on+5]=D,this.int16[on+6]=S,this.int16[on+7]=k,this.uint16[on+8]=j,this.uint16[on+9]=Y,this.uint16[on+10]=J,this.uint16[on+11]=ae,this.uint16[on+12]=pe,this.uint16[on+13]=Pe,this.uint16[on+14]=Xe,this.uint16[on+15]=ht,this.uint16[on+16]=Et,this.uint16[on+17]=Pt,this.uint16[on+18]=Ft,this.uint16[on+19]=Lt,this.uint16[on+20]=Ut,this.uint16[on+21]=yn,this.uint16[on+22]=pn,this.uint32[cn+12]=fn,this.float32[cn+13]=Pn,this.float32[cn+14]=ln,this.float32[cn+15]=tn,e}}To.prototype.bytesPerElement=64,Un("StructArrayLayout8i15ui1ul3f64",To);class Ir extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.float32[1*e+0]=s,e}}Ir.prototype.bytesPerElement=4,Un("StructArrayLayout1f4",Ir);class Zo extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,c){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,c)}emplace(e,s,c,g){const v=3*e;return this.int16[v+0]=s,this.int16[v+1]=c,this.int16[v+2]=g,e}}Zo.prototype.bytesPerElement=6,Un("StructArrayLayout3i6",Zo);class yc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,c,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,c,g)}emplace(e,s,c,g,v){const x=6*e;return this.uint32[3*e+0]=s,this.uint16[x+2]=c,this.uint16[x+3]=g,this.uint16[x+4]=v,e}}yc.prototype.bytesPerElement=12,Un("StructArrayLayout1ul3ui12",yc);class No extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s){const c=this.length;return this.resize(c+1),this.emplace(c,e,s)}emplace(e,s,c){const g=2*e;return this.uint16[g+0]=s,this.uint16[g+1]=c,e}}No.prototype.bytesPerElement=4,Un("StructArrayLayout2ui4",No);class Es extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint16[1*e+0]=s,e}}Es.prototype.bytesPerElement=2,Un("StructArrayLayout1ui2",Es);class vc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,c,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,c,g)}emplace(e,s,c,g,v){const x=4*e;return this.float32[x+0]=s,this.float32[x+1]=c,this.float32[x+2]=g,this.float32[x+3]=v,e}}vc.prototype.bytesPerElement=16,Un("StructArrayLayout4f16",vc);class Gc extends qn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new ye(this.anchorPointX,this.anchorPointY)}}Gc.prototype.size=32;class Kl extends na{get(e){return new Gc(this,e)}}Un("CollisionBoxArray",Kl);class Hd extends qn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Hd.prototype.size=48;class qa extends qr{get(e){return new Hd(this,e)}}Un("PlacedSymbolArray",qa);class Sl extends qn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textOffset0(){return this._structArray.float32[this._pos4+13]}get textOffset1(){return this._structArray.float32[this._pos4+14]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+15]}}Sl.prototype.size=64;class Of extends To{get(e){return new Sl(this,e)}}Un("SymbolInstanceArray",Of);class hg extends Ir{getoffsetX(e){return this.float32[1*e+0]}}Un("GlyphOffsetArray",hg);class ip extends Zo{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Un("SymbolLineVertexArray",ip);class kf extends qn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}kf.prototype.size=12;class pg extends yc{get(e){return new kf(this,e)}}Un("FeatureIndexArray",pg);class Rf extends qn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Rf.prototype.size=4;class Ff extends No{get(e){return new Rf(this,e)}}Un("FillExtrusionCentroidArray",Ff);const fg=Yn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),$d=Yn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var rp=sr(function(o){o.exports=function(e,s){var c,g,v,x,D,S,k,j;for(g=e.length-(c=3&e.length),v=s,D=3432918353,S=461845907,j=0;j<g;)k=255&e.charCodeAt(j)|(255&e.charCodeAt(++j))<<8|(255&e.charCodeAt(++j))<<16|(255&e.charCodeAt(++j))<<24,++j,v=27492+(65535&(x=5*(65535&(v=(v^=k=(65535&(k=(k=(65535&k)*D+(((k>>>16)*D&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(k=0,c){case 3:k^=(255&e.charCodeAt(j+2))<<16;case 2:k^=(255&e.charCodeAt(j+1))<<8;case 1:v^=k=(65535&(k=(k=(65535&(k^=255&e.charCodeAt(j)))*D+(((k>>>16)*D&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295}return v^=e.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),mg=sr(function(o){o.exports=function(e,s){for(var c,g=e.length,v=s^g,x=0;g>=4;)c=1540483477*(65535&(c=255&e.charCodeAt(x)|(255&e.charCodeAt(++x))<<8|(255&e.charCodeAt(++x))<<16|(255&e.charCodeAt(++x))<<24))+((1540483477*(c>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),g-=4,++x;switch(g){case 3:v^=(255&e.charCodeAt(x+2))<<16;case 2:v^=(255&e.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&e.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),Cu=rp,py=mg;Cu.murmur3=rp,Cu.murmur2=py;class Ju{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,s,c,g){this.ids.push(gg(e)),this.positions.push(s,c,g)}getPositions(e){const s=gg(e);let c=0,g=this.ids.length-1;for(;c<g;){const x=c+g>>1;this.ids[x]>=s?g=x:c=x+1}const v=[];for(;this.ids[c]===s;)v.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return v}static serialize(e,s){const c=new Float64Array(e.ids),g=new Uint32Array(e.positions);return Eu(c,g,0,c.length-1),s&&s.push(c.buffer,g.buffer),{ids:c,positions:g}}static deserialize(e){const s=new Ju;return s.ids=e.ids,s.positions=e.positions,s.indexed=!0,s}}function gg(o){const e=+o;return!isNaN(e)&&e<=tt?e:Cu(String(o))}function Eu(o,e,s,c){for(;s<c;){const g=o[s+c>>1];let v=s-1,x=c+1;for(;;){do{v++}while(o[v]<g);do{x--}while(o[x]>g);if(v>=x)break;Du(o,v,x),Du(e,3*v,3*x),Du(e,3*v+1,3*x+1),Du(e,3*v+2,3*x+2)}x-s<c-x?(Eu(o,e,s,x),s=x+1):(Eu(o,e,x+1,c),c=x)}}function Du(o,e,s){const c=o[e];o[e]=o[s],o[s]=c}Un("FeaturePositionMap",Ju);class Sa{constructor(e,s){this.gl=e.gl,this.location=s}}class jr extends Sa{constructor(e,s){super(e,s),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Lf extends Sa{constructor(e,s){super(e,s),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class _g extends Sa{constructor(e,s){super(e,s),this.current=fi.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Zd=new Float32Array(16),ed=new Float32Array(9);function td(o){return[an(255*o.r,255*o.g),an(255*o.b,255*o.a)]}class Tl{constructor(e,s,c){this.value=e,this.uniformNames=s.map(g=>`u_${g}`),this.type=c}setUniform(e,s,c){e.set(c.constantOr(this.value))}getBinding(e,s,c){return"color"===this.type?new _g(e,s):new jr(e,s)}}class Hc{constructor(e,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=s.tl.concat(s.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,s,c,g){const v="u_pattern_to"===g||"u_dash_to"===g?this.patternTo:"u_pattern_from"===g||"u_dash_from"===g?this.patternFrom:"u_pixel_ratio_to"===g?this.pixelRatioTo:"u_pixel_ratio_from"===g?this.pixelRatioFrom:null;v&&e.set(v)}getBinding(e,s,c){return"u_pattern_from"===c||"u_pattern_to"===c||"u_dash_from"===c||"u_dash_to"===c?new Lf(e,s):new jr(e,s)}}class Ds{constructor(e,s,c,g){this.expression=e,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:"color"===c?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,s,c,g,v){const x=this.paintVertexArray.length,D=this.expression.evaluate(new be(0),s,{},g,[],v);this.paintVertexArray.resize(e),this._setPaintValue(x,e,D)}updatePaintArray(e,s,c,g){const v=this.expression.evaluate({zoom:0},c,g);this._setPaintValue(e,s,v)}_setPaintValue(e,s,c){if("color"===this.type){const g=td(c);for(let v=e;v<s;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=e;g<s;g++)this.paintVertexArray.emplace(g,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sl{constructor(e,s,c,g,v,x){this.expression=e,this.uniformNames=s.map(D=>`u_${D}_t`),this.type=c,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(D=>({name:`a_${D}`,type:"Float32",components:"color"===c?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(e,s,c,g,v){const x=this.expression.evaluate(new be(this.zoom),s,{},g,[],v),D=this.expression.evaluate(new be(this.zoom+1),s,{},g,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,x,D)}updatePaintArray(e,s,c,g){const v=this.expression.evaluate({zoom:this.zoom},c,g),x=this.expression.evaluate({zoom:this.zoom+1},c,g);this._setPaintValue(e,s,v,x)}_setPaintValue(e,s,c,g){if("color"===this.type){const v=td(c),x=td(g);for(let D=e;D<s;D++)this.paintVertexArray.emplace(D,v[0],v[1],x[0],x[1])}else{for(let v=e;v<s;v++)this.paintVertexArray.emplace(v,c,g);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(g))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=vn(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);e.set(g)}getBinding(e,s,c){return new jr(e,s)}}class Ta{constructor(e,s,c,g,v,x,D){this.expression=e,this.type=c,this.useIntegerZoom=g,this.zoom=v,this.layerId=D,this.paintVertexAttributes=("array"===c?$d:fg).members;for(let S=0;S<s.length;++S);this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(e,s,c){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(g,e,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(e,s,c,g,v){this._setPaintValues(e,s,c.patterns&&c.patterns[this.layerId],v)}_setPaintValues(e,s,c,g){if(!g||!c)return;const{min:v,mid:x,max:D}=c,S=g[v],k=g[x],j=g[D];if(S&&k&&j)for(let Y=e;Y<s;Y++)this._setPaintValue(this.zoomInPaintVertexArray,Y,k,S),this._setPaintValue(this.zoomOutPaintVertexArray,Y,k,j)}_setPaintValue(e,s,c,g){e.emplace(s,c.tl[0],c.tl[1],c.br[0],c.br[1],g.tl[0],g.tl[1],g.br[0],g.br[1],c.pixelRatio,g.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Al{constructor(e,s,c=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const v in e.paint._values){if(!c(v))continue;const x=e.paint.get(v);if(!(x instanceof ut&&wa(x.property.specification)))continue;const D=Xl(v,e.type),S=x.value,k=x.property.specification.type,j=x.property.useIntegerZoom,Y=x.property.specification["property-type"],J="cross-faded"===Y||"cross-faded-data-driven"===Y,ae="line-dasharray"===String(v)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==S.kind||ae)if("source"===S.kind||ae||J){const pe=op(v,k,"source");this.binders[v]=J?new Ta(S,D,k,j,s,pe,e.id):new Ds(S,D,k,pe),g.push(`/a_${v}`)}else{const pe=op(v,k,"composite");this.binders[v]=new sl(S,D,k,j,s,pe),g.push(`/z_${v}`)}else this.binders[v]=J?new Hc(S.value,D):new Tl(S.value,D,k),g.push(`/u_${v}`)}this.cacheKey=g.sort().join("")}getMaxValue(e){const s=this.binders[e];return s instanceof Ds||s instanceof sl?s.maxValue:0}populatePaintArrays(e,s,c,g,v){for(const x in this.binders){const D=this.binders[x];(D instanceof Ds||D instanceof sl||D instanceof Ta)&&D.populatePaintArray(e,s,c,g,v)}}setConstantPatternPositions(e,s){for(const c in this.binders){const g=this.binders[c];g instanceof Hc&&g.setConstantPatternPositions(e,s)}}updatePaintArrays(e,s,c,g,v){let x=!1;for(const D in e){const S=s.getPositions(D);for(const k of S){const j=c.feature(k.index);for(const Y in this.binders){const J=this.binders[Y];if((J instanceof Ds||J instanceof sl||J instanceof Ta)&&!0===J.expression.isStateDependent){const ae=g.paint.get(Y);J.expression=ae.value,J.updatePaintArray(k.start,k.end,j,e[D],v),x=!0}}}}return x}defines(){const e=[];for(const s in this.binders){const c=this.binders[s];(c instanceof Tl||c instanceof Hc)&&e.push(...c.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return e}getBinderAttributes(){const e=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Ds||c instanceof sl||c instanceof Ta)for(let g=0;g<c.paintVertexAttributes.length;g++)e.push(c.paintVertexAttributes[g].name)}return e}getBinderUniforms(){const e=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Tl||c instanceof Hc||c instanceof sl)for(const g of c.uniformNames)e.push(g)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,s){const c=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof Tl||v instanceof Hc||v instanceof sl)for(const x of v.uniformNames)if(s[x]){const D=v.getBinding(e,s[x],x);c.push({name:x,property:g,binding:D})}}return c}setUniforms(e,s,c,g){for(const{name:v,property:x,binding:D}of s)this.binders[x].setUniform(D,g,c.get(x),v)}updatePaintBuffers(e){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(e&&c instanceof Ta){const g=2===e.fromScale?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(c instanceof Ds||c instanceof sl)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(e){for(const s in this.binders){const c=this.binders[s];(c instanceof Ds||c instanceof sl||c instanceof Ta)&&c.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const s=this.binders[e];(s instanceof Ds||s instanceof sl||s instanceof Ta)&&s.destroy()}}}class $c{constructor(e,s,c=(()=>!0)){this.programConfigurations={};for(const g of e)this.programConfigurations[g.id]=new Al(g,s,c);this.needsUpload=!1,this._featureMap=new Ju,this._bufferOffset=0}populatePaintArrays(e,s,c,g,v,x){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(e,s,g,v,x);void 0!==s.id&&this._featureMap.add(s.id,c,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,s,c,g){for(const v of c)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,s,v,g)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Bf={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Xl(o,e){return Bf[o]||[o.replace(`${e}-`,"").replace(/-/g,"_")]}const Mu={"line-pattern":{source:Mi,composite:Mi},"fill-pattern":{source:Mi,composite:Mi},"fill-extrusion-pattern":{source:Mi,composite:Mi},"line-dasharray":{source:eo,composite:eo}},Nf={color:{source:Ri,composite:vc},number:{source:Ir,composite:Ri}};function op(o,e,s){const c=Mu[o];return c&&c[s]||Nf[e][s]}Un("ConstantBinder",Tl),Un("CrossFadedConstantBinder",Hc),Un("SourceExpressionBinder",Ds),Un("CrossFadedCompositeBinder",Ta),Un("CompositeExpressionBinder",sl),Un("ProgramConfiguration",Al,{omit:["_buffers"]}),Un("ProgramConfigurationSet",$c);const Wd="-transition";class al extends Me{constructor(e,s){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),s.layout&&(this._unevaluatedLayout=new it(s.layout)),s.paint)){this._transitionablePaint=new et(s.paint);for(const c in e.paint)this.setPaintProperty(c,e.paint[c],{validate:!1});for(const c in e.layout)this.setLayoutProperty(c,e.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xt(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,s,c={}){null!=s&&this._validate(xu,`layers.${this.id}.layout.${e}`,e,s,c)||("visibility"!==e?this._unevaluatedLayout.setValue(e,s):this.visibility=s)}getPaintProperty(e){return Ot(e,Wd)?this._transitionablePaint.getTransition(e.slice(0,-Wd.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,s,c={}){if(null!=s&&this._validate(Nc,`layers.${this.id}.paint.${e}`,e,s,c))return!1;if(Ot(e,Wd))return this._transitionablePaint.setTransition(e.slice(0,-Wd.length),s||void 0),!1;{const g=this._transitionablePaint._values[e],v="cross-faded-data-driven"===g.property.specification["property-type"],x=g.value.isDataDriven(),D=g.value;this._transitionablePaint.setValue(e,s),this._handleSpecialPaintPropertyUpdate(e);const S=this._transitionablePaint._values[e].value;return S.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(e,D,S)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,s,c){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,s){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,s)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),zt(e,(s,c)=>!(void 0===s||"layout"===c&&!Object.keys(s).length||"paint"===c&&!Object.keys(s).length))}_validate(e,s,c,g,v={}){return(!v||!1!==v.validate)&&$l(this,e.call(Jr,{key:s,layerType:this.type,objectKey:c,value:g,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const s=this.paint.get(e);if(s instanceof ut&&wa(s.property.specification)&&("source"===s.value.kind||"composite"===s.value.kind)&&s.value.isStateDependent)return!0}return!1}}const sp=Yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:yg}=sp;class rs{constructor(e=[]){this.segments=e}prepareSegment(e,s,c,g){let v=this.segments[this.segments.length-1];return e>rs.MAX_VERTEX_ARRAY_LENGTH&&Rn(`Max vertices per segment is ${rs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!v||v.vertexLength+e>rs.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g)&&(v={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},void 0!==g&&(v.sortKey=g),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const e of this.segments)for(const s in e.vaos)e.vaos[s].destroy()}static simpleSegment(e,s,c,g){return new rs([{vertexOffset:e,primitiveOffset:s,vertexLength:c,primitiveLength:g,vaos:{},sortKey:0}])}}rs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Un("SegmentVector",rs);var gr=8192;const ap=Math.pow(2,14)-1,zf=-ap-1;function Zc(o){const e=gr/o.extent,s=o.loadGeometry();for(let c=0;c<s.length;c++){const g=s[c];for(let v=0;v<g.length;v++){const x=g[v],D=Math.round(x.x*e),S=Math.round(x.y*e);x.x=vn(D,zf,ap),x.y=vn(S,zf,ap),(D<x.x||D>x.x+1||S<x.y||S>x.y+1)&&Rn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Su(o,e){return{type:o.type,id:o.id,properties:o.properties,geometry:e?Zc(o):[]}}function qd(o,e,s,c,g){o.emplaceBack(2*e+(c+1)/2,2*s+(g+1)/2)}class Wc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ji,this.indexArray=new Li,this.segments=new rs,this.programConfigurations=new $c(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,c){const g=this.layers[0],v=[];let x=null;"circle"===g.type&&(x=g.layout.get("circle-sort-key"));for(const{feature:D,id:S,index:k,sourceLayerIndex:j}of e){const Y=this.layers[0]._featureFilter.needGeometry,J=Su(D,Y);if(!this.layers[0]._featureFilter.filter(new be(this.zoom),J,c))continue;const ae=x?x.evaluate(J,{},c):void 0,pe={id:S,properties:D.properties,type:D.type,sourceLayerIndex:j,index:k,geometry:Y?J.geometry:Zc(D),patterns:{},sortKey:ae};v.push(pe)}x&&v.sort((D,S)=>D.sortKey-S.sortKey);for(const D of v){const{geometry:S,index:k,sourceLayerIndex:j}=D,Y=e[k].feature;this.addFeature(D,S,k,c),s.featureIndex.insert(Y,S,k,j,this.index)}}update(e,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,c)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,c,g){for(const v of s)for(const x of v){const D=x.x,S=x.y;if(D<0||D>=gr||S<0||S>=gr)continue;const k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),j=k.vertexLength;qd(this.layoutVertexArray,D,S,-1,-1),qd(this.layoutVertexArray,D,S,1,-1),qd(this.layoutVertexArray,D,S,1,1),qd(this.layoutVertexArray,D,S,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),k.vertexLength+=4,k.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,{},g)}}function nd(o,e){for(let s=0;s<o.length;s++)if(bc(e,o[s]))return!0;for(let s=0;s<e.length;s++)if(bc(o,e[s]))return!0;return!!Yd(o,e)}function Il(o,e,s){return!!bc(o,e)||!!vg(e,o,s)}function Pl(o,e){if(1===o.length)return xg(e,o[0]);for(let s=0;s<e.length;s++){const c=e[s];for(let g=0;g<c.length;g++)if(bc(o,c[g]))return!0}for(let s=0;s<o.length;s++)if(xg(e,o[s]))return!0;for(let s=0;s<e.length;s++)if(Yd(o,e[s]))return!0;return!1}function Vf(o,e,s){if(o.length>1){if(Yd(o,e))return!0;for(let c=0;c<e.length;c++)if(vg(e[c],o,s))return!0}for(let c=0;c<o.length;c++)if(vg(o[c],e,s))return!0;return!1}function Yd(o,e){if(0===o.length||0===e.length)return!1;for(let s=0;s<o.length-1;s++){const c=o[s],g=o[s+1];for(let v=0;v<e.length-1;v++)if(Uf(c,g,e[v],e[v+1]))return!0}return!1}function Uf(o,e,s,c){return gi(o,s,c)!==gi(e,s,c)&&gi(o,e,s)!==gi(o,e,c)}function vg(o,e,s){const c=s*s;if(1===e.length)return o.distSqr(e[0])<c;for(let g=1;g<e.length;g++)if(bg(o,e[g-1],e[g])<c)return!0;return!1}function bg(o,e,s){const c=e.distSqr(s);if(0===c)return o.distSqr(e);const g=((o.x-e.x)*(s.x-e.x)+(o.y-e.y)*(s.y-e.y))/c;return o.distSqr(g<0?e:g>1?s:s.sub(e)._mult(g)._add(e))}function xg(o,e){let s,c,g,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let D=0,S=s.length-1;D<s.length;S=D++)c=s[D],g=s[S],c.y>e.y!=g.y>e.y&&e.x<(g.x-c.x)*(e.y-c.y)/(g.y-c.y)+c.x&&(v=!v)}return v}function bc(o,e){let s=!1;for(let c=0,g=o.length-1;c<o.length;g=c++){const v=o[c],x=o[g];v.y>e.y!=x.y>e.y&&e.x<(x.x-v.x)*(e.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function Kd(o,e,s,c,g){for(const x of o)if(e<=x.x&&s<=x.y&&c>=x.x&&g>=x.y)return!0;const v=[new ye(e,s),new ye(e,g),new ye(c,g),new ye(c,s)];if(o.length>2)for(const x of v)if(bc(o,x))return!0;for(let x=0;x<o.length-1;x++)if(lp(o[x],o[x+1],v))return!0;return!1}function lp(o,e,s){const c=s[0],g=s[2];if(o.x<c.x&&e.x<c.x||o.x>g.x&&e.x>g.x||o.y<c.y&&e.y<c.y||o.y>g.y&&e.y>g.y)return!1;const v=gi(o,e,s[0]);return v!==gi(o,e,s[1])||v!==gi(o,e,s[2])||v!==gi(o,e,s[3])}function Xd(o,e,s){const c=e.paint.get(o).value;return"constant"===c.kind?c.value:s.programConfigurations.get(e.id).getMaxValue(o)}function cp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function id(o,e,s,c,g){if(!e[0]&&!e[1])return o;const v=ye.convert(e)._mult(g);"viewport"===s&&v._rotate(-c);const x=[];for(let D=0;D<o.length;D++)x.push(o[D].sub(v));return x}function jf(o,e,s,c){const g=ye.convert(o)._mult(c);return"viewport"===e&&g._rotate(-s),g}Un("CircleBucket",Wc,{omit:["layers"]});const Qd=new _n({"circle-sort-key":new Tt(ue.layout_circle["circle-sort-key"])});var wg={paint:new _n({"circle-radius":new Tt(ue.paint_circle["circle-radius"]),"circle-color":new Tt(ue.paint_circle["circle-color"]),"circle-blur":new Tt(ue.paint_circle["circle-blur"]),"circle-opacity":new Tt(ue.paint_circle["circle-opacity"]),"circle-translate":new Ke(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Ke(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ke(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ke(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(ue.paint_circle["circle-stroke-opacity"])}),layout:Qd},da=typeof Float32Array<"u"?Float32Array:Array;function up(){var o=new da(9);return da!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function Tu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function dp(o,e,s){var c=e[0],g=e[1],v=e[2],x=e[3],D=e[4],S=e[5],k=e[6],j=e[7],Y=e[8],J=e[9],ae=e[10],pe=e[11],Pe=e[12],Xe=e[13],ht=e[14],Et=e[15],Pt=s[0],Ft=s[1],Lt=s[2],Ut=s[3];return o[0]=Pt*c+Ft*D+Lt*Y+Ut*Pe,o[1]=Pt*g+Ft*S+Lt*J+Ut*Xe,o[2]=Pt*v+Ft*k+Lt*ae+Ut*ht,o[3]=Pt*x+Ft*j+Lt*pe+Ut*Et,o[4]=(Pt=s[4])*c+(Ft=s[5])*D+(Lt=s[6])*Y+(Ut=s[7])*Pe,o[5]=Pt*g+Ft*S+Lt*J+Ut*Xe,o[6]=Pt*v+Ft*k+Lt*ae+Ut*ht,o[7]=Pt*x+Ft*j+Lt*pe+Ut*Et,o[8]=(Pt=s[8])*c+(Ft=s[9])*D+(Lt=s[10])*Y+(Ut=s[11])*Pe,o[9]=Pt*g+Ft*S+Lt*J+Ut*Xe,o[10]=Pt*v+Ft*k+Lt*ae+Ut*ht,o[11]=Pt*x+Ft*j+Lt*pe+Ut*Et,o[12]=(Pt=s[12])*c+(Ft=s[13])*D+(Lt=s[14])*Y+(Ut=s[15])*Pe,o[13]=Pt*g+Ft*S+Lt*J+Ut*Xe,o[14]=Pt*v+Ft*k+Lt*ae+Ut*ht,o[15]=Pt*x+Ft*j+Lt*pe+Ut*Et,o}Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});var hp=dp;function Jd(){var o=new da(3);return da!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Ao(o){return Math.hypot(o[0],o[1],o[2])}function qc(o,e,s){var c=new da(3);return c[0]=o,c[1]=e,c[2]=s,c}function Gf(o,e,s){return o[0]=e[0]-s[0],o[1]=e[1]-s[1],o[2]=e[2]-s[2],o}function Ql(o,e,s){return o[0]=e[0]*s[0],o[1]=e[1]*s[1],o[2]=e[2]*s[2],o}function Au(o,e,s,c){return o[0]=e[0]+s[0]*c,o[1]=e[1]+s[1]*c,o[2]=e[2]+s[2]*c,o}function Hf(o,e){var s=e[0],c=e[1],g=e[2],v=s*s+c*c+g*g;return v>0&&(v=1/Math.sqrt(v)),o[0]=e[0]*v,o[1]=e[1]*v,o[2]=e[2]*v,o}function $f(o,e,s){var c=s[0],g=s[1],v=s[2],x=e[0],D=e[1],S=e[2],k=g*S-v*D,j=v*x-c*S,Y=c*D-g*x,J=g*Y-v*j,ae=v*k-c*Y,pe=c*j-g*k,Pe=2*s[3];return j*=Pe,Y*=Pe,ae*=2,pe*=2,o[0]=x+(k*=Pe)+(J*=2),o[1]=D+j+ae,o[2]=S+Y+pe,o}var rd,Cg=Gf,Eg=Ql,fy=Ao;function eh(o,e,s){var c=e[0],g=e[1],v=e[2],x=e[3];return o[0]=s[0]*c+s[4]*g+s[8]*v+s[12]*x,o[1]=s[1]*c+s[5]*g+s[9]*v+s[13]*x,o[2]=s[2]*c+s[6]*g+s[10]*v+s[14]*x,o[3]=s[3]*c+s[7]*g+s[11]*v+s[15]*x,o}function Yc(){var o=new da(4);return da!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function th(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function Iu(o,e,s){s*=.5;var c=e[0],g=e[1],v=e[2],x=e[3],D=Math.sin(s),S=Math.cos(s);return o[0]=c*S+x*D,o[1]=g*S+v*D,o[2]=v*S-g*D,o[3]=x*S-c*D,o}function pp(o,e,s){const c=eh([],[o.x,o.y,e,1],s);return new ye(c[0]/c[3],c[1]/c[3])}Jd(),rd=new da(4),da!=Float32Array&&(rd[0]=0,rd[1]=0,rd[2]=0,rd[3]=0),Jd(),qc(1,0,0),qc(0,1,0),Yc(),Yc(),up();const Ol=qc(0,0,0),Dg=qc(0,0,1);function Mg(o,e){const s=Jd();return Ol[2]=e,o.intersectsPlane(Ol,Dg,s),new ye(s[0],s[1])}class Zf extends Wc{}function nh(o,{width:e,height:s},c,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==e*s*c)throw new RangeError("mismatched image size")}else g=new Uint8Array(e*s*c);return o.width=e,o.height=s,o.data=g,o}function Wf(o,{width:e,height:s},c){if(e===o.width&&s===o.height)return;const g=nh({},{width:e,height:s},c);fp(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,e),height:Math.min(o.height,s)},c),o.width=e,o.height=s,o.data=g.data}function fp(o,e,s,c,g,v){if(0===g.width||0===g.height)return e;if(g.width>o.width||g.height>o.height||s.x>o.width-g.width||s.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>e.width||g.height>e.height||c.x>e.width-g.width||c.y>e.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,D=e.data;for(let S=0;S<g.height;S++){const k=((s.y+S)*o.width+s.x)*v,j=((c.y+S)*e.width+c.x)*v;for(let Y=0;Y<g.width*v;Y++)D[j+Y]=x[k+Y]}return e}Un("HeatmapBucket",Zf,{omit:["layers"]});class xc{constructor(e,s){nh(this,e,1,s)}resize(e){Wf(this,e,1)}clone(){return new xc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,c,g,v){fp(e,s,c,g,v,1)}}class Aa{constructor(e,s){nh(this,e,4,s)}resize(e){Wf(this,e,4)}replace(e,s){s?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,c,g,v){fp(e,s,c,g,v,4)}}Un("AlphaImage",xc),Un("RGBAImage",Aa);var mp={paint:new _n({"heatmap-radius":new Tt(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ke(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new at(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ke(ue.paint_heatmap["heatmap-opacity"])})};function gp(o){const e={},s=o.resolution||256,c=o.clips?o.clips.length:1,g=o.image||new Aa({width:s,height:c}),v=(x,D,S)=>{e[o.evaluationKey]=S;const k=o.expression.evaluate(e);g.data[x+D+0]=Math.floor(255*k.r/k.a),g.data[x+D+1]=Math.floor(255*k.g/k.a),g.data[x+D+2]=Math.floor(255*k.b/k.a),g.data[x+D+3]=Math.floor(255*k.a)};if(o.clips)for(let x=0,D=0;x<c;++x,D+=4*s)for(let S=0,k=0;S<s;S++,k+=4){const j=S/(s-1),{start:Y,end:J}=o.clips[x];v(D,k,Y*(1-j)+J*j)}else for(let x=0,D=0;x<s;x++,D+=4)v(0,D,x/(s-1));return g}var Sg={paint:new _n({"hillshade-illumination-direction":new Ke(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ke(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ke(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ke(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ke(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ke(ue.paint_hillshade["hillshade-accent-color"])})};const Tg=Yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:qf}=Tg;var _p=fs,Ag=fs;function fs(o,e,s){s=s||2;var c,g,v,x,D,S,k,j=e&&e.length,Y=j?e[0]*s:o.length,J=Jl(o,0,Y,s,!0),ae=[];if(!J||J.next===J.prev)return ae;if(j&&(J=function(Pe,Xe,ht,Et){var Pt,Ft,Lt,Ut=[];for(Pt=0,Ft=Xe.length;Pt<Ft;Pt++)(Lt=Jl(Pe,Xe[Pt]*Et,Pt<Ft-1?Xe[Pt+1]*Et:Pe.length,Et,!1))===Lt.next&&(Lt.steiner=!0),Ut.push(Og(Lt));for(Ut.sort(ih),Pt=0;Pt<Ut.length;Pt++)Yf(Ut[Pt],ht),ht=kl(ht,ht.next);return ht}(o,e,J,s)),o.length>80*s){c=v=o[0],g=x=o[1];for(var pe=s;pe<Y;pe+=s)(D=o[pe])<c&&(c=D),(S=o[pe+1])<g&&(g=S),D>v&&(v=D),S>x&&(x=S);k=0!==(k=Math.max(v-c,x-g))?1/k:0}return Kc(J,ae,s,c,g,k),ae}function Jl(o,e,s,c,g){var v,x;if(g===ah(o,e,s,c)>0)for(v=e;v<s;v+=c)x=Jc(v,o[v],o[v+1],x);else for(v=s-c;v>=e;v-=c)x=Jc(v,o[v],o[v+1],x);return x&&oh(x,x.next)&&(Cc(x),x=x.next),x}function kl(o,e){if(!o)return o;e||(e=o);var s,c=o;do{if(s=!1,c.steiner||!oh(c,c.next)&&0!==_o(c.prev,c,c.next))c=c.next;else{if(Cc(c),(c=e=c.prev)===c.next)break;s=!0}}while(s||c!==e);return e}function Kc(o,e,s,c,g,v,x){if(o){!x&&v&&function(j,Y,J,ae){var pe=j;do{null===pe.z&&(pe.z=rh(pe.x,pe.y,Y,J,ae)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next}while(pe!==j);pe.prevZ.nextZ=null,pe.prevZ=null,function(Pe){var Xe,ht,Et,Pt,Ft,Lt,Ut,yn,pn=1;do{for(ht=Pe,Pe=null,Ft=null,Lt=0;ht;){for(Lt++,Et=ht,Ut=0,Xe=0;Xe<pn&&(Ut++,Et=Et.nextZ);Xe++);for(yn=pn;Ut>0||yn>0&&Et;)0!==Ut&&(0===yn||!Et||ht.z<=Et.z)?(Pt=ht,ht=ht.nextZ,Ut--):(Pt=Et,Et=Et.nextZ,yn--),Ft?Ft.nextZ=Pt:Pe=Pt,Pt.prevZ=Ft,Ft=Pt;ht=Et}Ft.nextZ=null,pn*=2}while(Lt>1)}(pe)}(o,c,g,v);for(var D,S,k=o;o.prev!==o.next;)if(D=o.prev,S=o.next,v?od(o,c,g,v):Us(o))e.push(D.i/s),e.push(o.i/s),e.push(S.i/s),Cc(o),o=S.next,k=S.next;else if((o=S)===k){x?1===x?Kc(o=yp(kl(o),e,s),e,s,c,g,v,2):2===x&&Ig(o,e,s,c,g,v):Kc(kl(o),e,s,c,g,v,1);break}}}function Us(o){var e=o.prev,s=o,c=o.next;if(_o(e,s,c)>=0)return!1;for(var g=o.next.next;g!==o.prev;){if(Xc(e.x,e.y,s.x,s.y,c.x,c.y,g.x,g.y)&&_o(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function od(o,e,s,c){var g=o.prev,v=o,x=o.next;if(_o(g,v,x)>=0)return!1;for(var D=g.x>v.x?g.x>x.x?g.x:x.x:v.x>x.x?v.x:x.x,S=g.y>v.y?g.y>x.y?g.y:x.y:v.y>x.y?v.y:x.y,k=rh(g.x<v.x?g.x<x.x?g.x:x.x:v.x<x.x?v.x:x.x,g.y<v.y?g.y<x.y?g.y:x.y:v.y<x.y?v.y:x.y,e,s,c),j=rh(D,S,e,s,c),Y=o.prevZ,J=o.nextZ;Y&&Y.z>=k&&J&&J.z<=j;){if(Y!==o.prev&&Y!==o.next&&Xc(g.x,g.y,v.x,v.y,x.x,x.y,Y.x,Y.y)&&_o(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,J!==o.prev&&J!==o.next&&Xc(g.x,g.y,v.x,v.y,x.x,x.y,J.x,J.y)&&_o(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;Y&&Y.z>=k;){if(Y!==o.prev&&Y!==o.next&&Xc(g.x,g.y,v.x,v.y,x.x,x.y,Y.x,Y.y)&&_o(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;J&&J.z<=j;){if(J!==o.prev&&J!==o.next&&Xc(g.x,g.y,v.x,v.y,x.x,x.y,J.x,J.y)&&_o(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function yp(o,e,s){var c=o;do{var g=c.prev,v=c.next.next;!oh(g,v)&&wc(g,c,c.next,v)&&Rl(g,v)&&Rl(v,g)&&(e.push(g.i/s),e.push(c.i/s),e.push(v.i/s),Cc(c),Cc(c.next),c=o=v),c=c.next}while(c!==o);return kl(c)}function Ig(o,e,s,c,g,v){var x=o;do{for(var D=x.next.next;D!==x.prev;){if(x.i!==D.i&&kg(x,D)){var S=Fl(x,D);return x=kl(x,x.next),S=kl(S,S.next),Kc(x,e,s,c,g,v),void Kc(S,e,s,c,g,v)}D=D.next}x=x.next}while(x!==o)}function ih(o,e){return o.x-e.x}function Yf(o,e){if(e=function(c,g){var v,x=g,D=c.x,S=c.y,k=-1/0;do{if(S<=x.y&&S>=x.next.y&&x.next.y!==x.y){var j=x.x+(S-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(j<=D&&j>k){if(k=j,j===D){if(S===x.y)return x;if(S===x.next.y)return x.next}v=x.x<x.next.x?x:x.next}}x=x.next}while(x!==g);if(!v)return null;if(D===k)return v;var Y,J=v,ae=v.x,pe=v.y,Pe=1/0;x=v;do{D>=x.x&&x.x>=ae&&D!==x.x&&Xc(S<pe?D:k,S,ae,pe,S<pe?k:D,S,x.x,x.y)&&(Y=Math.abs(S-x.y)/(D-x.x),Rl(x,c)&&(Y<Pe||Y===Pe&&(x.x>v.x||x.x===v.x&&Pg(v,x)))&&(v=x,Pe=Y)),x=x.next}while(x!==J);return v}(o,e)){var s=Fl(e,o);kl(e,e.next),kl(s,s.next)}}function Pg(o,e){return _o(o.prev,o,e.prev)<0&&_o(e.next,o,o.next)<0}function rh(o,e,s,c,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-s)*g)|o<<8))|o<<4))|o<<2))|o<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-c)*g)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Og(o){var e=o,s=o;do{(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next}while(e!==o);return s}function Xc(o,e,s,c,g,v,x,D){return(g-x)*(e-D)-(o-x)*(v-D)>=0&&(o-x)*(c-D)-(s-x)*(e-D)>=0&&(s-x)*(v-D)-(g-x)*(c-D)>=0}function kg(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!function(s,c){var g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==c.i&&g.next.i!==c.i&&wc(g,g.next,s,c))return!0;g=g.next}while(g!==s);return!1}(o,e)&&(Rl(o,e)&&Rl(e,o)&&function(s,c){var g=s,v=!1,x=(s.x+c.x)/2,D=(s.y+c.y)/2;do{g.y>D!=g.next.y>D&&g.next.y!==g.y&&x<(g.next.x-g.x)*(D-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next}while(g!==s);return v}(o,e)&&(_o(o.prev,o,e.prev)||_o(o,e.prev,e))||oh(o,e)&&_o(o.prev,o,o.next)>0&&_o(e.prev,e,e.next)>0)}function _o(o,e,s){return(e.y-o.y)*(s.x-e.x)-(e.x-o.x)*(s.y-e.y)}function oh(o,e){return o.x===e.x&&o.y===e.y}function wc(o,e,s,c){var g=sh(_o(o,e,s)),v=sh(_o(o,e,c)),x=sh(_o(s,c,o)),D=sh(_o(s,c,e));return g!==v&&x!==D||!(0!==g||!Qc(o,s,e))||!(0!==v||!Qc(o,c,e))||!(0!==x||!Qc(s,o,c))||!(0!==D||!Qc(s,e,c))}function Qc(o,e,s){return e.x<=Math.max(o.x,s.x)&&e.x>=Math.min(o.x,s.x)&&e.y<=Math.max(o.y,s.y)&&e.y>=Math.min(o.y,s.y)}function sh(o){return o>0?1:o<0?-1:0}function Rl(o,e){return _o(o.prev,o,o.next)<0?_o(o,e,o.next)>=0&&_o(o,o.prev,e)>=0:_o(o,e,o.prev)<0||_o(o,o.next,e)<0}function Fl(o,e){var s=new Kf(o.i,o.x,o.y),c=new Kf(e.i,e.x,e.y),g=o.next,v=e.prev;return o.next=e,e.prev=o,s.next=g,g.prev=s,c.next=s,s.prev=c,v.next=c,c.prev=v,c}function Jc(o,e,s,c){var g=new Kf(o,e,s);return c?(g.next=c.next,g.prev=c,c.next.prev=g,c.next=g):(g.prev=g,g.next=g),g}function Cc(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Kf(o,e,s){this.i=o,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ah(o,e,s,c){for(var g=0,v=e,x=s-c;v<s;v+=c)g+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return g}function my(o,e,s,c,g){ll(o,e,s||0,c||o.length-1,g||Pu)}function ll(o,e,s,c,g){for(;c>s;){if(c-s>600){var v=c-s+1,x=e-s+1,D=Math.log(v),S=.5*Math.exp(2*D/3),k=.5*Math.sqrt(D*S*(v-S)/v)*(x-v/2<0?-1:1);ll(o,e,Math.max(s,Math.floor(e-x*S/v+k)),Math.min(c,Math.floor(e+(v-x)*S/v+k)),g)}var j=o[e],Y=s,J=c;for(eu(o,s,e),g(o[c],j)>0&&eu(o,s,c);Y<J;){for(eu(o,Y,J),Y++,J--;g(o[Y],j)<0;)Y++;for(;g(o[J],j)>0;)J--}0===g(o[s],j)?eu(o,s,J):eu(o,++J,c),J<=e&&(s=J+1),e<=J&&(c=J-1)}}function eu(o,e,s){var c=o[e];o[e]=o[s],o[s]=c}function Pu(o,e){return o<e?-1:o>e?1:0}function vp(o,e){const s=o.length;if(s<=1)return[o];const c=[];let g,v;for(let x=0;x<s;x++){const D=bn(o[x]);0!==D&&(o[x].area=Math.abs(D),void 0===v&&(v=D<0),v===D<0?(g&&c.push(g),g=[o[x]]):g.push(o[x]))}if(g&&c.push(g),e>1)for(let x=0;x<c.length;x++)c[x].length<=e||(my(c[x],e,1,c[x].length-1,Xf),c[x]=c[x].slice(0,e));return c}function Xf(o,e){return e.area-o.area}function tu(o,e,s){const c=s.patternDependencies;let g=!1;for(const v of e){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const D=x.constantOr(null);D&&(g=!0,c[D.to]=!0,c[D.from]=!0)}return g}function lh(o,e,s,c,g){const v=g.patternDependencies;for(const x of e){const D=x.paint.get(`${o}-pattern`).value;if("constant"!==D.kind){let S=D.evaluate({zoom:c-1},s,{},g.availableImages),k=D.evaluate({zoom:c},s,{},g.availableImages),j=D.evaluate({zoom:c+1},s,{},g.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,j=j&&j.name?j.name:j,v[S]=!0,v[k]=!0,v[j]=!0,s.patterns[x.id]={min:S,mid:k,max:j}}}return s}fs.deviation=function(o,e,s,c){var g=e&&e.length,v=Math.abs(ah(o,0,g?e[0]*s:o.length,s));if(g)for(var x=0,D=e.length;x<D;x++)v-=Math.abs(ah(o,e[x]*s,x<D-1?e[x+1]*s:o.length,s));var S=0;for(x=0;x<c.length;x+=3){var k=c[x]*s,j=c[x+1]*s,Y=c[x+2]*s;S+=Math.abs((o[k]-o[Y])*(o[j+1]-o[k+1])-(o[k]-o[j])*(o[Y+1]-o[k+1]))}return 0===v&&0===S?0:Math.abs((S-v)/v)},fs.flatten=function(o){for(var e=o[0][0].length,s={vertices:[],holes:[],dimensions:e},c=0,g=0;g<o.length;g++){for(var v=0;v<o[g].length;v++)for(var x=0;x<e;x++)s.vertices.push(o[g][v][x]);g>0&&s.holes.push(c+=o[g-1].length)}return s},_p.default=Ag;class ch{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ji,this.indexArray=new Li,this.indexArray2=new No,this.programConfigurations=new $c(e.layers,e.zoom),this.segments=new rs,this.segments2=new rs,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,c){this.hasPattern=tu("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:D,index:S,sourceLayerIndex:k}of e){const j=this.layers[0]._featureFilter.needGeometry,Y=Su(x,j);if(!this.layers[0]._featureFilter.filter(new be(this.zoom),Y,c))continue;const J=g?g.evaluate(Y,{},c,s.availableImages):void 0,ae={id:D,properties:x.properties,type:x.type,sourceLayerIndex:k,index:S,geometry:j?Y.geometry:Zc(x),patterns:{},sortKey:J};v.push(ae)}g&&v.sort((x,D)=>x.sortKey-D.sortKey);for(const x of v){const{geometry:D,index:S,sourceLayerIndex:k}=x;if(this.hasPattern){const j=lh("fill",this.layers,x,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(x,D,S,c,{});s.featureIndex.insert(e[S].feature,D,S,k,this.index)}}update(e,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,c)}addFeatures(e,s,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,c)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qf),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,s,c,g,v){for(const x of vp(s,500)){let D=0;for(const ae of x)D+=ae.length;const S=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),k=S.vertexLength,j=[],Y=[];for(const ae of x){if(0===ae.length)continue;ae!==x[0]&&Y.push(j.length/2);const pe=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),Pe=pe.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(Pe+ae.length-1,Pe),j.push(ae[0].x),j.push(ae[0].y);for(let Xe=1;Xe<ae.length;Xe++)this.layoutVertexArray.emplaceBack(ae[Xe].x,ae[Xe].y),this.indexArray2.emplaceBack(Pe+Xe-1,Pe+Xe),j.push(ae[Xe].x),j.push(ae[Xe].y);pe.vertexLength+=ae.length,pe.primitiveLength+=ae.length}const J=_p(j,Y);for(let ae=0;ae<J.length;ae+=3)this.indexArray.emplaceBack(k+J[ae],k+J[ae+1],k+J[ae+2]);S.vertexLength+=D,S.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,v,g)}}Un("FillBucket",ch,{omit:["layers","patternFeatures"]});const bp=new _n({"fill-sort-key":new Tt(ue.layout_fill["fill-sort-key"])});var xp={paint:new _n({"fill-antialias":new Ke(ue.paint_fill["fill-antialias"]),"fill-opacity":new Tt(ue.paint_fill["fill-opacity"]),"fill-color":new Tt(ue.paint_fill["fill-color"]),"fill-outline-color":new Tt(ue.paint_fill["fill-outline-color"]),"fill-translate":new Ke(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Ke(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new rn(ue.paint_fill["fill-pattern"])}),layout:bp};const Qf=Yn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Rg=Yn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Ou}=Qf;var nu=iu;function iu(o,e,s,c,g){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=c,this._values=g,o.readFields(Fg,this,e)}function Fg(o,e,s){1==o?e.id=s.readVarint():2==o?function(c,g){for(var v=c.readVarint()+c.pos;c.pos<v;){var x=g._keys[c.readVarint()],D=g._values[c.readVarint()];g.properties[x]=D}}(s,e):3==o?e.type=s.readVarint():4==o&&(e._geometry=s.pos)}function wp(o){for(var e,s,c=0,g=0,v=o.length,x=v-1;g<v;x=g++)c+=((s=o[x]).x-(e=o[g]).x)*(e.y+s.y);return c}iu.types=["Unknown","Point","LineString","Polygon"],iu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var e,s=o.readVarint()+o.pos,c=1,g=0,v=0,x=0,D=[];o.pos<s;){if(g<=0){var S=o.readVarint();c=7&S,g=S>>3}if(g--,1===c||2===c)v+=o.readSVarint(),x+=o.readSVarint(),1===c&&(e&&D.push(e),e=[]),e.push(new ye(v,x));else{if(7!==c)throw new Error("unknown command "+c);e&&e.push(e[0].clone())}}return e&&D.push(e),D},iu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var e=o.readVarint()+o.pos,s=1,c=0,g=0,v=0,x=1/0,D=-1/0,S=1/0,k=-1/0;o.pos<e;){if(c<=0){var j=o.readVarint();s=7&j,c=j>>3}if(c--,1===s||2===s)(g+=o.readSVarint())<x&&(x=g),g>D&&(D=g),(v+=o.readSVarint())<S&&(S=v),v>k&&(k=v);else if(7!==s)throw new Error("unknown command "+s)}return[x,S,D,k]},iu.prototype.toGeoJSON=function(o,e,s){var c,g,v=this.extent*Math.pow(2,s),x=this.extent*o,D=this.extent*e,S=this.loadGeometry(),k=iu.types[this.type];function j(ae){for(var pe=0;pe<ae.length;pe++){var Pe=ae[pe];ae[pe]=[360*(Pe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+D)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(c=0;c<S.length;c++)Y[c]=S[c][0];j(S=Y);break;case 2:for(c=0;c<S.length;c++)j(S[c]);break;case 3:for(S=function(ae){var pe=ae.length;if(pe<=1)return[ae];for(var Pe,Xe,ht=[],Et=0;Et<pe;Et++){var Pt=wp(ae[Et]);0!==Pt&&(void 0===Xe&&(Xe=Pt<0),Xe===Pt<0?(Pe&&ht.push(Pe),Pe=[ae[Et]]):Pe.push(ae[Et]))}return Pe&&ht.push(Pe),ht}(S),c=0;c<S.length;c++)for(g=0;g<S[c].length;g++)j(S[c][g])}1===S.length?S=S[0]:k="Multi"+k;var J={type:"Feature",geometry:{type:k,coordinates:S},properties:this.properties};return"id"in this&&(J.id=this.id),J};var Jf=em;function em(o,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Lg,this,e),this.length=this._features.length}function Lg(o,e,s){15===o?e.version=s.readVarint():1===o?e.name=s.readString():5===o?e.extent=s.readVarint():2===o?e._features.push(s.pos):3===o?e._keys.push(s.readString()):4===o&&e._values.push(function(c){for(var g=null,v=c.readVarint()+c.pos;c.pos<v;){var x=c.readVarint()>>3;g=1===x?c.readString():2===x?c.readFloat():3===x?c.readDouble():4===x?c.readVarint64():5===x?c.readVarint():6===x?c.readSVarint():7===x?c.readBoolean():null}return g}(s))}function Bg(o,e,s){if(3===o){var c=new Jf(s,s.readVarint()+s.pos);c.length&&(e[c.name]=c)}}em.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var e=this._pbf.readVarint()+this._pbf.pos;return new nu(this._pbf,e,this.extent,this._keys,this._values)};var ru={VectorTile:function(o,e){this.layers=o.readFields(Bg,{},e)},VectorTileFeature:nu,VectorTileLayer:Jf};const tm=ru.VectorTileFeature.types,nm=Math.pow(2,13);function ou(o,e,s,c,g,v,x,D){o.emplaceBack((e<<1)+x,(s<<1)+v,(Math.floor(c*nm)<<1)+g,Math.round(D))}class Cp{constructor(){this.acc=new ye(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ye(e.x,e.y),this.max=new ye(e.x,e.y))}append(e,s){this.currentPolyCount.edges++,this.acc._add(e);let c=!!this.borders;const g=this.min,v=this.max;e.x<g.x?(g.x=e.x,c=!0):e.x>v.x&&(v.x=e.x,c=!0),e.y<g.y?(g.y=e.y,c=!0):e.y>v.y&&(v.y=e.y,c=!0),((0===e.x||e.x===gr)&&e.x===s.x)!=((0===e.y||e.y===gr)&&e.y===s.y)&&this.processBorderOverlap(e,s),c&&this.checkBorderIntersection(e,s)}checkBorderIntersection(e,s){s.x<0!=e.x<0&&this.addBorderIntersection(0,Vi(s.y,e.y,(0-s.x)/(e.x-s.x))),s.x>gr!=e.x>gr&&this.addBorderIntersection(1,Vi(s.y,e.y,(gr-s.x)/(e.x-s.x))),s.y<0!=e.y<0&&this.addBorderIntersection(2,Vi(s.x,e.x,(0-s.y)/(e.y-s.y))),s.y>gr!=e.y>gr&&this.addBorderIntersection(3,Vi(s.x,e.x,(gr-s.y)/(e.y-s.y)))}addBorderIntersection(e,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[e];s<c[0]&&(c[0]=s),s>c[1]&&(c[1]=s)}processBorderOverlap(e,s){if(e.x===s.x){if(e.y===s.y)return;const c=0===e.x?0:1;this.addBorderIntersection(c,s.y),this.addBorderIntersection(c,e.y)}else{const c=0===e.y?2:3;this.addBorderIntersection(c,s.x),this.addBorderIntersection(c,e.x)}}centroid(){const e=this.polyCount.reduce((s,c)=>s+c.edges,0);return 0!==e?this.acc.div(e)._round():new ye(0,0)}span(){return new ye(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,s)=>e+ +(s[0]!==Number.MAX_VALUE),0)}}class sd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Er,this.centroidVertexArray=new Ff,this.indexArray=new Li,this.programConfigurations=new $c(e.layers,e.zoom),this.segments=new rs,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=e.enableTerrain}populate(e,s,c){this.features=[],this.hasPattern=tu("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/gr/(1<<g.z)}(c);for(const{feature:g,id:v,index:x,sourceLayerIndex:D}of e){const S=this.layers[0]._featureFilter.needGeometry,k=Su(g,S);if(!this.layers[0]._featureFilter.filter(new be(this.zoom),k,c))continue;const j={id:v,sourceLayerIndex:D,index:x,geometry:S?k.geometry:Zc(g),properties:g.properties,type:g.type,patterns:{}},Y=this.layoutVertexArray.length;this.hasPattern?this.features.push(lh("fill-extrusion",this.layers,j,this.zoom,s)):this.addFeature(j,j.geometry,x,c,{}),s.featureIndex.insert(g,j.geometry,x,D,this.index,Y)}this.sortBorders()}addFeatures(e,s,c){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,s,c)}this.sortBorders()}update(e,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,c)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ou),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Rg.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,c,g,v){const x=this.enableTerrain&&e.properties&&"Polygon"===tm[e.type]?new Cp:null;for(const S of vp(s,500)){let k=0,j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===S.length||(D=S[0]).every(Pe=>Pe.x<=0)||D.every(Pe=>Pe.x>=gr)||D.every(Pe=>Pe.y<=0)||D.every(Pe=>Pe.y>=gr))continue;for(let Pe=0;Pe<S.length;Pe++){const Xe=S[Pe];if(0===Xe.length)continue;k+=Xe.length;let ht=0;x&&x.startRing(Xe[0]);for(let Et=0;Et<Xe.length;Et++){const Pt=Xe[Et];if(Et>=1){const Ft=Xe[Et-1];if(!Ng(Pt,Ft)){x&&x.append(Pt,Ft),j.vertexLength+4>rs.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Lt=Pt.sub(Ft)._perp(),Ut=Lt.x/(Math.abs(Lt.x)+Math.abs(Lt.y)),yn=Lt.y>0?1:0,pn=Ft.dist(Pt);ht+pn>32768&&(ht=0),ou(this.layoutVertexArray,Pt.x,Pt.y,Ut,yn,0,0,ht),ou(this.layoutVertexArray,Pt.x,Pt.y,Ut,yn,0,1,ht),ht+=pn,ou(this.layoutVertexArray,Ft.x,Ft.y,Ut,yn,0,0,ht),ou(this.layoutVertexArray,Ft.x,Ft.y,Ut,yn,0,1,ht);const fn=j.vertexLength;this.indexArray.emplaceBack(fn,fn+2,fn+1),this.indexArray.emplaceBack(fn+1,fn+2,fn+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+k>rs.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),"Polygon"!==tm[e.type])continue;const Y=[],J=[],ae=j.vertexLength;for(let Pe=0;Pe<S.length;Pe++){const Xe=S[Pe];if(0!==Xe.length){Xe!==S[0]&&J.push(Y.length/2);for(let ht=0;ht<Xe.length;ht++){const Et=Xe[ht];ou(this.layoutVertexArray,Et.x,Et.y,0,0,1,1,0),Y.push(Et.x),Y.push(Et.y),x&&x.currentPolyCount.top++}}}const pe=_p(Y,J);for(let Pe=0;Pe<pe.length;Pe+=3)this.indexArray.emplaceBack(ae+pe[Pe],ae+pe[Pe+2],ae+pe[Pe+1]);j.primitiveLength+=pe.length/3,j.vertexLength+=k}var D;if(x&&x.polyCount.length>0){if(x.borders){x.vertexArrayOffset=this.centroidVertexArray.length;const S=x.borders,k=this.featuresOnBorder.push(x)-1;for(let j=0;j<4;j++)S[j][0]!==Number.MAX_VALUE&&this.borders[j].push(k)}this.encodeCentroid(x.borders?void 0:x.centroid(),x)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,v,g)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((s,c)=>this.featuresOnBorder[s].borders[e][0]-this.featuresOnBorder[c].borders[e][0])}encodeCentroid(e,s,c=!0){let g,v;if(e)if(0!==e.y){const D=s.span()._mult(this.tileToMeter);g=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(D.x/10)),v=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(D.y/10))}else g=Math.ceil(7*(e.x+450)),v=0;else g=0,v=+c;let x=c?this.centroidVertexArray.length:s.vertexArrayOffset;for(const D of s.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*D.edges+D.top);for(let S=0;S<2*D.edges;S++)this.centroidVertexArray.emplace(x++,0,v),this.centroidVertexArray.emplace(x++,g,v);for(let S=0;S<D.top;S++)this.centroidVertexArray.emplace(x++,g,v)}}}function Ng(o,e){return o.x===e.x&&(o.x<0||o.x>gr)||o.y===e.y&&(o.y<0||o.y>gr)}Un("FillExtrusionBucket",sd,{omit:["layers","features"]}),Un("PartMetadata",Cp);var zg={paint:new _n({"fill-extrusion-opacity":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rn(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ku(o,e){return o.x*e.x+o.y*e.y}function Ep(o,e){if(1===o.length){let s=0;const c=e[s++];let g;for(;!g||c.equals(g);)if(g=e[s++],!g)return 1/0;for(;s<e.length;s++){const v=e[s],x=o[0],D=g.sub(c),S=v.sub(c),k=x.sub(c),j=ku(D,D),Y=ku(D,S),J=ku(S,S),ae=ku(k,D),pe=ku(k,S),Pe=j*J-Y*Y,Xe=(J*ae-Y*pe)/Pe,ht=(j*pe-Y*ae)/Pe,Et=c.z*(1-Xe-ht)+g.z*Xe+v.z*ht;if(isFinite(Et))return Et}return 1/0}{let s=1/0;for(const c of e)s=Math.min(s,c.z);return s}}function ec(o){const e=new ye(o[0],o[1]);return e.z=o[2],e}function uh(o,e,s,c,g,v,x,D){const S=x*g.getElevationAt(o,e,!0,!0),k=0!==v[0],j=k?0===v[1]?x*(v[0]/7-450):x*function(Y,J,ae){const pe=Math.floor(J[0]/8),Pe=Math.floor(J[1]/8),Xe=10*(J[0]-8*pe),ht=10*(J[1]-8*Pe),Et=Y.getElevationAt(pe,Pe,!0,!0),Pt=Y.getMeterToDEM(ae),Ft=Math.floor(.5*(Xe*Pt-1)),Lt=Math.floor(.5*(ht*Pt-1)),Ut=Y.tileCoordToPixel(pe,Pe),yn=2*Ft+1,pn=2*Lt+1,fn=(Ki=yn,Gr=pn,[(_i=Y).getElevationAtPixel(Bi=Ut.x-Ft,$i=Ut.y-Lt,!0),_i.getElevationAtPixel(Bi+Gr,$i,!0),_i.getElevationAtPixel(Bi,$i+Gr,!0),_i.getElevationAtPixel(Bi+Ki,$i+Gr,!0)]),Pn=Math.abs(fn[0]-fn[1]),ln=Math.abs(fn[2]-fn[3]),tn=Math.abs(fn[0]-fn[2])+Math.abs(fn[1]-fn[3]),on=Math.min(.25,.5*Pt*(Pn+ln)/yn),cn=Math.min(.25,.5*Pt*tn/pn);var _i,Bi,$i,Ki,Gr;return Et+Math.max(on*Xe,cn*ht)}(g,v,D):S;return{base:S+(0===s)?-1:s,top:k?Math.max(j+c,S+s+2):S+c}}const im=Yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Vg}=im,rm=Yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ad}=rm,Ug=ru.VectorTileFeature.types,Dp=Math.cos(Math.PI/180*37.5);class dh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ar,this.layoutVertexArray2=new Ri,this.indexArray=new Li,this.programConfigurations=new $c(e.layers,e.zoom),this.segments=new rs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,c){this.hasPattern=tu("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:k,id:j,index:Y,sourceLayerIndex:J}of e){const ae=this.layers[0]._featureFilter.needGeometry,pe=Su(k,ae);if(!this.layers[0]._featureFilter.filter(new be(this.zoom),pe,c))continue;const Pe=g?g.evaluate(pe,{},c):void 0,Xe={id:j,properties:k.properties,type:k.type,sourceLayerIndex:J,index:Y,geometry:ae?pe.geometry:Zc(k),patterns:{},sortKey:Pe};v.push(Xe)}g&&v.sort((k,j)=>k.sortKey-j.sortKey);const{lineAtlas:x,featureIndex:D}=s,S=this.addConstantDashes(x);for(const k of v){const{geometry:j,index:Y,sourceLayerIndex:J}=k;if(S&&this.addFeatureDashes(k,x),this.hasPattern){const ae=lh("line",this.layers,k,this.zoom,s);this.patternFeatures.push(ae)}else this.addFeature(k,j,Y,c,x.positions);D.insert(e[Y].feature,j,Y,J,this.index)}}addConstantDashes(e){let s=!1;for(const c of this.layers){const g=c.paint.get("line-dasharray").value,v=c.layout.get("line-cap").value;if("constant"!==g.kind||"constant"!==v.kind)s=!0;else{const x=v.value,D=g.value;if(!D)continue;e.addDash(D.from,x),e.addDash(D.to,x),D.other&&e.addDash(D.other,x)}}return s}addFeatureDashes(e,s){const c=this.zoom;for(const g of this.layers){const v=g.paint.get("line-dasharray").value,x=g.layout.get("line-cap").value;if("constant"===v.kind&&"constant"===x.kind)continue;let D,S,k,j,Y,J;if("constant"===v.kind){const Xe=v.value;if(!Xe)continue;D=Xe.other||Xe.to,S=Xe.to,k=Xe.from}else D=v.evaluate({zoom:c-1},e),S=v.evaluate({zoom:c},e),k=v.evaluate({zoom:c+1},e);"constant"===x.kind?j=Y=J=x.value:(j=x.evaluate({zoom:c-1},e),Y=x.evaluate({zoom:c},e),J=x.evaluate({zoom:c+1},e)),s.addDash(D,j),s.addDash(S,Y),s.addDash(k,J);const ae=s.getKey(D,j),pe=s.getKey(S,Y),Pe=s.getKey(k,J);e.patterns[g.id]={min:ae,mid:pe,max:Pe}}}update(e,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,c)}addFeatures(e,s,c){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,c)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ad)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,s,c,g,v){const x=this.layers[0].layout,D=x.get("line-join").evaluate(e,{}),S=x.get("line-cap").evaluate(e,{}),k=x.get("line-miter-limit"),j=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const Y of s)this.addLine(Y,e,D,S,k,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,v,g)}addLine(e,s,c,g,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ht=0;ht<e.length-1;ht++)this.totalDistance+=e[ht].dist(e[ht+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D="Polygon"===Ug[s.type];let S=e.length;for(;S>=2&&e[S-1].equals(e[S-2]);)S--;let k=0;for(;k<S-1&&e[k].equals(e[k+1]);)k++;if(S<(D?3:2))return;"bevel"===c&&(v=1.05);const j=this.overscaling<=16?122880/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let J,ae,pe,Pe,Xe;this.e1=this.e2=-1,D&&(J=e[S-2],Xe=e[k].sub(J)._unit()._perp());for(let ht=k;ht<S;ht++){if(pe=ht===S-1?D?e[k+1]:void 0:e[ht+1],pe&&e[ht].equals(pe))continue;Xe&&(Pe=Xe),J&&(ae=J),J=e[ht],Xe=pe?pe.sub(J)._unit()._perp():Pe,Pe=Pe||Xe;let Et=Pe.add(Xe);0===Et.x&&0===Et.y||Et._unit();const Pt=Pe.x*Xe.x+Pe.y*Xe.y,Ft=Et.x*Xe.x+Et.y*Xe.y,Lt=0!==Ft?1/Ft:1/0,Ut=2*Math.sqrt(2-2*Ft),yn=Ft<Dp&&ae&&pe,pn=Pe.x*Xe.y-Pe.y*Xe.x>0;if(yn&&ht>k){const ln=J.dist(ae);if(ln>2*j){const tn=J.sub(J.sub(ae)._mult(j/ln)._round());this.updateDistance(ae,tn),this.addCurrentVertex(tn,Pe,0,0,Y),ae=tn}}const fn=ae&&pe;let Pn=fn?c:D?"butt":g;if(fn&&"round"===Pn&&(Lt<x?Pn="miter":Lt<=2&&(Pn="fakeround")),"miter"===Pn&&Lt>v&&(Pn="bevel"),"bevel"===Pn&&(Lt>2&&(Pn="flipbevel"),Lt<v&&(Pn="miter")),ae&&this.updateDistance(ae,J),"miter"===Pn)Et._mult(Lt),this.addCurrentVertex(J,Et,0,0,Y);else if("flipbevel"===Pn){if(Lt>100)Et=Xe.mult(-1);else{const ln=Lt*Pe.add(Xe).mag()/Pe.sub(Xe).mag();Et._perp()._mult(ln*(pn?-1:1))}this.addCurrentVertex(J,Et,0,0,Y),this.addCurrentVertex(J,Et.mult(-1),0,0,Y)}else if("bevel"===Pn||"fakeround"===Pn){const ln=-Math.sqrt(Lt*Lt-1),tn=pn?ln:0,on=pn?0:ln;if(ae&&this.addCurrentVertex(J,Pe,tn,on,Y),"fakeround"===Pn){const cn=Math.round(180*Ut/Math.PI/20);for(let _i=1;_i<cn;_i++){let Bi=_i/cn;if(.5!==Bi){const Ki=Bi-.5;Bi+=Bi*Ki*(Bi-1)*((1.0904+Pt*(Pt*(3.55645-1.43519*Pt)-3.2452))*Ki*Ki+(.848013+Pt*(.215638*Pt-1.06021)))}const $i=Xe.sub(Pe)._mult(Bi)._add(Pe)._unit()._mult(pn?-1:1);this.addHalfVertex(J,$i.x,$i.y,!1,pn,0,Y)}}pe&&this.addCurrentVertex(J,Xe,-tn,-on,Y)}else if("butt"===Pn)this.addCurrentVertex(J,Et,0,0,Y);else if("square"===Pn){const ln=ae?1:-1;ae||this.addCurrentVertex(J,Et,ln,ln,Y),this.addCurrentVertex(J,Et,0,0,Y),ae&&this.addCurrentVertex(J,Et,ln,ln,Y)}else"round"===Pn&&(ae&&(this.addCurrentVertex(J,Pe,0,0,Y),this.addCurrentVertex(J,Pe,1,1,Y,!0)),pe&&(this.addCurrentVertex(J,Xe,-1,-1,Y,!0),this.addCurrentVertex(J,Xe,0,0,Y)));if(yn&&ht<S-1){const ln=J.dist(pe);if(ln>2*j){const tn=J.add(pe.sub(J)._mult(j/ln)._round());this.updateDistance(J,tn),this.addCurrentVertex(tn,Xe,0,0,Y),J=tn}}}}addCurrentVertex(e,s,c,g,v,x=!1){const D=s.y*g-s.x,S=-s.y-s.x*g;this.addHalfVertex(e,s.x+s.y*c,s.y-s.x*c,x,!1,c,v),this.addHalfVertex(e,D,S,x,!0,-g,v)}addHalfVertex({x:e,y:s},c,g,v,x,D,S){this.layoutVertexArray.emplaceBack((e<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*g)+128,1+(0===D?0:D<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const k=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),S.primitiveLength++),x?this.e2=k:this.e1=k}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,s){this.distance+=e.dist(s),this.updateScaledDistance()}}Un("LineBucket",dh,{omit:["layers","patternFeatures"]});const om=new _n({"line-cap":new Tt(ue.layout_line["line-cap"]),"line-join":new Tt(ue.layout_line["line-join"]),"line-miter-limit":new Ke(ue.layout_line["line-miter-limit"]),"line-round-limit":new Ke(ue.layout_line["line-round-limit"]),"line-sort-key":new Tt(ue.layout_line["line-sort-key"])});var hh={paint:new _n({"line-opacity":new Tt(ue.paint_line["line-opacity"]),"line-color":new Tt(ue.paint_line["line-color"]),"line-translate":new Ke(ue.paint_line["line-translate"]),"line-translate-anchor":new Ke(ue.paint_line["line-translate-anchor"]),"line-width":new Tt(ue.paint_line["line-width"]),"line-gap-width":new Tt(ue.paint_line["line-gap-width"]),"line-offset":new Tt(ue.paint_line["line-offset"]),"line-blur":new Tt(ue.paint_line["line-blur"]),"line-dasharray":new rn(ue.paint_line["line-dasharray"]),"line-pattern":new rn(ue.paint_line["line-pattern"]),"line-gradient":new at(ue.paint_line["line-gradient"])}),layout:om};const ph=new class extends Tt{possiblyEvaluate(o,e){return e=new be(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(o,e)}evaluate(o,e,s,c){return e=$e({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(o,e,s,c)}}(hh.paint.properties["line-width"].specification);function ld(o,e){return e>0?e+2*o:o}ph.useIntegerZoom=!0;const fh=Yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mp=Yn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Sp=Yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),mh=Yn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const gh=Yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),su=Yn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Yn([{name:"triangle",components:3,type:"Uint16"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yn([{type:"Float32",name:"offsetX"}]),Yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const cl=128;function Tp(o,e){const{expression:s}=e;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new be(o+1))};if("source"===s.kind)return{kind:"source"};{const{zoomStops:c,interpolationType:g}=s;let v=0;for(;v<c.length&&c[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<c.length&&c[x]<o+1;)x++;x=Math.min(c.length-1,x);const D=c[v],S=c[x];return"composite"===s.kind?{kind:"composite",minZoom:D,maxZoom:S,interpolationType:g}:{kind:"camera",minZoom:D,maxZoom:S,minSize:s.evaluate(new be(D)),maxSize:s.evaluate(new be(S)),interpolationType:g}}}function _h(o,{uSize:e,uSizeT:s},{lowerSize:c,upperSize:g}){return"source"===o.kind?c/cl:"composite"===o.kind?Vi(c/cl,g/cl,s):e}function au(o,e){let s=0,c=0;if("constant"===o.kind)c=o.layoutSize;else if("source"!==o.kind){const{interpolationType:g,minZoom:v,maxZoom:x}=o,D=g?vn(di.interpolationFactor(g,e,v,x),0,1):0;"camera"===o.kind?c=Vi(o.minSize,o.maxSize,D):s=D}return{uSizeT:s,uSize:c}}var Ap=Object.freeze({__proto__:null,getSizeData:Tp,evaluateSizeForFeature:_h,evaluateSizeForZoom:au,SIZE_PACK_FACTOR:cl});function yh(o,e,s){return o.sections.forEach(c=>{c.text=function(g,v,x){const D=v.layout.get("text-transform").evaluate(x,{});return"uppercase"===D?g=g.toLocaleUpperCase():"lowercase"===D&&(g=g.toLocaleLowerCase()),fe.applyArabicShaping&&(g=fe.applyArabicShaping(g)),g}(c.text,e,s)}),o}const vh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var cd=function(o,e,s,c,g){var v,x,D=8*g-c-1,S=(1<<D)-1,k=S>>1,j=-7,Y=s?g-1:0,J=s?-1:1,ae=o[e+Y];for(Y+=J,v=ae&(1<<-j)-1,ae>>=-j,j+=D;j>0;v=256*v+o[e+Y],Y+=J,j-=8);for(x=v&(1<<-j)-1,v>>=-j,j+=c;j>0;x=256*x+o[e+Y],Y+=J,j-=8);if(0===v)v=1-k;else{if(v===S)return x?NaN:1/0*(ae?-1:1);x+=Math.pow(2,c),v-=k}return(ae?-1:1)*x*Math.pow(2,v-c)},sm=function(o,e,s,c,g,v){var x,D,S,k=8*v-g-1,j=(1<<k)-1,Y=j>>1,J=23===g?Math.pow(2,-24)-Math.pow(2,-77):0,ae=c?0:v-1,pe=c?1:-1,Pe=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(D=isNaN(e)?1:0,x=j):(x=Math.floor(Math.log(e)/Math.LN2),e*(S=Math.pow(2,-x))<1&&(x--,S*=2),(e+=x+Y>=1?J/S:J*Math.pow(2,1-Y))*S>=2&&(x++,S/=2),x+Y>=j?(D=0,x=j):x+Y>=1?(D=(e*S-1)*Math.pow(2,g),x+=Y):(D=e*Math.pow(2,Y-1)*Math.pow(2,g),x=0));g>=8;o[s+ae]=255&D,ae+=pe,D/=256,g-=8);for(x=x<<g|D,k+=g;k>0;o[s+ae]=255&x,ae+=pe,x/=256,k-=8);o[s+ae-pe]|=128*Pe},Ec=Dr;function Dr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var ud=4294967296,Ia=1/ud,am=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ul(o){return o.type===Dr.Bytes?o.readVarint()+o.pos:o.pos+1}function Ip(o,e,s){var c=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));s.realloc(c);for(var g=s.pos-1;g>=o;g--)s.buf[g+c]=s.buf[g]}function lm(o,e){for(var s=0;s<o.length;s++)e.writeVarint(o[s])}function jg(o,e){for(var s=0;s<o.length;s++)e.writeSVarint(o[s])}function cm(o,e){for(var s=0;s<o.length;s++)e.writeFloat(o[s])}function Gg(o,e){for(var s=0;s<o.length;s++)e.writeDouble(o[s])}function Hg(o,e){for(var s=0;s<o.length;s++)e.writeBoolean(o[s])}function $g(o,e){for(var s=0;s<o.length;s++)e.writeFixed32(o[s])}function Si(o,e){for(var s=0;s<o.length;s++)e.writeSFixed32(o[s])}function Ru(o,e){for(var s=0;s<o.length;s++)e.writeFixed64(o[s])}function um(o,e){for(var s=0;s<o.length;s++)e.writeSFixed64(o[s])}function Fu(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+16777216*o[e+3]}function cu(o,e,s){o[s]=e,o[s+1]=e>>>8,o[s+2]=e>>>16,o[s+3]=e>>>24}function dd(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}function dm(o,e,s){1===o&&s.readMessage(hm,e)}function hm(o,e,s){if(3===o){const{id:c,bitmap:g,width:v,height:x,left:D,top:S,advance:k}=s.readMessage(pm,{});e.push({id:c,bitmap:new xc({width:v+6,height:x+6},g),metrics:{width:v,height:x,left:D,top:S,advance:k}})}}function pm(o,e,s){1===o?e.id=s.readVarint():2===o?e.bitmap=s.readBytes():3===o?e.width=s.readVarint():4===o?e.height=s.readVarint():5===o?e.left=s.readSVarint():6===o?e.top=s.readSVarint():7===o&&(e.advance=s.readVarint())}function Pp(o){let e=0,s=0;for(const x of o)e+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,D)=>D.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),s),h:1/0}];let g=0,v=0;for(const x of o)for(let D=c.length-1;D>=0;D--){const S=c[D];if(!(x.w>S.w||x.h>S.h)){if(x.x=S.x,x.y=S.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===S.w&&x.h===S.h){const k=c.pop();D<c.length&&(c[D]=k)}else x.h===S.h?(S.x+=x.w,S.w-=x.w):x.w===S.w?(S.y+=x.h,S.h-=x.h):(c.push({x:S.x+x.w,y:S.y,w:S.w-x.w,h:x.h}),S.y+=x.h,S.h-=x.h);break}}return{w:g,h:v,fill:e/(g*v)||0}}Dr.prototype={destroy:function(){this.buf=null},readFields:function(o,e,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),g=c>>3,v=this.pos;this.type=7&c,o(g,e,this),this.pos===v&&this.skip(c)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=Fu(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=dd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Fu(this.buf,this.pos)+Fu(this.buf,this.pos+4)*ud;return this.pos+=8,o},readSFixed64:function(){var o=Fu(this.buf,this.pos)+dd(this.buf,this.pos+4)*ud;return this.pos+=8,o},readFloat:function(){var o=cd(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=cd(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e,s,c=this.buf;return e=127&(s=c[this.pos++]),s<128?e:(e|=(127&(s=c[this.pos++]))<<7,s<128?e:(e|=(127&(s=c[this.pos++]))<<14,s<128?e:(e|=(127&(s=c[this.pos++]))<<21,s<128?e:function(g,v,x){var D,S,k=x.buf;if(D=(112&(S=k[x.pos++]))>>4,S<128||(D|=(127&(S=k[x.pos++]))<<3,S<128)||(D|=(127&(S=k[x.pos++]))<<10,S<128)||(D|=(127&(S=k[x.pos++]))<<17,S<128)||(D|=(127&(S=k[x.pos++]))<<24,S<128)||(D|=(1&(S=k[x.pos++]))<<31,S<128))return function lu(o,e,s){return s?4294967296*e+(o>>>0):4294967296*(e>>>0)+(o>>>0)}(g,D,v);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(s=c[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=12&&am?am.decode(this.buf.subarray(e,o)):function(s,c,g){for(var v="",x=c;x<g;){var D,S,k,j=s[x],Y=null,J=j>239?4:j>223?3:j>191?2:1;if(x+J>g)break;1===J?j<128&&(Y=j):2===J?128==(192&(D=s[x+1]))&&(Y=(31&j)<<6|63&D)<=127&&(Y=null):3===J?(S=s[x+2],128==(192&(D=s[x+1]))&&128==(192&S)&&((Y=(15&j)<<12|(63&D)<<6|63&S)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):4===J&&(S=s[x+2],k=s[x+3],128==(192&(D=s[x+1]))&&128==(192&S)&&128==(192&k)&&((Y=(15&j)<<18|(63&D)<<12|(63&S)<<6|63&k)<=65535||Y>=1114112)&&(Y=null)),null===Y?(Y=65533,J=1):Y>65535&&(Y-=65536,v+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),v+=String.fromCharCode(Y),x+=J}return v}(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==Dr.Bytes)return o.push(this.readVarint(e));var s=ul(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==Dr.Bytes)return o.push(this.readSVarint());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Dr.Bytes)return o.push(this.readBoolean());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Dr.Bytes)return o.push(this.readFloat());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Dr.Bytes)return o.push(this.readDouble());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Dr.Bytes)return o.push(this.readFixed32());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Dr.Bytes)return o.push(this.readSFixed32());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Dr.Bytes)return o.push(this.readFixed64());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Dr.Bytes)return o.push(this.readSFixed64());var e=ul(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=7&o;if(e===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Dr.Fixed32)this.pos+=4;else{if(e!==Dr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Ia),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Ia),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(e,s){var c,g,v,D;if(e>=0?(c=e%4294967296|0,g=e/4294967296|0):(g=~(-e/4294967296),4294967295^(c=~(-e%4294967296))?c=c+1|0:(c=0,g=g+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),v=c,(D=s).buf[D.pos++]=127&v|128,v>>>=7,D.buf[D.pos++]=127&v|128,v>>>=7,D.buf[D.pos++]=127&v|128,v>>>=7,D.buf[D.pos++]=127&v|128,D.buf[D.pos]=127&(v>>>=7),function(v,x){var D=(7&v)<<4;x.buf[x.pos++]|=D|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(g,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var e=this.pos;this.pos=function(c,g,v){for(var x,D,S=0;S<g.length;S++){if((x=g.charCodeAt(S))>55295&&x<57344){if(!D){x>56319||S+1===g.length?(c[v++]=239,c[v++]=191,c[v++]=189):D=x;continue}if(x<56320){c[v++]=239,c[v++]=191,c[v++]=189,D=x;continue}x=D-55296<<10|x-56320|65536,D=null}else D&&(c[v++]=239,c[v++]=191,c[v++]=189,D=null);x<128?c[v++]=x:(x<2048?c[v++]=x>>6|192:(x<65536?c[v++]=x>>12|224:(c[v++]=x>>18|240,c[v++]=x>>12&63|128),c[v++]=x>>6&63|128),c[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-e;s>=128&&Ip(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),sm(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),sm(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,e){this.pos++;var s=this.pos;o(e,this);var c=this.pos-s;c>=128&&Ip(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(o,e,s){this.writeTag(o,Dr.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,lm,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,jg,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,Hg,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,cm,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,Gg,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,$g,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,Si,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,Ru,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,um,e)},writeBytesField:function(o,e){this.writeTag(o,Dr.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,Dr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,Dr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,Dr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,Dr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,Dr.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,Dr.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,Dr.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,Dr.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,Dr.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,Boolean(e))}};class bh{constructor(e,{pixelRatio:s,version:c,stretchX:g,stretchY:v,content:x}){this.paddedRect=e,this.pixelRatio=s,this.stretchX=g,this.stretchY=v,this.content=x,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fm{constructor(e,s){const c={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(e,c,v),this.addImages(s,g,v);const{w:x,h:D}=Pp(v),S=new Aa({width:x||1,height:D||1});for(const k in e){const j=e[k],Y=c[k].paddedRect;Aa.copy(j.data,S,{x:0,y:0},{x:Y.x+1,y:Y.y+1},j.data)}for(const k in s){const j=s[k],Y=g[k].paddedRect,J=Y.x+1,ae=Y.y+1,pe=j.data.width,Pe=j.data.height;Aa.copy(j.data,S,{x:0,y:0},{x:J,y:ae},j.data),Aa.copy(j.data,S,{x:0,y:Pe-1},{x:J,y:ae-1},{width:pe,height:1}),Aa.copy(j.data,S,{x:0,y:0},{x:J,y:ae+Pe},{width:pe,height:1}),Aa.copy(j.data,S,{x:pe-1,y:0},{x:J-1,y:ae},{width:1,height:Pe}),Aa.copy(j.data,S,{x:0,y:0},{x:J+pe,y:ae},{width:1,height:Pe})}this.image=S,this.iconPositions=c,this.patternPositions=g}addImages(e,s,c){for(const g in e){const v=e[g],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};c.push(x),s[g]=new bh(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(e,s){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in e.updatedImages)this.patchUpdatedImage(this.iconPositions[c],e.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],e.getImage(c),s)}patchUpdatedImage(e,s,c){if(!e||!s||e.version===s.version)return;e.version=s.version;const[g,v]=e.tl;c.update(s.data,void 0,{x:g,y:v})}}Un("ImagePosition",bh),Un("ImageAtlas",fm);const ia={horizontal:1,vertical:2,horizontalOnly:3};class pd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,s){const c=new pd;return c.scale=e||1,c.fontStack=s,c}static forImage(e){const s=new pd;return s.imageName=e,s}}class uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,s){const c=new uu;for(let g=0;g<e.sections.length;g++){const v=e.sections[g];v.image?c.addImageSection(v):c.addTextSection(v,s)}return c}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let s="";for(let c=0;c<e.length;c++){const g=e.charCodeAt(c+1)||null,v=e.charCodeAt(c-1)||null;s+=g&&_c(g)&&!vh[e[c+1]]||v&&_c(v)&&!vh[e[c-1]]||!vh[e[c]]?e[c]:vh[e[c]]}return s}(this.text)}trim(){let e=0;for(let c=0;c<this.text.length&&du[this.text.charCodeAt(c)];c++)e++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=e&&du[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)}substring(e,s){const c=new uu;return c.text=this.text.substring(e,s),c.sectionIndex=this.sectionIndex.slice(e,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,s)=>Math.max(e,this.sections[s].scale),0)}addTextSection(e,s){this.text+=e.text,this.sections.push(pd.forText(e.scale,e.fontStack||s));const c=this.sections.length-1;for(let g=0;g<e.text.length;++g)this.sectionIndex.push(c)}addImageSection(e){const s=e.image?e.image.name:"";if(0===s.length)return void Rn("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(pd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Rn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fd(o,e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe){const Xe=uu.fromFeature(o,g);let ht;Y===ia.vertical&&Xe.verticalizePunctuation();const{processBidirectionalText:Et,processStyledBidirectionalText:Pt}=fe;if(Et&&1===Xe.sections.length){ht=[];const Ut=Et(Xe.toString(),Rp(Xe,k,v,e,c,ae,pe));for(const yn of Ut){const pn=new uu;pn.text=yn,pn.sections=Xe.sections;for(let fn=0;fn<yn.length;fn++)pn.sectionIndex.push(0);ht.push(pn)}}else if(Pt){ht=[];const Ut=Pt(Xe.text,Xe.sectionIndex,Rp(Xe,k,v,e,c,ae,pe));for(const yn of Ut){const pn=new uu;pn.text=yn[0],pn.sectionIndex=yn[1],pn.sections=Xe.sections,ht.push(pn)}}else ht=function(Ut,yn){const pn=[],fn=Ut.text;let Pn=0;for(const ln of yn)pn.push(Ut.substring(Pn,ln)),Pn=ln;return Pn<fn.length&&pn.push(Ut.substring(Pn,fn.length)),pn}(Xe,Rp(Xe,k,v,e,c,ae,pe));const Ft=[],Lt={positionedLines:Ft,text:Xe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(Ut,yn,pn,fn,Pn,ln,tn,on,cn,_i,Bi,$i){let Ki=0,Gr=-17,_r=0,xi=0;const yo="right"===on?1:"left"===on?0:.5;let qo=0;for(const lo of Pn){lo.trim();const po=lo.getMaxScale(),Pr=24*(po-1),Vo={positionedGlyphs:[],lineOffset:0};Ut.positionedLines[qo]=Vo;const _s=Vo.positionedGlyphs;let Or=0;if(!lo.length()){Gr+=ln,++qo;continue}for(let vo=0;vo<lo.length();vo++){const Zi=lo.getSection(vo),ka=lo.getSectionIndex(vo),no=lo.getCharCode(vo);let Ms=0,Ko=null,Ka=null,ra=null,Nl=24;const hl=!(cn===ia.horizontal||!Bi&&!jd(no)||Bi&&(du[no]||(ho=no,wu(ho)||F(ho)||O(ho)||zd(ho)||Uc(ho))));if(Zi.imageName){const pl=fn[Zi.imageName];if(!pl)continue;ra=Zi.imageName,Ut.iconsInText=Ut.iconsInText||!0,Ka=pl.paddedRect;const Wi=pl.displaySize;Zi.scale=24*Zi.scale/$i,Ko={width:Wi[0],height:Wi[1],left:1,top:-3,advance:hl?Wi[1]:Wi[0],localGlyph:!1},Ms=Pr+(24-Wi[1]*Zi.scale),Nl=Ko.advance;const Ra=hl?Wi[0]*Zi.scale-24*po:Wi[1]*Zi.scale-24*po;Ra>0&&Ra>Or&&(Or=Ra)}else{const pl=pn[Zi.fontStack],Wi=pl&&pl[no];if(Wi&&Wi.rect)Ka=Wi.rect,Ko=Wi.metrics;else{const Ra=yn[Zi.fontStack],Lh=Ra&&Ra[no];if(!Lh)continue;Ko=Lh.metrics}Ms=24*(po-Zi.scale)}hl?(Ut.verticalizable=!0,_s.push({glyph:no,imageName:ra,x:Ki,y:Gr+Ms,vertical:hl,scale:Zi.scale,localGlyph:Ko.localGlyph,fontStack:Zi.fontStack,sectionIndex:ka,metrics:Ko,rect:Ka}),Ki+=Nl*Zi.scale+_i):(_s.push({glyph:no,imageName:ra,x:Ki,y:Gr+Ms,vertical:hl,scale:Zi.scale,localGlyph:Ko.localGlyph,fontStack:Zi.fontStack,sectionIndex:ka,metrics:Ko,rect:Ka}),Ki+=Ko.advance*Zi.scale+_i)}0!==_s.length&&(_r=Math.max(Ki-_i,_r),wh(_s,0,_s.length-1,yo,Or)),Ki=0;const kr=ln*po+Or;Vo.lineOffset=Math.max(Or,Pr),Gr+=kr,xi=Math.max(kr,xi),++qo}var ho;const zo=Gr- -17,{horizontalAlign:gs,verticalAlign:Yo}=md(tn);(function(lo,po,Pr,Vo,_s,Or,kr,vo,Zi){const ka=(po-Pr)*_s;let no=0;no=Or!==kr?-vo*Vo- -17:(-Vo*Zi+.5)*kr;for(const Ms of lo)for(const Ko of Ms.positionedGlyphs)Ko.x+=ka,Ko.y+=no})(Ut.positionedLines,yo,gs,Yo,_r,xi,ln,zo,Pn.length),Ut.top+=-Yo*zo,Ut.bottom=Ut.top+zo,Ut.left+=-gs*_r,Ut.right=Ut.left+_r}(Lt,e,s,c,ht,x,D,S,Y,k,J,Pe),!function(Ut){for(const yn of Ut)if(0!==yn.positionedGlyphs.length)return!1;return!0}(Ft)&&Lt}const du={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gy={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function mm(o,e,s,c,g,v){if(e.imageName){const x=c[e.imageName];return x?x.displaySize[0]*e.scale*24/v+g:0}{const x=s[e.fontStack],D=x&&x[o];return D?D.metrics.advance*e.scale+g:0}}function xh(o,e,s,c){const g=Math.pow(o-e,2);return c?o<e?g/2:2*g:g+Math.abs(s)*s}function Op(o,e,s){let c=0;return 10===o&&(c-=1e4),s&&(c+=150),40!==o&&65288!==o||(c+=50),41!==e&&65289!==e||(c+=50),c}function kp(o,e,s,c,g,v){let x=null,D=xh(e,s,g,v);for(const S of c){const k=xh(e-S.x,s,g,v)+S.badness;k<=D&&(x=S,D=k)}return{index:o,x:e,priorBreak:x,badness:D}}function Dc(o){return o?Dc(o.priorBreak).concat(o.index):[]}function Rp(o,e,s,c,g,v,x){if("point"!==v)return[];if(!o)return[];const D=[],S=function(J,ae,pe,Pe,Xe,ht){let Et=0;for(let Pt=0;Pt<J.length();Pt++){const Ft=J.getSection(Pt);Et+=mm(J.getCharCode(Pt),Ft,Pe,Xe,ae,ht)}return Et/Math.max(1,Math.ceil(Et/pe))}(o,e,s,c,g,x),k=o.text.indexOf("\u200b")>=0;let j=0;for(let J=0;J<o.length();J++){const ae=o.getSection(J),pe=o.getCharCode(J);if(du[pe]||(j+=mm(pe,ae,c,g,e,x)),J<o.length()-1){const Pe=!((Y=pe)<11904||!(Bn(Y)||nn(Y)||Cr(Y)||hs(Y)||Nr(Y)||P(Y)||Ii(Y)||ve(Y)||Bo(Y)||$o(Y)||hr(Y)||Yl(Y)||Ze(Y)||ie(Y)||Z(Y)||Qn(Y)||ct(Y)||Vd(Y)||ds(Y)||Ma(Y)));(gy[pe]||Pe||ae.imageName)&&D.push(kp(J+1,j,S,D,Op(pe,o.getCharCode(J+1),Pe&&k),!1))}}var Y;return Dc(kp(o.length(),j,S,D,0,!0))}function md(o){let e=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:e,verticalAlign:s}}function wh(o,e,s,c,g){if(!c&&!g)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*c;for(let D=e;D<=s;D++)o[D].x-=x,o[D].y+=g}function Fp(o,e,s){const{horizontalAlign:c,verticalAlign:g}=md(s),v=e[0]-o.displaySize[0]*c,x=e[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function gd(o,e,s,c,g,v){const x=o.image;let D;if(x.content){const Xe=x.content,ht=x.pixelRatio||1;D=[Xe[0]/ht,Xe[1]/ht,x.displaySize[0]-Xe[2]/ht,x.displaySize[1]-Xe[3]/ht]}const S=e.left*v,k=e.right*v;let j,Y,J,ae;"width"===s||"both"===s?(ae=g[0]+S-c[3],Y=g[0]+k+c[1]):(ae=g[0]+(S+k-x.displaySize[0])/2,Y=ae+x.displaySize[0]);const pe=e.top*v,Pe=e.bottom*v;return"height"===s||"both"===s?(j=g[1]+pe-c[0],J=g[1]+Pe+c[2]):(j=g[1]+(pe+Pe-x.displaySize[1])/2,J=j+x.displaySize[1]),{image:x,top:j,right:Y,bottom:J,left:ae,collisionPadding:D}}class Mc extends ye{constructor(e,s,c,g){super(e,s),this.angle=c,void 0!==g&&(this.segment=g)}clone(){return new Mc(this.x,this.y,this.angle,this.segment)}}function Lu(o,e,s,c,g){if(void 0===e.segment)return!0;let v=e,x=e.segment+1,D=0;for(;D>-s/2;){if(x--,x<0)return!1;D-=o[x].dist(v),v=o[x]}D+=o[x].dist(o[x+1]),x++;const S=[];let k=0;for(;D<s/2;){const j=o[x],Y=o[x+1];if(!Y)return!1;let J=o[x-1].angleTo(j)-j.angleTo(Y);for(J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:D,angleDelta:J}),k+=J;D-S[0].distance>c;)k-=S.shift().angleDelta;if(k>g)return!1;x++,D+=j.dist(Y)}return!0}function Ch(o){let e=0;for(let s=0;s<o.length-1;s++)e+=o[s].dist(o[s+1]);return e}function tc(o,e,s){return o?.6*e*s:0}function Lp(o,e){return Math.max(o?o.right-o.left:0,e?e.right-e.left:0)}function Bp(o,e,s,c,g,v){const x=tc(s,g,v),D=Lp(s,c)*v;let S=0;const k=Ch(o)/2;for(let j=0;j<o.length-1;j++){const Y=o[j],J=o[j+1],ae=Y.dist(J);if(S+ae>k){const pe=(k-S)/ae,Pe=Vi(Y.x,J.x,pe),Xe=Vi(Y.y,J.y,pe),ht=new Mc(Pe,Xe,J.angleTo(Y),j);return ht._round(),!x||Lu(o,ht,D,x,e)?ht:void 0}S+=ae}}function Zg(o,e,s,c,g,v,x,D,S){const k=tc(c,v,x),j=Lp(c,g),Y=j*x,J=0===o[0].x||o[0].x===S||0===o[0].y||o[0].y===S;return e-Y<e/4&&(e=Y+e/4),gm(o,J?e/2*D%e:(j/2+2*v)*x*D%e,e,k,s,Y,J,!1,S)}function gm(o,e,s,c,g,v,x,D,S){const k=v/2,j=Ch(o);let Y=0,J=e-s,ae=[];for(let pe=0;pe<o.length-1;pe++){const Pe=o[pe],Xe=o[pe+1],ht=Pe.dist(Xe),Et=Xe.angleTo(Pe);for(;J+s<Y+ht;){J+=s;const Pt=(J-Y)/ht,Ft=Vi(Pe.x,Xe.x,Pt),Lt=Vi(Pe.y,Xe.y,Pt);if(Ft>=0&&Ft<S&&Lt>=0&&Lt<S&&J-k>=0&&J+k<=j){const Ut=new Mc(Ft,Lt,Et,pe);Ut._round(),c&&!Lu(o,Ut,v,c,g)||ae.push(Ut)}}Y+=ht}return D||ae.length||x||(ae=gm(o,Y/2,s,c,g,v,x,!0,S)),ae}function Np(o,e,s,c,g){const v=[];for(let x=0;x<o.length;x++){const D=o[x];let S;for(let k=0;k<D.length-1;k++){let j=D[k],Y=D[k+1];j.x<e&&Y.x<e||(j.x<e?j=new ye(e,j.y+(e-j.x)/(Y.x-j.x)*(Y.y-j.y))._round():Y.x<e&&(Y=new ye(e,j.y+(e-j.x)/(Y.x-j.x)*(Y.y-j.y))._round()),j.y<s&&Y.y<s||(j.y<s?j=new ye(j.x+(s-j.y)/(Y.y-j.y)*(Y.x-j.x),s)._round():Y.y<s&&(Y=new ye(j.x+(s-j.y)/(Y.y-j.y)*(Y.x-j.x),s)._round()),j.x>=c&&Y.x>=c||(j.x>=c?j=new ye(c,j.y+(c-j.x)/(Y.x-j.x)*(Y.y-j.y))._round():Y.x>=c&&(Y=new ye(c,j.y+(c-j.x)/(Y.x-j.x)*(Y.y-j.y))._round()),j.y>=g&&Y.y>=g||(j.y>=g?j=new ye(j.x+(g-j.y)/(Y.y-j.y)*(Y.x-j.x),g)._round():Y.y>=g&&(Y=new ye(j.x+(g-j.y)/(Y.y-j.y)*(Y.x-j.x),g)._round()),S&&j.equals(S[S.length-1])||(S=[j],v.push(S)),S.push(Y)))))}}return v}Un("Anchor",Mc);var hu=_d,Wg=_d,Bu=1e20;function _d(o,e,s,c,g,v){this.fontSize=o||24,this.buffer=void 0===e?3:e,this.cutoff=c||.25,this.fontFamily=g||"sans-serif",this.fontWeight=v||"normal",this.radius=s||8;var x=this.size=this.fontSize+2*this.buffer,D=x+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _m(o,e,s,c,g,v){for(var x=0;x<e;x++)Eh(o,x,e,s,c,g,v);for(var D=0;D<s;D++)Eh(o,D*e,1,e,c,g,v)}function Eh(o,e,s,c,g,v,x){var D,S,k,j;for(v[0]=0,x[0]=-Bu,x[1]=Bu,D=0;D<c;D++)g[D]=o[e+D*s];for(D=1,S=0,k=0;D<c;D++){do{k=(g[D]-g[j=v[S]]+D*D-j*j)/(D-j)/2}while(k<=x[S]&&--S>-1);v[++S]=D,x[S]=k,x[S+1]=Bu}for(D=0,S=0;D<c;D++){for(;x[S+1]<D;)S++;o[e+D*s]=g[j=v[S]]+(D-j)*(D-j)}}_d.prototype._draw=function(o,e){var s,c,g,v,x,D,S,k,j,Y=this.ctx.measureText(o),J=Y.width,ae=2*this.buffer;e&&this.useMetrics?(x=Math.floor(Y.actualBoundingBoxAscent),k=this.buffer+Math.ceil(Y.actualBoundingBoxAscent),D=this.buffer,S=this.buffer,s=(c=Math.min(this.size,Math.ceil(Y.actualBoundingBoxRight-Y.actualBoundingBoxLeft)))+ae,g=(v=Math.min(this.size-D,Math.ceil(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent)))+ae,this.ctx.textBaseline="alphabetic"):(s=c=this.size,g=v=this.size,x=19*this.fontSize/24,D=S=0,k=this.middle,this.ctx.textBaseline="middle"),c&&v&&(this.ctx.clearRect(S,D,c,v),this.ctx.fillText(o,this.buffer,k),j=this.ctx.getImageData(S,D,c,v));var pe=new Uint8ClampedArray(s*g);return function(Pe,Xe,ht,Et,Pt,Ft,Lt){Ft.fill(Bu,0,Xe*ht),Lt.fill(0,0,Xe*ht);for(var Ut=(Xe-Et)/2,yn=0;yn<Pt;yn++)for(var pn=0;pn<Et;pn++){var fn=(yn+Ut)*Xe+pn+Ut,Pn=Pe.data[4*(yn*Et+pn)+3]/255;if(1===Pn)Ft[fn]=0,Lt[fn]=Bu;else if(0===Pn)Ft[fn]=Bu,Lt[fn]=0;else{var ln=Math.max(0,.5-Pn),tn=Math.max(0,Pn-.5);Ft[fn]=ln*ln,Lt[fn]=tn*tn}}}(j,s,g,c,v,this.gridOuter,this.gridInner),_m(this.gridOuter,s,g,this.f,this.v,this.z),_m(this.gridInner,s,g,this.f,this.v,this.z),function(Pe,Xe,ht,Et,Pt,Ft,Lt){for(var Ut=0;Ut<Xe*ht;Ut++){var yn=Math.sqrt(Et[Ut])-Math.sqrt(Pt[Ut]);Pe[Ut]=Math.round(255-255*(yn/Ft+Lt))}}(pe,s,g,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:pe,metrics:{width:c,height:v,sdfWidth:s,sdfHeight:g,top:x,left:0,advance:J}}},_d.prototype.draw=function(o){return this._draw(o,!1).data},_d.prototype.drawWithMetrics=function(o){return this._draw(o,!0)},hu.default=Wg;const yd={none:0,ideographs:1,all:2};class Sc{constructor(e,s,c){this.requestManager=e,this.localGlyphMode=s,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,s){const c=[];for(const g in e)for(const v of e[g])c.push({stack:g,id:v});Bt(c,({stack:g,id:v},x)=>{let D=this.entries[g];D||(D=this.entries[g]={glyphs:{},requests:{},ranges:{}});let S=D.glyphs[v];if(void 0!==S)return void x(null,{stack:g,id:v,glyph:S});if(S=this._tinySDF(D,g,v),S)return D.glyphs[v]=S,void x(null,{stack:g,id:v,glyph:S});const k=Math.floor(v/256);if(256*k>65535)return void x(new Error("glyphs > 65535 not supported"));if(D.ranges[k])return void x(null,{stack:g,id:v,glyph:S});let j=D.requests[k];j||(j=D.requests[k]=[],Sc.loadGlyphRange(g,k,this.url,this.requestManager,(Y,J)=>{if(J){for(const ae in J)this._doesCharSupportLocalGlyph(+ae)||(D.glyphs[+ae]=J[+ae]);D.ranges[k]=!0}for(const ae of j)ae(Y,J);delete D.requests[k]})),j.push((Y,J)=>{Y?x(Y):J&&x(null,{stack:g,id:v,glyph:J[v]||null})})},(g,v)=>{if(g)s(g);else if(v){const x={};for(const{stack:D,id:S,glyph:k}of v)(x[D]||(x[D]={}))[S]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};s(null,x)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==yd.none&&(this.localGlyphMode===yd.all?!!this.localFontFamily:!!this.localFontFamily&&($o(e)||Wa(e)||Ze(e)||ct(e)))}_tinySDF(e,s,c){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(c))return;let v=e.tinySDF;if(!v){let Pe="400";/bold/i.test(s)?Pe="900":/medium/i.test(s)?Pe="500":/light/i.test(s)&&(Pe="200"),v=e.tinySDF=new Sc.TinySDF(48,6,16,.25,g,Pe)}if(this.localGlyphs[v.fontWeight][c])return this.localGlyphs[v.fontWeight][c];const{data:x,metrics:D}=v.drawWithMetrics(String.fromCharCode(c)),{sdfWidth:S,sdfHeight:k,width:j,height:Y,left:J,top:ae,advance:pe}=D;return this.localGlyphs[v.fontWeight][c]={id:c,bitmap:new xc({width:S,height:k},x),metrics:{width:j/2,height:Y/2,left:J/2,top:ae/2-27,advance:pe/2,localGlyph:!0}}}}function Ya(o,e,s,c){const g=[],v=o.image,x=v.pixelRatio,D=v.paddedRect.w-2,S=v.paddedRect.h-2,k=o.right-o.left,j=o.bottom-o.top,Y=v.stretchX||[[0,D]],J=v.stretchY||[[0,S]],ae=(ln,tn)=>ln+tn[1]-tn[0],pe=Y.reduce(ae,0),Pe=J.reduce(ae,0),Xe=D-pe,ht=S-Pe;let Et=0,Pt=pe,Ft=0,Lt=Pe,Ut=0,yn=Xe,pn=0,fn=ht;if(v.content&&c){const ln=v.content;Et=Dh(Y,0,ln[0]),Ft=Dh(J,0,ln[1]),Pt=Dh(Y,ln[0],ln[2]),Lt=Dh(J,ln[1],ln[3]),Ut=ln[0]-Et,pn=ln[1]-Ft,yn=ln[2]-ln[0]-Pt,fn=ln[3]-ln[1]-Lt}const Pn=(ln,tn,on,cn)=>{const _i=Nu(ln.stretch-Et,Pt,k,o.left),Bi=Sh(ln.fixed-Ut,yn,ln.stretch,pe),$i=Nu(tn.stretch-Ft,Lt,j,o.top),Ki=Sh(tn.fixed-pn,fn,tn.stretch,Pe),Gr=Nu(on.stretch-Et,Pt,k,o.left),_r=Sh(on.fixed-Ut,yn,on.stretch,pe),xi=Nu(cn.stretch-Ft,Lt,j,o.top),yo=Sh(cn.fixed-pn,fn,cn.stretch,Pe),qo=new ye(_i,$i),ho=new ye(Gr,$i),zo=new ye(Gr,xi),gs=new ye(_i,xi),Yo=new ye(Bi/x,Ki/x),lo=new ye(_r/x,yo/x),po=e*Math.PI/180;if(po){const _s=Math.sin(po),Or=Math.cos(po),kr=[Or,-_s,_s,Or];qo._matMult(kr),ho._matMult(kr),gs._matMult(kr),zo._matMult(kr)}const Pr=ln.stretch+ln.fixed,Vo=tn.stretch+tn.fixed;return{tl:qo,tr:ho,bl:gs,br:zo,tex:{x:v.paddedRect.x+1+Pr,y:v.paddedRect.y+1+Vo,w:on.stretch+on.fixed-Pr,h:cn.stretch+cn.fixed-Vo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yo,pixelOffsetBR:lo,minFontScaleX:yn/x/k,minFontScaleY:fn/x/j,isSDF:s}};if(c&&(v.stretchX||v.stretchY)){const ln=Mh(Y,Xe,pe),tn=Mh(J,ht,Pe);for(let on=0;on<ln.length-1;on++){const cn=ln[on],_i=ln[on+1];for(let Bi=0;Bi<tn.length-1;Bi++)g.push(Pn(cn,tn[Bi],_i,tn[Bi+1]))}}else g.push(Pn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:S+1}));return g}function Dh(o,e,s){let c=0;for(const g of o)c+=Math.max(e,Math.min(s,g[1]))-Math.max(e,Math.min(s,g[0]));return c}function Mh(o,e,s){const c=[{fixed:-1,stretch:0}];for(const[g,v]of o){const x=c[c.length-1];c.push({fixed:g-x.stretch,stretch:x.stretch}),c.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return c.push({fixed:e+1,stretch:s}),c}function Nu(o,e,s,c){return o/e*s+c}function Sh(o,e,s,c){return o-e*s/c}Sc.loadGlyphRange=function(o,e,s,c,g){const v=256*e,x=v+255,D=c.transformRequest(c.normalizeGlyphsURL(s).replace("{fontstack}",o).replace("{range}",`${v}-${x}`),Be.Glyphs);ee(D,(S,k)=>{if(S)g(S);else if(k){const j={};for(const Y of new Ec(k).readFields(dm,[]))j[Y.id]=Y;g(null,j)}})},Sc.TinySDF=hu;class qg{constructor(e=[],s=_y){if(this.data=e,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:s,compare:c}=this,g=s[e];for(;e>0;){const v=e-1>>1,x=s[v];if(c(g,x)>=0)break;s[e]=x,e=v}s[e]=g}_down(e){const{data:s,compare:c}=this,g=this.length>>1,v=s[e];for(;e<g;){let x=1+(e<<1),D=s[x];const S=x+1;if(S<this.length&&c(s[S],D)<0&&(x=S,D=s[S]),c(D,v)>=0)break;s[e]=D,e=x}s[e]=v}}function _y(o,e){return o<e?-1:o>e?1:0}function yy(o,e=1,s=!1){let c=1/0,g=1/0,v=-1/0,x=-1/0;const D=o[0];for(let ae=0;ae<D.length;ae++){const pe=D[ae];(!ae||pe.x<c)&&(c=pe.x),(!ae||pe.y<g)&&(g=pe.y),(!ae||pe.x>v)&&(v=pe.x),(!ae||pe.y>x)&&(x=pe.y)}const S=Math.min(v-c,x-g);let k=S/2;const j=new qg([],Th);if(0===S)return new ye(c,g);for(let ae=c;ae<v;ae+=S)for(let pe=g;pe<x;pe+=S)j.push(new pu(ae+k,pe+k,k,o));let Y=function(ae){let pe=0,Pe=0,Xe=0;const ht=ae[0];for(let Et=0,Pt=ht.length,Ft=Pt-1;Et<Pt;Ft=Et++){const Lt=ht[Et],Ut=ht[Ft],yn=Lt.x*Ut.y-Ut.x*Lt.y;Pe+=(Lt.x+Ut.x)*yn,Xe+=(Lt.y+Ut.y)*yn,pe+=3*yn}return new pu(Pe/pe,Xe/pe,0,ae)}(o),J=j.length;for(;j.length;){const ae=j.pop();(ae.d>Y.d||!Y.d)&&(Y=ae,s&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,J)),ae.max-Y.d<=e||(k=ae.h/2,j.push(new pu(ae.p.x-k,ae.p.y-k,k,o)),j.push(new pu(ae.p.x+k,ae.p.y-k,k,o)),j.push(new pu(ae.p.x-k,ae.p.y+k,k,o)),j.push(new pu(ae.p.x+k,ae.p.y+k,k,o)),J+=4)}return s&&(console.log(`num probes: ${J}`),console.log(`best distance: ${Y.d}`)),Y.p}function Th(o,e){return e.max-o.max}function pu(o,e,s,c){this.p=new ye(o,e),this.h=s,this.d=function(g,v){let x=!1,D=1/0;for(let S=0;S<v.length;S++){const k=v[S];for(let j=0,Y=k.length,J=Y-1;j<Y;J=j++){const ae=k[j],pe=k[J];ae.y>g.y!=pe.y>g.y&&g.x<(pe.x-ae.x)*(g.y-ae.y)/(pe.y-ae.y)+ae.x&&(x=!x),D=Math.min(D,bg(g,ae,pe))}}return(x?1:-1)*Math.sqrt(D)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const zp=Number.POSITIVE_INFINITY;function ym(o,e){return e[1]!==zp?function(s,c,g){let v=0,x=0;switch(c=Math.abs(c),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(s){case"top-right":case"bottom-right":case"right":v=-c;break;case"top-left":case"bottom-left":case"left":v=c}return[v,x]}(o,e[0],e[1]):function(s,c){let g=0,v=0;c<0&&(c=0);const x=c/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-c;break;case"top":v=c-7}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=c;break;case"right":g=-c}return[g,v]}(o,e[0])}function zu(o,e,s,c,g,v,x,D){o.createArrays(),o.tilePixelRatio=gr/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const S=o.layers[0].layout,k=o.layers[0]._unevaluatedLayout._values,j={};if("composite"===o.textSizeData.kind){const{minZoom:pe,maxZoom:Pe}=o.textSizeData;j.compositeTextSizes=[k["text-size"].possiblyEvaluate(new be(pe),x),k["text-size"].possiblyEvaluate(new be(Pe),x)]}if("composite"===o.iconSizeData.kind){const{minZoom:pe,maxZoom:Pe}=o.iconSizeData;j.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new be(pe),x),k["icon-size"].possiblyEvaluate(new be(Pe),x)]}j.layoutTextSize=k["text-size"].possiblyEvaluate(new be(D+1),x),j.layoutIconSize=k["icon-size"].possiblyEvaluate(new be(D+1),x),j.textMaxSize=k["text-size"].possiblyEvaluate(new be(18),x);const Y="map"===S.get("text-rotation-alignment")&&"point"!==S.get("symbol-placement"),J=S.get("text-keep-upright"),ae=S.get("text-size");for(const pe of o.features){const Pe=S.get("text-font").evaluate(pe,{},x).join(","),Xe=ae.evaluate(pe,{},x),ht=j.layoutTextSize.evaluate(pe,{},x),Et=(j.layoutIconSize.evaluate(pe,{},x),{horizontal:{},vertical:void 0}),Pt=pe.text;let Ft,Lt=[0,0];if(Pt){const pn=Pt.toString(),fn=24*S.get("text-letter-spacing").evaluate(pe,{},x),Pn=24*S.get("text-line-height").evaluate(pe,{},x),ln=Xu(pn)?fn:0,tn=S.get("text-anchor").evaluate(pe,{},x),on=S.get("text-variable-anchor");if(!on){const Ki=S.get("text-radial-offset").evaluate(pe,{},x);Lt=Ki?ym(tn,[24*Ki,zp]):S.get("text-offset").evaluate(pe,{},x).map(Gr=>24*Gr)}let cn=Y?"center":S.get("text-justify").evaluate(pe,{},x);const _i=S.get("symbol-placement"),Bi="point"===_i?24*S.get("text-max-width").evaluate(pe,{},x):0,$i=()=>{o.allowVerticalPlacement&&Ud(pn)&&(Et.vertical=fd(Pt,e,s,g,Pe,Bi,Pn,tn,"left",ln,Lt,ia.vertical,!0,_i,ht,Xe))};if(!Y&&on){const Ki="auto"===cn?on.map(_r=>Vp(_r)):[cn];let Gr=!1;for(let _r=0;_r<Ki.length;_r++){const xi=Ki[_r];if(!Et.horizontal[xi])if(Gr)Et.horizontal[xi]=Et.horizontal[0];else{const yo=fd(Pt,e,s,g,Pe,Bi,Pn,"center",xi,ln,Lt,ia.horizontal,!1,_i,ht,Xe);yo&&(Et.horizontal[xi]=yo,Gr=1===yo.positionedLines.length)}}$i()}else{"auto"===cn&&(cn=Vp(tn));const Ki=fd(Pt,e,s,g,Pe,Bi,Pn,tn,cn,ln,Lt,ia.horizontal,!1,_i,ht,Xe);Ki&&(Et.horizontal[cn]=Ki),$i(),Ud(pn)&&Y&&J&&(Et.vertical=fd(Pt,e,s,g,Pe,Bi,Pn,tn,cn,ln,Lt,ia.vertical,!1,_i,ht,Xe))}}let Ut=!1;if(pe.icon&&pe.icon.name){const pn=c[pe.icon.name];pn&&(Ft=Fp(g[pe.icon.name],S.get("icon-offset").evaluate(pe,{},x),S.get("icon-anchor").evaluate(pe,{},x)),Ut=pn.sdf,void 0===o.sdfIcons?o.sdfIcons=pn.sdf:o.sdfIcons!==pn.sdf&&Rn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pn.pixelRatio!==o.pixelRatio||0!==S.get("icon-rotate").constantOr(1))&&(o.iconsNeedLinear=!0))}const yn=Up(Et.horizontal)||Et.vertical;o.iconsInText||(o.iconsInText=!!yn&&yn.iconsInText),(yn||Ft)&&vm(o,pe,Et,Ft,c,j,ht,0,Lt,Ut,x)}v&&o.generateCollisionDebugBuffers(D,o.collisionBoxArray)}function Vp(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vm(o,e,s,c,g,v,x,D,S,k,j){let Y=v.textMaxSize.evaluate(e,{},j);void 0===Y&&(Y=x);const J=o.layers[0].layout,ae=J.get("icon-offset").evaluate(e,{},j),pe=Up(s.horizontal),Pe=x/24,Xe=o.tilePixelRatio*Y/24,ht=o.tilePixelRatio*J.get("symbol-spacing"),Et=J.get("text-padding")*o.tilePixelRatio,Pt=J.get("icon-padding")*o.tilePixelRatio,Ft=st(J.get("text-max-angle")),Lt="map"===J.get("text-rotation-alignment")&&"point"!==J.get("symbol-placement"),Ut="map"===J.get("icon-rotation-alignment")&&"point"!==J.get("symbol-placement"),yn=J.get("symbol-placement"),pn=ht/2,fn=J.get("icon-text-fit");let Pn;c&&"none"!==fn&&(o.allowVerticalPlacement&&s.vertical&&(Pn=gd(c,s.vertical,fn,J.get("icon-text-fit-padding"),ae,Pe)),pe&&(c=gd(c,pe,fn,J.get("icon-text-fit-padding"),ae,Pe)));const ln=(tn,on)=>{on.x<0||on.x>=gr||on.y<0||on.y>=gr||function(cn,_i,Bi,$i,Ki,Gr,_r,xi,yo,qo,ho,zo,gs,Yo,lo,po,Pr,Vo,_s,Or,kr,vo,Zi,ka){const no=cn.addToLineVertexArray(_i,Bi);let Ms,Ko,Ka,ra,Nl,hl,pl,Wi=0,Ra=0,Lh=0,a_=0,Dd=-1,Lm=-1;const sc={};let Bh=Cu(""),Md=0,Hu=0;if(void 0===xi._unevaluatedLayout.getValue("text-radial-offset")?[Md,Hu]=xi.layout.get("text-offset").evaluate(Or,{},Zi).map(Ss=>24*Ss):(Md=24*xi.layout.get("text-radial-offset").evaluate(Or,{},Zi),Hu=zp),cn.allowVerticalPlacement&&$i.vertical){const Ss=$i.vertical;if(Yo)hl=jp(Ss),_r&&(pl=jp(_r));else{const ha=xi.layout.get("text-rotate").evaluate(Or,{},Zi)+90;Ka=Ah(yo,_i,qo,ho,zo,Ss,gs,ha),_r&&(ra=Ah(yo,_i,qo,ho,zo,_r,Pr,ha))}}if(Ki){const Ss=xi.layout.get("icon-rotate").evaluate(Or,{},Zi),ha="none"!==xi.layout.get("icon-text-fit"),Td=Ya(Ki,Ss,vo,ha),Bm=_r?Ya(_r,Ss,vo,ha):void 0;Ko=Ah(yo,_i,qo,ho,zo,Ki,Pr,Ss),Wi=4*Td.length;const Ad=cn.iconSizeData;let bo=null;"source"===Ad.kind?(bo=[cl*xi.layout.get("icon-size").evaluate(Or,{},Zi)],bo[0]>dl&&Rn(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Ad.kind&&(bo=[cl*kr.compositeIconSizes[0].evaluate(Or,{},Zi),cl*kr.compositeIconSizes[1].evaluate(Or,{},Zi)],(bo[0]>dl||bo[1]>dl)&&Rn(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),cn.addSymbols(cn.icon,Td,bo,_s,Vo,Or,!1,_i,no.lineStartIndex,no.lineLength,-1,Zi),Dd=cn.icon.placedSymbolArray.length-1,Bm&&(Ra=4*Bm.length,cn.addSymbols(cn.icon,Bm,bo,_s,Vo,Or,ia.vertical,_i,no.lineStartIndex,no.lineLength,-1,Zi),Lm=cn.icon.placedSymbolArray.length-1)}for(const Ss in $i.horizontal){const ha=$i.horizontal[Ss];Ms||(Bh=Cu(ha.text),Yo?Nl=jp(ha):Ms=Ah(yo,_i,qo,ho,zo,ha,gs,xi.layout.get("text-rotate").evaluate(Or,{},Zi)));const Td=1===ha.positionedLines.length;if(Lh+=bm(cn,_i,ha,Gr,xi,Yo,Or,lo,no,$i.vertical?ia.horizontal:ia.horizontalOnly,Td?Object.keys($i.horizontal):[Ss],sc,Dd,kr,Zi),Td)break}$i.vertical&&(a_+=bm(cn,_i,$i.vertical,Gr,xi,Yo,Or,lo,no,ia.vertical,["vertical"],sc,Lm,kr,Zi));let Fa=-1;const Sd=(Ss,ha)=>Ss?Math.max(Ss,ha):ha;Fa=Sd(Nl,Fa),Fa=Sd(hl,Fa),Fa=Sd(pl,Fa);const fl=Fa>-1?1:0;fl&&(Fa*=ka/24),cn.glyphOffsetArray.length>=fu.MAX_GLYPHS&&Rn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Or.sortKey&&cn.addToSortKeyRanges(cn.symbolInstances.length,Or.sortKey),cn.symbolInstances.emplaceBack(_i.x,_i.y,sc.right>=0?sc.right:-1,sc.center>=0?sc.center:-1,sc.left>=0?sc.left:-1,sc.vertical||-1,Dd,Lm,Bh,void 0!==Ms?Ms:cn.collisionBoxArray.length,void 0!==Ms?Ms+1:cn.collisionBoxArray.length,void 0!==Ka?Ka:cn.collisionBoxArray.length,void 0!==Ka?Ka+1:cn.collisionBoxArray.length,void 0!==Ko?Ko:cn.collisionBoxArray.length,void 0!==Ko?Ko+1:cn.collisionBoxArray.length,ra||cn.collisionBoxArray.length,ra?ra+1:cn.collisionBoxArray.length,qo,Lh,a_,Wi,Ra,fl,0,Md,Hu,Fa)}(o,on,tn,s,c,g,Pn,o.layers[0],o.collisionBoxArray,e.index,e.sourceLayerIndex,o.index,Et,Lt,S,0,Pt,Ut,ae,e,v,k,j,x)};if("line"===yn)for(const tn of Np(e.geometry,0,0,gr,gr)){const on=Zg(tn,ht,Ft,s.vertical||pe,c,24,Xe,o.overscaling,gr);for(const cn of on){const _i=pe;_i&&Yg(o,_i.text,pn,cn)||ln(tn,cn)}}else if("line-center"===yn){for(const tn of e.geometry)if(tn.length>1){const on=Bp(tn,Ft,s.vertical||pe,c,24,Xe);on&&ln(tn,on)}}else if("Polygon"===e.type)for(const tn of vp(e.geometry,0)){const on=yy(tn,16);ln(tn[0],new Mc(on.x,on.y,0))}else if("LineString"===e.type)for(const tn of e.geometry)ln(tn,new Mc(tn[0].x,tn[0].y,0));else if("Point"===e.type)for(const tn of e.geometry)for(const on of tn)ln([on],new Mc(on.x,on.y,0))}const dl=32640;function bm(o,e,s,c,g,v,x,D,S,k,j,Y,J,ae,pe){const Pe=function(Et,Pt,Ft,Lt,Ut,yn,pn,fn){const Pn=Lt.layout.get("text-rotate").evaluate(yn,{})*Math.PI/180,ln=[];for(const tn of Pt.positionedLines)for(const on of tn.positionedGlyphs){if(!on.rect)continue;const cn=on.rect||{};let _i=4,Bi=!0,$i=1,Ki=0;const Gr=(Ut||fn)&&on.vertical,_r=on.metrics.advance*on.scale/2;if(fn&&Pt.verticalizable){const kr=24*(on.scale-1),vo=(24-on.metrics.width*on.scale)/2;Ki=tn.lineOffset/2-(on.imageName?-vo:kr)}if(on.imageName){const kr=pn[on.imageName];Bi=kr.sdf,$i=kr.pixelRatio,_i=1/$i}const xi=Ut?[on.x+_r,on.y]:[0,0];let yo=Ut?[0,0]:[on.x+_r+Ft[0],on.y+Ft[1]-Ki],qo=[0,0];Gr&&(qo=yo,yo=[0,0]);const ho=(on.metrics.left-_i)*on.scale-_r+yo[0],zo=(-on.metrics.top-_i)*on.scale+yo[1],gs=ho+cn.w*on.scale/($i*(on.localGlyph?2:1)),Yo=zo+cn.h*on.scale/($i*(on.localGlyph?2:1)),lo=new ye(ho,zo),po=new ye(gs,zo),Pr=new ye(ho,Yo),Vo=new ye(gs,Yo);if(Gr){const kr=new ye(-_r,_r- -17),vo=-Math.PI/2,Zi=12-_r,ka=new ye(22-Zi,-(on.imageName?Zi:0)),no=new ye(...qo);lo._rotateAround(vo,kr)._add(ka)._add(no),po._rotateAround(vo,kr)._add(ka)._add(no),Pr._rotateAround(vo,kr)._add(ka)._add(no),Vo._rotateAround(vo,kr)._add(ka)._add(no)}if(Pn){const kr=Math.sin(Pn),vo=Math.cos(Pn),Zi=[vo,-kr,kr,vo];lo._matMult(Zi),po._matMult(Zi),Pr._matMult(Zi),Vo._matMult(Zi)}const _s=new ye(0,0),Or=new ye(0,0);ln.push({tl:lo,tr:po,bl:Pr,br:Vo,tex:cn,writingMode:Pt.writingMode,glyphOffset:xi,sectionIndex:on.sectionIndex,isSDF:Bi,pixelOffsetTL:_s,pixelOffsetBR:Or,minFontScaleX:0,minFontScaleY:0})}return ln}(0,s,D,g,v,x,c,o.allowVerticalPlacement),Xe=o.textSizeData;let ht=null;"source"===Xe.kind?(ht=[cl*g.layout.get("text-size").evaluate(x,{},pe)],ht[0]>dl&&Rn(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===Xe.kind&&(ht=[cl*ae.compositeTextSizes[0].evaluate(x,{},pe),cl*ae.compositeTextSizes[1].evaluate(x,{},pe)],(ht[0]>dl||ht[1]>dl)&&Rn(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Pe,ht,D,v,x,k,e,S.lineStartIndex,S.lineLength,J,pe);for(const Et of j)Y[Et]=o.text.placedSymbolArray.length-1;return 4*Pe.length}function Up(o){for(const e in o)return o[e];return null}function Ah(o,e,s,c,g,v,x,D){let S=v.top,k=v.bottom,j=v.left,Y=v.right;const J=v.collisionPadding;if(J&&(j-=J[0],S-=J[1],Y+=J[2],k+=J[3]),D){const ae=new ye(j,S),pe=new ye(Y,S),Pe=new ye(j,k),Xe=new ye(Y,k),ht=st(D);ae._rotate(ht),pe._rotate(ht),Pe._rotate(ht),Xe._rotate(ht),j=Math.min(ae.x,pe.x,Pe.x,Xe.x),Y=Math.max(ae.x,pe.x,Pe.x,Xe.x),S=Math.min(ae.y,pe.y,Pe.y,Xe.y),k=Math.max(ae.y,pe.y,Pe.y,Xe.y)}return o.emplaceBack(e.x,e.y,j,S,Y,k,x,s,c,g),o.length-1}function jp(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const e=o.bottom-o.top;return e>0?Math.max(10,e):null}function Yg(o,e,s,c){const g=o.compareText;if(e in g){const v=g[e];for(let x=v.length-1;x>=0;x--)if(c.dist(v[x])<s)return!0}else g[e]=[];return g[e].push(c),!1}const Kg=ru.VectorTileFeature.types,Xg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vd(o,e,s,c,g,v,x,D,S,k,j,Y,J){const ae=D?Math.min(dl,Math.round(D[0])):0,pe=D?Math.min(dl,Math.round(D[1])):0;o.emplaceBack(e,s,Math.round(32*c),Math.round(32*g),v,x,(ae<<1)+(S?1:0),pe,16*k,16*j,256*Y,256*J)}function Gp(o,e,s){o.emplaceBack(e.x,e.y,s),o.emplaceBack(e.x,e.y,s),o.emplaceBack(e.x,e.y,s),o.emplaceBack(e.x,e.y,s)}function xm(o){for(const e of o.sections)if(_(e.text))return!0;return!1}class Ih{constructor(e){this.layoutVertexArray=new mr,this.indexArray=new Li,this.programConfigurations=e,this.segments=new rs,this.dynamicLayoutVertexArray=new ns,this.opacityVertexArray=new is,this.placedSymbolArray=new qa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,s,c,g){this.isEmpty()||(c&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Mp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Xg,!0),this.opacityVertexBuffer.itemSize=1),(c||g)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Un("SymbolBuffers",Ih);class bd{constructor(e,s,c){this.layoutVertexArray=new e,this.layoutAttributes=s,this.indexArray=new c,this.segments=new rs,this.collisionVertexArray=new go,this.collisionVertexArrayExt=new ns}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Sp.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,mh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Un("CollisionBuffers",bd);class fu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(x=>x.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tu([]),this.placementViewportMatrix=Tu([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tp(this.zoom,s["text-size"]),this.iconSizeData=Tp(this.zoom,s["icon-size"]);const c=this.layers[0].layout,g=c.get("symbol-sort-key"),v=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==v&&void 0!==g.constantOr(1),this.sortFeaturesByY=("viewport-y"===v||"auto"===v&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===c.get("symbol-placement")&&(this.writingModes=c.get("text-writing-mode").map(x=>ia[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=e.sourceID}createArrays(){this.text=new Ih(new $c(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Ih(new $c(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new hg,this.lineVertexArray=new ip,this.symbolInstances=new Of}calculateGlyphDependencies(e,s,c,g,v){for(let x=0;x<e.length;x++)if(s[e.charCodeAt(x)]=!0,(c||g)&&v){const D=vh[e.charAt(x)];D&&(s[D.charCodeAt(0)]=!0)}}populate(e,s,c){const g=this.layers[0],v=g.layout,x=v.get("text-font"),D=v.get("text-field"),S=v.get("icon-image"),k=("constant"!==D.value.kind||D.value.value instanceof Br&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&("constant"!==x.value.kind||x.value.value.length>0),j="constant"!==S.value.kind||!!S.value.value||Object.keys(S.parameters).length>0,Y=v.get("symbol-sort-key");if(this.features=[],!k&&!j)return;const J=s.iconDependencies,ae=s.glyphDependencies,pe=s.availableImages,Pe=new be(this.zoom);for(const{feature:Xe,id:ht,index:Et,sourceLayerIndex:Pt}of e){const Ft=g._featureFilter.needGeometry,Lt=Su(Xe,Ft);if(!g._featureFilter.filter(Pe,Lt,c))continue;let Ut,yn;if(Ft||(Lt.geometry=Zc(Xe)),k){const fn=g.getValueAndResolveTokens("text-field",Lt,c,pe),Pn=Br.factory(fn);xm(Pn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===se()||this.hasRTLText&&fe.isParsed())&&(Ut=yh(Pn,g,Lt))}if(j){const fn=g.getValueAndResolveTokens("icon-image",Lt,c,pe);yn=fn instanceof Xr?fn:Xr.fromString(fn)}if(!Ut&&!yn)continue;const pn=this.sortFeaturesByKey?Y.evaluate(Lt,{},c):void 0;if(this.features.push({id:ht,text:Ut,icon:yn,index:Et,sourceLayerIndex:Pt,geometry:Lt.geometry,properties:Xe.properties,type:Kg[Xe.type],sortKey:pn}),yn&&(J[yn.name]=!0),Ut){const fn=x.evaluate(Lt,{},c).join(","),Pn="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ia.vertical)>=0;for(const ln of Ut.sections)if(ln.image)J[ln.image.name]=!0;else{const tn=Ud(Ut.toString()),on=ln.fontStack||fn,cn=ae[on]=ae[on]||{};this.calculateGlyphDependencies(ln.text,cn,Pn,this.allowVerticalPlacement,tn)}}}"line"===v.get("symbol-placement")&&(this.features=function(Xe){const ht={},Et={},Pt=[];let Ft=0;function Lt(fn){Pt.push(Xe[fn]),Ft++}function Ut(fn,Pn,ln){const tn=Et[fn];return delete Et[fn],Et[Pn]=tn,Pt[tn].geometry[0].pop(),Pt[tn].geometry[0]=Pt[tn].geometry[0].concat(ln[0]),tn}function yn(fn,Pn,ln){const tn=ht[Pn];return delete ht[Pn],ht[fn]=tn,Pt[tn].geometry[0].shift(),Pt[tn].geometry[0]=ln[0].concat(Pt[tn].geometry[0]),tn}function pn(fn,Pn,ln){const tn=ln?Pn[0][Pn[0].length-1]:Pn[0][0];return`${fn}:${tn.x}:${tn.y}`}for(let fn=0;fn<Xe.length;fn++){const Pn=Xe[fn],ln=Pn.geometry,tn=Pn.text?Pn.text.toString():null;if(!tn){Lt(fn);continue}const on=pn(tn,ln),cn=pn(tn,ln,!0);if(on in Et&&cn in ht&&Et[on]!==ht[cn]){const _i=yn(on,cn,ln),Bi=Ut(on,cn,Pt[_i].geometry);delete ht[on],delete Et[cn],Et[pn(tn,Pt[Bi].geometry,!0)]=Bi,Pt[_i].geometry=null}else on in Et?Ut(on,cn,ln):cn in ht?yn(on,cn,ln):(Lt(fn),ht[on]=Ft-1,Et[cn]=Ft-1)}return Pt.filter(fn=>fn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Xe,ht)=>Xe.sortKey-ht.sortKey)}update(e,s,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,s,this.layers,c),this.icon.programConfigurations.updatePaintArrays(e,s,this.layers,c))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,s){const c=this.lineVertexArray.length;if(void 0!==e.segment){let g=e.dist(s[e.segment+1]),v=e.dist(s[e.segment]);const x={};for(let D=e.segment+1;D<s.length;D++)x[D]={x:s[D].x,y:s[D].y,tileUnitDistanceFromAnchor:g},D<s.length-1&&(g+=s[D+1].dist(s[D]));for(let D=e.segment||0;D>=0;D--)x[D]={x:s[D].x,y:s[D].y,tileUnitDistanceFromAnchor:v},D>0&&(v+=s[D-1].dist(s[D]));for(let D=0;D<s.length;D++){const S=x[D];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(e,s,c,g,v,x,D,S,k,j,Y,J){const ae=e.indexArray,pe=e.layoutVertexArray,Pe=e.segments.prepareSegment(4*s.length,pe,ae,this.canOverlap?x.sortKey:void 0),Xe=this.glyphOffsetArray.length,ht=Pe.vertexLength,Et=this.allowVerticalPlacement&&D===ia.vertical?Math.PI/2:0,Pt=x.text&&x.text.sections;for(let Ft=0;Ft<s.length;Ft++){const{tl:Lt,tr:Ut,bl:yn,br:pn,tex:fn,pixelOffsetTL:Pn,pixelOffsetBR:ln,minFontScaleX:tn,minFontScaleY:on,glyphOffset:cn,isSDF:_i,sectionIndex:Bi}=s[Ft],$i=Pe.vertexLength,Ki=cn[1];vd(pe,S.x,S.y,Lt.x,Ki+Lt.y,fn.x,fn.y,c,_i,Pn.x,Pn.y,tn,on),vd(pe,S.x,S.y,Ut.x,Ki+Ut.y,fn.x+fn.w,fn.y,c,_i,ln.x,Pn.y,tn,on),vd(pe,S.x,S.y,yn.x,Ki+yn.y,fn.x,fn.y+fn.h,c,_i,Pn.x,ln.y,tn,on),vd(pe,S.x,S.y,pn.x,Ki+pn.y,fn.x+fn.w,fn.y+fn.h,c,_i,ln.x,ln.y,tn,on),Gp(e.dynamicLayoutVertexArray,S,Et),ae.emplaceBack($i,$i+1,$i+2),ae.emplaceBack($i+1,$i+2,$i+3),Pe.vertexLength+=4,Pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(cn[0]),Ft!==s.length-1&&Bi===s[Ft+1].sectionIndex||e.programConfigurations.populatePaintArrays(pe.length,x,x.index,{},J,Pt&&Pt[Bi])}e.placedSymbolArray.emplaceBack(S.x,S.y,Xe,this.glyphOffsetArray.length-Xe,ht,k,j,S.segment,c?c[0]:0,c?c[1]:0,g[0],g[1],D,0,!1,0,Y)}_commitLayoutVertex(e,s,c,g,v){e.emplaceBack(s.x,s.y,c,g,Math.round(v.x),Math.round(v.y))}_addCollisionDebugVertices(e,s,c,g,v){const x=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),D=x.vertexLength,S=v.anchorX,k=v.anchorY;for(let Y=0;Y<4;Y++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(s,-e.padding,-e.padding),c.collisionVertexArrayExt.emplaceBack(s,e.padding,-e.padding),c.collisionVertexArrayExt.emplaceBack(s,e.padding,e.padding),c.collisionVertexArrayExt.emplaceBack(s,-e.padding,e.padding),this._commitLayoutVertex(c.layoutVertexArray,g,S,k,new ye(e.x1,e.y1)),this._commitLayoutVertex(c.layoutVertexArray,g,S,k,new ye(e.x2,e.y1)),this._commitLayoutVertex(c.layoutVertexArray,g,S,k,new ye(e.x2,e.y2)),this._commitLayoutVertex(c.layoutVertexArray,g,S,k,new ye(e.x1,e.y2)),x.vertexLength+=4;const j=c.indexArray;j.emplaceBack(D,D+1),j.emplaceBack(D+1,D+2),j.emplaceBack(D+2,D+3),j.emplaceBack(D+3,D),x.primitiveLength+=4}_addTextDebugCollisionBoxes(e,s,c,g,v,x){for(let D=g;D<v;D++){const S=c.get(D),k=this.getSymbolInstanceTextSize(e,x,s,D);this._addCollisionDebugVertices(S,k,this.textCollisionBox,S.anchorPoint,x)}}_addIconDebugCollisionBoxes(e,s,c,g,v,x){for(let D=g;D<v;D++){const S=c.get(D),k=this.getSymbolInstanceIconSize(e,s,D);this._addCollisionDebugVertices(S,k,this.iconCollisionBox,S.anchorPoint,x)}}generateCollisionDebugBuffers(e,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bd(ps,gh.members,No),this.iconCollisionBox=new bd(ps,gh.members,No);const c=au(this.iconSizeData,e),g=au(this.textSizeData,e);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(g,e,s,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(g,e,s,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(c,e,s,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(c,e,s,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(e,s,c,g){const v=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:g),x=_h(this.textSizeData,e,v)/24;return this.tilePixelRatio*x}getSymbolInstanceIconSize(e,s,c){const g=this.icon.placedSymbolArray.get(c),v=_h(this.iconSizeData,e,g);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(e,s,c){e.emplaceBack(s,-c,-c),e.emplaceBack(s,c,-c),e.emplaceBack(s,c,c),e.emplaceBack(s,-c,c)}_updateTextDebugCollisionBoxes(e,s,c,g,v,x){for(let D=g;D<v;D++){const S=c.get(D),k=this.getSymbolInstanceTextSize(e,x,s,D);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,S.padding)}}_updateIconDebugCollisionBoxes(e,s,c,g,v){for(let x=g;x<v;x++){const D=c.get(x),S=this.getSymbolInstanceIconSize(e,s,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,D.padding)}}updateCollisionDebugBuffers(e,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=au(this.iconSizeData,e),g=au(this.textSizeData,e);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(g,e,s,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(g,e,s,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(c,e,s,x.iconBoxStartIndex,x.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(c,e,s,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,s,c,g,v,x,D,S,k){const j={};for(let Y=s;Y<c;Y++){const J=e.get(Y);j.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,padding:J.padding,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.textFeatureIndex=J.featureIndex;break}for(let Y=g;Y<v;Y++){const J=e.get(Y);j.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,padding:J.padding,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalTextFeatureIndex=J.featureIndex;break}for(let Y=x;Y<D;Y++){const J=e.get(Y);j.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,padding:J.padding,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.iconFeatureIndex=J.featureIndex;break}for(let Y=S;Y<k;Y++){const J=e.get(Y);j.verticalIconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,padding:J.padding,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalIconFeatureIndex=J.featureIndex;break}return j}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,s){const c=e.placedSymbolArray.get(s),g=c.vertexStartIndex+4*c.numGlyphs;for(let v=c.vertexStartIndex;v<g;v+=4)e.indexArray.emplaceBack(v,v+1,v+2),e.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const s=Math.sin(e),c=Math.cos(e),g=[],v=[],x=[];for(let D=0;D<this.symbolInstances.length;++D){x.push(D);const S=this.symbolInstances.get(D);g.push(0|Math.round(s*S.anchorX+c*S.anchorY)),v.push(S.featureIndex)}return x.sort((D,S)=>g[D]-g[S]||v[S]-v[D]),x}addToSortKeyRanges(e,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Un("SymbolBucket",fu,{omit:["layers","collisionBoxArray","features","compareText"]}),fu.MAX_GLYPHS=65535,fu.addDynamicAttributes=Gp;const Hp=new _n({"symbol-placement":new Ke(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Ke(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ke(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ke(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ke(ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ke(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ke(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ke(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(ue.layout_symbol["icon-size"]),"icon-text-fit":new Ke(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ke(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(ue.layout_symbol["icon-image"]),"icon-rotate":new Tt(ue.layout_symbol["icon-rotate"]),"icon-padding":new Ke(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Ke(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(ue.layout_symbol["icon-offset"]),"icon-anchor":new Tt(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ke(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ke(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ke(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(ue.layout_symbol["text-field"]),"text-font":new Tt(ue.layout_symbol["text-font"]),"text-size":new Tt(ue.layout_symbol["text-size"]),"text-max-width":new Tt(ue.layout_symbol["text-max-width"]),"text-line-height":new Tt(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(ue.layout_symbol["text-justify"]),"text-radial-offset":new Tt(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ke(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Tt(ue.layout_symbol["text-anchor"]),"text-max-angle":new Ke(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Ke(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(ue.layout_symbol["text-rotate"]),"text-padding":new Ke(ue.layout_symbol["text-padding"]),"text-keep-upright":new Ke(ue.layout_symbol["text-keep-upright"]),"text-transform":new Tt(ue.layout_symbol["text-transform"]),"text-offset":new Tt(ue.layout_symbol["text-offset"]),"text-allow-overlap":new Ke(ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ke(ue.layout_symbol["text-ignore-placement"]),"text-optional":new Ke(ue.layout_symbol["text-optional"])});var $p={paint:new _n({"icon-opacity":new Tt(ue.paint_symbol["icon-opacity"]),"icon-color":new Tt(ue.paint_symbol["icon-color"]),"icon-halo-color":new Tt(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Ke(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ke(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(ue.paint_symbol["text-opacity"]),"text-color":new Tt(ue.paint_symbol["text-color"],{runtimeType:or,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Tt(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(ue.paint_symbol["text-halo-blur"]),"text-translate":new Ke(ue.paint_symbol["text-translate"]),"text-translate-anchor":new Ke(ue.paint_symbol["text-translate-anchor"])}),layout:Hp};class Qg{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:rr,this.defaultValue=e}evaluate(e){if(e.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(e.formattedSection))return s.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Un("FormatSectionOverride",Qg,{omit:["defaultValue"]});class nc extends al{constructor(e){super(e,$p)}recalculate(e,s){if(super.recalculate(e,s),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const c=this.layout.get("text-writing-mode");if(c){const g=[];for(const v of c)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,s,c,g){const v=this.layout.get(e).evaluate(s,{},c,g),x=this._unevaluatedLayout._values[e];return x.isDataDriven()||Ho(x.value)||!v?v:(D=s.properties,v.replace(/{([^{}]+)}/g,(k,j)=>j in D?String(D[j]):""));var D}createBucket(e){return new fu(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of $p.paint.overridableProperties){if(!nc.hasPaintOverride(this.layout,e))continue;const s=this.paint.get(e),c=new Qg(s),g=new Qs(c,s.property.specification);let v=null;v="constant"===s.value.kind||"source"===s.value.kind?new Tr("source",g):new wl("composite",g,s.value.zoomStops,s.value._interpolationType),this.paint._values[e]=new ut(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(e,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&nc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,s){const c=e.get("text-field"),g=$p.paint.properties[s];let v=!1;const x=D=>{for(const S of D)if(g.overrides&&g.overrides.hasOverride(S))return void(v=!0)};if("constant"===c.value.kind&&c.value.value instanceof Br)x(c.value.value.sections);else if("source"===c.value.kind){const D=k=>{v||(k instanceof io&&xr(k.value)===Xi?x(k.value.sections):k instanceof Va?x(k.sections):k.eachChild(D))},S=c.value;S._styleExpression&&D(S._styleExpression.expression)}return v}getProgramConfiguration(e){return new Al(this,e)}}var wm={paint:new _n({"background-color":new Ke(ue.paint_background["background-color"]),"background-pattern":new hn(ue.paint_background["background-pattern"]),"background-opacity":new Ke(ue.paint_background["background-opacity"])})},Jg={paint:new _n({"raster-opacity":new Ke(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ke(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ke(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ke(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Ke(ue.paint_raster["raster-saturation"]),"raster-contrast":new Ke(ue.paint_raster["raster-contrast"]),"raster-resampling":new Ke(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Ke(ue.paint_raster["raster-fade-duration"])})};class e_ extends al{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Zp={paint:new _n({"sky-type":new Ke(ue.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ke(ue.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ke(ue.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ke(ue.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ke(ue.paint_sky["sky-gradient-radius"]),"sky-gradient":new at(ue.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ke(ue.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ke(ue.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ke(ue.paint_sky["sky-opacity"])})};function Cm(o,e,s){const c=qc(0,0,1),g=th(Yc());return function(v,x,D){D*=.5;var S=x[0],k=x[1],j=x[2],Y=x[3],J=Math.sin(D),ae=Math.cos(D);v[0]=S*ae-j*J,v[1]=k*ae+Y*J,v[2]=j*ae+S*J,v[3]=Y*ae-k*J}(g,g,s?-st(o)+Math.PI:st(o)),Iu(g,g,-st(e)),$f(c,c,g),Hf(c,c)}const vy={circle:class extends al{constructor(o){super(o,wg)}createBucket(o){return new Wc(o)}queryRadius(o){const e=o;return Xd("circle-radius",this,e)+Xd("circle-stroke-width",this,e)+cp(this.paint.get("circle-translate"))}queryIntersectsFeature(o,e,s,c,g,v,x,D){const S="map"===this.paint.get("circle-pitch-alignment");if(S&&o.queryGeometry.isAboveHorizon)return!1;const k=jf(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,o.pixelToTileUnitsFactor),j=this.paint.get("circle-radius").evaluate(e,s)+this.paint.get("circle-stroke-width").evaluate(e,s),Y=S?j*o.pixelToTileUnitsFactor:j;for(const J of c)for(const ae of J){const pe=ae.add(k),Pe=D&&v.elevation?v.elevation.exaggeration()*D.getElevationAt(pe.x,pe.y,!0):0,Xe=S?pe:pp(pe,Pe,x),ht=S?o.tilespaceRays.map(Ft=>Mg(Ft,Pe)):o.queryGeometry.screenGeometry;let Et=Y;const Pt=eh([],[ae.x,ae.y,Pe,1],x);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Et*=Pt[3]/v.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Et*=v.cameraToCenterDistance/Pt[3]),Il(ht,Xe,Et))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new Al(this,o)}},heatmap:class extends al{createBucket(o){return new Zf(o)}constructor(o){super(o,mp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=gp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new Al(this,o)}},hillshade:class extends al{constructor(o){super(o,Sg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(o){return new Al(this,o)}},fill:class extends al{constructor(o){super(o,xp)}getProgramIds(){const o=this.paint.get("fill-pattern"),e=o&&o.constantOr(1),s=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(o){return new Al(this,o)}recalculate(o,e){super.recalculate(o,e);const s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new ch(o)}queryRadius(){return cp(this.paint.get("fill-translate"))}queryIntersectsFeature(o,e,s,c,g,v){return!o.queryGeometry.isAboveHorizon&&Pl(id(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,o.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends al{constructor(o){super(o,zg)}createBucket(o){return new sd(o)}queryRadius(){return cp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new Al(this,o)}queryIntersectsFeature(o,e,s,c,g,v,x,D,S){const k=jf(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,o.pixelToTileUnitsFactor),j=this.paint.get("fill-extrusion-height").evaluate(e,s),Y=this.paint.get("fill-extrusion-base").evaluate(e,s),J=[0,0],ae=D&&v.elevation,pe=v.elevation?v.elevation.exaggeration():1;if(ae){const ht=o.tile.getBucket(this).centroidVertexArray,Et=S+1;if(Et<ht.length){const Pt=ht.get(Et);J[0]=Pt.a_centroid_pos0,J[1]=Pt.a_centroid_pos1}}if(0===J[0]&&1===J[1])return!1;const Pe=(ht=c,Et=Y,Pt=j,Ft=k,Lt=x,(Ut=ae?D:null)?function(Pn,ln,tn,on,cn,_i,Bi,$i,Ki){const Gr=[],_r=[],xi=[0,0,0,1];for(const yo of Pn){const qo=[],ho=[];for(const zo of yo){const gs=zo.x+on.x,Yo=zo.y+on.y,lo=uh(gs,Yo,ln,tn,_i,Bi,$i,Ki);xi[0]=gs,xi[1]=Yo,xi[2]=lo.base,xi[3]=1,eh(xi,xi,cn),xi[3]=Math.max(xi[3],1e-5);const po=ec([xi[0]/xi[3],xi[1]/xi[3],xi[2]/xi[3]]);xi[0]=gs,xi[1]=Yo,xi[2]=lo.top,xi[3]=1,eh(xi,xi,cn),xi[3]=Math.max(xi[3],1e-5);const Pr=ec([xi[0]/xi[3],xi[1]/xi[3],xi[2]/xi[3]]);qo.push(po),ho.push(Pr)}Gr.push(qo),_r.push(ho)}return[Gr,_r]}(ht,Et,Pt,Ft,Lt,Ut,J,pe,v.center.lat):function(Pn,ln,tn,on,cn){const _i=[],Bi=[],$i=cn[8]*ln,Ki=cn[9]*ln,Gr=cn[10]*ln,_r=cn[11]*ln,xi=cn[8]*tn,yo=cn[9]*tn,qo=cn[10]*tn,ho=cn[11]*tn;for(const zo of Pn){const gs=[],Yo=[];for(const lo of zo){const po=lo.x+on.x,Pr=lo.y+on.y,Vo=cn[0]*po+cn[4]*Pr+cn[12],_s=cn[1]*po+cn[5]*Pr+cn[13],Or=cn[2]*po+cn[6]*Pr+cn[14],kr=cn[3]*po+cn[7]*Pr+cn[15],vo=Vo+$i,Zi=_s+Ki,ka=Or+Gr,no=Math.max(kr+_r,1e-5),Ms=Vo+xi,Ko=_s+yo,Ka=Or+qo,ra=Math.max(kr+ho,1e-5),Nl=new ye(vo/no,Zi/no);Nl.z=ka/no,gs.push(Nl);const hl=new ye(Ms/ra,Ko/ra);hl.z=Ka/ra,Yo.push(hl)}_i.push(gs),Bi.push(Yo)}return[_i,Bi]}(ht,Et,Pt,Ft,Lt)),Xe=o.queryGeometry;var ht,Et,Pt,Ft,Lt,Ut;return function(ht,Et,Pt){let Ft=1/0;Pl(Pt,Et)&&(Ft=Ep(Pt,Et[0]));for(let Lt=0;Lt<Et.length;Lt++){const Ut=Et[Lt],yn=ht[Lt];for(let pn=0;pn<Ut.length-1;pn++){const fn=Ut[pn],Pn=[fn,Ut[pn+1],yn[pn+1],yn[pn],fn];nd(Pt,Pn)&&(Ft=Math.min(Ft,Ep(Pt,Pn)))}}return Ft!==1/0&&Ft}(Pe[0],Pe[1],Xe.isPointQuery()?Xe.screenBounds:Xe.screenGeometry)}},line:class extends al{constructor(o){super(o,hh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Fs,this.gradientVersion=(this.gradientVersion+1)%tt}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,e){super.recalculate(o,e),this.paint._values["line-floorwidth"]=ph.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new dh(o)}getProgramIds(){const o=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),s=this.paint.get("line-gradient");return[e?"linePattern":o?"lineSDF":s?"lineGradient":"line"]}getProgramConfiguration(o){return new Al(this,o)}queryRadius(o){const e=o,s=ld(Xd("line-width",this,e),Xd("line-gap-width",this,e)),c=Xd("line-offset",this,e);return s/2+Math.abs(c)+cp(this.paint.get("line-translate"))}queryIntersectsFeature(o,e,s,c,g,v){if(o.queryGeometry.isAboveHorizon)return!1;const x=id(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,o.pixelToTileUnitsFactor),D=o.pixelToTileUnitsFactor/2*ld(this.paint.get("line-width").evaluate(e,s),this.paint.get("line-gap-width").evaluate(e,s)),S=this.paint.get("line-offset").evaluate(e,s);return S&&(c=function(k,j){const Y=[],J=new ye(0,0);for(let ae=0;ae<k.length;ae++){const pe=k[ae],Pe=[];for(let Xe=0;Xe<pe.length;Xe++){const ht=pe[Xe-1],Et=pe[Xe],Pt=pe[Xe+1],Ft=0===Xe?J:Et.sub(ht)._unit()._perp(),Lt=Xe===pe.length-1?J:Pt.sub(Et)._unit()._perp(),Ut=Ft._add(Lt)._unit();Ut._mult(1/(Ut.x*Lt.x+Ut.y*Lt.y)),Pe.push(Ut._mult(j)._add(Et))}Y.push(Pe)}return Y}(c,S*o.pixelToTileUnitsFactor)),function(k,j,Y){for(let J=0;J<j.length;J++){const ae=j[J];if(k.length>=3)for(let pe=0;pe<ae.length;pe++)if(bc(k,ae[pe]))return!0;if(Vf(k,ae,Y))return!0}return!1}(x,c,D)}isTileClipped(){return!0}},symbol:nc,background:class extends al{constructor(o){super(o,wm)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends al{constructor(o){super(o,Jg)}getProgramIds(){return["raster"]}},sky:class extends al{constructor(o){super(o,Zp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"sky-gradient"===o?this._updateColorRamp():"sky-atmosphere-sun"!==o&&"sky-atmosphere-halo-color"!==o&&"sky-atmosphere-color"!==o&&"sky-atmosphere-sun-intensity"!==o||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=gp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(o,e){const s=this.paint.get("sky-type");if("atmosphere"===s){const c=this.paint.get("sky-atmosphere-sun"),g=!c,v=o.style.light,x=v.properties.get("position");return g&&"viewport"===v.properties.get("anchor")&&Rn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?Cm(x.azimuthal,90-x.polar,e):Cm(c[0],90-c[1],e)}if("gradient"===s){const c=this.paint.get("sky-gradient-center");return Cm(c[0],90-c[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return"atmosphere"===o?["skyboxCapture","skybox"]:"gradient"===o?["skyboxGradient"]:null}}},{HTMLImageElement:Ph,HTMLCanvasElement:t_,HTMLVideoElement:n_,ImageData:i_,ImageBitmap:Wp}=Ce;class Oh{constructor(e,s,c,g){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(s,g)}update(e,s,c){const{width:g,height:v}=e,x=!(this.size&&this.size[0]===g&&this.size[1]===v||c),{context:D}=this,{gl:S}=D;if(this.useMipmap=Boolean(s&&s.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!s||!1!==s.premultiply)),x)this.size=[g,v],e instanceof Ph||e instanceof t_||e instanceof n_||e instanceof i_||Wp&&e instanceof Wp?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,g,v,0,this.format,S.UNSIGNED_BYTE,e.data);else{const{x:k,y:j}=c||{x:0,y:0};e instanceof Ph||e instanceof t_||e instanceof n_||e instanceof i_||Wp&&e instanceof Wp?S.texSubImage2D(S.TEXTURE_2D,0,k,j,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,k,j,g,v,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)}bind(e,s,c){const{context:g}=this,{gl:v}=g;v.bindTexture(v.TEXTURE_2D,this.texture),c!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=v.LINEAR),e!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,e),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,c||e),this.filter=e),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Tc{constructor(e,s){e&&(s?this.setSouthWest(e).setNorthEast(s):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof ao?new ao(e.lng,e.lat):ao.convert(e),this}setSouthWest(e){return this._sw=e instanceof ao?new ao(e.lng,e.lat):ao.convert(e),this}extend(e){const s=this._sw,c=this._ne;let g,v;if(e instanceof ao)g=e,v=e;else{if(!(e instanceof Tc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Tc.convert(e)):this.extend(ao.convert(e)):this;if(g=e._sw,v=e._ne,!g||!v)return this}return s||c?(s.lng=Math.min(g.lng,s.lng),s.lat=Math.min(g.lat,s.lat),c.lng=Math.max(v.lng,c.lng),c.lat=Math.max(v.lat,c.lat)):(this._sw=new ao(g.lng,g.lat),this._ne=new ao(v.lng,v.lat)),this}getCenter(){return new ao((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ao(this.getWest(),this.getNorth())}getSouthEast(){return new ao(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:s,lat:c}=ao.convert(e);let g=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&g}static convert(e){return!e||e instanceof Tc?e:new Tc(e)}}const mu=6371008.8;class ao{constructor(e,s){if(isNaN(e)||isNaN(s))throw new Error(`Invalid LngLat object: (${e}, ${s})`);if(this.lng=+e,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ao(Tn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const s=Math.PI/180,c=this.lat*s,g=e.lat*s,v=Math.sin(c)*Math.sin(g)+Math.cos(c)*Math.cos(g)*Math.cos((e.lng-this.lng)*s);return mu*Math.acos(Math.min(v,1))}toBounds(e=0){const s=360*e/40075017,c=s/Math.cos(Math.PI/180*this.lat);return new Tc(new ao(this.lng-c,this.lat-s),new ao(this.lng+c,this.lat+s))}static convert(e){if(e instanceof ao)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new ao(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new ao(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Em=2*Math.PI*mu;function qp(o){return Em*Math.cos(o*Math.PI/180)}function Yp(o){return(180+o)/360}function xd(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Pa(o,e){return o/qp(e)}function wd(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function Kp(o,e){return o*qp(wd(e))}class Ac{constructor(e,s,c=0){this.x=+e,this.y=+s,this.z=+c}static fromLngLat(e,s=0){const c=ao.convert(e);return new Ac(Yp(c.lng),xd(c.lat),Pa(s,c.lat))}toLngLat(){return new ao(360*this.x-180,wd(this.y))}toAltitude(){return Kp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Em*(e=wd(this.y),1/Math.cos(e*Math.PI/180));var e}}class Oa{constructor(e,s){this.width=e,this.height=s,this.nextRow=0,this.image=new xc({width:e,height:s}),this.positions={},this.uploaded=!1}getDash(e,s){const c=this.getKey(e,s);return this.positions[c]}trim(){const e=this.width,s=this.height=dn(this.nextRow);this.image.resize({width:e,height:s})}getKey(e,s){return e.join(",")+s}getDashRanges(e,s,c){const g=[];let v=e.length%2==1?-e[e.length-1]*c:0,x=e[0]*c,D=!0;g.push({left:v,right:x,isDash:D,zeroLength:0===e[0]});let S=e[0];for(let k=1;k<e.length;k++){D=!D;const j=e[k];v=S*c,S+=j,x=S*c,g.push({left:v,right:x,isDash:D,zeroLength:0===j})}return g}addRoundDash(e,s,c){const g=s/2;for(let v=-c;v<=c;v++){const x=this.width*(this.nextRow+c+v);let D=0,S=e[D];for(let k=0;k<this.width;k++){k/S.right>1&&(S=e[++D]);const j=Math.abs(k-S.left),Y=Math.abs(k-S.right),J=Math.min(j,Y);let ae;const pe=v/c*(g+1);if(S.isDash){const Pe=g-Math.abs(pe);ae=Math.sqrt(J*J+Pe*Pe)}else ae=g-Math.sqrt(J*J+pe*pe);this.image.data[x+k]=Math.max(0,Math.min(255,ae+128))}}}addRegularDash(e,s){for(let S=e.length-1;S>=0;--S){const k=e[S],j=e[S+1];k.zeroLength?e.splice(S,1):j&&j.isDash===k.isDash&&(j.left=k.left,e.splice(S,1))}const c=e[0],g=e[e.length-1];c.isDash===g.isDash&&(c.left=g.left-this.width,g.right=c.right+this.width);const v=this.width*this.nextRow;let x=0,D=e[x];for(let S=0;S<this.width;S++){S/D.right>1&&(D=e[++x]);const k=Math.abs(S-D.left),j=Math.abs(S-D.right),Y=Math.min(k,j);this.image.data[v+S]=Math.max(0,Math.min(255,(D.isDash?Y:-Y)+s+128))}}addDash(e,s){const c=this.getKey(e,s);if(this.positions[c])return this.positions[c];const g="round"===s,v=g?7:0,x=2*v+1;if(this.nextRow+x>this.height)return Rn("LineAtlas out of space"),null;0===e.length&&e.push(1);let D=0;for(let j=0;j<e.length;j++)e[j]<0&&(Rn("Negative value is found in line dasharray, replacing values with 0"),e[j]=0),D+=e[j];if(0!==D){const j=this.width/D,Y=this.getDashRanges(e,this.width,j);g?this.addRoundDash(Y,j,v):this.addRegularDash(Y,"square"===s?.5*j:0)}const S=this.nextRow+v;this.nextRow+=x;const k={tl:[S,v],br:[D,0]};return this.positions[c]=k,k}}Un("LineAtlas",Oa);class Xp{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Dm=Ce.performance;function Cd(o){const e=o?o.url.toString():void 0;return Dm.getEntriesByName(e)}class r_{constructor(){this.tasks={},this.taskQueue=[],Mt(["process"],this),this.invoker=new Xp(this.process),this.nextId=0}add(e,s){const c=this.nextId++,g=function({type:v,isSymbolTile:x,zoom:D}){return D=D||0,"message"===v?0:"maybePrepare"!==v||x?"parseTile"!==v||x?"parseTile"===v&&x?300-D:"maybePrepare"===v&&x?400-D:500:200-D:100-D}(s);if(0===g){wi();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:e,metadata:s,priority:g,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){wi();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const s=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let e=null,s=1/0;for(let g=0;g<this.taskQueue.length;g++){const v=this.tasks[this.taskQueue[g]];v.priority<s&&(s=v.priority,e=g)}if(null===e)return null;const c=this.taskQueue[e];return this.taskQueue.splice(e,1),c}remove(){this.invoker.remove()}}function Qp(o,e,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[o*c-2*Math.PI*6378137/2,e*c-2*Math.PI*6378137/2]}class Jp{constructor(e,s,c){this.z=e,this.x=s,this.y=c,this.key=gu(0,e,e,s,c)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,s){const c=(v=this.y,x=this.z,D=Qp(256*(g=this.x),256*(v=Math.pow(2,x)-v-1),x),S=Qp(256*(g+1),256*(v+1),x),D[0]+","+D[1]+","+S[0]+","+S[1]);var g,v,x,D,S;const k=function(j,Y,J){let ae,pe="";for(let Pe=j;Pe>0;Pe--)ae=1<<Pe-1,pe+=(Y&ae?1:0)+(J&ae?2:0);return pe}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===s?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",c)}getTilePoint(e){const s=Math.pow(2,this.z);return new ye((e.x*s-this.x)*gr,(e.y*s-this.y)*gr)}getTileVec3(e){const s=Math.pow(2,this.z);return qc((e.x*s-this.x)*gr,(e.y*s-this.y)*gr,Kp(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Vu{constructor(e,s){this.wrap=e,this.canonical=s,this.key=gu(e,s.z,s.z,s.x,s.y)}}class ms{constructor(e,s,c,g,v){this.overscaledZ=e,this.wrap=s,this.canonical=new Jp(c,+g,+v),this.key=0===s&&e===c?this.canonical.key:gu(s,e,c,g,v)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const s=this.canonical.z-e;return e>this.canonical.z?new ms(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ms(e,this.wrap,e,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(e,s=!0){if(this.overscaledZ===e&&s)return this.key;if(e>this.canonical.z)return gu(this.wrap*+s,e,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-e;return gu(this.wrap*+s,e,e,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const s=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>s&&e.canonical.y===this.canonical.y>>s}children(e){if(this.overscaledZ>=e)return[new ms(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,g=2*this.canonical.y;return[new ms(s,this.wrap,s,c,g),new ms(s,this.wrap,s,c+1,g),new ms(s,this.wrap,s,c,g+1),new ms(s,this.wrap,s,c+1,g+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ms(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ms(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Vu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Ac(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new Ac(e.x-this.wrap,e.y,e.z))}}function gu(o,e,s,c,g){const v=1<<Math.min(s,22);let x=v*(g%v)+c%v;return o&&s<22&&(x+=v*v*((o<0?-2*o-1:2*o)%(1<<2*(22-s)))),16*(32*x+s)+(e-s)}Un("CanonicalTileID",Jp),Un("OverscaledTileID",ms,{omit:["projMatrix"]});class kh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let s=0;s<e.length;s++){const c=e[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Rh{constructor(e,s,c,g,v){this.type="Feature",this._vectorTileFeature=e,e._z=s,e._x=c,e._y=g,this.properties=e.properties,this.id=v}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const s in this)"_geometry"!==s&&"_vectorTileFeature"!==s&&(e[s]=this[s]);return e}}var by=Yn([{name:"a_pos",type:"Int16",components:2}]);class Mm{constructor(e,s,c){this.tileID=e,this.uid=Gt(),this.uses=0,this.tileSize=s,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const s=e+this.timeAdded;s<Dn.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,s,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(g,v){const x={};if(!v)return x;for(const D of g){const S=D.layerIds.map(k=>v.getLayer(k)).filter(Boolean);if(0!==S.length){D.layers=S,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(k=>S.filter(j=>j.id===k)[0]));for(const k of S)x[k.id]=D}}return x}(e.buckets,s.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const v=this.buckets[g];if(v instanceof fu){if(this.hasSymbolBuckets=!0,!c)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const v=this.buckets[g];if(v instanceof fu&&v.hasRTLText){this.hasRTLText=!0,fe.isLoading()||fe.isLoaded()||"deferred"!==se()||de();break}}this.queryPadding=0;for(const g in this.buckets){const v=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(g).queryRadius(v))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Kl}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const g=this.buckets[c];g.uploadPending()&&g.upload(e)}const s=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Oh(e,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Oh(e,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Oh(e,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,s,c,g,v,x,D,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:D,transform:x,params:v},e,s,c):{}}querySourceFeatures(e,s){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const g=c.loadVTLayers(),v=s?s.sourceLayer:"",x=g._geojsonTileLayer||g[v];if(!x)return;const D=Cs(s&&s.filter),{z:S,x:k,y:j}=this.tileID.canonical,Y={z:S,x:k,y:j};for(let J=0;J<x.length;J++){const ae=x.feature(J);if(D.needGeometry){const Xe=Su(ae,!0);if(!D.filter(new be(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!D.filter(new be(this.tileID.overscaledZ),ae))continue;const pe=c.getId(ae,v),Pe=new Rh(ae,S,k,j,pe);Pe.tile=Y,e.push(Pe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const s=this.expirationTime;if(e.cacheControl){const c=Pi(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let g=!1;if(this.expirationTime>c)g=!1;else if(s)if(this.expirationTime<s)g=!0;else{const v=this.expirationTime-s;v?this.expirationTime=c+Math.max(v,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const c=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!s.style.hasLayer(g))continue;const v=this.buckets[g],x=v.layers[0].sourceLayer||"_geojsonTileLayer",D=c[x],S=e[x];if(!D||!S||0===Object.keys(S).length)continue;v.update(S,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=s&&s.style&&s.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(v)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Dn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Dn.now()+e}setDependencies(e,s){const c={};for(const g of s)c[g]=!0;this.dependencies[e]=c}hasDependency(e,s){for(const c of e){const g=this.dependencies[c];if(g)for(const v of s)if(g[v])return!0}return!1}clearQueryDebugViz(){}}class o_{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,s,c){const g=String(s);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][g]=this.stateChanges[e][g]||{},$e(this.stateChanges[e][g],c),null===this.deletedStates[e]){this.deletedStates[e]={};for(const v in this.state[e])v!==g&&(this.deletedStates[e][v]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][g]){this.deletedStates[e][g]={};for(const v in this.state[e][g])c[v]||(this.deletedStates[e][g][v]=null)}else for(const v in c)this.deletedStates[e]&&this.deletedStates[e][g]&&null===this.deletedStates[e][g][v]&&delete this.deletedStates[e][g][v]}removeFeatureState(e,s,c){if(null===this.deletedStates[e])return;const g=String(s);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&void 0!==s)null!==this.deletedStates[e][g]&&(this.deletedStates[e][g]=this.deletedStates[e][g]||{},this.deletedStates[e][g][c]=null);else if(void 0!==s)if(this.stateChanges[e]&&this.stateChanges[e][g])for(c in this.deletedStates[e][g]={},this.stateChanges[e][g])this.deletedStates[e][g][c]=null;else this.deletedStates[e][g]=null;else this.deletedStates[e]=null}getState(e,s){const c=String(s),g=$e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const v=this.deletedStates[e][s];if(null===v)return{};for(const x in v)delete g[x]}return g}initializeTileState(e,s){e.setFeatureState(this.state,s)}coalesceChanges(e,s){const c={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const v={};for(const x in this.stateChanges[g])this.state[g][x]||(this.state[g][x]={}),$e(this.state[g][x],this.stateChanges[g][x]),v[x]=this.state[g][x];c[g]=v}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const v={};if(null===this.deletedStates[g])for(const x in this.state[g])v[x]={},this.state[g][x]={};else for(const x in this.deletedStates[g]){if(null===this.deletedStates[g][x])this.state[g][x]={};else for(const D of Object.keys(this.deletedStates[g][x]))delete this.state[g][x][D];v[x]=this.state[g][x]}c[g]=c[g]||{},$e(c[g],v)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(const g in e)e[g].setFeatureState(c,s)}}class ef{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,s){const c=this.toIdx(e,s);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(e,s){return this.leaves[this.toIdx(e,s)]}toIdx(e,s){return s*this.size+e}}function Sm(o,e,s,c){let g=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(c[x])<1e-15){if(s[x]<o[x]||s[x]>e[x])return null}else{const D=1/c[x];let S=(o[x]-s[x])*D,k=(e[x]-s[x])*D;if(S>k){const j=S;S=k,k=j}if(S>g&&(g=S),k<v&&(v=k),g>v)return null}return g}function tf(o,e,s,c,g,v,x,D,S,k,j){const Y=c-o,J=g-e,ae=v-s,pe=x-o,Pe=D-e,Xe=S-s,ht=j[1]*Xe-j[2]*Pe,Et=j[2]*pe-j[0]*Xe,Pt=j[0]*Pe-j[1]*pe,Ft=Y*ht+J*Et+ae*Pt;if(Math.abs(Ft)<1e-15)return null;const Lt=1/Ft,Ut=k[0]-o,yn=k[1]-e,pn=k[2]-s,fn=(Ut*ht+yn*Et+pn*Pt)*Lt;if(fn<0||fn>1)return null;const Pn=yn*ae-pn*J,ln=pn*Y-Ut*ae,tn=Ut*J-yn*Y,on=(j[0]*Pn+j[1]*ln+j[2]*tn)*Lt;return on<0||fn+on>1?null:(pe*Pn+Pe*ln+Xe*tn)*Lt}function Tm(o,e,s){return(o-e)/(s-e)}function Am(o,e,s,c,g,v,x,D,S){const k=1<<s,j=v-c,Y=x-g,J=(o+1)/k*j+c,ae=(e+0)/k*Y+g,pe=(e+1)/k*Y+g;D[0]=(o+0)/k*j+c,D[1]=ae,S[0]=J,S[1]=pe}class s_{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(v){const x=Math.ceil(Math.log2(v.dim/8)),D=[];let S=Math.ceil(Math.pow(2,x));const k=1/S,j=(ae,pe,Pe,Xe,ht)=>{const Et=Xe?1:0,Pt=(ae+1)*Pe-Et,Ft=pe*Pe,Lt=(pe+1)*Pe-Et;ht[0]=ae*Pe,ht[1]=Ft,ht[2]=Pt,ht[3]=Lt};let Y=new ef(S);const J=[];for(let ae=0;ae<S*S;ae++){j(ae%S,Math.floor(ae/S),k,!1,J);const pe=ic(J[0],J[1],v),Pe=ic(J[2],J[1],v),Xe=ic(J[2],J[3],v),ht=ic(J[0],J[3],v);Y.minimums.push(Math.min(pe,Pe,Xe,ht)),Y.maximums.push(Math.max(pe,Pe,Xe,ht)),Y.leaves.push(1)}for(D.push(Y),S/=2;S>=1;S/=2){const ae=D[D.length-1];Y=new ef(S);for(let pe=0;pe<S*S;pe++){j(pe%S,Math.floor(pe/S),2,!0,J);const Pe=ae.getElevation(J[0],J[1]),Xe=ae.getElevation(J[2],J[1]),ht=ae.getElevation(J[2],J[3]),Et=ae.getElevation(J[0],J[3]),Pt=ae.isLeaf(J[0],J[1]),Ft=ae.isLeaf(J[2],J[1]),Lt=ae.isLeaf(J[2],J[3]),Ut=ae.isLeaf(J[0],J[3]),yn=Math.min(Pe.min,Xe.min,ht.min,Et.min),pn=Math.max(Pe.max,Xe.max,ht.max,Et.max),fn=Pt&&Ft&&Lt&&Ut;Y.maximums.push(pn),Y.minimums.push(yn),Y.leaves.push(pn-yn<=5&&fn?1:0)}D.push(Y)}return D}(this.dem),c=s.length-1,g=s[c];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(s,0,0,c,0)}raycastRoot(e,s,c,g,v,x,D=1){return Sm([e,s,-100],[c,g,this.maximums[0]*D],v,x)}raycast(e,s,c,g,v,x,D=1){if(!this.nodeCount)return null;const S=this.raycastRoot(e,s,c,g,v,x,D);if(null==S)return null;const k=[],j=[],Y=[],J=[],ae=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;ae.length>0;){const{idx:pe,t:Pe,nodex:Xe,nodey:ht,depth:Et}=ae.pop();if(this.leaves[pe]){Am(Xe,ht,Et,e,s,c,g,Y,J);const Ft=1<<Et,Lt=(Xe+0)/Ft,Ut=(Xe+1)/Ft,yn=(ht+0)/Ft,pn=(ht+1)/Ft,fn=ic(Lt,yn,this.dem)*D,Pn=ic(Ut,yn,this.dem)*D,ln=ic(Ut,pn,this.dem)*D,tn=ic(Lt,pn,this.dem)*D,on=tf(Y[0],Y[1],fn,J[0],Y[1],Pn,J[0],J[1],ln,v,x),cn=tf(J[0],J[1],ln,Y[0],J[1],tn,Y[0],Y[1],fn,v,x),_i=Math.min(null!==on?on:Number.MAX_VALUE,null!==cn?cn:Number.MAX_VALUE);if(_i!==Number.MAX_VALUE)return _i;{const Bi=Au([],v,x,Pe);if(nf(fn,Pn,tn,ln,Tm(Bi[0],Y[0],J[0]),Tm(Bi[1],Y[1],J[1]))>=Bi[2])return Pe}continue}let Pt=0;for(let Ft=0;Ft<this._siblingOffset.length;Ft++){Am((Xe<<1)+this._siblingOffset[Ft][0],(ht<<1)+this._siblingOffset[Ft][1],Et+1,e,s,c,g,Y,J),Y[2]=-100,J[2]=this.maximums[this.childOffsets[pe]+Ft]*D;const Lt=Sm(Y,J,v,x);if(null!=Lt){const Ut=Lt;k[Ft]=Ut;let yn=!1;for(let pn=0;pn<Pt&&!yn;pn++)Ut>=k[j[pn]]&&(j.splice(pn,0,Ft),yn=!0);yn||(j[Pt]=Ft),Pt++}}for(let Ft=0;Ft<Pt;Ft++){const Lt=j[Ft];ae.push({idx:this.childOffsets[pe]+Lt,t:k[Lt],nodex:(Xe<<1)+this._siblingOffset[Lt][0],nodey:(ht<<1)+this._siblingOffset[Lt][1],depth:Et+1})}}return null}_addNode(e,s,c){return this.minimums.push(e),this.maximums.push(s),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(e,s,c,g,v){if(1===e[g].isLeaf(s,c))return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=g-1,D=e[x];let S,k=0;for(let j=0;j<this._siblingOffset.length;j++){const Y=2*s+this._siblingOffset[j][0],J=2*c+this._siblingOffset[j][1],ae=D.getElevation(Y,J),pe=D.isLeaf(Y,J),Pe=this._addNode(ae.min,ae.max,pe);pe&&(k|=1<<j),S||(S=Pe)}for(let j=0;j<this._siblingOffset.length;j++)k&1<<j||this._construct(e,2*s+this._siblingOffset[j][0],2*c+this._siblingOffset[j][1],x,S+j)}}function nf(o,e,s,c,g,v){return Vi(Vi(o,s,v),Vi(e,c,v),g)}function ic(o,e,s){const c=s.dim,g=vn(o*c-.5,0,c-1),v=vn(e*c-.5,0,c-1),x=Math.floor(g),D=Math.floor(v),S=Math.min(x+1,c-1),k=Math.min(D+1,c-1);return nf(s.get(x,D),s.get(S,D),s.get(x,k),s.get(S,k),g-x,v-D)}const Im={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Uu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,s,c,g=!1,v=!1){if(this.uid=e,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return Rn(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const x=this.dim=s.height-2;if(this.data=new Uint32Array(s.data.buffer),this.encoding=c||"mapbox",this.borderReady=g,!g){for(let D=0;D<x;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(x,D)]=this.data[this._idx(x-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,x)]=this.data[this._idx(D,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new s_(this)}get(e,s,c=!1){const g=new Uint8Array(this.data.buffer);c&&(e=vn(e,-1,this.dim),s=vn(s,-1,this.dim));const v=4*this._idx(e,s);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(g[v],g[v+1],g[v+2])}static getUnpackVector(e){return Im[e]}get unpackVector(){return Im[this.encoding]}_idx(e,s){if(e<-1||e>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(e+1)}_unpackMapbox(e,s,c){return(256*e*256+256*s+c)/10-1e4}_unpackTerrarium(e,s,c){return 256*e+s+c/256-32768}static pack(e,s){const c=[0,0,0,0],g=Uu.getUnpackVector(s);let v=Math.floor((e+g[3])/g[2]);return c[2]=v%256,v=Math.floor(v/256),c[1]=v%256,v=Math.floor(v/256),c[0]=v,c}getPixels(){return new Aa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,s,c){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,v=s*this.dim+this.dim,x=c*this.dim,D=c*this.dim+this.dim;switch(s){case-1:g=v-1;break;case 1:v=g+1}switch(c){case-1:x=D-1;break;case 1:D=x+1}const S=-s*this.dim,k=-c*this.dim;for(let j=x;j<D;j++)for(let Y=g;Y<v;Y++)this.data[this._idx(Y,j)]=e.data[this._idx(Y+S,j+k)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}Un("DEMData",Uu),Un("DemMinMaxQuadTree",s_,{omit:["dem"]});class xy{constructor(e,s){this.max=e,this.onRemove=s,this.reset()}reset(){for(const e in this.data)for(const s of this.data[e])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(e,s,c){const g=e.wrapped().key;void 0===this.data[g]&&(this.data[g]=[]);const v={value:s,timeout:void 0};if(void 0!==c&&(v.timeout=setTimeout(()=>{this.remove(e,v)},c)),this.data[g].push(v),this.order.push(g),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const s=this.data[e].shift();return s.timeout&&clearTimeout(s.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),s.value}getByKey(e){const s=this.data[e];return s?s[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,s){if(!this.has(e))return this;const c=e.wrapped().key,g=void 0===s?0:this.data[c].indexOf(s),v=this.data[c][g];return this.data[c].splice(g,1),v.timeout&&clearTimeout(v.timeout),0===this.data[c].length&&delete this.data[c],this.onRemove(v.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(e){const s=[];for(const c in this.data)for(const g of this.data[c])e(g.value)||s.push(g);for(const c of s)this.remove(c.value.tileID,c)}}class Ed{constructor(e,s,c){this.func=e,this.mask=s,this.range=c}}Ed.ReadOnly=!1,Ed.ReadWrite=!0,Ed.disabled=new Ed(519,Ed.ReadOnly,[0,1]);class Fh{constructor(e,s,c,g,v,x){this.test=e,this.ref=s,this.mask=c,this.fail=g,this.depthFail=v,this.pass=x}}Fh.disabled=new Fh({func:519,mask:0},0,0,7680,7680,7680);class rc{constructor(e,s,c){this.blendFunction=e,this.blendColor=s,this.mask=c}}rc.Replace=[1,0],rc.disabled=new rc(rc.Replace,fi.transparent,[!1,!1,!1,!1]),rc.unblended=new rc(rc.Replace,fi.transparent,[!0,!0,!0,!0]),rc.alphaBlended=new rc([1,771],fi.transparent,[!0,!0,!0,!0]);class Ll{constructor(e,s,c){this.enable=e,this.mode=s,this.frontFace=c}}Ll.disabled=new Ll(!1,1029,2305),Ll.backCCW=new Ll(!0,1029,2305),Ll.backCW=new Ll(!0,1029,2304),Ll.frontCW=new Ll(!0,1028,2304),Ll.frontCCW=new Ll(!0,1028,2305);class ju extends Me{constructor(e,s,c){super(),this.id=e,this._onlySymbols=c,s.on("data",g=>{"source"===g.dataType&&"metadata"===g.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===g.dataType&&"content"===g.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new xy(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o_}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const s=this._tiles[e];if("loaded"!==s.state&&"errored"!==s.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,s){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,s)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const c=this._tiles[s];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return ke(this._tiles).map(e=>e.tileID).sort(Rm).map(e=>e.key)}getRenderableIds(e){const s=[];for(const c in this._tiles)this._isIdRenderable(+c,e)&&s.push(this._tiles[c]);return e?s.sort((c,g)=>{const v=c.tileID,x=g.tileID,D=new ye(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),S=new ye(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-x.overscaledZ||S.y-D.y||S.x-D.x}).map(c=>c.tileID.key):s.map(c=>c.tileID).sort(Rm).map(c=>c.key)}hasRenderableParent(e){const s=this.findLoadedParent(e,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(e,s){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(s||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,s){const c=this._tiles[e];c&&("loading"!==c.state&&(c.state=s),this._loadTile(c,this._tileLoaded.bind(this,c,e,s)))}_tileLoaded(e,s,c,g){if(g)return e.state="errored",void(404!==g.status?this._source.fire(new De(g,{tile:e})):this.update(this.transform));e.timeAdded=Dn.now(),"expired"===c&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(s,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Fe("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const s=this.getRenderableIds();for(let g=0;g<s.length;g++){const v=s[g];if(e.neighboringTiles&&e.neighboringTiles[v]){const x=this.getTileByID(v);c(e,x),c(x,e)}}function c(g,v){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let x=v.tileID.canonical.x-g.tileID.canonical.x;const D=v.tileID.canonical.y-g.tileID.canonical.y,S=Math.pow(2,g.tileID.canonical.z),k=v.tileID.key;0===x&&0===D||Math.abs(D)>1||(Math.abs(x)>1&&(1===Math.abs(x+S)?x+=S:1===Math.abs(x-S)&&(x-=S)),v.dem&&g.dem&&(g.dem.backfillBorder(v.dem,x,D),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,s,c,g){for(const v in this._tiles){let x=this._tiles[v];if(g[v]||!x.hasData()||x.tileID.overscaledZ<=s||x.tileID.overscaledZ>c)continue;let D=x.tileID;for(;x&&x.tileID.overscaledZ>s+1;){const k=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[k.key],x&&x.hasData()&&(D=k)}let S=D;for(;S.overscaledZ>s;)if(S=S.scaledTo(S.overscaledZ-1),e[S.key]){g[D.key]=D;break}}}findLoadedParent(e,s){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=s?c:null}for(let c=e.overscaledZ-1;c>=s;c--){const g=e.scaledTo(c),v=this._getLoadedTile(g);if(v)return v}}_getLoadedTile(e){const s=this._tiles[e.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,s){s=s||this._source.tileSize;const c=Math.ceil(e.width/s)+1,g=Math.ceil(e.height/s)+1,v=Math.floor(c*g*5),x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(e){const s=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,s){const c={};for(const g in this._tiles){const v=this._tiles[g];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+s),c[v.tileID.key]=v}this._tiles=c;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(e,s,c){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let g;this.updateCacheSize(e,s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new ms(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(g=e.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter(D=>this._source.hasTile(D)))):g=[];const v=this._updateRetainedTiles(g);if(Bl(this._source.type)&&0!==g.length){const D={},S={},k=Object.keys(v);for(const Y of k){const J=v[Y],ae=this._tiles[Y];if(!ae||ae.fadeEndTime&&ae.fadeEndTime<=Dn.now())continue;const pe=this.findLoadedParent(J,Math.max(J.overscaledZ-ju.maxOverzooming,this._source.minzoom));pe&&(this._addTile(pe.tileID),D[pe.tileID.key]=pe.tileID),S[Y]=J}const j=g[g.length-1].overscaledZ;for(const Y in this._tiles){const J=this._tiles[Y];if(v[Y]||!J.hasData())continue;let ae=J.tileID;for(;ae.overscaledZ>j;){ae=ae.scaledTo(ae.overscaledZ-1);const pe=this._tiles[ae.key];if(pe&&pe.hasData()&&S[ae.key]){v[Y]=J.tileID;break}}}for(const Y in D)v[Y]||(this._coveredTiles[Y]=!0,v[Y]=D[Y])}for(const D in v)this._tiles[D].clearFadeHold();const x=function(D,S){const k=[];for(const j in D)j in S||k.push(j);return k}(this._tiles,v);for(const D of x){const S=this._tiles[D];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+D)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const s={};if(0===e.length)return s;const c={},g=e[e.length-1].overscaledZ,v=e[0].overscaledZ,x=Math.max(v-ju.maxOverzooming,this._source.minzoom),D=Math.max(v+ju.maxUnderzooming,this._source.minzoom),S={};for(const k of e){const j=this._addTile(k);s[k.key]=k,j.hasData()||g<this._source.maxzoom&&(S[k.key]=k)}this._retainLoadedChildren(S,g,D,s);for(const k of e){let j=this._tiles[k.key];if(j.hasData())continue;if(k.canonical.z>=this._source.maxzoom){const J=k.children(this._source.maxzoom)[0],ae=this.getTile(J);if(ae&&ae.hasData()){s[J.key]=J;continue}}else{const J=k.children(this._source.maxzoom);if(s[J[0].key]&&s[J[1].key]&&s[J[2].key]&&s[J[3].key])continue}let Y=j.wasRequested();for(let J=k.overscaledZ-1;J>=x;--J){const ae=k.scaledTo(J);if(c[ae.key]||(c[ae.key]=!0,j=this.getTile(ae),!j&&Y&&(j=this._addTile(ae)),j&&(s[ae.key]=ae,Y=j.wasRequested(),j.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const s=[];let c,g=this._tiles[e].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){c=this._loadedParentTiles[g.key];break}s.push(g.key);const v=g.scaledTo(g.overscaledZ-1);if(c=this._getLoadedTile(v),c)break;g=v}for(const v of s)this._loadedParentTiles[v]=c}}_addTile(e){let s=this._tiles[e.key];if(s)return s;s=this._cache.getAndRemove(e),s&&(this._setTileReloadTimer(e.key,s),s.tileID=e,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,s)));const c=Boolean(s);return c||(s=new Mm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(s,this._tileLoaded.bind(this,s,e.key,s.state))),s?(s.uses++,this._tiles[e.key]=s,c||this._source.fire(new Fe("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(e,s){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=s.getExpiryTimeout();c&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},c))}_removeTile(e){const s=this._tiles[e];s&&(s.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),s.uses>0||(s.hasData()&&"reloading"!==s.state?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,s,c){const g=[],v=this.transform;if(!v)return g;for(const x in this._tiles){const D=this._tiles[x];if(c&&D.clearQueryDebugViz(),D.holdingForFade())continue;const S=e.containsTile(D,v,s);S&&g.push(S)}return g}getVisibleCoordinates(e){const s=this.getRenderableIds(e).map(c=>this._tiles[c].tileID);for(const c of s)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(Bl(this._source.type))for(const e in this._tiles){const s=this._tiles[e];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=Dn.now())return!0}return!1}setFeatureState(e,s,c){this._state.updateState(e=e||"_geojsonTileLayer",s,c)}removeFeatureState(e,s,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",s,c)}getFeatureState(e,s){return this._state.getState(e=e||"_geojsonTileLayer",s)}setDependencies(e,s,c){const g=this._tiles[e];g&&g.setDependencies(s,c)}reloadTilesForDependencies(e,s){for(const c in this._tiles)this._tiles[c].hasDependency(e,s)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(e,s))}}function Rm(o,e){const s=Math.abs(2*o.wrap)-+(o.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return o.overscaledZ-e.overscaledZ||c-s||e.canonical.y-o.canonical.y||e.canonical.x-o.canonical.x}function Bl(o){return"raster"===o||"image"===o||"video"===o}ju.maxOverzooming=10,ju.maxUnderzooming=3;class Gu{constructor(e,s,c){this._demTile=e,this._dem=this._demTile.dem,this._scale=s,this._offset=c}static create(e,s,c){const g=c||e.findDEMTileFor(s);if(!g||!g.dem)return;const v=g.dem,x=g.tileID,D=1<<s.canonical.z-x.canonical.z;return new Gu(g,g.tileSize/gr/D,[(s.canonical.x/D-x.canonical.x)*v.dim,(s.canonical.y/D-x.canonical.y)*v.dim])}tileCoordToPixel(e,s){const c=s*this._scale+this._offset[1],g=Math.floor(e*this._scale+this._offset[0]),v=Math.floor(c);return new ye(g,v)}getElevationAt(e,s,c,g){const v=e*this._scale+this._offset[0],x=s*this._scale+this._offset[1],D=Math.floor(v),S=Math.floor(x),k=this._dem;return g=!!g,c?Vi(Vi(k.get(D,S,g),k.get(D,S+1,g),x-S),Vi(k.get(D+1,S,g),k.get(D+1,S+1,g),x-S),v-D):k.get(D,S,g)}getElevationAtPixel(e,s,c){return this._dem.get(e,s,!!c)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Pa(1,e)*this._dem.stride}}class Fm{constructor(e,s){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Da(gr,16,0),this.featureIndexArray=new pg,this.promoteId=s}insert(e,s,c,g,v,x=0){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,g,v,x);const S=this.grid;for(let k=0;k<s.length;k++){const j=s[k],Y=[1/0,1/0,-1/0,-1/0];for(let J=0;J<j.length;J++){const ae=j[J];Y[0]=Math.min(Y[0],ae.x),Y[1]=Math.min(Y[1],ae.y),Y[2]=Math.max(Y[2],ae.x),Y[3]=Math.max(Y[3],ae.y)}Y[0]<gr&&Y[1]<gr&&Y[2]>=0&&Y[3]>=0&&S.insert(D,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ru.VectorTile(new Ec(this.rawTileData)).layers,this.sourceLayerCoder=new kh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,s,c,g){this.loadVTLayers();const v=e.params||{},x=Cs(v.filter),D=e.tileResult,S=e.transform,k=D.bufferedTilespaceBounds,j=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,(pe,Pe,Xe,ht)=>Kd(D.bufferedTilespaceGeometry,pe,Pe,Xe,ht));j.sort(sf);let Y=null;S.elevation&&j.length>0&&(Y=Gu.create(S.elevation,this.tileID));const J={};let ae;for(let pe=0;pe<j.length;pe++){const Pe=j[pe];if(Pe===ae)continue;ae=Pe;const Xe=this.featureIndexArray.get(Pe);let ht=null;this.loadMatchingFeature(J,Xe,x,v.layers,v.availableImages,s,c,g,(Et,Pt,Ft,Lt=0)=>(ht||(ht=Zc(Et)),Pt.queryIntersectsFeature(D,Et,Ft,ht,this.z,e.transform,e.pixelPosMatrix,Y,Lt)))}return J}loadMatchingFeature(e,s,c,g,v,x,D,S,k){const{featureIndex:j,bucketIndex:Y,sourceLayerIndex:J,layoutVertexArrayOffset:ae}=s,pe=this.bucketLayerIDs[Y];if(g&&!function(Et,Pt){for(let Ft=0;Ft<Et.length;Ft++)if(Pt.indexOf(Et[Ft])>=0)return!0;return!1}(g,pe))return;const Pe=this.sourceLayerCoder.decode(J),Xe=this.vtLayers[Pe].feature(j);if(c.needGeometry){const Et=Su(Xe,!0);if(!c.filter(new be(this.tileID.overscaledZ),Et,this.tileID.canonical))return}else if(!c.filter(new be(this.tileID.overscaledZ),Xe))return;const ht=this.getId(Xe,Pe);for(let Et=0;Et<pe.length;Et++){const Pt=pe[Et];if(g&&g.indexOf(Pt)<0)continue;const Ft=x[Pt];if(!Ft)continue;let Lt={};void 0!==ht&&S&&(Lt=S.getState(Ft.sourceLayer||"_geojsonTileLayer",ht));const Ut=$e({},D[Pt]);Ut.paint=rf(Ut.paint,Ft.paint,Xe,Lt,v),Ut.layout=rf(Ut.layout,Ft.layout,Xe,Lt,v);const yn=!k||k(Xe,Ft,Lt,ae);if(!yn)continue;const pn=new Rh(Xe,this.z,this.x,this.y,ht);pn.layer=Ut;let fn=e[Pt];void 0===fn&&(fn=e[Pt]=[]),fn.push({featureIndex:j,feature:pn,intersectionZ:yn})}}lookupSymbolFeatures(e,s,c,g,v,x,D,S){const k={};this.loadVTLayers();const j=Cs(v);for(const Y of e)this.loadMatchingFeature(k,{bucketIndex:c,sourceLayerIndex:g,featureIndex:Y,layoutVertexArrayOffset:0},j,x,D,S,s);return k}hasLayer(e){for(const s of this.bucketLayerIDs)for(const c of s)if(e===c)return!0;return!1}getId(e,s){let c=e.id;return this.promoteId&&(c=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[s]],"boolean"==typeof c&&(c=Number(c))),c}}function rf(o,e,s,c,g){return Ht(o,(v,x)=>{const D=e instanceof xt?e.get(x):null;return D&&D.evaluate?D.evaluate(s,c,g):D})}function sf(o,e){return e-o}Un("FeatureIndex",Fm,{omit:["rawTileData","sourceLayerCoder"]});class af{constructor(e){const s={},c=[];for(const D in e){const S=e[D],k=s[D]={};for(const j in S){const Y=S[+j];if(!Y||0===Y.bitmap.width||0===Y.bitmap.height)continue;const J=Y.metrics.localGlyph?2:1,ae={x:0,y:0,w:Y.bitmap.width+2*J,h:Y.bitmap.height+2*J};c.push(ae),k[j]={rect:ae,metrics:Y.metrics}}}const{w:g,h:v}=Pp(c),x=new xc({width:g||1,height:v||1});for(const D in e){const S=e[D];for(const k in S){const j=S[+k];if(!j||0===j.bitmap.width||0===j.bitmap.height)continue;const Y=s[D][k].rect,J=j.metrics.localGlyph?2:1;xc.copy(j.bitmap,x,{x:0,y:0},{x:Y.x+J,y:Y.y+J},j.bitmap)}}this.image=x,this.positions=s}}Un("GlyphAtlas",af);class lf{constructor(e){this.tileID=new ms(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,s,c,g,v){this.status="parsing",this.data=e,this.collisionBoxArray=new Kl;const x=new kh(Object.keys(e.layers).sort()),D=new Fm(this.tileID,this.promoteId);D.bucketLayerIDs=[];const S={},k=new Oa(256,256),j={featureIndex:D,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:k,availableImages:c},Y=s.familiesBySource[this.source];for(const Lt in Y){const Ut=e.layers[Lt];if(!Ut)continue;let yn=!1,pn=!1;for(const ln of Y[Lt])"symbol"===ln[0].type?yn=!0:pn=!0;if(!0===this.isSymbolTile&&!yn||!1===this.isSymbolTile&&!pn)continue;1===Ut.version&&Rn(`Vector tile source "${this.source}" layer "${Lt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fn=x.encode(Lt),Pn=[];for(let ln=0;ln<Ut.length;ln++){const tn=Ut.feature(ln),on=D.getId(tn,Lt);Pn.push({feature:tn,id:on,index:ln,sourceLayerIndex:fn})}for(const ln of Y[Lt]){const tn=ln[0];void 0!==this.isSymbolTile&&"symbol"===tn.type!==this.isSymbolTile||tn.minzoom&&this.zoom<Math.floor(tn.minzoom)||tn.maxzoom&&this.zoom>=tn.maxzoom||"none"!==tn.visibility&&(cf(ln,this.zoom,c),(S[tn.id]=tn.createBucket({index:D.bucketLayerIDs.length,layers:ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fn,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(Pn,j,this.tileID.canonical),D.bucketLayerIDs.push(ln.map(on=>on.id)))}}let J,ae,pe,Pe;k.trim();const Xe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ht=Ht(j.glyphDependencies,Lt=>Object.keys(Lt).map(Number));Object.keys(ht).length?g.send("getGlyphs",{uid:this.uid,stacks:ht},(Lt,Ut)=>{J||(J=Lt,ae=Ut,Ft.call(this))},void 0,!1,Xe):ae={};const Et=Object.keys(j.iconDependencies);Et.length?g.send("getImages",{icons:Et,source:this.source,tileID:this.tileID,type:"icons"},(Lt,Ut)=>{J||(J=Lt,pe=Ut,Ft.call(this))},void 0,!1,Xe):pe={};const Pt=Object.keys(j.patternDependencies);function Ft(){if(J)return v(J);if(ae&&pe&&Pe){const Lt=new af(ae),Ut=new fm(pe,Pe);for(const yn in S){const pn=S[yn];pn instanceof fu?(cf(pn.layers,this.zoom,c),zu(pn,ae,Lt.positions,pe,Ut.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):pn.hasPattern&&(pn instanceof dh||pn instanceof ch||pn instanceof sd)&&(cf(pn.layers,this.zoom,c),pn.addFeatures(j,this.tileID.canonical,Ut.patternPositions))}this.status="done",v(null,{buckets:ke(S).filter(yn=>!yn.isEmpty()),featureIndex:D,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lt.image,lineAtlas:k,imageAtlas:Ut,glyphMap:this.returnDependencies?ae:null,iconMap:this.returnDependencies?pe:null,glyphPositions:this.returnDependencies?Lt.positions:null})}}Pt.length?g.send("getImages",{icons:Pt,source:this.source,tileID:this.tileID,type:"patterns"},(Lt,Ut)=>{J||(J=Lt,Pe=Ut,Ft.call(this))},void 0,!1,Xe):Pe={},Ft.call(this)}}function cf(o,e,s){const c=new be(e);for(const g of o)g.recalculate(c,s)}class oc{constructor(e){this.entries={},this.scheduler=e}request(e,s,c,g){const v=this.entries[e]=this.entries[e]||{callbacks:[]};if(v.result){const[x,D]=v.result;return this.scheduler?this.scheduler.add(()=>{g(x,D)},s):g(x,D),()=>{}}return v.callbacks.push(g),v.cancel||(v.cancel=c((x,D)=>{v.result=[x,D];for(const S of v.callbacks)this.scheduler?this.scheduler.add(()=>{S(x,D)},s):S(x,D);setTimeout(()=>delete this.entries[e],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(x=>x!==g),v.callbacks.length||(v.cancel(),delete this.entries[e]))}}}function uf(o,e,s){const c=JSON.stringify(o.request);return o.data&&(this.deduped.entries[c]={result:[null,o.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},g=>{const v=ee(o.request,(x,D,S,k)=>{x?g(x):D&&g(null,{vectorTile:s?void 0:new ru.VectorTile(new Ec(D)),rawData:D,cacheControl:S,expires:k})});return()=>{v.cancel(),g()}},e)}h.ARRAY_TYPE=da,h.AUTH_ERR_MSG=qt,h.Actor=class{constructor(o,e,s){this.target=o,this.parent=e,this.mapId=s,this.callbacks={},this.cancelCallbacks={},Mt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=wi()?o:Ce,this.scheduler=new r_}send(o,e,s,c,g=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=v,this.callbacks[x]=s);const D=Vt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:o,hasCallback:!!s,targetMapId:c,mustQueue:g,sourceMapId:this.mapId,data:Wl(e,D)},D),{cancel:()=>{s&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(o){const e=o.data,s=e.id;if(s&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const c=this.cancelCallbacks[s];delete this.cancelCallbacks[s],c&&c.cancel()}else if(e.mustQueue||wi()){const c=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,e),c&&c.metadata||{type:"message"})}else this.processTask(s,e)}processTask(o,e){if("<response>"===e.type){const s=this.callbacks[o];delete this.callbacks[o],s&&(e.error?s(Za(e.error)):s(null,Za(e.data)))}else{const s=Vt(this.globalScope)?void 0:[],c=e.hasCallback?(v,x)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:v?Wl(v):null,data:Wl(x,s)},s)}:v=>{},g=Za(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,g,c);else if(this.parent.getWorkerSource){const v=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,v[0],g.source)[v[1]](g,c)}else c(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.CanonicalTileID=Jp,h.Color=fi,h.ColorMode=rc,h.CullFaceMode=Ll,h.DEMData=Uu,h.DataConstantProperty=Ke,h.DedupedRequest=oc,h.DepthMode=Ed,h.EXTENT=gr,h.Elevation=class{getAtPointOrZero(o,e=0){return this.getAtPoint(o,e)||0}getAtPoint(o,e,s=!0){null==e&&(e=null);const c=this._source();if(!c||o.y<0||o.y>1)return e;const g=c.getSource().maxzoom,v=1<<g,x=Math.floor(o.x),D=o.x-x,S=new ms(g,x,g,Math.floor(D*v),Math.floor(o.y*v)),k=this.findDEMTileFor(S);if(!k||!k.dem)return e;const j=k.dem,Y=1<<k.tileID.canonical.z,J=(D*Y-k.tileID.canonical.x)*j.dim,ae=(o.y*Y-k.tileID.canonical.y)*j.dim,pe=Math.floor(J),Pe=Math.floor(ae);return(s?this.exaggeration():1)*Vi(Vi(j.get(pe,Pe),j.get(pe,Pe+1),ae-Pe),Vi(j.get(pe+1,Pe),j.get(pe+1,Pe+1),ae-Pe),J-pe)}getAtTileOffset(o,e,s){const c=1<<o.canonical.z;return this.getAtPointOrZero(new Ac(o.wrap+(o.canonical.x+e/gr)/c,(o.canonical.y+s/gr)/c))}getForTilePoints(o,e,s,c){const g=Gu.create(this,o,c);return!!g&&(e.forEach(v=>{v[2]=this.exaggeration()*g.getElevationAt(v[0],v[1],s)}),!0)}getMinMaxForTile(o){const e=this.findDEMTileFor(o);if(!e||!e.dem)return null;const s=e.dem.tree,c=e.tileID,g=1<<o.canonical.z-c.canonical.z;let v=o.canonical.x/g-c.canonical.x,x=o.canonical.y/g-c.canonical.y,D=0;for(let S=0;S<o.canonical.z-c.canonical.z&&!s.leaves[D];S++){v*=2,x*=2;const k=2*Math.floor(x)+Math.floor(v);D=s.childOffsets[D]+k,v%=1,x%=1}return{min:this.exaggeration()*s.minimums[D],max:this.exaggeration()*s.maximums[D]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,e,s){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},h.ErrorEvent=De,h.EvaluationParameters=be,h.Event=Fe,h.Evented=Me,h.GlyphManager=Sc,h.ImagePosition=bh,h.LineAtlas=Oa,h.LngLat=ao,h.LngLatBounds=Tc,h.LocalGlyphMode=yd,h.MAX_SAFE_INTEGER=tt,h.MercatorCoordinate=Ac,h.ONE_EM=24,h.OverscaledTileID=ms,h.Properties=_n,h.RGBAImage=Aa,h.RequestManager=class{constructor(o,e,s){this._transformRequestFn=o,this._customAccessToken=e,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const o=function(){let e="";for(let s=0;s<10;s++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",zn,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,e){return this._transformRequestFn&&this._transformRequestFn(o,e)||{url:o}}normalizeStyleURL(o,e){if(!nt(o))return o;const s=V(o);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||e)}normalizeGlyphsURL(o,e){if(!nt(o))return o;const s=V(o);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||e)}normalizeSourceURL(o,e){if(!nt(o))return o;const s=V(o);return s.path=`/v4/${s.authority}.json`,s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||e)}normalizeSpriteURL(o,e,s,c){const g=V(o);return nt(o)?(g.path=`/styles/v1${g.path}/sprite${e}${s}`,this._makeAPIURL(g,this._customAccessToken||c)):(g.path+=`${e}${s}`,W(g))}normalizeTileURL(o,e,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!nt(o))return o;const c=V(o);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||s&&"raster"!==c.authority&&512===s?"@2x":""}${hi.supported?".webp":"$1"}`),"raster"===c.authority?c.path=`/${wn.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${wn.TILE_URL_VERSION}${c.path}`);const g=this._customAccessToken||function(v){for(const x of v){const D=x.match(/^access_token=(.*)$/);if(D)return D[1]}return null}(c.params)||wn.ACCESS_TOKEN;return wn.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,g)}canonicalizeTileURL(o,e){const s=V(o);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return o;let c="mapbox://";s.path.match(/^\/raster\/v1\//)?c+=`raster/${s.path.replace(`/${wn.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${s.path.replace(`/${wn.TILE_URL_VERSION}/`,"")}`;let g=s.params;return e&&(g=g.filter(v=>!v.match(/^access_token=/))),g.length&&(c+=`?${g.join("&")}`),c}canonicalizeTileset(o,e){const s=!!e&&nt(e),c=[];for(const g of o.tiles||[])ne(g)?c.push(this.canonicalizeTileURL(g,s)):c.push(g);return c}_makeAPIURL(o,e){const s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=V(wn.API_URL);if(o.protocol=c.protocol,o.authority=c.authority,"http"===o.protocol){const g=o.params.indexOf("secure");g>=0&&o.params.splice(g,1)}if("/"!==c.path&&(o.path=`${c.path}${o.path}`),!wn.REQUIRE_ACCESS_TOKEN)return W(o);if(e=e||wn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return o.params=o.params.filter(g=>-1===g.indexOf("access_token")),o.params.push(`access_token=${e||""}`),W(o)}},h.ResourceType=Be,h.SegmentVector=rs,h.SourceCache=ju,h.StencilMode=Fh,h.StructArrayLayout1ui2=Es,h.StructArrayLayout2f1f2i16=to,h.StructArrayLayout2i4=Ji,h.StructArrayLayout2ui4=No,h.StructArrayLayout3f12=ns,h.StructArrayLayout3ui6=Li,h.StructArrayLayout4i8=Er,h.Texture=Oh,h.Tile=Mm,h.Transitionable=et,h.Uniform1f=jr,h.Uniform1i=class extends Sa{constructor(o,e){super(o,e),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.Uniform2f=class extends Sa{constructor(o,e){super(o,e),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.Uniform3f=class extends Sa{constructor(o,e){super(o,e),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.Uniform4f=Lf,h.UniformColor=_g,h.UniformMatrix3f=class extends Sa{constructor(o,e){super(o,e),this.current=ed}set(o){for(let e=0;e<9;e++)if(o[e]!==this.current[e]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}},h.UniformMatrix4f=class extends Sa{constructor(o,e){super(o,e),this.current=Zd}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let e=1;e<16;e++)if(o[e]!==this.current[e]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.UnwrappedTileID=Vu,h.ValidationError=We,h.VectorTileWorkerSource=class extends Me{constructor(o,e,s,c,g){super(),this.actor=o,this.layerIndex=e,this.availableImages=s,this.loadVectorData=g||uf,this.loading={},this.loaded={},this.deduped=new oc(o.scheduler),this.isSpriteLoaded=c,this.scheduler=o.scheduler}loadTile(o,e){const s=o.uid,c=o&&o.request,g=c&&c.collectResourceTiming,v=this.loading[s]=new lf(o);v.abort=this.loadVectorData(o,(x,D)=>{const S=!this.loading[s];if(delete this.loading[s],S||x||!D)return v.status="done",S||(this.loaded[s]=v),e(x);const k=D.rawData,j={};D.expires&&(j.expires=D.expires),D.cacheControl&&(j.cacheControl=D.cacheControl),v.vectorTile=D.vectorTile||new ru.VectorTile(new Ec(k));const Y=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(J,ae)=>{if(J||!ae)return e(J);const pe={};if(g){const Pe=Cd(c);Pe.length>0&&(pe.resourceTiming=JSON.parse(JSON.stringify(Pe)))}e(null,$e({rawTileData:k.slice(0)},ae,j,pe))})};this.isSpriteLoaded?Y():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Y,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):Y()}),this.loaded=this.loaded||{},this.loaded[s]=v})}reloadTile(o,e){const s=this.loaded,c=o.uid,g=this;if(s&&s[c]){const v=s[c];v.showCollisionBoxes=o.showCollisionBoxes,v.enableTerrain=!!o.enableTerrain;const x=(D,S)=>{const k=v.reloadCallback;k&&(delete v.reloadCallback,v.parse(v.vectorTile,g.layerIndex,this.availableImages,g.actor,k)),e(D,S)};"parsing"===v.status?v.reloadCallback=x:"done"===v.status&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(o,e){const s=o.uid,c=this.loading[s];c&&(c.abort&&c.abort(),delete this.loading[s]),e()}removeTile(o,e){const s=this.loaded,c=o.uid;s&&s[c]&&delete s[c],e()}},h.WritingMode=ia,h.ZoomHistory=Vc,h.add=function(o,e,s){return o[0]=e[0]+s[0],o[1]=e[1]+s[1],o[2]=e[2]+s[2],o},h.addDynamicAttributes=Gp,h.altitudeFromMercatorZ=Kp,h.asyncAll=Bt,h.bezier=vt,h.bindAll=Mt,h.bufferConvexPolygon=function(o,e){const s=[];for(let c=0;c<o.length;c++){const g=Tn(c-1,-1,o.length-1),v=Tn(c+1,-1,o.length-1),x=o[c],D=o[v],S=o[g].sub(x).unit(),k=D.sub(x).unit(),j=k.angleWithSep(S.x,S.y),Y=S.add(k).unit().mult(-1*e/Math.sin(j/2));s.push(x.add(Y))}return s},h.cacheEntryPossiblyAdded=function(o){Qe++,Qe>mt&&(o.getActor().send("enforceCacheSizeLimit",wt),Qe=0)},h.clamp=vn,h.clearTileCache=function(o){const e=Ce.caches.delete($n);o&&e.catch(o).then(()=>o())},h.clipLine=Np,h.clone=function(o){var e=new da(3);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e},h.clone$1=function(o){var e=new da(16);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e},h.clone$2=Jt,h.collisionCircleLayout=su,h.config=wn,h.conjugate=function(o,e){return o[0]=-e[0],o[1]=-e[1],o[2]=-e[2],o[3]=e[3],o},h.copy=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o},h.create=Jd,h.create$1=function(){var o=new da(16);return da!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h.create$2=up,h.createExpression=Ga,h.createFilter=Cs,h.createLayout=Yn,h.createStyleLayer=function(o){return"custom"===o.type?new e_(o):new vy[o.type](o)},h.cross=function(o,e,s){var c=e[0],g=e[1],v=e[2],x=s[0],D=s[1],S=s[2];return o[0]=g*S-v*D,o[1]=v*x-c*S,o[2]=c*D-g*x,o},h.degToRad=st,h.div=function(o,e,s){return o[0]=e[0]/s[0],o[1]=e[1]/s[1],o[2]=e[2]/s[2],o},h.dot=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]},h.dot$1=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]},h.ease=Zt,h.easeCubicInOut=At,h.emitValidationErrors=$l,h.endsWith=Ot,h.enforceCacheSizeLimit=function(o){lt(),kn&&kn.then(e=>{e.keys().then(s=>{for(let c=0;c<s.length-o;c++)e.delete(s[c])})})},h.evaluateSizeForFeature=_h,h.evaluateSizeForZoom=au,h.evaluateVariableOffset=ym,h.evented=Q,h.exactEquals=function(o,e){return o[0]===e[0]&&o[1]===e[1]&&o[2]===e[2]&&o[3]===e[3]},h.exactEquals$1=function(o,e){return o[0]===e[0]&&o[1]===e[1]&&o[2]===e[2]},h.exported=Dn,h.exported$1=hi,h.extend=$e,h.filterObject=zt,h.fromMat4=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[4],o[4]=e[5],o[5]=e[6],o[6]=e[8],o[7]=e[9],o[8]=e[10],o},h.fromQuat=function(o,e){var s=e[0],c=e[1],g=e[2],v=e[3],x=s+s,D=c+c,S=g+g,k=s*x,j=c*x,Y=c*D,J=g*x,ae=g*D,pe=g*S,Pe=v*x,Xe=v*D,ht=v*S;return o[0]=1-Y-pe,o[1]=j+ht,o[2]=J-Xe,o[3]=0,o[4]=j-ht,o[5]=1-k-pe,o[6]=ae+Pe,o[7]=0,o[8]=J+Xe,o[9]=ae-Pe,o[10]=1-k-Y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.fromRotation=function(o,e){var s=Math.sin(e),c=Math.cos(e);return o[0]=c,o[1]=s,o[2]=0,o[3]=-s,o[4]=c,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},h.fromScaling=function(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.furthestTileCorner=function(o){const e=Math.round((o+45+360)%360/90)%4;return rt[e]},h.getAABBPointSquareDist=function(o,e,s){let c=0;for(let g=0;g<2;++g){const v=s?s[g]:0;o[g]>v&&(c+=(o[g]-v)*(o[g]-v)),e[g]<v&&(c+=(v-e[g])*(v-e[g]))}return c},h.getAnchorAlignment=md,h.getAnchorJustification=Vp,h.getBounds=function(o){let e=1/0,s=1/0,c=-1/0,g=-1/0;for(const v of o)e=Math.min(e,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),g=Math.max(g,v.y);return{min:new ye(e,s),max:new ye(c,g)}},h.getImage=ot,h.getJSON=function(o,e){return he($e(o,{type:"json"}),e)},h.getMapSessionAPI=Zn,h.getPerformanceMeasurement=Cd,h.getRTLTextPluginStatus=se,h.getReferrer=Rt,h.getVideo=function(o,e){const s=Ce.document.createElement("video");s.muted=!0,s.onloadstart=function(){e(null,s)};for(let c=0;c<o.length;c++){const g=Ce.document.createElement("source");Oe(o[c])||(s.crossOrigin="Anonymous"),g.src=o[c],s.appendChild(g)}return{cancel:()=>{}}},h.identity=Tu,h.identity$1=th,h.invert=function(o,e){var s=e[0],c=e[1],g=e[2],v=e[3],x=e[4],D=e[5],S=e[6],k=e[7],j=e[8],Y=e[9],J=e[10],ae=e[11],pe=e[12],Pe=e[13],Xe=e[14],ht=e[15],Et=s*D-c*x,Pt=s*S-g*x,Ft=s*k-v*x,Lt=c*S-g*D,Ut=c*k-v*D,yn=g*k-v*S,pn=j*Pe-Y*pe,fn=j*Xe-J*pe,Pn=j*ht-ae*pe,ln=Y*Xe-J*Pe,tn=Y*ht-ae*Pe,on=J*ht-ae*Xe,cn=Et*on-Pt*tn+Ft*ln+Lt*Pn-Ut*fn+yn*pn;return cn?(o[0]=(D*on-S*tn+k*ln)*(cn=1/cn),o[1]=(g*tn-c*on-v*ln)*cn,o[2]=(Pe*yn-Xe*Ut+ht*Lt)*cn,o[3]=(J*Ut-Y*yn-ae*Lt)*cn,o[4]=(S*Pn-x*on-k*fn)*cn,o[5]=(s*on-g*Pn+v*fn)*cn,o[6]=(Xe*Ft-pe*yn-ht*Pt)*cn,o[7]=(j*yn-J*Ft+ae*Pt)*cn,o[8]=(x*tn-D*Pn+k*pn)*cn,o[9]=(c*Pn-s*tn-v*pn)*cn,o[10]=(pe*Ut-Pe*Ft+ht*Et)*cn,o[11]=(Y*Ft-j*Ut-ae*Et)*cn,o[12]=(D*fn-x*ln-S*pn)*cn,o[13]=(s*ln-c*fn+g*pn)*cn,o[14]=(Pe*Pt-pe*Lt-Xe*Et)*cn,o[15]=(j*Lt-Y*Pt+J*Et)*cn,o):null},h.isMapAuthenticated=function(o){return mi.has(o)},h.isMapboxURL=nt,h.latFromMercatorY=wd,h.len=fy,h.length=Ao,h.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},h.loadVectorTile=uf,h.makeRequest=he,h.mercatorXfromLng=Yp,h.mercatorYfromLat=xd,h.mercatorZfromAltitude=Pa,h.mul=function(o,e,s){return o[0]=e[0]*s[0],o[1]=e[1]*s[1],o[2]=e[2]*s[2],o[3]=e[3]*s[3],o},h.mul$1=hp,h.mul$2=Eg,h.multiply=dp,h.multiply$1=Ql,h.nextPowerOfTwo=dn,h.normalize=Hf,h.normalize$1=function(o,e){var s=e[0],c=e[1],g=e[2],v=e[3],x=s*s+c*c+g*g+v*v;return x>0&&(x=1/Math.sqrt(x)),o[0]=s*x,o[1]=c*x,o[2]=g*x,o[3]=v*x,o},h.number=Vi,h.ortho=function(o,e,s,c,g,v,x){var D=1/(e-s),S=1/(c-g),k=1/(v-x);return o[0]=-2*D,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*S,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*k,o[11]=0,o[12]=(e+s)*D,o[13]=(g+c)*S,o[14]=(x+v)*k,o[15]=1,o},h.pbf=Ec,h.perspective=function(o,e,s,c,g){var v,x=1/Math.tan(e/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=g&&g!==1/0?(o[10]=(g+c)*(v=1/(c-g)),o[14]=2*g*c*v):(o[10]=-1,o[14]=-2*c),o},h.pick=function(o,e){const s={};for(let c=0;c<e.length;c++){const g=e[c];g in o&&(s[g]=o[g])}return s},h.plugin=fe,h.pointGeometry=ye,h.polygonIntersectsBox=Kd,h.polygonIntersectsPolygon=nd,h.polygonizeBounds=function(o,e,s=0,c=!0){const g=new ye(s,s),v=o.sub(g),x=e.add(g),D=[v,new ye(x.x,v.y),x,new ye(v.x,x.y)];return c&&D.push(v),D},h.posAttributes=by,h.postMapLoadEvent=Cn,h.postTurnstileEvent=Nt,h.potpack=Pp,h.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},h.radToDeg=function(o){return o*dt},h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.registerForPluginStateChange=function(o){return o({pluginStatus:E,pluginURL:A}),Q.on("pluginStateChange",o),o},h.removeAuthState=function(o){mi.delete(o)},h.renderColorRamp=gp,h.rotateX=function(o,e,s){var c=Math.sin(s),g=Math.cos(s),v=e[4],x=e[5],D=e[6],S=e[7],k=e[8],j=e[9],Y=e[10],J=e[11];return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[4]=v*g+k*c,o[5]=x*g+j*c,o[6]=D*g+Y*c,o[7]=S*g+J*c,o[8]=k*g-v*c,o[9]=j*g-x*c,o[10]=Y*g-D*c,o[11]=J*g-S*c,o},h.rotateX$1=Iu,h.rotateY=function(o,e,s){var c=Math.sin(s),g=Math.cos(s),v=e[0],x=e[1],D=e[2],S=e[3],k=e[8],j=e[9],Y=e[10],J=e[11];return e!==o&&(o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=v*g-k*c,o[1]=x*g-j*c,o[2]=D*g-Y*c,o[3]=S*g-J*c,o[8]=v*c+k*g,o[9]=x*c+j*g,o[10]=D*c+Y*g,o[11]=S*c+J*g,o},h.rotateZ=function(o,e,s){var c=Math.sin(s),g=Math.cos(s),v=e[0],x=e[1],D=e[2],S=e[3],k=e[4],j=e[5],Y=e[6],J=e[7];return e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=v*g+k*c,o[1]=x*g+j*c,o[2]=D*g+Y*c,o[3]=S*g+J*c,o[4]=k*g-v*c,o[5]=j*g-x*c,o[6]=Y*g-D*c,o[7]=J*g-S*c,o},h.rotateZ$1=function(o,e,s){s*=.5;var c=e[0],g=e[1],v=e[2],x=e[3],D=Math.sin(s),S=Math.cos(s);return o[0]=c*S+g*D,o[1]=g*S-c*D,o[2]=v*S+x*D,o[3]=x*S-v*D,o},h.scale=function(o,e,s){return o[0]=e[0]*s,o[1]=e[1]*s,o[2]=e[2]*s,o},h.scale$1=function(o,e,s){var c=s[0],g=s[1],v=s[2];return o[0]=e[0]*c,o[1]=e[1]*c,o[2]=e[2]*c,o[3]=e[3]*c,o[4]=e[4]*g,o[5]=e[5]*g,o[6]=e[6]*g,o[7]=e[7]*g,o[8]=e[8]*v,o[9]=e[9]*v,o[10]=e[10]*v,o[11]=e[11]*v,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},h.scale$2=function(o,e,s){return o[0]=e[0]*s,o[1]=e[1]*s,o[2]=e[2]*s,o[3]=e[3]*s,o},h.scaleAndAdd=Au,h.setCacheLimits=function(o,e){wt=o,mt=e},h.setRTLTextPlugin=function(o,e,s=!1){if(E===t||E===d||E===y)throw new Error("setRTLTextPlugin cannot be called multiple times.");A=Dn.resolveURL(o),E=t,w=e,H(),s||de()},h.smoothstep=function(o,e,s){return(s=vn((s-o)/(e-o),0,1))*s*(3-2*s)},h.spec=ue,h.storeAuthState=function(o,e){e?mi.add(o):mi.delete(o)},h.sub=Cg,h.subtract=Gf,h.symbolSize=Ap,h.transformMat3=function(o,e,s){var c=e[0],g=e[1],v=e[2];return o[0]=c*s[0]+g*s[3]+v*s[6],o[1]=c*s[1]+g*s[4]+v*s[7],o[2]=c*s[2]+g*s[5]+v*s[8],o},h.transformMat4=eh,h.transformMat4$1=function(o,e,s){var c=e[0],g=e[1],v=e[2],x=s[3]*c+s[7]*g+s[11]*v+s[15];return o[0]=(s[0]*c+s[4]*g+s[8]*v+s[12])/(x=x||1),o[1]=(s[1]*c+s[5]*g+s[9]*v+s[13])/x,o[2]=(s[2]*c+s[6]*g+s[10]*v+s[14])/x,o},h.transformQuat=$f,h.translate=function(o,e,s){var c,g,v,x,D,S,k,j,Y,J,ae,pe,Pe=s[0],Xe=s[1],ht=s[2];return e===o?(o[12]=e[0]*Pe+e[4]*Xe+e[8]*ht+e[12],o[13]=e[1]*Pe+e[5]*Xe+e[9]*ht+e[13],o[14]=e[2]*Pe+e[6]*Xe+e[10]*ht+e[14],o[15]=e[3]*Pe+e[7]*Xe+e[11]*ht+e[15]):(g=e[1],v=e[2],x=e[3],D=e[4],S=e[5],k=e[6],j=e[7],Y=e[8],J=e[9],ae=e[10],pe=e[11],o[0]=c=e[0],o[1]=g,o[2]=v,o[3]=x,o[4]=D,o[5]=S,o[6]=k,o[7]=j,o[8]=Y,o[9]=J,o[10]=ae,o[11]=pe,o[12]=c*Pe+D*Xe+Y*ht+e[12],o[13]=g*Pe+S*Xe+J*ht+e[13],o[14]=v*Pe+k*Xe+ae*ht+e[14],o[15]=x*Pe+j*Xe+pe*ht+e[15]),o},h.triggerPluginCompletionEvent=B,h.uniqueId=Gt,h.validateCustomStyleLayer=function(o){const e=[],s=o.id;return void 0===s&&e.push({message:`layers.${s}: missing required property "id"`}),void 0===o.render&&e.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&e.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),e},h.validateFog=Hl,h.validateLight=Gl,h.validateStyle=Jr,h.values=ke,h.vectorTile=ru,h.version="2.3.1",h.warnOnce=Rn,h.window=Ce,h.wrap=Tn}),l(0,function(h){function qe(he){const ee=typeof he;if("number"===ee||"boolean"===ee||"string"===ee||null==he)return JSON.stringify(he);if(Array.isArray(he)){let Oe="[";for(const Ye of he)Oe+=`${qe(Ye)},`;return`${Oe}]`}const oe=Object.keys(he).sort();let Se="{";for(let Oe=0;Oe<oe.length;Oe++)Se+=`${JSON.stringify(oe[Oe])}:${qe(he[oe[Oe]])},`;return`${Se}}`}function Ne(he){let ee="";for(const oe of h.refProperties)ee+=`/${qe(he[oe])}`;return ee}class ze{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,oe){for(const Oe of ee){this._layerConfigs[Oe.id]=Oe;const Ye=this._layers[Oe.id]=h.createStyleLayer(Oe);Ye._featureFilter=h.createFilter(Ye.filter),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id]}for(const Oe of oe)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const Se=function(Oe,Ye){const gt={};for(let ot=0;ot<Oe.length;ot++){const He=Ye&&Ye[Oe[ot].id]||Ne(Oe[ot]);Ye&&(Ye[Oe[ot].id]=He);let Dt=gt[He];Dt||(Dt=gt[He]=[]),Dt.push(Oe[ot])}const _t=[];for(const ot in gt)_t.push(gt[ot]);return _t}(h.values(this._layerConfigs),this.keyCache);for(const Oe of Se){const Ye=Oe.map(Fe=>this._layers[Fe.id]),gt=Ye[0];if("none"===gt.visibility)continue;const _t=gt.source||"";let ot=this.familiesBySource[_t];ot||(ot=this.familiesBySource[_t]={});const He=gt.sourceLayer||"_geojsonTileLayer";let Dt=ot[He];Dt||(Dt=ot[He]=[]),Dt.push(Ye)}}}const{ImageBitmap:ye}=h.window;class me{loadTile(ee,oe){const{uid:Se,encoding:Oe,rawImageData:Ye,padding:gt,buildQuadTree:_t}=ee,ot=ye&&Ye instanceof ye?this.getImageData(Ye,gt):Ye;oe(null,new h.DEMData(Se,ot,Oe,gt<1,_t))}getImageData(ee,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const Se=this.offscreenCanvasContext.getImageData(-oe,-oe,ee.width+2*oe,ee.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:Se.width,height:Se.height},Se.data)}}var Ce=function he(ee,oe){var Se,Oe=ee&&ee.type;if("FeatureCollection"===Oe)for(Se=0;Se<ee.features.length;Se++)he(ee.features[Se],oe);else if("GeometryCollection"===Oe)for(Se=0;Se<ee.geometries.length;Se++)he(ee.geometries[Se],oe);else if("Feature"===Oe)he(ee.geometry,oe);else if("Polygon"===Oe)tt(ee.coordinates,oe);else if("MultiPolygon"===Oe)for(Se=0;Se<ee.coordinates.length;Se++)tt(ee.coordinates[Se],oe);return ee};function tt(he,ee){if(0!==he.length){Ue(he[0],ee);for(var oe=1;oe<he.length;oe++)Ue(he[oe],!ee)}}function Ue(he,ee){for(var oe=0,Se=0,Oe=he.length,Ye=Oe-1;Se<Oe;Ye=Se++)oe+=(he[Se][0]-he[Ye][0])*(he[Ye][1]+he[Se][1]);oe>=0!=!!ee&&he.reverse()}const dt=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class st{constructor(ee){this._feature=ee,this.extent=h.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(1===this._feature.type){const ee=[];for(const oe of this._feature.geometry)ee.push([new h.pointGeometry(oe[0],oe[1])]);return ee}{const ee=[];for(const oe of this._feature.geometry){const Se=[];for(const Oe of oe)Se.push(new h.pointGeometry(Oe[0],Oe[1]));ee.push(Se)}return ee}}toGeoJSON(ee,oe,Se){return dt.call(this,ee,oe,Se)}}class rt{constructor(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=ee.length,this._features=ee}feature(ee){return new st(this._features[ee])}}var At=h.vectorTile.VectorTileFeature,vt=Zt;function Zt(he,ee){this.options=ee||{},this.features=he,this.length=he.length}function vn(he,ee){this.id="number"==typeof he.id?he.id:void 0,this.type=he.type,this.rawGeometry=1===he.type?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=ee||4096}Zt.prototype.feature=function(he){return new vn(this.features[he],this.options.extent)},vn.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var ee=0;ee<he.length;ee++){for(var oe=he[ee],Se=[],Oe=0;Oe<oe.length;Oe++)Se.push(new h.pointGeometry(oe[Oe][0],oe[Oe][1]));this.geometry.push(Se)}return this.geometry},vn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,ee=1/0,oe=-1/0,Se=1/0,Oe=-1/0,Ye=0;Ye<he.length;Ye++)for(var gt=he[Ye],_t=0;_t<gt.length;_t++){var ot=gt[_t];ee=Math.min(ee,ot.x),oe=Math.max(oe,ot.x),Se=Math.min(Se,ot.y),Oe=Math.max(Oe,ot.y)}return[ee,Se,oe,Oe]},vn.prototype.toGeoJSON=At.prototype.toGeoJSON;var Tn=ke,Bt=vt;function ke(he){var ee=new h.pbf;return function(oe,Se){for(var Oe in oe.layers)Se.writeMessage(3,$e,oe.layers[Oe])}(he,ee),ee.finish()}function $e(he,ee){var oe;ee.writeVarintField(15,he.version||1),ee.writeStringField(1,he.name||""),ee.writeVarintField(5,he.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<he.length;oe++)Se.feature=he.feature(oe),ee.writeMessage(2,sn,Se);var Oe=Se.keys;for(oe=0;oe<Oe.length;oe++)ee.writeStringField(3,Oe[oe]);var Ye=Se.values;for(oe=0;oe<Ye.length;oe++)ee.writeMessage(4,Mt,Ye[oe])}function sn(he,ee){var oe=he.feature;void 0!==oe.id&&ee.writeVarintField(1,oe.id),ee.writeMessage(2,Gt,he),ee.writeVarintField(3,oe.type),ee.writeMessage(4,bt,oe)}function Gt(he,ee){var oe=he.feature,Se=he.keys,Oe=he.values,Ye=he.keycache,gt=he.valuecache;for(var _t in oe.properties){var ot=Ye[_t];void 0===ot&&(Se.push(_t),Ye[_t]=ot=Se.length-1),ee.writeVarint(ot);var He=oe.properties[_t],Dt=typeof He;"string"!==Dt&&"boolean"!==Dt&&"number"!==Dt&&(He=JSON.stringify(He));var Fe=Dt+":"+He,De=gt[Fe];void 0===De&&(Oe.push(He),gt[Fe]=De=Oe.length-1),ee.writeVarint(De)}}function $t(he,ee){return(ee<<3)+(7&he)}function dn(he){return he<<1^he>>31}function bt(he,ee){for(var oe=he.loadGeometry(),Se=he.type,Oe=0,Ye=0,gt=oe.length,_t=0;_t<gt;_t++){var ot=oe[_t],He=1;1===Se&&(He=ot.length),ee.writeVarint($t(1,He));for(var Dt=3===Se?ot.length-1:ot.length,Fe=0;Fe<Dt;Fe++){1===Fe&&1!==Se&&ee.writeVarint($t(2,Dt-1));var De=ot[Fe].x-Oe,Me=ot[Fe].y-Ye;ee.writeVarint(dn(De)),ee.writeVarint(dn(Me)),Oe+=De,Ye+=Me}3===Se&&ee.writeVarint($t(7,1))}}function Mt(he,ee){var oe=typeof he;"string"===oe?ee.writeStringField(1,he):"boolean"===oe?ee.writeBooleanField(7,he):"number"===oe&&(he%1!=0?ee.writeDoubleField(3,he):he<0?ee.writeSVarintField(6,he):ee.writeVarintField(5,he))}function Ot(he,ee,oe,Se,Oe,Ye){if(Oe-Se<=oe)return;const gt=Se+Oe>>1;Ht(he,ee,gt,Se,Oe,Ye%2),Ot(he,ee,oe,Se,gt-1,Ye+1),Ot(he,ee,oe,gt+1,Oe,Ye+1)}function Ht(he,ee,oe,Se,Oe,Ye){for(;Oe>Se;){if(Oe-Se>600){const He=Oe-Se+1,Dt=oe-Se+1,Fe=Math.log(He),De=.5*Math.exp(2*Fe/3),Me=.5*Math.sqrt(Fe*De*(He-De)/He)*(Dt-He/2<0?-1:1);Ht(he,ee,oe,Math.max(Se,Math.floor(oe-Dt*De/He+Me)),Math.min(Oe,Math.floor(oe+(He-Dt)*De/He+Me)),Ye)}const gt=ee[2*oe+Ye];let _t=Se,ot=Oe;for(zt(he,ee,Se,oe),ee[2*Oe+Ye]>gt&&zt(he,ee,Se,Oe);_t<ot;){for(zt(he,ee,_t,ot),_t++,ot--;ee[2*_t+Ye]<gt;)_t++;for(;ee[2*ot+Ye]>gt;)ot--}ee[2*Se+Ye]===gt?zt(he,ee,Se,ot):(ot++,zt(he,ee,ot,Oe)),ot<=oe&&(Se=ot+1),oe<=ot&&(Oe=ot-1)}}function zt(he,ee,oe,Se){Jt(he,oe,Se),Jt(ee,2*oe,2*Se),Jt(ee,2*oe+1,2*Se+1)}function Jt(he,ee,oe){const Se=he[ee];he[ee]=he[oe],he[oe]=Se}function Nn(he,ee,oe,Se){const Oe=he-oe,Ye=ee-Se;return Oe*Oe+Ye*Ye}Tn.fromVectorTileJs=ke,Tn.fromGeojsonVt=function(he,ee){ee=ee||{};var oe={};for(var Se in he)oe[Se]=new vt(he[Se].features,ee),oe[Se].name=Se,oe[Se].version=ee.version,oe[Se].extent=ee.extent;return ke({layers:oe})},Tn.GeoJSONWrapper=Bt;const Rn=he=>he[0],gi=he=>he[1];class bn{constructor(ee,oe=Rn,Se=gi,Oe=64,Ye=Float64Array){this.nodeSize=Oe,this.points=ee;const gt=ee.length<65536?Uint16Array:Uint32Array,_t=this.ids=new gt(ee.length),ot=this.coords=new Ye(2*ee.length);for(let He=0;He<ee.length;He++)_t[He]=He,ot[2*He]=oe(ee[He]),ot[2*He+1]=Se(ee[He]);Ot(_t,ot,Oe,0,_t.length-1,0)}range(ee,oe,Se,Oe){return function(Ye,gt,_t,ot,He,Dt,Fe){const De=[0,Ye.length-1,0],Me=[];let ue,We;for(;De.length;){const Xt=De.pop(),Fn=De.pop(),Gn=De.pop();if(Fn-Gn<=Fe){for(let qi=Gn;qi<=Fn;qi++)ue=gt[2*qi],We=gt[2*qi+1],ue>=_t&&ue<=He&&We>=ot&&We<=Dt&&Me.push(Ye[qi]);continue}const An=Math.floor((Gn+Fn)/2);ue=gt[2*An],We=gt[2*An+1],ue>=_t&&ue<=He&&We>=ot&&We<=Dt&&Me.push(Ye[An]);const Ci=(Xt+1)%2;(0===Xt?_t<=ue:ot<=We)&&(De.push(Gn),De.push(An-1),De.push(Ci)),(0===Xt?He>=ue:Dt>=We)&&(De.push(An+1),De.push(Fn),De.push(Ci))}return Me}(this.ids,this.coords,ee,oe,Se,Oe,this.nodeSize)}within(ee,oe,Se){return function(Oe,Ye,gt,_t,ot,He){const Dt=[0,Oe.length-1,0],Fe=[],De=ot*ot;for(;Dt.length;){const Me=Dt.pop(),ue=Dt.pop(),We=Dt.pop();if(ue-We<=He){for(let Ci=We;Ci<=ue;Ci++)Nn(Ye[2*Ci],Ye[2*Ci+1],gt,_t)<=De&&Fe.push(Oe[Ci]);continue}const Xt=Math.floor((We+ue)/2),Fn=Ye[2*Xt],Gn=Ye[2*Xt+1];Nn(Fn,Gn,gt,_t)<=De&&Fe.push(Oe[Xt]);const An=(Me+1)%2;(0===Me?gt-ot<=Fn:_t-ot<=Gn)&&(Dt.push(We),Dt.push(Xt-1),Dt.push(An)),(0===Me?gt+ot>=Fn:_t+ot>=Gn)&&(Dt.push(Xt+1),Dt.push(ue),Dt.push(An))}return Fe}(this.ids,this.coords,ee,oe,Se,this.nodeSize)}}const wi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Pi=Math.fround||(li=new Float32Array(1),he=>(li[0]=+he,li[0]));var li;class en{constructor(ee){this.options=hi(Object.create(wi),ee),this.trees=new Array(this.options.maxZoom+1)}load(ee){const{log:oe,minZoom:Se,maxZoom:Oe,nodeSize:Ye}=this.options;oe&&console.time("total time");const gt=`prepare ${ee.length} points`;oe&&console.time(gt),this.points=ee;let _t=[];for(let ot=0;ot<ee.length;ot++)ee[ot].geometry&&_t.push(It(ee[ot],ot));this.trees[Oe+1]=new bn(_t,Fi,Hi,Ye,Float32Array),oe&&console.timeEnd(gt);for(let ot=Oe;ot>=Se;ot--){const He=+Date.now();_t=this._cluster(_t,ot),this.trees[ot]=new bn(_t,Fi,Hi,Ye,Float32Array),oe&&console.log("z%d: %d clusters in %dms",ot,_t.length,+Date.now()-He)}return oe&&console.timeEnd("total time"),this}getClusters(ee,oe){let Se=((ee[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,ee[1]));let Ye=180===ee[2]?180:((ee[2]+180)%360+360)%360-180;const gt=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)Se=-180,Ye=180;else if(Se>Ye){const Dt=this.getClusters([Se,Oe,180,gt],oe),Fe=this.getClusters([-180,Oe,Ye,gt],oe);return Dt.concat(Fe)}const _t=this.trees[this._limitZoom(oe)],ot=_t.range(Dn(Se),jn(gt),Dn(Ye),jn(Oe)),He=[];for(const Dt of ot){const Fe=_t.points[Dt];He.push(Fe.numPoints?Vt(Fe):this.points[Fe.index])}return He}getChildren(ee){const oe=this._getOriginId(ee),Se=this._getOriginZoom(ee),Oe="No cluster with the specified id.",Ye=this.trees[Se];if(!Ye)throw new Error(Oe);const gt=Ye.points[oe];if(!gt)throw new Error(Oe);const _t=this.options.radius/(this.options.extent*Math.pow(2,Se-1)),ot=Ye.within(gt.x,gt.y,_t),He=[];for(const Dt of ot){const Fe=Ye.points[Dt];Fe.parentId===ee&&He.push(Fe.numPoints?Vt(Fe):this.points[Fe.index])}if(0===He.length)throw new Error(Oe);return He}getLeaves(ee,oe,Se){const Oe=[];return this._appendLeaves(Oe,ee,oe=oe||10,Se=Se||0,0),Oe}getTile(ee,oe,Se){const Oe=this.trees[this._limitZoom(ee)],Ye=Math.pow(2,ee),{extent:gt,radius:_t}=this.options,ot=_t/gt,He=(Se-ot)/Ye,Dt=(Se+1+ot)/Ye,Fe={features:[]};return this._addTileFeatures(Oe.range((oe-ot)/Ye,He,(oe+1+ot)/Ye,Dt),Oe.points,oe,Se,Ye,Fe),0===oe&&this._addTileFeatures(Oe.range(1-ot/Ye,He,1,Dt),Oe.points,Ye,Se,Ye,Fe),oe===Ye-1&&this._addTileFeatures(Oe.range(0,He,ot/Ye,Dt),Oe.points,-1,Se,Ye,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(ee){let oe=this._getOriginZoom(ee)-1;for(;oe<=this.options.maxZoom;){const Se=this.getChildren(ee);if(oe++,1!==Se.length)break;ee=Se[0].properties.cluster_id}return oe}_appendLeaves(ee,oe,Se,Oe,Ye){const gt=this.getChildren(oe);for(const _t of gt){const ot=_t.properties;if(ot&&ot.cluster?Ye+ot.point_count<=Oe?Ye+=ot.point_count:Ye=this._appendLeaves(ee,ot.cluster_id,Se,Oe,Ye):Ye<Oe?Ye++:ee.push(_t),ee.length===Se)break}return Ye}_addTileFeatures(ee,oe,Se,Oe,Ye,gt){for(const _t of ee){const ot=oe[_t],He=ot.numPoints;let Dt,Fe,De;if(He)Dt=xn(ot),Fe=ot.x,De=ot.y;else{const We=this.points[ot.index];Dt=We.properties,Fe=Dn(We.geometry.coordinates[0]),De=jn(We.geometry.coordinates[1])}const Me={type:1,geometry:[[Math.round(this.options.extent*(Fe*Ye-Se)),Math.round(this.options.extent*(De*Ye-Oe))]],tags:Dt};let ue;He?ue=ot.id:this.options.generateId?ue=ot.index:this.points[ot.index].id&&(ue=this.points[ot.index].id),void 0!==ue&&(Me.id=ue),gt.features.push(Me)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))}_cluster(ee,oe){const Se=[],{radius:Oe,extent:Ye,reduce:gt,minPoints:_t}=this.options,ot=Oe/(Ye*Math.pow(2,oe));for(let He=0;He<ee.length;He++){const Dt=ee[He];if(Dt.zoom<=oe)continue;Dt.zoom=oe;const Fe=this.trees[oe+1],De=Fe.within(Dt.x,Dt.y,ot),Me=Dt.numPoints||1;let ue=Me;for(const We of De){const Xt=Fe.points[We];Xt.zoom>oe&&(ue+=Xt.numPoints||1)}if(ue>=_t){let We=Dt.x*Me,Xt=Dt.y*Me,Fn=gt&&Me>1?this._map(Dt,!0):null;const Gn=(He<<5)+(oe+1)+this.points.length;for(const An of De){const Ci=Fe.points[An];if(Ci.zoom<=oe)continue;Ci.zoom=oe;const qi=Ci.numPoints||1;We+=Ci.x*qi,Xt+=Ci.y*qi,Ci.parentId=Gn,gt&&(Fn||(Fn=this._map(Dt,!0)),gt(Fn,this._map(Ci)))}Dt.parentId=Gn,Se.push(si(We/ue,Xt/ue,Gn,ue,Fn))}else if(Se.push(Dt),ue>1)for(const We of De){const Xt=Fe.points[We];Xt.zoom<=oe||(Xt.zoom=oe,Se.push(Xt))}}return Se}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,oe){if(ee.numPoints)return oe?hi({},ee.properties):ee.properties;const Se=this.points[ee.index].properties,Oe=this.options.map(Se);return oe&&Oe===Se?hi({},Oe):Oe}}function si(he,ee,oe,Se,Oe){return{x:Pi(he),y:Pi(ee),zoom:1/0,id:oe,parentId:-1,numPoints:Se,properties:Oe}}function It(he,ee){const[oe,Se]=he.geometry.coordinates;return{x:Pi(Dn(oe)),y:Pi(jn(Se)),zoom:1/0,index:ee,parentId:-1}}function Vt(he){return{type:"Feature",id:he.id,properties:xn(he),geometry:{type:"Point",coordinates:[(ee=he.x,360*(ee-.5)),wn(he.y)]}};var ee}function xn(he){const ee=he.numPoints,oe=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee;return hi(hi({},he.properties),{cluster:!0,cluster_id:he.id,point_count:ee,point_count_abbreviated:oe})}function Dn(he){return he/360+.5}function jn(he){const ee=Math.sin(he*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function wn(he){const ee=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function hi(he,ee){for(const oe in ee)he[oe]=ee[oe];return he}function Fi(he){return he.x}function Hi(he){return he.y}function ur(he,ee,oe,Se){for(var Oe,Ye=Se,gt=oe-ee>>1,_t=oe-ee,ot=he[ee],He=he[ee+1],Dt=he[oe],Fe=he[oe+1],De=ee+3;De<oe;De+=3){var Me=Ln(he[De],he[De+1],ot,He,Dt,Fe);if(Me>Ye)Oe=De,Ye=Me;else if(Me===Ye){var ue=Math.abs(De-gt);ue<_t&&(Oe=De,_t=ue)}}Ye>Se&&(Oe-ee>3&&ur(he,ee,Oe,Se),he[Oe+2]=Ye,oe-Oe>3&&ur(he,Oe,oe,Se))}function Ln(he,ee,oe,Se,Oe,Ye){var gt=Oe-oe,_t=Ye-Se;if(0!==gt||0!==_t){var ot=((he-oe)*gt+(ee-Se)*_t)/(gt*gt+_t*_t);ot>1?(oe=Oe,Se=Ye):ot>0&&(oe+=gt*ot,Se+=_t*ot)}return(gt=he-oe)*gt+(_t=ee-Se)*_t}function pr(he,ee,oe,Se){var Oe={id:void 0===he?null:he,type:ee,geometry:oe,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ye){var gt=Ye.geometry,_t=Ye.type;if("Point"===_t||"MultiPoint"===_t||"LineString"===_t)zn(Ye,gt);else if("Polygon"===_t||"MultiLineString"===_t)for(var ot=0;ot<gt.length;ot++)zn(Ye,gt[ot]);else if("MultiPolygon"===_t)for(ot=0;ot<gt.length;ot++)for(var He=0;He<gt[ot].length;He++)zn(Ye,gt[ot][He])}(Oe),Oe}function zn(he,ee){for(var oe=0;oe<ee.length;oe+=3)he.minX=Math.min(he.minX,ee[oe]),he.minY=Math.min(he.minY,ee[oe+1]),he.maxX=Math.max(he.maxX,ee[oe]),he.maxY=Math.max(he.maxY,ee[oe+1])}function qt(he,ee,oe,Se){if(ee.geometry){var Oe=ee.geometry.coordinates,Ye=ee.geometry.type,gt=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),_t=[],ot=ee.id;if(oe.promoteId?ot=ee.properties[oe.promoteId]:oe.generateId&&(ot=Se||0),"Point"===Ye)nt(Oe,_t);else if("MultiPoint"===Ye)for(var He=0;He<Oe.length;He++)nt(Oe[He],_t);else if("LineString"===Ye)ne(Oe,_t,gt,!1);else if("MultiLineString"===Ye){if(oe.lineMetrics){for(He=0;He<Oe.length;He++)ne(Oe[He],_t=[],gt,!1),he.push(pr(ot,"LineString",_t,ee.properties));return}$(Oe,_t,gt,!1)}else if("Polygon"===Ye)$(Oe,_t,gt,!0);else{if("MultiPolygon"!==Ye){if("GeometryCollection"===Ye){for(He=0;He<ee.geometry.geometries.length;He++)qt(he,{id:ot,geometry:ee.geometry.geometries[He],properties:ee.properties},oe,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<Oe.length;He++){var Dt=[];$(Oe[He],Dt,gt,!0),_t.push(Dt)}}he.push(pr(ot,Ye,_t,ee.properties))}}function nt(he,ee){ee.push(V(he[0])),ee.push(W(he[1])),ee.push(0)}function ne(he,ee,oe,Se){for(var Oe,Ye,gt=0,_t=0;_t<he.length;_t++){var ot=V(he[_t][0]),He=W(he[_t][1]);ee.push(ot),ee.push(He),ee.push(0),_t>0&&(gt+=Se?(Oe*He-ot*Ye)/2:Math.sqrt(Math.pow(ot-Oe,2)+Math.pow(He-Ye,2))),Oe=ot,Ye=He}var Dt=ee.length-3;ee[2]=1,ur(ee,0,Dt,oe),ee[Dt+2]=1,ee.size=Math.abs(gt),ee.start=0,ee.end=ee.size}function $(he,ee,oe,Se){for(var Oe=0;Oe<he.length;Oe++){var Ye=[];ne(he[Oe],Ye,oe,Se),ee.push(Ye)}}function V(he){return he/360+.5}function W(he){var ee=Math.sin(he*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function ce(he,ee,oe,Se,Oe,Ye,gt,_t){if(Se/=ee,Ye>=(oe/=ee)&&gt<Se)return he;if(gt<oe||Ye>=Se)return null;for(var ot=[],He=0;He<he.length;He++){var Dt=he[He],Fe=Dt.geometry,De=Dt.type,Me=0===Oe?Dt.minX:Dt.minY,ue=0===Oe?Dt.maxX:Dt.maxY;if(Me>=oe&&ue<Se)ot.push(Dt);else if(!(ue<oe||Me>=Se)){var We=[];if("Point"===De||"MultiPoint"===De)Ae(Fe,We,oe,Se,Oe);else if("LineString"===De)Le(Fe,We,oe,Se,Oe,!1,_t.lineMetrics);else if("MultiLineString"===De)un(Fe,We,oe,Se,Oe,!1);else if("Polygon"===De)un(Fe,We,oe,Se,Oe,!0);else if("MultiPolygon"===De)for(var Xt=0;Xt<Fe.length;Xt++){var Fn=[];un(Fe[Xt],Fn,oe,Se,Oe,!0),Fn.length&&We.push(Fn)}if(We.length){if(_t.lineMetrics&&"LineString"===De){for(Xt=0;Xt<We.length;Xt++)ot.push(pr(Dt.id,De,We[Xt],Dt.tags));continue}"LineString"!==De&&"MultiLineString"!==De||(1===We.length?(De="LineString",We=We[0]):De="MultiLineString"),"Point"!==De&&"MultiPoint"!==De||(De=3===We.length?"Point":"MultiPoint"),ot.push(pr(Dt.id,De,We,Dt.tags))}}}return ot.length?ot:null}function Ae(he,ee,oe,Se,Oe){for(var Ye=0;Ye<he.length;Ye+=3){var gt=he[Ye+Oe];gt>=oe&&gt<=Se&&(ee.push(he[Ye]),ee.push(he[Ye+1]),ee.push(he[Ye+2]))}}function Le(he,ee,oe,Se,Oe,Ye,gt){for(var _t,ot,He=Nt(he),Dt=0===Oe?Wt:Zn,Fe=he.start,De=0;De<he.length-3;De+=3){var Me=he[De],ue=he[De+1],We=he[De+2],Xt=he[De+3],Fn=he[De+4],Gn=0===Oe?Me:ue,An=0===Oe?Xt:Fn,Ci=!1;gt&&(_t=Math.sqrt(Math.pow(Me-Xt,2)+Math.pow(ue-Fn,2))),Gn<oe?An>oe&&(ot=Dt(He,Me,ue,Xt,Fn,oe),gt&&(He.start=Fe+_t*ot)):Gn>Se?An<Se&&(ot=Dt(He,Me,ue,Xt,Fn,Se),gt&&(He.start=Fe+_t*ot)):Cn(He,Me,ue,We),An<oe&&Gn>=oe&&(ot=Dt(He,Me,ue,Xt,Fn,oe),Ci=!0),An>Se&&Gn<=Se&&(ot=Dt(He,Me,ue,Xt,Fn,Se),Ci=!0),!Ye&&Ci&&(gt&&(He.end=Fe+_t*ot),ee.push(He),He=Nt(he)),gt&&(Fe+=_t)}var qi=he.length-3;Me=he[qi],ue=he[qi+1],We=he[qi+2],(Gn=0===Oe?Me:ue)>=oe&&Gn<=Se&&Cn(He,Me,ue,We),qi=He.length-3,Ye&&qi>=3&&(He[qi]!==He[0]||He[qi+1]!==He[1])&&Cn(He,He[0],He[1],He[2]),He.length&&ee.push(He)}function Nt(he){var ee=[];return ee.size=he.size,ee.start=he.start,ee.end=he.end,ee}function un(he,ee,oe,Se,Oe,Ye){for(var gt=0;gt<he.length;gt++)Le(he[gt],ee,oe,Se,Oe,Ye,!1)}function Cn(he,ee,oe,Se){he.push(ee),he.push(oe),he.push(Se)}function Wt(he,ee,oe,Se,Oe,Ye){var gt=(Ye-ee)/(Se-ee);return he.push(Ye),he.push(oe+(Oe-oe)*gt),he.push(1),gt}function Zn(he,ee,oe,Se,Oe,Ye){var gt=(Ye-oe)/(Oe-oe);return he.push(ee+(Se-ee)*gt),he.push(Ye),he.push(1),gt}function mi(he,ee){for(var oe=[],Se=0;Se<he.length;Se++){var Oe,Ye=he[Se],gt=Ye.type;if("Point"===gt||"MultiPoint"===gt||"LineString"===gt)Oe=$n(Ye.geometry,ee);else if("MultiLineString"===gt||"Polygon"===gt){Oe=[];for(var _t=0;_t<Ye.geometry.length;_t++)Oe.push($n(Ye.geometry[_t],ee))}else if("MultiPolygon"===gt)for(Oe=[],_t=0;_t<Ye.geometry.length;_t++){for(var ot=[],He=0;He<Ye.geometry[_t].length;He++)ot.push($n(Ye.geometry[_t][He],ee));Oe.push(ot)}oe.push(pr(Ye.id,gt,Oe,Ye.tags))}return oe}function $n(he,ee){var oe=[];oe.size=he.size,void 0!==he.start&&(oe.start=he.start,oe.end=he.end);for(var Se=0;Se<he.length;Se+=3)oe.push(he[Se]+ee,he[Se+1],he[Se+2]);return oe}function kn(he,ee){if(he.transformed)return he;var oe,Se,Oe,Ye=1<<he.z,gt=he.x,_t=he.y;for(oe=0;oe<he.features.length;oe++){var ot=he.features[oe],He=ot.geometry,Dt=ot.type;if(ot.geometry=[],1===Dt)for(Se=0;Se<He.length;Se+=2)ot.geometry.push(ni(He[Se],He[Se+1],ee,Ye,gt,_t));else for(Se=0;Se<He.length;Se++){var Fe=[];for(Oe=0;Oe<He[Se].length;Oe+=2)Fe.push(ni(He[Se][Oe],He[Se][Oe+1],ee,Ye,gt,_t));ot.geometry.push(Fe)}}return he.transformed=!0,he}function ni(he,ee,oe,Se,Oe,Ye){return[Math.round(oe*(he*Se-Oe)),Math.round(oe*(ee*Se-Ye))]}function wt(he,ee,oe,Se,Oe){for(var Ye=ee===Oe.maxZoom?0:Oe.tolerance/((1<<ee)*Oe.extent),gt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:Se,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_t=0;_t<he.length;_t++){gt.numFeatures++,mt(gt,he[_t],Ye,Oe);var ot=he[_t].minX,He=he[_t].minY,Dt=he[_t].maxX,Fe=he[_t].maxY;ot<gt.minX&&(gt.minX=ot),He<gt.minY&&(gt.minY=He),Dt>gt.maxX&&(gt.maxX=Dt),Fe>gt.maxY&&(gt.maxY=Fe)}return gt}function mt(he,ee,oe,Se){var Oe=ee.geometry,Ye=ee.type,gt=[];if("Point"===Ye||"MultiPoint"===Ye)for(var _t=0;_t<Oe.length;_t+=3)gt.push(Oe[_t]),gt.push(Oe[_t+1]),he.numPoints++,he.numSimplified++;else if("LineString"===Ye)lt(gt,Oe,he,oe,!1,!1);else if("MultiLineString"===Ye||"Polygon"===Ye)for(_t=0;_t<Oe.length;_t++)lt(gt,Oe[_t],he,oe,"Polygon"===Ye,0===_t);else if("MultiPolygon"===Ye)for(var ot=0;ot<Oe.length;ot++){var He=Oe[ot];for(_t=0;_t<He.length;_t++)lt(gt,He[_t],he,oe,!0,0===_t)}if(gt.length){var Dt=ee.tags||null;if("LineString"===Ye&&Se.lineMetrics){for(var Fe in Dt={},ee.tags)Dt[Fe]=ee.tags[Fe];Dt.mapbox_clip_start=Oe.start/Oe.size,Dt.mapbox_clip_end=Oe.end/Oe.size}var De={geometry:gt,type:"Polygon"===Ye||"MultiPolygon"===Ye?3:"LineString"===Ye||"MultiLineString"===Ye?2:1,tags:Dt};null!==ee.id&&(De.id=ee.id),he.features.push(De)}}function lt(he,ee,oe,Se,Oe,Ye){var gt=Se*Se;if(Se>0&&ee.size<(Oe?gt:Se))oe.numPoints+=ee.length/3;else{for(var _t=[],ot=0;ot<ee.length;ot+=3)(0===Se||ee[ot+2]>gt)&&(oe.numSimplified++,_t.push(ee[ot]),_t.push(ee[ot+1])),oe.numPoints++;Oe&&function(He,Dt){for(var Fe=0,De=0,Me=He.length,ue=Me-2;De<Me;ue=De,De+=2)Fe+=(He[De]-He[ue])*(He[De+1]+He[ue+1]);if(Fe>0===Dt)for(De=0,Me=He.length;De<Me/2;De+=2){var We=He[De],Xt=He[De+1];He[De]=He[Me-2-De],He[De+1]=He[Me-1-De],He[Me-2-De]=We,He[Me-1-De]=Xt}}(_t,Ye),he.push(_t)}}function je(he,ee){var oe=(ee=this.options=function(Oe,Ye){for(var gt in Ye)Oe[gt]=Ye[gt];return Oe}(Object.create(this.options),ee)).debug;if(oe&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var Oe,Ye,gt,_t,ot,He,Se=function(Oe,Ye){var gt=[];if("FeatureCollection"===Oe.type)for(var _t=0;_t<Oe.features.length;_t++)qt(gt,Oe.features[_t],Ye,_t);else qt(gt,"Feature"===Oe.type?Oe:{geometry:Oe},Ye);return gt}(he,ee);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Oe=Se,Ye=ee,gt=Ye.buffer/Ye.extent,_t=Oe,ot=ce(Oe,1,-1-gt,gt,0,-1,2,Ye),He=ce(Oe,1,1-gt,2+gt,0,-1,2,Ye),(ot||He)&&(_t=ce(Oe,1,-gt,1+gt,0,-1,2,Ye)||[],ot&&(_t=mi(ot,1).concat(_t)),He&&(_t=_t.concat(mi(He,-1)))),Se=_t).length&&this.splitTile(Se,0,0,0),oe&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qe(he,ee,oe){return 32*((1<<he)*oe+ee)+he}function Be(he,ee){const oe=he.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const Se=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!Se)return ee(null,null);const Oe=new rt(Se.features);let Ye=Tn(Oe);0===Ye.byteOffset&&Ye.byteLength===Ye.buffer.byteLength||(Ye=new Uint8Array(Ye)),ee(null,{vectorTile:Oe,rawData:Ye.buffer})}je.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},je.prototype.splitTile=function(he,ee,oe,Se,Oe,Ye,gt){for(var _t=[he,ee,oe,Se],ot=this.options,He=ot.debug;_t.length;){Se=_t.pop(),oe=_t.pop(),ee=_t.pop(),he=_t.pop();var Dt=1<<ee,Fe=Qe(ee,oe,Se),De=this.tiles[Fe];if(!De&&(He>1&&console.time("creation"),De=this.tiles[Fe]=wt(he,ee,oe,Se,ot),this.tileCoords.push({z:ee,x:oe,y:Se}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,oe,Se,De.numFeatures,De.numPoints,De.numSimplified),console.timeEnd("creation"));var Me="z"+ee;this.stats[Me]=(this.stats[Me]||0)+1,this.total++}if(De.source=he,Oe){if(ee===ot.maxZoom||ee===Oe)continue;var ue=1<<Oe-ee;if(oe!==Math.floor(Ye/ue)||Se!==Math.floor(gt/ue))continue}else if(ee===ot.indexMaxZoom||De.numPoints<=ot.indexMaxPoints)continue;if(De.source=null,0!==he.length){He>1&&console.time("clipping");var We,Xt,Fn,Gn,An,Ci,qi=.5*ot.buffer/ot.extent,rr=.5-qi,En=.5+qi,ei=1+qi;We=Xt=Fn=Gn=null,An=ce(he,Dt,oe-qi,oe+En,0,De.minX,De.maxX,ot),Ci=ce(he,Dt,oe+rr,oe+ei,0,De.minX,De.maxX,ot),he=null,An&&(We=ce(An,Dt,Se-qi,Se+En,1,De.minY,De.maxY,ot),Xt=ce(An,Dt,Se+rr,Se+ei,1,De.minY,De.maxY,ot),An=null),Ci&&(Fn=ce(Ci,Dt,Se-qi,Se+En,1,De.minY,De.maxY,ot),Gn=ce(Ci,Dt,Se+rr,Se+ei,1,De.minY,De.maxY,ot),Ci=null),He>1&&console.timeEnd("clipping"),_t.push(We||[],ee+1,2*oe,2*Se),_t.push(Xt||[],ee+1,2*oe,2*Se+1),_t.push(Fn||[],ee+1,2*oe+1,2*Se),_t.push(Gn||[],ee+1,2*oe+1,2*Se+1)}}},je.prototype.getTile=function(he,ee,oe){var Se=this.options,Oe=Se.extent,Ye=Se.debug;if(he<0||he>24)return null;var gt=1<<he,_t=Qe(he,ee=(ee%gt+gt)%gt,oe);if(this.tiles[_t])return kn(this.tiles[_t],Oe);Ye>1&&console.log("drilling down to z%d-%d-%d",he,ee,oe);for(var ot,He=he,Dt=ee,Fe=oe;!ot&&He>0;)He--,Dt=Math.floor(Dt/2),Fe=Math.floor(Fe/2),ot=this.tiles[Qe(He,Dt,Fe)];return ot&&ot.source?(Ye>1&&console.log("found parent tile z%d-%d-%d",He,Dt,Fe),Ye>1&&console.time("drilling down"),this.splitTile(ot.source,He,Dt,Fe,he,ee,oe),Ye>1&&console.timeEnd("drilling down"),this.tiles[_t]?kn(this.tiles[_t],Oe):null):null};class ft extends h.VectorTileWorkerSource{constructor(ee,oe,Se,Oe,Ye){super(ee,oe,Se,Oe,Be),Ye&&(this.loadGeoJSON=Ye)}loadData(ee,oe){const Se=ee&&ee.request,Oe=Se&&Se.collectResourceTiming;this.loadGeoJSON(ee,(Ye,gt)=>{if(Ye||!gt)return oe(Ye);if("object"!=typeof gt)return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{Ce(gt,!0);try{if(ee.filter){const ot=h.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ot.result)throw new Error(ot.value.map(Dt=>`${Dt.key}: ${Dt.message}`).join(", "));const He=gt.features.filter(Dt=>ot.value.evaluate({zoom:0},Dt));gt={type:"FeatureCollection",features:He}}this._geoJSONIndex=ee.cluster?new en(function({superclusterOptions:ot,clusterProperties:He}){if(!He||!ot)return ot;const Dt={},Fe={},De={accumulated:null,zoom:0},Me={properties:null},ue=Object.keys(He);for(const We of ue){const[Xt,Fn]=He[We],Gn=h.createExpression(Fn),An=h.createExpression("string"==typeof Xt?[Xt,["accumulated"],["get",We]]:Xt);Dt[We]=Gn.value,Fe[We]=An.value}return ot.map=We=>{Me.properties=We;const Xt={};for(const Fn of ue)Xt[Fn]=Dt[Fn].evaluate(De,Me);return Xt},ot.reduce=(We,Xt)=>{Me.properties=Xt;for(const Fn of ue)De.accumulated=We[Fn],We[Fn]=Fe[Fn].evaluate(De,Me)},ot}(ee)).load(gt.features):new je(ot=gt,ee.geojsonVtOptions)}catch(ot){return oe(ot)}this.loaded={};const _t={};if(Oe){const ot=h.getPerformanceMeasurement(Se);ot&&(_t.resourceTiming={},_t.resourceTiming[ee.source]=JSON.parse(JSON.stringify(ot)))}oe(null,_t)}var ot})}reloadTile(ee,oe){const Se=this.loaded;return Se&&Se[ee.uid]?super.reloadTile(ee,oe):this.loadTile(ee,oe)}loadGeoJSON(ee,oe){if(ee.request)h.getJSON(ee.request,oe);else{if("string"!=typeof ee.data)return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(ee.data))}catch{return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(Se){oe(Se)}}getClusterChildren(ee,oe){try{oe(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(Se){oe(Se)}}getClusterLeaves(ee,oe){try{oe(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(Se){oe(Se)}}}class Rt{constructor(ee){this.self=ee,this.actor=new h.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:h.VectorTileWorkerSource,geojson:ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,Se)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=Se},this.self.registerRTLTextPlugin=oe=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=oe.applyArabicShaping,h.plugin.processBidirectionalText=oe.processBidirectionalText,h.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}checkIfReady(ee,oe,Se){Se()}setReferrer(ee,oe){this.referrer=oe}spriteLoaded(ee,oe){this.isSpriteLoaded=oe;for(const Se in this.workerSources[ee]){const Oe=this.workerSources[ee][Se];for(const Ye in Oe)Oe[Ye]instanceof h.VectorTileWorkerSource&&(Oe[Ye].isSpriteLoaded=oe,Oe[Ye].fire(new h.Event("isSpriteLoaded")))}}setImages(ee,oe,Se){this.availableImages[ee]=oe;for(const Oe in this.workerSources[ee]){const Ye=this.workerSources[ee][Oe];for(const gt in Ye)Ye[gt].availableImages=oe}Se()}enableTerrain(ee,oe,Se){this.terrain=oe,Se()}setLayers(ee,oe,Se){this.getLayerIndex(ee).replace(oe),Se()}updateLayers(ee,oe,Se){this.getLayerIndex(ee).update(oe.layers,oe.removedIds),Se()}loadTile(ee,oe,Se){const Oe=this.enableTerrain?h.extend({enableTerrain:this.terrain},oe):oe;this.getWorkerSource(ee,oe.type,oe.source).loadTile(Oe,Se)}loadDEMTile(ee,oe,Se){const Oe=this.enableTerrain?h.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(ee,oe.source).loadTile(Oe,Se)}reloadTile(ee,oe,Se){const Oe=this.enableTerrain?h.extend({enableTerrain:this.terrain},oe):oe;this.getWorkerSource(ee,oe.type,oe.source).reloadTile(Oe,Se)}abortTile(ee,oe,Se){this.getWorkerSource(ee,oe.type,oe.source).abortTile(oe,Se)}removeTile(ee,oe,Se){this.getWorkerSource(ee,oe.type,oe.source).removeTile(oe,Se)}removeSource(ee,oe,Se){if(!this.workerSources[ee]||!this.workerSources[ee][oe.type]||!this.workerSources[ee][oe.type][oe.source])return;const Oe=this.workerSources[ee][oe.type][oe.source];delete this.workerSources[ee][oe.type][oe.source],void 0!==Oe.removeSource?Oe.removeSource(oe,Se):Se()}loadWorkerSource(ee,oe,Se){try{this.self.importScripts(oe.url),Se()}catch(Oe){Se(Oe.toString())}}syncRTLPluginState(ee,oe,Se){try{h.plugin.setState(oe);const Oe=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&null!=Oe){this.self.importScripts(Oe);const Ye=h.plugin.isParsed();Se(Ye?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Oe}`),Ye)}}catch(Oe){Se(Oe.toString())}}getAvailableImages(ee){let oe=this.availableImages[ee];return oe||(oe=[]),oe}getLayerIndex(ee){let oe=this.layerIndexes[ee];return oe||(oe=this.layerIndexes[ee]=new ze),oe}getWorkerSource(ee,oe,Se){return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][oe]||(this.workerSources[ee][oe]={}),this.workerSources[ee][oe][Se]||(this.workerSources[ee][oe][Se]=new this.workerSourceTypes[oe]({send:(Oe,Ye,gt,_t,ot,He)=>{this.actor.send(Oe,Ye,gt,ee,ot,He)},scheduler:this.actor.scheduler},this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded)),this.workerSources[ee][oe][Se]}getDEMWorkerSource(ee,oe){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][oe]||(this.demWorkerSources[ee][oe]=new me),this.demWorkerSources[ee][oe]}enforceCacheSizeLimit(ee,oe){h.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(ee,oe,Se){Se(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rt(self)),Rt}),l(0,function(h){var qe=Ne;function Ne(_){return t=_,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,w,E=new Blob([""],{type:"text/javascript"}),A=URL.createObjectURL(E);try{w=new Worker(A),y=!0}catch{y=!1}return w&&w.terminate(),URL.revokeObjectURL(A),y}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var y=document.createElement("canvas");y.width=y.height=1;var w=y.getContext("2d");if(!w)return!1;var E=w.getImageData(0,0,1,1);return E&&E.width===y.width}()||(void 0===ze[d=t&&t.failIfMajorPerformanceCaveat]&&(ze[d]=function(y){var w,A,B,H,E=(A=y,B=document.createElement("canvas"),(H=Object.create(Ne.webGLContextAttributes)).failIfMajorPerformanceCaveat=A,B.getContext("webgl",H)||B.getContext("experimental-webgl",H));if(!E)return!1;try{w=E.createShader(E.VERTEX_SHADER)}catch{return!1}return!(!w||E.isContextLost())&&(E.shaderSource(w,"void main() {}"),E.compileShader(w),!0===E.getShaderParameter(w,E.COMPILE_STATUS))}(d)),!ze[d]||document.documentMode));var t,d}var ze={};function ye(_,t){if(Array.isArray(_)){if(!Array.isArray(t)||_.length!==t.length)return!1;for(let d=0;d<_.length;d++)if(!ye(_[d],t[d]))return!1;return!0}if("object"==typeof _&&null!==_&&null!==t){if("object"!=typeof t||Object.keys(_).length!==Object.keys(t).length)return!1;for(const d in _)if(!ye(_[d],t[d]))return!1;return!0}return _===t}Ne.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const me={create:function(_,t,d){const y=h.window.document.createElement(_);return void 0!==t&&(y.className=t),d&&d.appendChild(y),y},createNS:function(_,t){return h.window.document.createElementNS(_,t)}},Ce=h.window.document&&h.window.document.documentElement.style,tt=Ce&&void 0!==Ce.userSelect?"userSelect":"WebkitUserSelect";let Ue;me.disableDrag=function(){Ce&&tt&&(Ue=Ce[tt],Ce[tt]="none")},me.enableDrag=function(){Ce&&tt&&(Ce[tt]=Ue)},me.setTransform=function(_,t){_.style.transform=t};let dt=!1;try{const _=Object.defineProperty({},"passive",{get(){dt=!0}});h.window.addEventListener("test",_,_),h.window.removeEventListener("test",_,_)}catch{dt=!1}me.addEventListener=function(_,t,d,y={}){_.addEventListener(t,d,"passive"in y&&dt?y:y.capture)},me.removeEventListener=function(_,t,d,y={}){_.removeEventListener(t,d,"passive"in y&&dt?y:y.capture)};const st=function(_){_.preventDefault(),_.stopPropagation(),h.window.removeEventListener("click",st,!0)};function rt(_,t,d){const y=_.offsetWidth===t.width?1:_.offsetWidth/t.width;return new h.pointGeometry((d.clientX-t.left)*y,(d.clientY-t.top)*y)}me.suppressClick=function(){h.window.addEventListener("click",st,!0),h.window.setTimeout(()=>{h.window.removeEventListener("click",st,!0)},0)},me.mousePos=function(_,t){const d=_.getBoundingClientRect();return rt(_,d,t)},me.touchPos=function(_,t){const d=_.getBoundingClientRect(),y=[];for(let w=0;w<t.length;w++)y.push(rt(_,d,t[w]));return y},me.mouseButton=function(_){return void 0!==h.window.InstallTrigger&&2===_.button&&_.ctrlKey&&h.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},me.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};class At{constructor(t,d){this.pos=t,this.dir=d}intersectsPlane(t,d,y){const w=h.dot(d,this.dir);if(Math.abs(w)<1e-6)return!1;const E=h.dot(h.sub(h.create(),t,this.pos),d)/w,A=h.scaleAndAdd(h.create(),this.pos,this.dir,E);return h.copy(y,A),!0}}class vt{constructor(t,d){this.points=t,this.planes=d}static fromInvProjectionMatrix(t,d,y){const w=Math.pow(2,y),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const H=h.transformMat4([],B,t),Q=1/H[3]/d*w;return h.mul(H,H,[Q,Q,1/H[3],Q])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const H=h.sub([],E[B[0]],E[B[1]]),Q=h.sub([],E[B[2]],E[B[1]]),se=h.normalize([],h.cross([],H,Q)),de=-h.dot(se,E[B[1]]);return se.concat(de)});return new vt(E,A)}}class Zt{constructor(t,d){this.min=t,this.max=d,this.center=h.scale([],h.add([],this.min,this.max),.5)}quadrant(t){const d=[t%2==0,t<2],y=h.clone(this.min),w=h.clone(this.max);for(let E=0;E<d.length;E++)y[E]=d[E]?this.min[E]:this.center[E],w[E]=d[E]?this.center[E]:this.max[E];return w[2]=this.max[2],new Zt(y,w)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(t){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let y=!0;for(let w=0;w<t.planes.length;w++){const E=t.planes[w];let A=0;for(let B=0;B<d.length;B++)A+=h.dot$1(E,d[B])>=0;if(0===A)return 0;A!==d.length&&(y=!1)}if(y)return 2;for(let w=0;w<3;w++){let E=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let B=0;B<t.points.length;B++){const H=t.points[B][w]-this.min[w];E=Math.min(E,H),A=Math.max(A,H)}if(A<0||E>this.max[w]-this.min[w])return 0}return 1}}function vn(_){const{userImage:t}=_;return!!(t&&t.render&&t.render())&&(_.data.replace(new Uint8Array(t.data.buffer)),!0)}class Tn extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:d,callback:y}of this.requestors)this._notify(d,y);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,d){this._validate(t,d)&&(this.images[t]=d)}_validate(t,d){let y=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),y=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),y=!1),this._validateContent(d.content,d)||(this.fire(new h.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),y=!1),y}_validateStretch(t,d){if(!t)return!0;let y=0;for(const w of t){if(w[0]<y||w[1]<w[0]||d<w[1])return!1;y=w[1]}return!0}_validateContent(t,d){return!(t&&(4!==t.length||t[0]<0||d.data.width<t[0]||t[1]<0||d.data.height<t[1]||t[2]<0||d.data.width<t[2]||t[3]<0||d.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,d){d.version=this.images[t].version+1,this.images[t]=d,this.updatedImages[t]=!0}removeImage(t){const d=this.images[t];delete this.images[t],delete this.patterns[t],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,d){let y=!0;if(!this.isLoaded())for(const w of t)this.images[w]||(y=!1);this.isLoaded()||y?this._notify(t,d):this.requestors.push({ids:t,callback:d})}_notify(t,d){const y={};for(const w of t){this.images[w]||this.fire(new h.Event("styleimagemissing",{id:w}));const E=this.images[w];E?y[w]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:h.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,y)}getPixelSize(){const{width:t,height:d}=this.atlasImage;return{width:t,height:d}}getPattern(t){const d=this.patterns[t],y=this.getImage(t);if(!y)return null;if(d&&d.position.version===y.version)return d.position;if(d)d.position.version=y.version;else{const w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},E=new h.ImagePosition(w,y);this.patterns[t]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const d=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new h.Texture(t,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const E in this.patterns)t.push(this.patterns[E].bin);const{w:d,h:y}=h.potpack(t),w=this.atlasImage;w.resize({width:d||1,height:y||1});for(const E in this.patterns){const{bin:A}=this.patterns[E],B=A.x+1,H=A.y+1,Q=this.images[E].data,se=Q.width,de=Q.height;h.RGBAImage.copy(Q,w,{x:0,y:0},{x:B,y:H},{width:se,height:de}),h.RGBAImage.copy(Q,w,{x:0,y:de-1},{x:B,y:H-1},{width:se,height:1}),h.RGBAImage.copy(Q,w,{x:0,y:0},{x:B,y:H+de},{width:se,height:1}),h.RGBAImage.copy(Q,w,{x:se-1,y:0},{x:B-1,y:H},{width:1,height:de}),h.RGBAImage.copy(Q,w,{x:0,y:0},{x:B+se,y:H},{width:1,height:de})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const d of t){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const y=this.images[d];vn(y)&&this.updateImage(d,y)}}}const Bt=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(_,t){return function([d,y,w]){const E=h.degToRad(y+90),A=h.degToRad(w);return{x:d*Math.cos(E)*Math.sin(A),y:d*Math.sin(E)*Math.sin(A),z:d*Math.cos(A),azimuthal:y,polar:w}}(_.expression.evaluate(t))}interpolate(_,t,d){return{x:h.number(_.x,t.x,d),y:h.number(_.y,t.y,d),z:h.number(_.z,t.z,d),azimuthal:h.number(_.azimuthal,t.azimuthal,d),polar:h.number(_.polar,t.polar,d)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),ke="-transition";class $e extends h.Evented{constructor(t){super(),this._transitionable=new h.Transitionable(Bt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,d={}){if(!this._validate(h.validateLight,t,d))for(const y in t){const w=t[y];h.endsWith(y,ke)?this._transitionable.setTransition(y.slice(0,-ke.length),w):this._transitionable.setValue(y,w)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,d,y){return(!y||!1!==y.validate)&&h.emitValidationErrors(this,t.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}const sn=new h.Properties({source:new h.DataConstantProperty(h.spec.terrain.source),exaggeration:new h.DataConstantProperty(h.spec.terrain.exaggeration)}),Gt="-transition";class $t extends h.Evented{constructor(t){super(),this._transitionable=new h.Transitionable(sn),this.set(t),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(t){for(const d in t){const y=t[d];h.endsWith(d,Gt)?this._transitionable.setTransition(d.slice(0,-Gt.length),y):this._transitionable.setValue(d,y)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function dn(_,t,d,y){const w=h.smoothstep(45,65,d),[E,A]=bt(_,y),B=h.length(t);let H=1-Math.min(1,Math.exp((B-E)/(A-E)*-6));return H*=H*H,H=Math.min(1,1.00747*H),H*w*_.alpha}function bt(_,t){const d=.5/Math.tan(.5*t);return[_.range[0]+d,_.range[1]+d]}const Mt=new h.Properties({range:new h.DataConstantProperty(h.spec.fog.range),color:new h.DataConstantProperty(h.spec.fog.color),"horizon-blend":new h.DataConstantProperty(h.spec.fog["horizon-blend"])}),Ot="-transition";class Ht extends h.Evented{constructor(t){super(),this._transitionable=new h.Transitionable(Mt),this.set(t),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t){if(!this._validate(h.validateFog,t))for(const d in t){const y=t[d];h.endsWith(d,Ot)?this._transitionable.setTransition(d.slice(0,-Ot.length),y):this._transitionable.setValue(d,y)}}getOpacity(t){const d=this.properties&&this.properties.get("color")||1;return h.smoothstep(45,65,t)*d.a}getOpacityAtLatLng(t,d){return function(y,w,E){const A=h.MercatorCoordinate.fromLngLat(w),B=E.elevation?E.elevation.getAtPointOrZero(A):0,H=[A.x,A.y,B];return h.transformMat4$1(H,H,E.mercatorFogMatrix),dn(y,H,E.pitch,E._fov)}(this.state,t,d)}getFovAdjustedRange(t){return bt(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,d,y){return(!y||!1!==y.validate)&&h.emitValidationErrors(this,t.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class zt{constructor(t,d){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const y=this.workerPool.acquire(this.id);for(let w=0;w<y.length;w++){const E=new zt.Actor(y[w],d,this.id);E.name=`Worker ${w}`,this.actors.push(E)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,d,y){h.asyncAll(this.actors,(w,E)=>{w.send(t,d,E)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Jt(_,t,d){return t*(h.EXTENT/(_.tileSize*Math.pow(2,d-_.tileID.overscaledZ)))}zt.Actor=h.Actor;class Nn{constructor(t,d,y,w){this.screenBounds=t,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(E=>w.pointCoordinate3D(E)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,d){let y,w;if(t instanceof h.pointGeometry||"number"==typeof t[0]){const E=h.pointGeometry.convert(t);y=[h.pointGeometry.convert(t)],w=d.isPointAboveHorizon(E)}else{const E=h.pointGeometry.convert(t[0]),A=h.pointGeometry.convert(t[1]);y=[E,A],w=h.polygonizeBounds(E,A).every(B=>d.isPointAboveHorizon(B))}return new Nn(y,d.getCameraPoint(),w,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return h.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const d=this.screenBounds[0],y=1===this.screenBounds.length?this.screenBounds[0].add(new h.pointGeometry(1,1)):this.screenBounds[1],w=h.polygonizeBounds(d,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<y.x?w.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?w[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(w[3]=this.cameraPoint)),h.bufferConvexPolygon(w,t)}containsTile(t,d,y){const w=t.queryPadding+1,E=y?this._bufferedCameraMercator(w,d).map(be=>t.tileID.getTilePoint(be)):this._bufferedScreenMercator(w,d).map(be=>t.tileID.getTilePoint(be)),A=this.screenGeometryMercator.map(be=>t.tileID.getTileVec3(be)),B=A.map(be=>new h.pointGeometry(be[0],be[1])),H=d.getFreeCameraOptions().position||new h.MercatorCoordinate(0,0,0),Q=t.tileID.getTileVec3(H),se=A.map(be=>{const Ie=h.sub(be,be,Q);return h.normalize(Ie,Ie),new At(Q,Ie)}),de=Jt(t,1,d.zoom);if(h.polygonIntersectsBox(E,0,0,h.EXTENT,h.EXTENT))return{queryGeometry:this,tilespaceGeometry:B,tilespaceRays:se,bufferedTilespaceGeometry:E,bufferedTilespaceBounds:(fe=h.getBounds(E),fe.min.x=h.clamp(fe.min.x,0,h.EXTENT),fe.min.y=h.clamp(fe.min.y,0,h.EXTENT),fe.max.x=h.clamp(fe.max.x,0,h.EXTENT),fe.max.y=h.clamp(fe.max.y,0,h.EXTENT),fe),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:de};var fe}_bufferedScreenMercator(t,d){const y=Rn(t);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{const w=this.bufferedScreenGeometry(t).map(E=>d.pointCoordinate3D(E));return this._screenRaycastCache[y]=w,w}}_bufferedCameraMercator(t,d){const y=Rn(t);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{const w=this.bufferedCameraGeometry(t).map(E=>d.pointCoordinate3D(E));return this._cameraRaycastCache[y]=w,w}}}function Rn(_){return 100*_|0}function gi(_,t,d){const y=function(w,E){if(w)return d(w);if(E){const A=h.pick(h.extend(E,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(A.vectorLayers=E.vector_layers,A.vectorLayerIds=A.vectorLayers.map(B=>B.id)),A.tiles=t.canonicalizeTileset(A,_.url),d(null,A)}};return _.url?h.getJSON(t.transformRequest(t.normalizeSourceURL(_.url),h.ResourceType.Source),y):h.exported.frame(()=>y(null,_))}class bn{constructor(t,d,y){this.bounds=h.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=d||0,this.maxzoom=y||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const d=Math.pow(2,t.z),y=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*d),w=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*d),E=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*d),A=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*d);return t.x>=y&&t.x<E&&t.y>=w&&t.y<A}}class wi{constructor(t,d,y){this.context=t;const w=t.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(y),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class li{constructor(t,d,y,w){this.length=d.length,this.attributes=y,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=t;const E=t.gl;this.buffer=E.createBuffer(),t.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,d){for(let y=0;y<this.attributes.length;y++){const w=d.attributes[this.attributes[y].name];void 0!==w&&t.enableVertexAttribArray(w)}}setVertexAttribPointers(t,d,y){for(let w=0;w<this.attributes.length;w++){const E=this.attributes[w],A=d.attributes[E.name];void 0!==A&&t.vertexAttribPointer(A,E.components,t[Pi[E.type]],!1,this.itemSize,E.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class en{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class si extends en{getDefault(){return h.Color.transparent}set(t){const d=this.current;(t.r!==d.r||t.g!==d.g||t.b!==d.b||t.a!==d.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class It extends en{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Vt extends en{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class xn extends en{getDefault(){return[!0,!0,!0,!0]}set(t){const d=this.current;(t[0]!==d[0]||t[1]!==d[1]||t[2]!==d[2]||t[3]!==d[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Dn extends en{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class jn extends en{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class wn extends en{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const d=this.current;(t.func!==d.func||t.ref!==d.ref||t.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class hi extends en{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const d=this.current;(t[0]!==d[0]||t[1]!==d[1]||t[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Fi extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;t?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=t,this.dirty=!1}}class Hi extends en{getDefault(){return[0,1]}set(t){const d=this.current;(t[0]!==d[0]||t[1]!==d[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class ur extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;t?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ln extends en{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class pr extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;t?d.enable(d.BLEND):d.disable(d.BLEND),this.current=t,this.dirty=!1}}class zn extends en{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const d=this.current;(t[0]!==d[0]||t[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class qt extends en{getDefault(){return h.Color.transparent}set(t){const d=this.current;(t.r!==d.r||t.g!==d.g||t.b!==d.b||t.a!==d.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class nt extends en{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class ne extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;t?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=t,this.dirty=!1}}class $ extends en{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class V extends en{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class W extends en{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ce extends en{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Ae extends en{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const d=this.current;(t[0]!==d[0]||t[1]!==d[1]||t[2]!==d[2]||t[3]!==d[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Le extends en{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Nt extends en{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class un extends en{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Cn extends en{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Wt extends en{getDefault(){return null}set(t){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Zn extends en{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class mi extends en{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class $n extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class kn extends en{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ni extends en{constructor(t,d){super(t),this.context=t,this.parent=d}getDefault(){return null}}class wt extends ni{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class mt extends ni{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class lt extends mt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class je{constructor(t,d,y,w){this.context=t,this.width=d,this.height=y;const E=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,E),w&&(this.depthAttachment=new mt(t,E))}destroy(){const t=this.context.gl,d=this.colorAttachment.get();if(d&&t.deleteTexture(d),this.depthAttachment){const y=this.depthAttachment.get();y&&t.deleteRenderbuffer(y)}t.deleteFramebuffer(this.framebuffer)}}class Qe{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new si(this),this.clearDepth=new It(this),this.clearStencil=new Vt(this),this.colorMask=new xn(this),this.depthMask=new Dn(this),this.stencilMask=new jn(this),this.stencilFunc=new wn(this),this.stencilOp=new hi(this),this.stencilTest=new Fi(this),this.depthRange=new Hi(this),this.depthTest=new ur(this),this.depthFunc=new Ln(this),this.blend=new pr(this),this.blendFunc=new zn(this),this.blendColor=new qt(this),this.blendEquation=new nt(this),this.cullFace=new ne(this),this.cullFaceSide=new $(this),this.frontFace=new V(this),this.program=new W(this),this.activeTexture=new ce(this),this.viewport=new Ae(this),this.bindFramebuffer=new Le(this),this.bindRenderbuffer=new Nt(this),this.bindTexture=new un(this),this.bindVertexBuffer=new Cn(this),this.bindElementBuffer=new Wt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Zn(this),this.pixelStoreUnpack=new mi(this),this.pixelStoreUnpackPremultiplyAlpha=new $n(this),this.pixelStoreUnpackFlipY=new kn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,d){return new wi(this,t,d)}createVertexBuffer(t,d,y){return new li(this,t,d,y)}createRenderbuffer(t,d,y){const w=this.gl,E=w.createRenderbuffer();return this.bindRenderbuffer.set(E),w.renderbufferStorage(w.RENDERBUFFER,t,d,y),this.bindRenderbuffer.set(null),E}createFramebuffer(t,d,y){return new je(this,t,d,y)}clear({color:t,depth:d,stencil:y}){const w=this.gl;let E=0;t&&(E|=w.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(E|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==y&&(E|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),w.clear(E)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){ye(t.blendFunction,h.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Be extends h.Evented{constructor(t,d,y,w){super(),this.id=t,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},d),h.extend(this,h.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=gi(this._options,this.map._requestManager,(t,d)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new h.ErrorEvent(t)):d&&(h.extend(this,d),d.bounds&&(this.tileBounds=new bn(d.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(d.tiles),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,d){const y=h.exported.devicePixelRatio>=2,w=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);t.request=h.getImage(this.map._requestManager.transformRequest(w,h.ResourceType.Tile),(E,A,B,H)=>{if(delete t.request,t.aborted)t.state="unloaded",d(null);else if(E)t.state="errored",d(E);else if(A){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:B,expires:H});const Q=this.map.painter.context,se=Q.gl;t.texture=this.map.painter.getTileTexture(A.width),t.texture?t.texture.update(A,{useMipmap:!0}):(t.texture=new h.Texture(Q,A,se.RGBA,{useMipmap:!0}),t.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),Q.extTextureFilterAnisotropic&&se.texParameterf(se.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax)),t.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),d(null)}})}abortTile(t,d){t.request&&(t.request.cancel(),delete t.request),d()}unloadTile(t,d){t.texture&&this.map.painter.saveTileTexture(t.texture),d()}hasTransition(){return!1}}let ft;var Rt=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class he extends h.Evented{constructor(t,d,y,w){super(),this.id=t,this.dispatcher=y,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(t,d){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(y,w)=>{this._loaded=!0,y?this.fire(new h.ErrorEvent(y)):w&&(this.image=w,t&&(this.coordinates=t),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(t){this.coordinates=t;const d=t.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(w){let E=1/0,A=1/0,B=-1/0,H=-1/0;for(const fe of w)E=Math.min(E,fe.x),A=Math.min(A,fe.y),B=Math.max(B,fe.x),H=Math.max(H,fe.y);const Q=Math.max(B-E,H-A),se=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),de=Math.pow(2,se);return new h.CanonicalTileID(se,Math.floor((E+B)/2*de),Math.floor((A+H)/2*de))}(d),this.minzoom=this.maxzoom=this.tileID.z;const y=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new h.StructArrayLayout4i8,this._boundsArray.emplaceBack(y[0].x,y[0].y,0,0),this._boundsArray.emplaceBack(y[1].x,y[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(y[3].x,y[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(y[2].x,y[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,d=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Rt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new h.Texture(t,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const y in this.tiles){const w=this.tiles[y];"loaded"!==w.state&&(w.state="loaded",w.texture=this.texture)}}loadTile(t,d){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},d(null)):(t.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ee={vector:class extends h.Evented{constructor(_,t,d,y){if(super(),this.id=_,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(t,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y),this._tileWorkers={},this._deduped=new h.DedupedRequest}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=gi(this._options,this.map._requestManager,(_,t)=>{this._tileJSONRequest=null,this._loaded=!0,_?this.fire(new h.ErrorEvent(_)):t&&(h.extend(this,t),t.bounds&&(this.tileBounds=new bn(t.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(t.tiles,this.map._requestManager._customAccessToken),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}onAdd(_){this.map=_,this.load()}setSourceProperty(_){this._tileJSONRequest&&this._tileJSONRequest.cancel(),_();const t=this.map.style._getSourceCaches(this.id);for(const d of t)d.clearTiles();this.load()}setTiles(_){return this.setSourceProperty(()=>{this._options.tiles=_}),this}setUrl(_){return this.setSourceProperty(()=>{this.url=_,this._options.url=_}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(_,t){const d=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),y={request:this.map._requestManager.transformRequest(d,h.ResourceType.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_.isSymbolTile};if(y.request.collectResourceTiming=this._collectResourceTiming,_.actor&&"expired"!==_.state)"loading"===_.state?_.reloadCallback=t:_.request=_.actor.send("reloadTile",y,w.bind(this));else if(_.actor=this._tileWorkers[d]=this._tileWorkers[d]||this.dispatcher.getActor(),this.dispatcher.ready)_.request=_.actor.send("loadTile",y,w.bind(this),void 0,!0);else{const E=h.loadVectorTile.call({deduped:this._deduped},y,(A,B)=>{A||!B?w.call(this,A):(y.data={cacheControl:B.cacheControl,expires:B.expires,rawData:B.rawData.slice(0)},_.actor&&_.actor.send("loadTile",y,w.bind(this),void 0,!0))},!0);_.request={cancel:E}}function w(E,A){return delete _.request,_.aborted?t(null):E&&404!==E.status?t(E):(A&&A.resourceTiming&&(_.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&_.setExpiryData(A),_.loadVectorData(A,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),t(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id})}unloadTile(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Be,"raster-dem":class extends Be{constructor(_,t,d,y){super(_,t,d,y),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}loadTile(_,t){const d=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(w,E){w&&(_.state="errored",t(w)),E&&(_.dem=E,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",t(null))}_.request=h.getImage(this.map._requestManager.transformRequest(d,h.ResourceType.Tile),function(w,E,A,B){if(delete _.request,_.aborted)_.state="unloaded",t(null);else if(w)_.state="errored",t(w);else if(E){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:A,expires:B});const H=h.window.ImageBitmap&&E instanceof h.window.ImageBitmap&&(null==ft&&(ft=h.window.OffscreenCanvas&&new h.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof h.window.createImageBitmap),ft),Q=1-(E.width-h.prevPowerOfTwo(E.width))/2;Q<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const se=H?E:h.exported.getImageData(E,Q),de={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:se,encoding:this.encoding,padding:Q};_.actor&&"expired"!==_.state||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",de,y.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_){const t=_.canonical,d=Math.pow(2,t.z),y=(t.x-1+d)%d,w=0===t.x?_.wrap-1:_.wrap,E=(t.x+1+d)%d,A=t.x+1===d?_.wrap+1:_.wrap,B={};return B[new h.OverscaledTileID(_.overscaledZ,w,t.z,y,t.y).key]={backfilled:!1},B[new h.OverscaledTileID(_.overscaledZ,A,t.z,E,t.y).key]={backfilled:!1},t.y>0&&(B[new h.OverscaledTileID(_.overscaledZ,w,t.z,y,t.y-1).key]={backfilled:!1},B[new h.OverscaledTileID(_.overscaledZ,_.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},B[new h.OverscaledTileID(_.overscaledZ,A,t.z,E,t.y-1).key]={backfilled:!1}),t.y+1<d&&(B[new h.OverscaledTileID(_.overscaledZ,w,t.z,y,t.y+1).key]={backfilled:!1},B[new h.OverscaledTileID(_.overscaledZ,_.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},B[new h.OverscaledTileID(_.overscaledZ,A,t.z,E,t.y+1).key]={backfilled:!1}),B}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends h.Evented{constructor(_,t,d,y){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(y),this._data=t.data,this._options=h.extend({},t),this._collectResourceTiming=t.collectResourceTiming,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;const w=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*w,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*w,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:void 0!==t.clusterMaxZoom?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:h.EXTENT,radius:(void 0!==t.clusterRadius?t.clusterRadius:50)*w,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter},t.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},t),this}getClusterChildren(_,t){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},t),this}getClusterLeaves(_,t,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:t,offset:d},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new h.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=h.extend({},this.workerOptions),t=this._data;"string"==typeof t?(_.request=this.map._requestManager.transformRequest(h.exported.resolveURL(t),h.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(t),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(d,y)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new h.ErrorEvent(d));else{const w={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(w.resourceTiming=y.resourceTiming[this.id]),this.fire(new h.Event("data",w)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,t){const d=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(d,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,w)=>(delete _.request,_.unloadVectorData(),_.aborted?t(null):y?t(y):(_.loadVectorData(w,this.map.painter,"reloadTile"===d),t(null))),void 0,"loadTile"===d)}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends he{constructor(_,t,d,y){super(_,t,d,y),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const t of _.urls)this.urls.push(this.map._requestManager.transformRequest(t,h.ResourceType.Source).url);h.getVideo(this.urls,(t,d)=>{this._loaded=!0,t?this.fire(new h.ErrorEvent(t)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const t=this.video.seekable;_<t.start(0)||_>t.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const _=this.map.painter.context,t=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Rt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new h.Texture(_,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];"loaded"!==y.state&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:he,canvas:class extends he{constructor(_,t,d,y){super(_,t,d,y),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some(w=>!Array.isArray(w)||2!==w.length||w.some(E=>"number"!=typeof E))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof h.window.HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=t,this.animate=void 0===t.animate||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof h.window.HTMLCanvasElement?this.options.canvas:h.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const t=this.map.painter.context,d=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Rt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new h.Texture(t,this.canvas,d.RGBA,{premultiply:!0});for(const y in this.tiles){const w=this.tiles[y];"loaded"!==w.state&&(w.state="loaded",w.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}}},oe=function(_,t,d,y){const w=new ee[t.type](_,t,d,y);if(w.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${w.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],w),w};function Se(_,t){const d=h.identity([]);return h.scale$1(d,d,[.5*_.width,.5*-_.height,1]),h.translate(d,d,[1,-1,0]),h.multiply(d,d,_.calculateProjMatrix(t.toUnwrapped()))}function Oe(_,t,d,y,w,E,A,B=!1){const H=_.tilesIn(y,A,B);H.sort(gt);const Q=[];for(const de of H)Q.push({wrappedTileID:de.tile.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(t,d,_._state,de,w,E,Se(_.transform,de.tile.tileID),B)});const se=function(de){const fe={},be={};for(const Ie of de){const Re=Ie.queryResults,et=Ie.wrappedTileID,Te=be[et]=be[et]||{};for(const Ge in Re){const it=Re[Ge],ut=Te[Ge]=Te[Ge]||{},xt=fe[Ge]=fe[Ge]||[];for(const Ke of it)ut[Ke.featureIndex]||(ut[Ke.featureIndex]=!0,xt.push(Ke))}}return fe}(Q);for(const de in se)se[de].forEach(fe=>{const be=fe.feature,Ie=_.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ie});return se}function Ye(_,t){const d=_.getRenderableIds().map(E=>_.getTileByID(E)),y=[],w={};for(let E=0;E<d.length;E++){const A=d[E],B=A.tileID.canonical.key;w[B]||(w[B]=!0,A.querySourceFeatures(y,t))}return y}function gt(_,t){const d=_.tileID,y=t.tileID;return d.overscaledZ-y.overscaledZ||d.canonical.y-y.canonical.y||d.wrap-y.wrap||d.canonical.x-y.canonical.x}function _t(){return null!=Qu.workerClass?new Qu.workerClass:new h.window.Worker(Qu.workerUrl)}const ot="mapboxgl_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new _t);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ot]}numActive(){return Object.keys(this.active).length}}let Dt;function Fe(){return Dt||(Dt=new He),Dt}function De(_,t){const d={};for(const y in _)"ref"!==y&&(d[y]=_[y]);return h.refProperties.forEach(y=>{y in t&&(d[y]=t[y])}),d}function Me(_){_=_.slice();const t=Object.create(null);for(let d=0;d<_.length;d++)t[_[d].id]=_[d];for(let d=0;d<_.length;d++)"ref"in _[d]&&(_[d]=De(_[d],t[_[d].ref]));return _}He.workerCount=2;const ue={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function We(_,t,d){d.push({command:ue.addSource,args:[_,t[_]]})}function Xt(_,t,d){t.push({command:ue.removeSource,args:[_]}),d[_]=!0}function Fn(_,t,d,y){Xt(_,d,y),We(_,t,d)}function Gn(_,t,d){let y;for(y in _[d])if(_[d].hasOwnProperty(y)&&"data"!==y&&!ye(_[d][y],t[d][y]))return!1;for(y in t[d])if(t[d].hasOwnProperty(y)&&"data"!==y&&!ye(_[d][y],t[d][y]))return!1;return!0}function An(_,t,d,y,w,E){let A;for(A in t=t||{},_=_||{})_.hasOwnProperty(A)&&(ye(_[A],t[A])||d.push({command:E,args:[y,A,t[A],w]}));for(A in t)t.hasOwnProperty(A)&&!_.hasOwnProperty(A)&&(ye(_[A],t[A])||d.push({command:E,args:[y,A,t[A],w]}))}function Ci(_){return _.id}function qi(_,t){return _[t.id]=t,_}class rr{constructor(t,d){this.reset(t,d)}reset(t,d){this.points=t||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=h.clamp(t,0,1);let d=1,y=this._distances[d];const w=t*this.paddedLength+this.padding;for(;y<w&&d<this._distances.length;)y=this._distances[++d];const E=d-1,A=this._distances[E],B=y-A,H=B>0?(w-A)/B:0;return this.points[E].mult(1-H).add(this.points[d].mult(H))}}class En{constructor(t,d,y){const w=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(t/y),this.yCellCount=Math.ceil(d/y);for(let A=0;A<this.xCellCount*this.yCellCount;A++)w.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=d,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,d,y,w,E){this._forEachCell(d,y,w,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(E)}insertCircle(t,d,y,w){this._forEachCell(d-w,y-w,d+w,y+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(d),this.circles.push(y),this.circles.push(w)}_insertBoxCell(t,d,y,w,E,A){this.boxCells[E].push(A)}_insertCircleCell(t,d,y,w,E,A){this.circleCells[E].push(A)}_query(t,d,y,w,E,A){if(y<0||t>this.width||w<0||d>this.height)return!E&&[];const B=[];if(t<=0&&d<=0&&this.width<=y&&this.height<=w){if(E)return!0;for(let H=0;H<this.boxKeys.length;H++)B.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const Q=this.circles[3*H],se=this.circles[3*H+1],de=this.circles[3*H+2];B.push({key:this.circleKeys[H],x1:Q-de,y1:se-de,x2:Q+de,y2:se+de})}return A?B.filter(A):B}return this._forEachCell(t,d,y,w,this._queryCell,B,{hitTest:E,seenUids:{box:{},circle:{}}},A),E?B.length>0:B}_queryCircle(t,d,y,w,E){const A=t-y,B=t+y,H=d-y,Q=d+y;if(B<0||A>this.width||Q<0||H>this.height)return!w&&[];const se=[];return this._forEachCell(A,H,B,Q,this._queryCellCircle,se,{hitTest:w,circle:{x:t,y:d,radius:y},seenUids:{box:{},circle:{}}},E),w?se.length>0:se}query(t,d,y,w,E){return this._query(t,d,y,w,!1,E)}hitTest(t,d,y,w,E){return this._query(t,d,y,w,!0,E)}hitTestCircle(t,d,y,w){return this._queryCircle(t,d,y,!0,w)}_queryCell(t,d,y,w,E,A,B,H){const Q=B.seenUids,se=this.boxCells[E];if(null!==se){const fe=this.bboxes;for(const be of se)if(!Q.box[be]){Q.box[be]=!0;const Ie=4*be;if(t<=fe[Ie+2]&&d<=fe[Ie+3]&&y>=fe[Ie+0]&&w>=fe[Ie+1]&&(!H||H(this.boxKeys[be]))){if(B.hitTest)return A.push(!0),!0;A.push({key:this.boxKeys[be],x1:fe[Ie],y1:fe[Ie+1],x2:fe[Ie+2],y2:fe[Ie+3]})}}}const de=this.circleCells[E];if(null!==de){const fe=this.circles;for(const be of de)if(!Q.circle[be]){Q.circle[be]=!0;const Ie=3*be;if(this._circleAndRectCollide(fe[Ie],fe[Ie+1],fe[Ie+2],t,d,y,w)&&(!H||H(this.circleKeys[be]))){if(B.hitTest)return A.push(!0),!0;{const Re=fe[Ie],et=fe[Ie+1],Te=fe[Ie+2];A.push({key:this.circleKeys[be],x1:Re-Te,y1:et-Te,x2:Re+Te,y2:et+Te})}}}}}_queryCellCircle(t,d,y,w,E,A,B,H){const Q=B.circle,se=B.seenUids,de=this.boxCells[E];if(null!==de){const be=this.bboxes;for(const Ie of de)if(!se.box[Ie]){se.box[Ie]=!0;const Re=4*Ie;if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,be[Re+0],be[Re+1],be[Re+2],be[Re+3])&&(!H||H(this.boxKeys[Ie])))return A.push(!0),!0}}const fe=this.circleCells[E];if(null!==fe){const be=this.circles;for(const Ie of fe)if(!se.circle[Ie]){se.circle[Ie]=!0;const Re=3*Ie;if(this._circlesCollide(be[Re],be[Re+1],be[Re+2],Q.x,Q.y,Q.radius)&&(!H||H(this.circleKeys[Ie])))return A.push(!0),!0}}}_forEachCell(t,d,y,w,E,A,B,H){const Q=this._convertToXCellCoord(t),se=this._convertToYCellCoord(d),de=this._convertToXCellCoord(y),fe=this._convertToYCellCoord(w);for(let be=Q;be<=de;be++)for(let Ie=se;Ie<=fe;Ie++)if(E.call(this,t,d,y,w,this.xCellCount*Ie+be,A,B,H))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,d,y,w,E,A){const B=w-t,H=E-d,Q=y+A;return Q*Q>B*B+H*H}_circleAndRectCollide(t,d,y,w,E,A,B){const H=(A-w)/2,Q=Math.abs(t-(w+H));if(Q>H+y)return!1;const se=(B-E)/2,de=Math.abs(d-(E+se));if(de>se+y)return!1;if(Q<=H||de<=se)return!0;const fe=Q-H,be=de-se;return fe*fe+be*be<=y*y}}function ei(_,t,d,y,w){const E=h.create$1();return t?(h.scale$1(E,E,[1/w,1/w,1]),d||h.rotateZ(E,E,y.angle)):h.multiply(E,y.labelPlaneMatrix,_),E}function ui(_,t,d,y,w){if(t){const E=h.clone$1(_);return h.scale$1(E,E,[w,w,1]),d||h.rotateZ(E,E,-y.angle),E}return y.glCoordMatrix}function or(_,t,d=0){const y=[_.x,_.y,d,1];d?h.transformMat4(y,y,t):Kr(y,y,t);const w=y[3];return{point:new h.pointGeometry(y[0]/w,y[1]/w),signedDistanceFromCamera:w}}function Lr(_,t){return Math.min(.5+_/t*.5,1.5)}function pi(_,t){const d=_[0]/_[3],y=_[1]/_[3];return d>=-t[0]&&d<=t[0]&&y>=-t[1]&&y<=t[1]}function Gs(_,t,d,y,w,E,A,B,H){const Q=y?_.textSizeData:_.iconSizeData,se=h.evaluateSizeForZoom(Q,d.transform.zoom),de=[256/d.width*2+1,256/d.height*2+1],fe=y?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;fe.clear();const be=_.lineVertexArray,Ie=y?_.text.placedSymbolArray:_.icon.placedSymbolArray,Re=d.transform.width/d.transform.height;let et=!1;for(let Te=0;Te<Ie.length;Te++){const Ge=Ie.get(Te);if(Ge.hidden||Ge.writingMode===h.WritingMode.vertical&&!et){yr(Ge.numGlyphs,fe);continue}et=!1;const it=H?H({x:Ge.anchorX,y:Ge.anchorY}):0,ut=[Ge.anchorX,Ge.anchorY,it,1];if(h.transformMat4(ut,ut,t),!pi(ut,de)){yr(Ge.numGlyphs,fe);continue}const xt=Lr(d.transform.cameraToCenterDistance,ut[3]),Ke=h.evaluateSizeForFeature(Q,se,Ge),Tt=A?Ke/xt:Ke*xt,rn=new h.pointGeometry(Ge.anchorX,Ge.anchorY),hn=or(rn,w,it);if(hn.signedDistanceFromCamera<=0){yr(Ge.numGlyphs,fe);continue}const at=hn.point;let _n={};const an=A?null:H,ai=dr(Ge,Tt,!1,B,t,w,E,_.glyphOffsetArray,be,fe,at,rn,_n,Re,an);et=ai.useVertical,an&&ai.needsFlipping&&(_n={}),(ai.notEnoughRoom||et||ai.needsFlipping&&dr(Ge,Tt,!0,B,t,w,E,_.glyphOffsetArray,be,fe,at,rn,_n,Re,an).notEnoughRoom)&&yr(Ge.numGlyphs,fe)}y?_.text.dynamicLayoutVertexBuffer.updateData(fe):_.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Xi(_,t,d,y,w,E,A,B,H,Q,se,de,fe){const be=B.glyphStartIndex+B.numGlyphs,Ie=B.lineStartIndex,Re=B.lineStartIndex+B.lineLength,et=t.getoffsetX(B.glyphStartIndex),Te=t.getoffsetX(be-1),Ge=ss(_*et,d,y,w,E,A,B.segment,Ie,Re,H,Q,se,de,fe,!0);if(!Ge)return null;const it=ss(_*Te,d,y,w,E,A,B.segment,Ie,Re,H,Q,se,de,fe,!0);return it?{first:Ge,last:it}:null}function wo(_,t,d,y){return _===h.WritingMode.horizontal&&Math.abs(d.y-t.y)>Math.abs(d.x-t.x)*y?{useVertical:!0}:(_===h.WritingMode.vertical?t.y<d.y:t.x>d.x)?{needsFlipping:!0}:null}function dr(_,t,d,y,w,E,A,B,H,Q,se,de,fe,be,Ie){const Re=t/24,et=_.lineOffsetX*Re,Te=_.lineOffsetY*Re;let Ge;if(_.numGlyphs>1){const it=_.glyphStartIndex+_.numGlyphs,ut=_.lineStartIndex,xt=_.lineStartIndex+_.lineLength,Ke=Xi(Re,B,et,Te,d,se,de,_,H,E,fe,Ie);if(!Ke)return{notEnoughRoom:!0};const Tt=or(Ke.first.point,A).point,rn=or(Ke.last.point,A).point;if(y&&!d){const hn=wo(_.writingMode,Tt,rn,be);if(hn)return hn}Ge=[Ke.first];for(let hn=_.glyphStartIndex+1;hn<it-1;hn++)Ge.push(ss(Re*B.getoffsetX(hn),et,Te,d,se,de,_.segment,ut,xt,H,E,fe,Ie));Ge.push(Ke.last)}else{if(y&&!d){const ut=or(de,w).point,xt=_.lineStartIndex+_.segment+1,Ke=new h.pointGeometry(H.getx(xt),H.gety(xt)),Tt=or(Ke,w),rn=Tt.signedDistanceFromCamera>0?Tt.point:Yi(de,Ke,ut,1,w),hn=wo(_.writingMode,ut,rn,be);if(hn)return hn}const it=ss(Re*B.getoffsetX(_.glyphStartIndex),et,Te,d,se,de,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,H,E,fe,Ie);if(!it)return{notEnoughRoom:!0};Ge=[it]}for(const it of Ge)h.addDynamicAttributes(Q,it.point,it.angle);return{}}function Yi(_,t,d,y,w,E){const A=_.add(_.sub(t)._unit()),B=or(A,w,E?E(A):0).point,H=d.sub(B);return d.add(H._mult(y/H.mag()))}function ss(_,t,d,y,w,E,A,B,H,Q,se,de,fe,be,Ie){const Re=y?_-t:_+t;let et=Re>0?1:-1,Te=0;y&&(et*=-1,Te=Math.PI),et<0&&(Te+=Math.PI);let Ge=et>0?B+A:B+A+1,it=w,ut=w,xt=0,Ke=0;const Tt=Math.abs(Re),rn=[],hn=[];let at=E;const _n=()=>{const bi=Ge-et;return 0===xt?E:new h.pointGeometry(Q.getx(bi),Q.gety(bi))},an=()=>Yi(_n(),at,ut,Tt-xt+1,se,fe);for(;xt+Ke<=Tt;){if(Ge+=et,Ge<B||Ge>=H)return null;if(ut=it,rn.push(it),be&&hn.push(at||_n()),it=de[Ge],void 0===it){at=new h.pointGeometry(Q.getx(Ge),Q.gety(Ge));const bi=or(at,se,fe?fe(at):0);it=bi.signedDistanceFromCamera>0?de[Ge]=bi.point:an()}else at=null;xt+=Ke,Ke=ut.dist(it)}Ie&&fe&&(at=at||new h.pointGeometry(Q.getx(Ge),Q.gety(Ge)),de[Ge]=it=void 0===de[Ge]?it:an(),Ke=ut.dist(it));const ai=(Tt-xt)/Ke,qn=it.sub(ut),In=qn.mult(ai)._add(ut);d&&In._add(qn._unit()._perp()._mult(d*et));const Yn=Te+Math.atan2(it.y-ut.y,it.x-ut.x);return rn.push(In),be&&(at=at||new h.pointGeometry(Q.getx(Ge),Q.gety(Ge)),hn.push(function(bi,Ji,Er){const Ar=1-Er;return new h.pointGeometry(bi.x*Ar+Ji.x*Er,bi.y*Ar+Ji.y*Er)}(hn.length>0?hn[hn.length-1]:at,at,ai))),{point:In,angle:Yn,path:rn,tilePath:hn}}const Jo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yr(_,t){for(let d=0;d<_;d++){const y=t.length;t.resize(y+4),t.float32.set(Jo,3*y)}}function Kr(_,t,d){const y=t[0],w=t[1];return _[0]=d[0]*y+d[4]*w+d[12],_[1]=d[1]*y+d[5]*w+d[13],_[3]=d[3]*y+d[7]*w+d[15],_}const sr=100;class Co{constructor(t,d,y=new En(t.width+200,t.height+200,25),w=new En(t.width+200,t.height+200,25)){this.transform=t,this.grid=y,this.ignoredGrid=w,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+sr,this.screenBottomBoundary=t.height+sr,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=d}placeCollisionBox(t,d,y,w,E,A,B){const H=this.projectAndGetPerspectiveRatio(A,d.anchorPointX,d.anchorPointY,d.elevation,d.tileID),Q=E*H.perspectiveRatio,se=(d.x1*t+y.x-d.padding)*Q+H.point.x,de=(d.y1*t+y.y-d.padding)*Q+H.point.y,fe=(d.x2*t+y.x+d.padding)*Q+H.point.x,be=(d.y2*t+y.y+d.padding)*Q+H.point.y,Ie=H.perspectiveRatio<=.55||H.aboveHorizon;return!this.isInsideGrid(se,de,fe,be)||!w&&this.grid.hitTest(se,de,fe,be,B)||Ie?{box:[],offscreen:!1}:{box:[se,de,fe,be],offscreen:this.isOffscreen(se,de,fe,be)}}placeCollisionCircles(t,d,y,w,E,A,B,H,Q,se,de,fe,be,Ie){const Re=[],et=this.transform.elevation,Te=et?an=>et.getAtTileOffset(Ie,an.x,an.y):an=>0,Ge=new h.pointGeometry(d.anchorX,d.anchorY),it=Te(Ge),ut=this.projectAndGetPerspectiveRatio(A,Ge.x,Ge.y,it,Ie),{perspectiveRatio:xt}=ut,Ke=(se?E/xt:E*xt)/h.ONE_EM,Tt=or(Ge,B,it).point,rn=ut.signedDistanceFromCamera>0?Xi(Ke,w,d.lineOffsetX*Ke,d.lineOffsetY*Ke,!1,Tt,Ge,d,y,B,{},et&&!se?Te:null,se&&!!et):null;let hn=!1,at=!1,_n=!0;if(rn&&!ut.aboveHorizon){const an=.5*fe*xt+be,ai=new h.pointGeometry(-100,-100),qn=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),In=new rr,Yn=rn.first,bi=rn.last;let Ji=[];for(let Ri=Yn.path.length-1;Ri>=1;Ri--)Ji.push(Yn.path[Ri]);for(let Ri=1;Ri<bi.path.length;Ri++)Ji.push(bi.path[Ri]);const Er=2.5*an;if(H){const Ri=Ji.map(et?(Mi,eo)=>{const mr=Te(eo<Yn.path.length-1?Yn.tilePath[Yn.path.length-1-eo]:bi.tilePath[eo-Yn.path.length+2]);return or(Mi,H,mr)}:Mi=>or(Mi,H));Ji=Ri.some(Mi=>Mi.signedDistanceFromCamera<=0)?[]:Ri.map(Mi=>Mi.point)}let Ar=[];if(Ji.length>0){const Ri=Ji[0].clone(),Mi=Ji[0].clone();for(let eo=1;eo<Ji.length;eo++)Ri.x=Math.min(Ri.x,Ji[eo].x),Ri.y=Math.min(Ri.y,Ji[eo].y),Mi.x=Math.max(Mi.x,Ji[eo].x),Mi.y=Math.max(Mi.y,Ji[eo].y);Ar=Ri.x>=ai.x&&Mi.x<=qn.x&&Ri.y>=ai.y&&Mi.y<=qn.y?[Ji]:Mi.x<ai.x||Ri.x>qn.x||Mi.y<ai.y||Ri.y>qn.y?[]:h.clipLine([Ji],ai.x,ai.y,qn.x,qn.y)}for(const Ri of Ar){In.reset(Ri,.25*an);let Mi=0;Mi=In.length<=.5*an?1:Math.ceil(In.paddedLength/Er)+1;for(let eo=0;eo<Mi;eo++){const mr=eo/Math.max(Mi-1,1),ns=In.lerp(mr),is=ns.x+sr,na=ns.y+sr;Re.push(is,na,an,0);const ps=is-an,to=na-an,go=is+an,Li=na+an;if(_n=_n&&this.isOffscreen(ps,to,go,Li),at=at||this.isInsideGrid(ps,to,go,Li),!t&&this.grid.hitTestCircle(is,na,an,de)&&(hn=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:hn}}}}return{circles:!Q&&hn||!at?[]:Re,offscreen:_n,collisionDetected:hn}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let y=1/0,w=1/0,E=-1/0,A=-1/0;for(const se of t){const de=new h.pointGeometry(se.x+sr,se.y+sr);y=Math.min(y,de.x),w=Math.min(w,de.y),E=Math.max(E,de.x),A=Math.max(A,de.y),d.push(de)}const B=this.grid.query(y,w,E,A).concat(this.ignoredGrid.query(y,w,E,A)),H={},Q={};for(const se of B){const de=se.key;if(void 0===H[de.bucketInstanceId]&&(H[de.bucketInstanceId]={}),H[de.bucketInstanceId][de.featureIndex])continue;const fe=[new h.pointGeometry(se.x1,se.y1),new h.pointGeometry(se.x2,se.y1),new h.pointGeometry(se.x2,se.y2),new h.pointGeometry(se.x1,se.y2)];h.polygonIntersectsPolygon(d,fe)&&(H[de.bucketInstanceId][de.featureIndex]=!0,void 0===Q[de.bucketInstanceId]&&(Q[de.bucketInstanceId]=[]),Q[de.bucketInstanceId].push(de.featureIndex))}return Q}insertCollisionBox(t,d,y,w,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:E},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,d,y,w,E){const A=d?this.ignoredGrid:this.grid,B={bucketInstanceId:y,featureIndex:w,collisionGroupID:E};for(let H=0;H<t.length;H+=4)A.insertCircle(B,t[H],t[H+1],t[H+2])}projectAndGetPerspectiveRatio(t,d,y,w,E){const A=[d,y,w||0,1];let B=!1;if(w||this.transform.pitch>0){h.transformMat4(A,A,t);let H=!1;this.fogState&&E&&(H=function(Q,se,de,fe,be,Ie){const Re=Ie.calculateFogTileMatrix(be),et=[se,de,fe];return h.transformMat4$1(et,et,Re),dn(Q,et,Ie.pitch,Ie._fov)}(this.fogState,d,y,w||0,E.toUnwrapped(),this.transform)>.9),B=A[2]>A[3]||H}else Kr(A,A,t);return{point:new h.pointGeometry((A[0]/A[3]+1)/2*this.transform.width+sr,(-A[1]/A[3]+1)/2*this.transform.height+sr),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/A[3]*.5,1.5),signedDistanceFromCamera:A[3],aboveHorizon:B}}isOffscreen(t,d,y,w){return y<sr||t>=this.screenRightBoundary||w<sr||d>this.screenBottomBoundary}isInsideGrid(t,d,y,w){return y>=0&&t<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const t=h.identity([]);return h.translate(t,t,[-100,-100,0]),t}}class fi{constructor(t,d,y,w){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?d:-d))):w&&y?1:0,this.placed=y}isHidden(){return 0===this.opacity&&!this.placed}}class br{constructor(t,d,y,w,E){this.text=new fi(t?t.text:null,d,y,E),this.icon=new fi(t?t.icon:null,d,w,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ys{constructor(t,d,y){this.text=t,this.icon=d,this.skipFade=y}}class Br{constructor(){this.invProjMatrix=h.create$1(),this.viewportMatrix=h.create$1(),this.circles=[]}}class Xr{constructor(t,d,y,w,E){this.bucketInstanceId=t,this.featureIndex=d,this.sourceLayerIndex=y,this.bucketIndex=w,this.tileID=E}}class Eo{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const d=++this.maxGroupID;this.collisionGroups[t]={ID:d,predicate:y=>y.collisionGroupID===d}}return this.collisionGroups[t]}}function As(_,t,d,y,w){const{horizontalAlign:E,verticalAlign:A}=h.getAnchorAlignment(_),B=-(E-.5)*t,H=-(A-.5)*d,Q=h.evaluateVariableOffset(_,y);return new h.pointGeometry(B+Q[0]*w,H+Q[1]*w)}function xr(_,t,d,y,w){const E=new h.pointGeometry(_,t);return d&&E._rotate(y?w:-w),E}class Hs{constructor(t,d,y,w,E){this.transform=t.clone(),this.collisionIndex=new Co(this.transform,E),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Eo(y),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,d,y,w){const E=y.getBucket(d),A=y.latestFeatureIndex;if(!E||!A||d.id!==E.layerIds[0])return;const B=y.collisionBoxArray,H=E.layers[0].layout,Q=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),se=y.tileSize/h.EXTENT,de=this.transform.calculateProjMatrix(y.tileID.toUnwrapped()),fe="map"===H.get("text-pitch-alignment"),be="map"===H.get("text-rotation-alignment"),Ie=Jt(y,1,this.transform.zoom),Re=ei(de,fe,be,this.transform,Ie);let et=null;if(fe){const Ge=ui(de,fe,be,this.transform,Ie);et=h.multiply([],this.transform.labelPlaneMatrix,Ge)}this.retainedQueryData[E.bucketInstanceId]=new Xr(E.bucketInstanceId,A,E.sourceLayerIndex,E.index,y.tileID);const Te={bucket:E,layout:H,posMatrix:de,textLabelPlaneMatrix:Re,labelToScreenMatrix:et,scale:Q,textPixelRatio:se,holdingForFade:y.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:h.evaluateSizeForZoom(E.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(w)for(const Ge of E.sortKeyRanges){const{sortKey:it,symbolInstanceStart:ut,symbolInstanceEnd:xt}=Ge;t.push({sortKey:it,symbolInstanceStart:ut,symbolInstanceEnd:xt,parameters:Te})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(t,d,y,w,E,A,B,H,Q,se,de,fe,be,Ie,Re,et,Te,Ge){const it=[fe.textOffset0,fe.textOffset1],ut=As(t,y,w,it,E),xt=this.collisionIndex.placeCollisionBox(E,d,xr(ut.x,ut.y,A,B,this.transform.angle),de,H,Q,se.predicate);if((!et||0!==this.collisionIndex.placeCollisionBox(Ie.getSymbolInstanceIconSize(Ge,this.transform.zoom,be),et,xr(ut.x,ut.y,A,B,this.transform.angle),de,H,Q,se.predicate).box.length)&&xt.box.length>0){let Ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),this.variableOffsets[fe.crossTileID]={textOffset:it,width:y,height:w,anchor:t,textScale:E,prevAnchor:Ke},this.markUsedJustification(Ie,t,fe,Re),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Re,fe),this.placedOrientations[fe.crossTileID]=Re),{shift:ut,placedGlyphBoxes:xt}}}placeLayerBucketPart(t,d,y){const{bucket:w,layout:E,posMatrix:A,textLabelPlaneMatrix:B,labelToScreenMatrix:H,textPixelRatio:Q,holdingForFade:se,collisionBoxArray:de,partiallyEvaluatedTextSize:fe,partiallyEvaluatedIconSize:be,collisionGroup:Ie}=t.parameters,Re=E.get("text-optional"),et=E.get("icon-optional"),Te=E.get("text-allow-overlap"),Ge=E.get("icon-allow-overlap"),it="map"===E.get("text-rotation-alignment"),ut="map"===E.get("text-pitch-alignment"),xt="none"!==E.get("icon-text-fit"),Ke="viewport-y"===E.get("symbol-z-order"),Tt=Te&&(Ge||!w.hasIconData()||et),rn=Ge&&(Te||!w.hasTextData()||Re);!w.collisionArrays&&de&&w.deserializeCollisionBoxes(de),y&&w.updateCollisionDebugBuffers(this.transform.zoom,de);const hn=(at,_n,an)=>{if(d[at.crossTileID])return;if(se)return void(this.placements[at.crossTileID]=new ys(!1,!1,!1));let ai=!1,qn=!1,In=!0,Yn=null,bi={box:null,offscreen:null},Ji={box:null,offscreen:null},Er=null,Ar=null,Ri=null,Mi=0,eo=0,mr=0;an.textFeatureIndex?Mi=an.textFeatureIndex:at.useRuntimeCollisionCircles&&(Mi=at.featureIndex),an.verticalTextFeatureIndex&&(eo=an.verticalTextFeatureIndex);const ns=to=>{to.tileID=this.retainedQueryData[w.bucketInstanceId].tileID,(this.transform.elevation||to.elevation)&&(to.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[w.bucketInstanceId].tileID,to.anchorPointX,to.anchorPointY):0)},is=an.textBox;if(is){ns(is);const to=Li=>{let qr=h.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Li&&this.prevPlacement){const To=this.prevPlacement.placedOrientations[at.crossTileID];To&&(this.placedOrientations[at.crossTileID]=To,qr=To,this.markUsedOrientation(w,qr,at))}return qr},go=(Li,qr)=>{if(w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&an.verticalTextBox){for(const To of w.writingModes)if(To===h.WritingMode.vertical?(bi=qr(),Ji=bi):bi=Li(),bi&&bi.box&&bi.box.length)break}else bi=Li()};if(E.get("text-variable-anchor")){let Li=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]){const Ir=this.prevPlacement.variableOffsets[at.crossTileID];Li.indexOf(Ir.anchor)>0&&(Li=Li.filter(Zo=>Zo!==Ir.anchor),Li.unshift(Ir.anchor))}const qr=(Ir,Zo,yc)=>{const No=w.getSymbolInstanceTextSize(fe,at,this.transform.zoom,_n),Es=(Ir.x2-Ir.x1)*No+2*Ir.padding,vc=(Ir.y2-Ir.y1)*No+2*Ir.padding,Gc=xt&&!Ge?Zo:null;Gc&&ns(Gc);let Kl={box:[],offscreen:!1};const Hd=Te?2*Li.length:Li.length;for(let qa=0;qa<Hd;++qa){const Sl=this.attemptAnchorPlacement(Li[qa%Li.length],Ir,Es,vc,No,it,ut,Q,A,Ie,qa>=Li.length,at,_n,w,yc,Gc,fe,be);if(Sl&&(Kl=Sl.placedGlyphBoxes,Kl&&Kl.box&&Kl.box.length)){ai=!0,Yn=Sl.shift;break}}return Kl};go(()=>qr(is,an.iconBox,h.WritingMode.horizontal),()=>{const Ir=an.verticalTextBox;return Ir&&ns(Ir),w.allowVerticalPlacement&&!(bi&&bi.box&&bi.box.length)&&at.numVerticalGlyphVertices>0&&Ir?qr(Ir,an.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),bi&&(ai=bi.box,In=bi.offscreen);const To=to(bi&&bi.box);if(!ai&&this.prevPlacement){const Ir=this.prevPlacement.variableOffsets[at.crossTileID];Ir&&(this.variableOffsets[at.crossTileID]=Ir,this.markUsedJustification(w,Ir.anchor,at,To))}}else{const Li=(qr,To)=>{const Ir=w.getSymbolInstanceTextSize(fe,at,this.transform.zoom,_n),Zo=this.collisionIndex.placeCollisionBox(Ir,qr,new h.pointGeometry(0,0),Te,Q,A,Ie.predicate);return Zo&&Zo.box&&Zo.box.length&&(this.markUsedOrientation(w,To,at),this.placedOrientations[at.crossTileID]=To),Zo};go(()=>Li(is,h.WritingMode.horizontal),()=>{const qr=an.verticalTextBox;return w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&qr?(ns(qr),Li(qr,h.WritingMode.vertical)):{box:null,offscreen:null}}),to(bi&&bi.box&&bi.box.length)}}if(Er=bi,ai=Er&&Er.box&&Er.box.length>0,In=Er&&Er.offscreen,at.useRuntimeCollisionCircles){const to=w.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),go=h.evaluateSizeForFeature(w.textSizeData,fe,to),Li=E.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(Te,to,w.lineVertexArray,w.glyphOffsetArray,go,A,B,H,y,ut,Ie.predicate,at.collisionCircleDiameter,Li,this.retainedQueryData[w.bucketInstanceId].tileID),ai=Te||Ar.circles.length>0&&!Ar.collisionDetected,In=In&&Ar.offscreen}if(an.iconFeatureIndex&&(mr=an.iconFeatureIndex),an.iconBox){const to=go=>{ns(go);const Li=xt&&Yn?xr(Yn.x,Yn.y,it,ut,this.transform.angle):new h.pointGeometry(0,0),qr=w.getSymbolInstanceIconSize(be,this.transform.zoom,_n);return this.collisionIndex.placeCollisionBox(qr,go,Li,Ge,Q,A,Ie.predicate)};Ji&&Ji.box&&Ji.box.length&&an.verticalIconBox?(Ri=to(an.verticalIconBox),qn=Ri.box.length>0):(Ri=to(an.iconBox),qn=Ri.box.length>0),In=In&&Ri.offscreen}const na=Re||0===at.numHorizontalGlyphVertices&&0===at.numVerticalGlyphVertices,ps=et||0===at.numIconVertices;if(na||ps?ps?na||(qn=qn&&ai):ai=qn&&ai:qn=ai=qn&&ai,ai&&Er&&Er.box&&this.collisionIndex.insertCollisionBox(Er.box,E.get("text-ignore-placement"),w.bucketInstanceId,Ji&&Ji.box&&eo?eo:Mi,Ie.ID),qn&&Ri&&this.collisionIndex.insertCollisionBox(Ri.box,E.get("icon-ignore-placement"),w.bucketInstanceId,mr,Ie.ID),Ar&&(ai&&this.collisionIndex.insertCollisionCircles(Ar.circles,E.get("text-ignore-placement"),w.bucketInstanceId,Mi,Ie.ID),y)){const to=w.bucketInstanceId;let go=this.collisionCircleArrays[to];void 0===go&&(go=this.collisionCircleArrays[to]=new Br);for(let Li=0;Li<Ar.circles.length;Li+=4)go.circles.push(Ar.circles[Li+0]),go.circles.push(Ar.circles[Li+1]),go.circles.push(Ar.circles[Li+2]),go.circles.push(Ar.collisionDetected?1:0)}this.placements[at.crossTileID]=new ys(ai||Tt,qn||rn,In||w.justReloaded),d[at.crossTileID]=!0};if(Ke){const at=w.getSortedSymbolIndexes(this.transform.angle);for(let _n=at.length-1;_n>=0;--_n){const an=at[_n];hn(w.symbolInstances.get(an),an,w.collisionArrays[an])}}else for(let at=t.symbolInstanceStart;at<t.symbolInstanceEnd;at++)hn(w.symbolInstances.get(at),at,w.collisionArrays[at]);if(y&&w.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[w.bucketInstanceId];h.invert(at.invProjMatrix,A),at.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(t,d,y,w){let E;E=w===h.WritingMode.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(d)];const A=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const B of A)B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=E>=0&&B!==E?0:y.crossTileID)}markUsedOrientation(t,d,y){const w=d===h.WritingMode.horizontal||d===h.WritingMode.horizontalOnly?d:0,E=d===h.WritingMode.vertical?d:0,A=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const B of A)t.text.placedSymbolArray.get(B).placedOrientation=w;y.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let y=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(t):1,E=d?d.opacities:{},A=d?d.variableOffsets:{},B=d?d.placedOrientations:{};for(const H in this.placements){const Q=this.placements[H],se=E[H];se?(this.opacities[H]=new br(se,w,Q.text,Q.icon),y=y||Q.text!==se.text.placed||Q.icon!==se.icon.placed):(this.opacities[H]=new br(null,w,Q.text,Q.icon,Q.skipFade),y=y||Q.text||Q.icon)}for(const H in E){const Q=E[H];if(!this.opacities[H]){const se=new br(Q,w,!1,!1);se.isHidden()||(this.opacities[H]=se,y=y||Q.text.placed||Q.icon.placed)}}for(const H in A)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=A[H]);for(const H in B)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=B[H]);y?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:t)}updateLayerOpacities(t,d){const y={};for(const w of d){const E=w.getBucket(t);E&&w.latestFeatureIndex&&t.id===E.layerIds[0]&&this.updateBucketOpacities(E,y,w.collisionBoxArray)}}updateBucketOpacities(t,d,y){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const w=t.layers[0].layout,E=new br(null,0,!1,!1,!0),A=w.get("text-allow-overlap"),B=w.get("icon-allow-overlap"),H=w.get("text-variable-anchor"),Q="map"===w.get("text-rotation-alignment"),se="map"===w.get("text-pitch-alignment"),de="none"!==w.get("icon-text-fit"),fe=new br(null,0,A&&(B||!t.hasIconData()||w.get("icon-optional")),B&&(A||!t.hasTextData()||w.get("text-optional")),!0);!t.collisionArrays&&y&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(y);const be=(Ie,Re,et)=>{for(let Te=0;Te<Re/4;Te++)Ie.opacityVertexArray.emplaceBack(et)};for(let Ie=0;Ie<t.symbolInstances.length;Ie++){const Re=t.symbolInstances.get(Ie),{numHorizontalGlyphVertices:et,numVerticalGlyphVertices:Te,crossTileID:Ge}=Re;let it=this.opacities[Ge];d[Ge]?it=E:it||(it=fe,this.opacities[Ge]=it),d[Ge]=!0;const ut=Re.numIconVertices>0,xt=this.placedOrientations[Re.crossTileID],Ke=xt===h.WritingMode.vertical,Tt=xt===h.WritingMode.horizontal||xt===h.WritingMode.horizontalOnly;if(et>0||Te>0){const rn=vl(it.text);be(t.text,et,Ke?$s:rn),be(t.text,Te,Tt?$s:rn);const hn=it.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(an=>{an>=0&&(t.text.placedSymbolArray.get(an).hidden=hn||Ke?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=hn||Tt?1:0);const at=this.variableOffsets[Re.crossTileID];at&&this.markUsedJustification(t,at.anchor,Re,xt);const _n=this.placedOrientations[Re.crossTileID];_n&&(this.markUsedJustification(t,"left",Re,_n),this.markUsedOrientation(t,_n,Re))}if(ut){const rn=vl(it.icon),hn=!(de&&Re.verticalPlacedIconSymbolIndex&&Ke);Re.placedIconSymbolIndex>=0&&(be(t.icon,Re.numIconVertices,hn?rn:$s),t.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=it.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(be(t.icon,Re.numVerticalIconVertices,hn?$s:rn),t.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=it.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const rn=t.collisionArrays[Ie];if(rn){let hn=new h.pointGeometry(0,0);if(rn.textBox||rn.verticalTextBox){let _n=!0;if(H){const an=this.variableOffsets[Ge];an?(hn=As(an.anchor,an.width,an.height,an.textOffset,an.textScale),Q&&hn._rotate(se?this.transform.angle:-this.transform.angle)):_n=!1}rn.textBox&&io(t.textCollisionBox.collisionVertexArray,it.text.placed,!_n||Ke,hn.x,hn.y),rn.verticalTextBox&&io(t.textCollisionBox.collisionVertexArray,it.text.placed,!_n||Tt,hn.x,hn.y)}const at=Boolean(!Tt&&rn.verticalIconBox);rn.iconBox&&io(t.iconCollisionBox.collisionVertexArray,it.icon.placed,at,de?hn.x:0,de?hn.y:0),rn.verticalIconBox&&io(t.iconCollisionBox.collisionVertexArray,it.icon.placed,!at,de?hn.x:0,de?hn.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const Ie=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=Ie.invProjMatrix,t.placementViewportMatrix=Ie.viewportMatrix,t.collisionCircleArray=Ie.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,d){const y=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*y>t}setStale(){this.stale=!0}}function io(_,t,d,y,w){_.emplaceBack(t?1:0,d?1:0,y||0,w||0),_.emplaceBack(t?1:0,d?1:0,y||0,w||0),_.emplaceBack(t?1:0,d?1:0,y||0,w||0),_.emplaceBack(t?1:0,d?1:0,y||0,w||0)}const Mr=Math.pow(2,25),Is=Math.pow(2,24),fr=Math.pow(2,17),Va=Math.pow(2,16),ga=Math.pow(2,9),pc=Math.pow(2,8),as=Math.pow(2,1);function vl(_){if(0===_.opacity&&!_.placed)return 0;if(1===_.opacity&&_.placed)return 4294967295;const t=_.placed?1:0,d=Math.floor(127*_.opacity);return d*Mr+t*Is+d*fr+t*Va+d*ga+t*pc+d*as+t}const $s=0;class jo{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,d,y,w,E){const A=this._bucketParts;for(;this._currentTileIndex<t.length;)if(d.getBucketParts(A,w,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((B,H)=>B.sortKey-H.sortKey));this._currentPartIndex<A.length;)if(d.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,E())return!0;return!1}}class Zs{constructor(t,d,y,w,E,A,B,H){this.placement=new Hs(t,E,A,B,H),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(t,d,y){const w=h.exported.now(),E=()=>{const A=h.exported.now()-w;return!this._forceFullPlacement&&A>2};for(;this._currentPlacementIndex>=0;){const A=d[t[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if("symbol"===A.type&&(!A.minzoom||A.minzoom<=B)&&(!A.maxzoom||A.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new jo(A)),this._inProgressLayer.continuePlacement(y[A.source],this.placement,this._showCollisionBoxes,A,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Io=512/h.EXTENT/2;class _a{constructor(t,d,y){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let w=0;w<d.length;w++){const E=d.get(w),A=E.key;this.indexedSymbolInstances[A]||(this.indexedSymbolInstances[A]=[]),this.indexedSymbolInstances[A].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,t)})}}getScaledCoordinates(t,d){const y=Io/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*h.EXTENT+t.anchorX)*y),y:Math.floor((d.canonical.y*h.EXTENT+t.anchorY)*y)}}findMatches(t,d,y){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let E=0;E<t.length;E++){const A=t.get(E);if(A.crossTileID)continue;const B=this.indexedSymbolInstances[A.key];if(!B)continue;const H=this.getScaledCoordinates(A,d);for(const Q of B)if(Math.abs(Q.coord.x-H.x)<=w&&Math.abs(Q.coord.y-H.y)<=w&&!y[Q.crossTileID]){y[Q.crossTileID]=!0,A.crossTileID=Q.crossTileID;break}}}}class Ps{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const d=Math.round((t-this.lng)/360);if(0!==d)for(const y in this.indexes){const w=this.indexes[y],E={};for(const A in w){const B=w[A];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+d),E[B.tileID.key]=B}this.indexes[y]=E}this.lng=t}addBucket(t,d,y){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let E=0;E<d.symbolInstances.length;E++)d.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const w=this.usedCrossTileIDs[t.overscaledZ];for(const E in this.indexes){const A=this.indexes[E];if(Number(E)>t.overscaledZ)for(const B in A){const H=A[B];H.tileID.isChildOf(t)&&H.findMatches(d.symbolInstances,t,w)}else{const B=A[t.scaledTo(Number(E)).key];B&&B.findMatches(d.symbolInstances,t,w)}}for(let E=0;E<d.symbolInstances.length;E++){const A=d.symbolInstances.get(E);A.crossTileID||(A.crossTileID=y.generate(),w[A.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new _a(t,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(t,d){for(const y in d.indexedSymbolInstances)for(const w of d.indexedSymbolInstances[y])delete this.usedCrossTileIDs[t][w.crossTileID]}removeStaleBuckets(t){let d=!1;for(const y in this.indexes){const w=this.indexes[y];for(const E in w)t[w[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,w[E]),delete w[E],d=!0)}return d}}class Ws{constructor(){this.layerIndexes={},this.crossTileIDs=new Ps,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,d,y){let w=this.layerIndexes[t.id];void 0===w&&(w=this.layerIndexes[t.id]=new Qa);let E=!1;const A={};w.handleWrapJump(y);for(const B of d){const H=B.getBucket(t);H&&t.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(B.tileID,H,this.crossTileIDs)&&(E=!0),A[H.bucketInstanceId]=!0)}return w.removeStaleBuckets(A)&&(E=!0),E}pruneUnusedLayers(t){const d={};t.forEach(y=>{d[y]=!0});for(const y in this.layerIndexes)d[y]||delete this.layerIndexes[y]}}const ya=(_,t)=>h.emitValidationErrors(_,t&&t.filter(d=>"source.canvas"!==d.identifier)),Ua=h.pick(ue,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),va=h.pick(ue,["setCenter","setZoom","setBearing","setPitch"]),vs=function(){const _={},t=h.spec.$version;for(const d in h.spec.$root){const y=h.spec.$root[d];if(y.required){let w=null;w="version"===d?t:"array"===y.type?[]:{},null!=w&&(_[d]=w)}}return _}(),ja={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Po extends h.Evented{constructor(t,d={}){super(),this.map=t,this.dispatcher=new zt(Fe(),this),this.imageManager=new Tn,this.imageManager.setEventedParent(this),this.glyphManager=new h.GlyphManager(t._requestManager,d.localFontFamily?h.LocalGlyphMode.all:d.localIdeographFontFamily?h.LocalGlyphMode.ideographs:h.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.lineAtlas=new h.LineAtlas(256,512),this.crossTileSymbolIndex=new Ws,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const y=this;this._rtlTextPluginCallback=Po.registerForPluginStateChange(w=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(E,A)=>{if(h.triggerPluginCompletionEvent(E),A&&A.every(B=>B))for(const B in y._sourceCaches){const H=y._sourceCaches[B],Q=H.getSource().type;"vector"!==Q&&"geojson"!==Q||H.reload()}})}),this.on("data",w=>{if("source"!==w.dataType||"metadata"!==w.sourceDataType)return;const E=this.getSource(w.sourceId);if(E&&E.vectorLayerIds)for(const A in this._layers){const B=this._layers[A];B.source===E.id&&this._validateLayer(B)}})}loadURL(t,d={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const y="boolean"==typeof d.validate?d.validate:!h.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,d.accessToken);const w=this.map._requestManager.transformRequest(t,h.ResourceType.Style);this._request=h.getJSON(w,(E,A)=>{this._request=null,E?this.fire(new h.ErrorEvent(E)):A&&this._load(A,y)})}loadJSON(t,d={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(t,!1!==d.validate)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(vs,!1)}_updateLayerCount(t,d){const y=d?1:-1;t.is3D()&&(this._num3DLayers+=y),"circle"===t.type&&(this._numCircleLayers+=y),"symbol"===t.type&&(this._numSymbolLayers+=y)}_load(t,d){if(d&&ya(this,h.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const w in t.sources)this.addSource(w,t.sources[w],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const y=Me(this.stylesheet.layers);this._order=y.map(w=>w.id),this._layers={},this._serializedLayers={};for(let w of y)w=h.createStyleLayer(w),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $e(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(d,y,w){let E,A,B;const H=h.exported.devicePixelRatio>1?"@2x":"";let Q=h.getJSON(y.transformRequest(y.normalizeSpriteURL(d,H,".json"),h.ResourceType.SpriteJSON),(fe,be)=>{Q=null,B||(B=fe,E=be,de())}),se=h.getImage(y.transformRequest(y.normalizeSpriteURL(d,H,".png"),h.ResourceType.SpriteImage),(fe,be)=>{se=null,B||(B=fe,A=be,de())});function de(){if(B)w(B);else if(E&&A){const fe=h.exported.getImageData(A),be={};for(const Ie in E){const{width:Re,height:et,x:Te,y:Ge,sdf:it,pixelRatio:ut,stretchX:xt,stretchY:Ke,content:Tt}=E[Ie],rn=new h.RGBAImage({width:Re,height:et});h.RGBAImage.copy(fe,rn,{x:Te,y:Ge},{x:0,y:0},{width:Re,height:et}),be[Ie]={data:rn,pixelRatio:ut,sdf:it,stretchX:xt,stretchY:Ke,content:Tt}}w(null,be)}}return{cancel(){Q&&(Q.cancel(),Q=null),se&&(se.cancel(),se=null)}}}(t,this.map._requestManager,(d,y)=>{if(this._spriteRequest=null,d)this.fire(new h.ErrorEvent(d));else if(y)for(const w in y)this.imageManager.addImage(w,y[w]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(t){const d=this.getSource(t.source);if(!d)return;const y=t.sourceLayer;y&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(y))&&this.fire(new h.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${d.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const d=[];for(const y of t){const w=this._layers[y];"custom"!==w.type&&d.push(w.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&ja[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const d=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(w.length||E.length)&&this._updateWorkerLayers(w,E);for(const A in this._updatedSources){const B=this._updatedSources[A];"reload"===B?this._reloadSource(A):"clear"===B&&this._clearSource(A)}this._updateTilesForChangedImages();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const y={};for(const w in this._sourceCaches){const E=this._sourceCaches[w];y[w]=E.used,E.used=!1}for(const w of this._order){const E=this._layers[w];if(E.recalculate(t,this._availableImages),!E.isHidden(t.zoom)){const B=this._getLayerSourceCache(E);B&&(B.used=!0)}const A=this.map.painter;if(A){const B=E.getProgramIds();if(!B)continue;const H=E.getProgramConfiguration(t.zoom);for(const Q of B)A.useProgram(Q,H)}}for(const w in y){const E=this._sourceCaches[w];y[w]!==E.used&&E.getSource().fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),ya(this,h.validateStyle(t)))return!1;(t=h.clone$2(t)).layers=Me(t.layers);const d=function(w,E){if(!w)return[{command:ue.setStyle,args:[E]}];let A=[];try{if(!ye(w.version,E.version))return[{command:ue.setStyle,args:[E]}];ye(w.center,E.center)||A.push({command:ue.setCenter,args:[E.center]}),ye(w.zoom,E.zoom)||A.push({command:ue.setZoom,args:[E.zoom]}),ye(w.bearing,E.bearing)||A.push({command:ue.setBearing,args:[E.bearing]}),ye(w.pitch,E.pitch)||A.push({command:ue.setPitch,args:[E.pitch]}),ye(w.sprite,E.sprite)||A.push({command:ue.setSprite,args:[E.sprite]}),ye(w.glyphs,E.glyphs)||A.push({command:ue.setGlyphs,args:[E.glyphs]}),ye(w.transition,E.transition)||A.push({command:ue.setTransition,args:[E.transition]}),ye(w.light,E.light)||A.push({command:ue.setLight,args:[E.light]}),ye(w.fog,E.fog)||A.push({command:ue.setFog,args:[E.fog]});const B={},H=[];!function(de,fe,be,Ie){let Re;for(Re in fe=fe||{},de=de||{})de.hasOwnProperty(Re)&&(fe.hasOwnProperty(Re)||Xt(Re,be,Ie));for(Re in fe)fe.hasOwnProperty(Re)&&(de.hasOwnProperty(Re)?ye(de[Re],fe[Re])||("geojson"===de[Re].type&&"geojson"===fe[Re].type&&Gn(de,fe,Re)?be.push({command:ue.setGeoJSONSourceData,args:[Re,fe[Re].data]}):Fn(Re,fe,be,Ie)):We(Re,fe,be))}(w.sources,E.sources,H,B);const Q=[];w.layers&&w.layers.forEach(de=>{B[de.source]?A.push({command:ue.removeLayer,args:[de.id]}):Q.push(de)});let se=w.terrain;se&&B[se.source]&&(A.push({command:ue.setTerrain,args:[void 0]}),se=void 0),A=A.concat(H),ye(se,E.terrain)||A.push({command:ue.setTerrain,args:[E.terrain]}),function(de,fe,be){fe=fe||[];const Ie=(de=de||[]).map(Ci),Re=fe.map(Ci),et=de.reduce(qi,{}),Te=fe.reduce(qi,{}),Ge=Ie.slice(),it=Object.create(null);let ut,xt,Ke,Tt,rn,hn,at;for(ut=0,xt=0;ut<Ie.length;ut++)Ke=Ie[ut],Te.hasOwnProperty(Ke)?xt++:(be.push({command:ue.removeLayer,args:[Ke]}),Ge.splice(Ge.indexOf(Ke,xt),1));for(ut=0,xt=0;ut<Re.length;ut++)Ke=Re[Re.length-1-ut],Ge[Ge.length-1-ut]!==Ke&&(et.hasOwnProperty(Ke)?(be.push({command:ue.removeLayer,args:[Ke]}),Ge.splice(Ge.lastIndexOf(Ke,Ge.length-xt),1)):xt++,hn=Ge[Ge.length-ut],be.push({command:ue.addLayer,args:[Te[Ke],hn]}),Ge.splice(Ge.length-ut,0,Ke),it[Ke]=!0);for(ut=0;ut<Re.length;ut++)if(Ke=Re[ut],Tt=et[Ke],rn=Te[Ke],!it[Ke]&&!ye(Tt,rn))if(ye(Tt.source,rn.source)&&ye(Tt["source-layer"],rn["source-layer"])&&ye(Tt.type,rn.type)){for(at in An(Tt.layout,rn.layout,be,Ke,null,ue.setLayoutProperty),An(Tt.paint,rn.paint,be,Ke,null,ue.setPaintProperty),ye(Tt.filter,rn.filter)||be.push({command:ue.setFilter,args:[Ke,rn.filter]}),ye(Tt.minzoom,rn.minzoom)&&ye(Tt.maxzoom,rn.maxzoom)||be.push({command:ue.setLayerZoomRange,args:[Ke,rn.minzoom,rn.maxzoom]}),Tt)Tt.hasOwnProperty(at)&&"layout"!==at&&"paint"!==at&&"filter"!==at&&"metadata"!==at&&"minzoom"!==at&&"maxzoom"!==at&&(0===at.indexOf("paint.")?An(Tt[at],rn[at],be,Ke,at.slice(6),ue.setPaintProperty):ye(Tt[at],rn[at])||be.push({command:ue.setLayerProperty,args:[Ke,at,rn[at]]}));for(at in rn)rn.hasOwnProperty(at)&&!Tt.hasOwnProperty(at)&&"layout"!==at&&"paint"!==at&&"filter"!==at&&"metadata"!==at&&"minzoom"!==at&&"maxzoom"!==at&&(0===at.indexOf("paint.")?An(Tt[at],rn[at],be,Ke,at.slice(6),ue.setPaintProperty):ye(Tt[at],rn[at])||be.push({command:ue.setLayerProperty,args:[Ke,at,rn[at]]}))}else be.push({command:ue.removeLayer,args:[Ke]}),hn=Ge[Ge.lastIndexOf(Ke)+1],be.push({command:ue.addLayer,args:[rn,hn]})}(Q,E.layers,A)}catch(B){console.warn("Unable to compute style diff:",B),A=[{command:ue.setStyle,args:[E]}]}return A}(this.serialize(),t).filter(w=>!(w.command in va));if(0===d.length)return!1;const y=d.filter(w=>!(w.command in Ua));if(y.length>0)throw new Error(`Unimplemented: ${y.map(w=>w.command).join(", ")}.`);return d.forEach(w=>{"setTransition"!==w.command&&this[w.command].apply(this,w.args)}),this.stylesheet=t,!0}addImage(t,d){if(this.getImage(t))return this.fire(new h.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,d),this._afterImageUpdated(t)}updateImage(t,d){this.imageManager.updateImage(t,d)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new h.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,d,y={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(h.validateStyle.source,`sources.${t}`,d,null,y))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=oe(t,d,this.dispatcher,this);w.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:w.serialize(),sourceId:t}));const E=A=>{const B=(A?"symbol:":"other:")+t,H=this._sourceCaches[B]=new h.SourceCache(B,w,A);(A?this._symbolSourceCaches:this._otherSourceCaches)[t]=H,H.style=this,H.onAdd(this.map)};E(!1),"vector"!==d.type&&"geojson"!==d.type||E(!0),w.onAdd&&w.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const d=this.getSource(t);if(void 0===d)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===t)return this.fire(new h.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${w}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new h.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(t);for(const w of y)delete this._sourceCaches[w.id],delete this._updatedSources[w.id],w.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w.getSource().id})),w.setEventedParent(null),w.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,d){this._checkLoaded(),this.getSource(t).setData(d),this._changed=!0}getSource(t){const d=this._getSourceCache(t);return d&&d.getSource()}addLayer(t,d,y={}){this._checkLoaded();const w=t.id;if(this.getLayer(w))return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${w}" already exists on this map`)));let E;if("custom"===t.type){if(ya(this,h.validateCustomStyleLayer(t)))return;E=h.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(w,t.source),t=h.clone$2(t),t=h.extend(t,{source:w})),this._validate(h.validateStyle.layer,`layers.${w}`,t,{arrayIndex:-1},y))return;E=h.createStyleLayer(t),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize(),this._updateLayerCount(E,!0)}const A=d?this._order.indexOf(d):this._order.length;if(d&&-1===A)return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(A,0,w),this._layerOrderChanged=!0,this._layers[w]=E;const B=this._getLayerSourceCache(E);if(this._removedLayers[w]&&E.source&&B&&"custom"!==E.type){const H=this._removedLayers[w];delete this._removedLayers[w],H.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",B.pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,d){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===d)return;const y=this._order.indexOf(t);this._order.splice(y,1);const w=d?this._order.indexOf(d):this._order.length;d&&-1===w?this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(w,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const d=this._layers[t];if(!d)return void this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const y=this._order.indexOf(t);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=d,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const d in this._layers)if(this._layers[d].type===t)return!0;return!1}setLayerZoomRange(t,d,y){this._checkLoaded();const w=this.getLayer(t);w?w.minzoom===d&&w.maxzoom===y||(null!=d&&(w.minzoom=d),null!=y&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,d,y={}){this._checkLoaded();const w=this.getLayer(t);if(w){if(!ye(w.filter,d))return null==d?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(h.validateStyle.filter,`layers.${w.id}.filter`,d,null,y)||(w.filter=h.clone$2(d),this._updateLayer(w)))}else this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return h.clone$2(this.getLayer(t).filter)}setLayoutProperty(t,d,y,w={}){this._checkLoaded();const E=this.getLayer(t);E?ye(E.getLayoutProperty(d),y)||(E.setLayoutProperty(d,y,w),this._updateLayer(E)):this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,d){const y=this.getLayer(t);if(y)return y.getLayoutProperty(d);this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,d,y,w={}){this._checkLoaded();const E=this.getLayer(t);E?ye(E.getPaintProperty(d),y)||(E.setPaintProperty(d,y,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new h.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,d){return this.getLayer(t).getPaintProperty(d)}setFeatureState(t,d){this._checkLoaded();const y=t.source,w=t.sourceLayer,E=this.getSource(y);if(void 0===E)return void this.fire(new h.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const A=E.type;if("geojson"===A&&w)return void this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===A&&!w)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided.")));const B=this._getSourceCaches(y);for(const H of B)H.setFeatureState(w,t.id,d)}removeFeatureState(t,d){this._checkLoaded();const y=t.source,w=this.getSource(y);if(void 0===w)return void this.fire(new h.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const E=w.type,A="vector"===E?t.sourceLayer:void 0;if("vector"===E&&!A)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const B=this._getSourceCaches(y);for(const H of B)H.removeFeatureState(A,t.id,d)}getFeatureState(t){this._checkLoaded();const d=t.source,y=t.sourceLayer,w=this.getSource(d);if(void 0!==w){if("vector"!==w.type||y)return void 0===t.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(y,t.id);this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const d in this._sourceCaches){const y=this._sourceCaches[d].getSource();t[y.id]||(t[y.id]=y.serialize())}return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},d=>void 0!==d)}_updateLayer(t){this._updatedLayers[t.id]=!0;const d=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&d&&"raster"!==d.getSource().type&&(this._updatedSources[t.source]="reload",d.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const d=A=>"fill-extrusion"===this._layers[A].type,y={},w=[];for(let A=this._order.length-1;A>=0;A--){const B=this._order[A];if(d(B)){y[B]=A;for(const H of t){const Q=H[B];if(Q)for(const se of Q)w.push(se)}}}w.sort((A,B)=>B.intersectionZ-A.intersectionZ);const E=[];for(let A=this._order.length-1;A>=0;A--){const B=this._order[A];if(d(B))for(let H=w.length-1;H>=0;H--){const Q=w[H].feature;if(y[Q.layer.id]<A)break;E.push(Q),w.pop()}else for(const H of t){const Q=H[B];if(Q)for(const se of Q)E.push(se.feature)}}return E}queryRenderedFeatures(t,d,y){d&&d.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const H of d.layers){const Q=this._layers[H];if(!Q)return this.fire(new h.ErrorEvent(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];w[Q.source]=!0}}const E=[];d.availableImages=this._availableImages;const A=d&&d.layers?d.layers.some(H=>{const Q=this.getLayer(H);return Q&&Q.is3D()}):this.has3DLayers(),B=Nn.createFromScreenPoints(t,y);for(const H in this._sourceCaches){const Q=this._sourceCaches[H].getSource().id;d.layers&&!w[Q]||E.push(Oe(this._sourceCaches[H],this._layers,this._serializedLayers,B,d,y,A,!!this.map._showQueryGeometry))}return this.placement&&E.push(function(H,Q,se,de,fe,be,Ie){const Re={},et=be.queryRenderedSymbols(de),Te=[];for(const Ge of Object.keys(et).map(Number))Te.push(Ie[Ge]);Te.sort(gt);for(const Ge of Te){const it=Ge.featureIndex.lookupSymbolFeatures(et[Ge.bucketInstanceId],Q,Ge.bucketIndex,Ge.sourceLayerIndex,fe.filter,fe.layers,fe.availableImages,H);for(const ut in it){const xt=Re[ut]=Re[ut]||[],Ke=it[ut];Ke.sort((Tt,rn)=>{const hn=Ge.featureSortOrder;if(hn){const at=hn.indexOf(Tt.featureIndex);return hn.indexOf(rn.featureIndex)-at}return rn.featureIndex-Tt.featureIndex});for(const Tt of Ke)xt.push(Tt)}}for(const Ge in Re)Re[Ge].forEach(it=>{const ut=it.feature,xt=se(H[Ge]).getFeatureState(ut.layer["source-layer"],ut.id);ut.source=ut.layer.source,ut.layer["source-layer"]&&(ut.sourceLayer=ut.layer["source-layer"]),ut.state=xt});return Re}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),B.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(t,d){d&&d.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const y=this._getSourceCaches(t);let w=[];for(const E of y)w=w.concat(Ye(E,d));return w}addSourceType(t,d,y){return Po.getSourceType(t)?y(new Error(`A source type called "${t}" already exists.`)):(Po.setSourceType(t,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:d.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(t,d={}){this._checkLoaded();const y=this.light.getLight();let w=!1;for(const A in t)if(!ye(t[A],y[A])){w=!0;break}if(!w)return;const E={now:h.exported.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,d),this.light.updateTransitions(E)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof t.source){const d="terrain-dem-src";this.addSource(d,t.source),t=h.clone$2(t),t=h.extend(t,{source:d})}if(!this._validate(h.validateStyle.terrain,"terrain",t)){if(this.terrain){const d=this.terrain,y=d.get();for(const w in t)if(!ye(t[w],y[w])){d.set(t),this.stylesheet.terrain=t;const E={now:h.exported.now(),transition:h.extend({duration:0},this.stylesheet.transition)};d.updateTransitions(E);break}}else this._createTerrain(t);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(t){const d=this.fog=new Ht(t);this.stylesheet.fog=t;const y={now:h.exported.now(),transition:h.extend({duration:0},this.stylesheet.transition)};d.updateTransitions(y)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const t of this.map._markers)t._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,y=d.get();for(const w in t)if(!ye(t[w],y[w])){d.set(t),this.stylesheet.fog=t;const E={now:h.exported.now(),transition:h.extend({duration:0},this.stylesheet.transition)};d.updateTransitions(E);break}}else this._createFog(t);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter(y=>this.isLayerDraped(this._layers[y])),d=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...d)}_createTerrain(t){const d=this.terrain=new $t(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const y={now:h.exported.now(),transition:h.extend({duration:0},this.stylesheet.transition)};d.updateTransitions(y)}_force3DLayerUpdate(){for(const t in this._layers){const d=this._layers[t];"fill-extrusion"===d.type&&this._updateLayer(d)}}_validate(t,d,y,w,E={}){return(!E||!1!==E.validate)&&ya(this,t.call(h.validateStyle,h.extend({key:d,style:this.serialize(),value:y,styleSpec:h.spec},w)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const d=this._getSourceCaches(t);for(const y of d)y.clearTiles()}_reloadSource(t){const d=this._getSourceCaches(t);for(const y of d)y.resume(),y.reload()}_updateSources(t){for(const d in this._sourceCaches)this._sourceCaches[d].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const d=this._sourceCaches[t];d.resume(),d.reload()}}_updatePlacement(t,d,y,w,E=!1){let A=!1,B=!1;const H={};for(const Q of this._order){const se=this._layers[Q];if("symbol"!==se.type)continue;if(!H[se.source]){const fe=this._getLayerSourceCache(se);if(!fe)continue;H[se.source]=fe.getRenderableIds(!0).map(be=>fe.getTileByID(be)).sort((be,Ie)=>Ie.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ie.tileID)?-1:1))}const de=this.crossTileSymbolIndex.addLayer(se,H[se.source],t.center.lng);A=A||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),E=E||this._layerOrderChanged||0===y,this._layerOrderChanged&&this.fire(new h.Event("neworder")),(E||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),t.zoom))&&(this.pauseablePlacement=new Zs(t,this._order,E,d,y,w,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),B=!0),A&&this.pauseablePlacement.placement.setStale()),B||A)for(const Q of this._order){const se=this._layers[Q];"symbol"===se.type&&this.placement.updateLayerOpacities(se,H[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,d,y){this.imageManager.getImages(d.icons,y),this._updateTilesForChangedImages();const w=E=>{E&&E.setDependencies(d.tileID.key,d.type,d.icons)};w(this._otherSourceCaches[d.source]),w(this._symbolSourceCaches[d.source])}getGlyphs(t,d,y){this.glyphManager.getGlyphs(d.stacks,y)}getResource(t,d,y){return h.makeRequest(d,y)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const d=[];return this._otherSourceCaches[t]&&d.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&d.push(this._symbolSourceCaches[t]),d}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}Po.getSourceType=function(_){return ee[_]},Po.setSourceType=function(_,t){ee[_]=t},Po.registerForPluginStateChange=h.registerForPluginStateChange;var bs="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",ba="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Os={},ks={};Os=Ni("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),ks=Ni("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Ja=Ni("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),qs=bs;var Rs={background:Ni("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Ni("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Ni("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Ni("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ni("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Ni("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ni("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ni("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ni("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Ni("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Ni("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Ni("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Ni("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Ni("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Ni("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Ni("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ni("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Ni("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:Ni("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Ni("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:Ni("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float widthA=dash_from.z*fromScale;float widthB=dash_to.z*toScale;float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*(tileZoomRatio/widthA)/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*(tileZoomRatio/widthB)/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Ni("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Ni("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:Ni("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Ni("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:Ni("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Ni("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ni("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ba),skyboxGradient:Ni("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ba),skyboxCapture:Ni("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function Ni(_,t,d){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,E=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),A=_.match(w),B=t.match(w),H=bs.match(w);let Q=B?B.concat(A):A;d||(Os.staticUniforms&&(Q=Os.staticUniforms.concat(Q)),ks.staticUniforms&&(Q=ks.staticUniforms.concat(Q))),Q&&(Q=Q.concat(H));const se={};return{fragmentSource:_=_.replace(y,(de,fe,be,Ie,Re)=>(se[Re]=!0,"define"===fe?`\n#ifndef HAS_UNIFORM_u_${Re}\nvarying ${be} ${Ie} ${Re};\n#else\nuniform ${be} ${Ie} u_${Re};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Re}\n    ${be} ${Ie} ${Re} = u_${Re};\n#endif\n`)),vertexSource:t=t.replace(y,(de,fe,be,Ie,Re)=>{const et="float"===Ie?"vec2":"vec4",Te=Re.match(/color/)?"color":et;return se[Re]?"define"===fe?`\n#ifndef HAS_UNIFORM_u_${Re}\nuniform lowp float u_${Re}_t;\nattribute ${be} ${et} a_${Re};\nvarying ${be} ${Ie} ${Re};\n#else\nuniform ${be} ${Ie} u_${Re};\n#endif\n`:"vec4"===Te?`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${Re} = a_${Re};\n#else\n    ${be} ${Ie} ${Re} = u_${Re};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${Re} = unpack_mix_${Te}(a_${Re}, u_${Re}_t);\n#else\n    ${be} ${Ie} ${Re} = u_${Re};\n#endif\n`:"define"===fe?`\n#ifndef HAS_UNIFORM_u_${Re}\nuniform lowp float u_${Re}_t;\nattribute ${be} ${et} a_${Re};\n#else\nuniform ${be} ${Ie} u_${Re};\n#endif\n`:"vec4"===Te?`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${be} ${Ie} ${Re} = a_${Re};\n#else\n    ${be} ${Ie} ${Re} = u_${Re};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${be} ${Ie} ${Re} = unpack_mix_${Te}(a_${Re}, u_${Re}_t);\n#else\n    ${be} ${Ie} ${Re} = u_${Re};\n#endif\n`}),staticAttributes:E,staticUniforms:Q}}class Qr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,d,y,w,E,A,B,H){this.context=t;let Q=this.boundPaintVertexBuffers.length!==w.length;for(let se=0;!Q&&se<w.length;se++)this.boundPaintVertexBuffers[se]!==w[se]&&(Q=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===y&&!Q&&this.boundIndexBuffer===E&&this.boundVertexOffset===A&&this.boundDynamicVertexBuffer===B&&this.boundDynamicVertexBuffer2===H?(t.bindVertexArrayOES.set(this.vao),B&&B.bind(),E&&E.dynamicDraw&&E.bind(),H&&H.bind()):this.freshBind(d,y,w,E,A,B,H)}freshBind(t,d,y,w,E,A,B){let H;const Q=t.numAttributes,se=this.context,de=se.gl;if(se.extVertexArrayObject)this.vao&&this.destroy(),this.vao=se.extVertexArrayObject.createVertexArrayOES(),se.bindVertexArrayOES.set(this.vao),H=0,this.boundProgram=t,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=w,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=B;else{H=se.currentNumAttributes||0;for(let fe=Q;fe<H;fe++)de.disableVertexAttribArray(fe)}d.enableAttributes(de,t);for(const fe of y)fe.enableAttributes(de,t);A&&A.enableAttributes(de,t),B&&B.enableAttributes(de,t),d.bind(),d.setVertexAttribPointers(de,t,E);for(const fe of y)fe.bind(),fe.setVertexAttribPointers(de,t,E);A&&(A.bind(),A.setVertexAttribPointers(de,t,E)),w&&w.bind(),B&&(B.bind(),B.setVertexAttribPointers(de,t,E)),se.currentNumAttributes=Q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function sa(_,t){const d=Math.pow(2,t.canonical.z),y=t.canonical.y;return[new h.MercatorCoordinate(0,y/d).toLngLat().lat,new h.MercatorCoordinate(0,(y+1)/d).toLngLat().lat]}function Ys(_,t,d,y,w,E,A){const B=_.context,H=B.gl,Q=d.fbo;if(!Q)return;_.prepareDrawTile(t);const se=_.useProgram("hillshade");B.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Q.colorAttachment.get());const de=((fe,be,Ie,Re)=>{const et=Ie.paint.get("hillshade-shadow-color"),Te=Ie.paint.get("hillshade-highlight-color"),Ge=Ie.paint.get("hillshade-accent-color");let it=Ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ie.paint.get("hillshade-illumination-anchor")&&(it-=fe.transform.angle);const ut=!fe.options.moving;return{u_matrix:Re||fe.transform.calculateProjMatrix(be.tileID.toUnwrapped(),ut),u_image:0,u_latrange:sa(0,be.tileID),u_light:[Ie.paint.get("hillshade-exaggeration"),it],u_shadow:et,u_highlight:Te,u_accent:Ge}})(_,d,y,_.terrain?t.projMatrix:null);_.prepareDrawProgram(B,se,t.toUnwrapped()),se.draw(B,H.TRIANGLES,w,E,A,h.CullFaceMode.disabled,de,y.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function $r(_,t,d){if(!t.needsDEMTextureUpload)return;const y=_.context,w=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||_.getTileTexture(d.stride);const E=d.getPixels();t.demTexture?t.demTexture.update(E,{premultiply:!1}):t.demTexture=new h.Texture(y,E,w.RGBA,{premultiply:!1}),t.needsDEMTextureUpload=!1}function ls(_,t,d,y,w,E){const A=_.context,B=A.gl;if(!t.dem)return;const H=t.dem;if(A.activeTexture.set(B.TEXTURE1),$r(_,t,H),!t.demTexture)return;t.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);const Q=H.dim;A.activeTexture.set(B.TEXTURE0);let se=t.fbo;if(!se){const de=new h.Texture(A,{width:Q,height:Q,data:null},B.RGBA);de.bind(B.LINEAR,B.CLAMP_TO_EDGE),se=t.fbo=A.createFramebuffer(Q,Q,!0),se.colorAttachment.set(de.texture)}A.bindFramebuffer.set(se.framebuffer),A.viewport.set([0,0,Q,Q]),_.useProgram("hillshadePrepare").draw(A,B.TRIANGLES,y,w,E,h.CullFaceMode.disabled,((de,fe)=>{const be=fe.stride,Ie=h.create$1();return h.ortho(Ie,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(Ie,Ie,[0,-h.EXTENT,0]),{u_matrix:Ie,u_image:1,u_dimension:[be,be],u_zoom:de.overscaledZ,u_unpack:fe.unpackVector}})(t.tileID,H),d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),t.needsHillshadePrepare=!1}const Fs=(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_image0:new h.Uniform1i(_,t.u_image0),u_skirt_height:new h.Uniform1f(_,t.u_skirt_height)}),Vi=(_,t)=>({u_matrix:_,u_image0:0,u_skirt_height:t}),xa=new class{constructor(){this.operations={}}newMorphing(_,t,d,y,w){if(_ in this.operations){const E=this.operations[_];E.to.tileID.key!==d.tileID.key&&(E.queued=d)}else this.operations[_]={startTime:y,phase:0,duration:w,from:t,to:d,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const t=this.operations[_];return{from:t.from,to:t.to,phase:t.phase}}update(_){for(const t in this.operations){const d=this.operations[t];for(d.phase=(_-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,_)){delete this.operations[t];break}}}_nextOp(_,t){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=t,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Oo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function bl(_,t,d,y,w){const E=_.context,A=E.gl;let B,H;const Q=_.options.showTerrainWireframe?2:0,se=(Re,et)=>{if(H===Re)return;const Te=[Oo[Re]];et&&Te.push(Oo[Q]),B=_.useProgram("terrainRaster",null,Te),H=Re},de=_.colorModeForRenderPass(),fe=new h.DepthMode(A.LEQUAL,h.DepthMode.ReadWrite,_.depthRangeFor3D);xa.update(w);const be=_.transform,Ie=6*Math.pow(1.5,22-be.zoom)*t.exaggeration();(Q?[!1,!0]:[!1]).forEach(Re=>{H=-1;const et=Re?A.LINES:A.TRIANGLES,[Te,Ge]=Re?t.getWirefameBuffer():[t.gridIndexBuffer,t.gridSegments];for(const xt of y){const Ke=d.getTile(xt),Tt=h.StencilMode.disabled,rn=t.prevTerrainTileForTile[xt.key],hn=t.terrainTileForTile[xt.key];ut=hn,null!=(it=rn)&&null!=ut&&it.hasData()&&ut.hasData()&&null!=it.demTexture&&null!=ut.demTexture&&it.tileID.key!==ut.tileID.key&&xa.newMorphing(xt.key,rn,hn,w,250),E.activeTexture.set(A.TEXTURE0),Ke.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST);const at=xa.getMorphValuesForProxy(xt.key),_n=at?1:0;let an;at&&(an={morphing:{srcDemTile:at.from,dstDemTile:at.to,phase:h.easeCubicInOut(at.phase)}});const ai=Vi(xt.projMatrix,Qi(xt.canonical,be.renderWorldCopies)?Ie/10:Ie);se(_n,Re),t.setupElevationDraw(Ke,B,an),_.prepareDrawProgram(E,B,xt.toUnwrapped()),B.draw(E,et,fe,Tt,de,h.CullFaceMode.backCCW,ai,"terrain_raster",t.gridBuffer,Te,Ge)}var it,ut})}function Qi(_,t){const d=1<<_.z;return!t&&(0===_.x||_.x===d-1)||0===_.y||_.y===d-1}const Ls=_=>({u_matrix:_});function fo(_,t,d,y,w){if(w>0){const E=h.exported.now(),A=(E-_.timeAdded)/w,B=t?(E-t.timeAdded)/w:-1,H=d.getSource(),Q=y.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),se=!t||Math.abs(t.tileID.overscaledZ-Q)>Math.abs(_.tileID.overscaledZ-Q),de=se&&_.refreshedUponExpiration?1:h.clamp(se?A:1-B,0,1);return _.refreshedUponExpiration&&A>=1&&(_.refreshedUponExpiration=!1),t?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}class Sr extends h.SourceCache{constructor(t){const d=oe("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new zt(Fe(),null),t.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,d,y){if(t.freezeTileCoverage)return;this.transform=t;const w=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((E,A)=>{if(E[A.key]="",!this._tiles[A.key]){const B=new h.Tile(A,this._source.tileSize*A.overscaleFactor(),t.tileZoom);B.state="loaded",this._tiles[A.key]=B}return E},{});for(const E in this._tiles)E in w||(this.freeFBO(E),this._tiles[E].state="unloaded",delete this._tiles[E])}freeFBO(t){const d=this.proxyCachedFBO[t];if(void 0!==d){const y=Object.values(d);this.renderCachePool.push(...y),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class K extends h.OverscaledTileID{constructor(t,d,y){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=d,this.projMatrix=y}}class ge extends h.Elevation{constructor(t,d){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,w,E]=function(H){const Q=new h.StructArrayLayout4i8,se=new h.StructArrayLayout3ui6;Q.reserve(17161),se.reserve(33800);const fe=h.EXTENT/128,be=h.EXTENT+fe/2,Ie=be+fe;for(let et=-fe;et<Ie;et+=fe)for(let Te=-fe;Te<Ie;Te+=fe){const Ge=Te<0||Te>be||et<0||et>be?24575:0,it=h.clamp(Math.round(Te),0,h.EXTENT),ut=h.clamp(Math.round(et),0,h.EXTENT);Q.emplaceBack(it+Ge,ut,it,ut)}const Re=(et,Te)=>{const Ge=131*Te+et;se.emplaceBack(Ge+1,Ge,Ge+131),se.emplaceBack(Ge+131,Ge+131+1,Ge+1)};for(let et=1;et<129;et++)for(let Te=1;Te<129;Te++)Re(Te,et);return[0,129].forEach(et=>{for(let Te=0;Te<130;Te++)Re(Te,et),Re(et,Te)}),[Q,se,32768]}(),A=t.context;this.gridBuffer=A.createVertexBuffer(y,Rt.members),this.gridIndexBuffer=A.createIndexBuffer(w),this.gridSegments=h.SegmentVector.simpleSegment(0,0,y.length,w.length),this.gridNoSkirtSegments=h.SegmentVector.simpleSegment(0,0,y.length,E),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Sr(d.map),this.orthoMatrix=h.create$1(),h.ortho(this.orthoMatrix,0,h.EXTENT,0,h.EXTENT,0,1);const B=A.gl;this._overlapStencilMode=new h.StencilMode({func:B.GEQUAL,mask:255},0,255,B.KEEP,B.KEEP,B.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(t,d,y){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const w=t.terrain.properties;this.sourceCache=t._getSourceCache(w.get("source")),this._exaggeration=w.get("exaggeration");const E=()=>{this.sourceCache.used&&h.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const A=this.sourceCache.getSource().tileSize/128,B=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(d,A*B,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,E(),this._initializing=!0),E(),d.updateElevation(!y),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&h.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=0===y._centerAltitude&&-1===this.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(y.center),-1),this._emptyDEMTextureDirty=!this._initializing);const w=this.proxyCoords=d.getIds().map(H=>{const Q=d.getTileByID(H).tileID;return Q.projMatrix=y.calculateProjMatrix(Q.toUnwrapped()),Q});(function(H,Q){const se=Q.transform.pointCoordinate(Q.transform.getCameraPoint()),de=new h.pointGeometry(se.x,se.y);H.sort((fe,be)=>{if(be.overscaledZ-fe.overscaledZ)return be.overscaledZ-fe.overscaledZ;const Ie=new h.pointGeometry(fe.canonical.x+(1<<fe.canonical.z)*fe.wrap,fe.canonical.y),Re=new h.pointGeometry(be.canonical.x+(1<<be.canonical.z)*be.wrap,be.canonical.y),et=de.mult(1<<fe.canonical.z);return et.x-=.5,et.y-=.5,et.distSqr(Ie)-et.distSqr(Re)})})(w,this.painter),this._previousZoom=y.zoom;const E=this.proxyToSource||{};this.proxyToSource={},w.forEach(H=>{this.proxyToSource[H.key]={}}),this.terrainTileForTile={};const A=this._style._sourceCaches;for(const H in A){const Q=A[H];if(!Q.used||(Q!==this.sourceCache&&(this._findCoveringTileCache[Q.id]={}),this._setupProxiedCoordsForOrtho(Q,t[H],E),Q.usedForTerrain))continue;const se=t[H];Q.getSource().reparseOverscaled&&this._assignTerrainTiles(se)}this.proxiedCoords[d.id]=w.map(H=>new K(H,H.key,this.orthoMatrix)),this._assignTerrainTiles(w),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(E),this.renderingToTexture=!1,this._updateTimestamp=h.exported.now();const B={};this._visibleDemTiles=[];for(const H of this.proxyCoords){const Q=this.terrainTileForTile[H.key];if(!Q)continue;const se=Q.tileID.key;se in B||(this._visibleDemTiles.push(Q),B[se]=se)}}_assignTerrainTiles(t){this._initializing||t.forEach(d=>{if(this.terrainTileForTile[d.key])return;const y=this._findTileCoveringTileID(d,this.sourceCache);y&&(this.terrainTileForTile[d.key]=y)})}_prepareDEMTextures(){const t=this.painter.context,d=t.gl;for(const y in this.terrainTileForTile){const w=this.terrainTileForTile[y],E=w.dem;!E||w.demTexture&&!w.needsDEMTextureUpload||(t.activeTexture.set(d.TEXTURE1),$r(this.painter,w,E))}}_prepareDemTileUniforms(t,d,y,w){if(!d||null==d.demTexture)return!1;const E=t.tileID.canonical,A=Math.pow(2,d.tileID.canonical.z-E.z),B=w||"";return y[`u_dem_tl${B}`]=[E.x*A%1,E.y*A%1],y[`u_dem_scale${B}`]=A,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const d=this._visibleDemTiles.reduce((y,w)=>{if(!w.dem)return y;const E=w.dem.tree.minimums[0];return E>0&&t++,y+E},0);return t?d/t:0}_updateEmptyDEMTexture(){const t=this.painter.context,d=t.gl;t.activeTexture.set(d.TEXTURE2);const y=this._getLoadedAreaMinimum(),w={width:1,height:1,data:new Uint8Array(h.DEMData.pack(y,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(w,{premultiply:!1}):E=this._emptyDEMTexture=new h.Texture(t,w,d.RGBA,{premultiply:!1}),E}setupElevationDraw(t,d,y){const w=this.painter.context,E=w.gl,A=(B=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:h.DEMData.getUnpackVector(B),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var B;A.u_dem_size=this.sourceCache.getSource().tileSize,A.u_exaggeration=this.exaggeration();let H=null,Q=null,se=1;if(y&&y.morphing&&this._useVertexMorphing){const de=y.morphing.srcDemTile,fe=y.morphing.dstDemTile;se=y.morphing.phase,de&&fe&&(this._prepareDemTileUniforms(t,de,A,"_prev")&&(Q=de),this._prepareDemTileUniforms(t,fe,A)&&(H=fe))}if(Q&&H?(w.activeTexture.set(E.TEXTURE2),H.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST),w.activeTexture.set(E.TEXTURE4),Q.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST),A.u_dem_lerp=se):(H=this.terrainTileForTile[t.tileID.key],w.activeTexture.set(E.TEXTURE2),(this._prepareDemTileUniforms(t,H,A)?H.demTexture:this.emptyDEMTexture).bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST)),y&&y.useDepthForOcclusion&&(w.activeTexture.set(E.TEXTURE3),this._depthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST),A.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),y&&y.useMeterToDem&&H){const de=(1<<H.tileID.canonical.z)*h.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;A.u_meter_to_dem=de}y&&y.labelPlaneMatrixInv&&(A.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),d.setTerrainUniformValues(w,A)}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const d=this.painter,y=this.painter.context,w=this.proxySourceCache,E=this.proxiedCoords[w.id],A=()=>{y.bindFramebuffer.set(null),y.viewport.set([0,0,d.width,d.height]),this.renderingToTexture=!1},B=this._drapedRenderBatches.shift();let H=[];const Q=d.style.order;let se=0;for(let de=0;de<E.length;de++){const fe=E[de],be=w.getTileByID(fe.proxyTileKey),Ie=w.proxyCachedFBO[fe.key]?w.proxyCachedFBO[fe.key][t]:void 0;let Re,et;if(Re=this.currentFBO=void 0!==Ie?w.renderCache[Ie]:this.pool[se++],be.texture=Re.tex,void 0===Ie||Re.dirty){y.bindFramebuffer.set(Re.fb.framebuffer),this.renderedToTile=!1,Re.dirty&&(y.clear({color:h.Color.transparent}),Re.dirty=!1);for(let Te=B.start;Te<=B.end;++Te){const Ge=d.style._layers[Q[Te]];if(Ge.isHidden(d.transform.zoom))continue;const it=d.style._getLayerSourceCache(Ge),ut=it?this.proxyToSource[fe.key][it.id]:[fe];if(!ut)continue;const xt=ut;y.viewport.set([0,0,Re.fb.width,Re.fb.height]),et!==(it?it.id:null)&&(this._setupStencil(ut,Ge,it),et=it?it.id:null),d.renderLayer(d,it,Ge,xt)}Re.dirty=this.renderedToTile,this.renderedToTile&&H.push(be.tileID),5===se&&(se=0,H.length>0&&(A(),bl(d,this,w,H,this._updateTimestamp),this.renderingToTexture=!0,H=[]))}else H.push(be.tileID)}return A(),H.length>0&&bl(d,this,w,H,this._updateTimestamp),B.end+1}postRender(){}renderCacheEfficiency(t){const d=t.order.length;if(0===d)return{efficiency:100};let y,w=0,E=0,A=!1;for(let B=0;B<d;++B){const H=t._layers[t.order[B]];this._style.isLayerDraped(H)?(A&&++w,++E):A||(A=!0,y=H.id)}return 0===E?{efficiency:100}:{efficiency:100*(1-w/E),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{t=Math.min(t,d.dem.tree.minimums[0])}),0===t?t:(t-30)*this._exaggeration}raycast(t,d,y){if(!this._visibleDemTiles)return null;const w=this._visibleDemTiles.filter(E=>E.dem).map(E=>{const A=E.tileID,B=Math.pow(2,A.overscaledZ),{x:H,y:Q}=A.canonical,se=H/B,de=(H+1)/B,fe=Q/B,be=(Q+1)/B;return{minx:se,miny:fe,maxx:de,maxy:be,t:E.dem.tree.raycastRoot(se,fe,de,be,t,d,y),tile:E}});w.sort((E,A)=>(null!==E.t?E.t:Number.MAX_VALUE)-(null!==A.t?A.t:Number.MAX_VALUE));for(const E of w){if(null==E.t)return null;const A=E.tile.dem.tree.raycast(E.minx,E.miny,E.maxx,E.maxy,t,d,y);if(null!=A)return A}return null}_createFBO(){const t=this.painter.context,d=t.gl,y=this.drapeBufferSize;t.activeTexture.set(d.TEXTURE0);const w=new h.Texture(t,{width:y[0],height:y[1],data:null},d.RGBA);w.bind(d.LINEAR,d.CLAMP_TO_EDGE);const E=t.createFramebuffer(y[0],y[1],!1);return E.colorAttachment.set(w.texture),E.depthAttachment=new lt(t,E.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,E.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):E.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:E,tex:w,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some(t=>{const d=this._style._layers[t],y=d.isHidden(this.painter.transform.zoom),w=d.getCrossfadeParameters(),E=!!w&&1!==w.t,A=d.hasTransition();return"custom"!==d.type&&!y&&(E||A)})}_clearRasterFadeFromRenderCache(){let t=!1;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d]._source instanceof Be){t=!0;break}if(t)for(let d=0;d<this._style.order.length;++d){const y=this._style._layers[this._style.order[d]],w=y.isHidden(this.painter.transform.zoom),E=this._style._getLayerSourceCache(y);if("raster"!==y.type||w||!E)continue;const A=y.paint.get("raster-fade-duration");for(const B of this.proxyCoords){const H=this.proxyToSource[B.key][E.id];if(H)for(const Q of H){const se=fo(E.getTile(Q),E.findLoadedParent(Q,0),E,this.painter.transform,A);(1!==se.opacity||0!==se.mix)&&this._clearRenderCacheForTile(E.id,Q)}}}}_setupDrapedRenderBatches(){const t=this._style.order,d=t.length;if(0===d)return;const y=[];let w,E=0,A=this._style._layers[t[E]];for(;!this._style.isLayerDraped(A)&&A.isHidden(this.painter.transform.zoom)&&++E<d;)A=this._style._layers[t[E]];for(;E<d;++E){const B=this._style._layers[t[E]];B.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(B)?void 0===w&&(w=E):void 0!==w&&(y.push({start:w,end:E-1}),w=void 0))}void 0!==w&&y.push({start:w,end:E-1}),this._drapedRenderBatches=y}_setupRenderCache(t){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const E=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let A=0;A<E.length;++A){const B=Object.values(E[A]);d.renderCachePool.push(...B)}}return}this._clearRasterFadeFromRenderCache();const y=this.proxyCoords,w=this._tilesDirty;for(let E=y.length-1;E>=0;E--){const A=y[E];if(d.getTileByID(A.key),void 0!==d.proxyCachedFBO[A.key]){const B=t[A.key],H=this.proxyToSource[A.key];let Q=0;for(const se in H){const de=H[se],fe=B[se];if(!fe||fe.length!==de.length||de.some((be,Ie)=>be!==fe[Ie]||w[se]&&w[se].hasOwnProperty(be.key))){Q=-1;break}++Q}for(const se in d.proxyCachedFBO[A.key])d.renderCache[d.proxyCachedFBO[A.key][se]].dirty=Q<0||Q!==Object.values(B).length}else for(let B=0;B<this._drapedRenderBatches.length;++B){const H=this._drapedRenderBatches[B];let Q=d.renderCachePool.pop();void 0===Q&&d.renderCache.length<50&&(Q=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==Q&&(void 0===d.proxyCachedFBO[A.key]&&(d.proxyCachedFBO[A.key]={}),d.proxyCachedFBO[A.key][H.start]=Q,d.renderCache[Q].dirty=!0)}}this._tilesDirty={}}_setupStencil(t,d,y){if(!y||!this._sourceTilesOverlap[y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,E=w.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let A;if(d.isTileClipped())A=t.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,d.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):h.StencilMode.disabled}_renderTileClippingMasks(t,d){const y=this.painter,w=this.painter.context,E=w.gl;y._tileClippingMaskIDs={},w.setColorMode(h.ColorMode.disabled),w.setDepthMode(h.DepthMode.disabled);const A=y.useProgram("clippingMask");for(const B of t){const H=y._tileClippingMaskIDs[B.key]=--d;A.draw(w,E.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:E.ALWAYS,mask:0},H,255,E.KEEP,E.KEEP,E.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,Ls(B.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(t){const d=this.painter.transform;if(t.x<0||t.x>d.width||t.y<0||t.y>d.height)return null;const y=[t.x,t.y,1,1];h.transformMat4(y,y,d.pixelMatrixInverse),h.scale$2(y,y,1/y[3]),y[0]/=d.worldSize,y[1]/=d.worldSize;const w=d._camera.position,E=h.mercatorZfromAltitude(1,d.center.lat),A=[w[0],w[1],w[2]/E,0],B=h.subtract([],y.slice(0,3),A);h.normalize(B,B);const H=this.raycast(A,B,this._exaggeration);return null!==H&&H?(h.scaleAndAdd(A,A,B,H),A[3]=A[2],A[2]*=E,A):null}drawDepth(){const t=this.painter,d=t.context,y=this.proxySourceCache,w=Math.ceil(t.width),E=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===w&&this._depthFBO.height===E||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const A=d.gl,B=d.createFramebuffer(w,E,!0);d.activeTexture.set(A.TEXTURE0);const H=new h.Texture(d,{width:w,height:E,data:null},A.RGBA);H.bind(A.NEAREST,A.CLAMP_TO_EDGE),B.colorAttachment.set(H.texture);const Q=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,w,E);B.depthAttachment.set(Q),this._depthFBO=B,this._depthTexture=H}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,w,E]),function(A,B,H,Q){const se=A.context,de=se.gl;se.clear({depth:1});const fe=A.useProgram("terrainDepth"),be=new h.DepthMode(de.LESS,h.DepthMode.ReadWrite,A.depthRangeFor3D);for(const Ie of Q){const Re=H.getTile(Ie),et=Vi(Ie.projMatrix,0);B.setupElevationDraw(Re,fe),fe.draw(se,de.TRIANGLES,be,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.backCCW,et,"terrain_depth",B.gridBuffer,B.gridIndexBuffer,B.gridNoSkirtSegments)}}(t,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,d,y){if(t.getSource()instanceof he)return this._setupProxiedCoordsForImageSource(t,d,y);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const w=this.proxiedCoords[t.id]=[],E=this.proxyCoords;for(let B=0;B<E.length;B++){const H=E[B],Q=this._findTileCoveringTileID(H,t);if(Q){const se=this._createProxiedId(H,Q,y[H.key]&&y[H.key][t.id]);w.push(se),this.proxyToSource[H.key][t.id]=[se]}}let A=!1;for(let B=0;B<d.length;B++){const H=t.getTile(d[B]);if(!H||!H.hasData())continue;const Q=this._findTileCoveringTileID(H.tileID,this.proxySourceCache);if(Q&&Q.tileID.canonical.z!==H.tileID.canonical.z){const se=this.proxyToSource[Q.tileID.key][t.id],de=this._createProxiedId(Q.tileID,H,y[Q.tileID.key]&&y[Q.tileID.key][t.id]);se?se.splice(se.length-1,0,de):this.proxyToSource[Q.tileID.key][t.id]=[de],w.push(de),A=!0}}this._sourceTilesOverlap[t.id]=A}_setupProxiedCoordsForImageSource(t,d,y){if(!t.getSource().loaded())return;const w=this.proxiedCoords[t.id]=[],E=this.proxyCoords,A=t.getSource(),B=new h.pointGeometry(A.tileID.x,A.tileID.y)._div(1<<A.tileID.z),H=A.coordinates.map(h.MercatorCoordinate.fromLngLat).reduce((se,de)=>(se.min.x=Math.min(se.min.x,de.x-B.x),se.min.y=Math.min(se.min.y,de.y-B.y),se.max.x=Math.max(se.max.x,de.x-B.x),se.max.y=Math.max(se.max.y,de.y-B.y),se),{min:new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new h.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Q=(se,de)=>{const fe=se.wrap+se.canonical.x/(1<<se.canonical.z),be=se.canonical.y/(1<<se.canonical.z),Ie=h.EXTENT/(1<<se.canonical.z),Re=de.wrap+de.canonical.x/(1<<de.canonical.z),et=de.canonical.y/(1<<de.canonical.z);return fe+Ie<Re+H.min.x||fe>Re+H.max.x||be+Ie<et+H.min.y||be>et+H.max.y};for(let se=0;se<E.length;se++){const de=E[se];for(let fe=0;fe<d.length;fe++){const be=t.getTile(d[fe]);if(!be||!be.hasData()||Q(de,be.tileID))continue;const Ie=this._createProxiedId(de,be,y[de.key]&&y[de.key][t.id]),Re=this.proxyToSource[de.key][t.id];Re?Re.push(Ie):this.proxyToSource[de.key][t.id]=[Ie],w.push(Ie)}}}_createProxiedId(t,d,y){let w=this.orthoMatrix;if(y){const E=y.find(A=>A.key===d.tileID.key);if(E)return E}if(d.tileID.key!==t.key){const E=t.canonical.z-d.tileID.canonical.z;let A,B,H;w=h.create$1();const Q=d.tileID.wrap-t.wrap<<t.overscaledZ;E>0?(A=h.EXTENT>>E,B=A*((d.tileID.canonical.x<<E)-t.canonical.x+Q),H=A*((d.tileID.canonical.y<<E)-t.canonical.y)):(A=h.EXTENT<<-E,B=h.EXTENT*(d.tileID.canonical.x-(t.canonical.x+Q<<-E)),H=h.EXTENT*(d.tileID.canonical.y-(t.canonical.y<<-E))),h.ortho(w,0,A,0,A,0,1),h.translate(w,w,[B,H,0])}return new K(d.tileID,t.key,w)}_findTileCoveringTileID(t,d){let y=d.getTile(t);if(y&&y.hasData())return y;const w=this._findCoveringTileCache[d.id],E=w[t.key];if(y=E?d.getTileByID(E):null,y&&y.hasData()||null===E)return y;let A=y?y.tileID:t,B=A.overscaledZ;const H=d.getSource().minzoom,Q=[];if(!E){const de=d.getSource().maxzoom;if(t.canonical.z>=de){const fe=t.canonical.z-de;d.getSource().reparseOverscaled?(B=Math.max(t.canonical.z+2,d.transform.tileZoom),A=new h.OverscaledTileID(B,t.wrap,de,t.canonical.x>>fe,t.canonical.y>>fe)):0!==fe&&(B=de,A=new h.OverscaledTileID(B,t.wrap,de,t.canonical.x>>fe,t.canonical.y>>fe))}A.key!==t.key&&(Q.push(A.key),y=d.getTile(A))}const se=de=>{Q.forEach(fe=>{w[fe]=de}),Q.length=0};for(B-=1;B>=H&&(!y||!y.hasData());B--){y&&se(y.tileID.key);const de=A.calculateScaledKey(B);if(y=d.getTileByID(de),y&&y.hasData())break;const fe=w[de];if(null===fe)break;void 0===fe?Q.push(de):y=d.getTileByID(fe)}return se(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(t,d){let y=this._tilesDirty[t];y||(y=this._tilesDirty[t]={}),y[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(d){let y,w,E;const A=new h.StructArrayLayout2ui4,B=131;for(w=1;w<129;w++){for(y=1;y<129;y++)E=w*B+y,A.emplaceBack(E,E+1),A.emplaceBack(E,E+B),A.emplaceBack(E+1,E+B),128===w&&A.emplaceBack(E+B,E+B+1);A.emplaceBack(E+1,E+1+B)}return A}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=h.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function X(_){const t=[];for(let d=0;d<_.length;d++){if(null===_[d])continue;const y=_[d].split(" ");t.push(y.pop())}return t}class xe{static cacheKey(t,d,y){let w=`${t}${y?y.cacheKey:""}`;for(const E of d)w+=`/${E}`;return w}constructor(t,d,y,w,E,A){const B=t.gl;this.program=B.createProgram();const H=X(y.staticAttributes),Q=w?w.getBinderAttributes():[],se=H.concat(Q),de=y.staticUniforms?X(y.staticUniforms):[],fe=w?w.getBinderUniforms():[],be=de.concat(fe),Ie=[];for(const xt of be)Ie.indexOf(xt)<0&&Ie.push(xt);let Re=w?w.defines():[];Re=Re.concat(A.map(xt=>`#define ${xt}`));const et=Re.concat(Ja.fragmentSource,qs,ks.fragmentSource,y.fragmentSource).join("\n"),Te=Re.concat(Ja.vertexSource,qs,ks.vertexSource,Os.vertexSource,y.vertexSource).join("\n"),Ge=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(Ge,et),B.compileShader(Ge),B.attachShader(this.program,Ge);const it=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(it,Te),B.compileShader(it),B.attachShader(this.program,it),this.attributes={};const ut={};this.numAttributes=se.length;for(let xt=0;xt<this.numAttributes;xt++)se[xt]&&(B.bindAttribLocation(this.program,xt,se[xt]),this.attributes[se[xt]]=xt);B.linkProgram(this.program),B.deleteShader(it),B.deleteShader(Ge);for(let xt=0;xt<Ie.length;xt++){const Ke=Ie[xt];if(Ke&&!ut[Ke]){const Tt=B.getUniformLocation(this.program,Ke);Tt&&(ut[Ke]=Tt)}}var xt,Ke;this.fixedUniforms=E(t,ut),this.binderUniforms=w?w.getUniforms(t,ut):[],-1!==A.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new h.Uniform1i(xt=t,(Ke=ut).u_dem),u_dem_prev:new h.Uniform1i(xt,Ke.u_dem_prev),u_dem_unpack:new h.Uniform4f(xt,Ke.u_dem_unpack),u_dem_tl:new h.Uniform2f(xt,Ke.u_dem_tl),u_dem_scale:new h.Uniform1f(xt,Ke.u_dem_scale),u_dem_tl_prev:new h.Uniform2f(xt,Ke.u_dem_tl_prev),u_dem_scale_prev:new h.Uniform1f(xt,Ke.u_dem_scale_prev),u_dem_size:new h.Uniform1f(xt,Ke.u_dem_size),u_dem_lerp:new h.Uniform1f(xt,Ke.u_dem_lerp),u_exaggeration:new h.Uniform1f(xt,Ke.u_exaggeration),u_depth:new h.Uniform1i(xt,Ke.u_depth),u_depth_size_inv:new h.Uniform2f(xt,Ke.u_depth_size_inv),u_meter_to_dem:new h.Uniform1f(xt,Ke.u_meter_to_dem),u_label_plane_matrix_inv:new h.UniformMatrix4f(xt,Ke.u_label_plane_matrix_inv)}),-1!==A.indexOf("FOG")&&(this.fogUniforms=((xt,Ke)=>({u_fog_matrix:new h.UniformMatrix4f(xt,Ke.u_fog_matrix),u_fog_range:new h.Uniform2f(xt,Ke.u_fog_range),u_fog_color:new h.Uniform4f(xt,Ke.u_fog_color),u_fog_horizon_blend:new h.Uniform1f(xt,Ke.u_fog_horizon_blend),u_fog_temporal_offset:new h.Uniform1f(xt,Ke.u_fog_temporal_offset)}))(t,ut))}setTerrainUniformValues(t,d){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const w in d)y[w].set(d[w])}}setFogUniformValues(t,d){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const w in d)y[w].location&&y[w].set(d[w])}}draw(t,d,y,w,E,A,B,H,Q,se,de,fe,be,Ie,Re,et){const Te=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(y),t.setStencilMode(w),t.setColorMode(E),t.setCullFace(A);for(const it in this.fixedUniforms)this.fixedUniforms[it].set(B[it]);Ie&&Ie.setUniforms(t,this.binderUniforms,fe,{zoom:be});const Ge={[Te.LINES]:2,[Te.TRIANGLES]:3,[Te.LINE_STRIP]:1}[d];for(const it of de.get()){const ut=it.vaos||(it.vaos={});(ut[H]||(ut[H]=new Qr)).bind(t,this,Q,Ie?Ie.getPaintVertexBuffers():[],se,it.vertexOffset,Re,et),Te.drawElements(d,it.primitiveLength*Ge,Te.UNSIGNED_SHORT,it.primitiveOffset*Ge*2)}}}function pt(_,t,d){const y=1/Jt(d,1,t.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),E=d.tileSize*Math.pow(2,t.transform.tileZoom)/w,A=E*(d.tileID.canonical.x+d.tileID.wrap*w),B=E*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[y,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[A>>16,B>>16],u_pixel_coord_lower:[65535&A,65535&B]}}const Yt=(_,t,d,y)=>{const w=t.style.light,E=w.properties.get("position"),A=[E.x,E.y,E.z],B=h.create$2();"viewport"===w.properties.get("anchor")&&(h.fromRotation(B,-t.transform.angle),h.transformMat3(A,A,B));const H=w.properties.get("color");return{u_matrix:_,u_lightpos:A,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+d,u_opacity:y}},gn=(_,t,d,y,w,E,A)=>h.extend(Yt(_,t,d,y),pt(E,t,A),{u_height_factor:-Math.pow(2,w.overscaledZ)/A.tileSize/8}),Hn=_=>({u_matrix:_}),ar=(_,t,d,y)=>h.extend(Hn(_),pt(d,t,y)),er=(_,t)=>({u_matrix:_,u_world:t}),lr=(_,t,d,y,w)=>h.extend(ar(_,t,d,y),{u_world:w}),di=(_,t,d,y)=>{const w=_.transform;let E;if("map"===y.paint.get("circle-pitch-alignment")){const A=Jt(d,1,w.zoom);E=[A,A]}else E=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_matrix:_.translatePosMatrix(t.projMatrix,d,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_device_pixel_ratio:h.exported.devicePixelRatio,u_extrude_scale:E}},tr=_=>{const t=[];return"map"===_.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===_.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Ui=(_,t,d)=>{const y=h.EXTENT/d.tileSize;return{u_matrix:_,u_camera_to_center_distance:t.cameraToCenterDistance,u_extrude_scale:[t.pixelsToGLUnits[0]/y,t.pixelsToGLUnits[1]/y]}},ti=(_,t,d=1)=>({u_matrix:_,u_color:t,u_overlay:0,u_overlay_scale:d}),es=(_,t,d,y)=>({u_matrix:_,u_extrude_scale:Jt(t,1,d),u_intensity:y}),Go=(_,t,d,y)=>{const w=_.transform;return{u_matrix:el(_,t,d,y),u_ratio:1/Jt(t,1,w.zoom),u_device_pixel_ratio:h.exported.devicePixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},aa=(_,t,d,y,w)=>h.extend(Go(_,t,d,y),{u_image:0,u_image_height:w}),Bs=(_,t,d,y,w)=>{const E=_.transform,A=Ks(t,E);return{u_matrix:el(_,t,d,w),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Jt(t,1,E.zoom),u_device_pixel_ratio:h.exported.devicePixelRatio,u_image:0,u_scale:[A,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},la=(_,t,d,y,w)=>{const E=Ks(t,_.transform);return h.extend(Go(_,t,d,w),{u_texsize:t.lineAtlasTexture.size,u_scale:[E,y.fromScale,y.toScale],u_image:0,u_mix:y.t})};function Ks(_,t){return 1/Jt(_,1,t.tileZoom)}function el(_,t,d,y){return _.translatePosMatrix(y||t.tileID.projMatrix,t,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const te=(_,t,d,y,w)=>{return{u_matrix:_,u_tl_parent:t,u_scale_parent:d,u_buffer_scale:1,u_fade_t:y.mix,u_opacity:y.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(A=w.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(E=w.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:N(w.paint.get("raster-hue-rotate"))};var E,A};function N(_){_*=Math.PI/180;const t=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*t-d+1)/3,(Math.sqrt(3)*t-d+1)/3]}const G=(_,t,d,y,w,E,A,B,H,Q)=>{const se=w.transform;return{u_is_size_zoom_constant:+("constant"===_||"source"===_),u_is_size_feature_constant:+("constant"===_||"camera"===_),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:se.width/se.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:A,u_coord_matrix:B,u_is_text:+H,u_pitch_with_map:+y,u_texsize:Q,u_texture:0}},Ee=(_,t,d,y,w,E,A,B,H,Q,se)=>{const{cameraToCenterDistance:de,_pitch:fe}=w.transform;return h.extend(G(_,t,d,y,w,E,A,B,H,Q),{u_gamma_scale:y?de*Math.cos(w.terrain?0:fe):1,u_device_pixel_ratio:h.exported.devicePixelRatio,u_is_halo:+se})},kt=(_,t,d,y,w,E,A,B,H,Q)=>h.extend(Ee(_,t,d,y,w,E,A,B,!0,H,!0),{u_texsize_icon:Q,u_texture_icon:1}),Wn=(_,t,d)=>({u_matrix:_,u_opacity:t,u_color:d}),Zr=(_,t,d,y,w,E)=>h.extend(function(A,B,H,Q){const se=H.imageManager.getPattern(A.from.toString()),de=H.imageManager.getPattern(A.to.toString()),{width:fe,height:be}=H.imageManager.getPixelSize(),Ie=Math.pow(2,Q.tileID.overscaledZ),Re=Q.tileSize*Math.pow(2,H.transform.tileZoom)/Ie,et=Re*(Q.tileID.canonical.x+Q.tileID.wrap*Ie),Te=Re*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:de.tl,u_pattern_br_b:de.br,u_texsize:[fe,be],u_mix:B.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:de.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/Jt(Q,1,H.transform.tileZoom),u_pixel_coord_upper:[et>>16,Te>>16],u_pixel_coord_lower:[65535&et,65535&Te]}}(y,E,d,w),{u_matrix:_,u_opacity:t}),Do={fillExtrusion:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_lightpos:new h.Uniform3f(_,t.u_lightpos),u_lightintensity:new h.Uniform1f(_,t.u_lightintensity),u_lightcolor:new h.Uniform3f(_,t.u_lightcolor),u_vertical_gradient:new h.Uniform1f(_,t.u_vertical_gradient),u_opacity:new h.Uniform1f(_,t.u_opacity)}),fillExtrusionPattern:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_lightpos:new h.Uniform3f(_,t.u_lightpos),u_lightintensity:new h.Uniform1f(_,t.u_lightintensity),u_lightcolor:new h.Uniform3f(_,t.u_lightcolor),u_vertical_gradient:new h.Uniform1f(_,t.u_vertical_gradient),u_height_factor:new h.Uniform1f(_,t.u_height_factor),u_image:new h.Uniform1i(_,t.u_image),u_texsize:new h.Uniform2f(_,t.u_texsize),u_pixel_coord_upper:new h.Uniform2f(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(_,t.u_pixel_coord_lower),u_scale:new h.Uniform3f(_,t.u_scale),u_fade:new h.Uniform1f(_,t.u_fade),u_opacity:new h.Uniform1f(_,t.u_opacity)}),fill:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix)}),fillPattern:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_image:new h.Uniform1i(_,t.u_image),u_texsize:new h.Uniform2f(_,t.u_texsize),u_pixel_coord_upper:new h.Uniform2f(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(_,t.u_pixel_coord_lower),u_scale:new h.Uniform3f(_,t.u_scale),u_fade:new h.Uniform1f(_,t.u_fade)}),fillOutline:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_world:new h.Uniform2f(_,t.u_world)}),fillOutlinePattern:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_world:new h.Uniform2f(_,t.u_world),u_image:new h.Uniform1i(_,t.u_image),u_texsize:new h.Uniform2f(_,t.u_texsize),u_pixel_coord_upper:new h.Uniform2f(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(_,t.u_pixel_coord_lower),u_scale:new h.Uniform3f(_,t.u_scale),u_fade:new h.Uniform1f(_,t.u_fade)}),circle:(_,t)=>({u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_extrude_scale:new h.Uniform2f(_,t.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(_,t.u_matrix)}),collisionBox:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_extrude_scale:new h.Uniform2f(_,t.u_extrude_scale)}),collisionCircle:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_inv_matrix:new h.UniformMatrix4f(_,t.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(_,t.u_viewport_size)}),debug:(_,t)=>({u_color:new h.UniformColor(_,t.u_color),u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_overlay:new h.Uniform1i(_,t.u_overlay),u_overlay_scale:new h.Uniform1f(_,t.u_overlay_scale)}),clippingMask:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix)}),heatmap:(_,t)=>({u_extrude_scale:new h.Uniform1f(_,t.u_extrude_scale),u_intensity:new h.Uniform1f(_,t.u_intensity),u_matrix:new h.UniformMatrix4f(_,t.u_matrix)}),heatmapTexture:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_world:new h.Uniform2f(_,t.u_world),u_image:new h.Uniform1i(_,t.u_image),u_color_ramp:new h.Uniform1i(_,t.u_color_ramp),u_opacity:new h.Uniform1f(_,t.u_opacity)}),hillshade:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_image:new h.Uniform1i(_,t.u_image),u_latrange:new h.Uniform2f(_,t.u_latrange),u_light:new h.Uniform2f(_,t.u_light),u_shadow:new h.UniformColor(_,t.u_shadow),u_highlight:new h.UniformColor(_,t.u_highlight),u_accent:new h.UniformColor(_,t.u_accent)}),hillshadePrepare:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_image:new h.Uniform1i(_,t.u_image),u_dimension:new h.Uniform2f(_,t.u_dimension),u_zoom:new h.Uniform1f(_,t.u_zoom),u_unpack:new h.Uniform4f(_,t.u_unpack)}),line:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_ratio:new h.Uniform1f(_,t.u_ratio),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(_,t.u_units_to_pixels)}),lineGradient:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_ratio:new h.Uniform1f(_,t.u_ratio),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(_,t.u_units_to_pixels),u_image:new h.Uniform1i(_,t.u_image),u_image_height:new h.Uniform1f(_,t.u_image_height)}),linePattern:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_texsize:new h.Uniform2f(_,t.u_texsize),u_ratio:new h.Uniform1f(_,t.u_ratio),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_image:new h.Uniform1i(_,t.u_image),u_units_to_pixels:new h.Uniform2f(_,t.u_units_to_pixels),u_scale:new h.Uniform3f(_,t.u_scale),u_fade:new h.Uniform1f(_,t.u_fade)}),lineSDF:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_texsize:new h.Uniform2f(_,t.u_texsize),u_ratio:new h.Uniform1f(_,t.u_ratio),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(_,t.u_units_to_pixels),u_image:new h.Uniform1i(_,t.u_image),u_scale:new h.Uniform3f(_,t.u_scale),u_mix:new h.Uniform1f(_,t.u_mix)}),raster:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_tl_parent:new h.Uniform2f(_,t.u_tl_parent),u_scale_parent:new h.Uniform1f(_,t.u_scale_parent),u_buffer_scale:new h.Uniform1f(_,t.u_buffer_scale),u_fade_t:new h.Uniform1f(_,t.u_fade_t),u_opacity:new h.Uniform1f(_,t.u_opacity),u_image0:new h.Uniform1i(_,t.u_image0),u_image1:new h.Uniform1i(_,t.u_image1),u_brightness_low:new h.Uniform1f(_,t.u_brightness_low),u_brightness_high:new h.Uniform1f(_,t.u_brightness_high),u_saturation_factor:new h.Uniform1f(_,t.u_saturation_factor),u_contrast_factor:new h.Uniform1f(_,t.u_contrast_factor),u_spin_weights:new h.Uniform3f(_,t.u_spin_weights)}),symbolIcon:(_,t)=>({u_is_size_zoom_constant:new h.Uniform1i(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(_,t.u_is_size_feature_constant),u_size_t:new h.Uniform1f(_,t.u_size_t),u_size:new h.Uniform1f(_,t.u_size),u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_pitch:new h.Uniform1f(_,t.u_pitch),u_rotate_symbol:new h.Uniform1i(_,t.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(_,t.u_aspect_ratio),u_fade_change:new h.Uniform1f(_,t.u_fade_change),u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(_,t.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(_,t.u_coord_matrix),u_is_text:new h.Uniform1i(_,t.u_is_text),u_pitch_with_map:new h.Uniform1i(_,t.u_pitch_with_map),u_texsize:new h.Uniform2f(_,t.u_texsize),u_texture:new h.Uniform1i(_,t.u_texture)}),symbolSDF:(_,t)=>({u_is_size_zoom_constant:new h.Uniform1i(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(_,t.u_is_size_feature_constant),u_size_t:new h.Uniform1f(_,t.u_size_t),u_size:new h.Uniform1f(_,t.u_size),u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_pitch:new h.Uniform1f(_,t.u_pitch),u_rotate_symbol:new h.Uniform1i(_,t.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(_,t.u_aspect_ratio),u_fade_change:new h.Uniform1f(_,t.u_fade_change),u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(_,t.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(_,t.u_coord_matrix),u_is_text:new h.Uniform1i(_,t.u_is_text),u_pitch_with_map:new h.Uniform1i(_,t.u_pitch_with_map),u_texsize:new h.Uniform2f(_,t.u_texsize),u_texture:new h.Uniform1i(_,t.u_texture),u_gamma_scale:new h.Uniform1f(_,t.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(_,t.u_is_halo)}),symbolTextAndIcon:(_,t)=>({u_is_size_zoom_constant:new h.Uniform1i(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(_,t.u_is_size_feature_constant),u_size_t:new h.Uniform1f(_,t.u_size_t),u_size:new h.Uniform1f(_,t.u_size),u_camera_to_center_distance:new h.Uniform1f(_,t.u_camera_to_center_distance),u_pitch:new h.Uniform1f(_,t.u_pitch),u_rotate_symbol:new h.Uniform1i(_,t.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(_,t.u_aspect_ratio),u_fade_change:new h.Uniform1f(_,t.u_fade_change),u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(_,t.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(_,t.u_coord_matrix),u_is_text:new h.Uniform1i(_,t.u_is_text),u_pitch_with_map:new h.Uniform1i(_,t.u_pitch_with_map),u_texsize:new h.Uniform2f(_,t.u_texsize),u_texsize_icon:new h.Uniform2f(_,t.u_texsize_icon),u_texture:new h.Uniform1i(_,t.u_texture),u_texture_icon:new h.Uniform1i(_,t.u_texture_icon),u_gamma_scale:new h.Uniform1f(_,t.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(_,t.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(_,t.u_is_halo)}),background:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_opacity:new h.Uniform1f(_,t.u_opacity),u_color:new h.UniformColor(_,t.u_color)}),backgroundPattern:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_opacity:new h.Uniform1f(_,t.u_opacity),u_image:new h.Uniform1i(_,t.u_image),u_pattern_tl_a:new h.Uniform2f(_,t.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(_,t.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(_,t.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(_,t.u_pattern_br_b),u_texsize:new h.Uniform2f(_,t.u_texsize),u_mix:new h.Uniform1f(_,t.u_mix),u_pattern_size_a:new h.Uniform2f(_,t.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(_,t.u_pattern_size_b),u_scale_a:new h.Uniform1f(_,t.u_scale_a),u_scale_b:new h.Uniform1f(_,t.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(_,t.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(_,t.u_tile_units_to_pixels)}),terrainRaster:Fs,terrainDepth:Fs,skybox:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_sun_direction:new h.Uniform3f(_,t.u_sun_direction),u_cubemap:new h.Uniform1i(_,t.u_cubemap),u_opacity:new h.Uniform1f(_,t.u_opacity),u_temporal_offset:new h.Uniform1f(_,t.u_temporal_offset)}),skyboxGradient:(_,t)=>({u_matrix:new h.UniformMatrix4f(_,t.u_matrix),u_color_ramp:new h.Uniform1i(_,t.u_color_ramp),u_center_direction:new h.Uniform3f(_,t.u_center_direction),u_radius:new h.Uniform1f(_,t.u_radius),u_opacity:new h.Uniform1f(_,t.u_opacity),u_temporal_offset:new h.Uniform1f(_,t.u_temporal_offset)}),skyboxCapture:(_,t)=>({u_matrix_3f:new h.UniformMatrix3f(_,t.u_matrix_3f),u_sun_direction:new h.Uniform3f(_,t.u_sun_direction),u_sun_intensity:new h.Uniform1f(_,t.u_sun_intensity),u_color_tint_r:new h.Uniform4f(_,t.u_color_tint_r),u_color_tint_m:new h.Uniform4f(_,t.u_color_tint_m),u_luminance:new h.Uniform1f(_,t.u_luminance)})};let ro;function xs(_,t,d,y,w,E,A){const B=_.context,H=B.gl,Q=_.useProgram("collisionBox"),se=[];let de=0,fe=0;for(let it=0;it<y.length;it++){const ut=y[it],xt=t.getTile(ut),Ke=xt.getBucket(d);if(!Ke)continue;let Tt=ut.projMatrix;0===w[0]&&0===w[1]||(Tt=_.translatePosMatrix(ut.projMatrix,xt,w,E));const rn=A?Ke.textCollisionBox:Ke.iconCollisionBox,hn=Ke.collisionCircleArray;if(hn.length>0){const at=h.create$1(),_n=Tt;h.mul$1(at,Ke.placementInvProjMatrix,_.transform.glCoordMatrix),h.mul$1(at,at,Ke.placementViewportMatrix),se.push({circleArray:hn,circleOffset:fe,transform:_n,invTransform:at}),de+=hn.length/4,fe=de}rn&&(_.terrain&&_.terrain.setupElevationDraw(xt,Q),Q.draw(B,H.LINES,h.DepthMode.disabled,h.StencilMode.disabled,_.colorModeForRenderPass(),h.CullFaceMode.disabled,Ui(Tt,_.transform,xt),d.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,null,_.transform.zoom,null,rn.collisionVertexBuffer,rn.collisionVertexBufferExt))}if(!A||!se.length)return;const be=_.useProgram("collisionCircle"),Ie=new h.StructArrayLayout2f1f2i16;Ie.resize(4*de),Ie._trim();let Re=0;for(const it of se)for(let ut=0;ut<it.circleArray.length/4;ut++){const xt=4*ut,Ke=it.circleArray[xt+0],Tt=it.circleArray[xt+1],rn=it.circleArray[xt+2],hn=it.circleArray[xt+3];Ie.emplace(Re++,Ke,Tt,rn,hn,0),Ie.emplace(Re++,Ke,Tt,rn,hn,1),Ie.emplace(Re++,Ke,Tt,rn,hn,2),Ie.emplace(Re++,Ke,Tt,rn,hn,3)}(!ro||ro.length<2*de)&&(ro=function(it){const ut=2*it,xt=new h.StructArrayLayout3ui6;xt.resize(ut),xt._trim();for(let Ke=0;Ke<ut;Ke++){const Tt=6*Ke;xt.uint16[Tt+0]=4*Ke+0,xt.uint16[Tt+1]=4*Ke+1,xt.uint16[Tt+2]=4*Ke+2,xt.uint16[Tt+3]=4*Ke+2,xt.uint16[Tt+4]=4*Ke+3,xt.uint16[Tt+5]=4*Ke+0}return xt}(de));const et=B.createIndexBuffer(ro,!0),Te=B.createVertexBuffer(Ie,h.collisionCircleLayout.members,!0);for(const it of se){const ut={u_matrix:it.transform,u_inv_matrix:it.invTransform,u_camera_to_center_distance:(Ge=_.transform).cameraToCenterDistance,u_viewport_size:[Ge.width,Ge.height]};be.draw(B,H.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,_.colorModeForRenderPass(),h.CullFaceMode.disabled,ut,d.id,Te,et,h.SegmentVector.simpleSegment(0,2*it.circleOffset,it.circleArray.length,it.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ge;Te.destroy(),et.destroy()}const cs=h.identity(new Float32Array(16));function Wu(_,t,d,y,w,E){const{horizontalAlign:A,verticalAlign:B}=h.getAnchorAlignment(_),H=-(A-.5)*t,Q=-(B-.5)*d,se=h.evaluateVariableOffset(_,y);return new h.pointGeometry((H/w+se[0])*E,(Q/w+se[1])*E)}function Lc(_,t,d,y,w,E,A,B,H,Q,se,de){const fe=_.text.placedSymbolArray,be=_.text.dynamicLayoutVertexArray,Ie=_.icon.dynamicLayoutVertexArray,Re={};be.clear();for(let et=0;et<fe.length;et++){const Te=fe.get(et),Ge=_.allowVerticalPlacement&&!Te.placedOrientation,it=Te.hidden||!Te.crossTileID||Ge?null:y[Te.crossTileID];if(it){const ut=new h.pointGeometry(Te.anchorX,Te.anchorY),xt=de(ut),Ke=or(ut,d?B:A,xt),Tt=Lr(E.cameraToCenterDistance,Ke.signedDistanceFromCamera);let rn=w.evaluateSizeForFeature(_.textSizeData,Q,Te)*Tt/h.ONE_EM;d&&(rn*=_.tilePixelRatio/H);const{width:hn,height:at,anchor:_n,textOffset:an,textScale:ai}=it,qn=Wu(_n,hn,at,an,ai,rn),In=d?or(ut.add(qn),A,xt).point:Ke.point.add(t?qn.rotate(-E.angle):qn),Yn=_.allowVerticalPlacement&&Te.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let bi=0;bi<Te.numGlyphs;bi++)h.addDynamicAttributes(be,In,Yn);se&&Te.associatedIconIndex>=0&&(Re[Te.associatedIconIndex]={shiftedAnchor:In,angle:Yn})}else yr(Te.numGlyphs,be)}if(se){Ie.clear();const et=_.icon.placedSymbolArray;for(let Te=0;Te<et.length;Te++){const Ge=et.get(Te);if(Ge.hidden)yr(Ge.numGlyphs,Ie);else{const it=Re[Te];if(it)for(let ut=0;ut<Ge.numGlyphs;ut++)h.addDynamicAttributes(Ie,it.shiftedAnchor,it.angle);else yr(Ge.numGlyphs,Ie)}}_.icon.dynamicLayoutVertexBuffer.updateData(Ie)}_.text.dynamicLayoutVertexBuffer.updateData(be)}function bu(_,t,d){return d.iconsInText&&t?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Xs(_,t,d,y,w,E,A,B,H,Q,se,de){const fe=_.context,be=fe.gl,Ie=_.transform,Re="map"===B,et="map"===H,Te=Re&&"point"!==d.layout.get("symbol-placement"),Ge=Re&&!et&&!Te,it=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let ut=!1;const xt=_.depthModeForSublayer(0,h.DepthMode.ReadOnly),Ke=d.layout.get("text-variable-anchor"),Tt=[],rn=_.terrain&&et?["PITCH_WITH_MAP_TERRAIN"]:null;for(const hn of y){const at=t.getTile(hn),_n=at.getBucket(d);if(!_n)continue;const an=w?_n.text:_n.icon;if(!an||!an.segments.get().length)continue;const ai=an.programConfigurations.get(d.id),qn=w||_n.sdfIcons,In=w?_n.textSizeData:_n.iconSizeData,Yn=et||0!==Ie.pitch,bi=_.useProgram(bu(qn,w,_n),ai,rn),Ji=h.evaluateSizeForZoom(In,Ie.zoom);let Er,Ar,Ri,Mi,eo=[0,0],mr=null;if(w){if(Ar=at.glyphAtlasTexture,Ri=be.LINEAR,Er=at.glyphAtlasTexture.size,_n.iconsInText){eo=at.imageAtlasTexture.size,mr=at.imageAtlasTexture;const No="composite"===In.kind||"camera"===In.kind;Mi=Yn||_.options.rotating||_.options.zooming||No?be.LINEAR:be.NEAREST}}else{const No=1!==d.layout.get("icon-size").constantOr(0)||_n.iconsNeedLinear;Ar=at.imageAtlasTexture,Ri=qn||_.options.rotating||_.options.zooming||No||Yn?be.LINEAR:be.NEAREST,Er=at.imageAtlasTexture.size}const ns=Jt(at,1,_.transform.zoom),is=ei(hn.projMatrix,et,Re,_.transform,ns),na=_.terrain&&et&&Te?h.invert(new Float32Array(16),is):cs,ps=ui(hn.projMatrix,et,Re,_.transform,ns),to=Ke&&_n.hasTextData(),go="none"!==d.layout.get("icon-text-fit")&&to&&_n.hasIconData();if(Te){const No=Ie.elevation;Gs(_n,hn.projMatrix,_,w,is,ps,et,Q,No?Es=>No.getAtTileOffset(hn,Es.x,Es.y):null)}const Li=_.translatePosMatrix(hn.projMatrix,at,E,A),qr=Te||w&&Ke||go?cs:is,To=_.translatePosMatrix(ps,at,E,A,!0),Ir=qn&&0!==d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1);let Zo;Zo=qn?_n.iconsInText?kt(In.kind,Ji,Ge,et,_,Li,qr,To,Er,eo):Ee(In.kind,Ji,Ge,et,_,Li,qr,To,w,Er,!0):G(In.kind,Ji,Ge,et,_,Li,qr,To,w,Er);const yc={program:bi,buffers:an,uniformValues:Zo,atlasTexture:Ar,atlasTextureIcon:mr,atlasInterpolation:Ri,atlasInterpolationIcon:Mi,isSDF:qn,hasHalo:Ir,tile:at,labelPlaneMatrixInv:na};if(it&&_n.canOverlap){ut=!0;const No=an.segments.get();for(const Es of No)Tt.push({segments:new h.SegmentVector([Es]),sortKey:Es.sortKey,state:yc})}else Tt.push({segments:an.segments,sortKey:0,state:yc})}ut&&Tt.sort((hn,at)=>hn.sortKey-at.sortKey);for(const hn of Tt){const at=hn.state;if(_.terrain&&_.terrain.setupElevationDraw(at.tile,at.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:at.labelPlaneMatrixInv}),fe.activeTexture.set(be.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,be.CLAMP_TO_EDGE),at.atlasTextureIcon&&(fe.activeTexture.set(be.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),at.isSDF){const _n=at.uniformValues;at.hasHalo&&(_n.u_is_halo=1,ko(at.buffers,hn.segments,d,_,at.program,xt,se,de,_n)),_n.u_is_halo=0}ko(at.buffers,hn.segments,d,_,at.program,xt,se,de,at.uniformValues)}}function ko(_,t,d,y,w,E,A,B,H){const Q=y.context;w.draw(Q,Q.gl.TRIANGLES,E,A,B,h.CullFaceMode.disabled,H,d.id,_.layoutVertexBuffer,_.indexBuffer,t,d.paint,y.transform.zoom,_.programConfigurations.get(d.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function ts(_,t,d,y,w,E,A){const B=_.context.gl,H=d.paint.get("fill-pattern"),Q=H&&H.constantOr(1),se=d.getCrossfadeParameters();let de,fe,be,Ie,Re;A?(fe=Q&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=B.LINES):(fe=Q?"fillPattern":"fill",de=B.TRIANGLES);for(const et of y){const Te=t.getTile(et);if(Q&&!Te.patternsLoaded())continue;const Ge=Te.getBucket(d);if(!Ge)continue;_.prepareDrawTile(et);const it=Ge.programConfigurations.get(d.id),ut=_.useProgram(fe,it);Q&&(_.context.activeTexture.set(B.TEXTURE0),Te.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),it.updatePaintBuffers(se));const xt=H.constantOr(null);if(xt&&Te.imageAtlas){const Tt=Te.imageAtlas,rn=Tt.patternPositions[xt.to.toString()],hn=Tt.patternPositions[xt.from.toString()];rn&&hn&&it.setConstantPatternPositions(rn,hn)}const Ke=_.translatePosMatrix(et.projMatrix,Te,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(A){Ie=Ge.indexBuffer2,Re=Ge.segments2;const Tt=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[B.drawingBufferWidth,B.drawingBufferHeight];be="fillOutlinePattern"===fe&&Q?lr(Ke,_,se,Te,Tt):er(Ke,Tt)}else Ie=Ge.indexBuffer,Re=Ge.segments,be=Q?ar(Ke,_,se,Te):Hn(Ke);_.prepareDrawProgram(_.context,ut,et.toUnwrapped()),ut.draw(_.context,de,w,_.stencilModeForClipping(et),E,h.CullFaceMode.disabled,be,d.id,Ge.layoutVertexBuffer,Ie,Re,d.paint,_.transform.zoom,it)}}function wa(_,t,d,y,w,E,A){const B=_.context,H=B.gl,Q=d.paint.get("fill-extrusion-pattern"),se=Q.constantOr(1),de=d.getCrossfadeParameters(),fe=d.paint.get("fill-extrusion-opacity");for(const be of y){const Ie=t.getTile(be),Re=Ie.getBucket(d);if(!Re)continue;const et=Re.programConfigurations.get(d.id),Te=_.useProgram(se?"fillExtrusionPattern":"fillExtrusion",et);if(_.terrain){const Ke=_.terrain;if(!Re.enableTerrain)continue;if(Ke.setupElevationDraw(Ie,Te,{useMeterToDem:!0}),tl(B,t,be,Re,d,Ke),!Re.centroidVertexBuffer){const Tt=Te.attributes.a_centroid_pos;void 0!==Tt&&H.vertexAttrib2f(Tt,0,0)}}se&&(_.context.activeTexture.set(H.TEXTURE0),Ie.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),et.updatePaintBuffers(de));const Ge=Q.constantOr(null);if(Ge&&Ie.imageAtlas){const Ke=Ie.imageAtlas,Tt=Ke.patternPositions[Ge.to.toString()],rn=Ke.patternPositions[Ge.from.toString()];Tt&&rn&&et.setConstantPatternPositions(Tt,rn)}const it=_.translatePosMatrix(be.projMatrix,Ie,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ut=d.paint.get("fill-extrusion-vertical-gradient"),xt=se?gn(it,_,ut,fe,be,de,Ie):Yt(it,_,ut,fe);_.prepareDrawProgram(B,Te,be.toUnwrapped()),Te.draw(B,B.gl.TRIANGLES,w,E,A,h.CullFaceMode.backCCW,xt,d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,d.paint,_.transform.zoom,et,_.terrain?Re.centroidVertexBuffer:null)}}function tl(_,t,d,y,w,E){const A=[Te=>{let Ge=Te.canonical.x-1,it=Te.wrap;return Ge<0&&(Ge=(1<<Te.canonical.z)-1,it--),new h.OverscaledTileID(Te.overscaledZ,it,Te.canonical.z,Ge,Te.canonical.y)},Te=>{let Ge=Te.canonical.x+1,it=Te.wrap;return Ge===1<<Te.canonical.z&&(Ge=0,it++),new h.OverscaledTileID(Te.overscaledZ,it,Te.canonical.z,Ge,Te.canonical.y)},Te=>new h.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,(0===Te.canonical.y?1<<Te.canonical.z:Te.canonical.y)-1),Te=>new h.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,Te.canonical.y===(1<<Te.canonical.z)-1?0:Te.canonical.y+1)],B=Te=>{const Ge=t.getSource().maxzoom,it=Tt=>{const rn=t.getTileByID(Tt);if(rn&&rn.hasData())return rn.getBucket(w)};let ut,xt,Ke;return(Te.overscaledZ===Te.canonical.z||Te.overscaledZ>=Ge)&&(ut=it(Te.key)),Te.overscaledZ>=Ge&&(xt=it(Te.calculateScaledKey(Te.overscaledZ+1))),Te.overscaledZ>Ge&&(Ke=it(Te.calculateScaledKey(Te.overscaledZ-1))),ut||xt||Ke},H=[0,0,0],Q=(Te,Ge)=>(H[0]=Math.min(Te.min.y,Ge.min.y),H[1]=Math.max(Te.max.y,Ge.max.y),H[2]=h.EXTENT-Ge.min.x>Te.max.x?Ge.min.x-h.EXTENT:Te.max.x,H),se=(Te,Ge)=>(H[0]=Math.min(Te.min.x,Ge.min.x),H[1]=Math.max(Te.max.x,Ge.max.x),H[2]=h.EXTENT-Ge.min.y>Te.max.y?Ge.min.y-h.EXTENT:Te.max.y,H),de=[(Te,Ge)=>Q(Te,Ge),(Te,Ge)=>Q(Ge,Te),(Te,Ge)=>se(Te,Ge),(Te,Ge)=>se(Ge,Te)],fe=new h.pointGeometry(0,0);let be,Ie,Re;const et=(Te,Ge,it,ut,xt)=>{const Ke=[[ut?it:Te,ut?Te:it,0],[ut?it:Ge,ut?Ge:it,0]],Tt=xt<0?h.EXTENT+xt:xt,rn=[ut?Tt:(Te+Ge)/2,ut?(Te+Ge)/2:Tt,0];return 0===it&&xt<0||0!==it&&xt>0?E.getForTilePoints(Re,[rn],!0,Ie):Ke.push(rn),E.getForTilePoints(d,Ke,!0,be),Math.max(Ke[0][2],Ke[1][2],rn[2])/E.exaggeration()};for(let Te=0;Te<4;Te++){const Ge=y.borders[Te];if(0===Ge.length&&(y.borderDone[Te]=!0),y.borderDone[Te])continue;const it=Re=A[Te](d),ut=B(it);if(!(ut&&ut.enableTerrain&&(Ie=E.findDEMTileFor(it),Ie&&Ie.dem)))continue;if(!be){const rn=E.findDEMTileFor(d);if(!rn||!rn.dem)return;be=rn}const xt=(Te<2?1:5)-Te,Ke=ut.borders[xt];let Tt=0;for(let rn=0;rn<Ge.length;rn++){const hn=y.featuresOnBorder[Ge[rn]],at=hn.borders[Te];let _n;for(;Tt<Ke.length&&(_n=ut.featuresOnBorder[Ke[Tt]],!(_n.borders[xt][1]>at[0]+3));)ut.borderDone[xt]||ut.encodeCentroid(void 0,_n,!1),Tt++;if(_n&&Tt<Ke.length){const an=Tt;let ai=0;for(;!(_n.borders[xt][0]>at[1]-3)&&(ai++,++Tt!==Ke.length);)_n=ut.featuresOnBorder[Ke[Tt]];if(_n=ut.featuresOnBorder[Ke[an]],hn.intersectsCount()>1||_n.intersectsCount()>1||1!==ai){1!==ai&&(Tt=an),y.encodeCentroid(void 0,hn,!1),ut.borderDone[xt]||ut.encodeCentroid(void 0,_n,!1);continue}const qn=de[Te](hn,_n),In=Te%2?h.EXTENT-1:0;fe.x=et(qn[0],Math.min(h.EXTENT-1,qn[1]),In,Te<2,qn[2]),fe.y=0,y.encodeCentroid(fe,hn,!1),ut.borderDone[xt]||ut.encodeCentroid(fe,_n,!1)}else y.encodeCentroid(void 0,hn,!1)}y.borderDone[Te]=y.needsCentroidUpdate=!0,ut.borderDone[xt]||(ut.borderDone[xt]=ut.needsCentroidUpdate=!0)}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&0!==y.centroidVertexArray.length)&&y.uploadCentroid(_)}const ws=new h.Color(1,0,0,1),nr=new h.Color(0,1,0,1),xl=new h.Color(0,0,1,1),qu=new h.Color(1,0,1,1),Yu=new h.Color(0,1,1,1);function Ro(_,t,d,y){oo(_,0,t+d/2,_.transform.width,d,y)}function Vl(_,t,d,y){oo(_,t-d/2,0,d,_.transform.height,y)}function oo(_,t,d,y,w,E){const A=_.context,B=A.gl;B.enable(B.SCISSOR_TEST),B.scissor(t*h.exported.devicePixelRatio,d*h.exported.devicePixelRatio,y*h.exported.devicePixelRatio,w*h.exported.devicePixelRatio),A.clear({color:E}),B.disable(B.SCISSOR_TEST)}function Vr(_,t,d){const y=_.context,w=y.gl,E=d.projMatrix,A=_.useProgram("debug"),B=t.getTileByID(d.key);_.terrain&&_.terrain.setupElevationDraw(B,A);const H=h.DepthMode.disabled,Q=h.StencilMode.disabled,se=_.colorModeForRenderPass();y.activeTexture.set(w.TEXTURE0),_.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),A.draw(y,w.LINE_STRIP,H,Q,se,h.CullFaceMode.disabled,ti(E,h.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);const fe=B.latestRawTileData,be=Math.floor((fe&&fe.byteLength||0)/1024),Ie=t.getTile(d).tileSize,Re=512/Math.min(Ie,512)*(d.overscaledZ/_.transform.zoom)*.5;let et=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(et+=` => ${d.overscaledZ}`),function(Te,Ge){Te.initDebugOverlayCanvas();const it=Te.debugOverlayCanvas,ut=Te.context.gl,xt=Te.debugOverlayCanvas.getContext("2d");xt.clearRect(0,0,it.width,it.height),xt.shadowColor="white",xt.shadowBlur=2,xt.lineWidth=1.5,xt.strokeStyle="white",xt.textBaseline="top",xt.font="bold 36px Open Sans, sans-serif",xt.fillText(Ge,5,5),xt.strokeText(Ge,5,5),Te.debugOverlayTexture.update(it),Te.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(_,`${et} ${be}kb`),A.draw(y,w.TRIANGLES,H,Q,h.ColorMode.alphaBlended,h.CullFaceMode.disabled,ti(E,h.Color.transparent,Re),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}const Ku=h.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Qs}=Ku;function Ho(_,t,d,y){_.emplaceBack(t,d,y)}class Ga{constructor(t){this.vertexArray=new h.StructArrayLayout3f12,this.indices=new h.StructArrayLayout3ui6,Ho(this.vertexArray,-1,-1,1),Ho(this.vertexArray,1,-1,1),Ho(this.vertexArray,-1,1,1),Ho(this.vertexArray,1,1,1),Ho(this.vertexArray,-1,-1,-1),Ho(this.vertexArray,1,-1,-1),Ho(this.vertexArray,-1,1,-1),Ho(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Qs),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=h.SegmentVector.simpleSegment(0,0,36,12)}}function Tr(_,t,d,y,w,E){const A=_.gl,B=t.paint.get("sky-atmosphere-color"),H=t.paint.get("sky-atmosphere-halo-color"),Q=t.paint.get("sky-atmosphere-sun-intensity"),se={u_matrix_3f:h.fromMat4([],y),u_sun_direction:w,u_sun_intensity:Q,u_color_tint_r:[(Ie=B).r,Ie.g,Ie.b,Ie.a],u_color_tint_m:[(Re=H).r,Re.g,Re.b,Re.a],u_luminance:5e-5};var Ie,Re;A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+E,t.skyboxTexture,0),d.draw(_,A.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.frontCW,se,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}const wl={symbol:function(_,t,d,y,w){if("translucent"!==_.renderPass)return;const E=h.StencilMode.disabled,A=_.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(B,H,Q,se,de,fe,be){const Ie=H.transform,Re="map"===de,et="map"===fe;for(const Te of B){const Ge=se.getTile(Te),it=Ge.getBucket(Q);if(!it||!it.text||!it.text.segments.get().length)continue;const ut=h.evaluateSizeForZoom(it.textSizeData,Ie.zoom),xt=Jt(Ge,1,H.transform.zoom),Ke=ei(Te.projMatrix,et,Re,H.transform,xt),Tt="none"!==Q.layout.get("icon-text-fit")&&it.hasIconData();if(ut){const rn=Math.pow(2,Ie.zoom-Ge.tileID.overscaledZ),hn=Ie.elevation;Lc(it,Re,et,be,h.symbolSize,Ie,Ke,Te.projMatrix,rn,ut,Tt,hn?at=>hn.getAtTileOffset(Te,at.x,at.y):at=>0)}}}(y,_,d,t,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),w),0!==d.paint.get("icon-opacity").constantOr(1)&&Xs(_,t,d,y,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),E,A),0!==d.paint.get("text-opacity").constantOr(1)&&Xs(_,t,d,y,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),E,A),t.map.showCollisionBoxes&&(xs(_,t,d,y,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),xs(_,t,d,y,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(_,t,d,y){if("translucent"!==_.renderPass)return;const w=d.paint.get("circle-opacity"),E=d.paint.get("circle-stroke-width"),A=d.paint.get("circle-stroke-opacity"),B=void 0!==d.layout.get("circle-sort-key").constantOr(1);if(0===w.constantOr(1)&&(0===E.constantOr(1)||0===A.constantOr(1)))return;const H=_.context,Q=H.gl,se=_.depthModeForSublayer(0,h.DepthMode.ReadOnly),de=h.StencilMode.disabled,fe=_.colorModeForRenderPass(),be=[];for(let Ie=0;Ie<y.length;Ie++){const Re=y[Ie],et=t.getTile(Re),Te=et.getBucket(d);if(!Te)continue;const Ge=Te.programConfigurations.get(d.id),it=tr(d),ut={programConfiguration:Ge,program:_.useProgram("circle",Ge,it),layoutVertexBuffer:Te.layoutVertexBuffer,indexBuffer:Te.indexBuffer,uniformValues:di(_,Re,et,d),tile:et};if(B){const xt=Te.segments.get();for(const Ke of xt)be.push({segments:new h.SegmentVector([Ke]),sortKey:Ke.sortKey,state:ut})}else be.push({segments:Te.segments,sortKey:0,state:ut})}B&&be.sort((Ie,Re)=>Ie.sortKey-Re.sortKey);for(const Ie of be){const{programConfiguration:Re,program:et,layoutVertexBuffer:Te,indexBuffer:Ge,uniformValues:it,tile:ut}=Ie.state,xt=Ie.segments;_.terrain&&_.terrain.setupElevationDraw(ut,et,{useDepthForOcclusion:!0}),_.prepareDrawProgram(H,et,ut.tileID.toUnwrapped()),et.draw(H,Q.TRIANGLES,se,de,fe,h.CullFaceMode.disabled,it,d.id,Te,Ge,xt,d.paint,_.transform.zoom,Re)}},heatmap:function(_,t,d,y){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===_.renderPass){const w=_.context,E=w.gl,A=h.StencilMode.disabled,B=new h.ColorMode([E.ONE,E.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(H,Q,se){const de=H.gl;H.activeTexture.set(de.TEXTURE1),H.viewport.set([0,0,Q.width/4,Q.height/4]);let fe=se.heatmapFbo;if(fe)de.bindTexture(de.TEXTURE_2D,fe.colorAttachment.get()),H.bindFramebuffer.set(fe.framebuffer);else{const be=de.createTexture();de.bindTexture(de.TEXTURE_2D,be),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),fe=se.heatmapFbo=H.createFramebuffer(Q.width/4,Q.height/4,!1),function(Ie,Re,et,Te){const Ge=Ie.gl;Ge.texImage2D(Ge.TEXTURE_2D,0,Ge.RGBA,Re.width/4,Re.height/4,0,Ge.RGBA,Ie.extRenderToTextureHalfFloat?Ie.extTextureHalfFloat.HALF_FLOAT_OES:Ge.UNSIGNED_BYTE,null),Te.colorAttachment.set(et)}(H,Q,be,fe)}})(w,_,d),w.clear({color:h.Color.transparent});for(let H=0;H<y.length;H++){const Q=y[H];if(t.hasRenderableParent(Q))continue;const se=t.getTile(Q),de=se.getBucket(d);if(!de)continue;const fe=de.programConfigurations.get(d.id),be=_.useProgram("heatmap",fe),{zoom:Ie}=_.transform;_.terrain&&_.terrain.setupElevationDraw(se,be),_.prepareDrawProgram(w,be,Q.toUnwrapped()),be.draw(w,E.TRIANGLES,h.DepthMode.disabled,A,B,h.CullFaceMode.disabled,es(Q.projMatrix,se,Ie,d.paint.get("heatmap-intensity")),d.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,d.paint,_.transform.zoom,fe)}w.viewport.set([0,0,_.width,_.height])}else"translucent"===_.renderPass&&(_.context.setColorMode(_.colorModeForRenderPass()),function(w,E){const A=w.context,B=A.gl,H=E.heatmapFbo;if(!H)return;A.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,H.colorAttachment.get()),A.activeTexture.set(B.TEXTURE1);let Q=E.colorRampTexture;Q||(Q=E.colorRampTexture=new h.Texture(A,E.colorRamp,B.RGBA)),Q.bind(B.LINEAR,B.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(A,B.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,w.colorModeForRenderPass(),h.CullFaceMode.disabled,((se,de,fe,be)=>{const Ie=h.create$1();h.ortho(Ie,0,se.width,se.height,0,0,1);const Re=se.context.gl;return{u_matrix:Ie,u_world:[Re.drawingBufferWidth,Re.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:de.paint.get("heatmap-opacity")}})(w,E),E.id,w.viewportBuffer,w.quadTriangleIndexBuffer,w.viewportSegments,E.paint,w.transform.zoom)}(_,d))},line:function(_,t,d,y){if("translucent"!==_.renderPass)return;const w=d.paint.get("line-opacity"),E=d.paint.get("line-width");if(0===w.constantOr(1)||0===E.constantOr(1))return;const A=_.depthModeForSublayer(0,h.DepthMode.ReadOnly),B=_.colorModeForRenderPass(),H=d.paint.get("line-dasharray"),Q=H.constantOr(1),se=d.layout.get("line-cap"),de=d.paint.get("line-pattern"),fe=de.constantOr(1),be=d.paint.get("line-gradient"),Ie=d.getCrossfadeParameters(),Re=fe?"linePattern":Q?"lineSDF":be?"lineGradient":"line",et=_.context,Te=et.gl;for(const Ge of y){const it=t.getTile(Ge);if(fe&&!it.patternsLoaded())continue;const ut=it.getBucket(d);if(!ut)continue;_.prepareDrawTile(Ge);const xt=ut.programConfigurations.get(d.id),Ke=_.useProgram(Re,xt),Tt=de.constantOr(null);if(Tt&&it.imageAtlas){const an=it.imageAtlas,ai=an.patternPositions[Tt.to.toString()],qn=an.patternPositions[Tt.from.toString()];ai&&qn&&xt.setConstantPatternPositions(ai,qn)}const rn=H.constantOr(null),hn=se.constantOr(null);if(!fe&&rn&&hn&&it.lineAtlas){const an=it.lineAtlas,ai=an.getDash(rn.to,hn),qn=an.getDash(rn.from,hn);ai&&qn&&xt.setConstantPatternPositions(ai,qn)}const at=_.terrain?Ge.projMatrix:null,_n=fe?Bs(_,it,d,Ie,at):Q?la(_,it,d,Ie,at):be?aa(_,it,d,at,ut.lineClipsArray.length):Go(_,it,d,at);if(fe)et.activeTexture.set(Te.TEXTURE0),it.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ie);else if(Q)et.activeTexture.set(Te.TEXTURE0),it.lineAtlasTexture.bind(Te.LINEAR,Te.REPEAT),xt.updatePaintBuffers(Ie);else if(be){const an=ut.gradients[d.id];let ai=an.texture;if(d.gradientVersion!==an.version){let qn=256;if(d.stepInterpolant){const In=t.getSource().maxzoom,Yn=Ge.canonical.z===In?Math.ceil(1<<_.transform.maxZoom-Ge.canonical.z):1;qn=h.clamp(h.nextPowerOfTwo(ut.maxLineLength/h.EXTENT*1024*Yn),256,et.maxTextureSize)}an.gradient=h.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:qn,image:an.gradient||void 0,clips:ut.lineClipsArray}),an.texture?an.texture.update(an.gradient):an.texture=new h.Texture(et,an.gradient,Te.RGBA),an.version=d.gradientVersion,ai=an.texture}et.activeTexture.set(Te.TEXTURE0),ai.bind(d.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}_.prepareDrawProgram(et,Ke,Ge.toUnwrapped()),Ke.draw(et,Te.TRIANGLES,A,_.stencilModeForClipping(Ge),B,h.CullFaceMode.disabled,_n,d.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,d.paint,_.transform.zoom,xt,ut.layoutVertexBuffer2)}},fill:function(_,t,d,y){const w=d.paint.get("fill-color"),E=d.paint.get("fill-opacity");if(0===E.constantOr(1))return;const A=_.colorModeForRenderPass(),B=d.paint.get("fill-pattern"),H=_.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===w.constantOr(h.Color.transparent).a&&1===E.constantOr(0)?"opaque":"translucent";if(_.renderPass===H){const Q=_.depthModeForSublayer(1,"opaque"===_.renderPass?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly);ts(_,t,d,y,Q,A,!1)}if("translucent"===_.renderPass&&d.paint.get("fill-antialias")){const Q=_.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,h.DepthMode.ReadOnly);ts(_,t,d,y,Q,A,!0)}},"fill-extrusion":function(_,t,d,y){const w=d.paint.get("fill-extrusion-opacity");if(0!==w&&"translucent"===_.renderPass){const E=new h.DepthMode(_.context.gl.LEQUAL,h.DepthMode.ReadWrite,_.depthRangeFor3D);if(1!==w||d.paint.get("fill-extrusion-pattern").constantOr(1))wa(_,t,d,y,E,h.StencilMode.disabled,h.ColorMode.disabled),wa(_,t,d,y,E,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const A=_.colorModeForRenderPass();wa(_,t,d,y,E,h.StencilMode.disabled,A)}}},hillshade:function(_,t,d,y){if("offscreen"!==_.renderPass&&"translucent"!==_.renderPass)return;const w=_.context,E=_.depthModeForSublayer(0,h.DepthMode.ReadOnly),A=_.colorModeForRenderPass(),B=_.terrain&&_.terrain.renderingToTexture,[H,Q]="translucent"!==_.renderPass||B?[{},y]:_.stencilConfigForOverlap(y);for(const se of Q){const de=t.getTile(se);if(de.needsHillshadePrepare&&"offscreen"===_.renderPass)ls(_,de,d,E,h.StencilMode.disabled,A);else if("translucent"===_.renderPass){const fe=B&&_.terrain?_.terrain.stencilModeForRTTOverlap(se):H[se.overscaledZ];Ys(_,se,de,d,E,fe,A)}}w.viewport.set([0,0,_.width,_.height])},raster:function(_,t,d,y,w,E){if("translucent"!==_.renderPass||0===d.paint.get("raster-opacity")||!y.length)return;const A=_.context,B=A.gl,H=t.getSource(),Q=_.useProgram("raster"),se=_.colorModeForRenderPass(),de=_.terrain&&_.terrain.renderingToTexture,[fe,be]=H instanceof he||de?[{},y]:_.stencilConfigForOverlap(y),Ie=be[be.length-1].overscaledZ,Re=!_.options.moving;for(const et of be){const Te=de?h.DepthMode.disabled:_.depthModeForSublayer(et.overscaledZ-Ie,1===d.paint.get("raster-opacity")?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly,B.LESS),Ge=et.toUnwrapped(),it=t.getTile(et);if(de&&(!it||!it.hasData()))continue;const ut=de?et.projMatrix:_.transform.calculateProjMatrix(Ge,Re),xt=_.terrain&&de?_.terrain.stencilModeForRTTOverlap(et):fe[et.overscaledZ],Ke=E?0:d.paint.get("raster-fade-duration");it.registerFadeDuration(Ke);const Tt=t.findLoadedParent(et,0),rn=fo(it,Tt,t,_.transform,Ke);let hn,at;_.terrain&&_.terrain.prepareDrawTile(et);const _n="nearest"===d.paint.get("raster-resampling")?B.NEAREST:B.LINEAR;A.activeTexture.set(B.TEXTURE0),it.texture.bind(_n,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),A.activeTexture.set(B.TEXTURE1),Tt?(Tt.texture.bind(_n,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),hn=Math.pow(2,Tt.tileID.overscaledZ-it.tileID.overscaledZ),at=[it.tileID.canonical.x*hn%1,it.tileID.canonical.y*hn%1]):it.texture.bind(_n,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const an=te(ut,at||[0,0],hn||1,rn,d);_.prepareDrawProgram(A,Q,Ge),H instanceof he?Q.draw(A,B.TRIANGLES,Te,h.StencilMode.disabled,se,h.CullFaceMode.disabled,an,d.id,H.boundsBuffer,_.quadTriangleIndexBuffer,H.boundsSegments):Q.draw(A,B.TRIANGLES,Te,xt,se,h.CullFaceMode.disabled,an,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,t,d,y){const w=d.paint.get("background-color"),E=d.paint.get("background-opacity");if(0===E)return;const A=_.context,B=A.gl,H=_.transform,Q=H.tileSize,se=d.paint.get("background-pattern");if(_.isPatternMissing(se))return;const de=!se&&1===w.a&&1===E&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==de)return;const fe=h.StencilMode.disabled,be=_.depthModeForSublayer(0,"opaque"===de?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly),Ie=_.colorModeForRenderPass(),Re=_.useProgram(se?"backgroundPattern":"background"),et=y||H.coveringTiles({tileSize:Q});se&&(A.activeTexture.set(B.TEXTURE0),_.imageManager.bind(_.context));const Te=d.getCrossfadeParameters();for(const Ge of et){const it=Ge.toUnwrapped(),ut=y?Ge.projMatrix:_.transform.calculateProjMatrix(it);_.prepareDrawTile(Ge);const xt=se?Zr(ut,E,_,se,{tileID:Ge,tileSize:Q},Te):Wn(ut,E,w);_.prepareDrawProgram(A,Re,it),Re.draw(A,B.TRIANGLES,be,fe,Ie,h.CullFaceMode.disabled,xt,d.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}},sky:function(_,t,d){const y=d.paint.get("sky-opacity");if(0===y)return;const w=_.context,E=d.paint.get("sky-type"),A=new h.DepthMode(w.gl.LEQUAL,h.DepthMode.ReadOnly,[0,1]),B=_.frameCounter/1e3%1;"atmosphere"===E?"offscreen"===_.renderPass?d.needsSkyboxCapture(_)&&(function(H,Q,se,de){const fe=H.context,be=fe.gl;let Ie=Q.skyboxFbo;if(!Ie){Ie=Q.skyboxFbo=fe.createFramebuffer(32,32,!1),Q.skyboxGeometry=new Ga(fe),Q.skyboxTexture=fe.gl.createTexture(),be.bindTexture(be.TEXTURE_CUBE_MAP,Q.skyboxTexture),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MIN_FILTER,be.LINEAR),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MAG_FILTER,be.LINEAR);for(let Ge=0;Ge<6;++Ge)be.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,be.RGBA,32,32,0,be.RGBA,be.UNSIGNED_BYTE,null)}fe.bindFramebuffer.set(Ie.framebuffer),fe.viewport.set([0,0,32,32]);const Re=Q.getCenter(H,!0),et=H.useProgram("skyboxCapture"),Te=new Float64Array(16);h.identity(Te),h.rotateY(Te,Te,.5*-Math.PI),Tr(fe,Q,et,Te,Re,0),h.identity(Te),h.rotateY(Te,Te,.5*Math.PI),Tr(fe,Q,et,Te,Re,1),h.identity(Te),h.rotateX(Te,Te,.5*-Math.PI),Tr(fe,Q,et,Te,Re,2),h.identity(Te),h.rotateX(Te,Te,.5*Math.PI),Tr(fe,Q,et,Te,Re,3),h.identity(Te),Tr(fe,Q,et,Te,Re,4),h.identity(Te),h.rotateY(Te,Te,Math.PI),Tr(fe,Q,et,Te,Re,5),fe.viewport.set([0,0,H.width,H.height])}(_,d),d.markSkyboxValid(_)):"sky"===_.renderPass&&function(H,Q,se,de,fe){const be=H.context,Ie=be.gl,Re=H.transform,et=H.useProgram("skybox");be.activeTexture.set(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,Q.skyboxTexture);const Te={u_matrix:Re.skyboxMatrix,u_sun_direction:Q.getCenter(H,!1),u_cubemap:0,u_opacity:de,u_temporal_offset:fe};H.prepareDrawProgram(be,et),et.draw(be,Ie.TRIANGLES,se,h.StencilMode.disabled,H.colorModeForRenderPass(),h.CullFaceMode.backCW,Te,"skybox",Q.skyboxGeometry.vertexBuffer,Q.skyboxGeometry.indexBuffer,Q.skyboxGeometry.segment)}(_,d,A,y,B):"gradient"===E&&"sky"===_.renderPass&&function(H,Q,se,de,fe){const be=H.context,Ie=be.gl,Re=H.transform,et=H.useProgram("skyboxGradient");Q.skyboxGeometry||(Q.skyboxGeometry=new Ga(be)),be.activeTexture.set(Ie.TEXTURE0);let Te=Q.colorRampTexture;Te||(Te=Q.colorRampTexture=new h.Texture(be,Q.colorRamp,Ie.RGBA)),Te.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE);const Ge=(it=Re.skyboxMatrix,ut=Q.getCenter(H,!1),xt=Q.paint.get("sky-gradient-radius"),Ke=de,Tt=fe,{u_matrix:it,u_color_ramp:0,u_center_direction:ut,u_radius:h.degToRad(xt),u_opacity:Ke,u_temporal_offset:Tt});var it,ut,xt,Ke,Tt;H.prepareDrawProgram(be,et),et.draw(be,Ie.TRIANGLES,se,h.StencilMode.disabled,H.colorModeForRenderPass(),h.CullFaceMode.backCW,Ge,"skyboxGradient",Q.skyboxGeometry.vertexBuffer,Q.skyboxGeometry.indexBuffer,Q.skyboxGeometry.segment)}(_,d,A,y,B)},debug:function(_,t,d){for(let y=0;y<d.length;y++)Vr(_,t,d[y])},custom:function(_,t,d){const y=_.context,w=d.implementation;if("offscreen"===_.renderPass){const E=w.prerender;E&&(_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),E.call(w,y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState())}else if("translucent"===_.renderPass){_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),y.setStencilMode(h.StencilMode.disabled);const E="3d"===w.renderingMode?new h.DepthMode(_.context.gl.LEQUAL,h.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,h.DepthMode.ReadOnly);y.setDepthMode(E),w.render(y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState(),y.bindFramebuffer.set(null)}}};class Bc{constructor(t,d){this.context=new Qe(t),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=h.SourceCache.maxUnderzooming+h.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ws,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,d){const y=!!t&&!!t.terrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ge(this,t));const w=this._terrain;this.transform.elevation=y?w:null,w.update(t,this.transform,d)}_updateFog(t){const d=t.fog;if(!d||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,w]=d.getFovAdjustedRange(this.transform._fov);if(y>w)return void(this.transform.fogCullDistSq=null);const E=y+.78*(w-y);this.transform.fogCullDistSq=E*E}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,d){if(this.width=t*h.exported.devicePixelRatio,this.height=d*h.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const t=this.context,d=new h.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(h.EXTENT,0),d.emplaceBack(0,h.EXTENT),d.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(d,h.posAttributes.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const y=new h.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(h.EXTENT,0),y.emplaceBack(0,h.EXTENT),y.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=t.createVertexBuffer(y,h.posAttributes.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const w=new h.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(h.EXTENT,0,h.EXTENT,0),w.emplaceBack(0,h.EXTENT,0,h.EXTENT),w.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(w,Rt.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const E=new h.StructArrayLayout2i4;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(E,h.posAttributes.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const A=new h.StructArrayLayout1ui2;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(A);const B=new h.StructArrayLayout3ui6;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(B),this.emptyTexture=new h.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),this.identityMat=h.create$1();const H=this.context.gl;this.stencilClearMode=new h.StencilMode({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO),this.loadTimeStamps.push(h.window.performance.now())}clearStencil(){const t=this.context,d=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=h.create$1();h.ortho(y,0,this.width,this.height,0,0,1),h.scale$1(y,y,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,d.TRIANGLES,h.DepthMode.disabled,this.stencilClearMode,h.ColorMode.disabled,h.CullFaceMode.disabled,Ls(y),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,d,y){if(!(d&&this.currentStencilSource!==d.id&&t.isTileClipped()&&y&&y.length))return;this.currentStencilSource=d.id;const w=this.context,E=w.gl;this.nextStencilID+y.length>256&&this.clearStencil(),w.setColorMode(h.ColorMode.disabled),w.setDepthMode(h.DepthMode.disabled);const A=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of y){const H=this._tileClippingMaskIDs[B.key]=this.nextStencilID++;A.draw(w,E.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:E.ALWAYS,mask:0},H,255,E.KEEP,E.KEEP,E.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,Ls(B.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,d=this.context.gl;return new h.StencilMode({func:d.NOTEQUAL,mask:255},t,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const d=this.context.gl;return new h.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(t){const d=this.context.gl,y=t.sort((A,B)=>B.overscaledZ-A.overscaledZ),w=y[y.length-1].overscaledZ,E=y[0].overscaledZ-w+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const A={};for(let B=0;B<E;B++)A[B+w]=new h.StencilMode({func:d.GEQUAL,mask:255},B+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=E,[A,y]}return[{[w]:h.StencilMode.disabled},y]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new h.ColorMode([t.CONSTANT_COLOR,t.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?h.ColorMode.unblended:h.ColorMode.alphaBlended}depthModeForSublayer(t,d,y){if(!this.opaquePassEnabledForLayer())return h.DepthMode.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new h.DepthMode(y||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,d){this.style=t,this.options=d,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const y=this.style.order,w=this.style._sourceCaches;for(const Q in w){const se=w[Q];se.used&&se.prepare(this.context)}const E={},A={},B={};for(const Q in w){const se=w[Q];E[Q]=se.getVisibleCoordinates(),A[Q]=E[Q].slice().reverse(),B[Q]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Q=0;Q<y.length;Q++)if(this.style._layers[y[Q]].is3D()){this.opaquePassCutoff=Q;break}if(this.terrain&&(this.terrain.updateTileBinding(B),this.opaquePassCutoff=0),!h.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const Q of y){const se=this.style._layers[Q],de=t._getLayerSourceCache(se);if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;const fe=de?A[de.id]:void 0;("custom"===se.type||se.isSky()||fe&&fe.length)&&this.renderLayer(this,de,se,fe)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let H=h.Color.transparent;if(this.style.fog&&(H=this.style.fog.properties.get("color")),this.context.clear({color:d.showOverdrawInspector?h.Color.black:H,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const Q=this.style._layers[y[this.currentLayer]],se=t._getLayerSourceCache(Q);if(Q.isSky())continue;const de=se?A[se.id]:void 0;this._renderTileClippingMasks(Q,se,de),this.renderLayer(this,se,Q,de)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const Q=this.style._layers[y[this.currentLayer]],se=t._getLayerSourceCache(Q);Q.isSky()&&this.renderLayer(this,se,Q,se?A[se.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const Q=this.style._layers[y[this.currentLayer]],se=t._getLayerSourceCache(Q);if(Q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Q)){if(Q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const de=se?("symbol"===Q.type?B:A)[se.id]:void 0;this._renderTileClippingMasks(Q,se,se?E[se.id]:void 0),this.renderLayer(this,se,Q,de),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let Q=null;h.values(this.style._layers).forEach(se=>{const de=t._getLayerSourceCache(se);de&&!se.isHidden(this.transform.zoom)&&(!Q||Q.getSource().maxzoom<de.getSource().maxzoom)&&(Q=de)}),Q&&this.options.showTileBoundaries&&wl.debug(this,Q,Q.getVisibleCoordinates())}this.options.showPadding&&function(Q){const se=Q.transform.padding;Ro(Q,Q.transform.height-(se.top||0),3,ws),Ro(Q,se.bottom||0,3,nr),Vl(Q,se.left||0,3,xl),Vl(Q,Q.transform.width-(se.right||0),3,qu);const de=Q.transform.centerPoint;var fe,be,Ie,Re;oo(fe=Q,(be=de.x)-1,(Ie=Q.transform.height-de.y)-10,2,20,Re=Yu),oo(fe,be-10,Ie-1,20,2,Re)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%h.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(h.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,d,y,w){y.isHidden(this.transform.zoom)||("background"===y.type||"sky"===y.type||"custom"===y.type||w&&w.length)&&(this.id=y.id,this.gpuTimingStart(y),wl[y.type](t,d,y,w,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let y=this.gpuTimers[t.id];y||(y=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),y.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,y.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const d={};for(const y in t){const w=t[y],E=this.context.extTimerQuery,A=E.getQueryObjectEXT(w.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(w.query),d[y]=A}return d}translatePosMatrix(t,d,y,w,E){if(!y[0]&&!y[1])return t;const A=E?"map"===w?this.transform.angle:0:"viewport"===w?-this.transform.angle:0;if(A){const Q=Math.sin(A),se=Math.cos(A);y=[y[0]*se-y[1]*Q,y[0]*Q+y[1]*se]}const B=[E?y[0]:Jt(d,y[0],this.transform.zoom),E?y[1]:Jt(d,y[1],this.transform.zoom),0],H=new Float32Array(16);return h.translate(H,t,B),H}saveTileTexture(t){const d=this._tileTextures[t.size[0]];d?d.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const d=this._tileTextures[t];return d&&d.length>0?d.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const d=this.imageManager.getPattern(t.from.toString()),y=this.imageManager.getPattern(t.to.toString());return!d||!y}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,d=this.style&&this.style.fog,y=[];return this.terrain&&!this.terrain.renderingToTexture&&y.push("TERRAIN"),d&&!t&&0!==d.getOpacity(this.transform.pitch)&&y.push("FOG"),t&&y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&y.push("OVERDRAW_INSPECTOR"),y}useProgram(t,d,y){this.cache=this.cache||{};const w=y||[],E=this.currentGlobalDefines().concat(w),A=xe.cacheKey(t,E,d);return this.cache[A]||(this.cache[A]=new xe(this.context,t,Rs[t],d,Do[t],E)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=h.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new h.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,d,y){if(this.terrain&&this.terrain.renderingToTexture)return;const w=this.style.fog;if(w){const E=w.getOpacity(this.transform.pitch);0!==E&&d.setFogUniformValues(t,((A,B,H,Q)=>{const se=B.properties.get("color"),de=A.frameCounter/1e3%1,fe=[se.r/se.a,se.g/se.a,se.b/se.a,Q];return{u_fog_matrix:H?A.transform.calculateFogTileMatrix(H):A.identityMat,u_fog_range:B.getFovAdjustedRange(A.transform._fov),u_fog_color:fe,u_fog_horizon_blend:B.properties.get("horizon-blend"),u_fog_temporal_offset:de}})(this,w,y,E))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,d=t.createTexture();return t.bindTexture(t.TEXTURE_2D,d),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}}class Js{constructor(t=0,d=0,y=0,w=0){if(isNaN(t)||t<0||isNaN(d)||d<0||isNaN(y)||y<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=d,this.left=y,this.right=w}interpolate(t,d,y){return null!=d.top&&null!=t.top&&(this.top=h.number(t.top,d.top,y)),null!=d.bottom&&null!=t.bottom&&(this.bottom=h.number(t.bottom,d.bottom,y)),null!=d.left&&null!=t.left&&(this.left=h.number(t.left,d.left,y)),null!=d.right&&null!=t.right&&(this.right=h.number(t.right,d.right,y)),this}getCenter(t,d){const y=h.clamp((this.left+t-this.right)/2,0,t),w=h.clamp((this.top+d-this.bottom)/2,0,d);return new h.pointGeometry(y,w)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ur(_,t){return[_[4*t],_[4*t+1],_[4*t+2],_[4*t+3]]}function us(_,t,d){_[4*t+0]=d[0],_[4*t+1]=d[1],_[4*t+2]=d[2],_[4*t+3]=d[3]}function co(_,t){const d=Ur(_,3);h.fromQuat(_,t),us(_,3,d)}function Ns(_,t){us(_,3,[t[0],t[1],t[2],1])}function wr(_,t){const d=h.identity$1([]);return h.rotateZ$1(d,d,-t),h.rotateX$1(d,d,-_),d}function zs(_,t){const d=[_[0],_[1],0],y=[t[0],t[1],0];if(h.length(d)>=1e-15){const A=h.normalize([],d);h.scale(y,A,h.dot(y,A)),t[0]=y[0],t[1]=y[1]}const w=h.cross([],t,_);if(h.len(w)<1e-15)return null;const E=Math.atan2(-w[1],w[0]);return wr(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),E)}class Fo{constructor(t,d){this.position=t,this.orientation=d}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(d){if(!d)return;const y=Array.isArray(d)?new h.MercatorCoordinate(d[0],d[1],d[2]):d;return y.x=h.wrap(y.x,0,1),y}(t):t}lookAtPoint(t,d){if(this.orientation=null,!this.position)return;const y=this._elevation?this._elevation.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(t)):0,w=this.position,E=h.MercatorCoordinate.fromLngLat(t,y),A=[E.x-w.x,E.y-w.y,E.z-w.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=zs(A,d)}setPitchBearing(t,d){this.orientation=wr(h.degToRad(t),h.degToRad(-d))}}class mo{constructor(t,d){this._transform=h.identity([]),this._orientation=h.identity$1([]),d&&(this._orientation=d,co(this._transform,this._orientation)),t&&Ns(this._transform,t)}get mercatorPosition(){const t=this.position;return new h.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=Ur(this._transform,3);return[t[0],t[1],t[2]]}set position(t){Ns(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,co(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,d){this._orientation=wr(t,d),co(this._transform,this._orientation)}forward(){const t=Ur(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=Ur(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=Ur(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,d){const y=new Float64Array(16);return h.invert(y,this.getWorldToCamera(t,d)),y}getWorldToCameraPosition(t,d,y){const w=this.position;h.scale(w,w,-t);const E=new Float64Array(16);return h.fromScaling(E,[y,y,y]),h.translate(E,E,w),E[10]*=d,E}getWorldToCamera(t,d){const y=new Float64Array(16),w=new Float64Array(4),E=this.position;return h.conjugate(w,this._orientation),h.scale(E,E,-t),h.fromQuat(y,w),h.translate(y,y,E),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=d,y[9]*=d,y[10]*=d,y[11]*=d,y}getCameraToClipPerspective(t,d,y,w){const E=new Float64Array(16);return h.perspective(E,t,d,y,w),E}getDistanceToElevation(t){const d=0===t?0:h.mercatorZfromAltitude(t,this.position[1]),y=this.forward();return(d-this.position[2])/y[2]}clone(){return new mo([...this.position],[...this.orientation])}}class Ul{constructor(t,d,y,w,E){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===E||E,this._minZoom=t||0,this._maxZoom=d||22,this._minPitch=y??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Js,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new mo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Ul(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return h.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const d=-h.wrap(t,-180,180)*Math.PI/180;var y,w,E,A,B,H,Q,se,de,fe;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(y=new h.ARRAY_TYPE(4),h.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),w=this.rotationMatrix,A=this.angle,B=(E=this.rotationMatrix)[0],H=E[1],Q=E[2],se=E[3],de=Math.sin(A),fe=Math.cos(A),w[0]=B*fe+Q*de,w[1]=H*fe+se*de,w[2]=B*-de+Q*fe,w[3]=H*-de+se*fe)}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const d=h.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const d=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const t=this.cameraToCenterDistance/this.worldSize,d=h.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(d+t)}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let w=0,E=0;for(let A=0;A<d.length;A++){const B=new h.pointGeometry(d[A][0]*this.width,y+d[A][1]*(this.height-y)),H=t.pointCoordinate(B);if(!H)continue;const Q=1/Math.hypot(H[0]-this._camera.position[0],H[1]-this._camera.position[1]);w+=H[3]*Q,E+=Q}return 0===E?NaN:w/E}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const t=this._cameraZoom,d=this._elevation.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(this.center)),y=h.mercatorZfromAltitude(d,this.center.lat),w=this._mercatorZfromZoom(t),E=this._mercatorZfromZoom(this._maxZoom),A=Math.max(w-y,E);this._setZoom(this._zoomFromMercatorZ(A))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(t){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let y;y=t.z<this._camera.position[2]?[d.x,d.y,d.z]:[t.x,t.y,t.z];const w=h.length(h.sub([],this._camera.position,y));return h.clamp(this._zoomFromMercatorZ(w),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height||!t.position&&!t.orientation)return;this._updateCameraState();let d=!1;if(t.orientation&&!h.exactEquals(t.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(t.orientation)),t.position){const y=[t.position.x,t.position.y,t.position.z];h.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,d=new Fo;return d.position=new h.MercatorCoordinate(t[0],t[1],t[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this._renderWorldCopies,d}_setCameraOrientation(t){if(!h.length$1(t))return!1;h.normalize$1(t,t);const d=h.transformQuat([],[0,0,-1],t),y=h.transformQuat([],[0,-1,0],t);if(y[2]<0)return!1;const w=zs(d,y);return!!w&&(this._camera.orientation=w,!0)}_setCameraPosition(t){const d=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,w=this.cameraToCenterDistance;t[2]=h.clamp(t[2],w/y,w/d),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,d,y){this._unmodified=!1,this._edgeInsets.interpolate(t,d,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const d=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(t){const d=[new h.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const y=this.pointCoordinate(new h.pointGeometry(0,0)),w=this.pointCoordinate(new h.pointGeometry(this.width,0)),E=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),A=this.pointCoordinate(new h.pointGeometry(0,this.height)),B=Math.floor(Math.min(y.x,w.x,E.x,A.x)),H=Math.floor(Math.max(y.x,w.x,E.x,A.x)),Q=1;for(let se=B-Q;se<=H+Q;se++)0!==se&&d.push(new h.UnwrappedTileID(se,t))}return d}coveringTiles(t){let d=this.coveringZoomLevel(t);const y=d,w=this.elevation&&!t.isTerrainDEM;if(void 0!==t.minzoom&&d<t.minzoom)return[];void 0!==t.maxzoom&&d>t.maxzoom&&(d=t.maxzoom);const E=h.MercatorCoordinate.fromLngLat(this.center),A=1<<d,B=[A*E.x,A*E.y,0],H=vt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d),Q=this.pointCoordinate(this.getCameraPoint()),se=A*h.mercatorZfromAltitude(1,this.center.lat),de=this._camera.position[2]/h.mercatorZfromAltitude(1,this.center.lat),fe=[A*Q.x,A*Q.y,de],be=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),Ie=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?d:0,Re=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,et=t.isTerrainDEM?-Re:this._elevation?this._elevation.getMinElevationBelowMSL():0,Te=at=>({aabb:new Zt([at*A,0,et],[(at+1)*A,A,Re]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),Ge=[],it=[],ut=d,xt=t.reparseOverscaled?y:d,Ke=at=>{if(!this._elevation||!at.tileID)return;const _n=this._elevation.getMinMaxForTile(at.tileID),an=at.aabb;_n?(an.min[2]=_n.min,an.max[2]=_n.max,an.center[2]=(an.min[2]+an.max[2])/2):(at.shouldSplit=hn(at),at.shouldSplit||(an.min[2]=an.max[2]=an.center[2]=this._centerAltitude))},Tt=at=>at*at,rn=Tt((de-this._centerAltitude)*se),hn=at=>{if(at.zoom<Ie)return!0;if(at.zoom===ut)return!1;if(null!=at.shouldSplit)return at.shouldSplit;const _n=at.aabb.distanceX(fe),an=at.aabb.distanceY(fe);let ai=rn;w&&(ai=Tt(at.aabb.distanceZ(fe)*se));const qn=_n*_n+an*an+ai;return qn<Tt((1<<ut-at.zoom)*be*((In,Yn)=>{if(Yn*Tt(.707)<In)return 1;const bi=Math.sqrt(Yn/In);return bi/(1.4144271570014144+(Math.pow(1.1,bi-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ai,rn),qn))};if(this._renderWorldCopies)for(let at=1;at<=3;at++)Ge.push(Te(-at)),Ge.push(Te(at));for(Ge.push(Te(0));Ge.length>0;){const at=Ge.pop(),_n=at.x,an=at.y;let ai=at.fullyVisible;if(!ai){const qn=at.aabb.intersects(H);if(0===qn)continue;ai=2===qn}if(at.zoom!==ut&&hn(at))for(let qn=0;qn<4;qn++){const In=(_n<<1)+qn%2,Yn=(an<<1)+(qn>>1),bi={aabb:at.aabb.quadrant(qn),zoom:at.zoom+1,x:In,y:Yn,wrap:at.wrap,fullyVisible:ai,tileID:void 0,shouldSplit:void 0};w&&(bi.tileID=new h.OverscaledTileID(at.zoom+1===ut?xt:at.zoom+1,at.wrap,at.zoom+1,In,Yn),Ke(bi)),Ge.push(bi)}else{const qn=at.zoom===ut?xt:at.zoom;if(t.minzoom&&t.minzoom>qn)continue;const In=B[0]-(.5+_n+(at.wrap<<at.zoom))*(1<<d-at.zoom),Yn=B[1]-.5-an,bi=at.tileID?at.tileID:new h.OverscaledTileID(qn,at.wrap,at.zoom,_n,an);it.push({tileID:bi,distanceSq:In*In+Yn*Yn})}}if(this.fogCullDistSq){const at=this.fogCullDistSq;it.splice(0,it.length,...it.filter(_n=>{const an=[0,0,0,1],ai=[h.EXTENT,h.EXTENT,0,1],qn=this.calculateFogTileMatrix(_n.tileID.toUnwrapped());h.transformMat4(an,an,qn),h.transformMat4(ai,ai,qn);const In=h.getAABBPointSquareDist(an,ai);if(0===In)return!0;let Yn=!1;const bi=this.horizonLineFromTop();if(In>at&&0!==bi){const Ji=this.calculateProjMatrix(_n.tileID.toUnwrapped());let Er;w&&this._elevation&&(Er=this._elevation.getMinMaxForTile(_n.tileID)),Er||(Er={min:et,max:Re});const Ar=h.furthestTileCorner(this.bearing),Ri=[Ar[0]*h.EXTENT,Ar[1]*h.EXTENT,Er.max];h.transformMat4$1(Ri,Ri,Ji),Yn=(1-Ri[1])*this.height*.5<bi}return In<at||Yn}))}return it.sort((at,_n)=>at.distanceSq-_n.distanceSq).map(at=>at.tileID)}resize(t,d){this.width=t,this.height=d,this.pixelsToGLUnits=[2/t,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const d=h.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.pointGeometry(h.mercatorXfromLng(t.lng)*this.worldSize,h.mercatorYfromLat(d)*this.worldSize)}unproject(t){return new h.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,d){const y=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(t),A=new h.MercatorCoordinate(E.x-(y.x-w.x),E.y-(y.y-w.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(t){return h.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(t,d){const y=d??this._centerAltitude,w=[t.x,t.y,0,1],E=[t.x,t.y,1,1];h.transformMat4(w,w,this.pixelMatrixInverse),h.transformMat4(E,E,this.pixelMatrixInverse);const A=E[3];h.scale$2(w,w,1/w[3]),h.scale$2(E,E,1/A);const B=w[2],H=E[2];return{p0:w,p1:E,t:B===H?0:(y-B)/(H-B)}}screenPointToMercatorRay(t){const d=[t.x,t.y,0,1],y=[t.x,t.y,1,1];return h.transformMat4(d,d,this.pixelMatrixInverse),h.transformMat4(y,y,this.pixelMatrixInverse),h.scale$2(d,d,1/d[3]),h.scale$2(y,y,1/y[3]),d[2]=h.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,y[2]=h.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,h.scale$2(d,d,1/this.worldSize),h.scale$2(y,y,1/this.worldSize),new At([d[0],d[1],d[2]],h.normalize([],h.sub([],y,d)))}rayIntersectionCoordinate(t){const{p0:d,p1:y,t:w}=t,E=h.mercatorZfromAltitude(d[2],this._center.lat),A=h.mercatorZfromAltitude(y[2],this._center.lat);return new h.MercatorCoordinate(h.number(d[0],y[0],w)/this.worldSize,h.number(d[1],y[1],w)/this.worldSize,h.number(E,A,w))}pointCoordinate(t){const d=this.horizonLineFromTop(!1),y=new h.pointGeometry(t.x,Math.max(d,t.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(y))}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const d=this.elevation;let y=this.elevation.pointCoordinate(t);if(y)return new h.MercatorCoordinate(y[0],y[1],y[2]);let w=0,E=this.horizonLineFromTop();if(t.y>E)return this.pointCoordinate(t);const A=.02*E,B=t.clone();for(let H=0;H<10&&E-w>A;H++){B.y=h.number(w,E,.66);const Q=d.pointCoordinate(B);Q?(E=B.y,y=Q):w=B.y}return y?new h.MercatorCoordinate(y[0],y[1],y[2]):this.pointCoordinate(t)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const d=this.horizonLineFromTop();return t.y<d}}_coordinatePoint(t,d){const y=d&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,w=[t.x*this.worldSize,t.y*this.worldSize,y+t.toAltitude(),1];return h.transformMat4(w,w,this.pixelMatrix),w[3]>0?new h.pointGeometry(w[0]/w[3],w[1]/w[3]):new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new h.LngLatBounds).extend(this.pointLocation(new h.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new h.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new h.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new h.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const t=this.elevation,d=t.visibleDemTiles.reduce((w,E)=>{if(E.dem){const A=E.dem.tree;w.min=Math.min(w.min,A.minimums[0]),w.max=Math.max(w.max,A.maximums[0])}return w},{min:Number.MAX_VALUE,max:0});d.min*=t.exaggeration(),d.max*=t.exaggeration();const y=this.horizonLineFromTop();return[new h.pointGeometry(0,y),new h.pointGeometry(this.width,y),new h.pointGeometry(this.width,this.height),new h.pointGeometry(0,this.height)].reduce((w,E)=>w.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(E,d.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(E,d.max)))),new h.LngLatBounds)}horizonLineFromTop(t=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-.97*d;return t?Math.max(0,y):y}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,d){const y=t.canonical,w=d/this.zoomScale(y.z),E=y.x+Math.pow(2,y.z)*t.wrap,A=h.identity(new Float64Array(16));return h.translate(A,A,[E*w,y.y*w,0]),h.scale$1(A,A,[w/h.EXTENT,w/h.EXTENT,1]),A}calculateFogTileMatrix(t){const d=t.key,y=this._fogTileMatrixCache;if(y[d])return y[d];const w=this.calculatePosMatrix(t,this.cameraWorldSize);return h.multiply(w,this.worldToFogMatrix,w),y[d]=new Float32Array(w),y[d]}calculateProjMatrix(t,d=!1){const y=t.key,w=d?this._alignedProjMatrixCache:this._projMatrixCache;if(w[y])return w[y];const E=this.calculatePosMatrix(t,this.worldSize);return h.multiply(E,d?this.alignedProjMatrix:this.projMatrix,E),w[y]=new Float32Array(E),w[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const d=this._camera.position,y=this._camera.forward();if(d[2]<=0||y[2]>=0)return;const w=h.mercatorZfromAltitude(1,this._center.lat);d[2]/=w,y[2]/=w,h.normalize(y,y);const E=t.raycast(d,y,t.exaggeration());if(E){const A=h.scaleAndAdd([],d,y,E),B=new h.MercatorCoordinate(A[0],A[1],h.mercatorZfromAltitude(A[2],h.latFromMercatorY(A[1]))),H=this._camera.position,Q=B.z+h.length([B.x-H[0],B.y-H[1],B.z-H[2]]);this._cameraZoom=this._zoomFromMercatorZ(Q),this._centerAltitude=B.toAltitude(),this._center=B.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const d=t.getAtPointOrZero(this._camera.mercatorPosition),y=this._minimumHeightOverTerrain()*Math.cos(h.degToRad(this._maxPitch)),w=h.mercatorZfromAltitude(d,this._center.lat),E=this._camera.position[2]-w;if(E<y){const A=h.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),B=this._camera.mercatorPosition,H=[A.x-B.x,A.y-B.y,A.z-B.z],Q=h.length(H);H[2]-=y-E;const se=h.length(H);if(0===se)return;h.scale(H,H,Q/se),this._camera.position=[A.x-H[0],A.y-H[1],A.z-H[2]],this._camera.orientation=zs(H,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,d,y,w,E=-90,A=90,B=-180,H=180;const Q=this.size,se=this._unmodified;if(this.latRange){const be=this.latRange;E=h.mercatorYfromLat(be[1])*this.worldSize,A=h.mercatorYfromLat(be[0])*this.worldSize,t=A-E<Q.y?Q.y/(A-E):0}if(this.lngRange){const be=this.lngRange;B=h.mercatorXfromLng(be[0])*this.worldSize,H=h.mercatorXfromLng(be[1])*this.worldSize,d=H-B<Q.x?Q.x/(H-B):0}const de=this.point,fe=Math.max(d||0,t||0);if(fe)return this.center=this.unproject(new h.pointGeometry(d?(H+B)/2:de.x,t?(A+E)/2:de.y)),this.zoom+=this.scaleZoom(fe),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const be=de.y,Ie=Q.y/2;be-Ie<E&&(w=E+Ie),be+Ie>A&&(w=A-Ie)}if(this.lngRange){const be=de.x,Ie=Q.x/2;be-Ie<B&&(y=B+Ie),be+Ie>H&&(y=H-Ie)}void 0===y&&void 0===w||(this.center=this.unproject(new h.pointGeometry(void 0!==y?y:de.x,void 0!==w?w:de.y))),this._constrainCameraAltitude(),this._unmodified=se,this._constraining=!1}_minZoomForBounds(){const t=(w,E)=>Math.log2(w/(this.tileSize*Math.abs(E[1]-E[0])));let d=0;if(this.latRange){const w=this.latRange;d=t(this.height,[h.mercatorYfromLat(w[0]),h.mercatorYfromLat(w[1])])}let y=0;if(this.lngRange){const w=this.lngRange;y=t(this.width,[h.mercatorXfromLng(w[0]),h.mercatorXfromLng(w[1])])}return Math.max(d,y)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const d=this.pixelsPerMeter;this._updateCameraState();const y=Math.PI/2+this._pitch,w=this.fovAboveCenter,E=this.elevation?this.elevation.getMinElevationBelowMSL()*d:0,A=(this._camera.position[2]*this.worldSize-E)/Math.cos(this._pitch),B=Math.sin(w)*A/Math.sin(h.clamp(Math.PI-y-w,.01,Math.PI-.01)),H=this.point,Q=H.x,se=H.y,de=Math.cos(Math.PI/2-this._pitch)*B+A,fe=Math.min(1.01*de,A*(1/this._horizonShift)),be=this.height/50,Ie=this._camera.getWorldToCamera(this.worldSize,d),Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,be,fe);Re[8]=2*-t.x/this.width,Re[9]=2*t.y/this.height;let et=h.mul$1([],Re,Ie);this.mercatorMatrix=h.scale$1([],et,[this.worldSize,this.worldSize,this.worldSize/d]),this.projMatrix=et,this.invProjMatrix=h.invert(new Float64Array(16),this.projMatrix);const Te=new Float32Array(16);h.identity(Te),h.scale$1(Te,Te,[1,-1,1]),h.rotateX(Te,Te,this._pitch),h.rotateZ(Te,Te,this.angle);const Ge=h.perspective(new Float32Array(16),this._fov,this.width/this.height,be,fe),it=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ge[8]=2*-t.x/this.width,Ge[9]=2*(t.y+it)/this.height,this.skyboxMatrix=h.multiply(Te,Ge,Te);const ut=this.width%2/2,xt=this.height%2/2,Ke=Math.cos(this.angle),Tt=Math.sin(this.angle),rn=Q-Math.round(Q)+Ke*ut+Tt*xt,hn=se-Math.round(se)+Ke*xt+Tt*ut,at=new Float64Array(et);if(h.translate(at,at,[rn>.5?rn-1:rn,hn>.5?hn-1:hn,0]),this.alignedProjMatrix=at,et=h.create$1(),h.scale$1(et,et,[this.width/2,-this.height/2,1]),h.translate(et,et,[1,-1,0]),this.labelPlaneMatrix=et,et=h.create$1(),h.scale$1(et,et,[1,-1,1]),h.translate(et,et,[-1,-1,0]),h.scale$1(et,et,[2/this.width,2/this.height,1]),this.glCoordMatrix=et,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),et=h.invert(new Float64Array(16),this.pixelMatrix),!et)throw new Error("failed to invert matrix");this.pixelMatrixInverse=et,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,d=this.cameraPixelsPerMeter,y=this._camera.position,w=1/this.height,E=[t,t,d];h.scale(E,E,w),h.scale(y,y,-1),h.multiply$1(y,y,E);const A=h.create$1();h.translate(A,A,y),h.scale$1(A,A,E),this.mercatorFogMatrix=A,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,d,w)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const t=this._camera.forward(),d=this.cameraToCenterDistance,y=this.point,w=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-h.mercatorZfromAltitude(this._centerAltitude,this.center.lat),E=this.cameraToCenterDistance/w;this._camera.position=[y.x/this.worldSize-t[0]*d/E,y.y/this.worldSize-t[1]*d/E,h.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*d/E]}_translateCameraConstrained(t){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=t[2];let w=1;y>0&&(w=Math.min((d-this._camera.position[2])/y,1)),this._camera.position=h.scaleAndAdd([],this._camera.position,t,w),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,d=this._camera.forward(),{pitch:y,bearing:w}=this._camera.getPitchBearing(),E=h.mercatorZfromAltitude(this._centerAltitude,this.center.lat),A=this._mercatorZfromZoom(this._maxZoom)*Math.cos(h.degToRad(this._maxPitch)),B=Math.max((t[2]-E)/Math.cos(y),A),H=this._zoomFromMercatorZ(B);h.scaleAndAdd(t,t,d,B),this._pitch=h.clamp(y,h.degToRad(this.minPitch),h.degToRad(this.maxPitch)),this.angle=h.wrap(w,-Math.PI,Math.PI),this._setZoom(h.clamp(H,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new h.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(t,d){const y=Math.min(t.x,d.x),w=Math.max(t.x,d.x),E=Math.min(t.y,d.y),A=Math.max(t.y,d.y),B=[new h.pointGeometry(y,E),new h.pointGeometry(w,A),new h.pointGeometry(y,A),new h.pointGeometry(w,E)],H=this._renderWorldCopies?-3:0,Q=this._renderWorldCopies?4:1;for(const se of B){const de=this.pointRayIntersection(se);if(de.t<0)return!0;const fe=this.rayIntersectionCoordinate(de);if(fe.x<H||fe.y<0||fe.x>Q||fe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+h.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new h.pointGeometry(0,0),new h.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,d){const y=h.length(h.sub([],this._camera.position,t)),w=this._zoomFromMercatorZ(y)+d;return y-this._mercatorZfromZoom(w)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,t))}}class Cs{constructor(t){this._hashName=t&&encodeURIComponent(t),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,y){let w=!1,E=null;const A=()=>{E=null,w&&(d(),E=setTimeout(A,300),w=!1)};return()=>(w=!0,E||A(),E)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,h.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return h.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const d=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,w=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,w),A=Math.round(d.lng*E)/E,B=Math.round(d.lat*E)/E,H=this._map.getBearing(),Q=this._map.getPitch();let se="";if(se+=t?`/${A}/${B}/${y}`:`${y}/${B}/${A}`,(H||Q)&&(se+="/"+Math.round(10*H)/10),Q&&(se+=`/${Math.round(Q)}`),this._hashName){const de=this._hashName;let fe=!1;const be=h.window.location.hash.slice(1).split("&").map(Ie=>{const Re=Ie.split("=")[0];return Re===de?(fe=!0,`${Re}=${se}`):Ie}).filter(Ie=>Ie);return fe||be.push(`${de}=${se}`),`#${be.join("&")}`}return`#${se}`}_getCurrentHash(){const t=h.window.location.hash.replace("#","");if(this._hashName){let d;return t.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(d=y)}),(d&&d[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:d,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=h.window.location.href.replace(/(#.+)?$/,this.getHashString());h.window.history.replaceState(h.window.history.state,null,t)}}const vr={linearity:.3,easing:h.bezier(0,0,.3,1)},ca=h.extend({deceleration:2500,maxSpeed:1400},vr),ea=h.extend({deceleration:20,maxSpeed:1400},vr),ta=h.extend({deceleration:1e3,maxSpeed:360},vr),Ca=h.extend({deceleration:1e3,maxSpeed:90},vr);class so{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,d=h.exported.now();for(;t.length>0&&d-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const E=Wr(d.pan.mag(),y,h.extend({},ca,t||{}));w.offset=d.pan.mult(E.amount/d.pan.mag()),w.center=this._map.transform.center,Ha(w,E)}if(d.zoom){const E=Wr(d.zoom,y,ea);w.zoom=this._map.transform.zoom+E.amount,Ha(w,E)}if(d.bearing){const E=Wr(d.bearing,y,ta);w.bearing=this._map.transform.bearing+h.clamp(E.amount,-179,179),Ha(w,E)}if(d.pitch){const E=Wr(d.pitch,y,Ca);w.pitch=this._map.transform.pitch+E.amount,Ha(w,E)}if(w.zoom||w.bearing){const E=void 0===d.pinchAround?d.around:d.pinchAround;w.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),h.extend(w,{noMoveStart:!0})}}function Ha(_,t){(!_.duration||_.duration<t.duration)&&(_.duration=t.duration,_.easing=t.easing)}function Wr(_,t,d){const{maxSpeed:y,linearity:w,deceleration:E}=d,A=h.clamp(_*w/(t/1e3),-y,y),B=Math.abs(A)/(E*w);return{easing:d.easing,duration:1e3*B,amount:A*(B/2)}}class uo extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,d,y,w={}){const E=me.mousePos(d.getCanvasContainer(),y),A=d.unproject(E);super(t,h.extend({point:E,lngLat:A,originalEvent:y},w)),this._defaultPrevented=!1,this.target=d}}class jl extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,d,y){const w="touchend"===t?y.changedTouches:y.touches,E=me.touchPos(d.getCanvasContainer(),w),A=E.map(H=>d.unproject(H)),B=E.reduce((H,Q,se,de)=>H.add(Q.div(de.length)),new h.pointGeometry(0,0));super(t,{points:E,point:B,lngLats:A,lngLat:d.unproject(B),originalEvent:y}),this._defaultPrevented=!1}}class Lo extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,d,y){super(t,{originalEvent:y}),this._defaultPrevented=!1}}class Cl{constructor(t,d){this._map=t,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Lo(t.type,this._map,t))}mousedown(t,d){return this._mousedownPos=d,this._firePreventable(new uo(t.type,this._map,t))}mouseup(t){this._map.fire(new uo(t.type,this._map,t))}click(t,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new uo(t.type,this._map,t))}dblclick(t){return this._firePreventable(new uo(t.type,this._map,t))}mouseover(t){this._map.fire(new uo(t.type,this._map,t))}mouseout(t){this._map.fire(new uo(t.type,this._map,t))}touchstart(t){return this._firePreventable(new jl(t.type,this._map,t))}touchmove(t){this._map.fire(new jl(t.type,this._map,t))}touchend(t){this._map.fire(new jl(t.type,this._map,t))}touchcancel(t){this._map.fire(new jl(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ai{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new uo(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new uo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new uo(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $a{constructor(t,d){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,d){this.isEnabled()&&t.shiftKey&&0===t.button&&(me.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(t,d){if(!this._active)return;const y=d;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=y,this._box||(this._box=me.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const E=Math.min(w.x,y.x),A=Math.max(w.x,y.x),B=Math.min(w.y,y.y),H=Math.max(w.y,y.y);this._map._requestDomTask(()=>{this._box&&(me.setTransform(this._box,`translate(${E}px,${B}px)`),this._box.style.width=A-E+"px",this._box.style.height=H-B+"px")})}mouseupWindow(t,d){if(!this._active||0!==t.button)return;const y=this._startPos,w=d;if(this.reset(),me.suppressClick(),y.x!==w.x||y.y!==w.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:E=>E.fitScreenCoordinates(y,w,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(me.remove(this._box),this._box=null),me.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,d){return this._map.fire(new h.Event(t,{originalEvent:d}))}}function nl(_,t){const d={};for(let y=0;y<_.length;y++)d[_[y].identifier]=t[y];return d}class il{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,d,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),y.length===this.numTouches&&(this.centroid=function(w){const E=new h.pointGeometry(0,0);for(const A of w)E._add(A);return E.div(w.length)}(d),this.touches=nl(y,d)))}touchmove(t,d,y){if(this.aborted||!this.centroid)return;const w=nl(y,d);for(const E in this.touches){const A=this.touches[E],B=w[E];(!B||B.dist(A)>30)&&(this.aborted=!0)}}touchend(t,d,y){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===y.length){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class fc{constructor(t){this.singleTap=new il(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,d,y){this.singleTap.touchstart(t,d,y)}touchmove(t,d,y){this.singleTap.touchmove(t,d,y)}touchend(t,d,y){const w=this.singleTap.touchend(t,d,y);if(w){const E=t.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(w)<30;if(E&&A||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class El{constructor(){this._zoomIn=new fc({numTouches:1,numTaps:2}),this._zoomOut=new fc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,d,y){this._zoomIn.touchstart(t,d,y),this._zoomOut.touchstart(t,d,y)}touchmove(t,d,y){this._zoomIn.touchmove(t,d,y),this._zoomOut.touchmove(t,d,y)}touchend(t,d,y){const w=this._zoomIn.touchend(t,d,y),E=this._zoomOut.touchend(t,d,y);return w?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()+1,around:A.unproject(w)},{originalEvent:t})}):E?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()-1,around:A.unproject(E)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const mc={0:1,2:2};class rl{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,d){return!1}_move(t,d){return{}}mousedown(t,d){if(this._lastPoint)return;const y=me.mouseButton(t);this._correctButton(t,y)&&(this._lastPoint=d,this._eventButton=y)}mousemoveWindow(t,d){const y=this._lastPoint;if(y)if(t.preventDefault(),function(w,E){const A=mc[E];return void 0===w.buttons||(w.buttons&A)!==A}(t,this._eventButton))this.reset();else if(this._moved||!(d.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(y,d)}mouseupWindow(t){this._lastPoint&&me.mouseButton(t)===this._eventButton&&(this._moved&&me.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mo extends rl{mousedown(t,d){super.mousedown(t,d),this._lastPoint&&(this._active=!0)}_correctButton(t,d){return 0===d&&!t.ctrlKey}_move(t,d){return{around:d,panDelta:d.sub(t)}}}class gc extends rl{_correctButton(t,d){return 0===d&&t.ctrlKey||2===d}_move(t,d){const y=.8*(d.x-t.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(t){t.preventDefault()}}class Vs extends rl{_correctButton(t,d){return 0===d&&t.ctrlKey||2===d}_move(t,d){const y=-.5*(d.y-t.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(t){t.preventDefault()}}class Ea{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0)}touchstart(t,d,y){return this._calculateTransform(t,d,y)}touchmove(t,d,y){if(this._active&&!(y.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,d,y)}touchend(t,d,y){this._calculateTransform(t,d,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,d,y){y.length>0&&(this._active=!0);const w=nl(y,d),E=new h.pointGeometry(0,0),A=new h.pointGeometry(0,0);let B=0;for(const Q in w){const se=w[Q],de=this._touches[Q];de&&(E._add(se),A._add(se.sub(de)),B++,w[Q]=se)}if(this._touches=w,B<this._minTouches||!A.mag())return;const H=A.div(B);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(B),panDelta:H}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ua{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,d,y){return{}}touchstart(t,d,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([d[0],d[1]]))}touchmove(t,d,y){if(!this._firstTwoTouches)return;t.preventDefault();const[w,E]=this._firstTwoTouches,A=Jr(y,d,w),B=Jr(y,d,E);if(!A||!B)return;const H=this._aroundCenter?null:A.add(B).div(2);return this._move([A,B],H,t)}touchend(t,d,y){if(!this._firstTwoTouches)return;const[w,E]=this._firstTwoTouches,A=Jr(y,d,w),B=Jr(y,d,E);A&&B||(this._active&&me.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Jr(_,t,d){for(let y=0;y<_.length;y++)if(_[y].identifier===d)return t[y]}function Gl(_,t){return Math.log(_/t)/Math.LN2}class Hl extends ua{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,d){const y=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Gl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gl(this._distance,y),pinchAround:d}}}function Nc(_,t){return 180*_.angleWith(t)/Math.PI}class xu extends ua{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,d){const y=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nc(this._vector,y),pinchAround:d}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const d=25/(Math.PI*this._minDiameter)*360,y=Nc(t,this._startVector);return Math.abs(y)<d}}function $l(_){return Math.abs(_.y)>Math.abs(_.x)}class Da extends ua{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,$l(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,d,y){const w=t[0].sub(this._lastPoints[0]),E=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,y.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}}gestureBeginsVertically(t,d,y){if(void 0!==this._valid)return this._valid;const w=t.mag()>=2,E=d.mag()>=2;if(!w&&!E)return;if(!w||!E)return void 0===this._firstMove&&(this._firstMove=y),y-this._firstMove<100&&void 0;const A=t.y>0==d.y>0;return $l(t)&&$l(d)&&A}}const So={panStep:100,bearingStep:15,pitchStep:10};class zc{constructor(){const t=So;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let d=0,y=0,w=0,E=0,A=0;switch(t.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:t.shiftKey?y=-1:(t.preventDefault(),E=-1);break;case 39:t.shiftKey?y=1:(t.preventDefault(),E=1);break;case 38:t.shiftKey?w=1:(t.preventDefault(),A=-1);break;case 40:t.shiftKey?w=-1:(t.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(y=0,w=0),{cameraAnimation:B=>{const H=B.getZoom();B.easeTo({duration:300,easeId:"keyboardHandler",easing:Zl,zoom:d?Math.round(H)+d*(t.shiftKey?2:1):H,bearing:B.getBearing()+y*this._bearingStep,pitch:B.getPitch()+w*this._pitchStep,offset:[-E*this._panStep,-A*this._panStep],center:B.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zl(_){return _*(2-_)}const ol=4.000244140625;class Un{constructor(t,d){this._map=t,this._el=t.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let d=t.deltaMode===h.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const y=h.exported.now(),w=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,0!==d&&d%ol==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),t.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=t,this._delta-=d,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=me.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform,d=()=>t._terrainEnabled()?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const H="wheel"===this._type&&Math.abs(this._delta)>ol?this._wheelZoomRate:this._defaultZoomRate;let Q=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&0!==Q&&(Q=1/Q);const se=d(),de=Math.pow(2,se),fe="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):de;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(fe*Q))),"wheel"===this._type&&(this._startZoom=d(),this._easing=this._smoothOutEasing(200)),this._delta=0}const y="number"==typeof this._targetZoom?this._targetZoom:d(),w=this._startZoom,E=this._easing;let A,B=!1;if("wheel"===this._type&&w&&E){const H=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),Q=E(H);A=h.number(w,y,Q),H<1?this._frameId||(this._frameId=!0):B=!0}else A=y,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:A-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let d=h.ease;if(this._prevEase){const y=this._prevEase,w=(h.exported.now()-y.start)/y.duration,E=y.easing(w+.01)-y.easing(w),A=.27/Math.sqrt(E*E+1e-4)*.01,B=Math.sqrt(.0729-A*A);d=h.bezier(A,B,.25,1)}return this._prevEase={start:h.exported.now(),duration:t,easing:d},d}reset(){this._active=!1}}class Dl{constructor(t,d){this._clickZoom=t,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ml{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,d){return t.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(t.shiftKey?-1:1),around:y.unproject(d)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wl{constructor(){this._tap=new fc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,d,y){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=d[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(t,d,y))}touchmove(t,d,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const w=d[0],E=w.y-this._swipePoint.y;return this._swipePoint=w,t.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(t,d,y)}touchend(t,d,y){this._tapTime?this._swipePoint&&0===y.length&&this.reset():this._tap.touchend(t,d,y)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Za{constructor(t,d,y){this._el=t,this._mousePan=d,this._touchPan=y}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vc{constructor(t,d,y){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=d,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wu{constructor(t,d,y,w){this._el=t,this._touchZoom=d,this._touchRotate=y,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const F=_=>_.zoom||_.drag||_.pitch||_.rotate;class O extends h.Event{}class P{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,d){const y=h.sub([],d,t);this.radius=h.length(y[2]<0?h.div([],y,this.constants):[y[0],y[1],0])}projectRay(t){h.div(t,t,this.constants),h.normalize(t,t),h.mul$2(t,t,this.constants);const d=h.scale([],t,this.radius);if(d[2]>0){const y=h.scale([],[0,0,1],h.dot(d,[0,0,1])),w=h.scale([],h.normalize([],[d[0],d[1],0]),this.radius),E=h.add([],d,h.scale([],h.sub([],h.add([],w,y),d),2));d[0]=E[0],d[1]=E[1]}return d}}function Z(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class ie{constructor(t,d){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new so(t),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new P,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),h.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[h.window.document,"mousemove",{capture:!0}],[h.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[h.window,"blur",void 0]];for(const[w,E,A]of this._listeners)me.addEventListener(w,E,w===h.window.document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[t,d,y]of this._listeners)me.removeEventListener(t,d,t===h.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(t){const d=this._map,y=d.getCanvasContainer();this._add("mapEvent",new Cl(d,t));const w=d.boxZoom=new $a(d,t);this._add("boxZoom",w);const E=new El,A=new Ml;d.doubleClickZoom=new Dl(A,E),this._add("tapZoom",E),this._add("clickZoom",A);const B=new Wl;this._add("tapDragZoom",B);const H=d.touchPitch=new Da;this._add("touchPitch",H);const Q=new gc(t),se=new Vs(t);d.dragRotate=new Vc(t,Q,se),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const de=new Mo(t),fe=new Ea(t);d.dragPan=new Za(y,de,fe),this._add("mousePan",de),this._add("touchPan",fe,["touchZoom","touchRotate"]);const be=new xu,Ie=new Hl;d.touchZoomRotate=new wu(y,Ie,be,B),this._add("touchRotate",be,["touchPan","touchZoom"]),this._add("touchZoom",Ie,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ai(d));const Re=d.scrollZoom=new Un(d,this);this._add("scrollZoom",Re,["mousePan"]);const et=d.keyboard=new zc;this._add("keyboard",et);for(const Te of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[Te]&&d[Te].enable(t[Te])}_add(t,d,y){this._handlers.push({handlerName:t,handler:d,allowed:y}),this._handlersById[t]=d}stop(t){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(F(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,d,y){for(const w in t)if(w!==y&&(!d||d.indexOf(w)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const d=[];for(const y of t)this._el.contains(y.target)&&d.push(y);return d}handleEvent(t,d){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const y="renderFrame"===t.type,w=y?void 0:t,E={needsRenderFrame:!1},A={},B={},H=t.touches?this._getMapTouches(t.touches):void 0,Q=H?me.touchPos(this._el,H):y?void 0:me.mousePos(this._el,t);for(const{handlerName:fe,handler:be,allowed:Ie}of this._handlers){if(!be.isEnabled())continue;let Re;this._blockedByActive(B,Ie,fe)?be.reset():be[d||t.type]&&(Re=be[d||t.type](t,Q,H),this.mergeHandlerResult(E,A,Re,fe,w),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||be.isActive())&&(B[fe]=be)}const se={};for(const fe in this._previousActiveHandlers)B[fe]||(se[fe]=w);this._previousActiveHandlers=B,(Object.keys(se).length||Z(E))&&(this._changes.push([E,A,se]),this._triggerRenderFrame()),(Object.keys(B).length||Z(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=E;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))}mergeHandlerResult(t,d,y,w,E){if(!y)return;h.extend(t,y);const A={handlerName:w,originalEvent:y.originalEvent||E};void 0!==y.zoomDelta&&(d.zoom=A),void 0!==y.panDelta&&(d.drag=A),void 0!==y.pitchDelta&&(d.pitch=A),void 0!==y.bearingDelta&&(d.rotate=A)}_applyChanges(){const t={},d={},y={};for(const[w,E,A]of this._changes)w.panDelta&&(t.panDelta=(t.panDelta||new h.pointGeometry(0,0))._add(w.panDelta)),w.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+w.pitchDelta),void 0!==w.around&&(t.around=w.around),void 0!==w.aroundCoord&&(t.aroundCoord=w.aroundCoord),void 0!==w.pinchAround&&(t.pinchAround=w.pinchAround),w.noInertia&&(t.noInertia=w.noInertia),h.extend(d,E),h.extend(y,A);this._updateMapTransform(t,d,y),this._changes=[]}_updateMapTransform(t,d,y){const w=this._map,E=w.transform,A=Ge=>[Ge.x,Ge.y,Ge.z];if((Ge=>{const it=this._eventsInProgress.drag;return it&&!this._handlersById[it.handlerName].isActive()})()&&!Z(t)){const Ge=E.zoom;E.cameraElevationReference="sea",E.recenterOnTerrain(),E.cameraElevationReference="ground",Ge!==E.zoom&&this._map._update(!0)}if(!Z(t))return this._fireEvents(d,y,!0);let{panDelta:B,zoomDelta:H,bearingDelta:Q,pitchDelta:se,around:de,aroundCoord:fe,pinchAround:be}=t;void 0!==be&&(de=be),(Ge=>d.drag&&!this._eventsInProgress.drag)()&&de&&(this._dragOrigin=A(E.pointCoordinate3D(de)),this._trackingEllipsoid.setup(E._camera.position,this._dragOrigin)),E.cameraElevationReference="sea",w._stop(!0),de=de||w.transform.centerPoint,Q&&(E.bearing+=Q),se&&(E.pitch+=se),E._updateCameraState();const Ie=[0,0,0];if(B){const Ge=E.screenPointToMercatorRay(de),it=E.screenPointToMercatorRay(de.sub(B)),ut=this._trackingEllipsoid.projectRay(Ge.dir),xt=this._trackingEllipsoid.projectRay(it.dir);Ie[0]=xt[0]-ut[0],Ie[1]=xt[1]-ut[1]}const Re=E.zoom,et=[0,0,0];if(H){const Ge=A(fe||E.pointCoordinate3D(de)),it={dir:h.normalize([],h.sub([],Ge,E._camera.position))},ut=E.screenPointToMercatorRay(E.centerPoint);if(it.dir[2]<0){const xt=h.altitudeFromMercatorZ(Ge[2],Ge[1]),Ke=E.rayIntersectionCoordinate(E.pointRayIntersection(E.centerPoint,xt)),Tt=E.zoomDeltaToMovement(A(Ke),H)*(ut.dir[2]/it.dir[2]);h.scale(et,it.dir,Tt)}else if(E._terrainEnabled()){const xt=E.zoomDeltaToMovement(Ge,H);h.scale(et,it.dir,xt)}}const Te=h.add(Ie,Ie,et);E._translateCameraConstrained(Te),H&&Math.abs(E.zoom-Re)>1e-4&&E.recenterOnTerrain(),E.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(d,y,!0)}_fireEvents(t,d,y){const w=F(this._eventsInProgress),E=F(t),A={};for(const se in t){const{originalEvent:de}=t[se];this._eventsInProgress[se]||(A[`${se}start`]=de),this._eventsInProgress[se]=t[se]}!w&&E&&this._fireEvent("movestart",E.originalEvent);for(const se in A)this._fireEvent(se,A[se]);E&&this._fireEvent("move",E.originalEvent);for(const se in t){const{originalEvent:de}=t[se];this._fireEvent(se,de)}const B={};let H;for(const se in this._eventsInProgress){const{handlerName:de,originalEvent:fe}=this._eventsInProgress[se];this._handlersById[de].isActive()||(delete this._eventsInProgress[se],H=d[de]||fe,B[`${se}end`]=H)}for(const se in B)this._fireEvent(se,B[se]);const Q=F(this._eventsInProgress);if(y&&(w||E)&&!Q){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=fe=>0!==fe&&-this._bearingSnap<fe&&fe<this._bearingSnap;se?(de(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:H})):(this._map.fire(new h.Event("moveend",{originalEvent:H})),de(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,d){this._map.fire(new h.Event(t,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new O("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class ve extends h.Evented{constructor(t,d){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=d.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,d){return this.jumpTo({center:t},d)}panBy(t,d,y){return t=h.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,h.extend({offset:t},d),y)}panTo(t,d,y){return this.easeTo(h.extend({center:t},d),y)}getZoom(){return this.transform.zoom}setZoom(t,d){return this.jumpTo({zoom:t},d),this}zoomTo(t,d,y){return this.easeTo(h.extend({zoom:t},d),y)}zoomIn(t,d){return this.zoomTo(this.getZoom()+1,t,d),this}zoomOut(t,d){return this.zoomTo(this.getZoom()-1,t,d),this}getBearing(){return this.transform.bearing}setBearing(t,d){return this.jumpTo({bearing:t},d),this}getPadding(){return this.transform.padding}setPadding(t,d){return this.jumpTo({padding:t},d),this}rotateTo(t,d,y){return this.easeTo(h.extend({bearing:t},d),y)}resetNorth(t,d){return this.rotateTo(0,h.extend({duration:1e3},t),d),this}resetNorthPitch(t,d){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},t),d),this}snapToNorth(t,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,d):this}getPitch(){return this.transform.pitch}setPitch(t,d){return this.jumpTo({pitch:t},d),this}cameraForBounds(t,d){t=h.LngLatBounds.convert(t);const y=d&&d.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),y,d)}_extendCameraOptions(t){const d={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=h.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const y=t.padding;t.padding={top:y,bottom:y,right:y,left:y}}return t.padding=h.extend(d,t.padding),t}_cameraForBoxAndBearing(t,d,y,w){const E=this._extendCameraOptions(w),A=this.transform,B=A.padding,H=A.project(h.LngLat.convert(t)),Q=A.project(h.LngLat.convert(d)),se=H.rotate(-h.degToRad(y)),de=Q.rotate(-h.degToRad(y)),fe=new h.pointGeometry(Math.max(se.x,de.x),Math.max(se.y,de.y)),be=new h.pointGeometry(Math.min(se.x,de.x),Math.min(se.y,de.y)),Ie=fe.sub(be),Re=(A.width-(B.left+B.right+E.padding.left+E.padding.right))/Ie.x,et=(A.height-(B.top+B.bottom+E.padding.top+E.padding.bottom))/Ie.y;if(et<0||Re<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Te=Math.min(A.scaleZoom(A.scale*Math.min(Re,et)),E.maxZoom),Ge="number"==typeof E.offset.x?new h.pointGeometry(E.offset.x,E.offset.y):h.pointGeometry.convert(E.offset),it=new h.pointGeometry((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(y*Math.PI/180),ut=Ge.add(it).mult(A.scale/A.zoomScale(Te));return{center:A.unproject(H.add(Q).div(2).sub(ut)),zoom:Te,bearing:y}}_cameraForBox(t,d,y,w,E){const A=this._extendCameraOptions(E);y=y||0,w=w||0,t=h.LngLat.convert(t),d=h.LngLat.convert(d);const B=this.transform.clone();B.padding=A.padding;const H=this.getFreeCameraOptions(),Q=new h.LngLat(.5*(t.lng+d.lng),.5*(t.lat+d.lat)),se=.5*(y+w);if(B._camera.position[2]<h.mercatorZfromAltitude(se,Q.lat))return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");H.lookAtPoint(Q),B.setFreeCameraOptions(H);const de=h.MercatorCoordinate.fromLngLat(t),fe=h.MercatorCoordinate.fromLngLat(d),be=B.pointRayIntersection(B.centerPoint,se),Ie=[(Re=B.rayIntersectionCoordinate(be)).x,Re.y,Re.z];var Re;const et=B.screenPointToMercatorRay(B.centerPoint);let Te,Ge=0;do{const it=Math.floor(B.zoom),ut=1<<it,xt=Math.min(ut*de.x,ut*fe.x),Ke=Math.min(ut*de.y,ut*fe.y),Tt=Math.max(ut*de.x,ut*fe.x),rn=Math.max(ut*de.y,ut*fe.y),hn=new Zt([xt,Ke,y],[Tt,rn,w]),at=vt.fromInvProjectionMatrix(B.invProjMatrix,B.worldSize,it);if(2!==hn.intersects(at)){Te&&(B._camera.position=h.scaleAndAdd([],B._camera.position,et.dir,-Te),B._updateStateFromCamera());break}const _n=h.sub([],B._camera.position,Ie);Te=.5*h.length(_n),B._camera.position=h.scaleAndAdd([],B._camera.position,et.dir,Te);try{B._updateStateFromCamera()}catch{return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ge<10);return{center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}}fitBounds(t,d,y){return this._fitInternal(this.cameraForBounds(t,d),d,y)}_raycastElevationBox(t,d){const y=this.transform.elevation;if(!y)return;const w=new h.pointGeometry(t.x,d.y),E=new h.pointGeometry(d.x,t.y),A=y.pointCoordinate(t);if(!A)return;const B=y.pointCoordinate(d);if(!B)return;const H=y.pointCoordinate(w);if(!H)return;const Q=y.pointCoordinate(E);if(!Q)return;const se=new h.MercatorCoordinate(A[0],A[1]).toLngLat(),de=new h.MercatorCoordinate(B[0],B[1]).toLngLat(),fe=new h.MercatorCoordinate(H[0],H[1]).toLngLat(),be=new h.MercatorCoordinate(Q[0],Q[1]).toLngLat(),Ie=Math.min(se.lng,Math.min(de.lng,Math.min(fe.lng,be.lng))),Re=Math.min(se.lat,Math.min(de.lat,Math.min(fe.lat,be.lat))),et=Math.max(se.lng,Math.max(de.lng,Math.max(fe.lng,be.lng))),Te=Math.max(se.lat,Math.max(de.lat,Math.max(fe.lat,be.lat))),Ge=Math.min(A[3],Math.min(B[3],Math.min(H[3],Q[3]))),it=Math.max(A[3],Math.max(B[3],Math.max(H[3],Q[3])));return{minLngLat:new h.LngLat(Ie,Re),maxLngLat:new h.LngLat(et,Te),minAltitude:Ge,maxAltitude:it}}fitScreenCoordinates(t,d,y,w,E){let A,B,H,Q;const se=h.pointGeometry.convert(t),de=h.pointGeometry.convert(d),fe=this._raycastElevationBox(se,de);if(fe)A=fe.minLngLat,B=fe.maxLngLat,H=fe.minAltitude,Q=fe.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(se,de))return this;A=this.transform.pointLocation(se),B=this.transform.pointLocation(de)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(t)),this.transform.pointLocation(h.pointGeometry.convert(d)),y,w):this._cameraForBox(A,B,H,Q,w),w,E)}_fitInternal(t,d,y){return t?(delete(d=h.extend(t,d)).padding,d.linear?this.easeTo(d,y):this.flyTo(d,y)):this}jumpTo(t,d){this.stop();const y=this.transform;let w=!1,E=!1,A=!1;return"zoom"in t&&y.zoom!==+t.zoom&&(w=!0,y.zoom=+t.zoom),void 0!==t.center&&(y.center=h.LngLat.convert(t.center)),"bearing"in t&&y.bearing!==+t.bearing&&(E=!0,y.bearing=+t.bearing),"pitch"in t&&y.pitch!==+t.pitch&&(A=!0,y.pitch=+t.pitch),null==t.padding||y.isPaddingEqual(t.padding)||(y.padding=t.padding),this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),w&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),E&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),A&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,d){this.stop();const y=this.transform,w=y.zoom,E=y.pitch,A=y.bearing;y.setFreeCameraOptions(t);const B=w!==y.zoom,H=E!==y.pitch,Q=A!==y.bearing;return this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),B&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),Q&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),H&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d)),this}easeTo(t,d){this._stop(!1,t.easeId),(!1===(t=h.extend({offset:[0,0],duration:500,easing:h.ease},t)).animate||!t.essential&&h.exported.prefersReducedMotion)&&(t.duration=0);const y=this.transform,w=this.getZoom(),E=this.getBearing(),A=this.getPitch(),B=this.getPadding(),H="zoom"in t?+t.zoom:w,Q="bearing"in t?this._normalizeBearing(t.bearing,E):E,se="pitch"in t?+t.pitch:A,de="padding"in t?t.padding:y.padding,fe=h.pointGeometry.convert(t.offset);let be=y.centerPoint.add(fe);const Ie=y.pointLocation(be),Re=h.LngLat.convert(t.center||Ie);this._normalizeCenter(Re);const et=y.project(Ie),Te=y.project(Re).sub(et),Ge=y.zoomScale(H-w);let it,ut;t.around&&(it=h.LngLat.convert(t.around),ut=y.locationPoint(it));const xt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||H!==w,this._rotating=this._rotating||E!==Q,this._pitching=this._pitching||se!==A,this._padding=!y.isPaddingEqual(de),this._easeId=t.easeId,this._prepareEase(d,t.noMoveStart,xt),this._ease(Ke=>{if(this._zooming&&(y.zoom=h.number(w,H,Ke)),this._rotating&&(y.bearing=h.number(E,Q,Ke)),this._pitching&&(y.pitch=h.number(A,se,Ke)),this._padding&&(y.interpolatePadding(B,de,Ke),be=y.centerPoint.add(fe)),it)y.setLocationAtPoint(it,ut);else{const Tt=y.zoomScale(y.zoom-w),rn=H>w?Math.min(2,Ge):Math.max(.5,Ge),hn=Math.pow(rn,1-Ke),at=y.unproject(et.add(Te.mult(Ke*hn)).mult(Tt));y.setLocationAtPoint(y.renderWorldCopies?at.wrap():at,be)}this._fireMoveEvents(d)},Ke=>{y.recenterOnTerrain(),this._afterEase(d,Ke)},t),this}_prepareEase(t,d,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||y.moving||this.fire(new h.Event("movestart",t)),this._zooming&&!y.zooming&&this.fire(new h.Event("zoomstart",t)),this._rotating&&!y.rotating&&this.fire(new h.Event("rotatestart",t)),this._pitching&&!y.pitching&&this.fire(new h.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new h.Event("move",t)),this._zooming&&this.fire(new h.Event("zoom",t)),this._rotating&&this.fire(new h.Event("rotate",t)),this._pitching&&this.fire(new h.Event("pitch",t))}_afterEase(t,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId,this.transform.cameraElevationReference="ground";const y=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new h.Event("zoomend",t)),w&&this.fire(new h.Event("rotateend",t)),E&&this.fire(new h.Event("pitchend",t)),this.fire(new h.Event("moveend",t))}flyTo(t,d){if(!t.essential&&h.exported.prefersReducedMotion){const In=h.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(In,d)}this.stop(),t=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},t);const y=this.transform,w=this.getZoom(),E=this.getBearing(),A=this.getPitch(),B=this.getPadding(),H="zoom"in t?h.clamp(+t.zoom,y.minZoom,y.maxZoom):w,Q="bearing"in t?this._normalizeBearing(t.bearing,E):E,se="pitch"in t?+t.pitch:A,de="padding"in t?t.padding:y.padding,fe=y.zoomScale(H-w),be=h.pointGeometry.convert(t.offset);let Ie=y.centerPoint.add(be);const Re=y.pointLocation(Ie),et=h.LngLat.convert(t.center||Re);this._normalizeCenter(et);const Te=y.project(Re),Ge=y.project(et).sub(Te);let it=t.curve;const ut=Math.max(y.width,y.height),xt=ut/fe,Ke=Ge.mag();if("minZoom"in t){const In=h.clamp(Math.min(t.minZoom,w,H),y.minZoom,y.maxZoom),Yn=ut/y.zoomScale(In-w);it=Math.sqrt(Yn/Ke*2)}const Tt=it*it;function rn(In){const Yn=(xt*xt-ut*ut+(In?-1:1)*Tt*Tt*Ke*Ke)/(2*(In?xt:ut)*Tt*Ke);return Math.log(Math.sqrt(Yn*Yn+1)-Yn)}function hn(In){return(Math.exp(In)-Math.exp(-In))/2}function at(In){return(Math.exp(In)+Math.exp(-In))/2}const _n=rn(0);let an=function(In){return at(_n)/at(_n+it*In)},ai=function(In){return ut*((at(_n)*(hn(Yn=_n+it*In)/at(Yn))-hn(_n))/Tt)/Ke;var Yn},qn=(rn(1)-_n)/it;if(Math.abs(Ke)<1e-6||!isFinite(qn)){if(Math.abs(ut-xt)<1e-6)return this.easeTo(t,d);const In=xt<ut?-1:1;qn=Math.abs(Math.log(xt/ut))/it,ai=function(){return 0},an=function(Yn){return Math.exp(In*it*Yn)}}return t.duration="duration"in t?+t.duration:1e3*qn/("screenSpeed"in t?+t.screenSpeed/it:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=E!==Q,this._pitching=se!==A,this._padding=!y.isPaddingEqual(de),this._prepareEase(d,!1),this._ease(In=>{const Yn=In*qn,bi=1/an(Yn);y.zoom=1===In?H:w+y.scaleZoom(bi),this._rotating&&(y.bearing=h.number(E,Q,In)),this._pitching&&(y.pitch=h.number(A,se,In)),this._padding&&(y.interpolatePadding(B,de,In),Ie=y.centerPoint.add(be));const Ji=1===In?et:y.unproject(Te.add(Ge.mult(ai(Yn))).mult(bi));y.setLocationAtPoint(y.renderWorldCopies?Ji.wrap():Ji,Ie),y._updateCenterElevation(),this._fireMoveEvents(d)},()=>this._afterEase(d),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}if(!t){const y=this.handlers;y&&y.stop(!1)}return this}_ease(t,d,y){!1===y.animate||0===y.duration?(t(1),d()):(this._easeStart=h.exported.now(),this._easeOptions=y,this._onEaseFrame=t,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,d){t=h.wrap(t,-180,180);const y=Math.abs(t-d);return Math.abs(t-360-d)<y&&(t-=360),Math.abs(t+360-d)<y&&(t+=360),t}_normalizeCenter(t){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const y=t.lng-d.center.lng;t.lng+=y>180?-360:y<-180?360:0}}class Ze{constructor(t={}){this.options=t,h.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const d=this.options&&this.options.compact;return this._map=t,this._container=me.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=me.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=me.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){me.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,d){const y=this._map._getUIString(`AttributionControl.${d}`);t.title=y,t.setAttribute("aria-label",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||h.config.ACCESS_TOKEN}];if(t){const y=d.reduce((w,E,A)=>(E.value&&(w+=`${E.key}=${E.value}${A<d.length-1?"&":""}`),w),"?");t.href=`${h.config.FEEDBACK_URL}/${y}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(w=>"string"!=typeof w?"":w)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style._sourceCaches;for(const w in d){const E=d[w];if(E.used){const A=E.getSource();A.attribution&&t.indexOf(A.attribution)<0&&t.push(A.attribution)}}t.sort((w,E)=>w.length-E.length),t=t.filter((w,E)=>{for(let A=E+1;A<t.length;A++)if(t[A].indexOf(w)>=0)return!1;return!0});const y=t.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,t.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ct{constructor(){h.bindAll(["_updateLogo"],this),h.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=me.create("div","mapboxgl-ctrl");const d=me.create("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){me.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const d in t){const y=t[d].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const d=t[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class nn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const d=++this._id;return this._queue.push({callback:t,id:d,cancelled:!1}),d}remove(t){const d=this._currentlyRunning,y=d?this._queue.concat(d):this._queue;for(const w of y)if(w.id===t)return void(w.cancelled=!0)}run(t=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const y of d)if(!y.cancelled&&(y.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Bn(_,t,d){if(_=new h.LngLat(_.lng,_.lat),t){const y=new h.LngLat(_.lng-360,_.lat),w=new h.LngLat(_.lng+360,_.lat),E=360*Math.ceil(Math.abs(_.lng-d.center.lng)/360),A=d.locationPoint(_).distSqr(t),B=t.x<0||t.y<0||t.x>d.width||t.y>d.height;d.locationPoint(y).distSqr(t)<A&&(B||Math.abs(y.lng-d.center.lng)<E)?_=y:d.locationPoint(w).distSqr(t)<A&&(B||Math.abs(w.lng-d.center.lng)<E)&&(_=w)}for(;Math.abs(_.lng-d.center.lng)>180;){const y=d.locationPoint(_);if(y.x>=0&&y.y>=0&&y.x<=d.width&&y.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _}const Ii={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qn(_,t,d){const y=_.classList;for(const w in Ii)y.remove(`mapboxgl-${d}-anchor-${w}`);y.add(`mapboxgl-${d}-anchor-${t}`)}class hr extends h.Evented{constructor(t,d){if(super(),(t instanceof h.window.HTMLElement||d)&&(t=h.extend({element:t},d)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=h.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=me.create("div"),this._element.setAttribute("aria-label","Map marker");const y=me.createNS("http://www.w3.org/2000/svg","svg"),w=41,E=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${w}px`),y.setAttributeNS(null,"width",`${E}px`),y.setAttributeNS(null,"viewBox",`0 0 ${E} ${w}`);const A=me.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const B=me.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const H=me.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");const Q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ge of Q){const it=me.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",Ge.rx),it.setAttributeNS(null,"ry",Ge.ry),H.appendChild(it)}const se=me.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const de=me.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(de);const fe=me.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"fill","#000000");const be=me.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),fe.appendChild(be);const Ie=me.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Re=me.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const et=me.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#000000"),et.setAttributeNS(null,"opacity","0.25"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962");const Te=me.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),Re.appendChild(et),Re.appendChild(Te),B.appendChild(H),B.appendChild(se),B.appendChild(fe),B.appendChild(Ie),B.appendChild(Re),y.appendChild(B),y.setAttributeNS(null,"height",w*this._scale+"px"),y.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(y),this._offset=h.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),Qn(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),me.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=h.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const d=t.code,y=t.charCode||t.keyCode;"Space"!==d&&"Enter"!==d&&32!==y&&13!==y||this.togglePopup()}_onMapClick(t){const d=t.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const d=this._map.unproject(t);let y=!1;if(this._map.getTerrain()){const E=this._map.getFreeCameraOptions();if(E.position){const A=E.position.toLngLat();y=A.distanceTo(d)<.9*A.distanceTo(this._lngLat)}}const w=(1-this._map._queryFogOpacity(d))*(y?.2:1);this._element.style.opacity=`${w}`,this._popup&&this._popup._setOpacity(`${w}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const d=this._map.transform;return!!t&&t.x>=0&&t.x<d.width&&t.y>=0&&t.y<d.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Bn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let d="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?d=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?y="rotateX(0deg)":"map"===this._pitchAlignment&&(y=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&me.setTransform(this._element,`${Ii[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${d}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,d=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&d._rotate(t.angle),"map"===this._pitchAlignment&&(d.y*=Math.cos(t._pitch)),d}getOffset(){return this._offset}setOffset(t){return this._offset=h.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Nr{constructor(t){this.jumpTo(t)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const d=h.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,d,y){this._start=this.getValue(d),this._end=t,this._startTime=d,this._endTime=d+y}}const Bo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:$o,HTMLElement:Ma,ImageBitmap:ds}=h.window,Wa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function hs(_){_.parentNode&&_.parentNode.removeChild(_)}const zd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vd{constructor(t,d,y=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new gc({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,y&&(this.mousePitch=new Vs({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),me.addEventListener(d,"mousedown",this.mousedown),me.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),me.addEventListener(d,"touchmove",this.touchmove),me.addEventListener(d,"touchend",this.touchend),me.addEventListener(d,"touchcancel",this.reset)}down(t,d){this.mouseRotate.mousedown(t,d),this.mousePitch&&this.mousePitch.mousedown(t,d),me.disableDrag()}move(t,d){const y=this.map,w=this.mouseRotate.mousemoveWindow(t,d);if(w&&w.bearingDelta&&y.setBearing(y.getBearing()+w.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(t,d);E&&E.pitchDelta&&y.setPitch(y.getPitch()+E.pitchDelta)}}off(){const t=this.element;me.removeEventListener(t,"mousedown",this.mousedown),me.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),me.removeEventListener(t,"touchmove",this.touchmove),me.removeEventListener(t,"touchend",this.touchend),me.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){me.enableDrag(),me.removeEventListener(h.window,"mousemove",this.mousemove),me.removeEventListener(h.window,"mouseup",this.mouseup)}mousedown(t){this.down(h.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),me.mousePos(this.element,t)),me.addEventListener(h.window,"mousemove",this.mousemove),me.addEventListener(h.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,me.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=me.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=me.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Cr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ql,Uc=0,Yl=!1;const Ud={maxWidth:100,unit:"metric"};function Xu(_,t,d){const y=d&&d.maxWidth||100,w=_._container.clientHeight/2,E=_.unproject([0,w]),A=_.unproject([y,w]),B=E.distanceTo(A);if(d&&"imperial"===d.unit){const H=3.2808*B;H>5280?jc(t,y,H/5280,_._getUIString("ScaleControl.Miles"),_):jc(t,y,H,_._getUIString("ScaleControl.Feet"),_)}else d&&"nautical"===d.unit?jc(t,y,B/1852,_._getUIString("ScaleControl.NauticalMiles"),_):B>=1e3?jc(t,y,B/1e3,_._getUIString("ScaleControl.Kilometers"),_):jc(t,y,B,_._getUIString("ScaleControl.Meters"),_)}function jc(_,t,d,y,w){const E=function(B){const H=Math.pow(10,`${Math.floor(B)}`.length-1);let Q=B/H;return Q=Q>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:Q>=1?1:function(se){const de=Math.pow(10,Math.ceil(-Math.log(se)/Math.LN10));return Math.round(se*de)/de}(Q),H*Q}(d),A=E/d;w._requestDomTask(()=>{_.style.width=t*A+"px",_.innerHTML=`${E}&nbsp;${y}`})}const jd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_c=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gd(_){if(_){if("number"==typeof _){const t=Math.round(Math.sqrt(.5*Math.pow(_,2)));return{center:new h.pointGeometry(0,0),top:new h.pointGeometry(0,_),"top-left":new h.pointGeometry(t,t),"top-right":new h.pointGeometry(-t,t),bottom:new h.pointGeometry(0,-_),"bottom-left":new h.pointGeometry(t,-t),"bottom-right":new h.pointGeometry(-t,-t),left:new h.pointGeometry(_,0),right:new h.pointGeometry(-_,0)}}if(_ instanceof h.pointGeometry||Array.isArray(_)){const t=h.pointGeometry.convert(_);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:h.pointGeometry.convert(_.center||[0,0]),top:h.pointGeometry.convert(_.top||[0,0]),"top-left":h.pointGeometry.convert(_["top-left"]||[0,0]),"top-right":h.pointGeometry.convert(_["top-right"]||[0,0]),bottom:h.pointGeometry.convert(_.bottom||[0,0]),"bottom-left":h.pointGeometry.convert(_["bottom-left"]||[0,0]),"bottom-right":h.pointGeometry.convert(_["bottom-right"]||[0,0]),left:h.pointGeometry.convert(_.left||[0,0]),right:h.pointGeometry.convert(_.right||[0,0])}}return Gd(new h.pointGeometry(0,0))}const Qu={version:h.version,supported:qe,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends ve{constructor(_){if(null!=(_=h.extend({},Wa,_)).minZoom&&null!=_.maxZoom&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=_.minPitch&&null!=_.maxPitch&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=_.minPitch&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=_.maxPitch&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ul(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._renderTaskQueue=new nn,this._domRenderTaskQueue=new nn,this._controls=[],this._markers=[],this._mapId=h.uniqueId(),this._locale=h.extend({},Bo,_.locale),this._clickTolerance=_.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Nr(0),this._requestManager=new h.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,"string"==typeof _.container){if(this._container=h.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof Ma))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==h.window&&(h.window.addEventListener("online",this._onWindowOnline,!1),h.window.addEventListener("resize",this._onWindowResize,!1),h.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ie(this,_),this._hash=_.hash&&new Cs("string"==typeof _.hash&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,h.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.attributionControl&&this.addControl(new Ze({customAttribution:_.customAttribution})),this._logoControl=new ct,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new h.Event(`${t.dataType}data`,t))}),this.on("dataloading",t=>{this.fire(new h.Event(`${t.dataType}dataloading`,t))})}_getMapId(){return this._mapId}addControl(_,t){if(void 0===t&&(t=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const y=this._controlPositions[t];return-1!==t.indexOf("bottom")?y.insertBefore(d,y.firstChild):y.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(_);return t>-1&&this._controls.splice(t,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}resize(_){const t=this._containerDimensions(),d=t[0],y=t[1];this._resizeCanvas(d,y),this.transform.resize(d,y),this.painter.resize(d,y);const w=!this._moving;return w&&(this.stop(),this.fire(new h.Event("movestart",_)).fire(new h.Event("move",_))),this.fire(new h.Event("resize",_)),w&&this.fire(new h.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(h.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint3D(h.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(h.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(_,t,d){if("mouseenter"===_||"mouseover"===_){let y=!1;return{layer:t,listener:d,delegates:{mousemove:E=>{const A=this.getLayer(t)?this.queryRenderedFeatures(E.point,{layers:[t]}):[];A.length?y||(y=!0,d.call(this,new uo(_,this,E.originalEvent,{features:A}))):y=!1},mouseout:()=>{y=!1}}}}if("mouseleave"===_||"mouseout"===_){let y=!1;return{layer:t,listener:d,delegates:{mousemove:A=>{(this.getLayer(t)?this.queryRenderedFeatures(A.point,{layers:[t]}):[]).length?y=!0:y&&(y=!1,d.call(this,new uo(_,this,A.originalEvent)))},mouseout:A=>{y&&(y=!1,d.call(this,new uo(_,this,A.originalEvent)))}}}}{const y=w=>{const E=this.getLayer(t)?this.queryRenderedFeatures(w.point,{layers:[t]}):[];E.length&&(w.features=E,d.call(this,w),delete w.features)};return{layer:t,listener:d,delegates:{[_]:y}}}}on(_,t,d){if(void 0===d)return super.on(_,t);const y=this._createDelegatedListener(_,t,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(y);for(const w in y.delegates)this.on(w,y.delegates[w]);return this}once(_,t,d){if(void 0===d)return super.once(_,t);const y=this._createDelegatedListener(_,t,d);for(const w in y.delegates)this.once(w,y.delegates[w]);return this}off(_,t,d){return void 0===d?super.off(_,t):(this._delegatedListeners&&this._delegatedListeners[_]&&(y=>{const w=this._delegatedListeners[_];for(let E=0;E<w.length;E++){const A=w[E];if(A.layer===t&&A.listener===d){for(const B in A.delegates)this.off(B,A.delegates[B]);return w.splice(E,1),this}}})(),this)}queryRenderedFeatures(_,t){return this.style?(void 0!==t||void 0===_||_ instanceof h.pointGeometry||Array.isArray(_)||(t=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],t=t||{},this.transform)):[]}querySourceFeatures(_,t){return this.style.querySourceFeatures(_,t)}setStyle(_,t){return!1!==(t=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&t.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(_,t))}_getUIString(_){const t=this._locale[_];if(null==t)throw new Error(`Missing UI string '${_}'`);return t}_updateStyle(_,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),_&&(this.style=new Po(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof _?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Po(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,t){if("string"==typeof _){const d=this._requestManager.normalizeStyleURL(_),y=this._requestManager.transformRequest(d,h.ResourceType.Style);h.getJSON(y,(w,E)=>{w?this.fire(new h.ErrorEvent(w)):E&&this._updateDiff(E,t)})}else"object"==typeof _&&this._updateDiff(_,t)}_updateDiff(_,t){try{this.style.setState(_)&&this._update(!0)}catch(d){h.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(_,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")}addSource(_,t){return this._lazyInitEmptyStyle(),this.style.addSource(_,t),this._update(!0)}isSourceLoaded(_){const t=this.style&&this.style._getSourceCaches(_);if(0!==t.length)return t.every(d=>d.loaded());this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${_}'`)))}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const t in _){const d=_[t]._tiles;for(const y in d){const w=d[y];if("loaded"!==w.state&&"errored"!==w.state)return!1}}return!0}addSourceType(_,t,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,t,d)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,t,{pixelRatio:d=1,sdf:y=!1,stretchX:w,stretchY:E,content:A}={}){if(this._lazyInitEmptyStyle(),t instanceof $o||ds&&t instanceof ds){const{width:B,height:H,data:Q}=h.exported.getImageData(t);this.style.addImage(_,{data:new h.RGBAImage({width:B,height:H},Q),pixelRatio:d,stretchX:w,stretchY:E,content:A,sdf:y,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:H,data:Q}=t,se=t;this.style.addImage(_,{data:new h.RGBAImage({width:B,height:H},new Uint8Array(Q)),pixelRatio:d,stretchX:w,stretchY:E,content:A,sdf:y,version:0,userImage:se}),se.onAdd&&se.onAdd(this,_)}}}updateImage(_,t){const d=this.style.getImage(_);if(!d)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=t instanceof $o||ds&&t instanceof ds?h.exported.getImageData(t):t,{width:w,height:E,data:A}=y;return void 0===w||void 0===E?this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):w!==d.data.width||E!==d.data.height?this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(d.data.replace(A,!(t instanceof $o||ds&&t instanceof ds)),void this.style.updateImage(_,d))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,t){h.getImage(this._requestManager.transformRequest(_,h.ResourceType.Image),(d,y)=>{t(d,y instanceof $o?h.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(_,t){return this._lazyInitEmptyStyle(),this.style.addLayer(_,t),this._update(!0)}moveLayer(_,t){return this.style.moveLayer(_,t),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,t,d){return this.style.setLayerZoomRange(_,t,d),this._update(!0)}setFilter(_,t,d={}){return this.style.setFilter(_,t,d),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,t,d,y={}){return this.style.setPaintProperty(_,t,d,y),this._update(!0)}getPaintProperty(_,t){return this.style.getPaintProperty(_,t)}setLayoutProperty(_,t,d,y={}){return this.style.setLayoutProperty(_,t,d,y),this._update(!0)}getLayoutProperty(_,t){return this.style.getLayoutProperty(_,t)}setLight(_,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(h.LngLat.convert(_),this.transform):0}queryTerrainElevation(_,t){const d=this.transform.elevation;return d?(t=h.extend({},{exaggerated:!0},t),d.getAtPoint(h.MercatorCoordinate.fromLngLat(_),null,t.exaggerated)):null}setFeatureState(_,t){return this.style.setFeatureState(_,t),this._update()}removeFeatureState(_,t){return this.style.removeFeatureState(_,t),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,t=0;return this._container&&(_=this._container.clientWidth||400,t=this._container.clientHeight||300),[_,t]}_detectMissingCSS(){"rgb(250, 128, 114)"!==h.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&h.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=me.create("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=me.create("div","mapboxgl-canvas-container",_);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=me.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1]);const y=this._controlContainer=me.create("div","mapboxgl-control-container",_),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{w[E]=me.create("div",`mapboxgl-ctrl-${E}`,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,t){const d=h.exported.devicePixelRatio||1;this._canvas.width=d*_,this._canvas.height=d*t,this._canvas.style.width=`${_}px`,this._canvas.style.height=`${t}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const t=this._markers.indexOf(_);-1!==t&&this._markers.splice(t,1)}_setupPainter(){const _=h.extend({},qe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);t?(h.storeAuthState(t,!0),this.painter=new Bc(t,this.transform),this.on("data",d=>{"source"===d.dataType&&this.painter.setTileLoadedFlag(!0)}),h.exported$1.testSupport(t)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.isMoving()&&this.loaded()?_():this._domRenderTaskQueue.add(_)}_render(_){let t;const d=this.painter.context.extTimerQuery,y=h.exported.now();this.listens("gpu-timing-frame")&&(t=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,t));let w=this._updateAverageElevation(y);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;let E=!1;const A=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,Q=h.exported.now();this.style.zoomHistory.update(H,Q);const se=new h.EvaluationParameters(H,{now:Q,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),de=se.crossFadingFactor();1===de&&de===this._crossFadingFactor||(E=!0,this._crossFadingFactor=de),this.style.update(se)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,A,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const H=h.exported.now()-y;d.endQueryEXT(d.TIME_ELAPSED_EXT,t),setTimeout(()=>{const Q=d.getQueryObjectEXT(t,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(t),this.fire(new h.Event("gpu-timing-frame",{cpuTime:H,gpuTime:Q}))},50)}if(this.listens("gpu-timing-layer")){const H=this.painter.collectGpuTimers();setTimeout(()=>{const Q=this.painter.queryGpuTimers(H);this.fire(new h.Event("gpu-timing-layer",{layerTimes:Q}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(B||this._repaint)this.triggerRepaint();else{const H=!this.isMoving()&&this.loaded();if(H&&(w=this._updateAverageElevation(y,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),H&&(this.fire(new h.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Q=this._calculateSpeedIndex();this.fire(new h.Event("speedindexcompleted",{speedIndex:Q})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(_,t=!1){const d=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);if((t||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const y=this.transform.averageElevation;let w=this.transform.sampleAverageElevation();isNaN(w)?w=0:this._averageElevationLastSampledAt=_;const E=Math.abs(y-w);if(E>1)this._averageElevation.easeTo(w,_,300);else if(E>1e-4)return this._averageElevation.jumpTo(w),d(w)}return!!this._averageElevation.isEasing(_)&&d(this._averageElevation.getValue(_))}_authenticate(){h.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===h.AUTH_ERR_MSG||401===_.status)){const t=this.painter.context.gl;h.storeAuthState(t,!1),this._logoControl instanceof ct&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new h.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),h.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const d=this.painter.context.gl,y=d.createFramebuffer();function w(E){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,E,0);const A=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,A),A}return d.bindFramebuffer(d.FRAMEBUFFER,y),this._canvasPixelComparison(w(_),t.canvasCopies.map(w),t.timeStamps)}_canvasPixelComparison(_,t,d){let y=d[1]-d[0];const w=_.length/4;for(let E=0;E<t.length;E++){const A=t[E];let B=0;for(let H=0;H<A.length;H+=4)A[H]===_[H]&&A[H+1]===_[H+1]&&A[H+2]===_[H+2]&&A[H+3]===_[H+3]&&(B+=1);y+=(d[E+2]-d[E+1])*(1-B/w)}return y}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==h.window&&(h.window.removeEventListener("resize",this._onWindowResize,!1),h.window.removeEventListener("orientationchange",this._onWindowResize,!1),h.window.removeEventListener("online",this._onWindowOnline,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),hs(this._canvasContainer),hs(this._controlContainer),hs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),h.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=h.exported.frame(t=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(t)}))}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}_setCacheLimits(_,t){h.setCacheLimits(_,t)}get version(){return h.version}},NavigationControl:class{constructor(_){this.options=h.extend({},zd,_),this._container=me.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),me.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),me.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=me.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const _=this._map.getZoom(),t=_===this._map.getMaxZoom(),d=_===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const _=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=_)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){me.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,t){const d=me.create("button",_,this._container);return d.type="button",d.addEventListener("click",t),d}_setButtonTitle(_,t){const d=this._map._getUIString(`NavigationControl.${t}`);_.title=d,_.setAttribute("aria-label",d)}},GeolocateControl:class extends h.Evented{constructor(_){super(),this.options=h.extend({},Cr,_),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(_){var t;return this._map=_,this._container=me.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==ql?t(ql):void 0!==h.window.navigator.permissions?h.window.navigator.permissions.query({name:"geolocation"}).then(d=>{ql="denied"!==d.state,t(ql)}):(ql=!!h.window.navigator.geolocation,t(ql)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(h.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),me.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Uc=0,Yl=!1}_isOutOfMapMaxBounds(_){const t=this._map.getMaxBounds(),d=_.coords;return t&&(d.longitude<t.getWest()||d.longitude>t.getEast()||d.latitude<t.getSouth()||d.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(_),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",_)),this._finish()}}_updateCamera(_){const t=new h.LngLat(_.coords.longitude,_.coords.latitude),d=_.coords.accuracy,y=this._map.getBearing(),w=h.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(d),w,{geolocateSource:!0})}_updateMarker(_){if(_){const t=new h.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map._container.clientHeight/2,t=this._map.unproject([0,_]),d=this._map.unproject([100,_]),y=t.distanceTo(d)/100,w=Math.ceil(2*this._accuracy/y);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(_){if(this._map){if(this.options.trackUserLocation)if(1===_.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===_.code&&Yl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=me.create("button","mapboxgl-ctrl-geolocate",this._container),me.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===_){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=me.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new hr(this._dotElement),this._circleElement=me.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Uc--,Yl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Uc++,Uc>1?(_={maximumAge:6e5,timeout:0},Yl=!0):(_=this.options.positionOptions,Yl=!1),this._geolocationWatchID=h.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else h.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){h.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ze,ScaleControl:class{constructor(_){this.options=h.extend({},Ud,_),h.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Xu(this._map,this._container,this.options)}onAdd(_){return this._map=_,this._container=me.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){me.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(_){this.options.unit=_,Xu(this._map,this._container,this.options)}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof h.window.HTMLElement?this._container=_.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in h.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in h.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=me.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){me.remove(this._controlContainer),this._map=null,h.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!h.window.document.fullscreenEnabled&&!h.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=me.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);me.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),h.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(h.window.document.fullscreenElement||h.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?h.window.document.exitFullscreen?h.window.document.exitFullscreen():h.window.document.webkitCancelFullScreen&&h.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends h.Evented{constructor(_){super(),this.options=h.extend(Object.create(jd),_),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&me.remove(this._content),this._container&&(me.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=h.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(h.window.document.createTextNode(_))}setHTML(_){const t=h.window.document.createDocumentFragment(),d=h.window.document.createElement("body");let y;for(d.innerHTML=_;y=d.firstChild,y;)t.appendChild(y);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=me.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=me.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(_){this._update(_.point)}_onMouseMove(_){this._update(_.point)}_onDrag(_){this._update(_.point)}_update(_){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=me.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=me.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Bn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!_))return;const t=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat);let d=this.options.anchor;const y=Gd(this.options.offset);if(!d){const E=this._container.offsetWidth,A=this._container.offsetHeight;let B;B=t.y+y.bottom.y<A?["top"]:t.y>this._map.transform.height-A?["bottom"]:[],t.x<E/2?B.push("left"):t.x>this._map.transform.width-E/2&&B.push("right"),d=0===B.length?"bottom":B.join("-")}const w=t.add(y[d]).round();this._map._requestDomTask(()=>{this._container&&d&&(me.setTransform(this._container,`${Ii[d]} translate(${w.x}px,${w.y}px)`),Qn(this._container,d,"popup"))})}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(_c);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._content&&(this._content.style.opacity=_),this._tip&&(this._tip.style.opacity=_)}},Marker:hr,Style:Po,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,FreeCameraOptions:Fo,Evented:h.Evented,config:h.config,prewarm:function(){Fe().acquire(ot)},clearPrewarmedResources:function(){const _=Dt;_&&(_.isPreloaded()&&1===_.numActive()?(_.release(ot),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return h.config.ACCESS_TOKEN},set accessToken(_){h.config.ACCESS_TOKEN=_},get baseApiUrl(){return h.config.API_URL},set baseApiUrl(_){h.config.API_URL=_},get workerCount(){return He.workerCount},set workerCount(_){He.workerCount=_},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){h.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){h.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:h.exported.setNow,restoreNow:h.exported.restoreNow};return Qu}),I}()},1135:(Sn,Ct,U)=>{"use strict";U.d(Ct,{X:()=>l});var I=U(7579);class l extends I.x{constructor(h){super(),this._value=h}get value(){return this.getValue()}_subscribe(h){const qe=super._subscribe(h);return!qe.closed&&h.next(this._value),qe}getValue(){const{hasError:h,thrownError:qe,_value:Ne}=this;if(h)throw qe;return this._throwIfClosed(),Ne}next(h){super.next(this._value=h)}}},8306:(Sn,Ct,U)=>{"use strict";U.d(Ct,{y:()=>Ce});var I=U(930),l=U(727),q=U(8822),h=U(4671);var ze=U(2416),ye=U(576),me=U(2806);let Ce=(()=>{class st{constructor(At){At&&(this._subscribe=At)}lift(At){const vt=new st;return vt.source=this,vt.operator=At,vt}subscribe(At,vt,Zt){const vn=function dt(st){return st&&st instanceof I.Lv||function Ue(st){return st&&(0,ye.m)(st.next)&&(0,ye.m)(st.error)&&(0,ye.m)(st.complete)}(st)&&(0,l.Nn)(st)}(At)?At:new I.Hp(At,vt,Zt);return(0,me.x)(()=>{const{operator:Tn,source:Bt}=this;vn.add(Tn?Tn.call(vn,Bt):Bt?this._subscribe(vn):this._trySubscribe(vn))}),vn}_trySubscribe(At){try{return this._subscribe(At)}catch(vt){At.error(vt)}}forEach(At,vt){return new(vt=tt(vt))((Zt,vn)=>{const Tn=new I.Hp({next:Bt=>{try{At(Bt)}catch(ke){vn(ke),Tn.unsubscribe()}},error:vn,complete:Zt});this.subscribe(Tn)})}_subscribe(At){var vt;return null===(vt=this.source)||void 0===vt?void 0:vt.subscribe(At)}[q.L](){return this}pipe(...At){return function Ne(st){return 0===st.length?h.y:1===st.length?st[0]:function(At){return st.reduce((vt,Zt)=>Zt(vt),At)}}(At)(this)}toPromise(At){return new(At=tt(At))((vt,Zt)=>{let vn;this.subscribe(Tn=>vn=Tn,Tn=>Zt(Tn),()=>vt(vn))})}}return st.create=rt=>new st(rt),st})();function tt(st){var rt;return null!==(rt=st??ze.v.Promise)&&void 0!==rt?rt:Promise}},7579:(Sn,Ct,U)=>{"use strict";U.d(Ct,{x:()=>ze});var I=U(8306),l=U(727);const h=(0,U(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=U(8737),Ne=U(2806);let ze=(()=>{class me extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(tt){const Ue=new ye(this,this);return Ue.operator=tt,Ue}_throwIfClosed(){if(this.closed)throw new h}next(tt){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ue of this.currentObservers)Ue.next(tt)}})}error(tt){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=tt;const{observers:Ue}=this;for(;Ue.length;)Ue.shift().error(tt)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:tt}=this;for(;tt.length;)tt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var tt;return(null===(tt=this.observers)||void 0===tt?void 0:tt.length)>0}_trySubscribe(tt){return this._throwIfClosed(),super._trySubscribe(tt)}_subscribe(tt){return this._throwIfClosed(),this._checkFinalizedStatuses(tt),this._innerSubscribe(tt)}_innerSubscribe(tt){const{hasError:Ue,isStopped:dt,observers:st}=this;return Ue||dt?l.Lc:(this.currentObservers=null,st.push(tt),new l.w0(()=>{this.currentObservers=null,(0,qe.P)(st,tt)}))}_checkFinalizedStatuses(tt){const{hasError:Ue,thrownError:dt,isStopped:st}=this;Ue?tt.error(dt):st&&tt.complete()}asObservable(){const tt=new I.y;return tt.source=this,tt}}return me.create=(Ce,tt)=>new ye(Ce,tt),me})();class ye extends ze{constructor(Ce,tt){super(),this.destination=Ce,this.source=tt}next(Ce){var tt,Ue;null===(Ue=null===(tt=this.destination)||void 0===tt?void 0:tt.next)||void 0===Ue||Ue.call(tt,Ce)}error(Ce){var tt,Ue;null===(Ue=null===(tt=this.destination)||void 0===tt?void 0:tt.error)||void 0===Ue||Ue.call(tt,Ce)}complete(){var Ce,tt;null===(tt=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.complete)||void 0===tt||tt.call(Ce)}_subscribe(Ce){var tt,Ue;return null!==(Ue=null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(Ce))&&void 0!==Ue?Ue:l.Lc}}},930:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Hp:()=>At,Lv:()=>Ue});var I=U(576),l=U(727),q=U(2416),h=U(7849),qe=U(5032);const Ne=me("C",void 0,void 0);function me(Bt,ke,$e){return{kind:Bt,value:ke,error:$e}}var Ce=U(3410),tt=U(2806);class Ue extends l.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,l.Nn)(ke)&&ke.add(this)):this.destination=Tn}static create(ke,$e,sn){return new At(ke,$e,sn)}next(ke){this.isStopped?vn(function ye(Bt){return me("N",Bt,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?vn(function ze(Bt){return me("E",void 0,Bt)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?vn(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function st(Bt,ke){return dt.call(Bt,ke)}class rt{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:$e}=this;if($e.next)try{$e.next(ke)}catch(sn){vt(sn)}}error(ke){const{partialObserver:$e}=this;if($e.error)try{$e.error(ke)}catch(sn){vt(sn)}else vt(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch($e){vt($e)}}}class At extends Ue{constructor(ke,$e,sn){let Gt;if(super(),(0,I.m)(ke)||!ke)Gt={next:ke??void 0,error:$e??void 0,complete:sn??void 0};else{let $t;this&&q.v.useDeprecatedNextContext?($t=Object.create(ke),$t.unsubscribe=()=>this.unsubscribe(),Gt={next:ke.next&&st(ke.next,$t),error:ke.error&&st(ke.error,$t),complete:ke.complete&&st(ke.complete,$t)}):Gt=ke}this.destination=new rt(Gt)}}function vt(Bt){q.v.useDeprecatedSynchronousErrorHandling?(0,tt.O)(Bt):(0,h.h)(Bt)}function vn(Bt,ke){const{onStoppedNotification:$e}=q.v;$e&&Ce.z.setTimeout(()=>$e(Bt,ke))}const Tn={closed:!0,next:qe.Z,error:function Zt(Bt){throw Bt},complete:qe.Z}},727:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Lc:()=>Ne,w0:()=>qe,Nn:()=>ze});var I=U(576);const q=(0,U(3888).d)(me=>function(tt){me(this),this.message=tt?`${tt.length} errors occurred during unsubscription:\n${tt.map((Ue,dt)=>`${dt+1}) ${Ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=tt});var h=U(8737);class qe{constructor(Ce){this.initialTeardown=Ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ce;if(!this.closed){this.closed=!0;const{_parentage:tt}=this;if(tt)if(this._parentage=null,Array.isArray(tt))for(const st of tt)st.remove(this);else tt.remove(this);const{initialTeardown:Ue}=this;if((0,I.m)(Ue))try{Ue()}catch(st){Ce=st instanceof q?st.errors:[st]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const st of dt)try{ye(st)}catch(rt){Ce=Ce??[],rt instanceof q?Ce=[...Ce,...rt.errors]:Ce.push(rt)}}if(Ce)throw new q(Ce)}}add(Ce){var tt;if(Ce&&Ce!==this)if(this.closed)ye(Ce);else{if(Ce instanceof qe){if(Ce.closed||Ce._hasParent(this))return;Ce._addParent(this)}(this._finalizers=null!==(tt=this._finalizers)&&void 0!==tt?tt:[]).push(Ce)}}_hasParent(Ce){const{_parentage:tt}=this;return tt===Ce||Array.isArray(tt)&&tt.includes(Ce)}_addParent(Ce){const{_parentage:tt}=this;this._parentage=Array.isArray(tt)?(tt.push(Ce),tt):tt?[tt,Ce]:Ce}_removeParent(Ce){const{_parentage:tt}=this;tt===Ce?this._parentage=null:Array.isArray(tt)&&(0,h.P)(tt,Ce)}remove(Ce){const{_finalizers:tt}=this;tt&&(0,h.P)(tt,Ce),Ce instanceof qe&&Ce._removeParent(this)}}qe.EMPTY=(()=>{const me=new qe;return me.closed=!0,me})();const Ne=qe.EMPTY;function ze(me){return me instanceof qe||me&&"closed"in me&&(0,I.m)(me.remove)&&(0,I.m)(me.add)&&(0,I.m)(me.unsubscribe)}function ye(me){(0,I.m)(me)?me():me.unsubscribe()}},2416:(Sn,Ct,U)=>{"use strict";U.d(Ct,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Sn,Ct,U)=>{"use strict";U.d(Ct,{a:()=>Ce});var I=U(8306),l=U(4742),q=U(2076),h=U(4671),qe=U(3268),Ne=U(3269),ze=U(1810),ye=U(5403),me=U(9672);function Ce(...dt){const st=(0,Ne.yG)(dt),rt=(0,Ne.jO)(dt),{args:At,keys:vt}=(0,l.D)(dt);if(0===At.length)return(0,q.D)([],st);const Zt=new I.y(function tt(dt,st,rt=h.y){return At=>{Ue(st,()=>{const{length:vt}=dt,Zt=new Array(vt);let vn=vt,Tn=vt;for(let Bt=0;Bt<vt;Bt++)Ue(st,()=>{const ke=(0,q.D)(dt[Bt],st);let $e=!1;ke.subscribe((0,ye.x)(At,sn=>{Zt[Bt]=sn,$e||($e=!0,Tn--),Tn||At.next(rt(Zt.slice()))},()=>{--vn||At.complete()}))},At)},At)}}(At,st,vt?vn=>(0,ze.n)(vt,vn):h.y));return rt?Zt.pipe((0,qe.Z)(rt)):Zt}function Ue(dt,st,rt){dt?(0,me.f)(rt,dt,st):st()}},7272:(Sn,Ct,U)=>{"use strict";U.d(Ct,{z:()=>qe});var I=U(8189),q=U(3269),h=U(2076);function qe(...Ne){return function l(){return(0,I.J)(1)}()((0,h.D)(Ne,(0,q.yG)(Ne)))}},9770:(Sn,Ct,U)=>{"use strict";U.d(Ct,{P:()=>q});var I=U(8306),l=U(8421);function q(h){return new I.y(qe=>{(0,l.Xf)(h()).subscribe(qe)})}},515:(Sn,Ct,U)=>{"use strict";U.d(Ct,{E:()=>l});const l=new(U(8306).y)(qe=>qe.complete())},4128:(Sn,Ct,U)=>{"use strict";U.d(Ct,{D:()=>ye});var I=U(8306),l=U(4742),q=U(8421),h=U(3269),qe=U(5403),Ne=U(3268),ze=U(1810);function ye(...me){const Ce=(0,h.jO)(me),{args:tt,keys:Ue}=(0,l.D)(me),dt=new I.y(st=>{const{length:rt}=tt;if(!rt)return void st.complete();const At=new Array(rt);let vt=rt,Zt=rt;for(let vn=0;vn<rt;vn++){let Tn=!1;(0,q.Xf)(tt[vn]).subscribe((0,qe.x)(st,Bt=>{Tn||(Tn=!0,Zt--),At[vn]=Bt},()=>vt--,void 0,()=>{(!vt||!Tn)&&(Zt||st.next(Ue?(0,ze.n)(Ue,At):At),st.complete())}))}});return Ce?dt.pipe((0,Ne.Z)(Ce)):dt}},2076:(Sn,Ct,U)=>{"use strict";U.d(Ct,{D:()=>sn});var I=U(8421),l=U(9672),q=U(4482),h=U(5403);function qe(Gt,$t=0){return(0,q.e)((dn,bt)=>{dn.subscribe((0,h.x)(bt,Mt=>(0,l.f)(bt,Gt,()=>bt.next(Mt),$t),()=>(0,l.f)(bt,Gt,()=>bt.complete(),$t),Mt=>(0,l.f)(bt,Gt,()=>bt.error(Mt),$t)))})}function Ne(Gt,$t=0){return(0,q.e)((dn,bt)=>{bt.add(Gt.schedule(()=>dn.subscribe(bt),$t))})}var me=U(8306),tt=U(2202),Ue=U(576);function st(Gt,$t){if(!Gt)throw new Error("Iterable cannot be null");return new me.y(dn=>{(0,l.f)(dn,$t,()=>{const bt=Gt[Symbol.asyncIterator]();(0,l.f)(dn,$t,()=>{bt.next().then(Mt=>{Mt.done?dn.complete():dn.next(Mt.value)})},0,!0)})})}var rt=U(3670),At=U(8239),vt=U(1144),Zt=U(6495),vn=U(2206),Tn=U(4532),Bt=U(3260);function sn(Gt,$t){return $t?function $e(Gt,$t){if(null!=Gt){if((0,rt.c)(Gt))return function ze(Gt,$t){return(0,I.Xf)(Gt).pipe(Ne($t),qe($t))}(Gt,$t);if((0,vt.z)(Gt))return function Ce(Gt,$t){return new me.y(dn=>{let bt=0;return $t.schedule(function(){bt===Gt.length?dn.complete():(dn.next(Gt[bt++]),dn.closed||this.schedule())})})}(Gt,$t);if((0,At.t)(Gt))return function ye(Gt,$t){return(0,I.Xf)(Gt).pipe(Ne($t),qe($t))}(Gt,$t);if((0,vn.D)(Gt))return st(Gt,$t);if((0,Zt.T)(Gt))return function dt(Gt,$t){return new me.y(dn=>{let bt;return(0,l.f)(dn,$t,()=>{bt=Gt[tt.h](),(0,l.f)(dn,$t,()=>{let Mt,Ot;try{({value:Mt,done:Ot}=bt.next())}catch(Ht){return void dn.error(Ht)}Ot?dn.complete():dn.next(Mt)},0,!0)}),()=>(0,Ue.m)(bt?.return)&&bt.return()})}(Gt,$t);if((0,Bt.L)(Gt))return function ke(Gt,$t){return st((0,Bt.Q)(Gt),$t)}(Gt,$t)}throw(0,Tn.z)(Gt)}(Gt,$t):(0,I.Xf)(Gt)}},4968:(Sn,Ct,U)=>{"use strict";U.d(Ct,{R:()=>Ce});var I=U(8421),l=U(8306),q=U(5577),h=U(1144),qe=U(576),Ne=U(3268);const ze=["addListener","removeListener"],ye=["addEventListener","removeEventListener"],me=["on","off"];function Ce(rt,At,vt,Zt){if((0,qe.m)(vt)&&(Zt=vt,vt=void 0),Zt)return Ce(rt,At,vt).pipe((0,Ne.Z)(Zt));const[vn,Tn]=function st(rt){return(0,qe.m)(rt.addEventListener)&&(0,qe.m)(rt.removeEventListener)}(rt)?ye.map(Bt=>ke=>rt[Bt](At,ke,vt)):function Ue(rt){return(0,qe.m)(rt.addListener)&&(0,qe.m)(rt.removeListener)}(rt)?ze.map(tt(rt,At)):function dt(rt){return(0,qe.m)(rt.on)&&(0,qe.m)(rt.off)}(rt)?me.map(tt(rt,At)):[];if(!vn&&(0,h.z)(rt))return(0,q.z)(Bt=>Ce(Bt,At,vt))((0,I.Xf)(rt));if(!vn)throw new TypeError("Invalid event target");return new l.y(Bt=>{const ke=(...$e)=>Bt.next(1<$e.length?$e:$e[0]);return vn(ke),()=>Tn(ke)})}function tt(rt,At){return vt=>Zt=>rt[vt](At,Zt)}},8421:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Xf:()=>dt});var I=U(655),l=U(1144),q=U(8239),h=U(8306),qe=U(3670),Ne=U(2206),ze=U(4532),ye=U(6495),me=U(3260),Ce=U(576),tt=U(7849),Ue=U(8822);function dt(Bt){if(Bt instanceof h.y)return Bt;if(null!=Bt){if((0,qe.c)(Bt))return function st(Bt){return new h.y(ke=>{const $e=Bt[Ue.L]();if((0,Ce.m)($e.subscribe))return $e.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Bt);if((0,l.z)(Bt))return function rt(Bt){return new h.y(ke=>{for(let $e=0;$e<Bt.length&&!ke.closed;$e++)ke.next(Bt[$e]);ke.complete()})}(Bt);if((0,q.t)(Bt))return function At(Bt){return new h.y(ke=>{Bt.then($e=>{ke.closed||(ke.next($e),ke.complete())},$e=>ke.error($e)).then(null,tt.h)})}(Bt);if((0,Ne.D)(Bt))return Zt(Bt);if((0,ye.T)(Bt))return function vt(Bt){return new h.y(ke=>{for(const $e of Bt)if(ke.next($e),ke.closed)return;ke.complete()})}(Bt);if((0,me.L)(Bt))return function vn(Bt){return Zt((0,me.Q)(Bt))}(Bt)}throw(0,ze.z)(Bt)}function Zt(Bt){return new h.y(ke=>{(function Tn(Bt,ke){var $e,sn,Gt,$t;return(0,I.mG)(this,void 0,void 0,function*(){try{for($e=(0,I.KL)(Bt);!(sn=yield $e.next()).done;)if(ke.next(sn.value),ke.closed)return}catch(dn){Gt={error:dn}}finally{try{sn&&!sn.done&&($t=$e.return)&&(yield $t.call($e))}finally{if(Gt)throw Gt.error}}ke.complete()})})(Bt,ke).catch($e=>ke.error($e))})}},6451:(Sn,Ct,U)=>{"use strict";U.d(Ct,{T:()=>Ne});var I=U(8189),l=U(8421),q=U(515),h=U(3269),qe=U(2076);function Ne(...ze){const ye=(0,h.yG)(ze),me=(0,h._6)(ze,1/0),Ce=ze;return Ce.length?1===Ce.length?(0,l.Xf)(Ce[0]):(0,I.J)(me)((0,qe.D)(Ce,ye)):q.E}},9646:(Sn,Ct,U)=>{"use strict";U.d(Ct,{of:()=>q});var I=U(3269),l=U(2076);function q(...h){const qe=(0,I.yG)(h);return(0,l.D)(h,qe)}},2843:(Sn,Ct,U)=>{"use strict";U.d(Ct,{_:()=>q});var I=U(8306),l=U(576);function q(h,qe){const Ne=(0,l.m)(h)?h:()=>h,ze=ye=>ye.error(Ne());return new I.y(qe?ye=>qe.schedule(ze,0,ye):ze)}},5963:(Sn,Ct,U)=>{"use strict";U.d(Ct,{H:()=>qe});var I=U(8306),l=U(4986),q=U(3532);function qe(Ne=0,ze,ye=l.P){let me=-1;return null!=ze&&((0,q.K)(ze)?ye=ze:me=ze),new I.y(Ce=>{let tt=function h(Ne){return Ne instanceof Date&&!isNaN(Ne)}(Ne)?+Ne-ye.now():Ne;tt<0&&(tt=0);let Ue=0;return ye.schedule(function(){Ce.closed||(Ce.next(Ue++),0<=me?this.schedule(void 0,me):Ce.complete())},tt)})}},5403:(Sn,Ct,U)=>{"use strict";U.d(Ct,{x:()=>l});var I=U(930);function l(h,qe,Ne,ze,ye){return new q(h,qe,Ne,ze,ye)}class q extends I.Lv{constructor(qe,Ne,ze,ye,me,Ce){super(qe),this.onFinalize=me,this.shouldUnsubscribe=Ce,this._next=Ne?function(tt){try{Ne(tt)}catch(Ue){qe.error(Ue)}}:super._next,this._error=ye?function(tt){try{ye(tt)}catch(Ue){qe.error(Ue)}finally{this.unsubscribe()}}:super._error,this._complete=ze?function(){try{ze()}catch(tt){qe.error(tt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var qe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(qe=this.onFinalize)||void 0===qe||qe.call(this))}}}},262:(Sn,Ct,U)=>{"use strict";U.d(Ct,{K:()=>h});var I=U(8421),l=U(5403),q=U(4482);function h(qe){return(0,q.e)((Ne,ze)=>{let Ce,ye=null,me=!1;ye=Ne.subscribe((0,l.x)(ze,void 0,void 0,tt=>{Ce=(0,I.Xf)(qe(tt,h(qe)(Ne))),ye?(ye.unsubscribe(),ye=null,Ce.subscribe(ze)):me=!0})),me&&(ye.unsubscribe(),ye=null,Ce.subscribe(ze))})}},4351:(Sn,Ct,U)=>{"use strict";U.d(Ct,{b:()=>q});var I=U(5577),l=U(576);function q(h,qe){return(0,l.m)(qe)?(0,I.z)(h,qe,1):(0,I.z)(h,1)}},8372:(Sn,Ct,U)=>{"use strict";U.d(Ct,{b:()=>h});var I=U(4986),l=U(4482),q=U(5403);function h(qe,Ne=I.z){return(0,l.e)((ze,ye)=>{let me=null,Ce=null,tt=null;const Ue=()=>{if(me){me.unsubscribe(),me=null;const st=Ce;Ce=null,ye.next(st)}};function dt(){const st=tt+qe,rt=Ne.now();if(rt<st)return me=this.schedule(void 0,st-rt),void ye.add(me);Ue()}ze.subscribe((0,q.x)(ye,st=>{Ce=st,tt=Ne.now(),me||(me=Ne.schedule(dt,qe),ye.add(me))},()=>{Ue(),ye.complete()},void 0,()=>{Ce=me=null}))})}},6590:(Sn,Ct,U)=>{"use strict";U.d(Ct,{d:()=>q});var I=U(4482),l=U(5403);function q(h){return(0,I.e)((qe,Ne)=>{let ze=!1;qe.subscribe((0,l.x)(Ne,ye=>{ze=!0,Ne.next(ye)},()=>{ze||Ne.next(h),Ne.complete()}))})}},1884:(Sn,Ct,U)=>{"use strict";U.d(Ct,{x:()=>h});var I=U(4671),l=U(4482),q=U(5403);function h(Ne,ze=I.y){return Ne=Ne??qe,(0,l.e)((ye,me)=>{let Ce,tt=!0;ye.subscribe((0,q.x)(me,Ue=>{const dt=ze(Ue);(tt||!Ne(Ce,dt))&&(tt=!1,Ce=dt,me.next(Ue))}))})}function qe(Ne,ze){return Ne===ze}},9300:(Sn,Ct,U)=>{"use strict";U.d(Ct,{h:()=>q});var I=U(4482),l=U(5403);function q(h,qe){return(0,I.e)((Ne,ze)=>{let ye=0;Ne.subscribe((0,l.x)(ze,me=>h.call(qe,me,ye++)&&ze.next(me)))})}},8746:(Sn,Ct,U)=>{"use strict";U.d(Ct,{x:()=>l});var I=U(4482);function l(q){return(0,I.e)((h,qe)=>{try{h.subscribe(qe)}finally{qe.add(q)}})}},590:(Sn,Ct,U)=>{"use strict";U.d(Ct,{P:()=>ze});var I=U(6805),l=U(9300),q=U(5698),h=U(6590),qe=U(8068),Ne=U(4671);function ze(ye,me){const Ce=arguments.length>=2;return tt=>tt.pipe(ye?(0,l.h)((Ue,dt)=>ye(Ue,dt,tt)):Ne.y,(0,q.q)(1),Ce?(0,h.d)(me):(0,qe.T)(()=>new I.K))}},4004:(Sn,Ct,U)=>{"use strict";U.d(Ct,{U:()=>q});var I=U(4482),l=U(5403);function q(h,qe){return(0,I.e)((Ne,ze)=>{let ye=0;Ne.subscribe((0,l.x)(ze,me=>{ze.next(h.call(qe,me,ye++))}))})}},9718:(Sn,Ct,U)=>{"use strict";U.d(Ct,{h:()=>l});var I=U(4004);function l(q){return(0,I.U)(()=>q)}},8189:(Sn,Ct,U)=>{"use strict";U.d(Ct,{J:()=>q});var I=U(5577),l=U(4671);function q(h=1/0){return(0,I.z)(l.y,h)}},5577:(Sn,Ct,U)=>{"use strict";U.d(Ct,{z:()=>ye});var I=U(4004),l=U(8421),q=U(4482),h=U(9672),qe=U(5403),ze=U(576);function ye(me,Ce,tt=1/0){return(0,ze.m)(Ce)?ye((Ue,dt)=>(0,I.U)((st,rt)=>Ce(Ue,st,dt,rt))((0,l.Xf)(me(Ue,dt))),tt):("number"==typeof Ce&&(tt=Ce),(0,q.e)((Ue,dt)=>function Ne(me,Ce,tt,Ue,dt,st,rt,At){const vt=[];let Zt=0,vn=0,Tn=!1;const Bt=()=>{Tn&&!vt.length&&!Zt&&Ce.complete()},ke=sn=>Zt<Ue?$e(sn):vt.push(sn),$e=sn=>{st&&Ce.next(sn),Zt++;let Gt=!1;(0,l.Xf)(tt(sn,vn++)).subscribe((0,qe.x)(Ce,$t=>{dt?.($t),st?ke($t):Ce.next($t)},()=>{Gt=!0},void 0,()=>{if(Gt)try{for(Zt--;vt.length&&Zt<Ue;){const $t=vt.shift();rt?(0,h.f)(Ce,rt,()=>$e($t)):$e($t)}Bt()}catch($t){Ce.error($t)}}))};return me.subscribe((0,qe.x)(Ce,ke,()=>{Tn=!0,Bt()})),()=>{At?.()}}(Ue,dt,me,tt)))}},3099:(Sn,Ct,U)=>{"use strict";U.d(Ct,{B:()=>Ne});var I=U(2076),l=U(5698),q=U(7579),h=U(930),qe=U(4482);function Ne(ye={}){const{connector:me=(()=>new q.x),resetOnError:Ce=!0,resetOnComplete:tt=!0,resetOnRefCountZero:Ue=!0}=ye;return dt=>{let st=null,rt=null,At=null,vt=0,Zt=!1,vn=!1;const Tn=()=>{rt?.unsubscribe(),rt=null},Bt=()=>{Tn(),st=At=null,Zt=vn=!1},ke=()=>{const $e=st;Bt(),$e?.unsubscribe()};return(0,qe.e)(($e,sn)=>{vt++,!vn&&!Zt&&Tn();const Gt=At=At??me();sn.add(()=>{vt--,0===vt&&!vn&&!Zt&&(rt=ze(ke,Ue))}),Gt.subscribe(sn),st||(st=new h.Hp({next:$t=>Gt.next($t),error:$t=>{vn=!0,Tn(),rt=ze(Bt,Ce,$t),Gt.error($t)},complete:()=>{Zt=!0,Tn(),rt=ze(Bt,tt),Gt.complete()}}),(0,I.D)($e).subscribe(st))})(dt)}}function ze(ye,me,...Ce){return!0===me?(ye(),null):!1===me?null:me(...Ce).pipe((0,l.q)(1)).subscribe(()=>ye())}},3151:(Sn,Ct,U)=>{"use strict";U.d(Ct,{d:()=>qe});var I=U(7579),l=U(6063);class q extends I.x{constructor(ze=1/0,ye=1/0,me=l.l){super(),this._bufferSize=ze,this._windowTime=ye,this._timestampProvider=me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ye===1/0,this._bufferSize=Math.max(1,ze),this._windowTime=Math.max(1,ye)}next(ze){const{isStopped:ye,_buffer:me,_infiniteTimeWindow:Ce,_timestampProvider:tt,_windowTime:Ue}=this;ye||(me.push(ze),!Ce&&me.push(tt.now()+Ue)),this._trimBuffer(),super.next(ze)}_subscribe(ze){this._throwIfClosed(),this._trimBuffer();const ye=this._innerSubscribe(ze),{_infiniteTimeWindow:me,_buffer:Ce}=this,tt=Ce.slice();for(let Ue=0;Ue<tt.length&&!ze.closed;Ue+=me?1:2)ze.next(tt[Ue]);return this._checkFinalizedStatuses(ze),ye}_trimBuffer(){const{_bufferSize:ze,_timestampProvider:ye,_buffer:me,_infiniteTimeWindow:Ce}=this,tt=(Ce?1:2)*ze;if(ze<1/0&&tt<me.length&&me.splice(0,me.length-tt),!Ce){const Ue=ye.now();let dt=0;for(let st=1;st<me.length&&me[st]<=Ue;st+=2)dt=st;dt&&me.splice(0,dt+1)}}}var h=U(3099);function qe(Ne,ze,ye){let me,Ce=!1;return Ne&&"object"==typeof Ne?({bufferSize:me=1/0,windowTime:ze=1/0,refCount:Ce=!1,scheduler:ye}=Ne):me=Ne??1/0,(0,h.B)({connector:()=>new q(me,ze,ye),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ce})}},5684:(Sn,Ct,U)=>{"use strict";U.d(Ct,{T:()=>l});var I=U(9300);function l(q){return(0,I.h)((h,qe)=>q<=qe)}},8675:(Sn,Ct,U)=>{"use strict";U.d(Ct,{O:()=>h});var I=U(7272),l=U(3269),q=U(4482);function h(...qe){const Ne=(0,l.yG)(qe);return(0,q.e)((ze,ye)=>{(Ne?(0,I.z)(qe,ze,Ne):(0,I.z)(qe,ze)).subscribe(ye)})}},3900:(Sn,Ct,U)=>{"use strict";U.d(Ct,{w:()=>h});var I=U(8421),l=U(4482),q=U(5403);function h(qe,Ne){return(0,l.e)((ze,ye)=>{let me=null,Ce=0,tt=!1;const Ue=()=>tt&&!me&&ye.complete();ze.subscribe((0,q.x)(ye,dt=>{me?.unsubscribe();let st=0;const rt=Ce++;(0,I.Xf)(qe(dt,rt)).subscribe(me=(0,q.x)(ye,At=>ye.next(Ne?Ne(dt,At,rt,st++):At),()=>{me=null,Ue()}))},()=>{tt=!0,Ue()}))})}},5698:(Sn,Ct,U)=>{"use strict";U.d(Ct,{q:()=>h});var I=U(515),l=U(4482),q=U(5403);function h(qe){return qe<=0?()=>I.E:(0,l.e)((Ne,ze)=>{let ye=0;Ne.subscribe((0,q.x)(ze,me=>{++ye<=qe&&(ze.next(me),qe<=ye&&ze.complete())}))})}},2722:(Sn,Ct,U)=>{"use strict";U.d(Ct,{R:()=>qe});var I=U(4482),l=U(5403),q=U(8421),h=U(5032);function qe(Ne){return(0,I.e)((ze,ye)=>{(0,q.Xf)(Ne).subscribe((0,l.x)(ye,()=>ye.complete(),h.Z)),!ye.closed&&ze.subscribe(ye)})}},8505:(Sn,Ct,U)=>{"use strict";U.d(Ct,{b:()=>qe});var I=U(576),l=U(4482),q=U(5403),h=U(4671);function qe(Ne,ze,ye){const me=(0,I.m)(Ne)||ze||ye?{next:Ne,error:ze,complete:ye}:Ne;return me?(0,l.e)((Ce,tt)=>{var Ue;null===(Ue=me.subscribe)||void 0===Ue||Ue.call(me);let dt=!0;Ce.subscribe((0,q.x)(tt,st=>{var rt;null===(rt=me.next)||void 0===rt||rt.call(me,st),tt.next(st)},()=>{var st;dt=!1,null===(st=me.complete)||void 0===st||st.call(me),tt.complete()},st=>{var rt;dt=!1,null===(rt=me.error)||void 0===rt||rt.call(me,st),tt.error(st)},()=>{var st,rt;dt&&(null===(st=me.unsubscribe)||void 0===st||st.call(me)),null===(rt=me.finalize)||void 0===rt||rt.call(me)}))}):h.y}},8068:(Sn,Ct,U)=>{"use strict";U.d(Ct,{T:()=>h});var I=U(6805),l=U(4482),q=U(5403);function h(Ne=qe){return(0,l.e)((ze,ye)=>{let me=!1;ze.subscribe((0,q.x)(ye,Ce=>{me=!0,ye.next(Ce)},()=>me?ye.complete():ye.error(Ne())))})}function qe(){return new I.K}},4408:(Sn,Ct,U)=>{"use strict";U.d(Ct,{o:()=>qe});var I=U(727);class l extends I.w0{constructor(ze,ye){super()}schedule(ze,ye=0){return this}}const q={setInterval(Ne,ze,...ye){const{delegate:me}=q;return me?.setInterval?me.setInterval(Ne,ze,...ye):setInterval(Ne,ze,...ye)},clearInterval(Ne){const{delegate:ze}=q;return(ze?.clearInterval||clearInterval)(Ne)},delegate:void 0};var h=U(8737);class qe extends l{constructor(ze,ye){super(ze,ye),this.scheduler=ze,this.work=ye,this.pending=!1}schedule(ze,ye=0){if(this.closed)return this;this.state=ze;const me=this.id,Ce=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(Ce,me,ye)),this.pending=!0,this.delay=ye,this.id=this.id||this.requestAsyncId(Ce,this.id,ye),this}requestAsyncId(ze,ye,me=0){return q.setInterval(ze.flush.bind(ze,this),me)}recycleAsyncId(ze,ye,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return ye;q.clearInterval(ye)}execute(ze,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ze,ye);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ze,ye){let Ce,me=!1;try{this.work(ze)}catch(tt){me=!0,Ce=tt||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),Ce}unsubscribe(){if(!this.closed){const{id:ze,scheduler:ye}=this,{actions:me}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,h.P)(me,this),null!=ze&&(this.id=this.recycleAsyncId(ye,ze,null)),this.delay=null,super.unsubscribe()}}}},7565:(Sn,Ct,U)=>{"use strict";U.d(Ct,{v:()=>q});var I=U(6063);class l{constructor(qe,Ne=l.now){this.schedulerActionCtor=qe,this.now=Ne}schedule(qe,Ne=0,ze){return new this.schedulerActionCtor(this,qe).schedule(ze,Ne)}}l.now=I.l.now;class q extends l{constructor(qe,Ne=l.now){super(qe,Ne),this.actions=[],this._active=!1,this._scheduled=void 0}flush(qe){const{actions:Ne}=this;if(this._active)return void Ne.push(qe);let ze;this._active=!0;do{if(ze=qe.execute(qe.state,qe.delay))break}while(qe=Ne.shift());if(this._active=!1,ze){for(;qe=Ne.shift();)qe.unsubscribe();throw ze}}}},4986:(Sn,Ct,U)=>{"use strict";U.d(Ct,{P:()=>h,z:()=>q});var I=U(4408);const q=new(U(7565).v)(I.o),h=q},6063:(Sn,Ct,U)=>{"use strict";U.d(Ct,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(Sn,Ct,U)=>{"use strict";U.d(Ct,{z:()=>I});const I={setTimeout(l,q,...h){const{delegate:qe}=I;return qe?.setTimeout?qe.setTimeout(l,q,...h):setTimeout(l,q,...h)},clearTimeout(l){const{delegate:q}=I;return(q?.clearTimeout||clearTimeout)(l)},delegate:void 0}},2202:(Sn,Ct,U)=>{"use strict";U.d(Ct,{h:()=>l});const l=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Sn,Ct,U)=>{"use strict";U.d(Ct,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Sn,Ct,U)=>{"use strict";U.d(Ct,{K:()=>l});const l=(0,U(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Sn,Ct,U)=>{"use strict";U.d(Ct,{_6:()=>Ne,jO:()=>h,yG:()=>qe});var I=U(576),l=U(3532);function q(ze){return ze[ze.length-1]}function h(ze){return(0,I.m)(q(ze))?ze.pop():void 0}function qe(ze){return(0,l.K)(q(ze))?ze.pop():void 0}function Ne(ze,ye){return"number"==typeof q(ze)?ze.pop():ye}},4742:(Sn,Ct,U)=>{"use strict";U.d(Ct,{D:()=>qe});const{isArray:I}=Array,{getPrototypeOf:l,prototype:q,keys:h}=Object;function qe(ze){if(1===ze.length){const ye=ze[0];if(I(ye))return{args:ye,keys:null};if(function Ne(ze){return ze&&"object"==typeof ze&&l(ze)===q}(ye)){const me=h(ye);return{args:me.map(Ce=>ye[Ce]),keys:me}}}return{args:ze,keys:null}}},8737:(Sn,Ct,U)=>{"use strict";function I(l,q){if(l){const h=l.indexOf(q);0<=h&&l.splice(h,1)}}U.d(Ct,{P:()=>I})},3888:(Sn,Ct,U)=>{"use strict";function I(l){const h=l(qe=>{Error.call(qe),qe.stack=(new Error).stack});return h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h}U.d(Ct,{d:()=>I})},1810:(Sn,Ct,U)=>{"use strict";function I(l,q){return l.reduce((h,qe,Ne)=>(h[qe]=q[Ne],h),{})}U.d(Ct,{n:()=>I})},2806:(Sn,Ct,U)=>{"use strict";U.d(Ct,{O:()=>h,x:()=>q});var I=U(2416);let l=null;function q(qe){if(I.v.useDeprecatedSynchronousErrorHandling){const Ne=!l;if(Ne&&(l={errorThrown:!1,error:null}),qe(),Ne){const{errorThrown:ze,error:ye}=l;if(l=null,ze)throw ye}}else qe()}function h(qe){I.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=qe)}},9672:(Sn,Ct,U)=>{"use strict";function I(l,q,h,qe=0,Ne=!1){const ze=q.schedule(function(){h(),Ne?l.add(this.schedule(null,qe)):this.unsubscribe()},qe);if(l.add(ze),!Ne)return ze}U.d(Ct,{f:()=>I})},4671:(Sn,Ct,U)=>{"use strict";function I(l){return l}U.d(Ct,{y:()=>I})},1144:(Sn,Ct,U)=>{"use strict";U.d(Ct,{z:()=>I});const I=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(Sn,Ct,U)=>{"use strict";U.d(Ct,{D:()=>l});var I=U(576);function l(q){return Symbol.asyncIterator&&(0,I.m)(q?.[Symbol.asyncIterator])}},576:(Sn,Ct,U)=>{"use strict";function I(l){return"function"==typeof l}U.d(Ct,{m:()=>I})},3670:(Sn,Ct,U)=>{"use strict";U.d(Ct,{c:()=>q});var I=U(8822),l=U(576);function q(h){return(0,l.m)(h[I.L])}},6495:(Sn,Ct,U)=>{"use strict";U.d(Ct,{T:()=>q});var I=U(2202),l=U(576);function q(h){return(0,l.m)(h?.[I.h])}},8239:(Sn,Ct,U)=>{"use strict";U.d(Ct,{t:()=>l});var I=U(576);function l(q){return(0,I.m)(q?.then)}},3260:(Sn,Ct,U)=>{"use strict";U.d(Ct,{L:()=>h,Q:()=>q});var I=U(655),l=U(576);function q(qe){return(0,I.FC)(this,arguments,function*(){const ze=qe.getReader();try{for(;;){const{value:ye,done:me}=yield(0,I.qq)(ze.read());if(me)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ye)}}finally{ze.releaseLock()}})}function h(qe){return(0,l.m)(qe?.getReader)}},3532:(Sn,Ct,U)=>{"use strict";U.d(Ct,{K:()=>l});var I=U(576);function l(q){return q&&(0,I.m)(q.schedule)}},4482:(Sn,Ct,U)=>{"use strict";U.d(Ct,{A:()=>l,e:()=>q});var I=U(576);function l(h){return(0,I.m)(h?.lift)}function q(h){return qe=>{if(l(qe))return qe.lift(function(Ne){try{return h(Ne,this)}catch(ze){this.error(ze)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Z:()=>h});var I=U(4004);const{isArray:l}=Array;function h(qe){return(0,I.U)(Ne=>function q(qe,Ne){return l(Ne)?qe(...Ne):qe(Ne)}(qe,Ne))}},5032:(Sn,Ct,U)=>{"use strict";function I(){}U.d(Ct,{Z:()=>I})},7849:(Sn,Ct,U)=>{"use strict";U.d(Ct,{h:()=>q});var I=U(2416),l=U(3410);function q(h){l.z.setTimeout(()=>{const{onUnhandledError:qe}=I.v;if(!qe)throw h;qe(h)})}},4532:(Sn,Ct,U)=>{"use strict";function I(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ct,{z:()=>I})},655:(Sn,Ct,U)=>{"use strict";function ye(bt,Mt,Ot,Ht){return new(Ot||(Ot=Promise))(function(Jt,Nn){function Rn(wi){try{bn(Ht.next(wi))}catch(Pi){Nn(Pi)}}function gi(wi){try{bn(Ht.throw(wi))}catch(Pi){Nn(Pi)}}function bn(wi){wi.done?Jt(wi.value):function zt(Jt){return Jt instanceof Ot?Jt:new Ot(function(Nn){Nn(Jt)})}(wi.value).then(Rn,gi)}bn((Ht=Ht.apply(bt,Mt||[])).next())})}function vt(bt){return this instanceof vt?(this.v=bt,this):new vt(bt)}function Zt(bt,Mt,Ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zt,Ht=Ot.apply(bt,Mt||[]),Jt=[];return zt={},Nn("next"),Nn("throw"),Nn("return"),zt[Symbol.asyncIterator]=function(){return this},zt;function Nn(li){Ht[li]&&(zt[li]=function(en){return new Promise(function(si,It){Jt.push([li,en,si,It])>1||Rn(li,en)})})}function Rn(li,en){try{!function gi(li){li.value instanceof vt?Promise.resolve(li.value.v).then(bn,wi):Pi(Jt[0][2],li)}(Ht[li](en))}catch(si){Pi(Jt[0][3],si)}}function bn(li){Rn("next",li)}function wi(li){Rn("throw",li)}function Pi(li,en){li(en),Jt.shift(),Jt.length&&Rn(Jt[0][0],Jt[0][1])}}function Tn(bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,Mt=bt[Symbol.asyncIterator];return Mt?Mt.call(bt):(bt=function Ue(bt){var Mt="function"==typeof Symbol&&Symbol.iterator,Ot=Mt&&bt[Mt],Ht=0;if(Ot)return Ot.call(bt);if(bt&&"number"==typeof bt.length)return{next:function(){return bt&&Ht>=bt.length&&(bt=void 0),{value:bt&&bt[Ht++],done:!bt}}};throw new TypeError(Mt?"Object is not iterable.":"Symbol.iterator is not defined.")}(bt),Ot={},Ht("next"),Ht("throw"),Ht("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot);function Ht(Jt){Ot[Jt]=bt[Jt]&&function(Nn){return new Promise(function(Rn,gi){!function zt(Jt,Nn,Rn,gi){Promise.resolve(gi).then(function(bn){Jt({value:bn,done:Rn})},Nn)}(Rn,gi,(Nn=bt[Jt](Nn)).done,Nn.value)})}}}U.d(Ct,{FC:()=>Zt,KL:()=>Tn,mG:()=>ye,qq:()=>vt})},7340:(Sn,Ct,U)=>{"use strict";U.d(Ct,{F4:()=>Ce,IO:()=>rt,LC:()=>l,SB:()=>me,X$:()=>h,ZE:()=>vn,ZN:()=>Zt,_j:()=>I,eR:()=>tt,jt:()=>qe,k1:()=>Tn,l3:()=>q,oB:()=>ye,pV:()=>dt,vP:()=>ze});class I{}class l{}const q="*";function h(Bt,ke){return{type:7,name:Bt,definitions:ke,options:{}}}function qe(Bt,ke=null){return{type:4,styles:ke,timings:Bt}}function ze(Bt,ke=null){return{type:2,steps:Bt,options:ke}}function ye(Bt){return{type:6,styles:Bt,offset:null}}function me(Bt,ke,$e){return{type:0,name:Bt,styles:ke,options:$e}}function Ce(Bt){return{type:5,steps:Bt}}function tt(Bt,ke,$e=null){return{type:1,expr:Bt,animation:ke,options:$e}}function dt(Bt=null){return{type:9,options:Bt}}function rt(Bt,ke,$e=null){return{type:11,selector:Bt,animation:ke,options:$e}}function vt(Bt){Promise.resolve(null).then(Bt)}class Zt{constructor(ke=0,$e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ke+$e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ke=>ke()),this._onDoneFns=[])}onStart(ke){this._onStartFns.push(ke)}onDone(ke){this._onDoneFns.push(ke)}onDestroy(ke){this._onDestroyFns.push(ke)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ke=>ke()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ke=>ke()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ke){this._position=this.totalTime?ke*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ke){const $e="start"==ke?this._onStartFns:this._onDoneFns;$e.forEach(sn=>sn()),$e.length=0}}class vn{constructor(ke){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ke;let $e=0,sn=0,Gt=0;const $t=this.players.length;0==$t?vt(()=>this._onFinish()):this.players.forEach(dn=>{dn.onDone(()=>{++$e==$t&&this._onFinish()}),dn.onDestroy(()=>{++sn==$t&&this._onDestroy()}),dn.onStart(()=>{++Gt==$t&&this._onStart()})}),this.totalTime=this.players.reduce((dn,bt)=>Math.max(dn,bt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ke=>ke()),this._onDoneFns=[])}init(){this.players.forEach(ke=>ke.init())}onStart(ke){this._onStartFns.push(ke)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ke=>ke()),this._onStartFns=[])}onDone(ke){this._onDoneFns.push(ke)}onDestroy(ke){this._onDestroyFns.push(ke)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ke=>ke.play())}pause(){this.players.forEach(ke=>ke.pause())}restart(){this.players.forEach(ke=>ke.restart())}finish(){this._onFinish(),this.players.forEach(ke=>ke.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ke=>ke.destroy()),this._onDestroyFns.forEach(ke=>ke()),this._onDestroyFns=[])}reset(){this.players.forEach(ke=>ke.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ke){const $e=ke*this.totalTime;this.players.forEach(sn=>{const Gt=sn.totalTime?Math.min(1,$e/sn.totalTime):1;sn.setPosition(Gt)})}getPosition(){const ke=this.players.reduce(($e,sn)=>null===$e||sn.totalTime>$e.totalTime?sn:$e,null);return null!=ke?ke.getPosition():0}beforeDestroy(){this.players.forEach(ke=>{ke.beforeDestroy&&ke.beforeDestroy()})}triggerCallback(ke){const $e="start"==ke?this._onStartFns:this._onDoneFns;$e.forEach(sn=>sn()),$e.length=0}}const Tn="!"},2687:(Sn,Ct,U)=>{"use strict";U.d(Ct,{$s:()=>bt,Em:()=>Jt,Kd:()=>un,X6:()=>qt,ic:()=>Rn,qV:()=>hi,qm:()=>mt,rt:()=>lt,s1:()=>zt,tE:()=>mi,yG:()=>nt});var I=U(6895),l=U(4650),q=U(3353),h=U(7579),qe=U(727),Ne=U(1135),ze=U(9646),ye=U(9521),me=U(8505),Ce=U(8372),tt=U(9300),Ue=U(4004),dt=U(5698),st=U(5684),rt=U(1884),At=U(2722),vt=U(1281),Zt=U(9643),vn=U(2289);function $e(je,Qe){return(je.getAttribute(Qe)||"").match(/\S+/g)||[]}const Gt="cdk-describedby-message",$t="cdk-describedby-host";let dn=0,bt=(()=>{class je{constructor(Be,ft){this._platform=ft,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+dn++,this._document=Be,this._id=(0,l.f3M)(l.AFp)+"-"+dn++}describe(Be,ft,Rt){if(!this._canBeDescribed(Be,ft))return;const he=Mt(ft,Rt);"string"!=typeof ft?(Ot(ft,this._id),this._messageRegistry.set(he,{messageElement:ft,referenceCount:0})):this._messageRegistry.has(he)||this._createMessageElement(ft,Rt),this._isElementDescribedByMessage(Be,he)||this._addMessageReference(Be,he)}removeDescription(Be,ft,Rt){if(!ft||!this._isElementNode(Be))return;const he=Mt(ft,Rt);if(this._isElementDescribedByMessage(Be,he)&&this._removeMessageReference(Be,he),"string"==typeof ft){const ee=this._messageRegistry.get(he);ee&&0===ee.referenceCount&&this._deleteMessageElement(he)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const Be=this._document.querySelectorAll(`[${$t}="${this._id}"]`);for(let ft=0;ft<Be.length;ft++)this._removeCdkDescribedByReferenceIds(Be[ft]),Be[ft].removeAttribute($t);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(Be,ft){const Rt=this._document.createElement("div");Ot(Rt,this._id),Rt.textContent=Be,ft&&Rt.setAttribute("role",ft),this._createMessagesContainer(),this._messagesContainer.appendChild(Rt),this._messageRegistry.set(Mt(Be,ft),{messageElement:Rt,referenceCount:0})}_deleteMessageElement(Be){this._messageRegistry.get(Be)?.messageElement?.remove(),this._messageRegistry.delete(Be)}_createMessagesContainer(){if(this._messagesContainer)return;const Be="cdk-describedby-message-container",ft=this._document.querySelectorAll(`.${Be}[platform="server"]`);for(let he=0;he<ft.length;he++)ft[he].remove();const Rt=this._document.createElement("div");Rt.style.visibility="hidden",Rt.classList.add(Be),Rt.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&Rt.setAttribute("platform","server"),this._document.body.appendChild(Rt),this._messagesContainer=Rt}_removeCdkDescribedByReferenceIds(Be){const ft=$e(Be,"aria-describedby").filter(Rt=>0!=Rt.indexOf(Gt));Be.setAttribute("aria-describedby",ft.join(" "))}_addMessageReference(Be,ft){const Rt=this._messageRegistry.get(ft);(function Bt(je,Qe,Be){const ft=$e(je,Qe);ft.some(Rt=>Rt.trim()==Be.trim())||(ft.push(Be.trim()),je.setAttribute(Qe,ft.join(" ")))})(Be,"aria-describedby",Rt.messageElement.id),Be.setAttribute($t,this._id),Rt.referenceCount++}_removeMessageReference(Be,ft){const Rt=this._messageRegistry.get(ft);Rt.referenceCount--,function ke(je,Qe,Be){const Rt=$e(je,Qe).filter(he=>he!=Be.trim());Rt.length?je.setAttribute(Qe,Rt.join(" ")):je.removeAttribute(Qe)}(Be,"aria-describedby",Rt.messageElement.id),Be.removeAttribute($t)}_isElementDescribedByMessage(Be,ft){const Rt=$e(Be,"aria-describedby"),he=this._messageRegistry.get(ft),ee=he&&he.messageElement.id;return!!ee&&-1!=Rt.indexOf(ee)}_canBeDescribed(Be,ft){if(!this._isElementNode(Be))return!1;if(ft&&"object"==typeof ft)return!0;const Rt=null==ft?"":`${ft}`.trim(),he=Be.getAttribute("aria-label");return!(!Rt||he&&he.trim()===Rt)}_isElementNode(Be){return Be.nodeType===this._document.ELEMENT_NODE}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(I.K0),l.LFG(q.t4))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();function Mt(je,Qe){return"string"==typeof je?`${Qe||""}/${je}`:je}function Ot(je,Qe){je.id||(je.id=`${Gt}-${Qe}-${dn++}`)}class Ht{constructor(Qe){this._items=Qe,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new h.x,this._typeaheadSubscription=qe.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Be=>Be.disabled,this._pressedLetters=[],this.tabOut=new h.x,this.change=new h.x,Qe instanceof l.n_E&&Qe.changes.subscribe(Be=>{if(this._activeItem){const Rt=Be.toArray().indexOf(this._activeItem);Rt>-1&&Rt!==this._activeItemIndex&&(this._activeItemIndex=Rt)}})}skipPredicate(Qe){return this._skipPredicateFn=Qe,this}withWrap(Qe=!0){return this._wrap=Qe,this}withVerticalOrientation(Qe=!0){return this._vertical=Qe,this}withHorizontalOrientation(Qe){return this._horizontal=Qe,this}withAllowedModifierKeys(Qe){return this._allowedModifierKeys=Qe,this}withTypeAhead(Qe=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,me.b)(Be=>this._pressedLetters.push(Be)),(0,Ce.b)(Qe),(0,tt.h)(()=>this._pressedLetters.length>0),(0,Ue.U)(()=>this._pressedLetters.join(""))).subscribe(Be=>{const ft=this._getItemsArray();for(let Rt=1;Rt<ft.length+1;Rt++){const he=(this._activeItemIndex+Rt)%ft.length,ee=ft[he];if(!this._skipPredicateFn(ee)&&0===ee.getLabel().toUpperCase().trim().indexOf(Be)){this.setActiveItem(he);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Qe=!0){return this._homeAndEnd=Qe,this}setActiveItem(Qe){const Be=this._activeItem;this.updateActiveItem(Qe),this._activeItem!==Be&&this.change.next(this._activeItemIndex)}onKeydown(Qe){const Be=Qe.keyCode,Rt=["altKey","ctrlKey","metaKey","shiftKey"].every(he=>!Qe[he]||this._allowedModifierKeys.indexOf(he)>-1);switch(Be){case ye.Mf:return void this.tabOut.next();case ye.JH:if(this._vertical&&Rt){this.setNextItemActive();break}return;case ye.LH:if(this._vertical&&Rt){this.setPreviousItemActive();break}return;case ye.SV:if(this._horizontal&&Rt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case ye.oh:if(this._horizontal&&Rt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case ye.Sd:if(this._homeAndEnd&&Rt){this.setFirstItemActive();break}return;case ye.uR:if(this._homeAndEnd&&Rt){this.setLastItemActive();break}return;default:return void((Rt||(0,ye.Vb)(Qe,"shiftKey"))&&(Qe.key&&1===Qe.key.length?this._letterKeyStream.next(Qe.key.toLocaleUpperCase()):(Be>=ye.A&&Be<=ye.Z||Be>=ye.xE&&Be<=ye.aO)&&this._letterKeyStream.next(String.fromCharCode(Be))))}this._pressedLetters=[],Qe.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Qe){const Be=this._getItemsArray(),ft="number"==typeof Qe?Qe:Be.indexOf(Qe);this._activeItem=Be[ft]??null,this._activeItemIndex=ft}_setActiveItemByDelta(Qe){this._wrap?this._setActiveInWrapMode(Qe):this._setActiveInDefaultMode(Qe)}_setActiveInWrapMode(Qe){const Be=this._getItemsArray();for(let ft=1;ft<=Be.length;ft++){const Rt=(this._activeItemIndex+Qe*ft+Be.length)%Be.length;if(!this._skipPredicateFn(Be[Rt]))return void this.setActiveItem(Rt)}}_setActiveInDefaultMode(Qe){this._setActiveItemByIndex(this._activeItemIndex+Qe,Qe)}_setActiveItemByIndex(Qe,Be){const ft=this._getItemsArray();if(ft[Qe]){for(;this._skipPredicateFn(ft[Qe]);)if(!ft[Qe+=Be])return;this.setActiveItem(Qe)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class zt extends Ht{setActiveItem(Qe){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Qe),this.activeItem&&this.activeItem.setActiveStyles()}}class Jt extends Ht{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Qe){return this._origin=Qe,this}setActiveItem(Qe){super.setActiveItem(Qe),this.activeItem&&this.activeItem.focus(this._origin)}}let Rn=(()=>{class je{constructor(Be){this._platform=Be}isDisabled(Be){return Be.hasAttribute("disabled")}isVisible(Be){return function bn(je){return!!(je.offsetWidth||je.offsetHeight||"function"==typeof je.getClientRects&&je.getClientRects().length)}(Be)&&"visible"===getComputedStyle(Be).visibility}isTabbable(Be){if(!this._platform.isBrowser)return!1;const ft=function gi(je){try{return je.frameElement}catch{return null}}(function jn(je){return je.ownerDocument&&je.ownerDocument.defaultView||window}(Be));if(ft&&(-1===Vt(ft)||!this.isVisible(ft)))return!1;let Rt=Be.nodeName.toLowerCase(),he=Vt(Be);return Be.hasAttribute("contenteditable")?-1!==he:!("iframe"===Rt||"object"===Rt||this._platform.WEBKIT&&this._platform.IOS&&!function xn(je){let Qe=je.nodeName.toLowerCase(),Be="input"===Qe&&je.type;return"text"===Be||"password"===Be||"select"===Qe||"textarea"===Qe}(Be))&&("audio"===Rt?!!Be.hasAttribute("controls")&&-1!==he:"video"===Rt?-1!==he&&(null!==he||this._platform.FIREFOX||Be.hasAttribute("controls")):Be.tabIndex>=0)}isFocusable(Be,ft){return function Dn(je){return!function Pi(je){return function en(je){return"input"==je.nodeName.toLowerCase()}(je)&&"hidden"==je.type}(je)&&(function wi(je){let Qe=je.nodeName.toLowerCase();return"input"===Qe||"select"===Qe||"button"===Qe||"textarea"===Qe}(je)||function li(je){return function si(je){return"a"==je.nodeName.toLowerCase()}(je)&&je.hasAttribute("href")}(je)||je.hasAttribute("contenteditable")||It(je))}(Be)&&!this.isDisabled(Be)&&(ft?.ignoreVisibility||this.isVisible(Be))}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(q.t4))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();function It(je){if(!je.hasAttribute("tabindex")||void 0===je.tabIndex)return!1;let Qe=je.getAttribute("tabindex");return!(!Qe||isNaN(parseInt(Qe,10)))}function Vt(je){if(!It(je))return null;const Qe=parseInt(je.getAttribute("tabindex")||"",10);return isNaN(Qe)?-1:Qe}class wn{constructor(Qe,Be,ft,Rt,he=!1){this._element=Qe,this._checker=Be,this._ngZone=ft,this._document=Rt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,he||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Qe){this._enabled=Qe,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Qe,this._startAnchor),this._toggleAnchorTabIndex(Qe,this._endAnchor))}destroy(){const Qe=this._startAnchor,Be=this._endAnchor;Qe&&(Qe.removeEventListener("focus",this.startAnchorListener),Qe.remove()),Be&&(Be.removeEventListener("focus",this.endAnchorListener),Be.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Qe){return new Promise(Be=>{this._executeOnStable(()=>Be(this.focusInitialElement(Qe)))})}focusFirstTabbableElementWhenReady(Qe){return new Promise(Be=>{this._executeOnStable(()=>Be(this.focusFirstTabbableElement(Qe)))})}focusLastTabbableElementWhenReady(Qe){return new Promise(Be=>{this._executeOnStable(()=>Be(this.focusLastTabbableElement(Qe)))})}_getRegionBoundary(Qe){const Be=this._element.querySelectorAll(`[cdk-focus-region-${Qe}], [cdkFocusRegion${Qe}], [cdk-focus-${Qe}]`);return"start"==Qe?Be.length?Be[0]:this._getFirstTabbableElement(this._element):Be.length?Be[Be.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Qe){const Be=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Be){if(!this._checker.isFocusable(Be)){const ft=this._getFirstTabbableElement(Be);return ft?.focus(Qe),!!ft}return Be.focus(Qe),!0}return this.focusFirstTabbableElement(Qe)}focusFirstTabbableElement(Qe){const Be=this._getRegionBoundary("start");return Be&&Be.focus(Qe),!!Be}focusLastTabbableElement(Qe){const Be=this._getRegionBoundary("end");return Be&&Be.focus(Qe),!!Be}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Qe){if(this._checker.isFocusable(Qe)&&this._checker.isTabbable(Qe))return Qe;const Be=Qe.children;for(let ft=0;ft<Be.length;ft++){const Rt=Be[ft].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Be[ft]):null;if(Rt)return Rt}return null}_getLastTabbableElement(Qe){if(this._checker.isFocusable(Qe)&&this._checker.isTabbable(Qe))return Qe;const Be=Qe.children;for(let ft=Be.length-1;ft>=0;ft--){const Rt=Be[ft].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Be[ft]):null;if(Rt)return Rt}return null}_createAnchor(){const Qe=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Qe),Qe.classList.add("cdk-visually-hidden"),Qe.classList.add("cdk-focus-trap-anchor"),Qe.setAttribute("aria-hidden","true"),Qe}_toggleAnchorTabIndex(Qe,Be){Qe?Be.setAttribute("tabindex","0"):Be.removeAttribute("tabindex")}toggleAnchors(Qe){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Qe,this._startAnchor),this._toggleAnchorTabIndex(Qe,this._endAnchor))}_executeOnStable(Qe){this._ngZone.isStable?Qe():this._ngZone.onStable.pipe((0,dt.q)(1)).subscribe(Qe)}}let hi=(()=>{class je{constructor(Be,ft,Rt){this._checker=Be,this._ngZone=ft,this._document=Rt}create(Be,ft=!1){return new wn(Be,this._checker,this._ngZone,this._document,ft)}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(Rn),l.LFG(l.R0b),l.LFG(I.K0))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();function qt(je){return 0===je.buttons||0===je.offsetX&&0===je.offsetY}function nt(je){const Qe=je.touches&&je.touches[0]||je.changedTouches&&je.changedTouches[0];return!(!Qe||-1!==Qe.identifier||null!=Qe.radiusX&&1!==Qe.radiusX||null!=Qe.radiusY&&1!==Qe.radiusY)}const ne=new l.OlP("cdk-input-modality-detector-options"),$={ignoreKeys:[ye.zL,ye.jx,ye.b2,ye.MW,ye.JU]},W=(0,q.i$)({passive:!0,capture:!0});let ce=(()=>{class je{constructor(Be,ft,Rt,he){this._platform=Be,this._mostRecentTarget=null,this._modality=new Ne.X(null),this._lastTouchMs=0,this._onKeydown=ee=>{this._options?.ignoreKeys?.some(oe=>oe===ee.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,q.sA)(ee))},this._onMousedown=ee=>{Date.now()-this._lastTouchMs<650||(this._modality.next(qt(ee)?"keyboard":"mouse"),this._mostRecentTarget=(0,q.sA)(ee))},this._onTouchstart=ee=>{nt(ee)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,q.sA)(ee))},this._options={...$,...he},this.modalityDetected=this._modality.pipe((0,st.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,rt.x)()),Be.isBrowser&&ft.runOutsideAngular(()=>{Rt.addEventListener("keydown",this._onKeydown,W),Rt.addEventListener("mousedown",this._onMousedown,W),Rt.addEventListener("touchstart",this._onTouchstart,W)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,W),document.removeEventListener("mousedown",this._onMousedown,W),document.removeEventListener("touchstart",this._onTouchstart,W))}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(q.t4),l.LFG(l.R0b),l.LFG(I.K0),l.LFG(ne,8))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();const Ae=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function Le(){return null}}),Nt=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let un=(()=>{class je{constructor(Be,ft,Rt,he){this._ngZone=ft,this._defaultOptions=he,this._document=Rt,this._liveElement=Be||this._createLiveElement()}announce(Be,...ft){const Rt=this._defaultOptions;let he,ee;return 1===ft.length&&"number"==typeof ft[0]?ee=ft[0]:[he,ee]=ft,this.clear(),clearTimeout(this._previousTimeout),he||(he=Rt&&Rt.politeness?Rt.politeness:"polite"),null==ee&&Rt&&(ee=Rt.duration),this._liveElement.setAttribute("aria-live",he),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(oe=>this._currentResolve=oe)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Be,"number"==typeof ee&&(this._previousTimeout=setTimeout(()=>this.clear(),ee)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const Be="cdk-live-announcer-element",ft=this._document.getElementsByClassName(Be),Rt=this._document.createElement("div");for(let he=0;he<ft.length;he++)ft[he].remove();return Rt.classList.add(Be),Rt.classList.add("cdk-visually-hidden"),Rt.setAttribute("aria-atomic","true"),Rt.setAttribute("aria-live","polite"),this._document.body.appendChild(Rt),Rt}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(Ae,8),l.LFG(l.R0b),l.LFG(I.K0),l.LFG(Nt,8))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();const Wt=new l.OlP("cdk-focus-monitor-default-options"),Zn=(0,q.i$)({passive:!0,capture:!0});let mi=(()=>{class je{constructor(Be,ft,Rt,he,ee){this._ngZone=Be,this._platform=ft,this._inputModalityDetector=Rt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new h.x,this._rootNodeFocusAndBlurListener=oe=>{for(let Oe=(0,q.sA)(oe);Oe;Oe=Oe.parentElement)"focus"===oe.type?this._onFocus(oe,Oe):this._onBlur(oe,Oe)},this._document=he,this._detectionMode=ee?.detectionMode||0}monitor(Be,ft=!1){const Rt=(0,vt.fI)(Be);if(!this._platform.isBrowser||1!==Rt.nodeType)return(0,ze.of)(null);const he=(0,q.kV)(Rt)||this._getDocument(),ee=this._elementInfo.get(Rt);if(ee)return ft&&(ee.checkChildren=!0),ee.subject;const oe={checkChildren:ft,subject:new h.x,rootNode:he};return this._elementInfo.set(Rt,oe),this._registerGlobalListeners(oe),oe.subject}stopMonitoring(Be){const ft=(0,vt.fI)(Be),Rt=this._elementInfo.get(ft);Rt&&(Rt.subject.complete(),this._setClasses(ft),this._elementInfo.delete(ft),this._removeGlobalListeners(Rt))}focusVia(Be,ft,Rt){const he=(0,vt.fI)(Be);he===this._getDocument().activeElement?this._getClosestElementsInfo(he).forEach(([oe,Se])=>this._originChanged(oe,ft,Se)):(this._setOrigin(ft),"function"==typeof he.focus&&he.focus(Rt))}ngOnDestroy(){this._elementInfo.forEach((Be,ft)=>this.stopMonitoring(ft))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Be){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Be)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:Be&&this._isLastInteractionFromInputLabel(Be)?"mouse":"program"}_shouldBeAttributedToTouch(Be){return 1===this._detectionMode||!!Be?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(Be,ft){Be.classList.toggle("cdk-focused",!!ft),Be.classList.toggle("cdk-touch-focused","touch"===ft),Be.classList.toggle("cdk-keyboard-focused","keyboard"===ft),Be.classList.toggle("cdk-mouse-focused","mouse"===ft),Be.classList.toggle("cdk-program-focused","program"===ft)}_setOrigin(Be,ft=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Be,this._originFromTouchInteraction="touch"===Be&&ft,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Be,ft){const Rt=this._elementInfo.get(ft),he=(0,q.sA)(Be);!Rt||!Rt.checkChildren&&ft!==he||this._originChanged(ft,this._getFocusOrigin(he),Rt)}_onBlur(Be,ft){const Rt=this._elementInfo.get(ft);!Rt||Rt.checkChildren&&Be.relatedTarget instanceof Node&&ft.contains(Be.relatedTarget)||(this._setClasses(ft),this._emitOrigin(Rt,null))}_emitOrigin(Be,ft){Be.subject.observers.length&&this._ngZone.run(()=>Be.subject.next(ft))}_registerGlobalListeners(Be){if(!this._platform.isBrowser)return;const ft=Be.rootNode,Rt=this._rootNodeFocusListenerCount.get(ft)||0;Rt||this._ngZone.runOutsideAngular(()=>{ft.addEventListener("focus",this._rootNodeFocusAndBlurListener,Zn),ft.addEventListener("blur",this._rootNodeFocusAndBlurListener,Zn)}),this._rootNodeFocusListenerCount.set(ft,Rt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,At.R)(this._stopInputModalityDetector)).subscribe(he=>{this._setOrigin(he,!0)}))}_removeGlobalListeners(Be){const ft=Be.rootNode;if(this._rootNodeFocusListenerCount.has(ft)){const Rt=this._rootNodeFocusListenerCount.get(ft);Rt>1?this._rootNodeFocusListenerCount.set(ft,Rt-1):(ft.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Zn),ft.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Zn),this._rootNodeFocusListenerCount.delete(ft))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Be,ft,Rt){this._setClasses(Be,ft),this._emitOrigin(Rt,ft),this._lastFocusOrigin=ft}_getClosestElementsInfo(Be){const ft=[];return this._elementInfo.forEach((Rt,he)=>{(he===Be||Rt.checkChildren&&he.contains(Be))&&ft.push([he,Rt])}),ft}_isLastInteractionFromInputLabel(Be){const{_mostRecentTarget:ft,mostRecentModality:Rt}=this._inputModalityDetector;if("mouse"!==Rt||!ft||ft===Be||"INPUT"!==Be.nodeName&&"TEXTAREA"!==Be.nodeName||Be.disabled)return!1;const he=Be.labels;if(he)for(let ee=0;ee<he.length;ee++)if(he[ee].contains(ft))return!0;return!1}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(l.R0b),l.LFG(q.t4),l.LFG(ce),l.LFG(I.K0,8),l.LFG(Wt,8))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})();const kn="cdk-high-contrast-black-on-white",ni="cdk-high-contrast-white-on-black",wt="cdk-high-contrast-active";let mt=(()=>{class je{constructor(Be,ft){this._platform=Be,this._document=ft,this._breakpointSubscription=(0,l.f3M)(vn.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Be=this._document.createElement("div");Be.style.backgroundColor="rgb(1,2,3)",Be.style.position="absolute",this._document.body.appendChild(Be);const ft=this._document.defaultView||window,Rt=ft&&ft.getComputedStyle?ft.getComputedStyle(Be):null,he=(Rt&&Rt.backgroundColor||"").replace(/ /g,"");switch(Be.remove(),he){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Be=this._document.body.classList;Be.remove(wt,kn,ni),this._hasCheckedHighContrastMode=!0;const ft=this.getHighContrastMode();1===ft?Be.add(wt,kn):2===ft&&Be.add(wt,ni)}}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(q.t4),l.LFG(I.K0))},je.\u0275prov=l.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})(),lt=(()=>{class je{constructor(Be){Be._applyBodyHighContrastModeCssClasses()}}return je.\u0275fac=function(Be){return new(Be||je)(l.LFG(mt))},je.\u0275mod=l.oAB({type:je}),je.\u0275inj=l.cJS({imports:[Zt.Q8]}),je})()},445:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Is:()=>ze,vT:()=>me});var I=U(4650),l=U(6895);const q=new I.OlP("cdk-dir-doc",{providedIn:"root",factory:function h(){return(0,I.f3M)(l.K0)}}),qe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ze=(()=>{class Ce{constructor(Ue){if(this.value="ltr",this.change=new I.vpe,Ue){const st=Ue.documentElement?Ue.documentElement.dir:null;this.value=function Ne(Ce){const tt=Ce?.toLowerCase()||"";return"auto"===tt&&typeof navigator<"u"&&navigator?.language?qe.test(navigator.language)?"rtl":"ltr":"rtl"===tt?"rtl":"ltr"}((Ue.body?Ue.body.dir:null)||st||"ltr")}}ngOnDestroy(){this.change.complete()}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)(I.LFG(q,8))},Ce.\u0275prov=I.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),me=(()=>{class Ce{}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)},Ce.\u0275mod=I.oAB({type:Ce}),Ce.\u0275inj=I.cJS({}),Ce})()},1281:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Eq:()=>qe,HM:()=>Ne,Ig:()=>l,fI:()=>ze,su:()=>q});var I=U(4650);function l(me){return null!=me&&"false"!=`${me}`}function q(me,Ce=0){return function h(me){return!isNaN(parseFloat(me))&&!isNaN(Number(me))}(me)?Number(me):Ce}function qe(me){return Array.isArray(me)?me:[me]}function Ne(me){return null==me?"":"string"==typeof me?me:`${me}px`}function ze(me){return me instanceof I.SBq?me.nativeElement:me}},5017:(Sn,Ct,U)=>{"use strict";U.d(Ct,{A8:()=>Ce,Ov:()=>ye});var I=U(7579),l=U(4650);class ye{constructor(dt=!1,st,rt=!0){this._multiple=dt,this._emitChanges=rt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new I.x,st&&st.length&&(dt?st.forEach(At=>this._markSelected(At)):this._markSelected(st[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...dt){this._verifyValueAssignment(dt),dt.forEach(st=>this._markSelected(st)),this._emitChangeEvent()}deselect(...dt){this._verifyValueAssignment(dt),dt.forEach(st=>this._unmarkSelected(st)),this._emitChangeEvent()}toggle(dt){this.isSelected(dt)?this.deselect(dt):this.select(dt)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(dt){return this._selection.has(dt)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(dt){this._multiple&&this.selected&&this._selected.sort(dt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(dt){this.isSelected(dt)||(this._multiple||this._unmarkAll(),this._selection.add(dt),this._emitChanges&&this._selectedToEmit.push(dt))}_unmarkSelected(dt){this.isSelected(dt)&&(this._selection.delete(dt),this._emitChanges&&this._deselectedToEmit.push(dt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(dt=>this._unmarkSelected(dt))}_verifyValueAssignment(dt){}}let Ce=(()=>{class Ue{constructor(){this._listeners=[]}notify(st,rt){for(let At of this._listeners)At(st,rt)}listen(st){return this._listeners.push(st),()=>{this._listeners=this._listeners.filter(rt=>st!==rt)}}ngOnDestroy(){this._listeners=[]}}return Ue.\u0275fac=function(st){return new(st||Ue)},Ue.\u0275prov=l.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})()},9521:(Sn,Ct,U)=>{"use strict";U.d(Ct,{A:()=>Pi,JH:()=>Tn,JU:()=>Ne,K5:()=>qe,LH:()=>Zt,L_:()=>Ue,MW:()=>Nt,Mf:()=>q,SV:()=>vn,Sd:()=>At,Vb:()=>sr,Z:()=>Le,aO:()=>Nn,b2:()=>Kr,hY:()=>tt,jx:()=>ze,oh:()=>vt,uR:()=>rt,xE:()=>Gt,zL:()=>ye});const q=9,qe=13,Ne=16,ze=17,ye=18,tt=27,Ue=32,rt=35,At=36,vt=37,Zt=38,vn=39,Tn=40,Gt=48,Nn=57,Pi=65,Le=90,Nt=91,Kr=224;function sr(Co,...fi){return fi.length?fi.some(br=>Co[br]):Co.altKey||Co.shiftKey||Co.ctrlKey||Co.metaKey}},2289:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Yg:()=>Tn,u3:()=>ke});var I=U(4650),l=U(1281),q=U(7579),h=U(9841),qe=U(7272),Ne=U(8306),ze=U(5698),ye=U(5684),me=U(8372),Ce=U(4004),tt=U(8675),Ue=U(2722),dt=U(3353);const rt=new Set;let At,vt=(()=>{class $e{constructor(Gt){this._platform=Gt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vn}matchMedia(Gt){return(this._platform.WEBKIT||this._platform.BLINK)&&function Zt($e){if(!rt.has($e))try{At||(At=document.createElement("style"),At.setAttribute("type","text/css"),document.head.appendChild(At)),At.sheet&&(At.sheet.insertRule(`@media ${$e} {body{ }}`,0),rt.add($e))}catch(sn){console.error(sn)}}(Gt),this._matchMedia(Gt)}}return $e.\u0275fac=function(Gt){return new(Gt||$e)(I.LFG(dt.t4))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})();function vn($e){return{matches:"all"===$e||""===$e,media:$e,addListener:()=>{},removeListener:()=>{}}}let Tn=(()=>{class $e{constructor(Gt,$t){this._mediaMatcher=Gt,this._zone=$t,this._queries=new Map,this._destroySubject=new q.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Gt){return Bt((0,l.Eq)(Gt)).some(dn=>this._registerQuery(dn).mql.matches)}observe(Gt){const dn=Bt((0,l.Eq)(Gt)).map(Mt=>this._registerQuery(Mt).observable);let bt=(0,h.a)(dn);return bt=(0,qe.z)(bt.pipe((0,ze.q)(1)),bt.pipe((0,ye.T)(1),(0,me.b)(0))),bt.pipe((0,Ce.U)(Mt=>{const Ot={matches:!1,breakpoints:{}};return Mt.forEach(({matches:Ht,query:zt})=>{Ot.matches=Ot.matches||Ht,Ot.breakpoints[zt]=Ht}),Ot}))}_registerQuery(Gt){if(this._queries.has(Gt))return this._queries.get(Gt);const $t=this._mediaMatcher.matchMedia(Gt),bt={observable:new Ne.y(Mt=>{const Ot=Ht=>this._zone.run(()=>Mt.next(Ht));return $t.addListener(Ot),()=>{$t.removeListener(Ot)}}).pipe((0,tt.O)($t),(0,Ce.U)(({matches:Mt})=>({query:Gt,matches:Mt})),(0,Ue.R)(this._destroySubject)),mql:$t};return this._queries.set(Gt,bt),bt}}return $e.\u0275fac=function(Gt){return new(Gt||$e)(I.LFG(vt),I.LFG(I.R0b))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})();function Bt($e){return $e.map(sn=>sn.split(",")).reduce((sn,Gt)=>sn.concat(Gt)).map(sn=>sn.trim())}const ke={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},9643:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Q8:()=>me,wD:()=>ye});var I=U(1281),l=U(4650),q=U(8306),h=U(7579),qe=U(8372);let Ne=(()=>{class Ce{create(Ue){return typeof MutationObserver>"u"?null:new MutationObserver(Ue)}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),ze=(()=>{class Ce{constructor(Ue){this._mutationObserverFactory=Ue,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Ue,dt)=>this._cleanupObserver(dt))}observe(Ue){const dt=(0,I.fI)(Ue);return new q.y(st=>{const At=this._observeElement(dt).subscribe(st);return()=>{At.unsubscribe(),this._unobserveElement(dt)}})}_observeElement(Ue){if(this._observedElements.has(Ue))this._observedElements.get(Ue).count++;else{const dt=new h.x,st=this._mutationObserverFactory.create(rt=>dt.next(rt));st&&st.observe(Ue,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Ue,{observer:st,stream:dt,count:1})}return this._observedElements.get(Ue).stream}_unobserveElement(Ue){this._observedElements.has(Ue)&&(this._observedElements.get(Ue).count--,this._observedElements.get(Ue).count||this._cleanupObserver(Ue))}_cleanupObserver(Ue){if(this._observedElements.has(Ue)){const{observer:dt,stream:st}=this._observedElements.get(Ue);dt&&dt.disconnect(),st.complete(),this._observedElements.delete(Ue)}}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)(l.LFG(Ne))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),ye=(()=>{class Ce{constructor(Ue,dt,st){this._contentObserver=Ue,this._elementRef=dt,this._ngZone=st,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Ue){this._disabled=(0,I.Ig)(Ue),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Ue){this._debounce=(0,I.su)(Ue),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Ue=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Ue.pipe((0,qe.b)(this.debounce)):Ue).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)(l.Y36(ze),l.Y36(l.SBq),l.Y36(l.R0b))},Ce.\u0275dir=l.lG2({type:Ce,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Ce})(),me=(()=>{class Ce{}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)},Ce.\u0275mod=l.oAB({type:Ce}),Ce.\u0275inj=l.cJS({providers:[Ne]}),Ce})()},2561:(Sn,Ct,U)=>{"use strict";U.d(Ct,{pI:()=>Ln,xu:()=>ur,aV:()=>hi,U8:()=>qt});var I=U(8605),l=U(6895),q=U(4650),h=U(1281),qe=U(3353),Ne=U(445),ze=U(4080),ye=U(7579),me=U(727),Ce=U(6451),tt=U(4482),Ue=U(5403),st=U(5698),rt=U(2722),At=U(9521);const vt=(0,qe.Mq)();class Zt{constructor($,V){this._viewportRuler=$,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=V}attach(){}enable(){if(this._canBeEnabled()){const $=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=$.style.left||"",this._previousHTMLStyles.top=$.style.top||"",$.style.left=(0,h.HM)(-this._previousScrollPosition.left),$.style.top=(0,h.HM)(-this._previousScrollPosition.top),$.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const $=this._document.documentElement,W=$.style,ce=this._document.body.style,Ae=W.scrollBehavior||"",Le=ce.scrollBehavior||"";this._isEnabled=!1,W.left=this._previousHTMLStyles.left,W.top=this._previousHTMLStyles.top,$.classList.remove("cdk-global-scrollblock"),vt&&(W.scrollBehavior=ce.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vt&&(W.scrollBehavior=Ae,ce.scrollBehavior=Le)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const V=this._document.body,W=this._viewportRuler.getViewportSize();return V.scrollHeight>W.height||V.scrollWidth>W.width}}class Tn{constructor($,V,W,ce){this._scrollDispatcher=$,this._ngZone=V,this._viewportRuler=W,this._config=ce,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach($){this._overlayRef=$}enable(){if(this._scrollSubscription)return;const $=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=$.subscribe(()=>{const V=this._viewportRuler.getViewportScrollPosition().top;Math.abs(V-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=$.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Bt{enable(){}disable(){}attach(){}}function ke(ne,$){return $.some(V=>ne.bottom<V.top||ne.top>V.bottom||ne.right<V.left||ne.left>V.right)}function $e(ne,$){return $.some(V=>ne.top<V.top||ne.bottom>V.bottom||ne.left<V.left||ne.right>V.right)}class sn{constructor($,V,W,ce){this._scrollDispatcher=$,this._viewportRuler=V,this._ngZone=W,this._config=ce,this._scrollSubscription=null}attach($){this._overlayRef=$}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const V=this._overlayRef.overlayElement.getBoundingClientRect(),{width:W,height:ce}=this._viewportRuler.getViewportSize();ke(V,[{width:W,height:ce,bottom:ce,right:W,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Gt=(()=>{class ne{constructor(V,W,ce,Ae){this._scrollDispatcher=V,this._viewportRuler=W,this._ngZone=ce,this.noop=()=>new Bt,this.close=Le=>new Tn(this._scrollDispatcher,this._ngZone,this._viewportRuler,Le),this.block=()=>new Zt(this._viewportRuler,this._document),this.reposition=Le=>new sn(this._scrollDispatcher,this._viewportRuler,this._ngZone,Le),this._document=Ae}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(I.mF),q.LFG(I.rL),q.LFG(q.R0b),q.LFG(l.K0))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();class $t{constructor($){if(this.scrollStrategy=new Bt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,$){const V=Object.keys($);for(const W of V)void 0!==$[W]&&(this[W]=$[W])}}}class Mt{constructor($,V){this.connectionPair=$,this.scrollableViewProperties=V}}let zt=(()=>{class ne{constructor(V){this._attachedOverlays=[],this._document=V}ngOnDestroy(){this.detach()}add(V){this.remove(V),this._attachedOverlays.push(V)}remove(V){const W=this._attachedOverlays.indexOf(V);W>-1&&this._attachedOverlays.splice(W,1),0===this._attachedOverlays.length&&this.detach()}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(l.K0))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),Jt=(()=>{class ne extends zt{constructor(V,W){super(V),this._ngZone=W,this._keydownListener=ce=>{const Ae=this._attachedOverlays;for(let Le=Ae.length-1;Le>-1;Le--)if(Ae[Le]._keydownEvents.observers.length>0){const Nt=Ae[Le]._keydownEvents;this._ngZone?this._ngZone.run(()=>Nt.next(ce)):Nt.next(ce);break}}}add(V){super.add(V),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(l.K0),q.LFG(q.R0b,8))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),Nn=(()=>{class ne extends zt{constructor(V,W,ce){super(V),this._platform=W,this._ngZone=ce,this._cursorStyleIsSet=!1,this._pointerDownListener=Ae=>{this._pointerDownEventTarget=(0,qe.sA)(Ae)},this._clickListener=Ae=>{const Le=(0,qe.sA)(Ae),Nt="click"===Ae.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Le;this._pointerDownEventTarget=null;const un=this._attachedOverlays.slice();for(let Cn=un.length-1;Cn>-1;Cn--){const Wt=un[Cn];if(Wt._outsidePointerEvents.observers.length<1||!Wt.hasAttached())continue;if(Wt.overlayElement.contains(Le)||Wt.overlayElement.contains(Nt))break;const Zn=Wt._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Zn.next(Ae)):Zn.next(Ae)}}}add(V){if(super.add(V),!this._isAttached){const W=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(W)):this._addEventListeners(W),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=W.style.cursor,W.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const V=this._document.body;V.removeEventListener("pointerdown",this._pointerDownListener,!0),V.removeEventListener("click",this._clickListener,!0),V.removeEventListener("auxclick",this._clickListener,!0),V.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(V.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(V){V.addEventListener("pointerdown",this._pointerDownListener,!0),V.addEventListener("click",this._clickListener,!0),V.addEventListener("auxclick",this._clickListener,!0),V.addEventListener("contextmenu",this._clickListener,!0)}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(l.K0),q.LFG(qe.t4),q.LFG(q.R0b,8))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),Rn=(()=>{class ne{constructor(V,W){this._platform=W,this._document=V}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const V="cdk-overlay-container";if(this._platform.isBrowser||(0,qe.Oy)()){const ce=this._document.querySelectorAll(`.${V}[platform="server"], .${V}[platform="test"]`);for(let Ae=0;Ae<ce.length;Ae++)ce[Ae].remove()}const W=this._document.createElement("div");W.classList.add(V),(0,qe.Oy)()?W.setAttribute("platform","test"):this._platform.isBrowser||W.setAttribute("platform","server"),this._document.body.appendChild(W),this._containerElement=W}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(l.K0),q.LFG(qe.t4))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();class gi{constructor($,V,W,ce,Ae,Le,Nt,un,Cn,Wt=!1){this._portalOutlet=$,this._host=V,this._pane=W,this._config=ce,this._ngZone=Ae,this._keyboardDispatcher=Le,this._document=Nt,this._location=un,this._outsideClickDispatcher=Cn,this._animationsDisabled=Wt,this._backdropElement=null,this._backdropClick=new ye.x,this._attachments=new ye.x,this._detachments=new ye.x,this._locationChanges=me.w0.EMPTY,this._backdropClickHandler=Zn=>this._backdropClick.next(Zn),this._backdropTransitionendHandler=Zn=>{this._disposeBackdrop(Zn.target)},this._keydownEvents=new ye.x,this._outsidePointerEvents=new ye.x,ce.scrollStrategy&&(this._scrollStrategy=ce.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=ce.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach($){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const V=this._portalOutlet.attach($);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,st.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),V}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const $=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),$}dispose(){const $=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,$&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy($){$!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=$,this.hasAttached()&&($.attach(this),this.updatePosition()))}updateSize($){this._config={...this._config,...$},this._updateElementSize()}setDirection($){this._config={...this._config,direction:$},this._updateElementDirection()}addPanelClass($){this._pane&&this._toggleClasses(this._pane,$,!0)}removePanelClass($){this._pane&&this._toggleClasses(this._pane,$,!1)}getDirection(){const $=this._config.direction;return $?"string"==typeof $?$:$.value:"ltr"}updateScrollStrategy($){$!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=$,this.hasAttached()&&($.attach(this),$.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const $=this._pane.style;$.width=(0,h.HM)(this._config.width),$.height=(0,h.HM)(this._config.height),$.minWidth=(0,h.HM)(this._config.minWidth),$.minHeight=(0,h.HM)(this._config.minHeight),$.maxWidth=(0,h.HM)(this._config.maxWidth),$.maxHeight=(0,h.HM)(this._config.maxHeight)}_togglePointerEvents($){this._pane.style.pointerEvents=$?"":"none"}_attachBackdrop(){const $="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add($)})}):this._backdropElement.classList.add($)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const $=this._backdropElement;if($){if(this._animationsDisabled)return void this._disposeBackdrop($);$.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{$.addEventListener("transitionend",this._backdropTransitionendHandler)}),$.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop($)},500))}}_toggleClasses($,V,W){const ce=(0,h.Eq)(V||[]).filter(Ae=>!!Ae);ce.length&&(W?$.classList.add(...ce):$.classList.remove(...ce))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const $=this._ngZone.onStable.pipe((0,rt.R)((0,Ce.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),$.unsubscribe())})})}_disposeScrollStrategy(){const $=this._scrollStrategy;$&&($.disable(),$.detach&&$.detach())}_disposeBackdrop($){$&&($.removeEventListener("click",this._backdropClickHandler),$.removeEventListener("transitionend",this._backdropTransitionendHandler),$.remove(),this._backdropElement===$&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const bn="cdk-overlay-connected-position-bounding-box",wi=/([A-Za-z%]+)$/;class Pi{constructor($,V,W,ce,Ae){this._viewportRuler=V,this._document=W,this._platform=ce,this._overlayContainer=Ae,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ye.x,this._resizeSubscription=me.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin($)}get positions(){return this._preferredPositions}attach($){this._validatePositions(),$.hostElement.classList.add(bn),this._overlayRef=$,this._boundingBox=$.hostElement,this._pane=$.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const $=this._originRect,V=this._overlayRect,W=this._viewportRect,ce=this._containerRect,Ae=[];let Le;for(let Nt of this._preferredPositions){let un=this._getOriginPoint($,ce,Nt),Cn=this._getOverlayPoint(un,V,Nt),Wt=this._getOverlayFit(Cn,V,W,Nt);if(Wt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Nt,un);this._canFitWithFlexibleDimensions(Wt,Cn,W)?Ae.push({position:Nt,origin:un,overlayRect:V,boundingBoxRect:this._calculateBoundingBoxRect(un,Nt)}):(!Le||Le.overlayFit.visibleArea<Wt.visibleArea)&&(Le={overlayFit:Wt,overlayPoint:Cn,originPoint:un,position:Nt,overlayRect:V})}if(Ae.length){let Nt=null,un=-1;for(const Cn of Ae){const Wt=Cn.boundingBoxRect.width*Cn.boundingBoxRect.height*(Cn.position.weight||1);Wt>un&&(un=Wt,Nt=Cn)}return this._isPushed=!1,void this._applyPosition(Nt.position,Nt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Le.position,Le.originPoint);this._applyPosition(Le.position,Le.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&li(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const $=this._lastPosition;if($){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const V=this._getOriginPoint(this._originRect,this._containerRect,$);this._applyPosition($,V)}else this.apply()}withScrollableContainers($){return this._scrollables=$,this}withPositions($){return this._preferredPositions=$,-1===$.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin($){return this._viewportMargin=$,this}withFlexibleDimensions($=!0){return this._hasFlexibleDimensions=$,this}withGrowAfterOpen($=!0){return this._growAfterOpen=$,this}withPush($=!0){return this._canPush=$,this}withLockedPosition($=!0){return this._positionLocked=$,this}setOrigin($){return this._origin=$,this}withDefaultOffsetX($){return this._offsetX=$,this}withDefaultOffsetY($){return this._offsetY=$,this}withTransformOriginOn($){return this._transformOriginSelector=$,this}_getOriginPoint($,V,W){let ce,Ae;if("center"==W.originX)ce=$.left+$.width/2;else{const Le=this._isRtl()?$.right:$.left,Nt=this._isRtl()?$.left:$.right;ce="start"==W.originX?Le:Nt}return V.left<0&&(ce-=V.left),Ae="center"==W.originY?$.top+$.height/2:"top"==W.originY?$.top:$.bottom,V.top<0&&(Ae-=V.top),{x:ce,y:Ae}}_getOverlayPoint($,V,W){let ce,Ae;return ce="center"==W.overlayX?-V.width/2:"start"===W.overlayX?this._isRtl()?-V.width:0:this._isRtl()?0:-V.width,Ae="center"==W.overlayY?-V.height/2:"top"==W.overlayY?0:-V.height,{x:$.x+ce,y:$.y+Ae}}_getOverlayFit($,V,W,ce){const Ae=si(V);let{x:Le,y:Nt}=$,un=this._getOffset(ce,"x"),Cn=this._getOffset(ce,"y");un&&(Le+=un),Cn&&(Nt+=Cn);let mi=0-Nt,$n=Nt+Ae.height-W.height,kn=this._subtractOverflows(Ae.width,0-Le,Le+Ae.width-W.width),ni=this._subtractOverflows(Ae.height,mi,$n),wt=kn*ni;return{visibleArea:wt,isCompletelyWithinViewport:Ae.width*Ae.height===wt,fitsInViewportVertically:ni===Ae.height,fitsInViewportHorizontally:kn==Ae.width}}_canFitWithFlexibleDimensions($,V,W){if(this._hasFlexibleDimensions){const ce=W.bottom-V.y,Ae=W.right-V.x,Le=en(this._overlayRef.getConfig().minHeight),Nt=en(this._overlayRef.getConfig().minWidth),Cn=$.fitsInViewportHorizontally||null!=Nt&&Nt<=Ae;return($.fitsInViewportVertically||null!=Le&&Le<=ce)&&Cn}return!1}_pushOverlayOnScreen($,V,W){if(this._previousPushAmount&&this._positionLocked)return{x:$.x+this._previousPushAmount.x,y:$.y+this._previousPushAmount.y};const ce=si(V),Ae=this._viewportRect,Le=Math.max($.x+ce.width-Ae.width,0),Nt=Math.max($.y+ce.height-Ae.height,0),un=Math.max(Ae.top-W.top-$.y,0),Cn=Math.max(Ae.left-W.left-$.x,0);let Wt=0,Zn=0;return Wt=ce.width<=Ae.width?Cn||-Le:$.x<this._viewportMargin?Ae.left-W.left-$.x:0,Zn=ce.height<=Ae.height?un||-Nt:$.y<this._viewportMargin?Ae.top-W.top-$.y:0,this._previousPushAmount={x:Wt,y:Zn},{x:$.x+Wt,y:$.y+Zn}}_applyPosition($,V){if(this._setTransformOrigin($),this._setOverlayElementStyles(V,$),this._setBoundingBoxStyles(V,$),$.panelClass&&this._addPanelClasses($.panelClass),this._lastPosition=$,this._positionChanges.observers.length){const W=this._getScrollVisibility(),ce=new Mt($,W);this._positionChanges.next(ce)}this._isInitialRender=!1}_setTransformOrigin($){if(!this._transformOriginSelector)return;const V=this._boundingBox.querySelectorAll(this._transformOriginSelector);let W,ce=$.overlayY;W="center"===$.overlayX?"center":this._isRtl()?"start"===$.overlayX?"right":"left":"start"===$.overlayX?"left":"right";for(let Ae=0;Ae<V.length;Ae++)V[Ae].style.transformOrigin=`${W} ${ce}`}_calculateBoundingBoxRect($,V){const W=this._viewportRect,ce=this._isRtl();let Ae,Le,Nt,Wt,Zn,mi;if("top"===V.overlayY)Le=$.y,Ae=W.height-Le+this._viewportMargin;else if("bottom"===V.overlayY)Nt=W.height-$.y+2*this._viewportMargin,Ae=W.height-Nt+this._viewportMargin;else{const $n=Math.min(W.bottom-$.y+W.top,$.y),kn=this._lastBoundingBoxSize.height;Ae=2*$n,Le=$.y-$n,Ae>kn&&!this._isInitialRender&&!this._growAfterOpen&&(Le=$.y-kn/2)}if("end"===V.overlayX&&!ce||"start"===V.overlayX&&ce)mi=W.width-$.x+this._viewportMargin,Wt=$.x-this._viewportMargin;else if("start"===V.overlayX&&!ce||"end"===V.overlayX&&ce)Zn=$.x,Wt=W.right-$.x;else{const $n=Math.min(W.right-$.x+W.left,$.x),kn=this._lastBoundingBoxSize.width;Wt=2*$n,Zn=$.x-$n,Wt>kn&&!this._isInitialRender&&!this._growAfterOpen&&(Zn=$.x-kn/2)}return{top:Le,left:Zn,bottom:Nt,right:mi,width:Wt,height:Ae}}_setBoundingBoxStyles($,V){const W=this._calculateBoundingBoxRect($,V);!this._isInitialRender&&!this._growAfterOpen&&(W.height=Math.min(W.height,this._lastBoundingBoxSize.height),W.width=Math.min(W.width,this._lastBoundingBoxSize.width));const ce={};if(this._hasExactPosition())ce.top=ce.left="0",ce.bottom=ce.right=ce.maxHeight=ce.maxWidth="",ce.width=ce.height="100%";else{const Ae=this._overlayRef.getConfig().maxHeight,Le=this._overlayRef.getConfig().maxWidth;ce.height=(0,h.HM)(W.height),ce.top=(0,h.HM)(W.top),ce.bottom=(0,h.HM)(W.bottom),ce.width=(0,h.HM)(W.width),ce.left=(0,h.HM)(W.left),ce.right=(0,h.HM)(W.right),ce.alignItems="center"===V.overlayX?"center":"end"===V.overlayX?"flex-end":"flex-start",ce.justifyContent="center"===V.overlayY?"center":"bottom"===V.overlayY?"flex-end":"flex-start",Ae&&(ce.maxHeight=(0,h.HM)(Ae)),Le&&(ce.maxWidth=(0,h.HM)(Le))}this._lastBoundingBoxSize=W,li(this._boundingBox.style,ce)}_resetBoundingBoxStyles(){li(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){li(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles($,V){const W={},ce=this._hasExactPosition(),Ae=this._hasFlexibleDimensions,Le=this._overlayRef.getConfig();if(ce){const Wt=this._viewportRuler.getViewportScrollPosition();li(W,this._getExactOverlayY(V,$,Wt)),li(W,this._getExactOverlayX(V,$,Wt))}else W.position="static";let Nt="",un=this._getOffset(V,"x"),Cn=this._getOffset(V,"y");un&&(Nt+=`translateX(${un}px) `),Cn&&(Nt+=`translateY(${Cn}px)`),W.transform=Nt.trim(),Le.maxHeight&&(ce?W.maxHeight=(0,h.HM)(Le.maxHeight):Ae&&(W.maxHeight="")),Le.maxWidth&&(ce?W.maxWidth=(0,h.HM)(Le.maxWidth):Ae&&(W.maxWidth="")),li(this._pane.style,W)}_getExactOverlayY($,V,W){let ce={top:"",bottom:""},Ae=this._getOverlayPoint(V,this._overlayRect,$);return this._isPushed&&(Ae=this._pushOverlayOnScreen(Ae,this._overlayRect,W)),"bottom"===$.overlayY?ce.bottom=this._document.documentElement.clientHeight-(Ae.y+this._overlayRect.height)+"px":ce.top=(0,h.HM)(Ae.y),ce}_getExactOverlayX($,V,W){let Le,ce={left:"",right:""},Ae=this._getOverlayPoint(V,this._overlayRect,$);return this._isPushed&&(Ae=this._pushOverlayOnScreen(Ae,this._overlayRect,W)),Le=this._isRtl()?"end"===$.overlayX?"left":"right":"end"===$.overlayX?"right":"left","right"===Le?ce.right=this._document.documentElement.clientWidth-(Ae.x+this._overlayRect.width)+"px":ce.left=(0,h.HM)(Ae.x),ce}_getScrollVisibility(){const $=this._getOriginRect(),V=this._pane.getBoundingClientRect(),W=this._scrollables.map(ce=>ce.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$e($,W),isOriginOutsideView:ke($,W),isOverlayClipped:$e(V,W),isOverlayOutsideView:ke(V,W)}}_subtractOverflows($,...V){return V.reduce((W,ce)=>W-Math.max(ce,0),$)}_getNarrowedViewportRect(){const $=this._document.documentElement.clientWidth,V=this._document.documentElement.clientHeight,W=this._viewportRuler.getViewportScrollPosition();return{top:W.top+this._viewportMargin,left:W.left+this._viewportMargin,right:W.left+$-this._viewportMargin,bottom:W.top+V-this._viewportMargin,width:$-2*this._viewportMargin,height:V-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset($,V){return"x"===V?$.offsetX??this._offsetX:$.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses($){this._pane&&(0,h.Eq)($).forEach(V=>{""!==V&&-1===this._appliedPanelClasses.indexOf(V)&&(this._appliedPanelClasses.push(V),this._pane.classList.add(V))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach($=>{this._pane.classList.remove($)}),this._appliedPanelClasses=[])}_getOriginRect(){const $=this._origin;if($ instanceof q.SBq)return $.nativeElement.getBoundingClientRect();if($ instanceof Element)return $.getBoundingClientRect();const V=$.width||0,W=$.height||0;return{top:$.y,bottom:$.y+W,left:$.x,right:$.x+V,height:W,width:V}}}function li(ne,$){for(let V in $)$.hasOwnProperty(V)&&(ne[V]=$[V]);return ne}function en(ne){if("number"!=typeof ne&&null!=ne){const[$,V]=ne.split(wi);return V&&"px"!==V?null:parseFloat($)}return ne||null}function si(ne){return{top:Math.floor(ne.top),right:Math.floor(ne.right),bottom:Math.floor(ne.bottom),left:Math.floor(ne.left),width:Math.floor(ne.width),height:Math.floor(ne.height)}}const xn="cdk-global-overlay-wrapper";class Dn{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach($){const V=$.getConfig();this._overlayRef=$,this._width&&!V.width&&$.updateSize({width:this._width}),this._height&&!V.height&&$.updateSize({height:this._height}),$.hostElement.classList.add(xn),this._isDisposed=!1}top($=""){return this._bottomOffset="",this._topOffset=$,this._alignItems="flex-start",this}left($=""){return this._xOffset=$,this._xPosition="left",this}bottom($=""){return this._topOffset="",this._bottomOffset=$,this._alignItems="flex-end",this}right($=""){return this._xOffset=$,this._xPosition="right",this}start($=""){return this._xOffset=$,this._xPosition="start",this}end($=""){return this._xOffset=$,this._xPosition="end",this}width($=""){return this._overlayRef?this._overlayRef.updateSize({width:$}):this._width=$,this}height($=""){return this._overlayRef?this._overlayRef.updateSize({height:$}):this._height=$,this}centerHorizontally($=""){return this.left($),this._xPosition="center",this}centerVertically($=""){return this.top($),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const $=this._overlayRef.overlayElement.style,V=this._overlayRef.hostElement.style,W=this._overlayRef.getConfig(),{width:ce,height:Ae,maxWidth:Le,maxHeight:Nt}=W,un=!("100%"!==ce&&"100vw"!==ce||Le&&"100%"!==Le&&"100vw"!==Le),Cn=!("100%"!==Ae&&"100vh"!==Ae||Nt&&"100%"!==Nt&&"100vh"!==Nt),Wt=this._xPosition,Zn=this._xOffset,mi="rtl"===this._overlayRef.getConfig().direction;let $n="",kn="",ni="";un?ni="flex-start":"center"===Wt?(ni="center",mi?kn=Zn:$n=Zn):mi?"left"===Wt||"end"===Wt?(ni="flex-end",$n=Zn):("right"===Wt||"start"===Wt)&&(ni="flex-start",kn=Zn):"left"===Wt||"start"===Wt?(ni="flex-start",$n=Zn):("right"===Wt||"end"===Wt)&&(ni="flex-end",kn=Zn),$.position=this._cssPosition,$.marginLeft=un?"0":$n,$.marginTop=Cn?"0":this._topOffset,$.marginBottom=this._bottomOffset,$.marginRight=un?"0":kn,V.justifyContent=ni,V.alignItems=Cn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const $=this._overlayRef.overlayElement.style,V=this._overlayRef.hostElement,W=V.style;V.classList.remove(xn),W.justifyContent=W.alignItems=$.marginTop=$.marginBottom=$.marginLeft=$.marginRight=$.position="",this._overlayRef=null,this._isDisposed=!0}}let jn=(()=>{class ne{constructor(V,W,ce,Ae){this._viewportRuler=V,this._document=W,this._platform=ce,this._overlayContainer=Ae}global(){return new Dn}flexibleConnectedTo(V){return new Pi(V,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(I.rL),q.LFG(l.K0),q.LFG(qe.t4),q.LFG(Rn))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),wn=0,hi=(()=>{class ne{constructor(V,W,ce,Ae,Le,Nt,un,Cn,Wt,Zn,mi,$n){this.scrollStrategies=V,this._overlayContainer=W,this._componentFactoryResolver=ce,this._positionBuilder=Ae,this._keyboardDispatcher=Le,this._injector=Nt,this._ngZone=un,this._document=Cn,this._directionality=Wt,this._location=Zn,this._outsideClickDispatcher=mi,this._animationsModuleType=$n}create(V){const W=this._createHostElement(),ce=this._createPaneElement(W),Ae=this._createPortalOutlet(ce),Le=new $t(V);return Le.direction=Le.direction||this._directionality.value,new gi(Ae,W,ce,Le,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(V){const W=this._document.createElement("div");return W.id="cdk-overlay-"+wn++,W.classList.add("cdk-overlay-pane"),V.appendChild(W),W}_createHostElement(){const V=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(V),V}_createPortalOutlet(V){return this._appRef||(this._appRef=this._injector.get(q.z2F)),new ze.u0(V,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ne.\u0275fac=function(V){return new(V||ne)(q.LFG(Gt),q.LFG(Rn),q.LFG(q._Vd),q.LFG(jn),q.LFG(Jt),q.LFG(q.zs3),q.LFG(q.R0b),q.LFG(l.K0),q.LFG(Ne.Is),q.LFG(l.Ye),q.LFG(Nn),q.LFG(q.QbO,8))},ne.\u0275prov=q.Yz7({token:ne,factory:ne.\u0275fac}),ne})();const Fi=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Hi=new q.OlP("cdk-connected-overlay-scroll-strategy");let ur=(()=>{class ne{constructor(V){this.elementRef=V}}return ne.\u0275fac=function(V){return new(V||ne)(q.Y36(q.SBq))},ne.\u0275dir=q.lG2({type:ne,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),ne})(),Ln=(()=>{class ne{constructor(V,W,ce,Ae,Le){this._overlay=V,this._dir=Le,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=me.w0.EMPTY,this._attachSubscription=me.w0.EMPTY,this._detachSubscription=me.w0.EMPTY,this._positionSubscription=me.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new q.vpe,this.positionChange=new q.vpe,this.attach=new q.vpe,this.detach=new q.vpe,this.overlayKeydown=new q.vpe,this.overlayOutsideClick=new q.vpe,this._templatePortal=new ze.UE(W,ce),this._scrollStrategyFactory=Ae,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(V){this._offsetX=V,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(V){this._offsetY=V,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(V){this._hasBackdrop=(0,h.Ig)(V)}get lockPosition(){return this._lockPosition}set lockPosition(V){this._lockPosition=(0,h.Ig)(V)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(V){this._flexibleDimensions=(0,h.Ig)(V)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(V){this._growAfterOpen=(0,h.Ig)(V)}get push(){return this._push}set push(V){this._push=(0,h.Ig)(V)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(V){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),V.origin&&this.open&&this._position.apply()),V.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Fi);const V=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=V.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=V.detachments().subscribe(()=>this.detach.emit()),V.keydownEvents().subscribe(W=>{this.overlayKeydown.next(W),W.keyCode===At.hY&&!this.disableClose&&!(0,At.Vb)(W)&&(W.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(W=>{this.overlayOutsideClick.next(W)})}_buildConfig(){const V=this._position=this.positionStrategy||this._createPositionStrategy(),W=new $t({direction:this._dir,positionStrategy:V,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(W.width=this.width),(this.height||0===this.height)&&(W.height=this.height),(this.minWidth||0===this.minWidth)&&(W.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(W.minHeight=this.minHeight),this.backdropClass&&(W.backdropClass=this.backdropClass),this.panelClass&&(W.panelClass=this.panelClass),W}_updatePositionStrategy(V){const W=this.positions.map(ce=>({originX:ce.originX,originY:ce.originY,overlayX:ce.overlayX,overlayY:ce.overlayY,offsetX:ce.offsetX||this.offsetX,offsetY:ce.offsetY||this.offsetY,panelClass:ce.panelClass||void 0}));return V.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(W).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const V=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(V),V}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof ur?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(V=>{this.backdropClick.emit(V)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function dt(ne,$=!1){return(0,tt.e)((V,W)=>{let ce=0;V.subscribe((0,Ue.x)(W,Ae=>{const Le=ne(Ae,ce++);(Le||$)&&W.next(Ae),!Le&&W.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(V=>{this.positionChange.emit(V),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return ne.\u0275fac=function(V){return new(V||ne)(q.Y36(hi),q.Y36(q.Rgc),q.Y36(q.s_b),q.Y36(Hi),q.Y36(Ne.Is,8))},ne.\u0275dir=q.lG2({type:ne,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[q.TTD]}),ne})();const zn={provide:Hi,deps:[hi],useFactory:function pr(ne){return()=>ne.scrollStrategies.reposition()}};let qt=(()=>{class ne{}return ne.\u0275fac=function(V){return new(V||ne)},ne.\u0275mod=q.oAB({type:ne}),ne.\u0275inj=q.cJS({providers:[hi,zn],imports:[Ne.vT,ze.eL,I.Cl,I.Cl]}),ne})()},3353:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Mq:()=>st,Oy:()=>Bt,_i:()=>rt,i$:()=>tt,kV:()=>Zt,qK:()=>ye,sA:()=>Tn,t4:()=>h});var I=U(4650),l=U(6895);let q;try{q=typeof Intl<"u"&&Intl.v8BreakIterator}catch{q=!1}let Ne,h=(()=>{class ke{constructor(sn){this._platformId=sn,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!q)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ke.\u0275fac=function(sn){return new(sn||ke)(I.LFG(I.Lbi))},ke.\u0275prov=I.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})();const ze=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ye(){if(Ne)return Ne;if("object"!=typeof document||!document)return Ne=new Set(ze),Ne;let ke=document.createElement("input");return Ne=new Set(ze.filter($e=>(ke.setAttribute("type",$e),ke.type===$e))),Ne}let me,Ue,dt,At;function tt(ke){return function Ce(){if(null==me&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>me=!0}))}finally{me=me||!1}return me}()?ke:!!ke.capture}function st(){if(null==dt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return dt=!1,dt;if("scrollBehavior"in document.documentElement.style)dt=!0;else{const ke=Element.prototype.scrollTo;dt=!!ke&&!/\{\s*\[native code\]\s*\}/.test(ke.toString())}}return dt}function rt(){if("object"!=typeof document||!document)return 0;if(null==Ue){const ke=document.createElement("div"),$e=ke.style;ke.dir="rtl",$e.width="1px",$e.overflow="auto",$e.visibility="hidden",$e.pointerEvents="none",$e.position="absolute";const sn=document.createElement("div"),Gt=sn.style;Gt.width="2px",Gt.height="1px",ke.appendChild(sn),document.body.appendChild(ke),Ue=0,0===ke.scrollLeft&&(ke.scrollLeft=1,Ue=0===ke.scrollLeft?1:2),ke.remove()}return Ue}function Zt(ke){if(function vt(){if(null==At){const ke=typeof document<"u"?document.head:null;At=!(!ke||!ke.createShadowRoot&&!ke.attachShadow)}return At}()){const $e=ke.getRootNode?ke.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&$e instanceof ShadowRoot)return $e}return null}function Tn(ke){return ke.composedPath?ke.composedPath()[0]:ke.target}function Bt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(Sn,Ct,U)=>{"use strict";U.d(Ct,{C5:()=>me,UE:()=>Ce,bH:()=>vt,eL:()=>Tn,ig:()=>At,u0:()=>st});var I=U(4650);class ye{attach($e){return this._attachedHost=$e,$e.attach(this)}detach(){let $e=this._attachedHost;null!=$e&&(this._attachedHost=null,$e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost($e){this._attachedHost=$e}}class me extends ye{constructor($e,sn,Gt,$t){super(),this.component=$e,this.viewContainerRef=sn,this.injector=Gt,this.componentFactoryResolver=$t}}class Ce extends ye{constructor($e,sn,Gt,$t){super(),this.templateRef=$e,this.viewContainerRef=sn,this.context=Gt,this.injector=$t}get origin(){return this.templateRef.elementRef}attach($e,sn=this.context){return this.context=sn,super.attach($e)}detach(){return this.context=void 0,super.detach()}}class tt extends ye{constructor($e){super(),this.element=$e instanceof I.SBq?$e.nativeElement:$e}}class st extends class Ue{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach($e){return $e instanceof me?(this._attachedPortal=$e,this.attachComponentPortal($e)):$e instanceof Ce?(this._attachedPortal=$e,this.attachTemplatePortal($e)):this.attachDomPortal&&$e instanceof tt?(this._attachedPortal=$e,this.attachDomPortal($e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn($e){this._disposeFn=$e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor($e,sn,Gt,$t,dn){super(),this.outletElement=$e,this._componentFactoryResolver=sn,this._appRef=Gt,this._defaultInjector=$t,this.attachDomPortal=bt=>{const Mt=bt.element,Ot=this._document.createComment("dom-portal");Mt.parentNode.insertBefore(Ot,Mt),this.outletElement.appendChild(Mt),this._attachedPortal=bt,super.setDisposeFn(()=>{Ot.parentNode&&Ot.parentNode.replaceChild(Mt,Ot)})},this._document=dn}attachComponentPortal($e){const Gt=($e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory($e.component);let $t;return $e.viewContainerRef?($t=$e.viewContainerRef.createComponent(Gt,$e.viewContainerRef.length,$e.injector||$e.viewContainerRef.injector),this.setDisposeFn(()=>$t.destroy())):($t=Gt.create($e.injector||this._defaultInjector||I.zs3.NULL),this._appRef.attachView($t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView($t.hostView),$t.destroy()})),this.outletElement.appendChild(this._getComponentRootNode($t)),this._attachedPortal=$e,$t}attachTemplatePortal($e){let sn=$e.viewContainerRef,Gt=sn.createEmbeddedView($e.templateRef,$e.context,{injector:$e.injector});return Gt.rootNodes.forEach($t=>this.outletElement.appendChild($t)),Gt.detectChanges(),this.setDisposeFn(()=>{let $t=sn.indexOf(Gt);-1!==$t&&sn.remove($t)}),this._attachedPortal=$e,Gt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode($e){return $e.hostView.rootNodes[0]}}let At=(()=>{class ke extends Ce{constructor(sn,Gt){super(sn,Gt)}}return ke.\u0275fac=function(sn){return new(sn||ke)(I.Y36(I.Rgc),I.Y36(I.s_b))},ke.\u0275dir=I.lG2({type:ke,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[I.qOj]}),ke})(),vt=(()=>{class ke extends At{}return ke.\u0275fac=function(){let $e;return function(Gt){return($e||($e=I.n5z(ke)))(Gt||ke)}}(),ke.\u0275dir=I.lG2({type:ke,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[I._Bn([{provide:At,useExisting:ke}]),I.qOj]}),ke})(),Tn=(()=>{class ke{}return ke.\u0275fac=function(sn){return new(sn||ke)},ke.\u0275mod=I.oAB({type:ke}),ke.\u0275inj=I.cJS({}),ke})()},8605:(Sn,Ct,U)=>{"use strict";U.d(Ct,{PQ:()=>wn,ZD:()=>qt,mF:()=>jn,Cl:()=>nt,rL:()=>Fi});var I=U(1281),l=U(4650),q=U(4408),h=U(727);const qe={schedule(ne){let $=requestAnimationFrame,V=cancelAnimationFrame;const{delegate:W}=qe;W&&($=W.requestAnimationFrame,V=W.cancelAnimationFrame);const ce=$(Ae=>{V=void 0,ne(Ae)});return new h.w0(()=>V?.(ce))},requestAnimationFrame(...ne){const{delegate:$}=qe;return($?.requestAnimationFrame||requestAnimationFrame)(...ne)},cancelAnimationFrame(...ne){const{delegate:$}=qe;return($?.cancelAnimationFrame||cancelAnimationFrame)(...ne)},delegate:void 0};var ze=U(7565);new class ye extends ze.v{flush($){this._active=!0;const V=this._scheduled;this._scheduled=void 0;const{actions:W}=this;let ce;$=$||W.shift();do{if(ce=$.execute($.state,$.delay))break}while(($=W[0])&&$.id===V&&W.shift());if(this._active=!1,ce){for(;($=W[0])&&$.id===V&&W.shift();)$.unsubscribe();throw ce}}}(class Ne extends q.o{constructor($,V){super($,V),this.scheduler=$,this.work=V}requestAsyncId($,V,W=0){return null!==W&&W>0?super.requestAsyncId($,V,W):($.actions.push(this),$._scheduled||($._scheduled=qe.requestAnimationFrame(()=>$.flush(void 0))))}recycleAsyncId($,V,W=0){if(null!=W&&W>0||null==W&&this.delay>0)return super.recycleAsyncId($,V,W);$.actions.some(ce=>ce.id===V)||(qe.cancelAnimationFrame(V),$._scheduled=void 0)}});let Ue,tt=1;const dt={};function st(ne){return ne in dt&&(delete dt[ne],!0)}const rt={setImmediate(ne){const $=tt++;return dt[$]=!0,Ue||(Ue=Promise.resolve()),Ue.then(()=>st($)&&ne()),$},clearImmediate(ne){st(ne)}},{setImmediate:vt,clearImmediate:Zt}=rt,vn={setImmediate(...ne){const{delegate:$}=vn;return($?.setImmediate||vt)(...ne)},clearImmediate(ne){const{delegate:$}=vn;return($?.clearImmediate||Zt)(ne)},delegate:void 0};new class Bt extends ze.v{flush($){this._active=!0;const V=this._scheduled;this._scheduled=void 0;const{actions:W}=this;let ce;$=$||W.shift();do{if(ce=$.execute($.state,$.delay))break}while(($=W[0])&&$.id===V&&W.shift());if(this._active=!1,ce){for(;($=W[0])&&$.id===V&&W.shift();)$.unsubscribe();throw ce}}}(class Tn extends q.o{constructor($,V){super($,V),this.scheduler=$,this.work=V}requestAsyncId($,V,W=0){return null!==W&&W>0?super.requestAsyncId($,V,W):($.actions.push(this),$._scheduled||($._scheduled=vn.setImmediate($.flush.bind($,void 0))))}recycleAsyncId($,V,W=0){if(null!=W&&W>0||null==W&&this.delay>0)return super.recycleAsyncId($,V,W);$.actions.some(ce=>ce.id===V)||(vn.clearImmediate(V),$._scheduled=void 0)}});var sn=U(7579),Gt=U(9646),$t=U(8306),dn=U(4968),bt=U(4986),Mt=U(4482),Ot=U(8421),Ht=U(5403),Jt=U(5963);function Nn(ne,$=bt.z){return function zt(ne){return(0,Mt.e)(($,V)=>{let W=!1,ce=null,Ae=null,Le=!1;const Nt=()=>{if(Ae?.unsubscribe(),Ae=null,W){W=!1;const Cn=ce;ce=null,V.next(Cn)}Le&&V.complete()},un=()=>{Ae=null,Le&&V.complete()};$.subscribe((0,Ht.x)(V,Cn=>{W=!0,ce=Cn,Ae||(0,Ot.Xf)(ne(Cn)).subscribe(Ae=(0,Ht.x)(V,Nt,un))},()=>{Le=!0,(!W||!Ae||Ae.closed)&&V.complete()}))})}(()=>(0,Jt.H)(ne,$))}var Rn=U(9300),gi=U(2722),bn=U(3353),wi=U(6895),Pi=U(445);let jn=(()=>{class ne{constructor(V,W,ce){this._ngZone=V,this._platform=W,this._scrolled=new sn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ce}register(V){this.scrollContainers.has(V)||this.scrollContainers.set(V,V.elementScrolled().subscribe(()=>this._scrolled.next(V)))}deregister(V){const W=this.scrollContainers.get(V);W&&(W.unsubscribe(),this.scrollContainers.delete(V))}scrolled(V=20){return this._platform.isBrowser?new $t.y(W=>{this._globalSubscription||this._addGlobalListener();const ce=V>0?this._scrolled.pipe(Nn(V)).subscribe(W):this._scrolled.subscribe(W);return this._scrolledCount++,()=>{ce.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Gt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((V,W)=>this.deregister(W)),this._scrolled.complete()}ancestorScrolled(V,W){const ce=this.getAncestorScrollContainers(V);return this.scrolled(W).pipe((0,Rn.h)(Ae=>!Ae||ce.indexOf(Ae)>-1))}getAncestorScrollContainers(V){const W=[];return this.scrollContainers.forEach((ce,Ae)=>{this._scrollableContainsElement(Ae,V)&&W.push(Ae)}),W}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(V,W){let ce=(0,I.fI)(W),Ae=V.getElementRef().nativeElement;do{if(ce==Ae)return!0}while(ce=ce.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const V=this._getWindow();return(0,dn.R)(V.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return ne.\u0275fac=function(V){return new(V||ne)(l.LFG(l.R0b),l.LFG(bn.t4),l.LFG(wi.K0,8))},ne.\u0275prov=l.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),wn=(()=>{class ne{constructor(V,W,ce,Ae){this.elementRef=V,this.scrollDispatcher=W,this.ngZone=ce,this.dir=Ae,this._destroyed=new sn.x,this._elementScrolled=new $t.y(Le=>this.ngZone.runOutsideAngular(()=>(0,dn.R)(this.elementRef.nativeElement,"scroll").pipe((0,gi.R)(this._destroyed)).subscribe(Le)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(V){const W=this.elementRef.nativeElement,ce=this.dir&&"rtl"==this.dir.value;null==V.left&&(V.left=ce?V.end:V.start),null==V.right&&(V.right=ce?V.start:V.end),null!=V.bottom&&(V.top=W.scrollHeight-W.clientHeight-V.bottom),ce&&0!=(0,bn._i)()?(null!=V.left&&(V.right=W.scrollWidth-W.clientWidth-V.left),2==(0,bn._i)()?V.left=V.right:1==(0,bn._i)()&&(V.left=V.right?-V.right:V.right)):null!=V.right&&(V.left=W.scrollWidth-W.clientWidth-V.right),this._applyScrollToOptions(V)}_applyScrollToOptions(V){const W=this.elementRef.nativeElement;(0,bn.Mq)()?W.scrollTo(V):(null!=V.top&&(W.scrollTop=V.top),null!=V.left&&(W.scrollLeft=V.left))}measureScrollOffset(V){const W="left",Ae=this.elementRef.nativeElement;if("top"==V)return Ae.scrollTop;if("bottom"==V)return Ae.scrollHeight-Ae.clientHeight-Ae.scrollTop;const Le=this.dir&&"rtl"==this.dir.value;return"start"==V?V=Le?"right":W:"end"==V&&(V=Le?W:"right"),Le&&2==(0,bn._i)()?V==W?Ae.scrollWidth-Ae.clientWidth-Ae.scrollLeft:Ae.scrollLeft:Le&&1==(0,bn._i)()?V==W?Ae.scrollLeft+Ae.scrollWidth-Ae.clientWidth:-Ae.scrollLeft:V==W?Ae.scrollLeft:Ae.scrollWidth-Ae.clientWidth-Ae.scrollLeft}}return ne.\u0275fac=function(V){return new(V||ne)(l.Y36(l.SBq),l.Y36(jn),l.Y36(l.R0b),l.Y36(Pi.Is,8))},ne.\u0275dir=l.lG2({type:ne,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),ne})(),Fi=(()=>{class ne{constructor(V,W,ce){this._platform=V,this._change=new sn.x,this._changeListener=Ae=>{this._change.next(Ae)},this._document=ce,W.runOutsideAngular(()=>{if(V.isBrowser){const Ae=this._getWindow();Ae.addEventListener("resize",this._changeListener),Ae.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const V=this._getWindow();V.removeEventListener("resize",this._changeListener),V.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const V={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),V}getViewportRect(){const V=this.getViewportScrollPosition(),{width:W,height:ce}=this.getViewportSize();return{top:V.top,left:V.left,bottom:V.top+ce,right:V.left+W,height:ce,width:W}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const V=this._document,W=this._getWindow(),ce=V.documentElement,Ae=ce.getBoundingClientRect();return{top:-Ae.top||V.body.scrollTop||W.scrollY||ce.scrollTop||0,left:-Ae.left||V.body.scrollLeft||W.scrollX||ce.scrollLeft||0}}change(V=20){return V>0?this._change.pipe(Nn(V)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const V=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:V.innerWidth,height:V.innerHeight}:{width:0,height:0}}}return ne.\u0275fac=function(V){return new(V||ne)(l.LFG(bn.t4),l.LFG(l.R0b),l.LFG(wi.K0,8))},ne.\u0275prov=l.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})(),qt=(()=>{class ne{}return ne.\u0275fac=function(V){return new(V||ne)},ne.\u0275mod=l.oAB({type:ne}),ne.\u0275inj=l.cJS({}),ne})(),nt=(()=>{class ne{}return ne.\u0275fac=function(V){return new(V||ne)},ne.\u0275mod=l.oAB({type:ne}),ne.\u0275inj=l.cJS({imports:[Pi.vT,qt,Pi.vT,qt]}),ne})()},6895:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Do:()=>Bt,ED:()=>Eo,EM:()=>Oo,HT:()=>qe,JF:()=>Sr,K0:()=>ze,Mx:()=>wo,NF:()=>$r,O5:()=>Co,Ov:()=>vl,PC:()=>io,RF:()=>Br,S$:()=>vt,V_:()=>Ce,Ye:()=>ke,b0:()=>Tn,bD:()=>Ni,ez:()=>Rs,lw:()=>ye,mk:()=>dr,mr:()=>vn,n9:()=>Xr,q:()=>q,sg:()=>yr,tP:()=>Mr,w_:()=>Ne});var I=U(4650);let l=null;function q(){return l}function qe(K){l||(l=K)}class Ne{}const ze=new I.OlP("DocumentToken");let ye=(()=>{class K{historyGo(X){throw new Error("Not implemented")}}return K.\u0275fac=function(X){return new(X||K)},K.\u0275prov=I.Yz7({token:K,factory:function(){return function me(){return(0,I.LFG)(tt)}()},providedIn:"platform"}),K})();const Ce=new I.OlP("Location Initialized");let tt=(()=>{class K extends ye{constructor(X){super(),this._doc=X,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(X){const xe=q().getGlobalEventTarget(this._doc,"window");return xe.addEventListener("popstate",X,!1),()=>xe.removeEventListener("popstate",X)}onHashChange(X){const xe=q().getGlobalEventTarget(this._doc,"window");return xe.addEventListener("hashchange",X,!1),()=>xe.removeEventListener("hashchange",X)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(X){this.location.pathname=X}pushState(X,xe,pt){Ue()?this._history.pushState(X,xe,pt):this.location.hash=pt}replaceState(X,xe,pt){Ue()?this._history.replaceState(X,xe,pt):this.location.hash=pt}forward(){this._history.forward()}back(){this._history.back()}historyGo(X=0){this._history.go(X)}getState(){return this._history.state}}return K.\u0275fac=function(X){return new(X||K)(I.LFG(ze))},K.\u0275prov=I.Yz7({token:K,factory:function(){return function dt(){return new tt((0,I.LFG)(ze))}()},providedIn:"platform"}),K})();function Ue(){return!!window.history.pushState}function st(K,ge){if(0==K.length)return ge;if(0==ge.length)return K;let X=0;return K.endsWith("/")&&X++,ge.startsWith("/")&&X++,2==X?K+ge.substring(1):1==X?K+ge:K+"/"+ge}function rt(K){const ge=K.match(/#|\?|$/),X=ge&&ge.index||K.length;return K.slice(0,X-("/"===K[X-1]?1:0))+K.slice(X)}function At(K){return K&&"?"!==K[0]?"?"+K:K}let vt=(()=>{class K{historyGo(X){throw new Error("Not implemented")}}return K.\u0275fac=function(X){return new(X||K)},K.\u0275prov=I.Yz7({token:K,factory:function(){return function Zt(){const K=(0,I.LFG)(ze).location;return new Tn((0,I.LFG)(ye),K&&K.origin||"")}()},providedIn:"root"}),K})();const vn=new I.OlP("appBaseHref");let Tn=(()=>{class K extends vt{constructor(X,xe){if(super(),this._platformLocation=X,this._removeListenerFns=[],null==xe&&(xe=this._platformLocation.getBaseHrefFromDOM()),null==xe)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=xe}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}prepareExternalUrl(X){return st(this._baseHref,X)}path(X=!1){const xe=this._platformLocation.pathname+At(this._platformLocation.search),pt=this._platformLocation.hash;return pt&&X?`${xe}${pt}`:xe}pushState(X,xe,pt,Yt){const gn=this.prepareExternalUrl(pt+At(Yt));this._platformLocation.pushState(X,xe,gn)}replaceState(X,xe,pt,Yt){const gn=this.prepareExternalUrl(pt+At(Yt));this._platformLocation.replaceState(X,xe,gn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}}return K.\u0275fac=function(X){return new(X||K)(I.LFG(ye),I.LFG(vn,8))},K.\u0275prov=I.Yz7({token:K,factory:K.\u0275fac}),K})(),Bt=(()=>{class K extends vt{constructor(X,xe){super(),this._platformLocation=X,this._baseHref="",this._removeListenerFns=[],null!=xe&&(this._baseHref=xe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}path(X=!1){let xe=this._platformLocation.hash;return null==xe&&(xe="#"),xe.length>0?xe.substring(1):xe}prepareExternalUrl(X){const xe=st(this._baseHref,X);return xe.length>0?"#"+xe:xe}pushState(X,xe,pt,Yt){let gn=this.prepareExternalUrl(pt+At(Yt));0==gn.length&&(gn=this._platformLocation.pathname),this._platformLocation.pushState(X,xe,gn)}replaceState(X,xe,pt,Yt){let gn=this.prepareExternalUrl(pt+At(Yt));0==gn.length&&(gn=this._platformLocation.pathname),this._platformLocation.replaceState(X,xe,gn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}}return K.\u0275fac=function(X){return new(X||K)(I.LFG(ye),I.LFG(vn,8))},K.\u0275prov=I.Yz7({token:K,factory:K.\u0275fac}),K})(),ke=(()=>{class K{constructor(X){this._subject=new I.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=X;const xe=this._locationStrategy.getBaseHref();this._baseHref=rt(Gt(xe)),this._locationStrategy.onPopState(pt=>{this._subject.emit({url:this.path(!0),pop:!0,state:pt.state,type:pt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(X=!1){return this.normalize(this._locationStrategy.path(X))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(X,xe=""){return this.path()==this.normalize(X+At(xe))}normalize(X){return K.stripTrailingSlash(function sn(K,ge){return K&&ge.startsWith(K)?ge.substring(K.length):ge}(this._baseHref,Gt(X)))}prepareExternalUrl(X){return X&&"/"!==X[0]&&(X="/"+X),this._locationStrategy.prepareExternalUrl(X)}go(X,xe="",pt=null){this._locationStrategy.pushState(pt,"",X,xe),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+At(xe)),pt)}replaceState(X,xe="",pt=null){this._locationStrategy.replaceState(pt,"",X,xe),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+At(xe)),pt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(X=0){this._locationStrategy.historyGo?.(X)}onUrlChange(X){return this._urlChangeListeners.push(X),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(xe=>{this._notifyUrlChangeListeners(xe.url,xe.state)})),()=>{const xe=this._urlChangeListeners.indexOf(X);this._urlChangeListeners.splice(xe,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(X="",xe){this._urlChangeListeners.forEach(pt=>pt(X,xe))}subscribe(X,xe,pt){return this._subject.subscribe({next:X,error:xe,complete:pt})}}return K.normalizeQueryParams=At,K.joinWithSlash=st,K.stripTrailingSlash=rt,K.\u0275fac=function(X){return new(X||K)(I.LFG(vt))},K.\u0275prov=I.Yz7({token:K,factory:function(){return function $e(){return new ke((0,I.LFG)(vt))}()},providedIn:"root"}),K})();function Gt(K){return K.replace(/\/index.html$/,"")}function wo(K,ge){ge=encodeURIComponent(ge);for(const X of K.split(";")){const xe=X.indexOf("="),[pt,Yt]=-1==xe?[X,""]:[X.slice(0,xe),X.slice(xe+1)];if(pt.trim()===ge)return decodeURIComponent(Yt)}return null}let dr=(()=>{class K{constructor(X,xe,pt,Yt){this._iterableDiffers=X,this._keyValueDiffers=xe,this._ngEl=pt,this._renderer=Yt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(X){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof X?X.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(X){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof X?X.split(/\s+/):X,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const X=this._iterableDiffer.diff(this._rawClass);X&&this._applyIterableChanges(X)}else if(this._keyValueDiffer){const X=this._keyValueDiffer.diff(this._rawClass);X&&this._applyKeyValueChanges(X)}}_applyKeyValueChanges(X){X.forEachAddedItem(xe=>this._toggleClass(xe.key,xe.currentValue)),X.forEachChangedItem(xe=>this._toggleClass(xe.key,xe.currentValue)),X.forEachRemovedItem(xe=>{xe.previousValue&&this._toggleClass(xe.key,!1)})}_applyIterableChanges(X){X.forEachAddedItem(xe=>{if("string"!=typeof xe.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(xe.item)}`);this._toggleClass(xe.item,!0)}),X.forEachRemovedItem(xe=>this._toggleClass(xe.item,!1))}_applyClasses(X){X&&(Array.isArray(X)||X instanceof Set?X.forEach(xe=>this._toggleClass(xe,!0)):Object.keys(X).forEach(xe=>this._toggleClass(xe,!!X[xe])))}_removeClasses(X){X&&(Array.isArray(X)||X instanceof Set?X.forEach(xe=>this._toggleClass(xe,!1)):Object.keys(X).forEach(xe=>this._toggleClass(xe,!1)))}_toggleClass(X,xe){(X=X.trim())&&X.split(/\s+/g).forEach(pt=>{xe?this._renderer.addClass(this._ngEl.nativeElement,pt):this._renderer.removeClass(this._ngEl.nativeElement,pt)})}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),K})();class Jo{constructor(ge,X,xe,pt){this.$implicit=ge,this.ngForOf=X,this.index=xe,this.count=pt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yr=(()=>{class K{constructor(X,xe,pt){this._viewContainer=X,this._template=xe,this._differs=pt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(X){this._ngForOf=X,this._ngForOfDirty=!0}set ngForTrackBy(X){this._trackByFn=X}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(X){X&&(this._template=X)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const X=this._ngForOf;!this._differ&&X&&(this._differ=this._differs.find(X).create(this.ngForTrackBy))}if(this._differ){const X=this._differ.diff(this._ngForOf);X&&this._applyChanges(X)}}_applyChanges(X){const xe=this._viewContainer;X.forEachOperation((pt,Yt,gn)=>{if(null==pt.previousIndex)xe.createEmbeddedView(this._template,new Jo(pt.item,this._ngForOf,-1,-1),null===gn?void 0:gn);else if(null==gn)xe.remove(null===Yt?void 0:Yt);else if(null!==Yt){const Hn=xe.get(Yt);xe.move(Hn,gn),Kr(Hn,pt)}});for(let pt=0,Yt=xe.length;pt<Yt;pt++){const Hn=xe.get(pt).context;Hn.index=pt,Hn.count=Yt,Hn.ngForOf=this._ngForOf}X.forEachIdentityChange(pt=>{Kr(xe.get(pt.currentIndex),pt)})}static ngTemplateContextGuard(X,xe){return!0}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),K})();function Kr(K,ge){K.context.$implicit=ge.item}let Co=(()=>{class K{constructor(X,xe){this._viewContainer=X,this._context=new fi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=xe}set ngIf(X){this._context.$implicit=this._context.ngIf=X,this._updateView()}set ngIfThen(X){br("ngIfThen",X),this._thenTemplateRef=X,this._thenViewRef=null,this._updateView()}set ngIfElse(X){br("ngIfElse",X),this._elseTemplateRef=X,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(X,xe){return!0}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.s_b),I.Y36(I.Rgc))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),K})();class fi{constructor(){this.$implicit=null,this.ngIf=null}}function br(K,ge){if(ge&&!ge.createEmbeddedView)throw new Error(`${K} must be a TemplateRef, but received '${(0,I.AaK)(ge)}'.`)}class ys{constructor(ge,X){this._viewContainerRef=ge,this._templateRef=X,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ge){ge&&!this._created?this.create():!ge&&this._created&&this.destroy()}}let Br=(()=>{class K{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(X){this._ngSwitch=X,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(X){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(X)}_matchCase(X){const xe=X==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||xe,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),xe}_updateDefaultCases(X){if(this._defaultViews&&X!==this._defaultUsed){this._defaultUsed=X;for(let xe=0;xe<this._defaultViews.length;xe++)this._defaultViews[xe].enforceState(X)}}}return K.\u0275fac=function(X){return new(X||K)},K.\u0275dir=I.lG2({type:K,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),K})(),Xr=(()=>{class K{constructor(X,xe,pt){this.ngSwitch=pt,pt._addCase(),this._view=new ys(X,xe)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Br,9))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),K})(),Eo=(()=>{class K{constructor(X,xe,pt){pt._addDefault(new ys(X,xe))}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Br,9))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngSwitchDefault",""]]}),K})(),io=(()=>{class K{constructor(X,xe,pt){this._ngEl=X,this._differs=xe,this._renderer=pt,this._ngStyle=null,this._differ=null}set ngStyle(X){this._ngStyle=X,!this._differ&&X&&(this._differ=this._differs.find(X).create())}ngDoCheck(){if(this._differ){const X=this._differ.diff(this._ngStyle);X&&this._applyChanges(X)}}_setStyle(X,xe){const[pt,Yt]=X.split(".");null!=(xe=null!=xe&&Yt?`${xe}${Yt}`:xe)?this._renderer.setStyle(this._ngEl.nativeElement,pt,xe):this._renderer.removeStyle(this._ngEl.nativeElement,pt)}_applyChanges(X){X.forEachRemovedItem(xe=>this._setStyle(xe.key,null)),X.forEachAddedItem(xe=>this._setStyle(xe.key,xe.currentValue)),X.forEachChangedItem(xe=>this._setStyle(xe.key,xe.currentValue))}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.SBq),I.Y36(I.aQg),I.Y36(I.Qsj))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),K})(),Mr=(()=>{class K{constructor(X){this._viewContainerRef=X,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(X){if(X.ngTemplateOutlet||X.ngTemplateOutletInjector){const xe=this._viewContainerRef;if(this._viewRef&&xe.remove(xe.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:pt,ngTemplateOutletContext:Yt,ngTemplateOutletInjector:gn}=this;this._viewRef=xe.createEmbeddedView(pt,Yt,gn?{injector:gn}:void 0)}else this._viewRef=null}else this._viewRef&&X.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.s_b))},K.\u0275dir=I.lG2({type:K,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[I.TTD]}),K})();class Va{createSubscription(ge,X){return ge.subscribe({next:X,error:xe=>{throw xe}})}dispose(ge){ge.unsubscribe()}}class ga{createSubscription(ge,X){return ge.then(X,xe=>{throw xe})}dispose(ge){}}const pc=new ga,as=new Va;let vl=(()=>{class K{constructor(X){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=X}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(X){return this._obj?X!==this._obj?(this._dispose(),this.transform(X)):this._latestValue:(X&&this._subscribe(X),this._latestValue)}_subscribe(X){this._obj=X,this._strategy=this._selectStrategy(X),this._subscription=this._strategy.createSubscription(X,xe=>this._updateLatestValue(X,xe))}_selectStrategy(X){if((0,I.QGY)(X))return pc;if((0,I.F4k)(X))return as;throw function fr(K,ge){return new I.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(X,xe){X===this._obj&&(this._latestValue=xe,this._ref.markForCheck())}}return K.\u0275fac=function(X){return new(X||K)(I.Y36(I.sBO,16))},K.\u0275pipe=I.Yjl({name:"async",type:K,pure:!1}),K})(),Rs=(()=>{class K{}return K.\u0275fac=function(X){return new(X||K)},K.\u0275mod=I.oAB({type:K}),K.\u0275inj=I.cJS({}),K})();const Ni="browser";function $r(K){return K===Ni}let Oo=(()=>{class K{}return K.\u0275prov=(0,I.Yz7)({token:K,providedIn:"root",factory:()=>new bl((0,I.LFG)(ze),window)}),K})();class bl{constructor(ge,X){this.document=ge,this.window=X,this.offset=()=>[0,0]}setOffset(ge){this.offset=Array.isArray(ge)?()=>ge:ge}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ge){this.supportsScrolling()&&this.window.scrollTo(ge[0],ge[1])}scrollToAnchor(ge){if(!this.supportsScrolling())return;const X=function Ls(K,ge){const X=K.getElementById(ge)||K.getElementsByName(ge)[0];if(X)return X;if("function"==typeof K.createTreeWalker&&K.body&&(K.body.createShadowRoot||K.body.attachShadow)){const xe=K.createTreeWalker(K.body,NodeFilter.SHOW_ELEMENT);let pt=xe.currentNode;for(;pt;){const Yt=pt.shadowRoot;if(Yt){const gn=Yt.getElementById(ge)||Yt.querySelector(`[name="${ge}"]`);if(gn)return gn}pt=xe.nextNode()}}return null}(this.document,ge);X&&(this.scrollToElement(X),X.focus())}setHistoryScrollRestoration(ge){if(this.supportScrollRestoration()){const X=this.window.history;X&&X.scrollRestoration&&(X.scrollRestoration=ge)}}scrollToElement(ge){const X=ge.getBoundingClientRect(),xe=X.left+this.window.pageXOffset,pt=X.top+this.window.pageYOffset,Yt=this.offset();this.window.scrollTo(xe-Yt[0],pt-Yt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ge=Qi(this.window.history)||Qi(Object.getPrototypeOf(this.window.history));return!(!ge||!ge.writable&&!ge.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Qi(K){return Object.getOwnPropertyDescriptor(K,"scrollRestoration")}class Sr{}},529:(Sn,Ct,U)=>{"use strict";U.d(Ct,{JF:()=>nt,eN:()=>zt});var I=U(6895),l=U(4650),q=U(9646),h=U(8306),qe=U(4351),Ne=U(9300),ze=U(4004);class ye{}class me{}class Ce{constructor(W){this.normalizedNames=new Map,this.lazyUpdate=null,W?this.lazyInit="string"==typeof W?()=>{this.headers=new Map,W.split("\n").forEach(ce=>{const Ae=ce.indexOf(":");if(Ae>0){const Le=ce.slice(0,Ae),Nt=Le.toLowerCase(),un=ce.slice(Ae+1).trim();this.maybeSetNormalizedName(Le,Nt),this.headers.has(Nt)?this.headers.get(Nt).push(un):this.headers.set(Nt,[un])}})}:()=>{this.headers=new Map,Object.keys(W).forEach(ce=>{let Ae=W[ce];const Le=ce.toLowerCase();"string"==typeof Ae&&(Ae=[Ae]),Ae.length>0&&(this.headers.set(Le,Ae),this.maybeSetNormalizedName(ce,Le))})}:this.headers=new Map}has(W){return this.init(),this.headers.has(W.toLowerCase())}get(W){this.init();const ce=this.headers.get(W.toLowerCase());return ce&&ce.length>0?ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(W){return this.init(),this.headers.get(W.toLowerCase())||null}append(W,ce){return this.clone({name:W,value:ce,op:"a"})}set(W,ce){return this.clone({name:W,value:ce,op:"s"})}delete(W,ce){return this.clone({name:W,value:ce,op:"d"})}maybeSetNormalizedName(W,ce){this.normalizedNames.has(ce)||this.normalizedNames.set(ce,W)}init(){this.lazyInit&&(this.lazyInit instanceof Ce?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(W=>this.applyUpdate(W)),this.lazyUpdate=null))}copyFrom(W){W.init(),Array.from(W.headers.keys()).forEach(ce=>{this.headers.set(ce,W.headers.get(ce)),this.normalizedNames.set(ce,W.normalizedNames.get(ce))})}clone(W){const ce=new Ce;return ce.lazyInit=this.lazyInit&&this.lazyInit instanceof Ce?this.lazyInit:this,ce.lazyUpdate=(this.lazyUpdate||[]).concat([W]),ce}applyUpdate(W){const ce=W.name.toLowerCase();switch(W.op){case"a":case"s":let Ae=W.value;if("string"==typeof Ae&&(Ae=[Ae]),0===Ae.length)return;this.maybeSetNormalizedName(W.name,ce);const Le=("a"===W.op?this.headers.get(ce):void 0)||[];Le.push(...Ae),this.headers.set(ce,Le);break;case"d":const Nt=W.value;if(Nt){let un=this.headers.get(ce);if(!un)return;un=un.filter(Cn=>-1===Nt.indexOf(Cn)),0===un.length?(this.headers.delete(ce),this.normalizedNames.delete(ce)):this.headers.set(ce,un)}else this.headers.delete(ce),this.normalizedNames.delete(ce)}}forEach(W){this.init(),Array.from(this.normalizedNames.keys()).forEach(ce=>W(this.normalizedNames.get(ce),this.headers.get(ce)))}}class tt{encodeKey(W){return rt(W)}encodeValue(W){return rt(W)}decodeKey(W){return decodeURIComponent(W)}decodeValue(W){return decodeURIComponent(W)}}const dt=/%(\d[a-f0-9])/gi,st={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function rt(V){return encodeURIComponent(V).replace(dt,(W,ce)=>st[ce]??W)}function At(V){return`${V}`}class vt{constructor(W={}){if(this.updates=null,this.cloneFrom=null,this.encoder=W.encoder||new tt,W.fromString){if(W.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ue(V,W){const ce=new Map;return V.length>0&&V.replace(/^\?/,"").split("&").forEach(Le=>{const Nt=Le.indexOf("="),[un,Cn]=-1==Nt?[W.decodeKey(Le),""]:[W.decodeKey(Le.slice(0,Nt)),W.decodeValue(Le.slice(Nt+1))],Wt=ce.get(un)||[];Wt.push(Cn),ce.set(un,Wt)}),ce}(W.fromString,this.encoder)}else W.fromObject?(this.map=new Map,Object.keys(W.fromObject).forEach(ce=>{const Ae=W.fromObject[ce],Le=Array.isArray(Ae)?Ae.map(At):[At(Ae)];this.map.set(ce,Le)})):this.map=null}has(W){return this.init(),this.map.has(W)}get(W){this.init();const ce=this.map.get(W);return ce?ce[0]:null}getAll(W){return this.init(),this.map.get(W)||null}keys(){return this.init(),Array.from(this.map.keys())}append(W,ce){return this.clone({param:W,value:ce,op:"a"})}appendAll(W){const ce=[];return Object.keys(W).forEach(Ae=>{const Le=W[Ae];Array.isArray(Le)?Le.forEach(Nt=>{ce.push({param:Ae,value:Nt,op:"a"})}):ce.push({param:Ae,value:Le,op:"a"})}),this.clone(ce)}set(W,ce){return this.clone({param:W,value:ce,op:"s"})}delete(W,ce){return this.clone({param:W,value:ce,op:"d"})}toString(){return this.init(),this.keys().map(W=>{const ce=this.encoder.encodeKey(W);return this.map.get(W).map(Ae=>ce+"="+this.encoder.encodeValue(Ae)).join("&")}).filter(W=>""!==W).join("&")}clone(W){const ce=new vt({encoder:this.encoder});return ce.cloneFrom=this.cloneFrom||this,ce.updates=(this.updates||[]).concat(W),ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(W=>this.map.set(W,this.cloneFrom.map.get(W))),this.updates.forEach(W=>{switch(W.op){case"a":case"s":const ce=("a"===W.op?this.map.get(W.param):void 0)||[];ce.push(At(W.value)),this.map.set(W.param,ce);break;case"d":if(void 0===W.value){this.map.delete(W.param);break}{let Ae=this.map.get(W.param)||[];const Le=Ae.indexOf(At(W.value));-1!==Le&&Ae.splice(Le,1),Ae.length>0?this.map.set(W.param,Ae):this.map.delete(W.param)}}}),this.cloneFrom=this.updates=null)}}class vn{constructor(){this.map=new Map}set(W,ce){return this.map.set(W,ce),this}get(W){return this.map.has(W)||this.map.set(W,W.defaultValue()),this.map.get(W)}delete(W){return this.map.delete(W),this}has(W){return this.map.has(W)}keys(){return this.map.keys()}}function Bt(V){return typeof ArrayBuffer<"u"&&V instanceof ArrayBuffer}function ke(V){return typeof Blob<"u"&&V instanceof Blob}function $e(V){return typeof FormData<"u"&&V instanceof FormData}class Gt{constructor(W,ce,Ae,Le){let Nt;if(this.url=ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=W.toUpperCase(),function Tn(V){switch(V){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Le?(this.body=void 0!==Ae?Ae:null,Nt=Le):Nt=Ae,Nt&&(this.reportProgress=!!Nt.reportProgress,this.withCredentials=!!Nt.withCredentials,Nt.responseType&&(this.responseType=Nt.responseType),Nt.headers&&(this.headers=Nt.headers),Nt.context&&(this.context=Nt.context),Nt.params&&(this.params=Nt.params)),this.headers||(this.headers=new Ce),this.context||(this.context=new vn),this.params){const un=this.params.toString();if(0===un.length)this.urlWithParams=ce;else{const Cn=ce.indexOf("?");this.urlWithParams=ce+(-1===Cn?"?":Cn<ce.length-1?"&":"")+un}}else this.params=new vt,this.urlWithParams=ce}serializeBody(){return null===this.body?null:Bt(this.body)||ke(this.body)||$e(this.body)||function sn(V){return typeof URLSearchParams<"u"&&V instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$e(this.body)?null:ke(this.body)?this.body.type||null:Bt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(W={}){const ce=W.method||this.method,Ae=W.url||this.url,Le=W.responseType||this.responseType,Nt=void 0!==W.body?W.body:this.body,un=void 0!==W.withCredentials?W.withCredentials:this.withCredentials,Cn=void 0!==W.reportProgress?W.reportProgress:this.reportProgress;let Wt=W.headers||this.headers,Zn=W.params||this.params;const mi=W.context??this.context;return void 0!==W.setHeaders&&(Wt=Object.keys(W.setHeaders).reduce(($n,kn)=>$n.set(kn,W.setHeaders[kn]),Wt)),W.setParams&&(Zn=Object.keys(W.setParams).reduce(($n,kn)=>$n.set(kn,W.setParams[kn]),Zn)),new Gt(ce,Ae,Nt,{params:Zn,headers:Wt,context:mi,reportProgress:Cn,responseType:Le,withCredentials:un})}}var $t=(()=>(($t=$t||{})[$t.Sent=0]="Sent",$t[$t.UploadProgress=1]="UploadProgress",$t[$t.ResponseHeader=2]="ResponseHeader",$t[$t.DownloadProgress=3]="DownloadProgress",$t[$t.Response=4]="Response",$t[$t.User=5]="User",$t))();class dn{constructor(W,ce=200,Ae="OK"){this.headers=W.headers||new Ce,this.status=void 0!==W.status?W.status:ce,this.statusText=W.statusText||Ae,this.url=W.url||null,this.ok=this.status>=200&&this.status<300}}class bt extends dn{constructor(W={}){super(W),this.type=$t.ResponseHeader}clone(W={}){return new bt({headers:W.headers||this.headers,status:void 0!==W.status?W.status:this.status,statusText:W.statusText||this.statusText,url:W.url||this.url||void 0})}}class Mt extends dn{constructor(W={}){super(W),this.type=$t.Response,this.body=void 0!==W.body?W.body:null}clone(W={}){return new Mt({body:void 0!==W.body?W.body:this.body,headers:W.headers||this.headers,status:void 0!==W.status?W.status:this.status,statusText:W.statusText||this.statusText,url:W.url||this.url||void 0})}}class Ot extends dn{constructor(W){super(W,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${W.url||"(unknown url)"}`:`Http failure response for ${W.url||"(unknown url)"}: ${W.status} ${W.statusText}`,this.error=W.error||null}}function Ht(V,W){return{body:W,headers:V.headers,context:V.context,observe:V.observe,params:V.params,reportProgress:V.reportProgress,responseType:V.responseType,withCredentials:V.withCredentials}}let zt=(()=>{class V{constructor(ce){this.handler=ce}request(ce,Ae,Le={}){let Nt;if(ce instanceof Gt)Nt=ce;else{let Wt,Zn;Wt=Le.headers instanceof Ce?Le.headers:new Ce(Le.headers),Le.params&&(Zn=Le.params instanceof vt?Le.params:new vt({fromObject:Le.params})),Nt=new Gt(ce,Ae,void 0!==Le.body?Le.body:null,{headers:Wt,context:Le.context,params:Zn,reportProgress:Le.reportProgress,responseType:Le.responseType||"json",withCredentials:Le.withCredentials})}const un=(0,q.of)(Nt).pipe((0,qe.b)(Wt=>this.handler.handle(Wt)));if(ce instanceof Gt||"events"===Le.observe)return un;const Cn=un.pipe((0,Ne.h)(Wt=>Wt instanceof Mt));switch(Le.observe||"body"){case"body":switch(Nt.responseType){case"arraybuffer":return Cn.pipe((0,ze.U)(Wt=>{if(null!==Wt.body&&!(Wt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Wt.body}));case"blob":return Cn.pipe((0,ze.U)(Wt=>{if(null!==Wt.body&&!(Wt.body instanceof Blob))throw new Error("Response is not a Blob.");return Wt.body}));case"text":return Cn.pipe((0,ze.U)(Wt=>{if(null!==Wt.body&&"string"!=typeof Wt.body)throw new Error("Response is not a string.");return Wt.body}));default:return Cn.pipe((0,ze.U)(Wt=>Wt.body))}case"response":return Cn;default:throw new Error(`Unreachable: unhandled observe type ${Le.observe}}`)}}delete(ce,Ae={}){return this.request("DELETE",ce,Ae)}get(ce,Ae={}){return this.request("GET",ce,Ae)}head(ce,Ae={}){return this.request("HEAD",ce,Ae)}jsonp(ce,Ae){return this.request("JSONP",ce,{params:(new vt).append(Ae,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ce,Ae={}){return this.request("OPTIONS",ce,Ae)}patch(ce,Ae,Le={}){return this.request("PATCH",ce,Ht(Le,Ae))}post(ce,Ae,Le={}){return this.request("POST",ce,Ht(Le,Ae))}put(ce,Ae,Le={}){return this.request("PUT",ce,Ht(Le,Ae))}}return V.\u0275fac=function(ce){return new(ce||V)(l.LFG(ye))},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})();class Jt{constructor(W,ce){this.next=W,this.interceptor=ce}handle(W){return this.interceptor.intercept(W,this.next)}}const Nn=new l.OlP("HTTP_INTERCEPTORS");let Rn=(()=>{class V{intercept(ce,Ae){return Ae.handle(ce)}}return V.\u0275fac=function(ce){return new(ce||V)},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})();const xn=/^\)\]\}',?\n/;let jn=(()=>{class V{constructor(ce){this.xhrFactory=ce}handle(ce){if("JSONP"===ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new h.y(Ae=>{const Le=this.xhrFactory.build();if(Le.open(ce.method,ce.urlWithParams),ce.withCredentials&&(Le.withCredentials=!0),ce.headers.forEach((ni,wt)=>Le.setRequestHeader(ni,wt.join(","))),ce.headers.has("Accept")||Le.setRequestHeader("Accept","application/json, text/plain, */*"),!ce.headers.has("Content-Type")){const ni=ce.detectContentTypeHeader();null!==ni&&Le.setRequestHeader("Content-Type",ni)}if(ce.responseType){const ni=ce.responseType.toLowerCase();Le.responseType="json"!==ni?ni:"text"}const Nt=ce.serializeBody();let un=null;const Cn=()=>{if(null!==un)return un;const ni=Le.statusText||"OK",wt=new Ce(Le.getAllResponseHeaders()),mt=function Dn(V){return"responseURL"in V&&V.responseURL?V.responseURL:/^X-Request-URL:/m.test(V.getAllResponseHeaders())?V.getResponseHeader("X-Request-URL"):null}(Le)||ce.url;return un=new bt({headers:wt,status:Le.status,statusText:ni,url:mt}),un},Wt=()=>{let{headers:ni,status:wt,statusText:mt,url:lt}=Cn(),je=null;204!==wt&&(je=typeof Le.response>"u"?Le.responseText:Le.response),0===wt&&(wt=je?200:0);let Qe=wt>=200&&wt<300;if("json"===ce.responseType&&"string"==typeof je){const Be=je;je=je.replace(xn,"");try{je=""!==je?JSON.parse(je):null}catch(ft){je=Be,Qe&&(Qe=!1,je={error:ft,text:je})}}Qe?(Ae.next(new Mt({body:je,headers:ni,status:wt,statusText:mt,url:lt||void 0})),Ae.complete()):Ae.error(new Ot({error:je,headers:ni,status:wt,statusText:mt,url:lt||void 0}))},Zn=ni=>{const{url:wt}=Cn(),mt=new Ot({error:ni,status:Le.status||0,statusText:Le.statusText||"Unknown Error",url:wt||void 0});Ae.error(mt)};let mi=!1;const $n=ni=>{mi||(Ae.next(Cn()),mi=!0);let wt={type:$t.DownloadProgress,loaded:ni.loaded};ni.lengthComputable&&(wt.total=ni.total),"text"===ce.responseType&&!!Le.responseText&&(wt.partialText=Le.responseText),Ae.next(wt)},kn=ni=>{let wt={type:$t.UploadProgress,loaded:ni.loaded};ni.lengthComputable&&(wt.total=ni.total),Ae.next(wt)};return Le.addEventListener("load",Wt),Le.addEventListener("error",Zn),Le.addEventListener("timeout",Zn),Le.addEventListener("abort",Zn),ce.reportProgress&&(Le.addEventListener("progress",$n),null!==Nt&&Le.upload&&Le.upload.addEventListener("progress",kn)),Le.send(Nt),Ae.next({type:$t.Sent}),()=>{Le.removeEventListener("error",Zn),Le.removeEventListener("abort",Zn),Le.removeEventListener("load",Wt),Le.removeEventListener("timeout",Zn),ce.reportProgress&&(Le.removeEventListener("progress",$n),null!==Nt&&Le.upload&&Le.upload.removeEventListener("progress",kn)),Le.readyState!==Le.DONE&&Le.abort()}})}}return V.\u0275fac=function(ce){return new(ce||V)(l.LFG(I.JF))},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})();const wn=new l.OlP("XSRF_COOKIE_NAME"),hi=new l.OlP("XSRF_HEADER_NAME");class Fi{}let Hi=(()=>{class V{constructor(ce,Ae,Le){this.doc=ce,this.platform=Ae,this.cookieName=Le,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ce=this.doc.cookie||"";return ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,I.Mx)(ce,this.cookieName),this.lastCookieString=ce),this.lastToken}}return V.\u0275fac=function(ce){return new(ce||V)(l.LFG(I.K0),l.LFG(l.Lbi),l.LFG(wn))},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})(),ur=(()=>{class V{constructor(ce,Ae){this.tokenService=ce,this.headerName=Ae}intercept(ce,Ae){const Le=ce.url.toLowerCase();if("GET"===ce.method||"HEAD"===ce.method||Le.startsWith("http://")||Le.startsWith("https://"))return Ae.handle(ce);const Nt=this.tokenService.getToken();return null!==Nt&&!ce.headers.has(this.headerName)&&(ce=ce.clone({headers:ce.headers.set(this.headerName,Nt)})),Ae.handle(ce)}}return V.\u0275fac=function(ce){return new(ce||V)(l.LFG(Fi),l.LFG(hi))},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})(),Ln=(()=>{class V{constructor(ce,Ae){this.backend=ce,this.injector=Ae,this.chain=null}handle(ce){if(null===this.chain){const Ae=this.injector.get(Nn,[]);this.chain=Ae.reduceRight((Le,Nt)=>new Jt(Le,Nt),this.backend)}return this.chain.handle(ce)}}return V.\u0275fac=function(ce){return new(ce||V)(l.LFG(me),l.LFG(l.zs3))},V.\u0275prov=l.Yz7({token:V,factory:V.\u0275fac}),V})(),qt=(()=>{class V{static disable(){return{ngModule:V,providers:[{provide:ur,useClass:Rn}]}}static withOptions(ce={}){return{ngModule:V,providers:[ce.cookieName?{provide:wn,useValue:ce.cookieName}:[],ce.headerName?{provide:hi,useValue:ce.headerName}:[]]}}}return V.\u0275fac=function(ce){return new(ce||V)},V.\u0275mod=l.oAB({type:V}),V.\u0275inj=l.cJS({providers:[ur,{provide:Nn,useExisting:ur,multi:!0},{provide:Fi,useClass:Hi},{provide:wn,useValue:"XSRF-TOKEN"},{provide:hi,useValue:"X-XSRF-TOKEN"}]}),V})(),nt=(()=>{class V{}return V.\u0275fac=function(ce){return new(ce||V)},V.\u0275mod=l.oAB({type:V}),V.\u0275inj=l.cJS({providers:[zt,{provide:ye,useClass:Ln},jn,{provide:me,useExisting:jn}],imports:[qt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),V})()},4650:(Sn,Ct,U)=>{"use strict";U.d(Ct,{$8M:()=>Nr,$Z:()=>wm,AFp:()=>eb,ALo:()=>C0,AaK:()=>ye,Akn:()=>cc,BQk:()=>Zm,CHM:()=>Ee,CRH:()=>k0,CZH:()=>ug,CqO:()=>Ny,D6c:()=>AC,DdM:()=>h0,EJc:()=>we,EiD:()=>dp,EpF:()=>By,F$t:()=>jy,F4k:()=>w_,FYo:()=>a0,FiY:()=>To,G48:()=>dC,Gf:()=>P0,GfV:()=>l0,GkF:()=>b_,Gpc:()=>tt,Gre:()=>gv,Hsn:()=>Gy,Ikx:()=>L_,JOm:()=>ll,JVY:()=>op,Jf7:()=>wc,KtG:()=>kt,L6k:()=>Wd,LAX:()=>sp,LFG:()=>mr,LSH:()=>Ql,Lbi:()=>u,MAs:()=>__,MMx:()=>X_,NdJ:()=>C_,O4$:()=>zs,OlP:()=>Cr,Oqu:()=>R_,PXZ:()=>zr,Q6J:()=>jm,QGY:()=>x_,QP$:()=>Qh,QbO:()=>m,Qsj:()=>qx,R0b:()=>ji,RDi:()=>xa,Rgc:()=>Mf,SBq:()=>xf,Sil:()=>Vn,Suo:()=>O0,TTD:()=>Po,TgZ:()=>Gm,Tol:()=>nv,Udp:()=>P_,VKq:()=>p0,WFA:()=>Wm,WLB:()=>f0,XFs:()=>Ln,Xpm:()=>lt,Y36:()=>nc,YKP:()=>$x,YNc:()=>m_,Yjl:()=>Se,Yz7:()=>en,ZZ4:()=>Zw,_Bn:()=>t0,_UZ:()=>v_,_Vd:()=>Kh,_c5:()=>SC,_uU:()=>cv,aQg:()=>Ww,c2e:()=>M,cJS:()=>It,cg1:()=>N_,d8E:()=>B_,dDg:()=>hc,deG:()=>ql,dqk:()=>Le,eBb:()=>al,eFA:()=>ma,ekj:()=>O_,eoX:()=>Bd,f3M:()=>is,g9A:()=>Vw,h0i:()=>Fd,hGG:()=>TC,hM9:()=>ew,hij:()=>Ym,iGM:()=>I0,ifc:()=>Ae,ip1:()=>J0,kEZ:()=>m0,kL8:()=>Av,kcU:()=>mo,lG2:()=>oe,lcZ:()=>E0,lqb:()=>tc,lri:()=>js,mCW:()=>Wc,n5z:()=>Bn,n_E:()=>Df,oAB:()=>Rt,oJD:()=>qc,oxw:()=>Uy,pB0:()=>yg,q3G:()=>Ao,qLn:()=>Ol,qOj:()=>d_,qZA:()=>Hm,qzn:()=>Mu,rFY:()=>_0,rWj:()=>_l,sBO:()=>hC,sIi:()=>Vm,s_b:()=>Sf,soG:()=>le,tBr:()=>qr,tb:()=>f,tp0:()=>Zo,uIk:()=>Nh,vHH:()=>rt,vpe:()=>kc,wAp:()=>Ti,xp6:()=>Ru,yhl:()=>Nf,ynx:()=>$m,z2F:()=>nb,z3N:()=>Xl,zSh:()=>Fp,zs3:()=>Ya});var I=U(7579),l=U(727),q=U(8306),h=U(6451),qe=U(3099);function Ne(n){for(let r in n)if(n[r]===Ne)return r;throw Error("Could not find renamed property on target object.")}function ze(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function me(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Ce=Ne({__forward_ref__:Ne});function tt(n){return n.__forward_ref__=tt,n.toString=function(){return ye(this())},n}function Ue(n){return dt(n)?n():n}function dt(n){return"function"==typeof n&&n.hasOwnProperty(Ce)&&n.__forward_ref__===tt}class rt extends Error{constructor(r,a){super(function At(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,a)),this.code=r}}function vt(n){return"string"==typeof n?n:null==n?"":String(n)}function ke(n,r){throw new rt(-201,!1)}function gi(n,r){null==n&&function bn(n,r,a,p){throw new Error(`ASSERTION ERROR: ${n}`+(null==p?"":` [Expected=> ${a} ${p} ${r} <=Actual]`))}(r,n,null,"!=")}function en(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function It(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vt(n){return xn(n,hi)||xn(n,Hi)}function xn(n,r){return n.hasOwnProperty(r)?n[r]:null}function wn(n){return n&&(n.hasOwnProperty(Fi)||n.hasOwnProperty(ur))?n[Fi]:null}const hi=Ne({\u0275prov:Ne}),Fi=Ne({\u0275inj:Ne}),Hi=Ne({ngInjectableDef:Ne}),ur=Ne({ngInjectorDef:Ne});var Ln=(()=>((Ln=Ln||{})[Ln.Default=0]="Default",Ln[Ln.Host=1]="Host",Ln[Ln.Self=2]="Self",Ln[Ln.SkipSelf=4]="SkipSelf",Ln[Ln.Optional=8]="Optional",Ln))();let pr;function qt(n){const r=pr;return pr=n,r}function nt(n,r,a){const p=Vt(n);return p&&"root"==p.providedIn?void 0===p.value?p.value=p.factory():p.value:a&Ln.Optional?null:void 0!==r?r:void ke(ye(n))}function $(n){return{toString:n}.toString()}var V=(()=>((V=V||{})[V.OnPush=0]="OnPush",V[V.Default=1]="Default",V))(),Ae=(()=>{return(n=Ae||(Ae={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ae;var n})();const Le=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},Wt=[],Zn=Ne({\u0275cmp:Ne}),mi=Ne({\u0275dir:Ne}),$n=Ne({\u0275pipe:Ne}),kn=Ne({\u0275mod:Ne}),ni=Ne({\u0275fac:Ne}),wt=Ne({__NG_ELEMENT_ID__:Ne});let mt=0;function lt(n){return $(()=>{const a=!0===n.standalone,p={},b={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:p,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===V.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ae.Emulated,id:"c"+mt++,styles:n.styles||Wt,_:null,setInput:null,schemas:n.schemas||null,tView:null},C=n.dependencies,T=n.features;return b.inputs=ee(n.inputs,p),b.outputs=ee(n.outputs),T&&T.forEach(R=>R(b)),b.directiveDefs=C?()=>("function"==typeof C?C():C).map(Qe).filter(Be):null,b.pipeDefs=C?()=>("function"==typeof C?C():C).map(gt).filter(Be):null,b})}function Qe(n){return Oe(n)||Ye(n)}function Be(n){return null!==n}const ft={};function Rt(n){return $(()=>{const r={type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ft[n.id]=n.type),r})}function ee(n,r){if(null==n)return Cn;const a={};for(const p in n)if(n.hasOwnProperty(p)){let b=n[p],C=b;Array.isArray(b)&&(C=b[1],b=b[0]),a[b]=p,r&&(r[b]=C)}return a}const oe=lt;function Se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Oe(n){return n[Zn]||null}function Ye(n){return n[mi]||null}function gt(n){return n[$n]||null}function _t(n,r){const a=n[kn]||null;if(!a&&!0===r)throw new Error(`Type ${ye(n)} does not have '\u0275mod' property.`);return a}function fi(n){return Array.isArray(n)&&"object"==typeof n[1]}function br(n){return Array.isArray(n)&&!0===n[1]}function ys(n){return 0!=(8&n.flags)}function Br(n){return 2==(2&n.flags)}function Xr(n){return 1==(1&n.flags)}function Eo(n){return null!==n.template}function As(n){return 0!=(256&n[2])}function vs(n,r){return n.hasOwnProperty(ni)?n[ni]:null}class ja{constructor(r,a,p){this.previousValue=r,this.currentValue=a,this.firstChange=p}isFirstChange(){return this.firstChange}}function Po(){return bs}function bs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Os),ba}function ba(){const n=Ja(this),r=n?.current;if(r){const a=n.previous;if(a===Cn)n.previous=r;else for(let p in r)a[p]=r[p];n.current=null,this.ngOnChanges(r)}}function Os(n,r,a,p){const b=Ja(n)||function qs(n,r){return n[ks]=r}(n,{previous:Cn,current:null}),C=b.current||(b.current={}),T=b.previous,R=this.declaredInputs[a],z=T[R];C[R]=new ja(z&&z.currentValue,r,T===Cn),n[p]=r}Po.ngInherit=!0;const ks="__ngSimpleChanges__";function Ja(n){return n[ks]||null}let Vi;function xa(n){Vi=n}function Oo(){return void 0!==Vi?Vi:typeof document<"u"?document:void 0}function Qi(n){return!!n.listen}const Ls={createRenderer:(n,r)=>Oo()};function Sr(n){for(;Array.isArray(n);)n=n[0];return n}function X(n,r){return Sr(r[n])}function xe(n,r){return Sr(r[n.index])}function Yt(n,r){return n.data[r]}function gn(n,r){return n[r]}function Hn(n,r){const a=r[n];return fi(a)?a:a[0]}function ar(n){return 4==(4&n[2])}function er(n){return 64==(64&n[2])}function di(n,r){return null==r?null:n[r]}function tr(n){n[18]=0}function Ui(n,r){n[5]+=r;let a=n,p=n[3];for(;null!==p&&(1===r&&1===a[5]||-1===r&&0===a[5]);)p[5]+=r,a=p,p=p[3]}const ti={lFrame:Tr(null),bindingsEnabled:!0};function Ks(){return ti.bindingsEnabled}function N(){return ti.lFrame.lView}function G(){return ti.lFrame.tView}function Ee(n){return ti.lFrame.contextLView=n,n[8]}function kt(n){return ti.lFrame.contextLView=null,n}function Wn(){let n=Zr();for(;null!==n&&64===n.type;)n=n.parent;return n}function Zr(){return ti.lFrame.currentTNode}function ro(n,r){const a=ti.lFrame;a.currentTNode=n,a.isParent=r}function xs(){return ti.lFrame.isParent}function cs(){ti.lFrame.isParent=!1}function ko(){const n=ti.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function tl(){return ti.lFrame.bindingIndex++}function ws(n){const r=ti.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}function qu(n,r){const a=ti.lFrame;a.bindingIndex=a.bindingRootIndex=n,Ro(r)}function Ro(n){ti.lFrame.currentDirectiveIndex=n}function Vl(n){const r=ti.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function oo(){return ti.lFrame.currentQueryIndex}function Vr(n){ti.lFrame.currentQueryIndex=n}function Ku(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Qs(n,r,a){if(a&Ln.SkipSelf){let b=r,C=n;for(;!(b=b.parent,null!==b||a&Ln.Host||(b=Ku(C),null===b||(C=C[15],10&b.type))););if(null===b)return!1;r=b,n=C}const p=ti.lFrame=Ga();return p.currentTNode=r,p.lView=n,!0}function Ho(n){const r=Ga(),a=n[1];ti.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Ga(){const n=ti.lFrame,r=null===n?null:n.child;return null===r?Tr(n):r}function Tr(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function wl(){const n=ti.lFrame;return ti.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Bc=wl;function Js(){const n=wl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function co(){return ti.lFrame.selectedIndex}function Ns(n){ti.lFrame.selectedIndex=n}function wr(){const n=ti.lFrame;return Yt(n.tView,n.selectedIndex)}function zs(){ti.lFrame.currentNamespace="svg"}function mo(){!function Ul(){ti.lFrame.currentNamespace=null}()}function ca(n,r){for(let a=r.directiveStart,p=r.directiveEnd;a<p;a++){const C=n.data[a].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:R,ngAfterViewInit:z,ngAfterViewChecked:re,ngOnDestroy:_e}=C;T&&(n.contentHooks||(n.contentHooks=[])).push(-a,T),R&&((n.contentHooks||(n.contentHooks=[])).push(a,R),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,R)),z&&(n.viewHooks||(n.viewHooks=[])).push(-a,z),re&&((n.viewHooks||(n.viewHooks=[])).push(a,re),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,re)),null!=_e&&(n.destroyHooks||(n.destroyHooks=[])).push(a,_e)}}function ea(n,r,a){so(n,r,3,a)}function ta(n,r,a,p){(3&n[2])===a&&so(n,r,a,p)}function Ca(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function so(n,r,a,p){const C=p??-1,T=r.length-1;let R=0;for(let z=void 0!==p?65535&n[18]:0;z<T;z++)if("number"==typeof r[z+1]){if(R=r[z],null!=p&&R>=p)break}else r[z]<0&&(n[18]+=65536),(R<C||-1==C)&&(Ha(n,a,r,z),n[18]=(4294901760&n[18])+z+2),z++}function Ha(n,r,a,p){const b=a[p]<0,C=a[p+1],R=n[b?-a[p]:a[p]];if(b){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{C.call(R)}finally{}}}else try{C.call(R)}finally{}}class uo{constructor(r,a,p){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=p}}function El(n,r,a){const p=Qi(n);let b=0;for(;b<a.length;){const C=a[b];if("number"==typeof C){if(0!==C)break;b++;const T=a[b++],R=a[b++],z=a[b++];p?n.setAttribute(r,R,z,T):r.setAttributeNS(T,R,z)}else{const T=C,R=a[++b];rl(T)?p&&n.setProperty(r,T,R):p?n.setAttribute(r,T,R):r.setAttribute(T,R),b++}}return b}function mc(n){return 3===n||4===n||6===n}function rl(n){return 64===n.charCodeAt(0)}function Mo(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let p=0;p<r.length;p++){const b=r[p];"number"==typeof b?a=b:0===a||gc(n,a,b,null,-1===a||2===a?r[++p]:null)}}return n}function gc(n,r,a,p,b){let C=0,T=n.length;if(-1===r)T=-1;else for(;C<n.length;){const R=n[C++];if("number"==typeof R){if(R===r){T=-1;break}if(R>r){T=C-1;break}}}for(;C<n.length;){const R=n[C];if("number"==typeof R)break;if(R===a){if(null===p)return void(null!==b&&(n[C+1]=b));if(p===n[C+1])return void(n[C+2]=b)}C++,null!==p&&C++,null!==b&&C++}-1!==T&&(n.splice(T,0,r),C=T+1),n.splice(C++,0,a),null!==p&&n.splice(C++,0,p),null!==b&&n.splice(C++,0,b)}function Vs(n){return-1!==n}function Ea(n){return 32767&n}function Jr(n,r){let a=function ua(n){return n>>16}(n),p=r;for(;a>0;)p=p[15],a--;return p}let Gl=!0;function Hl(n){const r=Gl;return Gl=n,r}let Da=0;const So={};function Zl(n,r){const a=Un(n,r);if(-1!==a)return a;const p=r[1];p.firstCreatePass&&(n.injectorIndex=r.length,ol(p.data,n),ol(r,null),ol(p.blueprint,null));const b=Dl(n,r),C=n.injectorIndex;if(Vs(b)){const T=Ea(b),R=Jr(b,r),z=R[1].data;for(let re=0;re<8;re++)r[C+re]=R[T+re]|z[T+re]}return r[C+8]=b,C}function ol(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Un(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Dl(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,p=null,b=r;for(;null!==b;){if(p=hr(b),null===p)return-1;if(a++,b=b[15],-1!==p.injectorIndex)return p.injectorIndex|a<<16}return-1}function Ml(n,r,a){!function zc(n,r,a){let p;"string"==typeof a?p=a.charCodeAt(0)||0:a.hasOwnProperty(wt)&&(p=a[wt]),null==p&&(p=a[wt]=Da++);const b=255&p;r.data[n+(b>>5)]|=1<<b}(n,r,a)}function Za(n,r,a){if(a&Ln.Optional)return n;ke()}function Vc(n,r,a,p){if(a&Ln.Optional&&void 0===p&&(p=null),0==(a&(Ln.Self|Ln.Host))){const b=n[9],C=qt(void 0);try{return b?b.get(r,p,a&Ln.Optional):nt(r,p,a&Ln.Optional)}finally{qt(C)}}return Za(p,0,a)}function wu(n,r,a,p=Ln.Default,b){if(null!==n){if(1024&r[2]){const T=function Qn(n,r,a,p,b){let C=n,T=r;for(;null!==C&&null!==T&&1024&T[2]&&!(256&T[2]);){const R=F(C,T,a,p|Ln.Self,So);if(R!==So)return R;let z=C.parent;if(!z){const re=T[21];if(re){const _e=re.get(a,So,p);if(_e!==So)return _e}z=hr(T),T=T[15]}C=z}return b}(n,r,a,p,So);if(T!==So)return T}const C=F(n,r,a,p,So);if(C!==So)return C}return Vc(r,a,p,b)}function F(n,r,a,p,b){const C=function ie(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(wt)?n[wt]:void 0;return"number"==typeof r?r>=0?255&r:nn:r}(a);if("function"==typeof C){if(!Qs(r,n,p))return p&Ln.Host?Za(b,0,p):Vc(r,a,p,b);try{const T=C(p);if(null!=T||p&Ln.Optional)return T;ke()}finally{Bc()}}else if("number"==typeof C){let T=null,R=Un(n,r),z=-1,re=p&Ln.Host?r[16][6]:null;for((-1===R||p&Ln.SkipSelf)&&(z=-1===R?Dl(n,r):r[R+8],-1!==z&&Ze(p,!1)?(T=r[1],R=Ea(z),r=Jr(z,r)):R=-1);-1!==R;){const _e=r[1];if(ve(C,R,_e.data)){const Ve=O(R,r,a,T,p,re);if(Ve!==So)return Ve}z=r[R+8],-1!==z&&Ze(p,r[1].data[R+8]===re)&&ve(C,R,r)?(T=_e,R=Ea(z),r=Jr(z,r)):R=-1}}return b}function O(n,r,a,p,b,C){const T=r[1],R=T.data[n+8],_e=P(R,T,a,null==p?Br(R)&&Gl:p!=T&&0!=(3&R.type),b&Ln.Host&&C===R);return null!==_e?Z(r,T,_e,R):So}function P(n,r,a,p,b){const C=n.providerIndexes,T=r.data,R=1048575&C,z=n.directiveStart,_e=C>>20,yt=b?R+_e:n.directiveEnd;for(let jt=p?R:R+_e;jt<yt;jt++){const mn=T[jt];if(jt<z&&a===mn||jt>=z&&mn.type===a)return jt}if(b){const jt=T[z];if(jt&&Eo(jt)&&jt.type===a)return z}return null}function Z(n,r,a,p){let b=n[a];const C=r.data;if(function jl(n){return n instanceof uo}(b)){const T=b;T.resolving&&function vn(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new rt(-200,`Circular dependency in DI detected for ${n}${a}`)}(function Zt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():vt(n)}(C[a]));const R=Hl(T.canSeeViewProviders);T.resolving=!0;const z=T.injectImpl?qt(T.injectImpl):null;Qs(n,p,Ln.Default);try{b=n[a]=T.factory(void 0,C,n,p),r.firstCreatePass&&a>=p.directiveStart&&function vr(n,r,a){const{ngOnChanges:p,ngOnInit:b,ngDoCheck:C}=r.type.prototype;if(p){const T=bs(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,T),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,T)}b&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,b),C&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,C),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,C))}(a,C[a],r)}finally{null!==z&&qt(z),Hl(R),T.resolving=!1,Bc()}}return b}function ve(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function Ze(n,r){return!(n&Ln.Self||n&Ln.Host&&r)}class ct{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,p){return wu(this._tNode,this._lView,r,p,a)}}function nn(){return new ct(Wn(),N())}function Bn(n){return $(()=>{const r=n.prototype.constructor,a=r[ni]||Ii(r),p=Object.prototype;let b=Object.getPrototypeOf(n.prototype).constructor;for(;b&&b!==p;){const C=b[ni]||Ii(b);if(C&&C!==a)return C;b=Object.getPrototypeOf(b)}return C=>new C})}function Ii(n){return dt(n)?()=>{const r=Ii(Ue(n));return r&&r()}:vs(n)}function hr(n){const r=n[1],a=r.type;return 2===a?r.declTNode:1===a?n[6]:null}function Nr(n){return function Wl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const p=a.length;let b=0;for(;b<p;){const C=a[b];if(mc(C))break;if(0===C)b+=2;else if("number"==typeof C)for(b++;b<p&&"string"==typeof a[b];)b++;else{if(C===r)return a[b+1];b+=2}}}return null}(Wn(),n)}const $o="__parameters__";function hs(n,r,a){return $(()=>{const p=function Wa(n){return function(...a){if(n){const p=n(...a);for(const b in p)this[b]=p[b]}}}(r);function b(...C){if(this instanceof b)return p.apply(this,C),this;const T=new b(...C);return R.annotation=T,R;function R(z,re,_e){const Ve=z.hasOwnProperty($o)?z[$o]:Object.defineProperty(z,$o,{value:[]})[$o];for(;Ve.length<=_e;)Ve.push(null);return(Ve[_e]=Ve[_e]||[]).push(T),z}}return a&&(b.prototype=Object.create(a.prototype)),b.prototype.ngMetadataName=n,b.annotationCls=b,b})}class Cr{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ql=new Cr("AnalyzeForEntryComponents");function E(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let p=n[a];Array.isArray(p)?(r===n&&(r=n.slice(0,a)),E(p,r)):r!==n&&r.push(p)}return r}function A(n,r){n.forEach(a=>Array.isArray(a)?A(a,r):r(a))}function B(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function H(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Q(n,r){const a=[];for(let p=0;p<n;p++)a.push(r);return a}function et(n,r,a){let p=Ge(n,r);return p>=0?n[1|p]=a:(p=~p,function fe(n,r,a,p){let b=n.length;if(b==r)n.push(a,p);else if(1===b)n.push(p,n[0]),n[0]=a;else{for(b--,n.push(n[b-1],n[b]);b>r;)n[b]=n[b-2],b--;n[r]=a,n[r+1]=p}}(n,p,r,a)),p}function Te(n,r){const a=Ge(n,r);if(a>=0)return n[1|a]}function Ge(n,r){return function ut(n,r,a){let p=0,b=n.length>>a;for(;b!==p;){const C=p+(b-p>>1),T=n[C<<a];if(r===T)return C<<a;T>r?b=C:p=C+1}return~(b<<a)}(n,r,1)}const qn={},In="__NG_DI_FLAG__",Yn="ngTempTokenPath",Ji=/\n/gm,Ar="__source";let Ri;function Mi(n){const r=Ri;return Ri=n,r}function eo(n,r=Ln.Default){if(void 0===Ri)throw new rt(-203,"");return null===Ri?nt(n,void 0,r):Ri.get(n,r&Ln.Optional?null:void 0,r)}function mr(n,r=Ln.Default){return(function zn(){return pr}()||eo)(Ue(n),r)}function is(n,r=Ln.Default){return mr(n,r)}function na(n){const r=[];for(let a=0;a<n.length;a++){const p=Ue(n[a]);if(Array.isArray(p)){if(0===p.length)throw new rt(900,"");let b,C=Ln.Default;for(let T=0;T<p.length;T++){const R=p[T],z=to(R);"number"==typeof z?-1===z?b=R.token:C|=z:b=R}r.push(mr(b,C))}else r.push(mr(p))}return r}function ps(n,r){return n[In]=r,n.prototype[In]=r,n}function to(n){return n[In]}const qr=ps(hs("Inject",n=>({token:n})),-1),To=ps(hs("Optional"),8),Zo=ps(hs("SkipSelf"),4);let Eu,Zd;function Sa(n){return function Du(){if(void 0===Eu&&(Eu=null,Le.trustedTypes))try{Eu=Le.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Eu}()?.createHTML(n)||n}function td(n){return function ed(){if(void 0===Zd&&(Zd=null,Le.trustedTypes))try{Zd=Le.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zd}()?.createHTML(n)||n}class Ds{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sl extends Ds{getTypeName(){return"HTML"}}class Ta extends Ds{getTypeName(){return"Style"}}class Al extends Ds{getTypeName(){return"Script"}}class $c extends Ds{getTypeName(){return"URL"}}class Bf extends Ds{getTypeName(){return"ResourceURL"}}function Xl(n){return n instanceof Ds?n.changingThisBreaksApplicationSecurity:n}function Mu(n,r){const a=Nf(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}function Nf(n){return n instanceof Ds&&n.getTypeName()||null}function op(n){return new sl(n)}function Wd(n){return new Ta(n)}function al(n){return new Al(n)}function sp(n){return new $c(n)}function yg(n){return new Bf(n)}class gr{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const a=(new window.DOMParser).parseFromString(Sa(r),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(r):(a.removeChild(a.firstChild),a)}catch{return null}}}class ap{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const p=this.inertDocument.createElement("body");a.appendChild(p)}}getInertBodyElement(r){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Sa(r),a;const p=this.inertDocument.createElement("body");return p.innerHTML=Sa(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(p),p}stripCustomNsAttrs(r){const a=r.attributes;for(let b=a.length-1;0<b;b--){const T=a.item(b).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&r.removeAttribute(T)}let p=r.firstChild;for(;p;)p.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(p),p=p.nextSibling}}const Zc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wc(n){return(n=String(n)).match(Zc)||n.match(qd)?n:"unsafe:"+n}function Il(n){const r={};for(const a of n.split(","))r[a]=!0;return r}function Pl(...n){const r={};for(const a of n)for(const p in a)a.hasOwnProperty(p)&&(r[p]=!0);return r}const Vf=Il("area,br,col,hr,img,wbr"),Yd=Il("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Uf=Il("rp,rt"),bc=Pl(Vf,Pl(Yd,Il("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pl(Uf,Il("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pl(Uf,Yd)),Kd=Il("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lp=Il("srcset"),id=Pl(Kd,lp,Il("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Il("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jf=Il("script,style,template");class Qd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let a=r.firstChild,p=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?p=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,p&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let b=this.checkClobberedElement(a,a.nextSibling);if(b){a=b;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(r){const a=r.nodeName.toLowerCase();if(!bc.hasOwnProperty(a))return this.sanitizedSomething=!0,!jf.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const p=r.attributes;for(let b=0;b<p.length;b++){const C=p.item(b),T=C.name,R=T.toLowerCase();if(!id.hasOwnProperty(R)){this.sanitizedSomething=!0;continue}let z=C.value;Kd[R]&&(z=Wc(z)),lp[R]&&(n=z,z=(n=String(n)).split(",").map(r=>Wc(r.trim())).join(", ")),this.buf.push(" ",T,'="',up(z),'"')}var n;return this.buf.push(">"),!0}endElement(r){const a=r.nodeName.toLowerCase();bc.hasOwnProperty(a)&&!Vf.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(r){this.buf.push(up(r))}checkClobberedElement(r,a){if(a&&(r.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return a}}const wg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,da=/([^\#-~ |!])/g;function up(n){return n.replace(/&/g,"&amp;").replace(wg,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(da,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tu;function dp(n,r){let a=null;try{Tu=Tu||function rs(n){const r=new ap(n);return function zf(){try{return!!(new window.DOMParser).parseFromString(Sa(""),"text/html")}catch{return!1}}()?new gr(r):r}(n);let p=r?String(r):"";a=Tu.getInertBodyElement(p);let b=5,C=p;do{if(0===b)throw new Error("Failed to sanitize html because the input is unstable");b--,p=C,C=a.innerHTML,a=Tu.getInertBodyElement(p)}while(p!==C);return Sa((new Qd).sanitizeChildren(hp(a)||a))}finally{if(a){const p=hp(a)||a;for(;p.firstChild;)p.removeChild(p.firstChild)}}}function hp(n){return"content"in n&&function Jd(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ao=(()=>((Ao=Ao||{})[Ao.NONE=0]="NONE",Ao[Ao.HTML=1]="HTML",Ao[Ao.STYLE=2]="STYLE",Ao[Ao.SCRIPT=3]="SCRIPT",Ao[Ao.URL=4]="URL",Ao[Ao.RESOURCE_URL=5]="RESOURCE_URL",Ao))();function qc(n){const r=Yc();return r?td(r.sanitize(Ao.HTML,n)||""):Mu(n,"HTML")?td(Xl(n)):dp(Oo(),vt(n))}function Ql(n){const r=Yc();return r?r.sanitize(Ao.URL,n)||"":Mu(n,"URL")?Xl(n):Wc(vt(n))}function Yc(){const n=N();return n&&n[12]}function pp(n){return n.ngOriginalError}class Ol{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r);this._console.error("ERROR",r),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&pp(r);for(;a&&pp(a);)a=pp(a);return a||null}}const mp=new Map;let gp=0;const Kc="__ngContext__";function Us(n,r){fi(r)?(n[Kc]=r[20],function Tg(n){mp.set(n[20],n)}(r)):n[Kc]=r}function od(n){const r=n[Kc];return"number"==typeof r?function qf(n){return mp.get(n)||null}(r):r||null}function yp(n){const r=od(n);return r?fi(r)?r:r.lView:null}const oh=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Le))();function wc(n){return n.ownerDocument.defaultView}function Fl(n){return n instanceof Function?n():n}var ll=(()=>((ll=ll||{})[ll.Important=1]="Important",ll[ll.DashCase=2]="DashCase",ll))();function Pu(n,r){return undefined(n,r)}function tu(n){const r=n[3];return br(r)?r[3]:r}function bp(n){return Qf(n[13])}function xp(n){return Qf(n[4])}function Qf(n){for(;null!==n&&!br(n);)n=n[4];return n}function Ou(n,r,a,p,b){if(null!=p){let C,T=!1;br(p)?C=p:fi(p)&&(T=!0,p=p[0]);const R=Sr(p);0===n&&null!==a?null==b?uh(r,a,R):ec(r,a,R,b||null,!0):1===n&&null!==a?ec(r,a,R,b||null,!0):2===n?function mh(n,r,a){const p=ad(n,r);p&&function Vg(n,r,a,p){Qi(n)?n.removeChild(r,a,p):r.removeChild(a)}(n,p,r,a)}(r,R,T):3===n&&r.destroyNode(R),null!=C&&function Tp(n,r,a,p,b){const C=a[7];C!==Sr(a)&&Ou(r,n,p,C,b);for(let R=10;R<a.length;R++){const z=a[R];su(z[1],z,n,r,p,C)}}(r,n,C,a,b)}}function wp(n,r,a){if(Qi(n))return n.createElement(r,a);{const p=null!==a?function Fs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(a):null;return null===p?n.createElement(r):n.createElementNS(p,r)}}function nm(n,r){const a=n[9],p=a.indexOf(r),b=r[3];512&r[2]&&(r[2]&=-513,Ui(b,-1)),a.splice(p,1)}function ou(n,r){if(n.length<=10)return;const a=10+r,p=n[a];if(p){const b=p[17];null!==b&&b!==n&&nm(b,p),r>0&&(n[a-1][4]=p[4]);const C=H(n,10+r);!function Jf(n,r){su(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(p[1],p);const T=C[19];null!==T&&T.detachView(C[1]),p[3]=null,p[4]=null,p[2]&=-65}return p}function Cp(n,r){if(!(128&r[2])){const a=r[11];Qi(a)&&a.destroyNode&&su(n,r,a,3,null,null),function Bg(n){let r=n[13];if(!r)return sd(n[1],n);for(;r;){let a=null;if(fi(r))a=r[13];else{const p=r[10];p&&(a=p)}if(!a){for(;r&&!r[4]&&r!==n;)fi(r)&&sd(r[1],r),r=r[3];null===r&&(r=n),fi(r)&&sd(r[1],r),a=r&&r[4]}r=a}}(r)}}function sd(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function zg(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let p=0;p<a.length;p+=2){const b=r[a[p]];if(!(b instanceof uo)){const C=a[p+1];if(Array.isArray(C))for(let T=0;T<C.length;T+=2){const R=b[C[T]],z=C[T+1];try{z.call(R)}finally{}}else try{C.call(b)}finally{}}}}(n,r),function Ng(n,r){const a=n.cleanup,p=r[7];let b=-1;if(null!==a)for(let C=0;C<a.length-1;C+=2)if("string"==typeof a[C]){const T=a[C+1],R="function"==typeof T?T(r):Sr(r[T]),z=p[b=a[C+2]],re=a[C+3];"boolean"==typeof re?R.removeEventListener(a[C],z,re):re>=0?p[b=re]():p[b=-re].unsubscribe(),C+=2}else{const T=p[b=a[C+1]];a[C].call(T)}if(null!==p){for(let C=b+1;C<p.length;C++)p[C]();r[7]=null}}(n,r),1===r[1].type&&Qi(r[11])&&r[11].destroy();const a=r[17];if(null!==a&&br(r[3])){a!==r[3]&&nm(a,r);const p=r[19];null!==p&&p.detachView(n)}!function _p(n){mp.delete(n[20])}(r)}}function ku(n,r,a){return function Ep(n,r,a){let p=r;for(;null!==p&&40&p.type;)p=(r=p).parent;if(null===p)return a[0];if(2&p.flags){const b=n.data[p.directiveStart].encapsulation;if(b===Ae.None||b===Ae.Emulated)return null}return xe(p,a)}(n,r.parent,a)}function ec(n,r,a,p,b){Qi(n)?n.insertBefore(r,a,p,b):(rm(r)?r.content:r).insertBefore(a,p,b)}function uh(n,r,a){Qi(n)?n.appendChild(r,a):(rm(r)?r.content:r).appendChild(a)}function im(n,r,a,p,b){null!==p?ec(n,r,a,p,b):uh(n,r,a)}function rm(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}function ad(n,r){return Qi(n)?n.parentNode(r):r.parentNode}function Dp(n,r,a){return om(n,r,a)}let om=function dh(n,r,a){return 40&n.type?xe(n,a):null};function ld(n,r,a,p){const b=ku(n,p,r),C=r[11],R=Dp(p.parent||r[6],p,r);if(null!=b)if(Array.isArray(a))for(let z=0;z<a.length;z++)im(C,b,a[z],R,!1);else im(C,b,a,R,!1)}function fh(n,r){if(null!==r){const a=r.type;if(3&a)return xe(r,n);if(4&a)return Sp(-1,n[r.index]);if(8&a){const p=r.child;if(null!==p)return fh(n,p);{const b=n[r.index];return br(b)?Sp(-1,b):Sr(b)}}if(32&a)return Pu(r,n)()||Sr(n[r.index]);{const p=Mp(n,r);return null!==p?Array.isArray(p)?p[0]:fh(tu(n[16]),p):fh(n,r.next)}}return null}function Mp(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Sp(n,r){const a=10+n+1;if(a<r.length){const p=r[a],b=p[1].firstChild;if(null!==b)return fh(p,b)}return r[7]}function gh(n,r,a,p,b,C,T){for(;null!=a;){const R=p[a.index],z=a.type;if(T&&0===r&&(R&&Us(Sr(R),p),a.flags|=4),64!=(64&a.flags))if(8&z)gh(n,r,a.child,p,b,C,!1),Ou(r,n,b,R,C);else if(32&z){const re=Pu(a,p);let _e;for(;_e=re();)Ou(r,n,b,_e,C);Ou(r,n,b,R,C)}else 16&z?cl(n,r,p,a,b,C):Ou(r,n,b,R,C);a=T?a.projectionNext:a.next}}function su(n,r,a,p,b,C){gh(a,p,n.firstChild,r,b,C,!1)}function cl(n,r,a,p,b,C){const T=a[16],z=T[6].projection[p.projection];if(Array.isArray(z))for(let re=0;re<z.length;re++)Ou(r,n,b,z[re],C);else gh(n,r,z,T[3],b,C,!0)}function au(n,r,a){Qi(n)?n.setAttribute(r,"style",a):r.style.cssText=a}function Ap(n,r,a){Qi(n)?""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a):r.className=a}function yh(n,r,a){let p=n.length;for(;;){const b=n.indexOf(r,a);if(-1===b)return b;if(0===b||n.charCodeAt(b-1)<=32){const C=r.length;if(b+C===p||n.charCodeAt(b+C)<=32)return b}a=b+1}}const cd="ng-template";function sm(n,r,a){let p=0;for(;p<n.length;){let b=n[p++];if(a&&"class"===b){if(b=n[p],-1!==yh(b.toLowerCase(),r,0))return!0}else if(1===b){for(;p<n.length&&"string"==typeof(b=n[p++]);)if(b.toLowerCase()===r)return!0;return!1}}return!1}function Ec(n){return 4===n.type&&n.value!==cd}function Dr(n,r,a){return r===(4!==n.type||a?n.value:cd)}function ud(n,r,a){let p=4;const b=n.attrs||[],C=function Ip(n){for(let r=0;r<n.length;r++)if(mc(n[r]))return r;return n.length}(b);let T=!1;for(let R=0;R<r.length;R++){const z=r[R];if("number"!=typeof z){if(!T)if(4&p){if(p=2|1&p,""!==z&&!Dr(n,z,a)||""===z&&1===r.length){if(Ia(p))return!1;T=!0}}else{const re=8&p?z:r[++R];if(8&p&&null!==n.attrs){if(!sm(n.attrs,re,a)){if(Ia(p))return!1;T=!0}continue}const Ve=am(8&p?"class":z,b,Ec(n),a);if(-1===Ve){if(Ia(p))return!1;T=!0;continue}if(""!==re){let yt;yt=Ve>C?"":b[Ve+1].toLowerCase();const jt=8&p?yt:null;if(jt&&-1!==yh(jt,re,0)||2&p&&re!==yt){if(Ia(p))return!1;T=!0}}}}else{if(!T&&!Ia(p)&&!Ia(z))return!1;if(T&&Ia(z))continue;T=!1,p=z|1&p}}return Ia(p)||T}function Ia(n){return 0==(1&n)}function am(n,r,a,p){if(null===r)return-1;let b=0;if(p||!a){let C=!1;for(;b<r.length;){const T=r[b];if(T===n)return b;if(3===T||6===T)C=!0;else{if(1===T||2===T){let R=r[++b];for(;"string"==typeof R;)R=r[++b];continue}if(4===T)break;if(0===T){b+=4;continue}}b+=C?1:2}return-1}return function lm(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const p=n[a];if("number"==typeof p)return-1;if(p===r)return a;a++}return-1}(r,n)}function ul(n,r,a=!1){for(let p=0;p<r.length;p++)if(ud(n,r[p],a))return!0;return!1}function jg(n,r){e:for(let a=0;a<r.length;a++){const p=r[a];if(n.length===p.length){for(let b=0;b<n.length;b++)if(n[b]!==p[b])continue e;return!0}}return!1}function cm(n,r){return n?":not("+r.trim()+")":r}function Gg(n){let r=n[0],a=1,p=2,b="",C=!1;for(;a<n.length;){let T=n[a];if("string"==typeof T)if(2&p){const R=n[++a];b+="["+T+(R.length>0?'="'+R+'"':"")+"]"}else 8&p?b+="."+T:4&p&&(b+=" "+T);else""!==b&&!Ia(T)&&(r+=cm(C,b),b=""),p=T,C=C||!Ia(p);a++}return""!==b&&(r+=cm(C,b)),r}const Si={};function Ru(n){um(G(),N(),co()+n,!1)}function um(n,r,a,p){if(!p)if(3==(3&r[2])){const C=n.preOrderCheckHooks;null!==C&&ea(r,C,a)}else{const C=n.preOrderHooks;null!==C&&ta(r,C,0,a)}Ns(a)}const ia=new Cr("ENVIRONMENT_INITIALIZER"),hd=new Cr("INJECTOR_DEF_TYPES");function pd(...n){return{\u0275providers:uu(0,n)}}function uu(n,...r){const a=[],p=new Set;let b;return A(r,C=>{const T=C;du(T,a,[],p)&&(b||(b=[]),b.push(T))}),void 0!==b&&fd(b,a),a}function fd(n,r){for(let a=0;a<n.length;a++){const{providers:b}=n[a];A(b,C=>{r.push(C)})}}function du(n,r,a,p){if(!(n=Ue(n)))return!1;let b=null,C=wn(n);const T=!C&&Oe(n);if(C||T){if(T&&!T.standalone)return!1;b=n}else{const z=n.ngModule;if(C=wn(z),!C)return!1;b=z}const R=p.has(b);if(T){if(R)return!1;if(p.add(b),T.dependencies){const z="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const re of z)du(re,r,a,p)}}else{if(!C)return!1;{if(null!=C.imports&&!R){let re;p.add(b);try{A(C.imports,_e=>{du(_e,r,a,p)&&(re||(re=[]),re.push(_e))})}finally{}void 0!==re&&fd(re,r)}if(!R){const re=vs(b)||(()=>new b);r.push({provide:b,useFactory:re,deps:Wt},{provide:hd,useValue:b,multi:!0},{provide:ia,useValue:()=>mr(b),multi:!0})}const z=C.providers;null==z||R||A(z,_e=>{r.push(_e)})}}return b!==n&&void 0!==n.providers}const mm=Ne({provide:String,useValue:Ne});function xh(n){return null!==n&&"object"==typeof n&&mm in n}function Dc(n){return"function"==typeof n}const md=new Cr("INJECTOR",-1);class wh{get(r,a=qn){if(a===qn){const p=new Error(`NullInjectorError: No provider for ${ye(r)}!`);throw p.name="NullInjectorError",p}return a}}const Fp=new Cr("Set Injector scope."),gd={},Mc={};let Lu;function Ch(){return void 0===Lu&&(Lu=new wh),Lu}class tc{}class Lp extends tc{constructor(r,a,p,b){super(),this.parent=a,this.source=p,this.scopes=b,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eh(r,T=>this.processProvider(T)),this.records.set(md,hu(void 0,this)),b.has("environment")&&this.records.set(tc,hu(void 0,this));const C=this.records.get(Fp);null!=C&&"string"==typeof C.value&&this.scopes.add(C.value),this.injectorDefTypes=new Set(this.get(hd.multi,Wt,Ln.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}get(r,a=qn,p=Ln.Default){this.assertNotDestroyed();const b=Mi(this),C=qt(void 0);try{if(!(p&Ln.SkipSelf)){let R=this.records.get(r);if(void 0===R){const z=function _d(n){return"function"==typeof n||"object"==typeof n&&n instanceof Cr}(r)&&Vt(r);R=z&&this.injectableDefInScope(z)?hu(Bp(r),gd):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(p&Ln.Self?Ch():this.parent).get(r,a=p&Ln.Optional&&a===qn?null:a)}catch(T){if("NullInjectorError"===T.name){if((T[Yn]=T[Yn]||[]).unshift(ye(r)),b)throw T;return function go(n,r,a,p){const b=n[Yn];throw r[Ar]&&b.unshift(r[Ar]),n.message=function Li(n,r,a,p=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let b=ye(r);if(Array.isArray(r))b=r.map(ye).join(" -> ");else if("object"==typeof r){let C=[];for(let T in r)if(r.hasOwnProperty(T)){let R=r[T];C.push(T+":"+("string"==typeof R?JSON.stringify(R):ye(R)))}b=`{${C.join(", ")}}`}return`${a}${p?"("+p+")":""}[${b}]: ${n.replace(Ji,"\n  ")}`}("\n"+n.message,b,a,p),n.ngTokenPath=b,n[Yn]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{qt(C),Mi(b)}}resolveInjectorInitializers(){const r=Mi(this),a=qt(void 0);try{const p=this.get(ia.multi,Wt,Ln.Self);for(const b of p)b()}finally{Mi(r),qt(a)}}toString(){const r=[],a=this.records;for(const p of a.keys())r.push(ye(p));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(r){let a=Dc(r=Ue(r))?r:Ue(r&&r.provide);const p=function gm(n){return xh(n)?hu(void 0,n.useValue):hu(Np(n),gd)}(r);if(Dc(r)||!0!==r.multi)this.records.get(a);else{let b=this.records.get(a);b||(b=hu(void 0,gd,!0),b.factory=()=>na(b.multi),this.records.set(a,b)),a=r,b.multi.push(r)}this.records.set(a,p)}hydrate(r,a){return a.value===gd&&(a.value=Mc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Bu(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=Ue(r.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Bp(n){const r=Vt(n),a=null!==r?r.factory:vs(n);if(null!==a)return a;if(n instanceof Cr)throw new rt(204,!1);if(n instanceof Function)return function Zg(n){const r=n.length;if(r>0)throw Q(r,"?"),new rt(204,!1);const a=function Dn(n){const r=n&&(n[hi]||n[Hi]);if(r){const a=function jn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new rt(204,!1)}function Np(n,r,a){let p;if(Dc(n)){const b=Ue(n);return vs(b)||Bp(b)}if(xh(n))p=()=>Ue(n.useValue);else if(function kp(n){return!(!n||!n.useFactory)}(n))p=()=>n.useFactory(...na(n.deps||[]));else if(function Op(n){return!(!n||!n.useExisting)}(n))p=()=>mr(Ue(n.useExisting));else{const b=Ue(n&&(n.useClass||n.provide));if(!function Wg(n){return!!n.deps}(n))return vs(b)||Bp(b);p=()=>new b(...na(n.deps))}return p}function hu(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function _m(n){return!!n.\u0275providers}function Eh(n,r){for(const a of n)Array.isArray(a)?Eh(a,r):_m(a)?Eh(a.\u0275providers,r):r(a)}function yd(n,r=null,a=null,p){const b=Sc(n,r,a,p);return b.resolveInjectorInitializers(),b}function Sc(n,r=null,a=null,p,b=new Set){const C=[a||Wt,pd(n)];return p=p||("object"==typeof n?void 0:ye(n)),new Lp(C,r||Ch(),p||null,b)}let Ya=(()=>{class n{static create(a,p){if(Array.isArray(a))return yd({name:""},p,a,"");{const b=a.name??"";return yd({name:b},a.parent,a.providers,b)}}}return n.THROW_IF_NOT_FOUND=qn,n.NULL=new wh,n.\u0275prov=en({token:n,providedIn:"any",factory:()=>mr(md)}),n.__NG_ELEMENT_ID__=-1,n})();function nc(n,r=Ln.Default){const a=N();return null===a?mr(n,r):wu(Wn(),a,Ue(n),r)}function wm(){throw new Error("invalid")}function xd(n,r){return n<<17|r<<2}function Pa(n){return n>>17&32767}function Ac(n){return 2|n}function Oa(n){return(131068&n)>>2}function Xp(n,r){return-131069&n|r<<2}function Cd(n){return 1|n}function c(n,r){const a=n.contentQueries;if(null!==a)for(let p=0;p<a.length;p+=2){const b=a[p],C=a[p+1];if(-1!==C){const T=n.data[C];Vr(b),T.contentQueries(2,r[C],C)}}}function x(n,r,a,p,b,C,T,R,z,re,_e){const Ve=r.blueprint.slice();return Ve[0]=b,Ve[2]=76|p,(null!==_e||n&&1024&n[2])&&(Ve[2]|=1024),tr(Ve),Ve[3]=Ve[15]=n,Ve[8]=a,Ve[10]=T||n&&n[10],Ve[11]=R||n&&n[11],Ve[12]=z||n&&n[12]||null,Ve[9]=re||n&&n[9]||null,Ve[6]=C,Ve[20]=function Sg(){return gp++}(),Ve[21]=_e,Ve[16]=2==r.type?n[16]:Ve,Ve}function D(n,r,a,p,b){let C=n.data[r];if(null===C)C=function S(n,r,a,p,b){const C=Zr(),T=xs(),z=n.data[r]=function pn(n,r,a,p,b,C){return{type:a,index:p,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:b,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?C:C&&C.parent,a,r,p,b);return null===n.firstChild&&(n.firstChild=z),null!==C&&(T?null==C.child&&null!==z.parent&&(C.child=z):null===C.next&&(C.next=z)),z}(n,r,a,p,b),function nr(){return ti.lFrame.inI18n}()&&(C.flags|=64);else if(64&C.type){C.type=a,C.value=p,C.attrs=b;const T=function Do(){const n=ti.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();C.injectorIndex=null===T?-1:T.injectorIndex}return ro(C,!0),C}function k(n,r,a,p){if(0===a)return-1;const b=r.length;for(let C=0;C<a;C++)r.push(p),n.blueprint.push(p),n.data.push(null);return b}function j(n,r,a){Ho(r);try{const p=n.viewQuery;null!==p&&Dd(1,p,a);const b=n.template;null!==b&&ae(n,r,b,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&c(n,r),n.staticViewQueries&&Dd(2,n.viewQuery,a);const C=n.components;null!==C&&function v(n,r){for(let a=0;a<r.length;a++)Ko(n,r[a])}(r,C)}catch(p){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),p}finally{r[2]&=-5,Js()}}function Y(n,r,a,p){const b=r[2];if(128!=(128&b)){Ho(r);try{tr(r),function wa(n){return ti.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&ae(n,r,a,2,p);const T=3==(3&b);if(T){const re=n.preOrderCheckHooks;null!==re&&ea(r,re,null)}else{const re=n.preOrderHooks;null!==re&&ta(r,re,0,null),Ca(r,0)}if(function ka(n){for(let r=bp(n);null!==r;r=xp(r)){if(!r[2])continue;const a=r[9];for(let p=0;p<a.length;p++){const b=a[p],C=b[3];0==(512&b[2])&&Ui(C,1),b[2]|=512}}}(r),function Zi(n){for(let r=bp(n);null!==r;r=xp(r))for(let a=10;a<r.length;a++){const p=r[a],b=p[1];er(p)&&Y(b,p,b.template,p[8])}}(r),null!==n.contentQueries&&c(n,r),T){const re=n.contentCheckHooks;null!==re&&ea(r,re)}else{const re=n.contentHooks;null!==re&&ta(r,re,1),Ca(r,1)}!function s(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let p=0;p<a.length;p++){const b=a[p];if(b<0)Ns(~b);else{const C=b,T=a[++p],R=a[++p];qu(T,C),R(2,r[C])}}}finally{Ns(-1)}}(n,r);const R=n.components;null!==R&&function g(n,r){for(let a=0;a<r.length;a++)no(n,r[a])}(r,R);const z=n.viewQuery;if(null!==z&&Dd(2,z,p),T){const re=n.viewCheckHooks;null!==re&&ea(r,re)}else{const re=n.viewHooks;null!==re&&ta(r,re,2),Ca(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Ui(r[3],-1))}finally{Js()}}}function J(n,r,a,p){const b=r[10],T=ar(r);try{!T&&b.begin&&b.begin(),T&&j(n,r,p),Y(n,r,a,p)}finally{!T&&b.end&&b.end()}}function ae(n,r,a,p,b){const C=co(),T=2&p;try{Ns(-1),T&&r.length>22&&um(n,r,22,!1),a(p,b)}finally{Ns(C)}}function pe(n,r,a){if(ys(r)){const b=r.directiveEnd;for(let C=r.directiveStart;C<b;C++){const T=n.data[C];T.contentQueries&&T.contentQueries(1,a[C],C)}}}function Pe(n,r,a){!Ks()||(function _r(n,r,a,p){const b=a.directiveStart,C=a.directiveEnd;n.firstCreatePass||Zl(a,r),Us(p,r);const T=a.initialInputs;for(let R=b;R<C;R++){const z=n.data[R],re=Eo(z);re&&po(r,a,z);const _e=Z(r,n,R,a);Us(_e,r),null!==T&&_s(0,R-b,_e,z,0,T),re&&(Hn(a.index,r)[8]=_e)}}(n,r,a,xe(a,r)),128==(128&a.flags)&&function xi(n,r,a){const p=a.directiveStart,b=a.directiveEnd,C=a.index,T=function Yu(){return ti.lFrame.currentDirectiveIndex}();try{Ns(C);for(let R=p;R<b;R++){const z=n.data[R],re=r[R];Ro(R),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&yo(z,re)}}finally{Ns(-1),Ro(T)}}(n,r,a))}function Xe(n,r,a=xe){const p=r.localNames;if(null!==p){let b=r.index+1;for(let C=0;C<p.length;C+=2){const T=p[C+1],R=-1===T?a(r,n):n[T];n[b++]=R}}}function ht(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Et(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Et(n,r,a,p,b,C,T,R,z,re){const _e=22+p,Ve=_e+b,yt=function Pt(n,r){const a=[];for(let p=0;p<r;p++)a.push(p<n?null:Si);return a}(_e,Ve),jt="function"==typeof re?re():re;return yt[1]={type:n,blueprint:yt,template:a,queries:null,viewQuery:R,declTNode:r,data:yt.slice().fill(null,_e),bindingStartIndex:_e,expandoStartIndex:Ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:z,consts:jt,incompleteFirstPass:!1}}function yn(n,r,a,p){const b=Bh(r);null===a?b.push(p):(b.push(a),n.firstCreatePass&&Md(n).push(p,b.length-1))}function fn(n,r,a){for(let p in n)if(n.hasOwnProperty(p)){const b=n[p];(a=null===a?{}:a).hasOwnProperty(p)?a[p].push(r,b):a[p]=[r,b]}return a}function tn(n,r,a,p,b,C,T,R){const z=xe(r,a);let _e,re=r.inputs;!R&&null!=re&&(_e=re[p])?(Sd(n,a,_e,p,b),Br(r)&&function on(n,r){const a=Hn(r,n);16&a[2]||(a[2]|=32)}(a,r.index)):3&r.type&&(p=function ln(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(p),b=null!=T?T(b,r.value||"",p):b,Qi(C)?C.setProperty(z,p,b):rl(p)||(z.setProperty?z.setProperty(p,b):z[p]=b))}function $i(n,r,a,p){let b=!1;if(Ks()){const C=function qo(n,r,a){const p=n.directiveRegistry;let b=null;if(p)for(let C=0;C<p.length;C++){const T=p[C];ul(a,T.selectors,!1)&&(b||(b=[]),Ml(Zl(a,r),n,T.type),Eo(T)?(ho(n,a),b.unshift(T)):b.push(T))}return b}(n,r,a),T=null===p?null:{"":-1};if(null!==C){b=!0,Yo(a,n.data.length,C.length);for(let _e=0;_e<C.length;_e++){const Ve=C[_e];Ve.providersResolver&&Ve.providersResolver(Ve)}let R=!1,z=!1,re=k(n,r,C.length,null);for(let _e=0;_e<C.length;_e++){const Ve=C[_e];a.mergedAttrs=Mo(a.mergedAttrs,Ve.hostAttrs),lo(n,a,r,re,Ve),gs(re,Ve,T),null!==Ve.contentQueries&&(a.flags|=8),(null!==Ve.hostBindings||null!==Ve.hostAttrs||0!==Ve.hostVars)&&(a.flags|=128);const yt=Ve.type.prototype;!R&&(yt.ngOnChanges||yt.ngOnInit||yt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),R=!0),!z&&(yt.ngOnChanges||yt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),z=!0),re++}!function Pn(n,r){const p=r.directiveEnd,b=n.data,C=r.attrs,T=[];let R=null,z=null;for(let re=r.directiveStart;re<p;re++){const _e=b[re],Ve=_e.inputs,yt=null===C||Ec(r)?null:Or(Ve,C);T.push(yt),R=fn(Ve,re,R),z=fn(_e.outputs,re,z)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=16),R.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=T,r.inputs=R,r.outputs=z}(n,a)}T&&function zo(n,r,a){if(r){const p=n.localNames=[];for(let b=0;b<r.length;b+=2){const C=a[r[b+1]];if(null==C)throw new rt(-301,!1);p.push(r[b],C)}}}(a,p,T)}return a.mergedAttrs=Mo(a.mergedAttrs,a.attrs),b}function Ki(n,r,a,p,b,C){const T=C.hostBindings;if(T){let R=n.hostBindingOpCodes;null===R&&(R=n.hostBindingOpCodes=[]);const z=~r.index;(function Gr(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(R)!=z&&R.push(z),R.push(p,b,T)}}function yo(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ho(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function gs(n,r,a){if(a){if(r.exportAs)for(let p=0;p<r.exportAs.length;p++)a[r.exportAs[p]]=n;Eo(r)&&(a[""]=n)}}function Yo(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function lo(n,r,a,p,b){n.data[p]=b;const C=b.factory||(b.factory=vs(b.type)),T=new uo(C,Eo(b),nc);n.blueprint[p]=T,a[p]=T,Ki(n,r,0,p,k(n,a,b.hostVars,Si),b)}function po(n,r,a){const p=xe(r,n),b=ht(a),C=n[10],T=ra(n,x(n,b,null,a.onPush?32:16,p,r,C,C.createRenderer(p,a),null,null,null));n[r.index]=T}function Pr(n,r,a,p,b,C){const T=xe(n,r);!function Vo(n,r,a,p,b,C,T){if(null==C)Qi(n)?n.removeAttribute(r,b,a):r.removeAttribute(b);else{const R=null==T?vt(C):T(C,p||"",b);Qi(n)?n.setAttribute(r,b,R,a):a?r.setAttributeNS(a,b,R):r.setAttribute(b,R)}}(r[11],T,C,n.value,a,p,b)}function _s(n,r,a,p,b,C){const T=C[r];if(null!==T){const R=p.setInput;for(let z=0;z<T.length;){const re=T[z++],_e=T[z++],Ve=T[z++];null!==R?p.setInput(a,Ve,re,_e):a[_e]=Ve}}}function Or(n,r){let a=null,p=0;for(;p<r.length;){const b=r[p];if(0!==b)if(5!==b){if("number"==typeof b)break;n.hasOwnProperty(b)&&(null===a&&(a=[]),a.push(b,n[b],r[p+1])),p+=2}else p+=2;else p+=4}return a}function vo(n,r,a,p){return new Array(n,!0,!1,r,null,0,p,a,null,null)}function no(n,r){const a=Hn(r,n);if(er(a)){const p=a[1];48&a[2]?Y(p,a,p.template,a[8]):a[5]>0&&Ms(a)}}function Ms(n){for(let p=bp(n);null!==p;p=xp(p))for(let b=10;b<p.length;b++){const C=p[b];if(512&C[2]){const T=C[1];Y(T,C,T.template,C[8])}else C[5]>0&&Ms(C)}const a=n[1].components;if(null!==a)for(let p=0;p<a.length;p++){const b=Hn(a[p],n);er(b)&&b[5]>0&&Ms(b)}}function Ko(n,r){const a=Hn(r,n),p=a[1];(function Ka(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(p,a),j(p,a,a[8])}function ra(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Nl(n){for(;n;){n[2]|=32;const r=tu(n);if(As(n)&&!r)return n;n=r}return null}function Ra(n){!function pl(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],p=yp(a);if(null!==p){const b=p[1];J(b,p,b.template,a)}}}(n[8])}function Dd(n,r,a){Vr(0),r(n,a)}const sc=(()=>Promise.resolve(null))();function Bh(n){return n[7]||(n[7]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function Hu(n,r,a){return(null===n||Eo(n))&&(a=function K(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(a[r.index])),a[11]}function Fa(n,r){const a=n[9],p=a?a.get(Ol,null):null;p&&p.handleError(r)}function Sd(n,r,a,p,b){for(let C=0;C<a.length;){const T=a[C++],R=a[C++],z=r[T],re=n.data[T];null!==re.setInput?re.setInput(z,b,p,R):z[R]=b}}function fl(n,r,a){const p=X(r,n);!function iu(n,r,a){Qi(n)?n.setValue(r,a):r.textContent=a}(n[11],p,a)}function Ss(n,r,a){let p=a?n.styles:null,b=a?n.classes:null,C=0;if(null!==r)for(let T=0;T<r.length;T++){const R=r[T];"number"==typeof R?C=R:1==C?b=me(b,R):2==C&&(p=me(p,R+": "+r[++T]+";"))}a?n.styles=p:n.stylesWithoutHost=p,a?n.classes=b:n.classesWithoutHost=b}function ub(){const n=Wn();ca(N()[1],n)}function d_(n){let r=function Sy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const p=[n];for(;r;){let b;if(Eo(n))b=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new rt(903,"");b=r.\u0275dir}if(b){if(a){p.push(b);const T=n;T.inputs=h_(n.inputs),T.declaredInputs=h_(n.declaredInputs),T.outputs=h_(n.outputs);const R=b.hostBindings;R&&fb(n,R);const z=b.viewQuery,re=b.contentQueries;if(z&&pb(n,z),re&&Ty(n,re),ze(n.inputs,b.inputs),ze(n.declaredInputs,b.declaredInputs),ze(n.outputs,b.outputs),Eo(b)&&b.data.animation){const _e=n.data;_e.animation=(_e.animation||[]).concat(b.data.animation)}}const C=b.features;if(C)for(let T=0;T<C.length;T++){const R=C[T];R&&R.ngInherit&&R(n),R===d_&&(a=!1)}}r=Object.getPrototypeOf(r)}!function hb(n){let r=0,a=null;for(let p=n.length-1;p>=0;p--){const b=n[p];b.hostVars=r+=b.hostVars,b.hostAttrs=Mo(b.hostAttrs,a=Mo(a,b.hostAttrs))}}(p)}function h_(n){return n===Cn?{}:n===Wt?[]:n}function pb(n,r){const a=n.viewQuery;n.viewQuery=a?(p,b)=>{r(p,b),a(p,b)}:r}function Ty(n,r){const a=n.contentQueries;n.contentQueries=a?(p,b,C)=>{r(p,b,C),a(p,b,C)}:r}function fb(n,r){const a=n.hostBindings;n.hostBindings=a?(p,b)=>{r(p,b),a(p,b)}:r}let df=null;function Pd(){if(!df){const n=Le.Symbol;if(n&&n.iterator)df=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const p=r[a];"entries"!==p&&"size"!==p&&Map.prototype[p]===Map.prototype.entries&&(df=p)}}}return df}function Vm(n){return!!p_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Pd()in n)}function p_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Pc(n,r,a){return n[r]=a}function pa(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function Od(n,r,a,p){const b=pa(n,r,a);return pa(n,r+1,p)||b}function Nh(n,r,a,p){const b=N();return pa(b,tl(),r)&&(G(),Pr(wr(),b,n,r,a,p)),Nh}function _u(n,r,a,p){return pa(n,tl(),a)?r+vt(a)+p:Si}function m_(n,r,a,p,b,C,T,R){const z=N(),re=G(),_e=n+22,Ve=re.firstCreatePass?function Fy(n,r,a,p,b,C,T,R,z){const re=r.consts,_e=D(r,n,4,T||null,di(re,R));$i(r,a,_e,di(re,z)),ca(r,_e);const Ve=_e.tViews=Et(2,_e,p,b,C,r.directiveRegistry,r.pipeRegistry,null,r.schemas,re);return null!==r.queries&&(r.queries.template(r,_e),Ve.queries=r.queries.embeddedTView(_e)),_e}(_e,re,z,r,a,p,b,C,T):re.data[_e];ro(Ve,!1);const yt=z[11].createComment("");ld(re,z,yt,Ve),Us(yt,z),ra(z,z[_e]=vo(yt,z,yt,Ve)),Xr(Ve)&&Pe(re,z,Ve),null!=T&&Xe(z,Ve,R)}function __(n){return gn(function Lc(){return ti.lFrame.contextLView}(),22+n)}function jm(n,r,a){const p=N();return pa(p,tl(),r)&&tn(G(),wr(),p,n,r,p[11],a,!1),jm}function y_(n,r,a,p,b){const T=b?"class":"style";Sd(n,a,r.inputs[T],T,p)}function Gm(n,r,a,p){const b=N(),C=G(),T=22+n,R=b[11],z=b[T]=wp(R,r,function Cs(){return ti.lFrame.currentNamespace}()),re=C.firstCreatePass?function Ly(n,r,a,p,b,C,T){const R=r.consts,re=D(r,n,2,b,di(R,C));return $i(r,a,re,di(R,T)),null!==re.attrs&&Ss(re,re.attrs,!1),null!==re.mergedAttrs&&Ss(re,re.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,re),re}(T,C,b,0,r,a,p):C.data[T];ro(re,!0);const _e=re.mergedAttrs;null!==_e&&El(R,z,_e);const Ve=re.classes;null!==Ve&&Ap(R,z,Ve);const yt=re.styles;return null!==yt&&au(R,z,yt),64!=(64&re.flags)&&ld(C,b,z,re),0===function aa(){return ti.lFrame.elementDepthCount}()&&Us(z,b),function Bs(){ti.lFrame.elementDepthCount++}(),Xr(re)&&(Pe(C,b,re),pe(C,re,b)),null!==p&&Xe(b,re),Gm}function Hm(){let n=Wn();xs()?cs():(n=n.parent,ro(n,!1));const r=n;!function la(){ti.lFrame.elementDepthCount--}();const a=G();return a.firstCreatePass&&(ca(a,n),ys(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function $a(n){return 0!=(16&n.flags)}(r)&&y_(a,r,N(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function nl(n){return 0!=(32&n.flags)}(r)&&y_(a,r,N(),r.stylesWithoutHost,!1),Hm}function v_(n,r,a,p){return Gm(n,r,a,p),Hm(),v_}function $m(n,r,a){const p=N(),b=G(),C=n+22,T=b.firstCreatePass?function yb(n,r,a,p,b){const C=r.consts,T=di(C,p),R=D(r,n,8,"ng-container",T);return null!==T&&Ss(R,T,!0),$i(r,a,R,di(C,b)),null!==r.queries&&r.queries.elementStart(r,R),R}(C,b,p,r,a):b.data[C];ro(T,!0);const R=p[C]=p[11].createComment("");return ld(b,p,R,T),Us(R,p),Xr(T)&&(Pe(b,p,T),pe(b,T,p)),null!=a&&Xe(p,T),$m}function Zm(){let n=Wn();const r=G();return xs()?cs():(n=n.parent,ro(n,!1)),r.firstCreatePass&&(ca(r,n),ys(n)&&r.queries.elementEnd(n)),Zm}function b_(n,r,a){return $m(n,r,a),Zm(),b_}function By(){return N()}function x_(n){return!!n&&"function"==typeof n.then}function w_(n){return!!n&&"function"==typeof n.subscribe}const Ny=w_;function C_(n,r,a,p){const b=N(),C=G(),T=Wn();return zy(C,b,b[11],T,n,r,!!a,p),C_}function Wm(n,r){const a=Wn(),p=N(),b=G();return zy(b,p,Hu(Vl(b.data),a,p),a,n,r,!1),Wm}function zy(n,r,a,p,b,C,T,R){const z=Xr(p),_e=n.firstCreatePass&&Md(n),Ve=r[8],yt=Bh(r);let jt=!0;if(3&p.type||R){const Xn=xe(p,r),oi=R?R(Xn):Xn,ki=yt.length,Mn=R?Di=>R(Sr(Di[p.index])):p.index;if(Qi(a)){let Di=null;if(!R&&z&&(Di=function vb(n,r,a,p){const b=n.cleanup;if(null!=b)for(let C=0;C<b.length-1;C+=2){const T=b[C];if(T===a&&b[C+1]===p){const R=r[7],z=b[C+2];return R.length>z?R[z]:null}"string"==typeof T&&(C+=2)}return null}(n,r,b,p.index)),null!==Di)(Di.__ngLastListenerFn__||Di).__ngNextListenerFn__=C,Di.__ngLastListenerFn__=C,jt=!1;else{C=E_(p,r,Ve,C,!1);const Fr=a.listen(oi,b,C);yt.push(C,Fr),_e&&_e.push(b,Mn,ki,ki+1)}}else C=E_(p,r,Ve,C,!0),oi.addEventListener(b,C,T),yt.push(C),_e&&_e.push(b,Mn,ki,T)}else C=E_(p,r,Ve,C,!1);const mn=p.outputs;let On;if(jt&&null!==mn&&(On=mn[b])){const Xn=On.length;if(Xn)for(let oi=0;oi<Xn;oi+=2){const Uo=r[On[oi]][On[oi+1]].subscribe(C),Pf=yt.length;yt.push(C,Uo),_e&&_e.push(b,p.index,Pf,-(Pf+1))}}}function Vy(n,r,a,p){try{return!1!==a(p)}catch(b){return Fa(n,b),!1}}function E_(n,r,a,p,b){return function C(T){if(T===Function)return p;Nl(2&n.flags?Hn(n.index,r):r);let z=Vy(r,0,p,T),re=C.__ngNextListenerFn__;for(;re;)z=Vy(r,0,re,T)&&z,re=re.__ngNextListenerFn__;return b&&!1===z&&(T.preventDefault(),T.returnValue=!1),z}}function Uy(n=1){return function Ur(n){return(ti.lFrame.contextLView=function us(n,r){for(;n>0;)r=r[15],n--;return r}(n,ti.lFrame.contextLView))[8]}(n)}function bb(n,r){let a=null;const p=function lu(n){const r=n.attrs;if(null!=r){const a=r.indexOf(5);if(0==(1&a))return r[a+1]}return null}(n);for(let b=0;b<r.length;b++){const C=r[b];if("*"!==C){if(null===p?ul(n,C,!0):jg(p,C))return b}else a=b}return a}function jy(n){const r=N()[16][6];if(!r.projection){const p=r.projection=Q(n?n.length:1,null),b=p.slice();let C=r.child;for(;null!==C;){const T=n?bb(C,n):0;null!==T&&(b[T]?b[T].projectionNext=C:p[T]=C,b[T]=C),C=C.next}}}function Gy(n,r=0,a){const p=N(),b=G(),C=D(b,22+n,16,null,a||null);null===C.projection&&(C.projection=r),cs(),64!=(64&C.flags)&&function Wo(n,r,a){cl(r[11],0,r,a,ku(n,a,r),Dp(a.parent||r[6],a,r))}(b,p,C)}function Yy(n,r,a,p,b){const C=n[a+1],T=null===r;let R=p?Pa(C):Oa(C),z=!1;for(;0!==R&&(!1===z||T);){const _e=n[R+1];Cb(n[R],r)&&(z=!0,n[R+1]=p?Cd(_e):Ac(_e)),R=p?Pa(_e):Oa(_e)}z&&(n[a+1]=p?Ac(C):Cd(C))}function Cb(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Ge(n,r)>=0}const Ts={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ky(n){return n.substring(Ts.key,Ts.keyEnd)}function Eb(n){return n.substring(Ts.value,Ts.valueEnd)}function Xy(n,r){const a=Ts.textEnd;return a===r?-1:(r=Ts.keyEnd=function Sb(n,r,a){for(;r<a&&n.charCodeAt(r)>32;)r++;return r}(n,Ts.key=r,a),Wh(n,r,a))}function Qy(n,r){const a=Ts.textEnd;let p=Ts.key=Wh(n,r,a);return a===p?-1:(p=Ts.keyEnd=function A_(n,r,a){let p;for(;r<a&&(45===(p=n.charCodeAt(r))||95===p||(-33&p)>=65&&(-33&p)<=90||p>=48&&p<=57);)r++;return r}(n,p,a),p=ev(n,p,a),p=Ts.value=Wh(n,p,a),p=Ts.valueEnd=function I_(n,r,a){let p=-1,b=-1,C=-1,T=r,R=T;for(;T<a;){const z=n.charCodeAt(T++);if(59===z)return R;34===z||39===z?R=T=tv(n,z,T,a):r===T-4&&85===C&&82===b&&76===p&&40===z?R=T=tv(n,41,T,a):z>32&&(R=T),C=b,b=p,p=-33&z}return R}(n,p,a),ev(n,p,a))}function Jy(n){Ts.key=0,Ts.keyEnd=0,Ts.value=0,Ts.valueEnd=0,Ts.textEnd=n.length}function Wh(n,r,a){for(;r<a&&n.charCodeAt(r)<=32;)r++;return r}function ev(n,r,a,p){return(r=Wh(n,r,a))<a&&r++,r}function tv(n,r,a,p){let b=-1,C=a;for(;C<p;){const T=n.charCodeAt(C++);if(T==r&&92!==b)return C;b=92==T&&92===b?0:T}throw new Error}function P_(n,r,a){return uc(n,r,a,!1),P_}function O_(n,r){return uc(n,r,null,!0),O_}function cc(n){dc(ov,Tb,n,!1)}function Tb(n,r){for(let a=function Mb(n){return Jy(n),Qy(n,Wh(n,0,Ts.textEnd))}(r);a>=0;a=Qy(r,a))ov(n,Ky(r),Eb(r))}function nv(n){dc(et,Oc,n,!0)}function Oc(n,r){for(let a=function Db(n){return Jy(n),Xy(n,Wh(n,0,Ts.textEnd))}(r);a>=0;a=Xy(r,a))et(n,Ky(r),!0)}function uc(n,r,a,p){const b=N(),C=G(),T=ws(2);C.firstUpdatePass&&rv(C,n,T,p),r!==Si&&pa(b,T,r)&&sv(C,C.data[co()],b,b[11],n,b[T+1]=function Fb(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ye(Xl(n)))),n}(r,a),p,T)}function dc(n,r,a,p){const b=G(),C=ws(2);b.firstUpdatePass&&rv(b,null,C,p);const T=N();if(a!==Si&&pa(T,C,a)){const R=b.data[co()];if(lv(R,p)&&!iv(b,C)){let z=p?R.classesWithoutHost:R.stylesWithoutHost;null!==z&&(a=me(z,a||"")),y_(b,R,T,a,p)}else!function Rb(n,r,a,p,b,C,T,R){b===Si&&(b=Wt);let z=0,re=0,_e=0<b.length?b[0]:null,Ve=0<C.length?C[0]:null;for(;null!==_e||null!==Ve;){const yt=z<b.length?b[z+1]:void 0,jt=re<C.length?C[re+1]:void 0;let On,mn=null;_e===Ve?(z+=2,re+=2,yt!==jt&&(mn=Ve,On=jt)):null===Ve||null!==_e&&_e<Ve?(z+=2,mn=_e):(re+=2,mn=Ve,On=jt),null!==mn&&sv(n,r,a,p,mn,On,T,R),_e=z<b.length?b[z]:null,Ve=re<C.length?C[re]:null}}(b,R,T,T[11],T[C+1],T[C+1]=function kb(n,r,a){if(null==a||""===a)return Wt;const p=[],b=Xl(a);if(Array.isArray(b))for(let C=0;C<b.length;C++)n(p,b[C],!0);else if("object"==typeof b)for(const C in b)b.hasOwnProperty(C)&&n(p,C,b[C]);else"string"==typeof b&&r(p,b);return p}(n,r,a),p,C)}}function iv(n,r){return r>=n.expandoStartIndex}function rv(n,r,a,p){const b=n.data;if(null===b[a+1]){const C=b[co()],T=iv(n,a);lv(C,p)&&null===r&&!T&&(r=!1),r=function Ab(n,r,a,p){const b=Vl(n);let C=p?r.residualClasses:r.residualStyles;if(null===b)0===(p?r.classBindings:r.styleBindings)&&(a=ff(a=k_(null,n,r,a,p),r.attrs,p),C=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==b)if(a=k_(b,n,r,a,p),null===C){let z=function Ib(n,r,a){const p=a?r.classBindings:r.styleBindings;if(0!==Oa(p))return n[Pa(p)]}(n,r,p);void 0!==z&&Array.isArray(z)&&(z=k_(null,n,r,z[1],p),z=ff(z,r.attrs,p),function Pb(n,r,a,p){n[Pa(a?r.classBindings:r.styleBindings)]=p}(n,r,p,z))}else C=function Ob(n,r,a){let p;const b=r.directiveEnd;for(let C=1+r.directiveStylingLast;C<b;C++)p=ff(p,n[C].hostAttrs,a);return ff(p,r.attrs,a)}(n,r,p)}return void 0!==C&&(p?r.residualClasses=C:r.residualStyles=C),a}(b,C,r,p),function xb(n,r,a,p,b,C){let T=C?r.classBindings:r.styleBindings,R=Pa(T),z=Oa(T);n[p]=a;let _e,re=!1;if(Array.isArray(a)){const Ve=a;_e=Ve[1],(null===_e||Ge(Ve,_e)>0)&&(re=!0)}else _e=a;if(b)if(0!==z){const yt=Pa(n[R+1]);n[p+1]=xd(yt,R),0!==yt&&(n[yt+1]=Xp(n[yt+1],p)),n[R+1]=function Kp(n,r){return 131071&n|r<<17}(n[R+1],p)}else n[p+1]=xd(R,0),0!==R&&(n[R+1]=Xp(n[R+1],p)),R=p;else n[p+1]=xd(z,0),0===R?R=p:n[z+1]=Xp(n[z+1],p),z=p;re&&(n[p+1]=Ac(n[p+1])),Yy(n,_e,p,!0),Yy(n,_e,p,!1),function wb(n,r,a,p,b){const C=b?n.residualClasses:n.residualStyles;null!=C&&"string"==typeof r&&Ge(C,r)>=0&&(a[p+1]=Cd(a[p+1]))}(r,_e,n,p,C),T=xd(R,z),C?r.classBindings=T:r.styleBindings=T}(b,C,r,a,T,p)}}function k_(n,r,a,p,b){let C=null;const T=a.directiveEnd;let R=a.directiveStylingLast;for(-1===R?R=a.directiveStart:R++;R<T&&(C=r[R],p=ff(p,C.hostAttrs,b),C!==n);)R++;return null!==n&&(a.directiveStylingLast=R),p}function ff(n,r,a){const p=a?1:2;let b=-1;if(null!==r)for(let C=0;C<r.length;C++){const T=r[C];"number"==typeof T?b=T:b===p&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),et(n,T,!!a||r[++C]))}return void 0===n?null:n}function ov(n,r,a){et(n,r,Xl(a))}function sv(n,r,a,p,b,C,T,R){if(!(3&r.type))return;const z=n.data,re=z[R+1];qm(function Dm(n){return 1==(1&n)}(re)?av(z,r,a,b,Oa(re),T):void 0)||(qm(C)||function wd(n){return 2==(2&n)}(re)&&(C=av(z,null,a,b,R,T)),function _h(n,r,a,p,b){const C=Qi(n);if(r)b?C?n.addClass(a,p):a.classList.add(p):C?n.removeClass(a,p):a.classList.remove(p);else{let T=-1===p.indexOf("-")?void 0:ll.DashCase;if(null==b)C?n.removeStyle(a,p,T):a.style.removeProperty(p);else{const R="string"==typeof b&&b.endsWith("!important");R&&(b=b.slice(0,-10),T|=ll.Important),C?n.setStyle(a,p,b,T):a.style.setProperty(p,b,R?"important":"")}}}(p,T,X(co(),a),b,C))}function av(n,r,a,p,b,C){const T=null===r;let R;for(;b>0;){const z=n[b],re=Array.isArray(z),_e=re?z[1]:z,Ve=null===_e;let yt=a[b+1];yt===Si&&(yt=Ve?Wt:void 0);let jt=Ve?Te(yt,p):_e===p?yt:void 0;if(re&&!qm(jt)&&(jt=Te(z,p)),qm(jt)&&(R=jt,T))return R;const mn=n[b+1];b=T?Pa(mn):Oa(mn)}if(null!==r){let z=C?r.residualClasses:r.residualStyles;null!=z&&(R=Te(z,p))}return R}function qm(n){return void 0!==n}function lv(n,r){return 0!=(n.flags&(r?16:32))}function cv(n,r=""){const a=N(),p=G(),b=n+22,C=p.firstCreatePass?D(p,b,1,r,null):p.data[b],T=a[b]=function nu(n,r){return Qi(n)?n.createText(r):n.createTextNode(r)}(a[11],r);ld(p,a,T,C),ro(C,!1)}function R_(n){return Ym("",n,""),R_}function Ym(n,r,a){const p=N(),b=_u(p,n,r,a);return b!==Si&&fl(p,co(),b),Ym}function gv(n,r,a){dc(et,Oc,_u(N(),n,r,a),!0)}function L_(n,r,a){const p=N();return pa(p,tl(),r)&&tn(G(),wr(),p,n,r,p[11],a,!0),L_}function B_(n,r,a){const p=N();if(pa(p,tl(),r)){const C=G(),T=wr();tn(C,T,p,n,r,Hu(Vl(C.data),T,p),a,!0)}return B_}const Rd=void 0;var Xb=["en",[["a","p"],["AM","PM"],Rd],[["AM","PM"],Rd,Rd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rd,"{1} 'at' {0}",Rd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kb(n){const a=Math.floor(Math.abs(n)),p=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===p?1:5}];let qh={};function N_(n){const r=function m1(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=Iv(r);if(a)return a;const p=r.split("-")[0];if(a=Iv(p),a)return a;if("en"===p)return Xb;throw new Error(`Missing locale data for the locale "${n}".`)}function Av(n){return N_(n)[Ti.PluralCase]}function Iv(n){return n in qh||(qh[n]=Le.ng&&Le.ng.common&&Le.ng.common.locales&&Le.ng.common.locales[n]),qh[n]}var Ti=(()=>((Ti=Ti||{})[Ti.LocaleId=0]="LocaleId",Ti[Ti.DayPeriodsFormat=1]="DayPeriodsFormat",Ti[Ti.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ti[Ti.DaysFormat=3]="DaysFormat",Ti[Ti.DaysStandalone=4]="DaysStandalone",Ti[Ti.MonthsFormat=5]="MonthsFormat",Ti[Ti.MonthsStandalone=6]="MonthsStandalone",Ti[Ti.Eras=7]="Eras",Ti[Ti.FirstDayOfWeek=8]="FirstDayOfWeek",Ti[Ti.WeekendRange=9]="WeekendRange",Ti[Ti.DateFormat=10]="DateFormat",Ti[Ti.TimeFormat=11]="TimeFormat",Ti[Ti.DateTimeFormat=12]="DateTimeFormat",Ti[Ti.NumberSymbols=13]="NumberSymbols",Ti[Ti.NumberFormats=14]="NumberFormats",Ti[Ti.CurrencyCode=15]="CurrencyCode",Ti[Ti.CurrencySymbol=16]="CurrencySymbol",Ti[Ti.CurrencyName=17]="CurrencyName",Ti[Ti.Currencies=18]="Currencies",Ti[Ti.Directionality=19]="Directionality",Ti[Ti.PluralCase=20]="PluralCase",Ti[Ti.ExtraData=21]="ExtraData",Ti))();const mf="en-US";let Qb=mf;function H_(n,r,a,p,b){if(n=Ue(n),Array.isArray(n))for(let C=0;C<n.length;C++)H_(n[C],r,a,p,b);else{const C=G(),T=N();let R=Dc(n)?n:Ue(n.provide),z=Np(n);const re=Wn(),_e=1048575&re.providerIndexes,Ve=re.directiveStart,yt=re.providerIndexes>>20;if(Dc(n)||!n.multi){const jt=new uo(z,b,nc),mn=Z_(R,r,b?_e:_e+yt,Ve);-1===mn?(Ml(Zl(re,T),C,R),$_(C,n,r.length),r.push(R),re.directiveStart++,re.directiveEnd++,b&&(re.providerIndexes+=1048576),a.push(jt),T.push(jt)):(a[mn]=jt,T[mn]=jt)}else{const jt=Z_(R,r,_e+yt,Ve),mn=Z_(R,r,_e,_e+yt),On=jt>=0&&a[jt],Xn=mn>=0&&a[mn];if(b&&!Xn||!b&&!On){Ml(Zl(re,T),C,R);const oi=function e0(n,r,a,p,b){const C=new uo(n,a,nc);return C.multi=[],C.index=r,C.componentProviders=0,Qv(C,b,p&&!a),C}(b?Jv:Gx,a.length,b,p,z);!b&&Xn&&(a[mn].providerFactory=oi),$_(C,n,r.length,0),r.push(R),re.directiveStart++,re.directiveEnd++,b&&(re.providerIndexes+=1048576),a.push(oi),T.push(oi)}else $_(C,n,jt>-1?jt:mn,Qv(a[b?mn:jt],z,!b&&p));!b&&p&&Xn&&a[mn].componentProviders++}}}function $_(n,r,a,p){const b=Dc(r),C=function Rp(n){return!!n.useClass}(r);if(b||C){const z=(C?Ue(r.useClass):r).prototype.ngOnDestroy;if(z){const re=n.destroyHooks||(n.destroyHooks=[]);if(!b&&r.multi){const _e=re.indexOf(a);-1===_e?re.push(a,[p,z]):re[_e+1].push(p,z)}else re.push(a,z)}}}function Qv(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function Z_(n,r,a,p){for(let b=a;b<p;b++)if(r[b]===n)return b;return-1}function Gx(n,r,a,p){return bf(this.multi,[])}function Jv(n,r,a,p){const b=this.multi;let C;if(this.providerFactory){const T=this.providerFactory.componentProviders,R=Z(a,a[1],this.providerFactory.index,p);C=R.slice(0,T),bf(b,C);for(let z=T;z<R.length;z++)C.push(R[z])}else C=[],bf(b,C);return C}function bf(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function t0(n,r=[]){return a=>{a.providersResolver=(p,b)=>function jx(n,r,a){const p=G();if(p.firstCreatePass){const b=Eo(n);H_(a,p.data,p.blueprint,b,!0),H_(r,p.data,p.blueprint,b,!1)}}(p,b?b(n):n,r)}}class r0{resolveComponentFactory(r){throw function Hx(n){const r=Error(`No component factory found for ${ye(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Kh=(()=>{class n{}return n.NULL=new r0,n})();class Fd{}class $x{}class s0{}function Zx(){return Xh(Wn(),N())}function Xh(n,r){return new xf(xe(n,r))}let xf=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=Zx,n})();function Wx(n){return n instanceof xf?n.nativeElement:n}class a0{}let qx=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function S1(){const n=N(),a=Hn(Wn().index,n);return function Yx(n){return n[11]}(fi(a)?a:n)}(),n})(),Kx=(()=>{class n{}return n.\u0275prov=en({token:n,providedIn:"root",factory:()=>null}),n})();class l0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Xx=new l0("14.0.2"),W_={};function Qm(n,r,a,p,b=!1){for(;null!==a;){const C=r[a.index];if(null!==C&&p.push(Sr(C)),br(C))for(let R=10;R<C.length;R++){const z=C[R],re=z[1].firstChild;null!==re&&Qm(z[1],z,re,p)}const T=a.type;if(8&T)Qm(n,r,a.child,p);else if(32&T){const R=Pu(a,r);let z;for(;z=R();)p.push(z)}else if(16&T){const R=Mp(r,a);if(Array.isArray(R))p.push(...R);else{const z=tu(r[16]);Qm(z[1],z,R,p,!0)}}a=b?a.projectionNext:a.next}return p}class wf{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return Qm(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(br(r)){const a=r[8],p=a?a.indexOf(this):-1;p>-1&&(ou(r,p),H(a,p))}this._attachedToViewContainer=!1}Cp(this._lView[1],this._lView)}onDestroy(r){yn(this._lView[1],this._lView,null,r)}markForCheck(){Nl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Wi(n,r,a){const p=r[10];p.begin&&p.begin();try{Y(n,r,n.template,a)}catch(b){throw Fa(r,b),b}finally{p.end&&p.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lg(n,r){su(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new rt(902,"");this._appRef=r}}class Jm extends wf{constructor(r){super(r),this._view=r}detectChanges(){Ra(this._view)}checkNoChanges(){}get context(){return null}}class q_ extends Kh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=Oe(r);return new Y_(a,this.ngModule)}}function c0(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}class T1{constructor(r,a){this.injector=r,this.parentInjector=a}get(r,a,p){const b=this.injector.get(r,W_,p);return b!==W_||a===W_?b:this.parentInjector.get(r,a,p)}}class Y_ extends s0{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function Hg(n){return n.map(Gg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return c0(this.componentDef.inputs)}get outputs(){return c0(this.componentDef.outputs)}create(r,a,p,b){let C=(b=b||this.ngModule)instanceof tc?b:b?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const T=C?new T1(r,C):r,R=T.get(a0,Ls),z=T.get(Kx,null),re=R.createRenderer(null,this.componentDef),_e=this.componentDef.selectors[0][0]||"div",Ve=p?function Ut(n,r,a){if(Qi(n))return n.selectRootElement(r,a===Ae.ShadowDom);let p="string"==typeof r?n.querySelector(r):r;return p.textContent="",p}(re,p,this.componentDef.encapsulation):wp(R.createRenderer(null,this.componentDef),_e,function Qx(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(_e)),yt=this.componentDef.onPush?288:272,jt=function u_(n,r){return{components:[],scheduler:n||oh,clean:sc,playerHandler:r||null,flags:0}}(),mn=Et(0,null,null,1,0,null,null,null,null,null),On=x(null,mn,jt,yt,null,null,R,re,z,T,null);let Xn,oi;Ho(On);try{const ki=function My(n,r,a,p,b,C){const T=a[1];a[22]=n;const z=D(T,22,2,"#host",null),re=z.mergedAttrs=r.hostAttrs;null!==re&&(Ss(z,re,!0),null!==n&&(El(b,n,re),null!==z.classes&&Ap(b,n,z.classes),null!==z.styles&&au(b,n,z.styles)));const _e=p.createRenderer(n,r),Ve=x(a,ht(r),null,r.onPush?32:16,a[22],z,p,_e,C||null,null,null);return T.firstCreatePass&&(Ml(Zl(z,a),T,r.type),ho(T,z),Yo(z,a.length,1)),ra(a,Ve),a[22]=Ve}(Ve,this.componentDef,On,R,re);if(Ve)if(p)El(re,Ve,["ng-version",Xx.full]);else{const{attrs:Mn,classes:Di}=function $g(n){const r=[],a=[];let p=1,b=2;for(;p<n.length;){let C=n[p];if("string"==typeof C)2===b?""!==C&&r.push(C,n[++p]):8===b&&a.push(C);else{if(!Ia(b))break;b=C}p++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);Mn&&El(re,Ve,Mn),Di&&Di.length>0&&Ap(re,Ve,Di.join(" "))}if(oi=Yt(mn,22),void 0!==a){const Mn=oi.projection=[];for(let Di=0;Di<this.ngContentSelectors.length;Di++){const Fr=a[Di];Mn.push(null!=Fr?Array.from(Fr):null)}}Xn=function c_(n,r,a,p,b){const C=a[1],T=function Bi(n,r,a){const p=Wn();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),lo(n,p,r,k(n,r,1,null),a));const b=Z(r,n,p.directiveStart,p);Us(b,r);const C=xe(p,r);return C&&Us(C,r),b}(C,a,r);if(p.components.push(T),n[8]=T,null!==b)for(const z of b)z(T,r);if(r.contentQueries){const z=Wn();r.contentQueries(1,T,z.directiveStart)}const R=Wn();return!C.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ns(R.index),Ki(a[1],R,0,R.directiveStart,R.directiveEnd,r),yo(r,T)),T}(ki,this.componentDef,On,jt,[ub]),j(mn,On,null)}finally{Js()}return new u0(this.componentType,Xn,Xh(oi,On),On,oi)}}class u0 extends class o0{}{constructor(r,a,p,b,C){super(),this.location=p,this._rootLView=b,this._tNode=C,this.instance=a,this.hostView=this.changeDetectorRef=new Jm(b),this.componentType=r}get injector(){return new ct(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function ew(n,r){return new d0(n,r??null)}class d0 extends Fd{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new q_(this);const p=_t(r);this._bootstrapComponents=Fl(p.bootstrap),this._r3Injector=Sc(r,a,[{provide:Fd,useValue:this},{provide:Kh,useValue:this.componentFactoryResolver}],ye(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(r)}get(r,a=Ya.THROW_IF_NOT_FOUND,p=Ln.Default){return r===Ya||r===Fd||r===md?this:this._r3Injector.get(r,a,p)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class K_ extends $x{constructor(r){super(),this.moduleType=r}create(r){return new d0(this.moduleType,r)}}class tw extends Fd{constructor(r,a,p){super(),this.componentFactoryResolver=new q_(this),this.instance=null;const b=new Lp([...r,{provide:Fd,useValue:this},{provide:Kh,useValue:this.componentFactoryResolver}],a||Ch(),p,new Set(["environment"]));this.injector=b,b.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function X_(n,r=null,a=null){return new tw(n,r,a).injector}function h0(n,r,a){const p=ko()+n,b=N();return b[p]===Si?Pc(b,p,a?r.call(a):r()):function hf(n,r){return n[r]}(b,p)}function p0(n,r,a,p){return y0(N(),ko(),n,r,a,p)}function f0(n,r,a,p,b){return function v0(n,r,a,p,b,C,T){const R=r+a;return Od(n,R,b,C)?Pc(n,R+2,T?p.call(T,b,C):p(b,C)):Cf(n,R+2)}(N(),ko(),n,r,a,p,b)}function m0(n,r,a,p,b,C){return function b0(n,r,a,p,b,C,T,R){const z=r+a;return function fa(n,r,a,p,b){const C=Od(n,r,a,p);return pa(n,r+2,b)||C}(n,z,b,C,T)?Pc(n,z+3,R?p.call(R,b,C,T):p(b,C,T)):Cf(n,z+3)}(N(),ko(),n,r,a,p,b,C)}function _0(n,r,a,p){return function w0(n,r,a,p,b,C){let T=r+a,R=!1;for(let z=0;z<b.length;z++)pa(n,T++,b[z])&&(R=!0);return R?Pc(n,T,p.apply(C,b)):Cf(n,T)}(N(),ko(),n,r,a,p)}function Cf(n,r){const a=n[r];return a===Si?void 0:a}function y0(n,r,a,p,b,C){const T=r+a;return pa(n,T,b)?Pc(n,T+1,C?p.call(C,b):p(b)):Cf(n,T+1)}function C0(n,r){const a=G();let p;const b=n+22;a.firstCreatePass?(p=function lw(n,r){if(r)for(let a=r.length-1;a>=0;a--){const p=r[a];if(n===p.name)return p}}(r,a.pipeRegistry),a.data[b]=p,p.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(b,p.onDestroy)):p=a.data[b];const C=p.factory||(p.factory=vs(p.type)),T=qt(nc);try{const R=Hl(!1),z=C();return Hl(R),function g_(n,r,a,p){a>=n.data.length&&(n.data[a]=null,n.blueprint[a]=null),r[a]=p}(a,N(),b,z),z}finally{qt(T)}}function E0(n,r,a){const p=n+22,b=N(),C=gn(b,p);return function Ef(n,r){return n[1].data[r].pure}(b,p)?y0(b,ko(),r,C.transform,a,C):C.transform(a)}function Q_(n){return r=>{setTimeout(n,void 0,r)}}const kc=class pw extends I.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,p){let b=r,C=a||(()=>null),T=p;if(r&&"object"==typeof r){const z=r;b=z.next?.bind(z),C=z.error?.bind(z),T=z.complete?.bind(z)}this.__isAsync&&(C=Q_(C),b&&(b=Q_(b)),T&&(T=Q_(T)));const R=super.subscribe({next:b,error:C,complete:T});return r instanceof l.w0&&r.add(R),R}};function fw(){return this._results[Pd()]()}class Df{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pd(),p=Df.prototype;p[a]||(p[a]=fw)}get changes(){return this._changes||(this._changes=new kc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const p=this;p.dirty=!1;const b=E(r);(this._changesDetected=!function w(n,r,a){if(n.length!==r.length)return!1;for(let p=0;p<n.length;p++){let b=n[p],C=r[p];if(a&&(b=a(b),C=a(C)),C!==b)return!1}return!0}(p._results,b,a))&&(p._results=b,p.length=b.length,p.last=b[this.length-1],p.first=b[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Mf=(()=>{class n{}return n.__NG_ELEMENT_ID__=_w,n})();const mw=Mf,gw=class extends mw{constructor(r,a,p){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=p}createEmbeddedView(r,a){const p=this._declarationTContainer.tViews,b=x(this._declarationLView,p,r,16,null,p.declTNode,null,null,null,null,a||null);b[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(b[19]=T.createEmbeddedView(p)),j(p,b,r),new wf(b)}};function _w(){return tg(Wn(),N())}function tg(n,r){return 4&n.type?new gw(r,n,Xh(n,r)):null}let Sf=(()=>{class n{}return n.__NG_ELEMENT_ID__=yw,n})();function yw(){return S0(Wn(),N())}const vw=Sf,D0=class extends vw{constructor(r,a,p){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=p}get element(){return Xh(this._hostTNode,this._hostLView)}get injector(){return new ct(this._hostTNode,this._hostLView)}get parentInjector(){const r=Dl(this._hostTNode,this._hostLView);if(Vs(r)){const a=Jr(r,this._hostLView),p=Ea(r);return new ct(a[1].data[p+8],a)}return new ct(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=M0(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,p){let b,C;"number"==typeof p?b=p:null!=p&&(b=p.index,C=p.injector);const T=r.createEmbeddedView(a||{},C);return this.insert(T,b),T}createComponent(r,a,p,b,C){const T=r&&!function d(n){return"function"==typeof n}(r);let R;if(T)R=a;else{const Ve=a||{};R=Ve.index,p=Ve.injector,b=Ve.projectableNodes,C=Ve.environmentInjector||Ve.ngModuleRef}const z=T?r:new Y_(Oe(r)),re=p||this.parentInjector;if(!C&&null==z.ngModule){const yt=(T?re:this.parentInjector).get(tc,null);yt&&(C=yt)}const _e=z.create(re,b,void 0,C);return this.insert(_e.hostView,R),_e}insert(r,a){const p=r._lView,b=p[1];if(function lr(n){return br(n[3])}(p)){const _e=this.indexOf(r);if(-1!==_e)this.detach(_e);else{const Ve=p[3],yt=new D0(Ve,Ve[6],Ve[3]);yt.detach(yt.indexOf(r))}}const C=this._adjustIndex(a),T=this._lContainer;!function ru(n,r,a,p){const b=10+p,C=a.length;p>0&&(a[b-1][4]=r),p<C-10?(r[4]=a[b],B(a,10+p,r)):(a.push(r),r[4]=null),r[3]=a;const T=r[17];null!==T&&a!==T&&function tm(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(T,r);const R=r[19];null!==R&&R.insertView(n),r[2]|=64}(b,p,T,C);const R=Sp(C,T),z=p[11],re=ad(z,T[7]);return null!==re&&function em(n,r,a,p,b,C){p[0]=b,p[6]=r,su(n,p,a,1,b,C)}(b,T[6],z,p,re,R),r.attachToViewContainerRef(),B(J_(T),C,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=M0(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),p=ou(this._lContainer,a);p&&(H(J_(this._lContainer),a),Cp(p[1],p))}detach(r){const a=this._adjustIndex(r,-1),p=ou(this._lContainer,a);return p&&null!=H(J_(this._lContainer),a)?new wf(p):null}_adjustIndex(r,a=0){return r??this.length+a}};function M0(n){return n[8]}function J_(n){return n[8]||(n[8]=[])}function S0(n,r){let a;const p=r[n.index];if(br(p))a=p;else{let b;if(8&n.type)b=Sr(p);else{const C=r[11];b=C.createComment("");const T=xe(n,r);ec(C,ad(C,T),b,function Ug(n,r){return Qi(n)?n.nextSibling(r):r.nextSibling}(C,T),!1)}r[n.index]=a=vo(p,r,b,n),ra(r,a)}return new D0(a,n,r)}class ey{constructor(r){this.queryList=r,this.matches=null}clone(){return new ey(this.queryList)}setDirty(){this.queryList.setDirty()}}class ng{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const p=null!==r.contentQueries?r.contentQueries[0]:a.length,b=[];for(let C=0;C<p;C++){const T=a.getByIndex(C);b.push(this.queries[T.indexInDeclarationView].clone())}return new ng(b)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==oy(r,a).matches&&this.queries[a].setDirty()}}class ty{constructor(r,a,p=null){this.predicate=r,this.flags=a,this.read=p}}class ny{constructor(r=[]){this.queries=r}elementStart(r,a){for(let p=0;p<this.queries.length;p++)this.queries[p].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let p=0;p<this.length;p++){const b=null!==a?a.length:0,C=this.getByIndex(p).embeddedTView(r,b);C&&(C.indexInDeclarationView=p,null!==a?a.push(C):a=[C])}return null!==a?new ny(a):null}template(r,a){for(let p=0;p<this.queries.length;p++)this.queries[p].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class ig{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new ig(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let p=r.parent;for(;null!==p&&8&p.type&&p.index!==a;)p=p.parent;return a===(null!==p?p.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const p=this.metadata.predicate;if(Array.isArray(p))for(let b=0;b<p.length;b++){const C=p[b];this.matchTNodeWithReadOption(r,a,Cw(a,C)),this.matchTNodeWithReadOption(r,a,P(a,r,C,!1,!1))}else p===Mf?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,P(a,r,p,!1,!1))}matchTNodeWithReadOption(r,a,p){if(null!==p){const b=this.metadata.read;if(null!==b)if(b===xf||b===Sf||b===Mf&&4&a.type)this.addMatch(a.index,-2);else{const C=P(a,r,b,!1,!1);null!==C&&this.addMatch(a.index,C)}else this.addMatch(a.index,p)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function Cw(n,r){const a=n.localNames;if(null!==a)for(let p=0;p<a.length;p+=2)if(a[p]===r)return a[p+1];return null}function Dw(n,r,a,p){return-1===a?function Ew(n,r){return 11&n.type?Xh(n,r):4&n.type?tg(n,r):null}(r,n):-2===a?function T0(n,r,a){return a===xf?Xh(r,n):a===Mf?tg(r,n):a===Sf?S0(r,n):void 0}(n,r,p):Z(n,n[1],a,r)}function A0(n,r,a,p){const b=r[19].queries[p];if(null===b.matches){const C=n.data,T=a.matches,R=[];for(let z=0;z<T.length;z+=2){const re=T[z];R.push(re<0?null:Dw(r,C[re],T[z+1],a.metadata.read))}b.matches=R}return b.matches}function iy(n,r,a,p){const b=n.queries.getByIndex(a),C=b.matches;if(null!==C){const T=A0(n,r,b,a);for(let R=0;R<C.length;R+=2){const z=C[R];if(z>0)p.push(T[R/2]);else{const re=C[R+1],_e=r[-z];for(let Ve=10;Ve<_e.length;Ve++){const yt=_e[Ve];yt[17]===yt[3]&&iy(yt[1],yt,re,p)}if(null!==_e[9]){const Ve=_e[9];for(let yt=0;yt<Ve.length;yt++){const jt=Ve[yt];iy(jt[1],jt,re,p)}}}}}return p}function I0(n){const r=N(),a=G(),p=oo();Vr(p+1);const b=oy(a,p);if(n.dirty&&ar(r)===(2==(2&b.metadata.flags))){if(null===b.matches)n.reset([]);else{const C=b.crossesNgTemplate?iy(a,r,p,[]):A0(a,r,b,p);n.reset(C,Wx),n.notifyOnChanges()}return!0}return!1}function P0(n,r,a){const p=G();p.firstCreatePass&&(F0(p,new ty(n,r,a),-1),2==(2&r)&&(p.staticViewQueries=!0)),ry(p,N(),r)}function O0(n,r,a,p){const b=G();if(b.firstCreatePass){const C=Wn();F0(b,new ty(r,a,p),C.index),function L0(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(b,n),2==(2&a)&&(b.staticContentQueries=!0)}ry(b,N(),a)}function k0(){return function R0(n,r){return n[19].queries[r].queryList}(N(),oo())}function ry(n,r,a){const p=new Df(4==(4&a));yn(n,r,p,p.destroy),null===r[19]&&(r[19]=new ng),r[19].queries.push(new ey(p))}function F0(n,r,a){null===n.queries&&(n.queries=new ny),n.queries.track(new ig(r,a))}function oy(n,r){return n.queries.getByIndex(r)}function Qh(n){const r=Oe(n)||Ye(n)||gt(n);return null!==r&&r.standalone}function dy(...n){}const J0=new Cr("Application Initializer");let ug=(()=>{class n{constructor(a){this.appInits=a,this.resolve=dy,this.reject=dy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((p,b)=>{this.resolve=p,this.reject=b})}runInitializers(){if(this.initialized)return;const a=[],p=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let b=0;b<this.appInits.length;b++){const C=this.appInits[b]();if(x_(C))a.push(C);else if(Ny(C)){const T=new Promise((R,z)=>{C.subscribe({complete:R,error:z})});a.push(T)}}Promise.all(a).then(()=>{p()}).catch(b=>{this.reject(b)}),0===a.length&&p(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(mr(J0,8))},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eb=new Cr("AppId",{providedIn:"root",factory:function tb(){return`${hy()}${hy()}${hy()}`}});function hy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vw=new Cr("Platform Initializer"),u=new Cr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),f=new Cr("appBootstrapListener"),m=new Cr("AnimationModuleType");let M=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const le=new Cr("LocaleId",{providedIn:"root",factory:()=>is(le,Ln.Optional|Ln.SkipSelf)||function L(){return typeof $localize<"u"&&$localize.locale||mf}()}),we=new Cr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Qt{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let Vn=(()=>{class n{compileModuleSync(a){return new K_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const p=this.compileModuleSync(a),C=Fl(_t(a).declarations).reduce((T,R)=>{const z=Oe(R);return z&&T.push(new Y_(z)),T},[]);return new Qt(p,C)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jn=(()=>Promise.resolve(0))();function vi(n){typeof Zone>"u"?Jn.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ji{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:p=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kc(!1),this.onMicrotaskEmpty=new kc(!1),this.onStable=new kc(!1),this.onError=new kc(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const b=this;b._nesting=0,b._outer=b._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(b._inner=b._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(b._inner=b._inner.fork(Zone.longStackTraceZoneSpec)),b.shouldCoalesceEventChangeDetection=!p&&a,b.shouldCoalesceRunChangeDetection=p,b.lastRequestAnimationFrameId=-1,b.nativeRequestAnimationFrame=function Oi(){let n=Le.requestAnimationFrame,r=Le.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const p=r[Zone.__symbol__("OriginalDelegate")];p&&(r=p)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Na(n){const r=()=>{!function Ba(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Le,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Yr(n),n.isCheckStableRunning=!0,Hr(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Yr(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,p,b,C,T,R)=>{try{return Xo(n),a.invokeTask(b,C,T,R)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||n.shouldCoalesceRunChangeDetection)&&r(),Xa(n)}},onInvoke:(a,p,b,C,T,R,z)=>{try{return Xo(n),a.invoke(b,C,T,R,z)}finally{n.shouldCoalesceRunChangeDetection&&r(),Xa(n)}},onHasTask:(a,p,b,C)=>{a.hasTask(b,C),p===b&&("microTask"==C.change?(n._hasPendingMicrotasks=C.microTask,Yr(n),Hr(n)):"macroTask"==C.change&&(n.hasPendingMacrotasks=C.macroTask))},onHandleError:(a,p,b,C)=>(a.handleError(b,C),n.runOutsideAngular(()=>n.onError.emit(C)),!1)})}(b)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ji.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ji.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,a,p){return this._inner.run(r,a,p)}runTask(r,a,p,b){const C=this._inner,T=C.scheduleEventTask("NgZoneEvent: "+b,r,xo,dy,dy);try{return C.runTask(T,a,p)}finally{C.cancelTask(T)}}runGuarded(r,a,p){return this._inner.runGuarded(r,a,p)}runOutsideAngular(r){return this._outer.run(r)}}const xo={};function Hr(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yr(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Xo(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Xa(n){n._nesting--,Hr(n)}class gl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kc,this.onMicrotaskEmpty=new kc,this.onStable=new kc,this.onError=new kc}run(r,a,p){return r.apply(a,p)}runGuarded(r,a,p){return r.apply(a,p)}runOutsideAngular(r){return r()}runTask(r,a,p,b){return r.apply(a,p)}}const js=new Cr(""),_l=new Cr("");let ri,hc=(()=>{class n{constructor(a,p,b){this._ngZone=a,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ri||(function Nd(n){ri=n}(b),b.addToWindow(p)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ji.assertNotInAngularZone(),vi(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vi(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(a)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,p,b){let C=-1;p&&p>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==C),a(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:a,timeoutId:C,updateCb:b})}whenStable(a,p,b){if(b&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,p,b),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,p,b){return[]}}return n.\u0275fac=function(a){return new(a||n)(mr(ji),mr(Bd),mr(_l))},n.\u0275prov=en({token:n,factory:n.\u0275fac}),n})(),Bd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(a,p){this._applications.set(a,p)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,p=!0){return ri?.findTestabilityInTree(this,a,p)??null}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ci=null;const Ei=new Cr("AllowMultipleToken"),cr=new Cr("PlatformOnDestroy");class zr{constructor(r,a){this.name=r,this.token=a}}function ma(n,r,a=[]){const p=`Platform: ${r}`,b=new Cr(p);return(C=[])=>{let T=Uw();if(!T||T.injector.get(Ei,!1)){const R=[...a,...C,{provide:b,useValue:!0}];n?n(R):function Fc(n){if(ci&&!ci.get(Ei,!1))throw new rt(400,"");ci=n;const r=n.get(j1);(function Qo(n){const r=n.get(Vw,null);r&&r.forEach(a=>a())})(n)}(function dg(n=[],r){return Ya.create({name:r,providers:[{provide:Fp,useValue:"platform"},{provide:cr,useValue:()=>ci=null},...n]})}(R,p))}return function np(n){const r=Uw();if(!r)throw new rt(401,"");return r}()}}function Uw(){return ci?.get(j1)??null}let j1=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,p){const b=function cC(n,r){let a;return a="noop"===n?new gl:("zone.js"===n?void 0:n)||new ji(r),a}(p?.ngZone,function G1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(p)),C=[{provide:ji,useValue:b}];return b.run(()=>{const T=Ya.create({providers:C,parent:this.injector,name:a.moduleType.name}),R=a.create(T),z=R.injector.get(Ol,null);if(!z)throw new rt(402,"");return b.runOutsideAngular(()=>{const re=b.onError.subscribe({next:_e=>{z.handleError(_e)}});R.onDestroy(()=>{ib(this._modules,R),re.unsubscribe()})}),function H1(n,r,a){try{const p=a();return x_(p)?p.catch(b=>{throw r.runOutsideAngular(()=>n.handleError(b)),b}):p}catch(p){throw r.runOutsideAngular(()=>n.handleError(p)),p}}(z,b,()=>{const re=R.injector.get(ug);return re.runInitializers(),re.donePromise.then(()=>(function Jb(n){gi(n,"Expected localeId to be defined"),"string"==typeof n&&(Qb=n.toLowerCase().replace(/_/g,"-"))}(R.injector.get(le,mf)||mf),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,p=[]){const b=$1({},p);return function za(n,r,a){const p=new K_(a);return Promise.resolve(p)}(0,0,a).then(C=>this.bootstrapModuleFactory(C,b))}_moduleDoBootstrap(a){const p=a.injector.get(nb);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(b=>p.bootstrap(b));else{if(!a.instance.ngDoBootstrap)throw new rt(403,"");a.instance.ngDoBootstrap(p)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,"");this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p()),this._injector.get(cr,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(mr(Ya))},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function $1(n,r){return Array.isArray(r)?r.reduce($1,n):{...n,...r}}let nb=(()=>{class n{constructor(a,p,b,C){this._zone=a,this._injector=p,this._exceptionHandler=b,this._initStatus=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new q.y(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),R=new q.y(z=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{ji.assertNotInAngularZone(),vi(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{ji.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{re.unsubscribe(),_e.unsubscribe()}});this.isStable=(0,h.T)(T,R.pipe((0,qe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,p){const b=a instanceof s0;if(!this._initStatus.done)throw!b&&Qh(a),new rt(405,false);let C;C=b?a:this._injector.get(Kh).resolveComponentFactory(a),this.componentTypes.push(C.componentType);const T=function yl(n){return n.isBoundToModule}(C)?void 0:this._injector.get(Fd),z=C.create(Ya.NULL,[],p||C.selector,T),re=z.location.nativeElement,_e=z.injector.get(js,null);return _e?.registerApplication(re),z.onDestroy(()=>{this.detachView(z.hostView),ib(this.components,z),_e?.unregisterApplication(re)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new rt(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const p=a;this._views.push(p),p.attachToAppRef(this)}detachView(a){const p=a;ib(this._views,p),p.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(f,[]).concat(this._bootstrapListeners).forEach(b=>b(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ib(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new rt(406,false);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(a){return new(a||n)(mr(ji),mr(Ya),mr(Ol),mr(ug))},n.\u0275prov=en({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ib(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let W1=!0;function dC(){W1=!1}let hC=(()=>{class n{}return n.__NG_ELEMENT_ID__=pC,n})();function pC(n){return function fC(n,r,a){if(Br(n)&&!a){const p=Hn(n.index,r);return new wf(p,p)}return 47&n.type?new wf(r[16],r):null}(Wn(),N(),16==(16&n))}class Q1{constructor(){}supports(r){return Vm(r)}create(r){return new bC(r)}}const vC=(n,r)=>r;class bC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vC}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,p=this._removalsHead,b=0,C=null;for(;a||p;){const T=!p||a&&a.currentIndex<eC(p,b,C)?a:p,R=eC(T,b,C),z=T.currentIndex;if(T===p)b--,p=p._nextRemoved;else if(a=a._next,null==T.previousIndex)b++;else{C||(C=[]);const re=R-b,_e=z-b;if(re!=_e){for(let yt=0;yt<re;yt++){const jt=yt<C.length?C[yt]:C[yt]=0,mn=jt+yt;_e<=mn&&mn<re&&(C[yt]=jt+1)}C[T.previousIndex]=_e-re}}R!==z&&r(T,R,z)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Vm(r))throw new rt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let b,C,T,a=this._itHead,p=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)C=r[R],T=this._trackByFn(R,C),null!==a&&Object.is(a.trackById,T)?(p&&(a=this._verifyReinsertion(a,C,T,R)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,T,R),p=!0),a=a._next}else b=0,function c1(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[Pd()]();let p;for(;!(p=a.next()).done;)r(p.value)}}(r,R=>{T=this._trackByFn(b,R),null!==a&&Object.is(a.trackById,T)?(p&&(a=this._verifyReinsertion(a,R,T,b)),Object.is(a.item,R)||this._addIdentityChange(a,R)):(a=this._mismatch(a,R,T,b),p=!0),a=a._next,b++}),this.length=b;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,p,b){let C;return null===r?C=this._itTail:(C=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,C,b)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(p,b))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,C,b)):r=this._addAfter(new xC(a,p),C,b),r}_verifyReinsertion(r,a,p,b){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null);return null!==C?r=this._reinsertAfter(C,r._prev,b):r.currentIndex!=b&&(r.currentIndex=b,this._addToMoves(r,b)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,p){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const b=r._prevRemoved,C=r._nextRemoved;return null===b?this._removalsHead=C:b._nextRemoved=C,null===C?this._removalsTail=b:C._prevRemoved=b,this._insertAfter(r,a,p),this._addToMoves(r,p),r}_moveAfter(r,a,p){return this._unlink(r),this._insertAfter(r,a,p),this._addToMoves(r,p),r}_addAfter(r,a,p){return this._insertAfter(r,a,p),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,p){const b=null===a?this._itHead:a._next;return r._next=b,r._prev=a,null===b?this._itTail=r:b._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new J1),this._linkedRecords.put(r),r.currentIndex=p,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,p=r._next;return null===a?this._itHead=p:a._next=p,null===p?this._itTail=a:p._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new J1),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class xC{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let p;for(p=this._head;null!==p;p=p._nextDup)if((null===a||a<=p.currentIndex)&&Object.is(p.trackById,r))return p;return null}remove(r){const a=r._prevDup,p=r._nextDup;return null===a?this._head=p:a._nextDup=p,null===p?this._tail=a:p._prevDup=a,null===this._head}}class J1{constructor(){this.map=new Map}put(r){const a=r.trackById;let p=this.map.get(a);p||(p=new wC,this.map.set(a,p)),p.add(r)}get(r,a){const b=this.map.get(r);return b?b.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eC(n,r,a){const p=n.previousIndex;if(null===p)return p;let b=0;return a&&p<a.length&&(b=a[p]),p+r+b}class tC{constructor(){}supports(r){return r instanceof Map||p_(r)}create(){return new CC}}class CC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||p_(r)))throw new rt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(p,b)=>{if(a&&a.key===b)this._maybeAddToChanges(a,p),this._appendAfter=a,a=a._next;else{const C=this._getOrCreateRecordForKey(b,p);a=this._insertBeforeOrAppend(a,C)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let p=a;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const p=r._prev;return a._next=r,a._prev=p,r._prev=a,p&&(p._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const b=this._records.get(r);this._maybeAddToChanges(b,a);const C=b._prev,T=b._next;return C&&(C._next=T),T&&(T._prev=C),b._next=null,b._prev=null,b}const p=new EC(r);return this._records.set(r,p),p.currentValue=a,this._addToAdditions(p),p}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(p=>a(r[p],p))}}class EC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nC(){return new Zw([new Q1])}let Zw=(()=>{class n{constructor(a){this.factories=a}static create(a,p){if(null!=p){const b=p.factories.slice();a=a.concat(b)}return new n(a)}static extend(a){return{provide:n,useFactory:p=>n.create(a,p||nC()),deps:[[n,new Zo,new To]]}}find(a){const p=this.factories.find(b=>b.supports(a));if(null!=p)return p;throw new rt(901,"")}}return n.\u0275prov=en({token:n,providedIn:"root",factory:nC}),n})();function iC(){return new Ww([new tC])}let Ww=(()=>{class n{constructor(a){this.factories=a}static create(a,p){if(p){const b=p.factories.slice();a=a.concat(b)}return new n(a)}static extend(a){return{provide:n,useFactory:p=>n.create(a,p||iC()),deps:[[n,new Zo,new To]]}}find(a){const p=this.factories.find(C=>C.supports(a));if(p)return p;throw new rt(901,"")}}return n.\u0275prov=en({token:n,providedIn:"root",factory:iC}),n})();const SC=ma(null,"core",[]);let TC=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(mr(nb))},n.\u0275mod=Rt({type:n}),n.\u0275inj=It({}),n})();function AC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Cf:()=>vt,F:()=>Yi,Fj:()=>st,JJ:()=>Ln,JU:()=>ye,On:()=>Hs,Zs:()=>fo,a5:()=>hi,kI:()=>Tn,sg:()=>Ps,u5:()=>di});var I=U(4650),l=U(6895),q=U(2076),h=U(4128),qe=U(4004);let Ne=(()=>{class te{constructor(G,Ee){this._renderer=G,this._elementRef=Ee,this.onChange=kt=>{},this.onTouched=()=>{}}setProperty(G,Ee){this._renderer.setProperty(this._elementRef.nativeElement,G,Ee)}registerOnTouched(G){this.onTouched=G}registerOnChange(G){this.onChange=G}setDisabledState(G){this.setProperty("disabled",G)}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(I.Qsj),I.Y36(I.SBq))},te.\u0275dir=I.lG2({type:te}),te})(),ze=(()=>{class te extends Ne{}return te.\u0275fac=function(){let N;return function(Ee){return(N||(N=I.n5z(te)))(Ee||te)}}(),te.\u0275dir=I.lG2({type:te,features:[I.qOj]}),te})();const ye=new I.OlP("NgValueAccessor"),tt={provide:ye,useExisting:(0,I.Gpc)(()=>st),multi:!0},dt=new I.OlP("CompositionEventMode");let st=(()=>{class te extends Ne{constructor(G,Ee,kt){super(G,Ee),this._compositionMode=kt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ue(){const te=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(te.toLowerCase())}())}writeValue(G){this.setProperty("value",G??"")}_handleInput(G){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(G)}_compositionStart(){this._composing=!0}_compositionEnd(G){this._composing=!1,this._compositionMode&&this.onChange(G)}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(dt,8))},te.\u0275dir=I.lG2({type:te,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(G,Ee){1&G&&I.NdJ("input",function(Wn){return Ee._handleInput(Wn.target.value)})("blur",function(){return Ee.onTouched()})("compositionstart",function(){return Ee._compositionStart()})("compositionend",function(Wn){return Ee._compositionEnd(Wn.target.value)})},features:[I._Bn([tt]),I.qOj]}),te})();function rt(te){return null==te||("string"==typeof te||Array.isArray(te))&&0===te.length}function At(te){return null!=te&&"number"==typeof te.length}const vt=new I.OlP("NgValidators"),Zt=new I.OlP("NgAsyncValidators"),vn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tn{static min(N){return function Bt(te){return N=>{if(rt(N.value)||rt(te))return null;const G=parseFloat(N.value);return!isNaN(G)&&G<te?{min:{min:te,actual:N.value}}:null}}(N)}static max(N){return function ke(te){return N=>{if(rt(N.value)||rt(te))return null;const G=parseFloat(N.value);return!isNaN(G)&&G>te?{max:{max:te,actual:N.value}}:null}}(N)}static required(N){return $e(N)}static requiredTrue(N){return sn(N)}static email(N){return function Gt(te){return rt(te.value)||vn.test(te.value)?null:{email:!0}}(N)}static minLength(N){return function $t(te){return N=>rt(N.value)||!At(N.value)?null:N.value.length<te?{minlength:{requiredLength:te,actualLength:N.value.length}}:null}(N)}static maxLength(N){return function dn(te){return N=>At(N.value)&&N.value.length>te?{maxlength:{requiredLength:te,actualLength:N.value.length}}:null}(N)}static pattern(N){return function bt(te){if(!te)return Mt;let N,G;return"string"==typeof te?(G="","^"!==te.charAt(0)&&(G+="^"),G+=te,"$"!==te.charAt(te.length-1)&&(G+="$"),N=new RegExp(G)):(G=te.toString(),N=te),Ee=>{if(rt(Ee.value))return null;const kt=Ee.value;return N.test(kt)?null:{pattern:{requiredPattern:G,actualValue:kt}}}}(N)}static nullValidator(N){return null}static compose(N){return gi(N)}static composeAsync(N){return wi(N)}}function $e(te){return rt(te.value)?{required:!0}:null}function sn(te){return!0===te.value?null:{required:!0}}function Mt(te){return null}function Ot(te){return null!=te}function Ht(te){const N=(0,I.QGY)(te)?(0,q.D)(te):te;return(0,I.CqO)(N),N}function zt(te){let N={};return te.forEach(G=>{N=null!=G?{...N,...G}:N}),0===Object.keys(N).length?null:N}function Jt(te,N){return N.map(G=>G(te))}function Rn(te){return te.map(N=>function Nn(te){return!te.validate}(N)?N:G=>N.validate(G))}function gi(te){if(!te)return null;const N=te.filter(Ot);return 0==N.length?null:function(G){return zt(Jt(G,N))}}function bn(te){return null!=te?gi(Rn(te)):null}function wi(te){if(!te)return null;const N=te.filter(Ot);return 0==N.length?null:function(G){const Ee=Jt(G,N).map(Ht);return(0,h.D)(Ee).pipe((0,qe.U)(zt))}}function Pi(te){return null!=te?wi(Rn(te)):null}function li(te,N){return null===te?[N]:Array.isArray(te)?[...te,N]:[te,N]}function en(te){return te._rawValidators}function si(te){return te._rawAsyncValidators}function It(te){return te?Array.isArray(te)?te:[te]:[]}function Vt(te,N){return Array.isArray(te)?te.includes(N):te===N}function xn(te,N){const G=It(N);return It(te).forEach(kt=>{Vt(G,kt)||G.push(kt)}),G}function Dn(te,N){return It(N).filter(G=>!Vt(te,G))}class jn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=bn(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=Pi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N){this.control&&this.control.reset(N)}hasError(N,G){return!!this.control&&this.control.hasError(N,G)}getError(N,G){return this.control?this.control.getError(N,G):null}}class wn extends jn{get formDirective(){return null}get path(){return null}}class hi extends jn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Ln=(()=>{class te extends class Fi{constructor(N){this._cd=N}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(G){super(G)}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(hi,2))},te.\u0275dir=I.lG2({type:te,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(G,Ee){2&G&&I.ekj("ng-untouched",Ee.isUntouched)("ng-touched",Ee.isTouched)("ng-pristine",Ee.isPristine)("ng-dirty",Ee.isDirty)("ng-valid",Ee.isValid)("ng-invalid",Ee.isInvalid)("ng-pending",Ee.isPending)},features:[I.qOj]}),te})();const ni="VALID",wt="INVALID",mt="PENDING",lt="DISABLED";function je(te){return(Rt(te)?te.validators:te)||null}function Qe(te){return Array.isArray(te)?bn(te):te||null}function Be(te,N){return(Rt(N)?N.asyncValidators:te)||null}function ft(te){return Array.isArray(te)?Pi(te):te||null}function Rt(te){return null!=te&&!Array.isArray(te)&&"object"==typeof te}class oe{constructor(N,G){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=N,this._rawAsyncValidators=G,this._composedValidatorFn=Qe(this._rawValidators),this._composedAsyncValidatorFn=ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===ni}get invalid(){return this.status===wt}get pending(){return this.status==mt}get disabled(){return this.status===lt}get enabled(){return this.status!==lt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._rawValidators=N,this._composedValidatorFn=Qe(N)}setAsyncValidators(N){this._rawAsyncValidators=N,this._composedAsyncValidatorFn=ft(N)}addValidators(N){this.setValidators(xn(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(xn(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators(Dn(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators(Dn(N,this._rawAsyncValidators))}hasValidator(N){return Vt(this._rawValidators,N)}hasAsyncValidator(N){return Vt(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(G=>{G.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(G=>{G.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=mt,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const G=this._parentMarkedDirty(N.onlySelf);this.status=lt,this.errors=null,this._forEachChild(Ee=>{Ee.disable({...N,onlySelf:!0})}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...N,skipPristineCheck:G}),this._onDisabledChange.forEach(Ee=>Ee(!0))}enable(N={}){const G=this._parentMarkedDirty(N.onlySelf);this.status=ni,this._forEachChild(Ee=>{Ee.enable({...N,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors({...N,skipPristineCheck:G}),this._onDisabledChange.forEach(Ee=>Ee(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}getRawValue(){return this.value}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ni||this.status===mt)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(G=>G._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lt:ni}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=mt,this._hasOwnPendingAsyncValidator=!0;const G=Ht(this.asyncValidator(this));this._asyncValidationSubscription=G.subscribe(Ee=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Ee,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,G={}){this.errors=N,this._updateControlsErrors(!1!==G.emitEvent)}get(N){let G=N;return null==G||(Array.isArray(G)||(G=G.split(".")),0===G.length)?null:G.reduce((Ee,kt)=>Ee&&Ee._find(kt),this)}getError(N,G){const Ee=G?this.get(G):this;return Ee&&Ee.errors?Ee.errors[N]:null}hasError(N,G){return!!this.getError(N,G)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new I.vpe,this.statusChanges=new I.vpe}_calculateStatus(){return this._allControlsDisabled()?lt:this.errors?wt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mt)?mt:this._anyControlsHaveStatus(wt)?wt:ni}_anyControlsHaveStatus(N){return this._anyControls(G=>G.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){Rt(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(N){return null}}class Se extends oe{constructor(N,G,Ee){super(je(G),Be(Ee,G)),this.controls=N,this._initObservables(),this._setUpdateStrategy(G),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(N,G){return this.controls[N]?this.controls[N]:(this.controls[N]=G,G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange),G)}addControl(N,G,Ee={}){this.registerControl(N,G),this.updateValueAndValidity({emitEvent:Ee.emitEvent}),this._onCollectionChange()}removeControl(N,G={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}setControl(N,G,Ee={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],G&&this.registerControl(N,G),this.updateValueAndValidity({emitEvent:Ee.emitEvent}),this._onCollectionChange()}contains(N){return this.controls.hasOwnProperty(N)&&this.controls[N].enabled}setValue(N,G={}){(function ee(te,N,G){te._forEachChild((Ee,kt)=>{if(void 0===G[kt])throw new I.vHH(1002,"")})})(this,0,N),Object.keys(N).forEach(Ee=>{(function he(te,N,G){const Ee=te.controls;if(!(N?Object.keys(Ee):Ee).length)throw new I.vHH(1e3,"");if(!Ee[G])throw new I.vHH(1001,"")})(this,!0,Ee),this.controls[Ee].setValue(N[Ee],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G)}patchValue(N,G={}){null!=N&&(Object.keys(N).forEach(Ee=>{const kt=this.controls[Ee];kt&&kt.patchValue(N[Ee],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G))}reset(N={},G={}){this._forEachChild((Ee,kt)=>{Ee.reset(N[kt],{onlySelf:!0,emitEvent:G.emitEvent})}),this._updatePristine(G),this._updateTouched(G),this.updateValueAndValidity(G)}getRawValue(){return this._reduceChildren({},(N,G,Ee)=>(N[Ee]=G.getRawValue(),N))}_syncPendingControls(){let N=this._reduceChildren(!1,(G,Ee)=>!!Ee._syncPendingControls()||G);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){Object.keys(this.controls).forEach(G=>{const Ee=this.controls[G];Ee&&N(Ee,G)})}_setUpControls(){this._forEachChild(N=>{N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(N){for(const[G,Ee]of Object.entries(this.controls))if(this.contains(G)&&N(Ee))return!0;return!1}_reduceValue(){return this._reduceChildren({},(G,Ee,kt)=>((Ee.enabled||this.disabled)&&(G[kt]=Ee.value),G))}_reduceChildren(N,G){let Ee=N;return this._forEachChild((kt,Wn)=>{Ee=G(Ee,kt,Wn)}),Ee}_allControlsDisabled(){for(const N of Object.keys(this.controls))if(this.controls[N].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(N){return this.controls.hasOwnProperty(N)?this.controls[N]:null}}function He(te,N){Me(te,N),N.valueAccessor.writeValue(te.value),te.disabled&&N.valueAccessor.setDisabledState?.(!0),function We(te,N){N.valueAccessor.registerOnChange(G=>{te._pendingValue=G,te._pendingChange=!0,te._pendingDirty=!0,"change"===te.updateOn&&Fn(te,N)})}(te,N),function Gn(te,N){const G=(Ee,kt)=>{N.valueAccessor.writeValue(Ee),kt&&N.viewToModelUpdate(Ee)};te.registerOnChange(G),N._registerOnDestroy(()=>{te._unregisterOnChange(G)})}(te,N),function Xt(te,N){N.valueAccessor.registerOnTouched(()=>{te._pendingTouched=!0,"blur"===te.updateOn&&te._pendingChange&&Fn(te,N),"submit"!==te.updateOn&&te.markAsTouched()})}(te,N),function De(te,N){if(N.valueAccessor.setDisabledState){const G=Ee=>{N.valueAccessor.setDisabledState(Ee)};te.registerOnDisabledChange(G),N._registerOnDestroy(()=>{te._unregisterOnDisabledChange(G)})}}(te,N)}function Dt(te,N,G=!0){const Ee=()=>{};N.valueAccessor&&(N.valueAccessor.registerOnChange(Ee),N.valueAccessor.registerOnTouched(Ee)),ue(te,N),te&&(N._invokeOnDestroyCallbacks(),te._registerOnCollectionChange(()=>{}))}function Fe(te,N){te.forEach(G=>{G.registerOnValidatorChange&&G.registerOnValidatorChange(N)})}function Me(te,N){const G=en(te);null!==N.validator?te.setValidators(li(G,N.validator)):"function"==typeof G&&te.setValidators([G]);const Ee=si(te);null!==N.asyncValidator?te.setAsyncValidators(li(Ee,N.asyncValidator)):"function"==typeof Ee&&te.setAsyncValidators([Ee]);const kt=()=>te.updateValueAndValidity();Fe(N._rawValidators,kt),Fe(N._rawAsyncValidators,kt)}function ue(te,N){let G=!1;if(null!==te){if(null!==N.validator){const kt=en(te);if(Array.isArray(kt)&&kt.length>0){const Wn=kt.filter(Zr=>Zr!==N.validator);Wn.length!==kt.length&&(G=!0,te.setValidators(Wn))}}if(null!==N.asyncValidator){const kt=si(te);if(Array.isArray(kt)&&kt.length>0){const Wn=kt.filter(Zr=>Zr!==N.asyncValidator);Wn.length!==kt.length&&(G=!0,te.setAsyncValidators(Wn))}}}const Ee=()=>{};return Fe(N._rawValidators,Ee),Fe(N._rawAsyncValidators,Ee),G}function Fn(te,N){te._pendingDirty&&te.markAsDirty(),te.setValue(te._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(te._pendingValue),te._pendingChange=!1}function An(te,N){Me(te,N)}function Lr(te,N){te._syncPendingControls(),N.forEach(G=>{const Ee=G.control;"submit"===Ee.updateOn&&Ee._pendingChange&&(G.viewToModelUpdate(Ee._pendingValue),Ee._pendingChange=!1)})}const wo={provide:wn,useExisting:(0,I.Gpc)(()=>Yi)},dr=(()=>Promise.resolve(null))();let Yi=(()=>{class te extends wn{constructor(G,Ee){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new I.vpe,this.form=new Se({},bn(G),Pi(Ee))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(G){dr.then(()=>{const Ee=this._findContainer(G.path);G.control=Ee.registerControl(G.name,G.control),He(G.control,G),G.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(G)})}getControl(G){return this.form.get(G.path)}removeControl(G){dr.then(()=>{const Ee=this._findContainer(G.path);Ee&&Ee.removeControl(G.name),this._directives.delete(G)})}addFormGroup(G){dr.then(()=>{const Ee=this._findContainer(G.path),kt=new Se({});An(kt,G),Ee.registerControl(G.name,kt),kt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(G){dr.then(()=>{const Ee=this._findContainer(G.path);Ee&&Ee.removeControl(G.name)})}getFormGroup(G){return this.form.get(G.path)}updateModel(G,Ee){dr.then(()=>{this.form.get(G.path).setValue(Ee)})}setValue(G){this.control.setValue(G)}onSubmit(G){return this.submitted=!0,Lr(this.form,this._directives),this.ngSubmit.emit(G),!1}onReset(){this.resetForm()}resetForm(G){this.form.reset(G),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(G){return G.pop(),G.length?this.form.get(G):this.form}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(vt,10),I.Y36(Zt,10))},te.\u0275dir=I.lG2({type:te,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(G,Ee){1&G&&I.NdJ("submit",function(Wn){return Ee.onSubmit(Wn)})("reset",function(){return Ee.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[I._Bn([wo]),I.qOj]}),te})();function ss(te,N){const G=te.indexOf(N);G>-1&&te.splice(G,1)}function Jo(te){return"object"==typeof te&&null!==te&&2===Object.keys(te).length&&"value"in te&&"disabled"in te}const yr=class extends oe{constructor(N=null,G,Ee){super(je(G),Be(Ee,G)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(G),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rt(G)&&(G.nonNullable||G.initialValueIsDefault)&&(this.defaultValue=Jo(N)?N.value:N)}setValue(N,G={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==G.emitModelToViewChange&&this._onChange.forEach(Ee=>Ee(this.value,!1!==G.emitViewToModelChange)),this.updateValueAndValidity(G)}patchValue(N,G={}){this.setValue(N,G)}reset(N=this.defaultValue,G={}){this._applyFormState(N),this.markAsPristine(G),this.markAsUntouched(G),this.setValue(this.value,G),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){ss(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){ss(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){Jo(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}},As={provide:hi,useExisting:(0,I.Gpc)(()=>Hs)},xr=(()=>Promise.resolve(null))();let Hs=(()=>{class te extends hi{constructor(G,Ee,kt,Wn,Zr){super(),this._changeDetectorRef=Zr,this.control=new yr,this._registered=!1,this.update=new I.vpe,this._parent=G,this._setValidators(Ee),this._setAsyncValidators(kt),this.valueAccessor=function pi(te,N){if(!N)return null;let G,Ee,kt;return Array.isArray(N),N.forEach(Wn=>{Wn.constructor===st?G=Wn:function or(te){return Object.getPrototypeOf(te.constructor)===ze}(Wn)?Ee=Wn:kt=Wn}),kt||Ee||G||null}(0,Wn)}ngOnChanges(G){if(this._checkForErrors(),!this._registered||"name"in G){if(this._registered&&(this._checkName(),this.formDirective)){const Ee=G.name.previousValue;this.formDirective.removeControl({name:Ee,path:this._getPath(Ee)})}this._setUpControl()}"isDisabled"in G&&this._updateDisabled(G),function ui(te,N){if(!te.hasOwnProperty("model"))return!1;const G=te.model;return!!G.isFirstChange()||!Object.is(N,G.currentValue)}(G,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){He(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(G){xr.then(()=>{this.control.setValue(G,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(G){const Ee=G.isDisabled.currentValue,kt=0!==Ee&&(0,I.D6c)(Ee);xr.then(()=>{kt&&!this.control.disabled?this.control.disable():!kt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(G){return this._parent?function ot(te,N){return[...N.path,te]}(G,this._parent):[G]}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(wn,9),I.Y36(vt,10),I.Y36(Zt,10),I.Y36(ye,10),I.Y36(I.sBO,8))},te.\u0275dir=I.lG2({type:te,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[I._Bn([As]),I.qOj,I.TTD]}),te})(),ga=(()=>{class te{}return te.\u0275fac=function(G){return new(G||te)},te.\u0275mod=I.oAB({type:te}),te.\u0275inj=I.cJS({}),te})();const _a={provide:wn,useExisting:(0,I.Gpc)(()=>Ps)};let Ps=(()=>{class te extends wn{constructor(G,Ee){super(),this.validators=G,this.asyncValidators=Ee,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new I.vpe,this._setValidators(G),this._setAsyncValidators(Ee)}ngOnChanges(G){this._checkFormPresent(),G.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ue(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(G){const Ee=this.form.get(G.path);return He(Ee,G),Ee.updateValueAndValidity({emitEvent:!1}),this.directives.push(G),Ee}getControl(G){return this.form.get(G.path)}removeControl(G){Dt(G.control||null,G,!1),function Gs(te,N){const G=te.indexOf(N);G>-1&&te.splice(G,1)}(this.directives,G)}addFormGroup(G){this._setUpFormContainer(G)}removeFormGroup(G){this._cleanUpFormContainer(G)}getFormGroup(G){return this.form.get(G.path)}addFormArray(G){this._setUpFormContainer(G)}removeFormArray(G){this._cleanUpFormContainer(G)}getFormArray(G){return this.form.get(G.path)}updateModel(G,Ee){this.form.get(G.path).setValue(Ee)}onSubmit(G){return this.submitted=!0,Lr(this.form,this.directives),this.ngSubmit.emit(G),!1}onReset(){this.resetForm()}resetForm(G){this.form.reset(G),this.submitted=!1}_updateDomValue(){this.directives.forEach(G=>{const Ee=G.control,kt=this.form.get(G.path);Ee!==kt&&(Dt(Ee||null,G),(te=>te instanceof yr)(kt)&&(He(kt,G),G.control=kt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(G){const Ee=this.form.get(G.path);An(Ee,G),Ee.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(G){if(this.form){const Ee=this.form.get(G.path);Ee&&function Ci(te,N){return ue(te,N)}(Ee,G)&&Ee.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Me(this.form,this),this._oldForm&&ue(this._oldForm,this)}_checkFormPresent(){}}return te.\u0275fac=function(G){return new(G||te)(I.Y36(vt,10),I.Y36(Zt,10))},te.\u0275dir=I.lG2({type:te,selectors:[["","formGroup",""]],hostBindings:function(G,Ee){1&G&&I.NdJ("submit",function(Wn){return Ee.onSubmit(Wn)})("reset",function(){return Ee.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[I._Bn([_a]),I.qOj,I.TTD]}),te})(),ls=(()=>{class te{constructor(){this._validator=Mt}ngOnChanges(G){if(this.inputName in G){const Ee=this.normalizeInput(G[this.inputName].currentValue);this._enabled=this.enabled(Ee),this._validator=this._enabled?this.createValidator(Ee):Mt,this._onChange&&this._onChange()}}validate(G){return this._validator(G)}registerOnValidatorChange(G){this._onChange=G}enabled(G){return null!=G}}return te.\u0275fac=function(G){return new(G||te)},te.\u0275dir=I.lG2({type:te,features:[I.TTD]}),te})();const bl={provide:vt,useExisting:(0,I.Gpc)(()=>Ls),multi:!0},Qi={provide:vt,useExisting:(0,I.Gpc)(()=>fo),multi:!0};let Ls=(()=>{class te extends ls{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=I.D6c,this.createValidator=G=>$e}enabled(G){return G}}return te.\u0275fac=function(){let N;return function(Ee){return(N||(N=I.n5z(te)))(Ee||te)}}(),te.\u0275dir=I.lG2({type:te,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(G,Ee){2&G&&I.uIk("required",Ee._enabled?"":null)},inputs:{required:"required"},features:[I._Bn([bl]),I.qOj]}),te})(),fo=(()=>{class te extends Ls{constructor(){super(...arguments),this.createValidator=G=>sn}}return te.\u0275fac=function(){let N;return function(Ee){return(N||(N=I.n5z(te)))(Ee||te)}}(),te.\u0275dir=I.lG2({type:te,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(G,Ee){2&G&&I.uIk("required",Ee._enabled?"":null)},features:[I._Bn([Qi]),I.qOj]}),te})(),lr=(()=>{class te{}return te.\u0275fac=function(G){return new(G||te)},te.\u0275mod=I.oAB({type:te}),te.\u0275inj=I.cJS({imports:[ga]}),te})(),di=(()=>{class te{}return te.\u0275fac=function(G){return new(G||te)},te.\u0275mod=I.oAB({type:te}),te.\u0275inj=I.cJS({imports:[lr]}),te})()},4859:(Sn,Ct,U)=>{"use strict";U.d(Ct,{lW:()=>Ce,ot:()=>Ue,zs:()=>tt});var I=U(4650),l=U(3238),q=U(2687);const h=["mat-button",""],qe=["*"],ye=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],me=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(dt){this._elementRef=dt}})));let Ce=(()=>{class dt extends me{constructor(rt,At,vt){super(rt),this._focusMonitor=At,this._animationMode=vt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Zt of ye)this._hasHostAttributes(Zt)&&this._getHostElement().classList.add(Zt);rt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(rt,At){rt?this._focusMonitor.focusVia(this._getHostElement(),rt,At):this._getHostElement().focus(At)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...rt){return rt.some(At=>this._getHostElement().hasAttribute(At))}}return dt.\u0275fac=function(rt){return new(rt||dt)(I.Y36(I.SBq),I.Y36(q.tE),I.Y36(I.QbO,8))},dt.\u0275cmp=I.Xpm({type:dt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(rt,At){if(1&rt&&I.Gf(l.wG,5),2&rt){let vt;I.iGM(vt=I.CRH())&&(At.ripple=vt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(rt,At){2&rt&&(I.uIk("disabled",At.disabled||null),I.ekj("_mat-animation-noopable","NoopAnimations"===At._animationMode)("mat-button-disabled",At.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[I.qOj],attrs:h,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(rt,At){1&rt&&(I.F$t(),I.TgZ(0,"span",0),I.Hsn(1),I.qZA(),I._UZ(2,"span",1)(3,"span",2)),2&rt&&(I.xp6(2),I.ekj("mat-button-ripple-round",At.isRoundButton||At.isIconButton),I.Q6J("matRippleDisabled",At._isRippleDisabled())("matRippleCentered",At.isIconButton)("matRippleTrigger",At._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}"],encapsulation:2,changeDetection:0}),dt})(),tt=(()=>{class dt extends Ce{constructor(rt,At,vt,Zt){super(At,rt,vt),this._ngZone=Zt,this._haltDisabledEvents=vn=>{this.disabled&&(vn.preventDefault(),vn.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return dt.\u0275fac=function(rt){return new(rt||dt)(I.Y36(q.tE),I.Y36(I.SBq),I.Y36(I.QbO,8),I.Y36(I.R0b,8))},dt.\u0275cmp=I.Xpm({type:dt,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(rt,At){2&rt&&(I.uIk("tabindex",At.disabled?-1:At.tabIndex)("disabled",At.disabled||null)("aria-disabled",At.disabled.toString()),I.ekj("_mat-animation-noopable","NoopAnimations"===At._animationMode)("mat-button-disabled",At.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[I.qOj],attrs:h,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(rt,At){1&rt&&(I.F$t(),I.TgZ(0,"span",0),I.Hsn(1),I.qZA(),I._UZ(2,"span",1)(3,"span",2)),2&rt&&(I.xp6(2),I.ekj("mat-button-ripple-round",At.isRoundButton||At.isIconButton),I.Q6J("matRippleDisabled",At._isRippleDisabled())("matRippleCentered",At.isIconButton)("matRippleTrigger",At._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}"],encapsulation:2,changeDetection:0}),dt})(),Ue=(()=>{class dt{}return dt.\u0275fac=function(rt){return new(rt||dt)},dt.\u0275mod=I.oAB({type:dt}),dt.\u0275inj=I.cJS({imports:[l.si,l.BQ,l.BQ]}),dt})()},3238:(Sn,Ct,U)=>{"use strict";U.d(Ct,{rD:()=>It,K7:()=>Nt,HF:()=>W,BQ:()=>ke,X2:()=>Vt,uc:()=>jn,ey:()=>mi,Ng:()=>ni,nP:()=>$,us:()=>V,wG:()=>nt,si:()=>ne,CB:()=>$n,jH:()=>kn,pj:()=>dn,Kr:()=>bt,Id:()=>$t,FD:()=>Ot,dB:()=>Ht,sb:()=>Mt,E0:()=>xn});var I=U(4650),l=U(2687),q=U(445),qe=U(6895),Ne=U(3353),ze=U(1281),ye=U(8306),me=U(7579),Ce=U(8675),tt=U(9521);function st(wt,mt){if(1&wt&&I._UZ(0,"mat-pseudo-checkbox",4),2&wt){const lt=I.oxw();I.Q6J("state",lt.selected?"checked":"unchecked")("disabled",lt.disabled)}}function rt(wt,mt){if(1&wt&&(I.TgZ(0,"span",5),I._uU(1),I.qZA()),2&wt){const lt=I.oxw();I.xp6(1),I.hij("(",lt.group.label,")")}}const At=["*"],Bt=new I.OlP("mat-sanity-checks",{providedIn:"root",factory:function Tn(){return!0}});let ke=(()=>{class wt{constructor(lt,je,Qe){this._sanityChecks=je,this._document=Qe,this._hasDoneGlobalChecks=!1,lt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(lt){return!(0,Ne.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[lt])}}return wt.\u0275fac=function(lt){return new(lt||wt)(I.LFG(l.qm),I.LFG(Bt,8),I.LFG(qe.K0))},wt.\u0275mod=I.oAB({type:wt}),wt.\u0275inj=I.cJS({imports:[q.vT,q.vT]}),wt})();function $t(wt){return class extends wt{constructor(...mt){super(...mt),this._disabled=!1}get disabled(){return this._disabled}set disabled(mt){this._disabled=(0,ze.Ig)(mt)}}}function dn(wt,mt){return class extends wt{constructor(...lt){super(...lt),this.defaultColor=mt,this.color=mt}get color(){return this._color}set color(lt){const je=lt||this.defaultColor;je!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),je&&this._elementRef.nativeElement.classList.add(`mat-${je}`),this._color=je)}}}function bt(wt){return class extends wt{constructor(...mt){super(...mt),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(mt){this._disableRipple=(0,ze.Ig)(mt)}}}function Mt(wt,mt=0){return class extends wt{constructor(...lt){super(...lt),this._tabIndex=mt,this.defaultTabIndex=mt}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(lt){this._tabIndex=null!=lt?(0,ze.su)(lt):this.defaultTabIndex}}}function Ot(wt){return class extends wt{constructor(...mt){super(...mt),this.errorState=!1}updateErrorState(){const mt=this.errorState,Be=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Be!==mt&&(this.errorState=Be,this.stateChanges.next())}}}function Ht(wt){return class extends wt{constructor(...mt){super(...mt),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new ye.y(lt=>{this._isInitialized?this._notifySubscriber(lt):this._pendingSubscribers.push(lt)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(mt){mt.next(),mt.complete()}}}let It=(()=>{class wt{isErrorState(lt,je){return!!(lt&&lt.invalid&&(lt.touched||je&&je.submitted))}}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275prov=I.Yz7({token:wt,factory:wt.\u0275fac,providedIn:"root"}),wt})(),Vt=(()=>{class wt{}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275dir=I.lG2({type:wt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),wt})();function xn(wt,mt,lt="mat"){wt.changes.pipe((0,Ce.O)(wt)).subscribe(({length:je})=>{Dn(mt,`${lt}-2-line`,!1),Dn(mt,`${lt}-3-line`,!1),Dn(mt,`${lt}-multi-line`,!1),2===je||3===je?Dn(mt,`${lt}-${je}-line`,!0):je>3&&Dn(mt,`${lt}-multi-line`,!0)})}function Dn(wt,mt,lt){wt.nativeElement.classList.toggle(mt,lt)}let jn=(()=>{class wt{}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275mod=I.oAB({type:wt}),wt.\u0275inj=I.cJS({imports:[ke,ke]}),wt})();class wn{constructor(mt,lt,je,Qe=!1){this._renderer=mt,this.element=lt,this.config=je,this._animationForciblyDisabledThroughCss=Qe,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const hi={enterDuration:225,exitDuration:150},Hi=(0,Ne.i$)({passive:!0}),ur=["mousedown","touchstart"],Ln=["mouseup","mouseleave","touchend","touchcancel"];class pr{constructor(mt,lt,je,Qe){this._target=mt,this._ngZone=lt,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Qe.isBrowser&&(this._containerElement=(0,ze.fI)(je))}fadeInRipple(mt,lt,je={}){const Qe=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Be={...hi,...je.animation};je.centered&&(mt=Qe.left+Qe.width/2,lt=Qe.top+Qe.height/2);const ft=je.radius||function zn(wt,mt,lt){const je=Math.max(Math.abs(wt-lt.left),Math.abs(wt-lt.right)),Qe=Math.max(Math.abs(mt-lt.top),Math.abs(mt-lt.bottom));return Math.sqrt(je*je+Qe*Qe)}(mt,lt,Qe),Rt=mt-Qe.left,he=lt-Qe.top,ee=Be.enterDuration,oe=document.createElement("div");oe.classList.add("mat-ripple-element"),oe.style.left=Rt-ft+"px",oe.style.top=he-ft+"px",oe.style.height=2*ft+"px",oe.style.width=2*ft+"px",null!=je.color&&(oe.style.backgroundColor=je.color),oe.style.transitionDuration=`${ee}ms`,this._containerElement.appendChild(oe);const Se=window.getComputedStyle(oe),Ye=Se.transitionDuration,gt="none"===Se.transitionProperty||"0s"===Ye||"0s, 0s"===Ye,_t=new wn(this,oe,je,gt);oe.style.transform="scale3d(1, 1, 1)",_t.state=0,je.persistent||(this._mostRecentTransientRipple=_t);let ot=null;return!gt&&(ee||Be.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const He=()=>this._finishRippleTransition(_t),Dt=()=>this._destroyRipple(_t);oe.addEventListener("transitionend",He),oe.addEventListener("transitioncancel",Dt),ot={onTransitionEnd:He,onTransitionCancel:Dt}}),this._activeRipples.set(_t,ot),(gt||!ee)&&this._finishRippleTransition(_t),_t}fadeOutRipple(mt){if(2===mt.state||3===mt.state)return;const lt=mt.element,je={...hi,...mt.config.animation};lt.style.transitionDuration=`${je.exitDuration}ms`,lt.style.opacity="0",mt.state=2,(mt._animationForciblyDisabledThroughCss||!je.exitDuration)&&this._finishRippleTransition(mt)}fadeOutAll(){this._getActiveRipples().forEach(mt=>mt.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(mt=>{mt.config.persistent||mt.fadeOut()})}setupTriggerEvents(mt){const lt=(0,ze.fI)(mt);!lt||lt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=lt,this._registerEvents(ur))}handleEvent(mt){"mousedown"===mt.type?this._onMousedown(mt):"touchstart"===mt.type?this._onTouchStart(mt):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ln),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(mt){0===mt.state?this._startFadeOutTransition(mt):2===mt.state&&this._destroyRipple(mt)}_startFadeOutTransition(mt){const lt=mt===this._mostRecentTransientRipple,{persistent:je}=mt.config;mt.state=1,!je&&(!lt||!this._isPointerDown)&&mt.fadeOut()}_destroyRipple(mt){const lt=this._activeRipples.get(mt)??null;this._activeRipples.delete(mt),this._activeRipples.size||(this._containerRect=null),mt===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),mt.state=3,null!==lt&&(mt.element.removeEventListener("transitionend",lt.onTransitionEnd),mt.element.removeEventListener("transitioncancel",lt.onTransitionCancel)),mt.element.remove()}_onMousedown(mt){const lt=(0,l.X6)(mt),je=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!lt&&!je&&(this._isPointerDown=!0,this.fadeInRipple(mt.clientX,mt.clientY,this._target.rippleConfig))}_onTouchStart(mt){if(!this._target.rippleDisabled&&!(0,l.yG)(mt)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const lt=mt.changedTouches;for(let je=0;je<lt.length;je++)this.fadeInRipple(lt[je].clientX,lt[je].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(mt=>{!mt.config.persistent&&(1===mt.state||mt.config.terminateOnPointerUp&&0===mt.state)&&mt.fadeOut()}))}_registerEvents(mt){this._ngZone.runOutsideAngular(()=>{mt.forEach(lt=>{this._triggerElement.addEventListener(lt,this,Hi)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(ur.forEach(mt=>{this._triggerElement.removeEventListener(mt,this,Hi)}),this._pointerUpEventsRegistered&&Ln.forEach(mt=>{this._triggerElement.removeEventListener(mt,this,Hi)}))}}const qt=new I.OlP("mat-ripple-global-options");let nt=(()=>{class wt{constructor(lt,je,Qe,Be,ft){this._elementRef=lt,this._animationMode=ft,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Be||{},this._rippleRenderer=new pr(this,je,lt,Qe)}get disabled(){return this._disabled}set disabled(lt){lt&&this.fadeOutAllNonPersistent(),this._disabled=lt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(lt){this._trigger=lt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(lt,je=0,Qe){return"number"==typeof lt?this._rippleRenderer.fadeInRipple(lt,je,{...this.rippleConfig,...Qe}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...lt})}}return wt.\u0275fac=function(lt){return new(lt||wt)(I.Y36(I.SBq),I.Y36(I.R0b),I.Y36(Ne.t4),I.Y36(qt,8),I.Y36(I.QbO,8))},wt.\u0275dir=I.lG2({type:wt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(lt,je){2&lt&&I.ekj("mat-ripple-unbounded",je.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),wt})(),ne=(()=>{class wt{}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275mod=I.oAB({type:wt}),wt.\u0275inj=I.cJS({imports:[ke,ke]}),wt})(),$=(()=>{class wt{constructor(lt){this._animationMode=lt,this.state="unchecked",this.disabled=!1}}return wt.\u0275fac=function(lt){return new(lt||wt)(I.Y36(I.QbO,8))},wt.\u0275cmp=I.Xpm({type:wt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(lt,je){2&lt&&I.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===je.state)("mat-pseudo-checkbox-checked","checked"===je.state)("mat-pseudo-checkbox-disabled",je.disabled)("_mat-animation-noopable","NoopAnimations"===je._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(lt,je){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),wt})(),V=(()=>{class wt{}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275mod=I.oAB({type:wt}),wt.\u0275inj=I.cJS({imports:[ke]}),wt})();const W=new I.OlP("MAT_OPTION_PARENT_COMPONENT"),Nt=new I.OlP("MatOptgroup");let Cn=0;class Wt{constructor(mt,lt=!1){this.source=mt,this.isUserInput=lt}}let Zn=(()=>{class wt{constructor(lt,je,Qe,Be){this._element=lt,this._changeDetectorRef=je,this._parent=Qe,this.group=Be,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Cn++,this.onSelectionChange=new I.vpe,this._stateChanges=new me.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(lt){this._disabled=(0,ze.Ig)(lt)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(lt,je){const Qe=this._getHostElement();"function"==typeof Qe.focus&&Qe.focus(je)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(lt){(lt.keyCode===tt.K5||lt.keyCode===tt.L_)&&!(0,tt.Vb)(lt)&&(this._selectViaInteraction(),lt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const lt=this.viewValue;lt!==this._mostRecentViewValue&&(this._mostRecentViewValue=lt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(lt=!1){this.onSelectionChange.emit(new Wt(this,lt))}}return wt.\u0275fac=function(lt){I.$Z()},wt.\u0275dir=I.lG2({type:wt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),wt})(),mi=(()=>{class wt extends Zn{constructor(lt,je,Qe,Be){super(lt,je,Qe,Be)}}return wt.\u0275fac=function(lt){return new(lt||wt)(I.Y36(I.SBq),I.Y36(I.sBO),I.Y36(W,8),I.Y36(Nt,8))},wt.\u0275cmp=I.Xpm({type:wt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(lt,je){1&lt&&I.NdJ("click",function(){return je._selectViaInteraction()})("keydown",function(Be){return je._handleKeydown(Be)}),2&lt&&(I.Ikx("id",je.id),I.uIk("tabindex",je._getTabIndex())("aria-selected",je._getAriaSelected())("aria-disabled",je.disabled.toString()),I.ekj("mat-selected",je.selected)("mat-option-multiple",je.multiple)("mat-active",je.active)("mat-option-disabled",je.disabled))},exportAs:["matOption"],features:[I.qOj],ngContentSelectors:At,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(lt,je){1&lt&&(I.F$t(),I.YNc(0,st,1,2,"mat-pseudo-checkbox",0),I.TgZ(1,"span",1),I.Hsn(2),I.qZA(),I.YNc(3,rt,2,1,"span",2),I._UZ(4,"div",3)),2&lt&&(I.Q6J("ngIf",je.multiple),I.xp6(3),I.Q6J("ngIf",je.group&&je.group._inert),I.xp6(1),I.Q6J("matRippleTrigger",je._getHostElement())("matRippleDisabled",je.disabled||je.disableRipple))},dependencies:[nt,qe.O5,$],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],encapsulation:2,changeDetection:0}),wt})();function $n(wt,mt,lt){if(lt.length){let je=mt.toArray(),Qe=lt.toArray(),Be=0;for(let ft=0;ft<wt+1;ft++)je[ft].group&&je[ft].group===Qe[Be]&&Be++;return Be}return 0}function kn(wt,mt,lt,je){return wt<lt?wt:wt+mt>lt+je?Math.max(0,wt-je+mt):lt}let ni=(()=>{class wt{}return wt.\u0275fac=function(lt){return new(lt||wt)},wt.\u0275mod=I.oAB({type:wt}),wt.\u0275inj=I.cJS({imports:[ne,qe.ez,ke,V]}),wt})()},9549:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Eo:()=>Rn,G_:()=>Ln,KE:()=>pr,R9:()=>jn,lN:()=>zn});var I=U(9643),l=U(6895),q=U(4650),h=U(3238),qe=U(445),Ne=U(1281),ze=U(7579),ye=U(6451),me=U(4968),Ce=U(8675),tt=U(2722),Ue=U(5698),dt=U(7340),st=U(3353);const rt=["connectionContainer"],At=["inputContainer"],vt=["label"];function Zt(qt,nt){1&qt&&(q.ynx(0),q.TgZ(1,"div",14),q._UZ(2,"div",15)(3,"div",16)(4,"div",17),q.qZA(),q.TgZ(5,"div",18),q._UZ(6,"div",15)(7,"div",16)(8,"div",17),q.qZA(),q.BQk())}function vn(qt,nt){if(1&qt){const ne=q.EpF();q.TgZ(0,"div",19),q.NdJ("cdkObserveContent",function(){q.CHM(ne);const V=q.oxw();return q.KtG(V.updateOutlineGap())}),q.Hsn(1,1),q.qZA()}if(2&qt){const ne=q.oxw();q.Q6J("cdkObserveContentDisabled","outline"!=ne.appearance)}}function Tn(qt,nt){if(1&qt&&(q.ynx(0),q.Hsn(1,2),q.TgZ(2,"span"),q._uU(3),q.qZA(),q.BQk()),2&qt){const ne=q.oxw(2);q.xp6(3),q.Oqu(ne._control.placeholder)}}function Bt(qt,nt){1&qt&&q.Hsn(0,3,["*ngSwitchCase","true"])}function ke(qt,nt){1&qt&&(q.TgZ(0,"span",23),q._uU(1," *"),q.qZA())}function $e(qt,nt){if(1&qt){const ne=q.EpF();q.TgZ(0,"label",20,21),q.NdJ("cdkObserveContent",function(){q.CHM(ne);const V=q.oxw();return q.KtG(V.updateOutlineGap())}),q.YNc(2,Tn,4,1,"ng-container",12),q.YNc(3,Bt,1,0,"ng-content",12),q.YNc(4,ke,2,0,"span",22),q.qZA()}if(2&qt){const ne=q.oxw();q.ekj("mat-empty",ne._control.empty&&!ne._shouldAlwaysFloat())("mat-form-field-empty",ne._control.empty&&!ne._shouldAlwaysFloat())("mat-accent","accent"==ne.color)("mat-warn","warn"==ne.color),q.Q6J("cdkObserveContentDisabled","outline"!=ne.appearance)("id",ne._labelId)("ngSwitch",ne._hasLabel()),q.uIk("for",ne._control.id)("aria-owns",ne._control.id),q.xp6(2),q.Q6J("ngSwitchCase",!1),q.xp6(1),q.Q6J("ngSwitchCase",!0),q.xp6(1),q.Q6J("ngIf",!ne.hideRequiredMarker&&ne._control.required&&!ne._control.disabled)}}function sn(qt,nt){1&qt&&(q.TgZ(0,"div",24),q.Hsn(1,4),q.qZA())}function Gt(qt,nt){if(1&qt&&(q.TgZ(0,"div",25),q._UZ(1,"span",26),q.qZA()),2&qt){const ne=q.oxw();q.xp6(1),q.ekj("mat-accent","accent"==ne.color)("mat-warn","warn"==ne.color)}}function $t(qt,nt){if(1&qt&&(q.TgZ(0,"div"),q.Hsn(1,5),q.qZA()),2&qt){const ne=q.oxw();q.Q6J("@transitionMessages",ne._subscriptAnimationState)}}function dn(qt,nt){if(1&qt&&(q.TgZ(0,"div",30),q._uU(1),q.qZA()),2&qt){const ne=q.oxw(2);q.Q6J("id",ne._hintLabelId),q.xp6(1),q.Oqu(ne.hintLabel)}}function bt(qt,nt){if(1&qt&&(q.TgZ(0,"div",27),q.YNc(1,dn,2,2,"div",28),q.Hsn(2,6),q._UZ(3,"div",29),q.Hsn(4,7),q.qZA()),2&qt){const ne=q.oxw();q.Q6J("@transitionMessages",ne._subscriptAnimationState),q.xp6(1),q.Q6J("ngIf",ne.hintLabel)}}const Mt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Ot=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],zt=new q.OlP("MatError"),Nn={transitionMessages:(0,dt.X$)("transitionMessages",[(0,dt.SB)("enter",(0,dt.oB)({opacity:1,transform:"translateY(0%)"})),(0,dt.eR)("void => enter",[(0,dt.oB)({opacity:0,transform:"translateY(-5px)"}),(0,dt.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Rn=(()=>{class qt{}return qt.\u0275fac=function(ne){return new(ne||qt)},qt.\u0275dir=q.lG2({type:qt}),qt})();const li=new q.OlP("MatHint");let si=(()=>{class qt{}return qt.\u0275fac=function(ne){return new(ne||qt)},qt.\u0275dir=q.lG2({type:qt,selectors:[["mat-label"]]}),qt})(),It=(()=>{class qt{}return qt.\u0275fac=function(ne){return new(ne||qt)},qt.\u0275dir=q.lG2({type:qt,selectors:[["mat-placeholder"]]}),qt})();const Vt=new q.OlP("MatPrefix"),Dn=new q.OlP("MatSuffix");let jn=(()=>{class qt{}return qt.\u0275fac=function(ne){return new(ne||qt)},qt.\u0275dir=q.lG2({type:qt,selectors:[["","matSuffix",""]],features:[q._Bn([{provide:Dn,useExisting:qt}])]}),qt})(),wn=0;const Hi=(0,h.pj)(class{constructor(qt){this._elementRef=qt}},"primary"),ur=new q.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Ln=new q.OlP("MatFormField");let pr=(()=>{class qt extends Hi{constructor(ne,$,V,W,ce,Ae,Le){super(ne),this._changeDetectorRef=$,this._dir=V,this._defaults=W,this._platform=ce,this._ngZone=Ae,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ze.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+wn++,this._labelId="mat-form-field-label-"+wn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==Le,this.appearance=W?.appearance||"legacy",W&&(this._hideRequiredMarker=Boolean(W.hideRequiredMarker),W.color&&(this.color=this.defaultColor=W.color))}get appearance(){return this._appearance}set appearance(ne){const $=this._appearance;this._appearance=ne||this._defaults?.appearance||"legacy","outline"===this._appearance&&$!==ne&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(ne){this._hideRequiredMarker=(0,Ne.Ig)(ne)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(ne){this._hintLabel=ne,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(ne){ne!==this._floatLabel&&(this._floatLabel=ne||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(ne){this._explicitFormFieldControl=ne}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const ne=this._control;ne.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${ne.controlType}`),ne.stateChanges.pipe((0,Ce.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),ne.ngControl&&ne.ngControl.valueChanges&&ne.ngControl.valueChanges.pipe((0,tt.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,tt.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,ye.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,Ce.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,Ce.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,tt.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(ne){const $=this._control?this._control.ngControl:null;return $&&$[ne]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,me.R)(this._label.nativeElement,"transitionend").pipe((0,Ue.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let ne=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&ne.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const $=this._hintChildren?this._hintChildren.find(W=>"start"===W.align):null,V=this._hintChildren?this._hintChildren.find(W=>"end"===W.align):null;$?ne.push($.id):this._hintLabel&&ne.push(this._hintLabelId),V&&ne.push(V.id)}else this._errorChildren&&ne.push(...this._errorChildren.map($=>$.id));this._control.setDescribedByIds(ne)}}_validateControlChild(){}updateOutlineGap(){const ne=this._label?this._label.nativeElement:null,$=this._connectionContainerRef.nativeElement,V=".mat-form-field-outline-start",W=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!ne||!ne.children.length||!ne.textContent.trim()){const un=$.querySelectorAll(`${V}, ${W}`);for(let Cn=0;Cn<un.length;Cn++)un[Cn].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let ce=0,Ae=0;const Le=$.querySelectorAll(V),Nt=$.querySelectorAll(W);if(this._label&&this._label.nativeElement.children.length){const un=$.getBoundingClientRect();if(0===un.width&&0===un.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Cn=this._getStartEnd(un),Wt=ne.children,Zn=this._getStartEnd(Wt[0].getBoundingClientRect());let mi=0;for(let $n=0;$n<Wt.length;$n++)mi+=Wt[$n].offsetWidth;ce=Math.abs(Zn-Cn)-5,Ae=mi>0?.75*mi+10:0}for(let un=0;un<Le.length;un++)Le[un].style.width=`${ce}px`;for(let un=0;un<Nt.length;un++)Nt[un].style.width=`${Ae}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(ne){return this._dir&&"rtl"===this._dir.value?ne.right:ne.left}_isAttachedToDOM(){const ne=this._elementRef.nativeElement;if(ne.getRootNode){const $=ne.getRootNode();return $&&$!==ne}return document.documentElement.contains(ne)}}return qt.\u0275fac=function(ne){return new(ne||qt)(q.Y36(q.SBq),q.Y36(q.sBO),q.Y36(qe.Is,8),q.Y36(ur,8),q.Y36(st.t4),q.Y36(q.R0b),q.Y36(q.QbO,8))},qt.\u0275cmp=q.Xpm({type:qt,selectors:[["mat-form-field"]],contentQueries:function(ne,$,V){if(1&ne&&(q.Suo(V,Rn,5),q.Suo(V,Rn,7),q.Suo(V,si,5),q.Suo(V,si,7),q.Suo(V,It,5),q.Suo(V,zt,5),q.Suo(V,li,5),q.Suo(V,Vt,5),q.Suo(V,Dn,5)),2&ne){let W;q.iGM(W=q.CRH())&&($._controlNonStatic=W.first),q.iGM(W=q.CRH())&&($._controlStatic=W.first),q.iGM(W=q.CRH())&&($._labelChildNonStatic=W.first),q.iGM(W=q.CRH())&&($._labelChildStatic=W.first),q.iGM(W=q.CRH())&&($._placeholderChild=W.first),q.iGM(W=q.CRH())&&($._errorChildren=W),q.iGM(W=q.CRH())&&($._hintChildren=W),q.iGM(W=q.CRH())&&($._prefixChildren=W),q.iGM(W=q.CRH())&&($._suffixChildren=W)}},viewQuery:function(ne,$){if(1&ne&&(q.Gf(rt,7),q.Gf(At,5),q.Gf(vt,5)),2&ne){let V;q.iGM(V=q.CRH())&&($._connectionContainerRef=V.first),q.iGM(V=q.CRH())&&($._inputContainerRef=V.first),q.iGM(V=q.CRH())&&($._label=V.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(ne,$){2&ne&&q.ekj("mat-form-field-appearance-standard","standard"==$.appearance)("mat-form-field-appearance-fill","fill"==$.appearance)("mat-form-field-appearance-outline","outline"==$.appearance)("mat-form-field-appearance-legacy","legacy"==$.appearance)("mat-form-field-invalid",$._control.errorState)("mat-form-field-can-float",$._canLabelFloat())("mat-form-field-should-float",$._shouldLabelFloat())("mat-form-field-has-label",$._hasFloatingLabel())("mat-form-field-hide-placeholder",$._hideControlPlaceholder())("mat-form-field-disabled",$._control.disabled)("mat-form-field-autofilled",$._control.autofilled)("mat-focused",$._control.focused)("ng-untouched",$._shouldForward("untouched"))("ng-touched",$._shouldForward("touched"))("ng-pristine",$._shouldForward("pristine"))("ng-dirty",$._shouldForward("dirty"))("ng-valid",$._shouldForward("valid"))("ng-invalid",$._shouldForward("invalid"))("ng-pending",$._shouldForward("pending"))("_mat-animation-noopable",!$._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[q._Bn([{provide:Ln,useExisting:qt}]),q.qOj],ngContentSelectors:Ot,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(ne,$){1&ne&&(q.F$t(Mt),q.TgZ(0,"div",0)(1,"div",1,2),q.NdJ("click",function(W){return $._control.onContainerClick&&$._control.onContainerClick(W)}),q.YNc(3,Zt,9,0,"ng-container",3),q.YNc(4,vn,2,1,"div",4),q.TgZ(5,"div",5,6),q.Hsn(7),q.TgZ(8,"span",7),q.YNc(9,$e,5,16,"label",8),q.qZA()(),q.YNc(10,sn,2,0,"div",9),q.qZA(),q.YNc(11,Gt,2,4,"div",10),q.TgZ(12,"div",11),q.YNc(13,$t,2,1,"div",12),q.YNc(14,bt,5,2,"div",13),q.qZA()()),2&ne&&(q.xp6(3),q.Q6J("ngIf","outline"==$.appearance),q.xp6(1),q.Q6J("ngIf",$._prefixChildren.length),q.xp6(5),q.Q6J("ngIf",$._hasFloatingLabel()),q.xp6(1),q.Q6J("ngIf",$._suffixChildren.length),q.xp6(1),q.Q6J("ngIf","outline"!=$.appearance),q.xp6(1),q.Q6J("ngSwitch",$._getDisplayedMessages()),q.xp6(1),q.Q6J("ngSwitchCase","error"),q.xp6(1),q.Q6J("ngSwitchCase","hint"))},dependencies:[l.O5,l.RF,l.n9,I.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Nn.transitionMessages]},changeDetection:0}),qt})(),zn=(()=>{class qt{}return qt.\u0275fac=function(ne){return new(ne||qt)},qt.\u0275mod=q.oAB({type:qt}),qt.\u0275inj=q.cJS({imports:[l.ez,h.BQ,I.Q8,h.BQ]}),qt})()},7392:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Hw:()=>Pi,Ps:()=>li,jv:()=>$t});var I=U(4650),l=U(3238),q=U(1281),h=U(6895),qe=U(9646),Ne=U(2843),ze=U(4128),ye=U(727),me=U(8505),Ce=U(4004),tt=U(262),Ue=U(8746),dt=U(3099),st=U(5698),rt=U(529),At=U(1481);const vt=["*"];let Zt;function Tn(en){return function vn(){if(void 0===Zt&&(Zt=null,typeof window<"u")){const en=window;void 0!==en.trustedTypes&&(Zt=en.trustedTypes.createPolicy("angular#components",{createHTML:si=>si}))}return Zt}()?.createHTML(en)||en}function Bt(en){return Error(`Unable to find icon with the name "${en}"`)}function $e(en){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${en}".`)}function sn(en){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${en}".`)}class Gt{constructor(si,It,Vt){this.url=si,this.svgText=It,this.options=Vt}}let $t=(()=>{class en{constructor(It,Vt,xn,Dn){this._httpClient=It,this._sanitizer=Vt,this._errorHandler=Dn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=xn}addSvgIcon(It,Vt,xn){return this.addSvgIconInNamespace("",It,Vt,xn)}addSvgIconLiteral(It,Vt,xn){return this.addSvgIconLiteralInNamespace("",It,Vt,xn)}addSvgIconInNamespace(It,Vt,xn,Dn){return this._addSvgIconConfig(It,Vt,new Gt(xn,null,Dn))}addSvgIconResolver(It){return this._resolvers.push(It),this}addSvgIconLiteralInNamespace(It,Vt,xn,Dn){const jn=this._sanitizer.sanitize(I.q3G.HTML,xn);if(!jn)throw sn(xn);const wn=Tn(jn);return this._addSvgIconConfig(It,Vt,new Gt("",wn,Dn))}addSvgIconSet(It,Vt){return this.addSvgIconSetInNamespace("",It,Vt)}addSvgIconSetLiteral(It,Vt){return this.addSvgIconSetLiteralInNamespace("",It,Vt)}addSvgIconSetInNamespace(It,Vt,xn){return this._addSvgIconSetConfig(It,new Gt(Vt,null,xn))}addSvgIconSetLiteralInNamespace(It,Vt,xn){const Dn=this._sanitizer.sanitize(I.q3G.HTML,Vt);if(!Dn)throw sn(Vt);const jn=Tn(Dn);return this._addSvgIconSetConfig(It,new Gt("",jn,xn))}registerFontClassAlias(It,Vt=It){return this._fontCssClassesByAlias.set(It,Vt),this}classNameForFontAlias(It){return this._fontCssClassesByAlias.get(It)||It}setDefaultFontSetClass(...It){return this._defaultFontSetClass=It,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(It){const Vt=this._sanitizer.sanitize(I.q3G.RESOURCE_URL,It);if(!Vt)throw $e(It);const xn=this._cachedIconsByUrl.get(Vt);return xn?(0,qe.of)(Mt(xn)):this._loadSvgIconFromConfig(new Gt(It,null)).pipe((0,me.b)(Dn=>this._cachedIconsByUrl.set(Vt,Dn)),(0,Ce.U)(Dn=>Mt(Dn)))}getNamedSvgIcon(It,Vt=""){const xn=Ot(Vt,It);let Dn=this._svgIconConfigs.get(xn);if(Dn)return this._getSvgFromConfig(Dn);if(Dn=this._getIconConfigFromResolvers(Vt,It),Dn)return this._svgIconConfigs.set(xn,Dn),this._getSvgFromConfig(Dn);const jn=this._iconSetConfigs.get(Vt);return jn?this._getSvgFromIconSetConfigs(It,jn):(0,Ne._)(Bt(xn))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(It){return It.svgText?(0,qe.of)(Mt(this._svgElementFromConfig(It))):this._loadSvgIconFromConfig(It).pipe((0,Ce.U)(Vt=>Mt(Vt)))}_getSvgFromIconSetConfigs(It,Vt){const xn=this._extractIconWithNameFromAnySet(It,Vt);if(xn)return(0,qe.of)(xn);const Dn=Vt.filter(jn=>!jn.svgText).map(jn=>this._loadSvgIconSetFromConfig(jn).pipe((0,tt.K)(wn=>{const Fi=`Loading icon set URL: ${this._sanitizer.sanitize(I.q3G.RESOURCE_URL,jn.url)} failed: ${wn.message}`;return this._errorHandler.handleError(new Error(Fi)),(0,qe.of)(null)})));return(0,ze.D)(Dn).pipe((0,Ce.U)(()=>{const jn=this._extractIconWithNameFromAnySet(It,Vt);if(!jn)throw Bt(It);return jn}))}_extractIconWithNameFromAnySet(It,Vt){for(let xn=Vt.length-1;xn>=0;xn--){const Dn=Vt[xn];if(Dn.svgText&&Dn.svgText.toString().indexOf(It)>-1){const jn=this._svgElementFromConfig(Dn),wn=this._extractSvgIconFromSet(jn,It,Dn.options);if(wn)return wn}}return null}_loadSvgIconFromConfig(It){return this._fetchIcon(It).pipe((0,me.b)(Vt=>It.svgText=Vt),(0,Ce.U)(()=>this._svgElementFromConfig(It)))}_loadSvgIconSetFromConfig(It){return It.svgText?(0,qe.of)(null):this._fetchIcon(It).pipe((0,me.b)(Vt=>It.svgText=Vt))}_extractSvgIconFromSet(It,Vt,xn){const Dn=It.querySelector(`[id="${Vt}"]`);if(!Dn)return null;const jn=Dn.cloneNode(!0);if(jn.removeAttribute("id"),"svg"===jn.nodeName.toLowerCase())return this._setSvgAttributes(jn,xn);if("symbol"===jn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(jn),xn);const wn=this._svgElementFromString(Tn("<svg></svg>"));return wn.appendChild(jn),this._setSvgAttributes(wn,xn)}_svgElementFromString(It){const Vt=this._document.createElement("DIV");Vt.innerHTML=It;const xn=Vt.querySelector("svg");if(!xn)throw Error("<svg> tag not found");return xn}_toSvgElement(It){const Vt=this._svgElementFromString(Tn("<svg></svg>")),xn=It.attributes;for(let Dn=0;Dn<xn.length;Dn++){const{name:jn,value:wn}=xn[Dn];"id"!==jn&&Vt.setAttribute(jn,wn)}for(let Dn=0;Dn<It.childNodes.length;Dn++)It.childNodes[Dn].nodeType===this._document.ELEMENT_NODE&&Vt.appendChild(It.childNodes[Dn].cloneNode(!0));return Vt}_setSvgAttributes(It,Vt){return It.setAttribute("fit",""),It.setAttribute("height","100%"),It.setAttribute("width","100%"),It.setAttribute("preserveAspectRatio","xMidYMid meet"),It.setAttribute("focusable","false"),Vt&&Vt.viewBox&&It.setAttribute("viewBox",Vt.viewBox),It}_fetchIcon(It){const{url:Vt,options:xn}=It,Dn=xn?.withCredentials??!1;if(!this._httpClient)throw function ke(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Vt)throw Error(`Cannot fetch icon from URL "${Vt}".`);const jn=this._sanitizer.sanitize(I.q3G.RESOURCE_URL,Vt);if(!jn)throw $e(Vt);const wn=this._inProgressUrlFetches.get(jn);if(wn)return wn;const hi=this._httpClient.get(jn,{responseType:"text",withCredentials:Dn}).pipe((0,Ce.U)(Fi=>Tn(Fi)),(0,Ue.x)(()=>this._inProgressUrlFetches.delete(jn)),(0,dt.B)());return this._inProgressUrlFetches.set(jn,hi),hi}_addSvgIconConfig(It,Vt,xn){return this._svgIconConfigs.set(Ot(It,Vt),xn),this}_addSvgIconSetConfig(It,Vt){const xn=this._iconSetConfigs.get(It);return xn?xn.push(Vt):this._iconSetConfigs.set(It,[Vt]),this}_svgElementFromConfig(It){if(!It.svgElement){const Vt=this._svgElementFromString(It.svgText);this._setSvgAttributes(Vt,It.options),It.svgElement=Vt}return It.svgElement}_getIconConfigFromResolvers(It,Vt){for(let xn=0;xn<this._resolvers.length;xn++){const Dn=this._resolvers[xn](Vt,It);if(Dn)return Ht(Dn)?new Gt(Dn.url,null,Dn.options):new Gt(Dn,null)}}}return en.\u0275fac=function(It){return new(It||en)(I.LFG(rt.eN,8),I.LFG(At.H7),I.LFG(h.K0,8),I.LFG(I.qLn))},en.\u0275prov=I.Yz7({token:en,factory:en.\u0275fac,providedIn:"root"}),en})();function Mt(en){return en.cloneNode(!0)}function Ot(en,si){return en+":"+si}function Ht(en){return!(!en.url||!en.options)}const zt=(0,l.pj)(class{constructor(en){this._elementRef=en}}),Jt=new I.OlP("MAT_ICON_DEFAULT_OPTIONS"),Nn=new I.OlP("mat-icon-location",{providedIn:"root",factory:function Rn(){const en=(0,I.f3M)(h.K0),si=en?en.location:null;return{getPathname:()=>si?si.pathname+si.search:""}}}),gi=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],bn=gi.map(en=>`[${en}]`).join(", "),wi=/^url\(['"]?#(.*?)['"]?\)$/;let Pi=(()=>{class en extends zt{constructor(It,Vt,xn,Dn,jn,wn){super(It),this._iconRegistry=Vt,this._location=Dn,this._errorHandler=jn,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ye.w0.EMPTY,wn&&(wn.color&&(this.color=this.defaultColor=wn.color),wn.fontSet&&(this.fontSet=wn.fontSet)),xn||It.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(It){this._inline=(0,q.Ig)(It)}get svgIcon(){return this._svgIcon}set svgIcon(It){It!==this._svgIcon&&(It?this._updateSvgIcon(It):this._svgIcon&&this._clearSvgElement(),this._svgIcon=It)}get fontSet(){return this._fontSet}set fontSet(It){const Vt=this._cleanupFontValue(It);Vt!==this._fontSet&&(this._fontSet=Vt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(It){const Vt=this._cleanupFontValue(It);Vt!==this._fontIcon&&(this._fontIcon=Vt,this._updateFontIconClasses())}_splitIconName(It){if(!It)return["",""];const Vt=It.split(":");switch(Vt.length){case 1:return["",Vt[0]];case 2:return Vt;default:throw Error(`Invalid icon name: "${It}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const It=this._elementsWithExternalReferences;if(It&&It.size){const Vt=this._location.getPathname();Vt!==this._previousPath&&(this._previousPath=Vt,this._prependPathToReferences(Vt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(It){this._clearSvgElement();const Vt=this._location.getPathname();this._previousPath=Vt,this._cacheChildrenWithExternalReferences(It),this._prependPathToReferences(Vt),this._elementRef.nativeElement.appendChild(It)}_clearSvgElement(){const It=this._elementRef.nativeElement;let Vt=It.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Vt--;){const xn=It.childNodes[Vt];(1!==xn.nodeType||"svg"===xn.nodeName.toLowerCase())&&xn.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const It=this._elementRef.nativeElement,Vt=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(xn=>xn.length>0);this._previousFontSetClass.forEach(xn=>It.classList.remove(xn)),Vt.forEach(xn=>It.classList.add(xn)),this._previousFontSetClass=Vt,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&It.classList.remove(this._previousFontIconClass),this.fontIcon&&It.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(It){return"string"==typeof It?It.trim().split(" ")[0]:It}_prependPathToReferences(It){const Vt=this._elementsWithExternalReferences;Vt&&Vt.forEach((xn,Dn)=>{xn.forEach(jn=>{Dn.setAttribute(jn.name,`url('${It}#${jn.value}')`)})})}_cacheChildrenWithExternalReferences(It){const Vt=It.querySelectorAll(bn),xn=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Dn=0;Dn<Vt.length;Dn++)gi.forEach(jn=>{const wn=Vt[Dn],hi=wn.getAttribute(jn),Fi=hi?hi.match(wi):null;if(Fi){let Hi=xn.get(wn);Hi||(Hi=[],xn.set(wn,Hi)),Hi.push({name:jn,value:Fi[1]})}})}_updateSvgIcon(It){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),It){const[Vt,xn]=this._splitIconName(It);Vt&&(this._svgNamespace=Vt),xn&&(this._svgName=xn),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(xn,Vt).pipe((0,st.q)(1)).subscribe(Dn=>this._setSvgElement(Dn),Dn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Vt}:${xn}! ${Dn.message}`))})}}}return en.\u0275fac=function(It){return new(It||en)(I.Y36(I.SBq),I.Y36($t),I.$8M("aria-hidden"),I.Y36(Nn),I.Y36(I.qLn),I.Y36(Jt,8))},en.\u0275cmp=I.Xpm({type:en,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(It,Vt){2&It&&(I.uIk("data-mat-icon-type",Vt._usingFontIcon()?"font":"svg")("data-mat-icon-name",Vt._svgName||Vt.fontIcon)("data-mat-icon-namespace",Vt._svgNamespace||Vt.fontSet),I.ekj("mat-icon-inline",Vt.inline)("mat-icon-no-color","primary"!==Vt.color&&"accent"!==Vt.color&&"warn"!==Vt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[I.qOj],ngContentSelectors:vt,decls:1,vars:0,template:function(It,Vt){1&It&&(I.F$t(),I.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),en})(),li=(()=>{class en{}return en.\u0275fac=function(It){return new(It||en)},en.\u0275mod=I.oAB({type:en}),en.\u0275inj=I.cJS({imports:[l.BQ,l.BQ]}),en})()},4385:(Sn,Ct,U)=>{"use strict";U.d(Ct,{LD:()=>pr,gD:()=>Ln});var I=U(2561),l=U(6895),q=U(4650),h=U(3238),qe=U(9549),Ne=U(8605),ze=U(2687),ye=U(445),me=U(1281),Ce=U(5017),tt=U(9521),Ue=U(4006),dt=U(7579),st=U(9770),rt=U(6451),At=U(8675),vt=U(3900),Zt=U(5698),vn=U(9300),Tn=U(4004),Bt=U(1884),ke=U(2722),$e=U(7340);const sn=["trigger"],Gt=["panel"];function $t(zn,qt){if(1&zn&&(q.TgZ(0,"span",8),q._uU(1),q.qZA()),2&zn){const nt=q.oxw();q.xp6(1),q.Oqu(nt.placeholder)}}function dn(zn,qt){if(1&zn&&(q.TgZ(0,"span",12),q._uU(1),q.qZA()),2&zn){const nt=q.oxw(2);q.xp6(1),q.Oqu(nt.triggerValue)}}function bt(zn,qt){1&zn&&q.Hsn(0,0,["*ngSwitchCase","true"])}function Mt(zn,qt){if(1&zn&&(q.TgZ(0,"span",9),q.YNc(1,dn,2,1,"span",10),q.YNc(2,bt,1,0,"ng-content",11),q.qZA()),2&zn){const nt=q.oxw();q.Q6J("ngSwitch",!!nt.customTrigger),q.xp6(2),q.Q6J("ngSwitchCase",!0)}}function Ot(zn,qt){if(1&zn){const nt=q.EpF();q.TgZ(0,"div",13)(1,"div",14,15),q.NdJ("@transformPanel.done",function($){q.CHM(nt);const V=q.oxw();return q.KtG(V._panelDoneAnimatingStream.next($.toState))})("keydown",function($){q.CHM(nt);const V=q.oxw();return q.KtG(V._handleKeydown($))}),q.Hsn(3,1),q.qZA()()}if(2&zn){const nt=q.oxw();q.Q6J("@transformPanelWrap",void 0),q.xp6(1),q.Gre("mat-select-panel ",nt._getPanelTheme(),""),q.Udp("transform-origin",nt._transformOrigin)("font-size",nt._triggerFontSize,"px"),q.Q6J("ngClass",nt.panelClass)("@transformPanel",nt.multiple?"showing-multiple":"showing"),q.uIk("id",nt.id+"-panel")("aria-multiselectable",nt.multiple)("aria-label",nt.ariaLabel||null)("aria-labelledby",nt._getPanelAriaLabelledby())}}const Ht=[[["mat-select-trigger"]],"*"],zt=["mat-select-trigger","*"],Jt={transformPanelWrap:(0,$e.X$)("transformPanelWrap",[(0,$e.eR)("* => void",(0,$e.IO)("@transformPanel",[(0,$e.pV)()],{optional:!0}))]),transformPanel:(0,$e.X$)("transformPanel",[(0,$e.SB)("void",(0,$e.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,$e.SB)("showing",(0,$e.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,$e.SB)("showing-multiple",(0,$e.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,$e.eR)("void => *",(0,$e.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,$e.eR)("* => void",(0,$e.jt)("100ms 25ms linear",(0,$e.oB)({opacity:0})))])};let bn=0;const Vt=new q.OlP("mat-select-scroll-strategy"),Dn=new q.OlP("MAT_SELECT_CONFIG"),jn={provide:Vt,deps:[I.aV],useFactory:function xn(zn){return()=>zn.scrollStrategies.reposition()}};class wn{constructor(qt,nt){this.source=qt,this.value=nt}}const hi=(0,h.Kr)((0,h.sb)((0,h.Id)((0,h.FD)(class{constructor(zn,qt,nt,ne,$){this._elementRef=zn,this._defaultErrorStateMatcher=qt,this._parentForm=nt,this._parentFormGroup=ne,this.ngControl=$,this.stateChanges=new dt.x}})))),Fi=new q.OlP("MatSelectTrigger");let ur=(()=>{class zn extends hi{constructor(nt,ne,$,V,W,ce,Ae,Le,Nt,un,Cn,Wt,Zn,mi){super(W,V,Ae,Le,un),this._viewportRuler=nt,this._changeDetectorRef=ne,this._ngZone=$,this._dir=ce,this._parentFormField=Nt,this._liveAnnouncer=Zn,this._defaultOptions=mi,this._panelOpen=!1,this._compareWith=($n,kn)=>$n===kn,this._uid="mat-select-"+bn++,this._triggerAriaLabelledBy=null,this._destroy=new dt.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+bn++,this._panelDoneAnimatingStream=new dt.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,st.P)(()=>{const $n=this.options;return $n?$n.changes.pipe((0,At.O)($n),(0,vt.w)(()=>(0,rt.T)(...$n.map(kn=>kn.onSelectionChange)))):this._ngZone.onStable.pipe((0,Zt.q)(1),(0,vt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new q.vpe,this._openedStream=this.openedChange.pipe((0,vn.h)($n=>$n),(0,Tn.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,vn.h)($n=>!$n),(0,Tn.U)(()=>{})),this.selectionChange=new q.vpe,this.valueChange=new q.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=mi?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=mi.typeaheadDebounceInterval),this._scrollStrategyFactory=Wt,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Cn)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(nt){this._placeholder=nt,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Ue.kI.required)??!1}set required(nt){this._required=(0,me.Ig)(nt),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(nt){this._multiple=(0,me.Ig)(nt)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(nt){this._disableOptionCentering=(0,me.Ig)(nt)}get compareWith(){return this._compareWith}set compareWith(nt){this._compareWith=nt,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(nt){this._assignValue(nt)&&this._onChange(nt)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(nt){this._typeaheadDebounceInterval=(0,me.su)(nt)}get id(){return this._id}set id(nt){this._id=nt||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Ce.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Bt.x)(),(0,ke.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,ke.R)(this._destroy)).subscribe(nt=>{nt.added.forEach(ne=>ne.select()),nt.removed.forEach(ne=>ne.deselect())}),this.options.changes.pipe((0,At.O)(null),(0,ke.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const nt=this._getTriggerAriaLabelledby(),ne=this.ngControl;if(nt!==this._triggerAriaLabelledBy){const $=this._elementRef.nativeElement;this._triggerAriaLabelledBy=nt,nt?$.setAttribute("aria-labelledby",nt):$.removeAttribute("aria-labelledby")}ne&&(this._previousControl!==ne.control&&(void 0!==this._previousControl&&null!==ne.disabled&&ne.disabled!==this.disabled&&(this.disabled=ne.disabled),this._previousControl=ne.control),this.updateErrorState())}ngOnChanges(nt){(nt.disabled||nt.userAriaDescribedBy)&&this.stateChanges.next(),nt.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(nt){this._assignValue(nt)}registerOnChange(nt){this._onChange=nt}registerOnTouched(nt){this._onTouched=nt}setDisabledState(nt){this.disabled=nt,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const nt=this._selectionModel.selected.map(ne=>ne.viewValue);return this._isRtl()&&nt.reverse(),nt.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(nt){this.disabled||(this.panelOpen?this._handleOpenKeydown(nt):this._handleClosedKeydown(nt))}_handleClosedKeydown(nt){const ne=nt.keyCode,$=ne===tt.JH||ne===tt.LH||ne===tt.oh||ne===tt.SV,V=ne===tt.K5||ne===tt.L_,W=this._keyManager;if(!W.isTyping()&&V&&!(0,tt.Vb)(nt)||(this.multiple||nt.altKey)&&$)nt.preventDefault(),this.open();else if(!this.multiple){const ce=this.selected;W.onKeydown(nt);const Ae=this.selected;Ae&&ce!==Ae&&this._liveAnnouncer.announce(Ae.viewValue,1e4)}}_handleOpenKeydown(nt){const ne=this._keyManager,$=nt.keyCode,V=$===tt.JH||$===tt.LH,W=ne.isTyping();if(V&&nt.altKey)nt.preventDefault(),this.close();else if(W||$!==tt.K5&&$!==tt.L_||!ne.activeItem||(0,tt.Vb)(nt))if(!W&&this._multiple&&$===tt.A&&nt.ctrlKey){nt.preventDefault();const ce=this.options.some(Ae=>!Ae.disabled&&!Ae.selected);this.options.forEach(Ae=>{Ae.disabled||(ce?Ae.select():Ae.deselect())})}else{const ce=ne.activeItemIndex;ne.onKeydown(nt),this._multiple&&V&&nt.shiftKey&&ne.activeItem&&ne.activeItemIndex!==ce&&ne.activeItem._selectViaInteraction()}else nt.preventDefault(),ne.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Zt.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(nt){if(this._selectionModel.selected.forEach(ne=>ne.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&nt)Array.isArray(nt),nt.forEach(ne=>this._selectOptionByValue(ne)),this._sortValues();else{const ne=this._selectOptionByValue(nt);ne?this._keyManager.updateActiveItem(ne):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(nt){const ne=this.options.find($=>{if(this._selectionModel.isSelected($))return!1;try{return null!=$.value&&this._compareWith($.value,nt)}catch{return!1}});return ne&&this._selectionModel.select(ne),ne}_assignValue(nt){return!!(nt!==this._value||this._multiple&&Array.isArray(nt))&&(this.options&&this._setSelectionByValue(nt),this._value=nt,!0)}_initKeyManager(){this._keyManager=new ze.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,ke.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,ke.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const nt=(0,rt.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,ke.R)(nt)).subscribe(ne=>{this._onSelect(ne.source,ne.isUserInput),ne.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,rt.T)(...this.options.map(ne=>ne._stateChanges)).pipe((0,ke.R)(nt)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(nt,ne){const $=this._selectionModel.isSelected(nt);null!=nt.value||this._multiple?($!==nt.selected&&(nt.selected?this._selectionModel.select(nt):this._selectionModel.deselect(nt)),ne&&this._keyManager.setActiveItem(nt),this.multiple&&(this._sortValues(),ne&&this.focus())):(nt.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(nt.value)),$!==this._selectionModel.isSelected(nt)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const nt=this.options.toArray();this._selectionModel.sort((ne,$)=>this.sortComparator?this.sortComparator(ne,$,nt):nt.indexOf(ne)-nt.indexOf($)),this.stateChanges.next()}}_propagateChanges(nt){let ne=null;ne=this.multiple?this.selected.map($=>$.value):this.selected?this.selected.value:nt,this._value=ne,this.valueChange.emit(ne),this._onChange(ne),this.selectionChange.emit(this._getChangeEvent(ne)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(nt){this._elementRef.nativeElement.focus(nt)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const nt=this._parentFormField?.getLabelId();return this.ariaLabelledby?(nt?nt+" ":"")+this.ariaLabelledby:nt}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const nt=this._parentFormField?.getLabelId();let ne=(nt?nt+" ":"")+this._valueId;return this.ariaLabelledby&&(ne+=" "+this.ariaLabelledby),ne}_panelDoneAnimating(nt){this.openedChange.emit(nt)}setDescribedByIds(nt){nt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",nt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return zn.\u0275fac=function(nt){return new(nt||zn)(q.Y36(Ne.rL),q.Y36(q.sBO),q.Y36(q.R0b),q.Y36(h.rD),q.Y36(q.SBq),q.Y36(ye.Is,8),q.Y36(Ue.F,8),q.Y36(Ue.sg,8),q.Y36(qe.G_,8),q.Y36(Ue.a5,10),q.$8M("tabindex"),q.Y36(Vt),q.Y36(ze.Kd),q.Y36(Dn,8))},zn.\u0275dir=q.lG2({type:zn,viewQuery:function(nt,ne){if(1&nt&&(q.Gf(sn,5),q.Gf(Gt,5),q.Gf(I.pI,5)),2&nt){let $;q.iGM($=q.CRH())&&(ne.trigger=$.first),q.iGM($=q.CRH())&&(ne.panel=$.first),q.iGM($=q.CRH())&&(ne._overlayDir=$.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[q.qOj,q.TTD]}),zn})(),Ln=(()=>{class zn extends ur{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(nt,ne,$){const V=this._getItemHeight();return Math.min(Math.max(0,V*nt-ne+V/2),$)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,ke.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Zt.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(nt){const ne=(0,h.CB)(nt,this.options,this.optionGroups),$=this._getItemHeight();this.panel.nativeElement.scrollTop=0===nt&&1===ne?0:(0,h.jH)((nt+ne)*$,$,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(nt){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(nt)}_getChangeEvent(nt){return new wn(this,nt)}_calculateOverlayOffsetX(){const nt=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),ne=this._viewportRuler.getViewportSize(),$=this._isRtl(),V=this.multiple?56:32;let W;if(this.multiple)W=40;else if(this.disableOptionCentering)W=16;else{let Le=this._selectionModel.selected[0]||this.options.first;W=Le&&Le.group?32:16}$||(W*=-1);const ce=0-(nt.left+W-($?V:0)),Ae=nt.right+W-ne.width+($?0:V);ce>0?W+=ce+8:Ae>0&&(W-=Ae+8),this._overlayDir.offsetX=Math.round(W),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(nt,ne,$){const V=this._getItemHeight(),W=(V-this._triggerRect.height)/2,ce=Math.floor(256/V);let Ae;return this.disableOptionCentering?0:(Ae=0===this._scrollTop?nt*V:this._scrollTop===$?(nt-(this._getItemCount()-ce))*V+(V-(this._getItemCount()*V-256)%V):ne-V/2,Math.round(-1*Ae-W))}_checkOverlayWithinViewport(nt){const ne=this._getItemHeight(),$=this._viewportRuler.getViewportSize(),V=this._triggerRect.top-8,W=$.height-this._triggerRect.bottom-8,ce=Math.abs(this._offsetY),Le=Math.min(this._getItemCount()*ne,256)-ce-this._triggerRect.height;Le>W?this._adjustPanelUp(Le,W):ce>V?this._adjustPanelDown(ce,V,nt):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(nt,ne){const $=Math.round(nt-ne);this._scrollTop-=$,this._offsetY-=$,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(nt,ne,$){const V=Math.round(nt-ne);if(this._scrollTop+=V,this._offsetY+=V,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=$)return this._scrollTop=$,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const nt=this._getItemHeight(),ne=this._getItemCount(),$=Math.min(ne*nt,256),W=ne*nt-$;let ce;ce=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),ce+=(0,h.CB)(ce,this.options,this.optionGroups);const Ae=$/2;this._scrollTop=this._calculateOverlayScroll(ce,Ae,W),this._offsetY=this._calculateOverlayOffsetY(ce,Ae,W),this._checkOverlayWithinViewport(W)}_getOriginBasedOnOption(){const nt=this._getItemHeight(),ne=(nt-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-ne+nt/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return zn.\u0275fac=function(){let qt;return function(ne){return(qt||(qt=q.n5z(zn)))(ne||zn)}}(),zn.\u0275cmp=q.Xpm({type:zn,selectors:[["mat-select"]],contentQueries:function(nt,ne,$){if(1&nt&&(q.Suo($,Fi,5),q.Suo($,h.ey,5),q.Suo($,h.K7,5)),2&nt){let V;q.iGM(V=q.CRH())&&(ne.customTrigger=V.first),q.iGM(V=q.CRH())&&(ne.options=V),q.iGM(V=q.CRH())&&(ne.optionGroups=V)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(nt,ne){1&nt&&q.NdJ("keydown",function(V){return ne._handleKeydown(V)})("focus",function(){return ne._onFocus()})("blur",function(){return ne._onBlur()}),2&nt&&(q.uIk("id",ne.id)("tabindex",ne.tabIndex)("aria-controls",ne.panelOpen?ne.id+"-panel":null)("aria-expanded",ne.panelOpen)("aria-label",ne.ariaLabel||null)("aria-required",ne.required.toString())("aria-disabled",ne.disabled.toString())("aria-invalid",ne.errorState)("aria-activedescendant",ne._getAriaActiveDescendant()),q.ekj("mat-select-disabled",ne.disabled)("mat-select-invalid",ne.errorState)("mat-select-required",ne.required)("mat-select-empty",ne.empty)("mat-select-multiple",ne.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[q._Bn([{provide:qe.Eo,useExisting:zn},{provide:h.HF,useExisting:zn}]),q.qOj],ngContentSelectors:zt,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(nt,ne){if(1&nt&&(q.F$t(Ht),q.TgZ(0,"div",0,1),q.NdJ("click",function(){return ne.toggle()}),q.TgZ(3,"div",2),q.YNc(4,$t,2,1,"span",3),q.YNc(5,Mt,3,2,"span",4),q.qZA(),q.TgZ(6,"div",5),q._UZ(7,"div",6),q.qZA()(),q.YNc(8,Ot,4,14,"ng-template",7),q.NdJ("backdropClick",function(){return ne.close()})("attach",function(){return ne._onAttached()})("detach",function(){return ne.close()})),2&nt){const $=q.MAs(1);q.uIk("aria-owns",ne.panelOpen?ne.id+"-panel":null),q.xp6(3),q.Q6J("ngSwitch",ne.empty),q.uIk("id",ne._valueId),q.xp6(1),q.Q6J("ngSwitchCase",!0),q.xp6(1),q.Q6J("ngSwitchCase",!1),q.xp6(3),q.Q6J("cdkConnectedOverlayPanelClass",ne._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",ne._scrollStrategy)("cdkConnectedOverlayOrigin",$)("cdkConnectedOverlayOpen",ne.panelOpen)("cdkConnectedOverlayPositions",ne._positions)("cdkConnectedOverlayMinWidth",null==ne._triggerRect?null:ne._triggerRect.width)("cdkConnectedOverlayOffsetY",ne._offsetY)}},dependencies:[l.mk,l.RF,l.n9,l.ED,I.pI,I.xu],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Jt.transformPanelWrap,Jt.transformPanel]},changeDetection:0}),zn})(),pr=(()=>{class zn{}return zn.\u0275fac=function(nt){return new(nt||zn)},zn.\u0275mod=q.oAB({type:zn}),zn.\u0275inj=q.cJS({providers:[jn],imports:[l.ez,I.U8,h.Ng,h.BQ,Ne.ZD,qe.lN,h.Ng,h.BQ]}),zn})()},3683:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Ye:()=>me,g0:()=>tt});var I=U(4650),l=U(3238),q=U(3353),h=U(6895);const qe=["*",[["mat-toolbar-row"]]],Ne=["*","mat-toolbar-row"],ze=(0,l.pj)(class{constructor(Ue){this._elementRef=Ue}});let ye=(()=>{class Ue{}return Ue.\u0275fac=function(st){return new(st||Ue)},Ue.\u0275dir=I.lG2({type:Ue,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Ue})(),me=(()=>{class Ue extends ze{constructor(st,rt,At){super(st),this._platform=rt,this._document=At}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Ue.\u0275fac=function(st){return new(st||Ue)(I.Y36(I.SBq),I.Y36(q.t4),I.Y36(h.K0))},Ue.\u0275cmp=I.Xpm({type:Ue,selectors:[["mat-toolbar"]],contentQueries:function(st,rt,At){if(1&st&&I.Suo(At,ye,5),2&st){let vt;I.iGM(vt=I.CRH())&&(rt._toolbarRows=vt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(st,rt){2&st&&I.ekj("mat-toolbar-multiple-rows",rt._toolbarRows.length>0)("mat-toolbar-single-row",0===rt._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[I.qOj],ngContentSelectors:Ne,decls:2,vars:0,template:function(st,rt){1&st&&(I.F$t(qe),I.Hsn(0),I.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),Ue})(),tt=(()=>{class Ue{}return Ue.\u0275fac=function(st){return new(st||Ue)},Ue.\u0275mod=I.oAB({type:Ue}),Ue.\u0275inj=I.cJS({imports:[l.BQ,l.BQ]}),Ue})()},1481:(Sn,Ct,U)=>{"use strict";U.d(Ct,{Dx:()=>ce,H7:()=>_t,b2:()=>nt,q6:()=>Ln,se:()=>Ht});var I=U(6895),l=U(4650);class q extends I.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class h extends q{static makeCurrent(){(0,I.HT)(new h)}onAndCancel(De,Me,ue){return De.addEventListener(Me,ue,!1),()=>{De.removeEventListener(Me,ue,!1)}}dispatchEvent(De,Me){De.dispatchEvent(Me)}remove(De){De.parentNode&&De.parentNode.removeChild(De)}createElement(De,Me){return(Me=Me||this.getDefaultDocument()).createElement(De)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(De){return De.nodeType===Node.ELEMENT_NODE}isShadowRoot(De){return De instanceof DocumentFragment}getGlobalEventTarget(De,Me){return"window"===Me?window:"document"===Me?De:"body"===Me?De.body:null}getBaseHref(De){const Me=function Ne(){return qe=qe||document.querySelector("base"),qe?qe.getAttribute("href"):null}();return null==Me?null:function ye(Fe){ze=ze||document.createElement("a"),ze.setAttribute("href",Fe);const De=ze.pathname;return"/"===De.charAt(0)?De:`/${De}`}(Me)}resetBaseElement(){qe=null}getUserAgent(){return window.navigator.userAgent}getCookie(De){return(0,I.Mx)(document.cookie,De)}}let ze,qe=null;const me=new l.OlP("TRANSITION_ID"),tt=[{provide:l.ip1,useFactory:function Ce(Fe,De,Me){return()=>{Me.get(l.CZH).donePromise.then(()=>{const ue=(0,I.q)(),We=De.querySelectorAll(`style[ng-transition="${Fe}"]`);for(let Xt=0;Xt<We.length;Xt++)ue.remove(We[Xt])})}},deps:[me,I.K0,l.zs3],multi:!0}];let dt=(()=>{class Fe{build(){return new XMLHttpRequest}}return Fe.\u0275fac=function(Me){return new(Me||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const st=new l.OlP("EventManagerPlugins");let rt=(()=>{class Fe{constructor(Me,ue){this._zone=ue,this._eventNameToPlugin=new Map,Me.forEach(We=>We.manager=this),this._plugins=Me.slice().reverse()}addEventListener(Me,ue,We){return this._findPluginFor(ue).addEventListener(Me,ue,We)}addGlobalEventListener(Me,ue,We){return this._findPluginFor(ue).addGlobalEventListener(Me,ue,We)}getZone(){return this._zone}_findPluginFor(Me){const ue=this._eventNameToPlugin.get(Me);if(ue)return ue;const We=this._plugins;for(let Xt=0;Xt<We.length;Xt++){const Fn=We[Xt];if(Fn.supports(Me))return this._eventNameToPlugin.set(Me,Fn),Fn}throw new Error(`No event manager plugin found for event ${Me}`)}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(st),l.LFG(l.R0b))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class At{constructor(De){this._doc=De}addGlobalEventListener(De,Me,ue){const We=(0,I.q)().getGlobalEventTarget(this._doc,De);if(!We)throw new Error(`Unsupported event target ${We} for event ${Me}`);return this.addEventListener(We,Me,ue)}}let vt=(()=>{class Fe{constructor(){this._stylesSet=new Set}addStyles(Me){const ue=new Set;Me.forEach(We=>{this._stylesSet.has(We)||(this._stylesSet.add(We),ue.add(We))}),this.onStylesAdded(ue)}onStylesAdded(Me){}getAllStyles(){return Array.from(this._stylesSet)}}return Fe.\u0275fac=function(Me){return new(Me||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})(),Zt=(()=>{class Fe extends vt{constructor(Me){super(),this._doc=Me,this._hostNodes=new Map,this._hostNodes.set(Me.head,[])}_addStylesToHost(Me,ue,We){Me.forEach(Xt=>{const Fn=this._doc.createElement("style");Fn.textContent=Xt,We.push(ue.appendChild(Fn))})}addHost(Me){const ue=[];this._addStylesToHost(this._stylesSet,Me,ue),this._hostNodes.set(Me,ue)}removeHost(Me){const ue=this._hostNodes.get(Me);ue&&ue.forEach(vn),this._hostNodes.delete(Me)}onStylesAdded(Me){this._hostNodes.forEach((ue,We)=>{this._addStylesToHost(Me,We,ue)})}ngOnDestroy(){this._hostNodes.forEach(Me=>Me.forEach(vn))}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(I.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function vn(Fe){(0,I.q)().remove(Fe)}const Tn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bt=/%COMP%/g;function bt(Fe,De,Me){for(let ue=0;ue<De.length;ue++){let We=De[ue];Array.isArray(We)?bt(Fe,We,Me):(We=We.replace(Bt,Fe),Me.push(We))}return Me}function Mt(Fe){return De=>{if("__ngUnwrap__"===De)return Fe;!1===Fe(De)&&(De.preventDefault(),De.returnValue=!1)}}let Ht=(()=>{class Fe{constructor(Me,ue,We){this.eventManager=Me,this.sharedStylesHost=ue,this.appId=We,this.rendererByCompId=new Map,this.defaultRenderer=new zt(Me)}createRenderer(Me,ue){if(!Me||!ue)return this.defaultRenderer;switch(ue.encapsulation){case l.ifc.Emulated:{let We=this.rendererByCompId.get(ue.id);return We||(We=new gi(this.eventManager,this.sharedStylesHost,ue,this.appId),this.rendererByCompId.set(ue.id,We)),We.applyToHost(Me),We}case 1:case l.ifc.ShadowDom:return new bn(this.eventManager,this.sharedStylesHost,Me,ue);default:if(!this.rendererByCompId.has(ue.id)){const We=bt(ue.id,ue.styles,[]);this.sharedStylesHost.addStyles(We),this.rendererByCompId.set(ue.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(rt),l.LFG(Zt),l.LFG(l.AFp))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();class zt{constructor(De){this.eventManager=De,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(De,Me){return Me?document.createElementNS(Tn[Me]||Me,De):document.createElement(De)}createComment(De){return document.createComment(De)}createText(De){return document.createTextNode(De)}appendChild(De,Me){(Rn(De)?De.content:De).appendChild(Me)}insertBefore(De,Me,ue){De&&(Rn(De)?De.content:De).insertBefore(Me,ue)}removeChild(De,Me){De&&De.removeChild(Me)}selectRootElement(De,Me){let ue="string"==typeof De?document.querySelector(De):De;if(!ue)throw new Error(`The selector "${De}" did not match any elements`);return Me||(ue.textContent=""),ue}parentNode(De){return De.parentNode}nextSibling(De){return De.nextSibling}setAttribute(De,Me,ue,We){if(We){Me=We+":"+Me;const Xt=Tn[We];Xt?De.setAttributeNS(Xt,Me,ue):De.setAttribute(Me,ue)}else De.setAttribute(Me,ue)}removeAttribute(De,Me,ue){if(ue){const We=Tn[ue];We?De.removeAttributeNS(We,Me):De.removeAttribute(`${ue}:${Me}`)}else De.removeAttribute(Me)}addClass(De,Me){De.classList.add(Me)}removeClass(De,Me){De.classList.remove(Me)}setStyle(De,Me,ue,We){We&(l.JOm.DashCase|l.JOm.Important)?De.style.setProperty(Me,ue,We&l.JOm.Important?"important":""):De.style[Me]=ue}removeStyle(De,Me,ue){ue&l.JOm.DashCase?De.style.removeProperty(Me):De.style[Me]=""}setProperty(De,Me,ue){De[Me]=ue}setValue(De,Me){De.nodeValue=Me}listen(De,Me,ue){return"string"==typeof De?this.eventManager.addGlobalEventListener(De,Me,Mt(ue)):this.eventManager.addEventListener(De,Me,Mt(ue))}}function Rn(Fe){return"TEMPLATE"===Fe.tagName&&void 0!==Fe.content}class gi extends zt{constructor(De,Me,ue,We){super(De),this.component=ue;const Xt=bt(We+"-"+ue.id,ue.styles,[]);Me.addStyles(Xt),this.contentAttr=function $t(Fe){return"_ngcontent-%COMP%".replace(Bt,Fe)}(We+"-"+ue.id),this.hostAttr=function dn(Fe){return"_nghost-%COMP%".replace(Bt,Fe)}(We+"-"+ue.id)}applyToHost(De){super.setAttribute(De,this.hostAttr,"")}createElement(De,Me){const ue=super.createElement(De,Me);return super.setAttribute(ue,this.contentAttr,""),ue}}class bn extends zt{constructor(De,Me,ue,We){super(De),this.sharedStylesHost=Me,this.hostEl=ue,this.shadowRoot=ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=bt(We.id,We.styles,[]);for(let Fn=0;Fn<Xt.length;Fn++){const Gn=document.createElement("style");Gn.textContent=Xt[Fn],this.shadowRoot.appendChild(Gn)}}nodeOrShadowRoot(De){return De===this.hostEl?this.shadowRoot:De}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(De,Me){return super.appendChild(this.nodeOrShadowRoot(De),Me)}insertBefore(De,Me,ue){return super.insertBefore(this.nodeOrShadowRoot(De),Me,ue)}removeChild(De,Me){return super.removeChild(this.nodeOrShadowRoot(De),Me)}parentNode(De){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(De)))}}let wi=(()=>{class Fe extends At{constructor(Me){super(Me)}supports(Me){return!0}addEventListener(Me,ue,We){return Me.addEventListener(ue,We,!1),()=>this.removeEventListener(Me,ue,We)}removeEventListener(Me,ue,We){return Me.removeEventListener(ue,We)}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(I.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Pi=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},si={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},It={alt:Fe=>Fe.altKey,control:Fe=>Fe.ctrlKey,meta:Fe=>Fe.metaKey,shift:Fe=>Fe.shiftKey};let Vt=(()=>{class Fe extends At{constructor(Me){super(Me)}supports(Me){return null!=Fe.parseEventName(Me)}addEventListener(Me,ue,We){const Xt=Fe.parseEventName(ue),Fn=Fe.eventCallback(Xt.fullKey,We,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,I.q)().onAndCancel(Me,Xt.domEventName,Fn))}static parseEventName(Me){const ue=Me.toLowerCase().split("."),We=ue.shift();if(0===ue.length||"keydown"!==We&&"keyup"!==We)return null;const Xt=Fe._normalizeKey(ue.pop());let Fn="";if(Pi.forEach(An=>{const Ci=ue.indexOf(An);Ci>-1&&(ue.splice(Ci,1),Fn+=An+".")}),Fn+=Xt,0!=ue.length||0===Xt.length)return null;const Gn={};return Gn.domEventName=We,Gn.fullKey=Fn,Gn}static getEventFullKey(Me){let ue="",We=function xn(Fe){let De=Fe.key;if(null==De){if(De=Fe.keyIdentifier,null==De)return"Unidentified";De.startsWith("U+")&&(De=String.fromCharCode(parseInt(De.substring(2),16)),3===Fe.location&&si.hasOwnProperty(De)&&(De=si[De]))}return en[De]||De}(Me);return We=We.toLowerCase()," "===We?We="space":"."===We&&(We="dot"),Pi.forEach(Xt=>{Xt!=We&&It[Xt](Me)&&(ue+=Xt+".")}),ue+=We,ue}static eventCallback(Me,ue,We){return Xt=>{Fe.getEventFullKey(Xt)===Me&&We.runGuarded(()=>ue(Xt))}}static _normalizeKey(Me){return"esc"===Me?"escape":Me}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(I.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Ln=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:I.bD},{provide:l.g9A,useValue:function hi(){h.makeCurrent()},multi:!0},{provide:I.K0,useFactory:function Hi(){return(0,l.RDi)(document),document},deps:[]}]),pr=new l.OlP(""),zn=[{provide:l.rWj,useClass:class Ue{addToWindow(De){l.dqk.getAngularTestability=(ue,We=!0)=>{const Xt=De.findTestabilityInTree(ue,We);if(null==Xt)throw new Error("Could not find testability for element.");return Xt},l.dqk.getAllAngularTestabilities=()=>De.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>De.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(ue=>{const We=l.dqk.getAllAngularTestabilities();let Xt=We.length,Fn=!1;const Gn=function(An){Fn=Fn||An,Xt--,0==Xt&&ue(Fn)};We.forEach(function(An){An.whenStable(Gn)})})}findTestabilityInTree(De,Me,ue){return null==Me?null:De.getTestability(Me)??(ue?(0,I.q)().isShadowRoot(Me)?this.findTestabilityInTree(De,Me.host,!0):this.findTestabilityInTree(De,Me.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],qt=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Fi(){return new l.qLn},deps:[]},{provide:st,useClass:wi,multi:!0,deps:[I.K0,l.R0b,l.Lbi]},{provide:st,useClass:Vt,multi:!0,deps:[I.K0]},{provide:Ht,useClass:Ht,deps:[rt,Zt,l.AFp]},{provide:l.FYo,useExisting:Ht},{provide:vt,useExisting:Zt},{provide:Zt,useClass:Zt,deps:[I.K0]},{provide:rt,useClass:rt,deps:[st,l.R0b]},{provide:I.JF,useClass:dt,deps:[]},[]];let nt=(()=>{class Fe{constructor(Me){}static withServerTransition(Me){return{ngModule:Fe,providers:[{provide:l.AFp,useValue:Me.appId},{provide:me,useExisting:l.AFp},tt]}}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(pr,12))},Fe.\u0275mod=l.oAB({type:Fe}),Fe.\u0275inj=l.cJS({providers:[...qt,...zn],imports:[I.ez,l.hGG]}),Fe})(),ce=(()=>{class Fe{constructor(Me){this._doc=Me}getTitle(){return this._doc.title}setTitle(Me){this._doc.title=Me||""}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(I.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Me){let ue=null;return ue=Me?new Me:function W(){return new ce((0,l.LFG)(I.K0))}(),ue},providedIn:"root"}),Fe})();typeof window<"u"&&window;let _t=(()=>{class Fe{}return Fe.\u0275fac=function(Me){return new(Me||Fe)},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Me){let ue=null;return ue=Me?new(Me||Fe):l.LFG(He),ue},providedIn:"root"}),Fe})(),He=(()=>{class Fe extends _t{constructor(Me){super(),this._doc=Me}sanitize(Me,ue){if(null==ue)return null;switch(Me){case l.q3G.NONE:return ue;case l.q3G.HTML:return(0,l.qzn)(ue,"HTML")?(0,l.z3N)(ue):(0,l.EiD)(this._doc,String(ue)).toString();case l.q3G.STYLE:return(0,l.qzn)(ue,"Style")?(0,l.z3N)(ue):ue;case l.q3G.SCRIPT:if((0,l.qzn)(ue,"Script"))return(0,l.z3N)(ue);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(ue),(0,l.qzn)(ue,"URL")?(0,l.z3N)(ue):(0,l.mCW)(String(ue));case l.q3G.RESOURCE_URL:if((0,l.qzn)(ue,"ResourceURL"))return(0,l.z3N)(ue);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Me} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Me){return(0,l.JVY)(Me)}bypassSecurityTrustStyle(Me){return(0,l.L6k)(Me)}bypassSecurityTrustScript(Me){return(0,l.eBb)(Me)}bypassSecurityTrustUrl(Me){return(0,l.LAX)(Me)}bypassSecurityTrustResourceUrl(Me){return(0,l.pB0)(Me)}}return Fe.\u0275fac=function(Me){return new(Me||Fe)(l.LFG(I.K0))},Fe.\u0275prov=l.Yz7({token:Fe,factory:function(Me){let ue=null;return ue=Me?new Me:function ot(Fe){return new He(Fe.get(I.K0))}(l.LFG(l.zs3)),ue},providedIn:"root"}),Fe})()},2510:(Sn,Ct,U)=>{"use strict";U.d(Ct,{gz:()=>yr,F0:()=>Lo,Od:()=>il,yS:()=>nl,Bz:()=>xu,lC:()=>vs});var I=U(6895),l=U(4650),q=U(8306),h=U(727),qe=U(4482),Ne=U(5403);function ze(){return(0,qe.e)((F,O)=>{let P=null;F._refCount++;const Z=(0,Ne.x)(O,void 0,void 0,void 0,()=>{if(!F||F._refCount<=0||0<--F._refCount)return void(P=null);const ie=F._connection,ve=P;P=null,ie&&(!ve||ie===ve)&&ie.unsubscribe(),O.unsubscribe()});F.subscribe(Z),Z.closed||(P=F.connect())})}class ye extends q.y{constructor(O,P){super(),this.source=O,this.subjectFactory=P,this._subject=null,this._refCount=0,this._connection=null,(0,qe.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new h.w0;const P=this.getSubject();O.add(this.source.subscribe((0,Ne.x)(P,void 0,()=>{this._teardown(),P.complete()},Z=>{this._teardown(),P.error(Z)},()=>this._teardown()))),O.closed&&(this._connection=null,O=h.w0.EMPTY)}return O}refCount(){return ze()(this)}}var me=U(2076),Ce=U(9646),tt=U(1135),Ue=U(9841),dt=U(2843),st=U(6805),rt=U(7272),At=U(9770),vt=U(515),Zt=U(7579);function vn(F,O,P,Z,ie){return(ve,Ze)=>{let ct=P,nn=O,Bn=0;ve.subscribe((0,Ne.x)(Ze,Ii=>{const Qn=Bn++;nn=ct?F(nn,Ii,Qn):(ct=!0,Ii),Z&&Ze.next(nn)},ie&&(()=>{ct&&Ze.next(nn),Ze.complete()})))}}function Tn(F,O){return(0,qe.e)(vn(F,O,arguments.length>=2,!0))}var Bt=U(9300);function ke(F){return F<=0?()=>vt.E:(0,qe.e)((O,P)=>{let Z=[];O.subscribe((0,Ne.x)(P,ie=>{Z.push(ie),F<Z.length&&Z.shift()},()=>{for(const ie of Z)P.next(ie);P.complete()},void 0,()=>{Z=null}))})}var $e=U(8068),sn=U(6590),Gt=U(4671),dn=U(4004),bt=U(3900),Mt=U(5698),Ot=U(8675),Ht=U(262),zt=U(4351),Jt=U(590),Nn=U(5577),Rn=U(8505),gi=U(9718),bn=U(8746),wi=U(8189),Pi=U(1481);class li{constructor(O,P){this.id=O,this.url=P}}class en extends li{constructor(O,P,Z="imperative",ie=null){super(O,P),this.type=0,this.navigationTrigger=Z,this.restoredState=ie}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class si extends li{constructor(O,P,Z){super(O,P),this.urlAfterRedirects=Z,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class It extends li{constructor(O,P,Z){super(O,P),this.reason=Z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vt extends li{constructor(O,P,Z){super(O,P),this.error=Z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xn extends li{constructor(O,P,Z,ie){super(O,P),this.urlAfterRedirects=Z,this.state=ie,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn extends li{constructor(O,P,Z,ie){super(O,P),this.urlAfterRedirects=Z,this.state=ie,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends li{constructor(O,P,Z,ie,ve){super(O,P),this.urlAfterRedirects=Z,this.state=ie,this.shouldActivate=ve,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wn extends li{constructor(O,P,Z,ie){super(O,P),this.urlAfterRedirects=Z,this.state=ie,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hi extends li{constructor(O,P,Z,ie){super(O,P),this.urlAfterRedirects=Z,this.state=ie,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fi{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hi{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ur{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ln{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pr{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zn{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qt{constructor(O,P,Z){this.routerEvent=O,this.position=P,this.anchor=Z,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ne="primary";class ${constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const P=this.params[O];return Array.isArray(P)?P[0]:P}return null}getAll(O){if(this.has(O)){const P=this.params[O];return Array.isArray(P)?P:[P]}return[]}get keys(){return Object.keys(this.params)}}function V(F){return new $(F)}const W="ngNavigationCancelingError";function ce(F){const O=Error("NavigationCancelingError: "+F);return O[W]=!0,O}function Le(F,O,P){const Z=P.path.split("/");if(Z.length>F.length||"full"===P.pathMatch&&(O.hasChildren()||Z.length<F.length))return null;const ie={};for(let ve=0;ve<Z.length;ve++){const Ze=Z[ve],ct=F[ve];if(Ze.startsWith(":"))ie[Ze.substring(1)]=ct;else if(Ze!==ct.path)return null}return{consumed:F.slice(0,Z.length),posParams:ie}}function un(F,O){const P=F?Object.keys(F):void 0,Z=O?Object.keys(O):void 0;if(!P||!Z||P.length!=Z.length)return!1;let ie;for(let ve=0;ve<P.length;ve++)if(ie=P[ve],!Cn(F[ie],O[ie]))return!1;return!0}function Cn(F,O){if(Array.isArray(F)&&Array.isArray(O)){if(F.length!==O.length)return!1;const P=[...F].sort(),Z=[...O].sort();return P.every((ie,ve)=>Z[ve]===ie)}return F===O}function Wt(F){return Array.prototype.concat.apply([],F)}function Zn(F){return F.length>0?F[F.length-1]:null}function $n(F,O){for(const P in F)F.hasOwnProperty(P)&&O(F[P],P)}function kn(F){return(0,l.CqO)(F)?F:(0,l.QGY)(F)?(0,me.D)(Promise.resolve(F)):(0,Ce.of)(F)}const wt={exact:function Qe(F,O,P){if(!Ye(F.segments,O.segments)||!he(F.segments,O.segments,P)||F.numberOfChildren!==O.numberOfChildren)return!1;for(const Z in O.children)if(!F.children[Z]||!Qe(F.children[Z],O.children[Z],P))return!1;return!0},subset:ft},mt={exact:function je(F,O){return un(F,O)},subset:function Be(F,O){return Object.keys(O).length<=Object.keys(F).length&&Object.keys(O).every(P=>Cn(F[P],O[P]))},ignored:()=>!0};function lt(F,O,P){return wt[P.paths](F.root,O.root,P.matrixParams)&&mt[P.queryParams](F.queryParams,O.queryParams)&&!("exact"===P.fragment&&F.fragment!==O.fragment)}function ft(F,O,P){return Rt(F,O,O.segments,P)}function Rt(F,O,P,Z){if(F.segments.length>P.length){const ie=F.segments.slice(0,P.length);return!(!Ye(ie,P)||O.hasChildren()||!he(ie,P,Z))}if(F.segments.length===P.length){if(!Ye(F.segments,P)||!he(F.segments,P,Z))return!1;for(const ie in O.children)if(!F.children[ie]||!ft(F.children[ie],O.children[ie],Z))return!1;return!0}{const ie=P.slice(0,F.segments.length),ve=P.slice(F.segments.length);return!!(Ye(F.segments,ie)&&he(F.segments,ie,Z)&&F.children[ne])&&Rt(F.children[ne],O,ve,Z)}}function he(F,O,P){return O.every((Z,ie)=>mt[P](F[ie].parameters,Z.parameters))}class ee{constructor(O,P,Z){this.root=O,this.queryParams=P,this.fragment=Z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=V(this.queryParams)),this._queryParamMap}toString(){return He.serialize(this)}}class oe{constructor(O,P){this.segments=O,this.children=P,this.parent=null,$n(P,(Z,ie)=>Z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dt(this)}}class Se{constructor(O,P){this.path=O,this.parameters=P}get parameterMap(){return this._parameterMap||(this._parameterMap=V(this.parameters)),this._parameterMap}toString(){return Gn(this)}}function Ye(F,O){return F.length===O.length&&F.every((P,Z)=>P.path===O[Z].path)}class _t{}class ot{parse(O){const P=new Lr(O);return new ee(P.parseRootSegment(),P.parseQueryParams(),P.parseFragment())}serialize(O){const P=`/${Fe(O.root,!0)}`,Z=function Ci(F){const O=Object.keys(F).map(P=>{const Z=F[P];return Array.isArray(Z)?Z.map(ie=>`${Me(P)}=${Me(ie)}`).join("&"):`${Me(P)}=${Me(Z)}`}).filter(P=>!!P);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${P}${Z}${"string"==typeof O.fragment?`#${function ue(F){return encodeURI(F)}(O.fragment)}`:""}`}}const He=new ot;function Dt(F){return F.segments.map(O=>Gn(O)).join("/")}function Fe(F,O){if(!F.hasChildren())return Dt(F);if(O){const P=F.children[ne]?Fe(F.children[ne],!1):"",Z=[];return $n(F.children,(ie,ve)=>{ve!==ne&&Z.push(`${ve}:${Fe(ie,!1)}`)}),Z.length>0?`${P}(${Z.join("//")})`:P}{const P=function gt(F,O){let P=[];return $n(F.children,(Z,ie)=>{ie===ne&&(P=P.concat(O(Z,ie)))}),$n(F.children,(Z,ie)=>{ie!==ne&&(P=P.concat(O(Z,ie)))}),P}(F,(Z,ie)=>ie===ne?[Fe(F.children[ne],!1)]:[`${ie}:${Fe(Z,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[ne]?`${Dt(F)}/${P[0]}`:`${Dt(F)}/(${P.join("//")})`}}function De(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Me(F){return De(F).replace(/%3B/gi,";")}function We(F){return De(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xt(F){return decodeURIComponent(F)}function Fn(F){return Xt(F.replace(/\+/g,"%20"))}function Gn(F){return`${We(F.path)}${function An(F){return Object.keys(F).map(O=>`;${We(O)}=${We(F[O])}`).join("")}(F.parameters)}`}const qi=/^[^\/()?;=#]+/;function rr(F){const O=F.match(qi);return O?O[0]:""}const En=/^[^=?&#]+/,ui=/^[^&#]+/;class Lr{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let P={};this.peekStartsWith("/(")&&(this.capture("/"),P=this.parseParens(!0));let Z={};return this.peekStartsWith("(")&&(Z=this.parseParens(!1)),(O.length>0||Object.keys(P).length>0)&&(Z[ne]=new oe(O,P)),Z}parseSegment(){const O=rr(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(O),new Se(Xt(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const P=rr(this.remaining);if(!P)return;this.capture(P);let Z="";if(this.consumeOptional("=")){const ie=rr(this.remaining);ie&&(Z=ie,this.capture(Z))}O[Xt(P)]=Xt(Z)}parseQueryParam(O){const P=function ei(F){const O=F.match(En);return O?O[0]:""}(this.remaining);if(!P)return;this.capture(P);let Z="";if(this.consumeOptional("=")){const Ze=function or(F){const O=F.match(ui);return O?O[0]:""}(this.remaining);Ze&&(Z=Ze,this.capture(Z))}const ie=Fn(P),ve=Fn(Z);if(O.hasOwnProperty(ie)){let Ze=O[ie];Array.isArray(Ze)||(Ze=[Ze],O[ie]=Ze),Ze.push(ve)}else O[ie]=ve}parseParens(O){const P={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Z=rr(this.remaining),ie=this.remaining[Z.length];if("/"!==ie&&")"!==ie&&";"!==ie)throw new Error(`Cannot parse url '${this.url}'`);let ve;Z.indexOf(":")>-1?(ve=Z.slice(0,Z.indexOf(":")),this.capture(ve),this.capture(":")):O&&(ve=ne);const Ze=this.parseChildren();P[ve]=1===Object.keys(Ze).length?Ze[ne]:new oe([],Ze),this.consumeOptional("//")}return P}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new Error(`Expected "${O}".`)}}class pi{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const P=this.pathFromRoot(O);return P.length>1?P[P.length-2]:null}children(O){const P=Gs(O,this._root);return P?P.children.map(Z=>Z.value):[]}firstChild(O){const P=Gs(O,this._root);return P&&P.children.length>0?P.children[0].value:null}siblings(O){const P=Xi(O,this._root);return P.length<2?[]:P[P.length-2].children.map(ie=>ie.value).filter(ie=>ie!==O)}pathFromRoot(O){return Xi(O,this._root).map(P=>P.value)}}function Gs(F,O){if(F===O.value)return O;for(const P of O.children){const Z=Gs(F,P);if(Z)return Z}return null}function Xi(F,O){if(F===O.value)return[O];for(const P of O.children){const Z=Xi(F,P);if(Z.length)return Z.unshift(O),Z}return[]}class wo{constructor(O,P){this.value=O,this.children=P}toString(){return`TreeNode(${this.value})`}}function dr(F){const O={};return F&&F.children.forEach(P=>O[P.value.outlet]=P),O}class Yi extends pi{constructor(O,P){super(O),this.snapshot=P,br(this,O)}toString(){return this.snapshot.toString()}}function ss(F,O){const P=function Jo(F,O){const Ze=new Co([],{},{},"",{},ne,O,null,F.root,-1,{});return new fi("",new wo(Ze,[]))}(F,O),Z=new tt.X([new Se("",{})]),ie=new tt.X({}),ve=new tt.X({}),Ze=new tt.X({}),ct=new tt.X(""),nn=new yr(Z,ie,Ze,ct,ve,ne,O,P.root);return nn.snapshot=P.root,new Yi(new wo(nn,[]),P)}class yr{constructor(O,P,Z,ie,ve,Ze,ct,nn){this.url=O,this.params=P,this.queryParams=Z,this.fragment=ie,this.data=ve,this.outlet=Ze,this.component=ct,this._futureSnapshot=nn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dn.U)(O=>V(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dn.U)(O=>V(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kr(F,O="emptyOnly"){const P=F.pathFromRoot;let Z=0;if("always"!==O)for(Z=P.length-1;Z>=1;){const ie=P[Z],ve=P[Z-1];if(ie.routeConfig&&""===ie.routeConfig.path)Z--;else{if(ve.component)break;Z--}}return function sr(F){return F.reduce((O,P)=>({params:{...O.params,...P.params},data:{...O.data,...P.data},resolve:{...P.data,...O.resolve,...P.routeConfig?.data,...P._resolvedData}}),{params:{},data:{},resolve:{}})}(P.slice(Z))}class Co{constructor(O,P,Z,ie,ve,Ze,ct,nn,Bn,Ii,Qn,hr){this.url=O,this.params=P,this.queryParams=Z,this.fragment=ie,this.data=ve,this.outlet=Ze,this.component=ct,this.routeConfig=nn,this._urlSegment=Bn,this._lastPathIndex=Ii,this._correctedLastPathIndex=hr??Ii,this._resolve=Qn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=V(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=V(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Z=>Z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fi extends pi{constructor(O,P){super(P),this.url=O,br(this,P)}toString(){return ys(this._root)}}function br(F,O){O.value._routerState=F,O.children.forEach(P=>br(F,P))}function ys(F){const O=F.children.length>0?` { ${F.children.map(ys).join(", ")} } `:"";return`${F.value}${O}`}function Br(F){if(F.snapshot){const O=F.snapshot,P=F._futureSnapshot;F.snapshot=P,un(O.queryParams,P.queryParams)||F.queryParams.next(P.queryParams),O.fragment!==P.fragment&&F.fragment.next(P.fragment),un(O.params,P.params)||F.params.next(P.params),function Nt(F,O){if(F.length!==O.length)return!1;for(let P=0;P<F.length;++P)if(!un(F[P],O[P]))return!1;return!0}(O.url,P.url)||F.url.next(P.url),un(O.data,P.data)||F.data.next(P.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function Xr(F,O){const P=un(F.params,O.params)&&function Oe(F,O){return Ye(F,O)&&F.every((P,Z)=>un(P.parameters,O[Z].parameters))}(F.url,O.url);return P&&!(!F.parent!=!O.parent)&&(!F.parent||Xr(F.parent,O.parent))}function As(F,O,P){if(P&&F.shouldReuseRoute(O.value,P.value.snapshot)){const Z=P.value;Z._futureSnapshot=O.value;const ie=function xr(F,O,P){return O.children.map(Z=>{for(const ie of P.children)if(F.shouldReuseRoute(Z.value,ie.value.snapshot))return As(F,Z,ie);return As(F,Z)})}(F,O,P);return new wo(Z,ie)}{if(F.shouldAttach(O.value)){const ve=F.retrieve(O.value);if(null!==ve){const Ze=ve.route;return Ze.value._futureSnapshot=O.value,Ze.children=O.children.map(ct=>As(F,ct)),Ze}}const Z=function Hs(F){return new yr(new tt.X(F.url),new tt.X(F.params),new tt.X(F.queryParams),new tt.X(F.fragment),new tt.X(F.data),F.outlet,F.component,F)}(O.value),ie=O.children.map(ve=>As(F,ve));return new wo(Z,ie)}}function Mr(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function Is(F){return"object"==typeof F&&null!=F&&F.outlets}function fr(F,O,P,Z,ie){let ve={};if(Z&&$n(Z,(ct,nn)=>{ve[nn]=Array.isArray(ct)?ct.map(Bn=>`${Bn}`):`${ct}`}),F===O)return new ee(P,ve,ie);const Ze=Va(F,O,P);return new ee(Ze,ve,ie)}function Va(F,O,P){const Z={};return $n(F.children,(ie,ve)=>{Z[ve]=ie===O?P:Va(ie,O,P)}),new oe(F.segments,Z)}class ga{constructor(O,P,Z){if(this.isAbsolute=O,this.numberOfDoubleDots=P,this.commands=Z,O&&Z.length>0&&Mr(Z[0]))throw new Error("Root segment cannot have matrix parameters");const ie=Z.find(Is);if(ie&&ie!==Zn(Z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class as{constructor(O,P,Z){this.segmentGroup=O,this.processChildren=P,this.index=Z}}function Zs(F,O,P){if(F||(F=new oe([],{})),0===F.segments.length&&F.hasChildren())return Io(F,O,P);const Z=function _a(F,O,P){let Z=0,ie=O;const ve={match:!1,pathIndex:0,commandIndex:0};for(;ie<F.segments.length;){if(Z>=P.length)return ve;const Ze=F.segments[ie],ct=P[Z];if(Is(ct))break;const nn=`${ct}`,Bn=Z<P.length-1?P[Z+1]:null;if(ie>0&&void 0===nn)break;if(nn&&Bn&&"object"==typeof Bn&&void 0===Bn.outlets){if(!ya(nn,Bn,Ze))return ve;Z+=2}else{if(!ya(nn,{},Ze))return ve;Z++}ie++}return{match:!0,pathIndex:ie,commandIndex:Z}}(F,O,P),ie=P.slice(Z.commandIndex);if(Z.match&&Z.pathIndex<F.segments.length){const ve=new oe(F.segments.slice(0,Z.pathIndex),{});return ve.children[ne]=new oe(F.segments.slice(Z.pathIndex),F.children),Io(ve,0,ie)}return Z.match&&0===ie.length?new oe(F.segments,{}):Z.match&&!F.hasChildren()?Ps(F,O,P):Z.match?Io(F,0,ie):Ps(F,O,P)}function Io(F,O,P){if(0===P.length)return new oe(F.segments,{});{const Z=function jo(F){return Is(F[0])?F[0].outlets:{[ne]:F}}(P),ie={};return $n(Z,(ve,Ze)=>{"string"==typeof ve&&(ve=[ve]),null!==ve&&(ie[Ze]=Zs(F.children[Ze],O,ve))}),$n(F.children,(ve,Ze)=>{void 0===Z[Ze]&&(ie[Ze]=ve)}),new oe(F.segments,ie)}}function Ps(F,O,P){const Z=F.segments.slice(0,O);let ie=0;for(;ie<P.length;){const ve=P[ie];if(Is(ve)){const nn=Qa(ve.outlets);return new oe(Z,nn)}if(0===ie&&Mr(P[0])){Z.push(new Se(F.segments[O].path,Ws(P[0]))),ie++;continue}const Ze=Is(ve)?ve.outlets[ne]:`${ve}`,ct=ie<P.length-1?P[ie+1]:null;Ze&&ct&&Mr(ct)?(Z.push(new Se(Ze,Ws(ct))),ie+=2):(Z.push(new Se(Ze,{})),ie++)}return new oe(Z,{})}function Qa(F){const O={};return $n(F,(P,Z)=>{"string"==typeof P&&(P=[P]),null!==P&&(O[Z]=Ps(new oe([],{}),0,P))}),O}function Ws(F){const O={};return $n(F,(P,Z)=>O[Z]=`${P}`),O}function ya(F,O,P){return F==P.path&&un(O,P.parameters)}class Ua{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new va,this.attachRef=null}}class va{constructor(){this.contexts=new Map}onChildOutletCreated(O,P){const Z=this.getOrCreateContext(O);Z.outlet=P,this.contexts.set(O,Z)}onChildOutletDestroyed(O){const P=this.getContext(O);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const O=this.contexts;return this.contexts=new Map,O}onOutletReAttached(O){this.contexts=O}getOrCreateContext(O){let P=this.getContext(O);return P||(P=new Ua,this.contexts.set(O,P)),P}getContext(O){return this.contexts.get(O)||null}}let vs=(()=>{class F{constructor(P,Z,ie,ve,Ze){this.parentContexts=P,this.location=Z,this.changeDetector=ve,this.environmentInjector=Ze,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=ie||ne,P.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const P=this.parentContexts.getContext(this.name);P&&P.route&&(P.attachRef?this.attach(P.attachRef,P.route):this.activateWith(P.route,P.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const P=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(P.instance),P}attach(P,Z){this.activated=P,this._activatedRoute=Z,this.location.insert(P.hostView),this.attachEvents.emit(P.instance)}deactivate(){if(this.activated){const P=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(P)}}activateWith(P,Z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=P;const ie=this.location,Ze=P._futureSnapshot.component,ct=this.parentContexts.getOrCreateContext(this.name).children,nn=new ja(P,ct,ie.injector);if(Z&&function Po(F){return!!F.resolveComponentFactory}(Z)){const Bn=Z.resolveComponentFactory(Ze);this.activated=ie.createComponent(Bn,ie.length,nn)}else this.activated=ie.createComponent(Ze,{index:ie.length,injector:nn,environmentInjector:Z??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(P){return new(P||F)(l.Y36(va),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},F.\u0275dir=l.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),F})();class ja{constructor(O,P,Z){this.route=O,this.childContexts=P,this.parent=Z}get(O,P){return O===yr?this.route:O===va?this.childContexts:this.parent.get(O,P)}}let bs=(()=>{class F{}return F.\u0275fac=function(P){return new(P||F)},F.\u0275cmp=l.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(P,Z){1&P&&l._UZ(0,"router-outlet")},dependencies:[vs],encapsulation:2}),F})();function ba(F,O){return F.providers&&!F._injector&&(F._injector=(0,l.MMx)(F.providers,O,`Route: ${F.path}`)),F._injector??O}function Ys(F){const O=F.children&&F.children.map(Ys),P=O?{...F,children:O}:{...F};return!P.component&&!P.loadComponent&&(O||P.loadChildren)&&P.outlet&&P.outlet!==ne&&(P.component=bs),P}function $r(F){return F.outlet||ne}function ls(F,O){const P=F.filter(Z=>$r(Z)===O);return P.push(...F.filter(Z=>$r(Z)!==O)),P}function Fs(F){if(!F)return null;if(F.routeConfig?._injector)return F.routeConfig._injector;for(let O=F.parent;O;O=O.parent){const P=O.routeConfig;if(P?._loadedInjector)return P._loadedInjector;if(P?._injector)return P._injector}return null}class xa{constructor(O,P,Z,ie){this.routeReuseStrategy=O,this.futureState=P,this.currState=Z,this.forwardEvent=ie}activate(O){const P=this.futureState._root,Z=this.currState?this.currState._root:null;this.deactivateChildRoutes(P,Z,O),Br(this.futureState.root),this.activateChildRoutes(P,Z,O)}deactivateChildRoutes(O,P,Z){const ie=dr(P);O.children.forEach(ve=>{const Ze=ve.value.outlet;this.deactivateRoutes(ve,ie[Ze],Z),delete ie[Ze]}),$n(ie,(ve,Ze)=>{this.deactivateRouteAndItsChildren(ve,Z)})}deactivateRoutes(O,P,Z){const ie=O.value,ve=P?P.value:null;if(ie===ve)if(ie.component){const Ze=Z.getContext(ie.outlet);Ze&&this.deactivateChildRoutes(O,P,Ze.children)}else this.deactivateChildRoutes(O,P,Z);else ve&&this.deactivateRouteAndItsChildren(P,Z)}deactivateRouteAndItsChildren(O,P){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,P):this.deactivateRouteAndOutlet(O,P)}detachAndStoreRouteSubtree(O,P){const Z=P.getContext(O.value.outlet),ie=Z&&O.value.component?Z.children:P,ve=dr(O);for(const Ze of Object.keys(ve))this.deactivateRouteAndItsChildren(ve[Ze],ie);if(Z&&Z.outlet){const Ze=Z.outlet.detach(),ct=Z.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:Ze,route:O,contexts:ct})}}deactivateRouteAndOutlet(O,P){const Z=P.getContext(O.value.outlet),ie=Z&&O.value.component?Z.children:P,ve=dr(O);for(const Ze of Object.keys(ve))this.deactivateRouteAndItsChildren(ve[Ze],ie);Z&&Z.outlet&&(Z.outlet.deactivate(),Z.children.onOutletDeactivated(),Z.attachRef=null,Z.resolver=null,Z.route=null)}activateChildRoutes(O,P,Z){const ie=dr(P);O.children.forEach(ve=>{this.activateRoutes(ve,ie[ve.value.outlet],Z),this.forwardEvent(new zn(ve.value.snapshot))}),O.children.length&&this.forwardEvent(new Ln(O.value.snapshot))}activateRoutes(O,P,Z){const ie=O.value,ve=P?P.value:null;if(Br(ie),ie===ve)if(ie.component){const Ze=Z.getOrCreateContext(ie.outlet);this.activateChildRoutes(O,P,Ze.children)}else this.activateChildRoutes(O,P,Z);else if(ie.component){const Ze=Z.getOrCreateContext(ie.outlet);if(this.routeReuseStrategy.shouldAttach(ie.snapshot)){const ct=this.routeReuseStrategy.retrieve(ie.snapshot);this.routeReuseStrategy.store(ie.snapshot,null),Ze.children.onOutletReAttached(ct.contexts),Ze.attachRef=ct.componentRef,Ze.route=ct.route.value,Ze.outlet&&Ze.outlet.attach(ct.componentRef,ct.route.value),Br(ct.route.value),this.activateChildRoutes(O,null,Ze.children)}else{const ct=Fs(ie.snapshot),nn=ct?.get(l._Vd)??null;Ze.attachRef=null,Ze.route=ie,Ze.resolver=nn,Ze.injector=ct,Ze.outlet&&Ze.outlet.activateWith(ie,Ze.injector),this.activateChildRoutes(O,null,Ze.children)}}else this.activateChildRoutes(O,null,Z)}}function Oo(F){return"function"==typeof F}function Qi(F){return F instanceof ee}const ge=Symbol("INITIAL_VALUE");function X(){return(0,bt.w)(F=>(0,Ue.a)(F.map(O=>O.pipe((0,Mt.q)(1),(0,Ot.O)(ge)))).pipe(Tn((O,P)=>{let Z=!1;return P.reduce((ie,ve,Ze)=>ie!==ge?ie:(ve===ge&&(Z=!0),Z||!1!==ve&&Ze!==P.length-1&&!Qi(ve)?ie:ve),O)},ge),(0,Bt.h)(O=>O!==ge),(0,dn.U)(O=>Qi(O)?O:!0===O),(0,Mt.q)(1)))}const xe={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pt(F,O,P){if(""===O.path)return"full"===O.pathMatch&&(F.hasChildren()||P.length>0)?{...xe}:{matched:!0,consumedSegments:[],remainingSegments:P,parameters:{},positionalParamSegments:{}};const ie=(O.matcher||Le)(P,F,O);if(!ie)return{...xe};const ve={};$n(ie.posParams,(ct,nn)=>{ve[nn]=ct.path});const Ze=ie.consumed.length>0?{...ve,...ie.consumed[ie.consumed.length-1].parameters}:ve;return{matched:!0,consumedSegments:ie.consumed,remainingSegments:P.slice(ie.consumed.length),parameters:Ze,positionalParamSegments:ie.posParams??{}}}function Yt(F,O,P,Z,ie="corrected"){if(P.length>0&&function ar(F,O,P){return P.some(Z=>lr(F,O,Z)&&$r(Z)!==ne)}(F,P,Z)){const Ze=new oe(O,function Hn(F,O,P,Z){const ie={};ie[ne]=Z,Z._sourceSegment=F,Z._segmentIndexShift=O.length;for(const ve of P)if(""===ve.path&&$r(ve)!==ne){const Ze=new oe([],{});Ze._sourceSegment=F,Ze._segmentIndexShift=O.length,ie[$r(ve)]=Ze}return ie}(F,O,Z,new oe(P,F.children)));return Ze._sourceSegment=F,Ze._segmentIndexShift=O.length,{segmentGroup:Ze,slicedSegments:[]}}if(0===P.length&&function er(F,O,P){return P.some(Z=>lr(F,O,Z))}(F,P,Z)){const Ze=new oe(F.segments,function gn(F,O,P,Z,ie,ve){const Ze={};for(const ct of Z)if(lr(F,P,ct)&&!ie[$r(ct)]){const nn=new oe([],{});nn._sourceSegment=F,nn._segmentIndexShift="legacy"===ve?F.segments.length:O.length,Ze[$r(ct)]=nn}return{...ie,...Ze}}(F,O,P,Z,F.children,ie));return Ze._sourceSegment=F,Ze._segmentIndexShift=O.length,{segmentGroup:Ze,slicedSegments:P}}const ve=new oe(F.segments,F.children);return ve._sourceSegment=F,ve._segmentIndexShift=O.length,{segmentGroup:ve,slicedSegments:P}}function lr(F,O,P){return(!(F.hasChildren()||O.length>0)||"full"!==P.pathMatch)&&""===P.path}function di(F,O,P,Z){return!!($r(F)===Z||Z!==ne&&lr(O,P,F))&&("**"===F.path||pt(O,F,P).matched)}function tr(F,O,P){return 0===O.length&&!F.children[P]}class Ui{constructor(O){this.segmentGroup=O||null}}class ti{constructor(O){this.urlTree=O}}function es(F){return(0,dt._)(new Ui(F))}function Go(F){return(0,dt._)(new ti(F))}class Ks{constructor(O,P,Z,ie,ve){this.injector=O,this.configLoader=P,this.urlSerializer=Z,this.urlTree=ie,this.config=ve,this.allowRedirects=!0}apply(){const O=Yt(this.urlTree.root,[],[],this.config).segmentGroup,P=new oe(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,P,ne).pipe((0,dn.U)(ve=>this.createUrlTree(te(ve),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ht.K)(ve=>{if(ve instanceof ti)return this.allowRedirects=!1,this.match(ve.urlTree);throw ve instanceof Ui?this.noMatchError(ve):ve}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,ne).pipe((0,dn.U)(ie=>this.createUrlTree(te(ie),O.queryParams,O.fragment))).pipe((0,Ht.K)(ie=>{throw ie instanceof Ui?this.noMatchError(ie):ie}))}noMatchError(O){return new Error(`Cannot match any routes. URL Segment: '${O.segmentGroup}'`)}createUrlTree(O,P,Z){const ie=O.segments.length>0?new oe([],{[ne]:O}):O;return new ee(ie,P,Z)}expandSegmentGroup(O,P,Z,ie){return 0===Z.segments.length&&Z.hasChildren()?this.expandChildren(O,P,Z).pipe((0,dn.U)(ve=>new oe([],ve))):this.expandSegment(O,Z,P,Z.segments,ie,!0)}expandChildren(O,P,Z){const ie=[];for(const ve of Object.keys(Z.children))"primary"===ve?ie.unshift(ve):ie.push(ve);return(0,me.D)(ie).pipe((0,zt.b)(ve=>{const Ze=Z.children[ve],ct=ls(P,ve);return this.expandSegmentGroup(O,ct,Ze,ve).pipe((0,dn.U)(nn=>({segment:nn,outlet:ve})))}),Tn((ve,Ze)=>(ve[Ze.outlet]=Ze.segment,ve),{}),function $t(F,O){const P=arguments.length>=2;return Z=>Z.pipe(F?(0,Bt.h)((ie,ve)=>F(ie,ve,Z)):Gt.y,ke(1),P?(0,sn.d)(O):(0,$e.T)(()=>new st.K))}())}expandSegment(O,P,Z,ie,ve,Ze){return(0,me.D)(Z).pipe((0,zt.b)(ct=>this.expandSegmentAgainstRoute(O,P,Z,ct,ie,ve,Ze).pipe((0,Ht.K)(Bn=>{if(Bn instanceof Ui)return(0,Ce.of)(null);throw Bn}))),(0,Jt.P)(ct=>!!ct),(0,Ht.K)((ct,nn)=>{if(ct instanceof st.K||"EmptyError"===ct.name)return tr(P,ie,ve)?(0,Ce.of)(new oe([],{})):es(P);throw ct}))}expandSegmentAgainstRoute(O,P,Z,ie,ve,Ze,ct){return di(ie,P,ve,Ze)?void 0===ie.redirectTo?this.matchSegmentAgainstRoute(O,P,ie,ve,Ze):ct&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,P,Z,ie,ve,Ze):es(P):es(P)}expandSegmentAgainstRouteUsingRedirect(O,P,Z,ie,ve,Ze){return"**"===ie.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,Z,ie,Ze):this.expandRegularSegmentAgainstRouteUsingRedirect(O,P,Z,ie,ve,Ze)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,P,Z,ie){const ve=this.applyRedirectCommands([],Z.redirectTo,{});return Z.redirectTo.startsWith("/")?Go(ve):this.lineralizeSegments(Z,ve).pipe((0,Nn.z)(Ze=>{const ct=new oe(Ze,{});return this.expandSegment(O,ct,P,Ze,ie,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,P,Z,ie,ve,Ze){const{matched:ct,consumedSegments:nn,remainingSegments:Bn,positionalParamSegments:Ii}=pt(P,ie,ve);if(!ct)return es(P);const Qn=this.applyRedirectCommands(nn,ie.redirectTo,Ii);return ie.redirectTo.startsWith("/")?Go(Qn):this.lineralizeSegments(ie,Qn).pipe((0,Nn.z)(hr=>this.expandSegment(O,P,Z,hr.concat(Bn),Ze,!1)))}matchSegmentAgainstRoute(O,P,Z,ie,ve){if("**"===Z.path)return O=ba(Z,O),Z.loadChildren?(Z._loadedRoutes?(0,Ce.of)({routes:Z._loadedRoutes,injector:Z._loadedInjector}):this.configLoader.loadChildren(O,Z)).pipe((0,dn.U)(Qn=>(Z._loadedRoutes=Qn.routes,Z._loadedInjector=Qn.injector,new oe(ie,{})))):(0,Ce.of)(new oe(ie,{}));const{matched:Ze,consumedSegments:ct,remainingSegments:nn}=pt(P,Z,ie);return Ze?(O=ba(Z,O),this.getChildConfig(O,Z,ie).pipe((0,Nn.z)(Ii=>{const Qn=Ii.injector??O,hr=Ii.routes,{segmentGroup:Nr,slicedSegments:Bo}=Yt(P,ct,nn,hr),$o=new oe(Nr.segments,Nr.children);if(0===Bo.length&&$o.hasChildren())return this.expandChildren(Qn,hr,$o).pipe((0,dn.U)(hs=>new oe(ct,hs)));if(0===hr.length&&0===Bo.length)return(0,Ce.of)(new oe(ct,{}));const Ma=$r(Z)===ve;return this.expandSegment(Qn,$o,hr,Bo,Ma?ne:ve,!0).pipe((0,dn.U)(Wa=>new oe(ct.concat(Wa.segments),Wa.children)))}))):es(P)}getChildConfig(O,P,Z){return P.children?(0,Ce.of)({routes:P.children,injector:O}):P.loadChildren?void 0!==P._loadedRoutes?(0,Ce.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.runCanLoadGuards(O,P,Z).pipe((0,Nn.z)(ie=>ie?this.configLoader.loadChildren(O,P).pipe((0,Rn.b)(ve=>{P._loadedRoutes=ve.routes,P._loadedInjector=ve.injector})):function Bs(F){return(0,dt._)(ce(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))}(P))):(0,Ce.of)({routes:[],injector:O})}runCanLoadGuards(O,P,Z){const ie=P.canLoad;if(!ie||0===ie.length)return(0,Ce.of)(!0);const ve=ie.map(Ze=>{const ct=O.get(Ze);let nn;if(function Ls(F){return F&&Oo(F.canLoad)}(ct))nn=ct.canLoad(P,Z);else{if(!Oo(ct))throw new Error("Invalid CanLoad guard");nn=ct(P,Z)}return kn(nn)});return(0,Ce.of)(ve).pipe(X(),(0,Rn.b)(Ze=>{if(!Qi(Ze))return;const ct=ce(`Redirecting to "${this.urlSerializer.serialize(Ze)}"`);throw ct.url=Ze,ct}),(0,dn.U)(Ze=>!0===Ze))}lineralizeSegments(O,P){let Z=[],ie=P.root;for(;;){if(Z=Z.concat(ie.segments),0===ie.numberOfChildren)return(0,Ce.of)(Z);if(ie.numberOfChildren>1||!ie.children[ne])return(0,dt._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${O.redirectTo}'`));ie=ie.children[ne]}}applyRedirectCommands(O,P,Z){return this.applyRedirectCreatreUrlTree(P,this.urlSerializer.parse(P),O,Z)}applyRedirectCreatreUrlTree(O,P,Z,ie){const ve=this.createSegmentGroup(O,P.root,Z,ie);return new ee(ve,this.createQueryParams(P.queryParams,this.urlTree.queryParams),P.fragment)}createQueryParams(O,P){const Z={};return $n(O,(ie,ve)=>{if("string"==typeof ie&&ie.startsWith(":")){const ct=ie.substring(1);Z[ve]=P[ct]}else Z[ve]=ie}),Z}createSegmentGroup(O,P,Z,ie){const ve=this.createSegments(O,P.segments,Z,ie);let Ze={};return $n(P.children,(ct,nn)=>{Ze[nn]=this.createSegmentGroup(O,ct,Z,ie)}),new oe(ve,Ze)}createSegments(O,P,Z,ie){return P.map(ve=>ve.path.startsWith(":")?this.findPosParam(O,ve,ie):this.findOrReturn(ve,Z))}findPosParam(O,P,Z){const ie=Z[P.path.substring(1)];if(!ie)throw new Error(`Cannot redirect to '${O}'. Cannot find '${P.path}'.`);return ie}findOrReturn(O,P){let Z=0;for(const ie of P){if(ie.path===O.path)return P.splice(Z),ie;Z++}return O}}function te(F){const O={};for(const Z of Object.keys(F.children)){const ve=te(F.children[Z]);(ve.segments.length>0||ve.hasChildren())&&(O[Z]=ve)}return function el(F){if(1===F.numberOfChildren&&F.children[ne]){const O=F.children[ne];return new oe(F.segments.concat(O.segments),O.children)}return F}(new oe(F.segments,O))}class G{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class Ee{constructor(O,P){this.component=O,this.route=P}}function kt(F,O,P){const Z=F._root;return Do(Z,O?O._root:null,P,[Z.value])}function Zr(F,O,P){return(Fs(O)??P).get(F)}function Do(F,O,P,Z,ie={canDeactivateChecks:[],canActivateChecks:[]}){const ve=dr(O);return F.children.forEach(Ze=>{(function ro(F,O,P,Z,ie={canDeactivateChecks:[],canActivateChecks:[]}){const ve=F.value,Ze=O?O.value:null,ct=P?P.getContext(F.value.outlet):null;if(Ze&&ve.routeConfig===Ze.routeConfig){const nn=function xs(F,O,P){if("function"==typeof P)return P(F,O);switch(P){case"pathParamsChange":return!Ye(F.url,O.url);case"pathParamsOrQueryParamsChange":return!Ye(F.url,O.url)||!un(F.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xr(F,O)||!un(F.queryParams,O.queryParams);default:return!Xr(F,O)}}(Ze,ve,ve.routeConfig.runGuardsAndResolvers);nn?ie.canActivateChecks.push(new G(Z)):(ve.data=Ze.data,ve._resolvedData=Ze._resolvedData),Do(F,O,ve.component?ct?ct.children:null:P,Z,ie),nn&&ct&&ct.outlet&&ct.outlet.isActivated&&ie.canDeactivateChecks.push(new Ee(ct.outlet.component,Ze))}else Ze&&cs(O,ct,ie),ie.canActivateChecks.push(new G(Z)),Do(F,null,ve.component?ct?ct.children:null:P,Z,ie)})(Ze,ve[Ze.value.outlet],P,Z.concat([Ze.value]),ie),delete ve[Ze.value.outlet]}),$n(ve,(Ze,ct)=>cs(Ze,P.getContext(ct),ie)),ie}function cs(F,O,P){const Z=dr(F),ie=F.value;$n(Z,(ve,Ze)=>{cs(ve,ie.component?O?O.children.getContext(Ze):null:O,P)}),P.canDeactivateChecks.push(new Ee(ie.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,ie))}class nr{}function xl(F){return new q.y(O=>O.error(F))}class Yu{constructor(O,P,Z,ie,ve,Ze){this.rootComponentType=O,this.config=P,this.urlTree=Z,this.url=ie,this.paramsInheritanceStrategy=ve,this.relativeLinkResolution=Ze}recognize(){const O=Yt(this.urlTree.root,[],[],this.config.filter(Ze=>void 0===Ze.redirectTo),this.relativeLinkResolution).segmentGroup,P=this.processSegmentGroup(this.config,O,ne);if(null===P)return null;const Z=new Co([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ne,this.rootComponentType,null,this.urlTree.root,-1,{}),ie=new wo(Z,P),ve=new fi(this.url,ie);return this.inheritParamsAndData(ve._root),ve}inheritParamsAndData(O){const P=O.value,Z=Kr(P,this.paramsInheritanceStrategy);P.params=Object.freeze(Z.params),P.data=Object.freeze(Z.data),O.children.forEach(ie=>this.inheritParamsAndData(ie))}processSegmentGroup(O,P,Z){return 0===P.segments.length&&P.hasChildren()?this.processChildren(O,P):this.processSegment(O,P,P.segments,Z)}processChildren(O,P){const Z=[];for(const ve of Object.keys(P.children)){const Ze=P.children[ve],ct=ls(O,ve),nn=this.processSegmentGroup(ct,Ze,ve);if(null===nn)return null;Z.push(...nn)}const ie=Vr(Z);return function Ro(F){F.sort((O,P)=>O.value.outlet===ne?-1:P.value.outlet===ne?1:O.value.outlet.localeCompare(P.value.outlet))}(ie),ie}processSegment(O,P,Z,ie){for(const ve of O){const Ze=this.processSegmentAgainstRoute(ve,P,Z,ie);if(null!==Ze)return Ze}return tr(P,Z,ie)?[]:null}processSegmentAgainstRoute(O,P,Z,ie){if(O.redirectTo||!di(O,P,Z,ie))return null;let ve,Ze=[],ct=[];if("**"===O.path){const Nr=Z.length>0?Zn(Z).parameters:{},Bo=Ho(P)+Z.length;ve=new Co(Z,Nr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tr(O),$r(O),O.component??O._loadedComponent??null,O,Qs(P),Bo,wl(O),Bo)}else{const Nr=pt(P,O,Z);if(!Nr.matched)return null;Ze=Nr.consumedSegments,ct=Nr.remainingSegments;const Bo=Ho(P)+Ze.length;ve=new Co(Ze,Nr.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tr(O),$r(O),O.component??O._loadedComponent??null,O,Qs(P),Bo,wl(O),Bo)}const nn=function Vl(F){return F.children?F.children:F.loadChildren?F._loadedRoutes:[]}(O),{segmentGroup:Bn,slicedSegments:Ii}=Yt(P,Ze,ct,nn.filter(Nr=>void 0===Nr.redirectTo),this.relativeLinkResolution);if(0===Ii.length&&Bn.hasChildren()){const Nr=this.processChildren(nn,Bn);return null===Nr?null:[new wo(ve,Nr)]}if(0===nn.length&&0===Ii.length)return[new wo(ve,[])];const Qn=$r(O)===ie,hr=this.processSegment(nn,Bn,Ii,Qn?ne:ie);return null===hr?null:[new wo(ve,hr)]}}function oo(F){const O=F.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function Vr(F){const O=[],P=new Set;for(const Z of F){if(!oo(Z)){O.push(Z);continue}const ie=O.find(ve=>Z.value.routeConfig===ve.value.routeConfig);void 0!==ie?(ie.children.push(...Z.children),P.add(ie)):O.push(Z)}for(const Z of P){const ie=Vr(Z.children);O.push(new wo(Z.value,ie))}return O.filter(Z=>!P.has(Z))}function Qs(F){let O=F;for(;O._sourceSegment;)O=O._sourceSegment;return O}function Ho(F){let O=F,P=O._segmentIndexShift??0;for(;O._sourceSegment;)O=O._sourceSegment,P+=O._segmentIndexShift??0;return P-1}function Tr(F){return F.data||{}}function wl(F){return F.resolve||{}}const Js=Symbol("RouteTitle");function zs(F){return"string"==typeof F.title||null===F.title}function Fo(F){return(0,bt.w)(O=>{const P=F(O);return P?(0,me.D)(P).pipe((0,dn.U)(()=>O)):(0,Ce.of)(O)})}class Cs extends class Ul{shouldDetach(O){return!1}store(O,P){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,P){return O.routeConfig===P.routeConfig}}{}const ca=new l.OlP("ROUTES");let ea=(()=>{class F{constructor(P,Z){this.injector=P,this.compiler=Z,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(P){if(this.componentLoaders.get(P))return this.componentLoaders.get(P);if(P._loadedComponent)return(0,Ce.of)(P._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(P);const Z=kn(P.loadComponent()).pipe((0,Rn.b)(ve=>{this.onLoadEndListener&&this.onLoadEndListener(P),P._loadedComponent=ve}),(0,bn.x)(()=>{this.componentLoaders.delete(P)})),ie=new ye(Z,()=>new Zt.x).pipe(ze());return this.componentLoaders.set(P,ie),ie}loadChildren(P,Z){if(this.childrenLoaders.get(Z))return this.childrenLoaders.get(Z);if(Z._loadedRoutes)return(0,Ce.of)({routes:Z._loadedRoutes,injector:Z._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Z);const ve=this.loadModuleFactoryOrRoutes(Z.loadChildren).pipe((0,dn.U)(ct=>{this.onLoadEndListener&&this.onLoadEndListener(Z);let nn,Bn,Ii=!1;Array.isArray(ct)?Bn=ct:(nn=ct.create(P).injector,Bn=Wt(nn.get(ca,[],l.XFs.Self|l.XFs.Optional)));return{routes:Bn.map(Ys),injector:nn}}),(0,bn.x)(()=>{this.childrenLoaders.delete(Z)})),Ze=new ye(ve,()=>new Zt.x).pipe(ze());return this.childrenLoaders.set(Z,Ze),Ze}loadModuleFactoryOrRoutes(P){return kn(P()).pipe((0,Nn.z)(Z=>Z instanceof l.YKP||Array.isArray(Z)?(0,Ce.of)(Z):(0,me.D)(this.compiler.compileModuleAsync(Z))))}}return F.\u0275fac=function(P){return new(P||F)(l.LFG(l.zs3),l.LFG(l.Sil))},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac}),F})();class Ca{shouldProcessUrl(O){return!0}extract(O){return O}merge(O,P){return O}}function Ha(F){throw F}function Wr(F,O,P){return O.parse("/")}const uo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lo=(()=>{class F{constructor(P,Z,ie,ve,Ze,ct,nn){this.rootComponentType=P,this.urlSerializer=Z,this.rootContexts=ie,this.location=ve,this.config=nn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Zt.x,this.errorHandler=Ha,this.malformedUriErrorHandler=Wr,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Ce.of)(void 0),this.urlHandlingStrategy=new Ca,this.routeReuseStrategy=new Cs,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ze.get(ea),this.configLoader.onLoadEndListener=hr=>this.triggerEvent(new Hi(hr)),this.configLoader.onLoadStartListener=hr=>this.triggerEvent(new Fi(hr)),this.ngModule=Ze.get(l.h0i),this.console=Ze.get(l.c2e);const Qn=Ze.get(l.R0b);this.isNgZoneEnabled=Qn instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(nn),this.currentUrlTree=function ni(){return new ee(new oe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ss(this.currentUrlTree,this.rootComponentType),this.transitions=new tt.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(P){const Z=this.events;return P.pipe((0,Bt.h)(ie=>0!==ie.id),(0,dn.U)(ie=>({...ie,extractedUrl:this.urlHandlingStrategy.extract(ie.rawUrl)})),(0,bt.w)(ie=>{let ve=!1,Ze=!1;return(0,Ce.of)(ie).pipe((0,Rn.b)(ct=>{this.currentNavigation={id:ct.id,initialUrl:ct.rawUrl,extractedUrl:ct.extractedUrl,trigger:ct.source,extras:ct.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,bt.w)(ct=>{const nn=this.browserUrlTree.toString(),Bn=!this.navigated||ct.extractedUrl.toString()!==nn||nn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Bn)&&this.urlHandlingStrategy.shouldProcessUrl(ct.rawUrl))return Ai(ct.source)&&(this.browserUrlTree=ct.extractedUrl),(0,Ce.of)(ct).pipe((0,bt.w)(Qn=>{const hr=this.transitions.getValue();return Z.next(new en(Qn.id,this.serializeUrl(Qn.extractedUrl),Qn.source,Qn.restoredState)),hr!==this.transitions.getValue()?vt.E:Promise.resolve(Qn)}),function N(F,O,P,Z){return(0,bt.w)(ie=>function la(F,O,P,Z,ie){return new Ks(F,O,P,Z,ie).apply()}(F,O,P,ie.extractedUrl,Z).pipe((0,dn.U)(ve=>({...ie,urlAfterRedirects:ve}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Rn.b)(Qn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Qn.urlAfterRedirects}}),function Bc(F,O,P,Z,ie){return(0,Nn.z)(ve=>function qu(F,O,P,Z,ie="emptyOnly",ve="legacy"){try{const Ze=new Yu(F,O,P,Z,ie,ve).recognize();return null===Ze?xl(new nr):(0,Ce.of)(Ze)}catch(Ze){return xl(Ze)}}(F,O,ve.urlAfterRedirects,P(ve.urlAfterRedirects),Z,ie).pipe((0,dn.U)(Ze=>({...ve,targetSnapshot:Ze}))))}(this.rootComponentType,this.config,Qn=>this.serializeUrl(Qn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rn.b)(Qn=>{if("eager"===this.urlUpdateStrategy){if(!Qn.extras.skipLocationChange){const Nr=this.urlHandlingStrategy.merge(Qn.urlAfterRedirects,Qn.rawUrl);this.setBrowserUrl(Nr,Qn)}this.browserUrlTree=Qn.urlAfterRedirects}const hr=new xn(Qn.id,this.serializeUrl(Qn.extractedUrl),this.serializeUrl(Qn.urlAfterRedirects),Qn.targetSnapshot);Z.next(hr)}));if(Bn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:hr,extractedUrl:Nr,source:Bo,restoredState:$o,extras:Ma}=ct,ds=new en(hr,this.serializeUrl(Nr),Bo,$o);Z.next(ds);const Wa=ss(Nr,this.rootComponentType).snapshot;return(0,Ce.of)({...ct,targetSnapshot:Wa,urlAfterRedirects:Nr,extras:{...Ma,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=ct.rawUrl,ct.resolve(null),vt.E}),(0,Rn.b)(ct=>{const nn=new Dn(ct.id,this.serializeUrl(ct.extractedUrl),this.serializeUrl(ct.urlAfterRedirects),ct.targetSnapshot);this.triggerEvent(nn)}),(0,dn.U)(ct=>({...ct,guards:kt(ct.targetSnapshot,ct.currentSnapshot,this.rootContexts)})),function Wu(F,O){return(0,Nn.z)(P=>{const{targetSnapshot:Z,currentSnapshot:ie,guards:{canActivateChecks:ve,canDeactivateChecks:Ze}}=P;return 0===Ze.length&&0===ve.length?(0,Ce.of)({...P,guardsResult:!0}):function Lc(F,O,P,Z){return(0,me.D)(F).pipe((0,Nn.z)(ie=>function tl(F,O,P,Z,ie){const ve=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!ve||0===ve.length)return(0,Ce.of)(!0);const Ze=ve.map(ct=>{const nn=Zr(ct,O,ie);let Bn;if(function K(F){return F&&Oo(F.canDeactivate)}(nn))Bn=kn(nn.canDeactivate(F,O,P,Z));else{if(!Oo(nn))throw new Error("Invalid CanDeactivate guard");Bn=kn(nn(F,O,P,Z))}return Bn.pipe((0,Jt.P)())});return(0,Ce.of)(Ze).pipe(X())}(ie.component,ie.route,P,O,Z)),(0,Jt.P)(ie=>!0!==ie,!0))}(Ze,Z,ie,F).pipe((0,Nn.z)(ct=>ct&&function bl(F){return"boolean"==typeof F}(ct)?function bu(F,O,P,Z){return(0,me.D)(O).pipe((0,zt.b)(ie=>(0,rt.z)(function ko(F,O){return null!==F&&O&&O(new ur(F)),(0,Ce.of)(!0)}(ie.route.parent,Z),function Xs(F,O){return null!==F&&O&&O(new pr(F)),(0,Ce.of)(!0)}(ie.route,Z),function wa(F,O,P){const Z=O[O.length-1],ve=O.slice(0,O.length-1).reverse().map(Ze=>function Wn(F){const O=F.routeConfig?F.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:F,guards:O}:null}(Ze)).filter(Ze=>null!==Ze).map(Ze=>(0,At.P)(()=>{const ct=Ze.guards.map(nn=>{const Bn=Zr(nn,Ze.node,P);let Ii;if(function Sr(F){return F&&Oo(F.canActivateChild)}(Bn))Ii=kn(Bn.canActivateChild(Z,F));else{if(!Oo(Bn))throw new Error("Invalid CanActivateChild guard");Ii=kn(Bn(Z,F))}return Ii.pipe((0,Jt.P)())});return(0,Ce.of)(ct).pipe(X())}));return(0,Ce.of)(ve).pipe(X())}(F,ie.path,P),function ts(F,O,P){const Z=O.routeConfig?O.routeConfig.canActivate:null;if(!Z||0===Z.length)return(0,Ce.of)(!0);const ie=Z.map(ve=>(0,At.P)(()=>{const Ze=Zr(ve,O,P);let ct;if(function fo(F){return F&&Oo(F.canActivate)}(Ze))ct=kn(Ze.canActivate(O,F));else{if(!Oo(Ze))throw new Error("Invalid CanActivate guard");ct=kn(Ze(O,F))}return ct.pipe((0,Jt.P)())}));return(0,Ce.of)(ie).pipe(X())}(F,ie.route,P))),(0,Jt.P)(ie=>!0!==ie,!0))}(Z,ve,F,O):(0,Ce.of)(ct)),(0,dn.U)(ct=>({...P,guardsResult:ct})))})}(this.ngModule.injector,ct=>this.triggerEvent(ct)),(0,Rn.b)(ct=>{if(Qi(ct.guardsResult)){const Bn=ce(`Redirecting to "${this.serializeUrl(ct.guardsResult)}"`);throw Bn.url=ct.guardsResult,Bn}const nn=new jn(ct.id,this.serializeUrl(ct.extractedUrl),this.serializeUrl(ct.urlAfterRedirects),ct.targetSnapshot,!!ct.guardsResult);this.triggerEvent(nn)}),(0,Bt.h)(ct=>!!ct.guardsResult||(this.restoreHistory(ct),this.cancelNavigationTransition(ct,""),!1)),Fo(ct=>{if(ct.guards.canActivateChecks.length)return(0,Ce.of)(ct).pipe((0,Rn.b)(nn=>{const Bn=new wn(nn.id,this.serializeUrl(nn.extractedUrl),this.serializeUrl(nn.urlAfterRedirects),nn.targetSnapshot);this.triggerEvent(Bn)}),(0,bt.w)(nn=>{let Bn=!1;return(0,Ce.of)(nn).pipe(function Ur(F,O){return(0,Nn.z)(P=>{const{targetSnapshot:Z,guards:{canActivateChecks:ie}}=P;if(!ie.length)return(0,Ce.of)(P);let ve=0;return(0,me.D)(ie).pipe((0,zt.b)(Ze=>function us(F,O,P,Z){const ie=F.routeConfig,ve=F._resolve;return void 0!==ie?.title&&!zs(ie)&&(ve[Js]=ie.title),function co(F,O,P,Z){const ie=function Ns(F){return[...Object.keys(F),...Object.getOwnPropertySymbols(F)]}(F);if(0===ie.length)return(0,Ce.of)({});const ve={};return(0,me.D)(ie).pipe((0,Nn.z)(Ze=>function wr(F,O,P,Z){const ie=Zr(F,O,Z);return kn(ie.resolve?ie.resolve(O,P):ie(O,P))}(F[Ze],O,P,Z).pipe((0,Jt.P)(),(0,Rn.b)(ct=>{ve[Ze]=ct}))),ke(1),(0,gi.h)(ve),(0,Ht.K)(Ze=>Ze instanceof st.K?vt.E:(0,dt._)(Ze)))}(ve,F,O,Z).pipe((0,dn.U)(Ze=>(F._resolvedData=Ze,F.data=Kr(F,P).resolve,ie&&zs(ie)&&(F.data[Js]=ie.title),null)))}(Ze.route,Z,F,O)),(0,Rn.b)(()=>ve++),ke(1),(0,Nn.z)(Ze=>ve===ie.length?(0,Ce.of)(P):vt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Rn.b)({next:()=>Bn=!0,complete:()=>{Bn||(this.restoreHistory(nn),this.cancelNavigationTransition(nn,"At least one route resolver didn't emit any value."))}}))}),(0,Rn.b)(nn=>{const Bn=new hi(nn.id,this.serializeUrl(nn.extractedUrl),this.serializeUrl(nn.urlAfterRedirects),nn.targetSnapshot);this.triggerEvent(Bn)}))}),Fo(()=>this.afterPreactivation()),Fo(ct=>{const nn=Bn=>{const Ii=[];Bn.routeConfig?.loadComponent&&!Bn.routeConfig._loadedComponent&&Ii.push(this.configLoader.loadComponent(Bn.routeConfig).pipe((0,Rn.b)(Qn=>{Bn.component=Qn}),(0,dn.U)(()=>{})));for(const Qn of Bn.children)Ii.push(...nn(Qn));return Ii};return(0,Ue.a)(nn(ct.targetSnapshot.root)).pipe((0,sn.d)(),(0,Mt.q)(1))}),(0,dn.U)(ct=>{const nn=function Eo(F,O,P){const Z=As(F,O._root,P?P._root:void 0);return new Yi(Z,O)}(this.routeReuseStrategy,ct.targetSnapshot,ct.currentRouterState);return{...ct,targetRouterState:nn}}),(0,Rn.b)(ct=>{this.currentUrlTree=ct.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ct.urlAfterRedirects,ct.rawUrl),this.routerState=ct.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ct.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ct),this.browserUrlTree=ct.urlAfterRedirects)}),((F,O,P)=>(0,dn.U)(Z=>(new xa(O,Z.targetRouterState,Z.currentRouterState,P).activate(F),Z)))(this.rootContexts,this.routeReuseStrategy,ct=>this.triggerEvent(ct)),(0,Rn.b)({next(){ve=!0},complete(){ve=!0}}),(0,bn.x)(()=>{ve||Ze||this.cancelNavigationTransition(ie,`Navigation ID ${ie.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===ie.id&&(this.currentNavigation=null)}),(0,Ht.K)(ct=>{if(Ze=!0,function Ae(F){return F&&F[W]}(ct)){const nn=Qi(ct.url);nn||(this.navigated=!0,this.restoreHistory(ie,!0));const Bn=new It(ie.id,this.serializeUrl(ie.extractedUrl),ct.message);if(Z.next(Bn),nn){const Ii=this.urlHandlingStrategy.merge(ct.url,this.rawUrlTree),Qn={skipLocationChange:ie.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ai(ie.source)};this.scheduleNavigation(Ii,"imperative",null,Qn,{resolve:ie.resolve,reject:ie.reject,promise:ie.promise})}else ie.resolve(!1)}else{this.restoreHistory(ie,!0);const nn=new Vt(ie.id,this.serializeUrl(ie.extractedUrl),ct);Z.next(nn);try{ie.resolve(this.errorHandler(ct))}catch(Bn){ie.reject(Bn)}}return vt.E}))}))}resetRootComponentType(P){this.rootComponentType=P,this.routerState.root.component=this.rootComponentType}setTransition(P){this.transitions.next({...this.transitions.value,...P})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(P=>{const Z="popstate"===P.type?"popstate":"hashchange";"popstate"===Z&&setTimeout(()=>{const ie={replaceUrl:!0},ve=P.state?.navigationId?P.state:null;if(ve){const ct={...ve};delete ct.navigationId,delete ct.\u0275routerPageId,0!==Object.keys(ct).length&&(ie.state=ct)}const Ze=this.parseUrl(P.url);this.scheduleNavigation(Ze,Z,ve,ie)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(P){this.events.next(P)}resetConfig(P){this.config=P.map(Ys),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(P,Z={}){const{relativeTo:ie,queryParams:ve,fragment:Ze,queryParamsHandling:ct,preserveFragment:nn}=Z,Bn=ie||this.routerState.root,Ii=nn?this.currentUrlTree.fragment:Ze;let Qn=null;switch(ct){case"merge":Qn={...this.currentUrlTree.queryParams,...ve};break;case"preserve":Qn=this.currentUrlTree.queryParams;break;default:Qn=ve||null}return null!==Qn&&(Qn=this.removeEmptyProps(Qn)),function io(F,O,P,Z,ie){if(0===P.length)return fr(O.root,O.root,O.root,Z,ie);const ve=function pc(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new ga(!0,0,F);let O=0,P=!1;const Z=F.reduce((ie,ve,Ze)=>{if("object"==typeof ve&&null!=ve){if(ve.outlets){const ct={};return $n(ve.outlets,(nn,Bn)=>{ct[Bn]="string"==typeof nn?nn.split("/"):nn}),[...ie,{outlets:ct}]}if(ve.segmentPath)return[...ie,ve.segmentPath]}return"string"!=typeof ve?[...ie,ve]:0===Ze?(ve.split("/").forEach((ct,nn)=>{0==nn&&"."===ct||(0==nn&&""===ct?P=!0:".."===ct?O++:""!=ct&&ie.push(ct))}),ie):[...ie,ve]},[]);return new ga(P,O,Z)}(P);return ve.toRoot()?fr(O.root,O.root,new oe([],{}),Z,ie):function Ze(nn){const Bn=function vl(F,O,P,Z){return F.isAbsolute?new as(O.root,!0,0):-1===Z?new as(P,P===O.root,0):function $s(F,O,P){let Z=F,ie=O,ve=P;for(;ve>ie;){if(ve-=ie,Z=Z.parent,!Z)throw new Error("Invalid number of '../'");ie=Z.segments.length}return new as(Z,!1,ie-ve)}(P,Z+(Mr(F.commands[0])?0:1),F.numberOfDoubleDots)}(ve,O,F.snapshot?._urlSegment,nn),Ii=Bn.processChildren?Io(Bn.segmentGroup,Bn.index,ve.commands):Zs(Bn.segmentGroup,Bn.index,ve.commands);return fr(O.root,Bn.segmentGroup,Ii,Z,ie)}(F.snapshot?._lastPathIndex)}(Bn,this.currentUrlTree,P,Qn,Ii??null)}navigateByUrl(P,Z={skipLocationChange:!1}){const ie=Qi(P)?P:this.parseUrl(P),ve=this.urlHandlingStrategy.merge(ie,this.rawUrlTree);return this.scheduleNavigation(ve,"imperative",null,Z)}navigate(P,Z={skipLocationChange:!1}){return function Cl(F){for(let O=0;O<F.length;O++){const P=F[O];if(null==P)throw new Error(`The requested path contains ${P} segment at index ${O}`)}}(P),this.navigateByUrl(this.createUrlTree(P,Z),Z)}serializeUrl(P){return this.urlSerializer.serialize(P)}parseUrl(P){let Z;try{Z=this.urlSerializer.parse(P)}catch(ie){Z=this.malformedUriErrorHandler(ie,this.urlSerializer,P)}return Z}isActive(P,Z){let ie;if(ie=!0===Z?{...uo}:!1===Z?{...jl}:Z,Qi(P))return lt(this.currentUrlTree,P,ie);const ve=this.parseUrl(P);return lt(this.currentUrlTree,ve,ie)}removeEmptyProps(P){return Object.keys(P).reduce((Z,ie)=>{const ve=P[ie];return null!=ve&&(Z[ie]=ve),Z},{})}processNavigations(){this.navigations.subscribe(P=>{this.navigated=!0,this.lastSuccessfulId=P.id,this.currentPageId=P.targetPageId,this.events.next(new si(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),P.resolve(!0)},P=>{this.console.warn(`Unhandled Navigation Error: ${P}`)})}scheduleNavigation(P,Z,ie,ve,Ze){if(this.disposed)return Promise.resolve(!1);let ct,nn,Bn;Ze?(ct=Ze.resolve,nn=Ze.reject,Bn=Ze.promise):Bn=new Promise((hr,Nr)=>{ct=hr,nn=Nr});const Ii=++this.navigationId;let Qn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ie=this.location.getState()),Qn=ie&&ie.\u0275routerPageId?ie.\u0275routerPageId:ve.replaceUrl||ve.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Qn=0,this.setTransition({id:Ii,targetPageId:Qn,source:Z,restoredState:ie,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:P,extras:ve,resolve:ct,reject:nn,promise:Bn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bn.catch(hr=>Promise.reject(hr))}setBrowserUrl(P,Z){const ie=this.urlSerializer.serialize(P),ve={...Z.extras.state,...this.generateNgRouterState(Z.id,Z.targetPageId)};this.location.isCurrentPathEqualTo(ie)||Z.extras.replaceUrl?this.location.replaceState(ie,"",ve):this.location.go(ie,"",ve)}restoreHistory(P,Z=!1){if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-P.targetPageId;"popstate"!==P.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===ie?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===ie&&(this.resetState(P),this.browserUrlTree=P.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(Z&&this.resetState(P),this.resetUrlToCurrentUrlTree())}resetState(P){this.routerState=P.currentRouterState,this.currentUrlTree=P.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,P.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(P,Z){const ie=new It(P.id,this.serializeUrl(P.extractedUrl),Z);this.triggerEvent(ie),P.resolve(!1)}generateNgRouterState(P,Z){return"computed"===this.canceledNavigationResolution?{navigationId:P,\u0275routerPageId:Z}:{navigationId:P}}}return F.\u0275fac=function(P){l.$Z()},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac}),F})();function Ai(F){return"imperative"!==F}let $a=(()=>{class F{constructor(P,Z,ie,ve,Ze){this.router=P,this.route=Z,this.tabIndexAttribute=ie,this.renderer=ve,this.el=Ze,this.commands=null,this.onChanges=new Zt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(P){if(null!=this.tabIndexAttribute)return;const Z=this.renderer,ie=this.el.nativeElement;null!==P?Z.setAttribute(ie,"tabindex",P):Z.removeAttribute(ie,"tabindex")}ngOnChanges(P){this.onChanges.next(this)}set routerLink(P){null!=P?(this.commands=Array.isArray(P)?P:[P],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const P={skipLocationChange:(0,l.D6c)(this.skipLocationChange),replaceUrl:(0,l.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,P),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,l.D6c)(this.preserveFragment)})}}return F.\u0275fac=function(P){return new(P||F)(l.Y36(Lo),l.Y36(yr),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},F.\u0275dir=l.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(P,Z){1&P&&l.NdJ("click",function(){return Z.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),F})(),nl=(()=>{class F{constructor(P,Z,ie){this.router=P,this.route=Z,this.locationStrategy=ie,this.commands=null,this.href=null,this.onChanges=new Zt.x,this.subscription=P.events.subscribe(ve=>{ve instanceof si&&this.updateTargetUrlAndHref()})}set routerLink(P){this.commands=null!=P?Array.isArray(P)?P:[P]:null}ngOnChanges(P){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(P,Z,ie,ve,Ze){if(0!==P||Z||ie||ve||Ze||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ct={skipLocationChange:(0,l.D6c)(this.skipLocationChange),replaceUrl:(0,l.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ct),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,l.D6c)(this.preserveFragment)})}}return F.\u0275fac=function(P){return new(P||F)(l.Y36(Lo),l.Y36(yr),l.Y36(I.S$))},F.\u0275dir=l.lG2({type:F,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(P,Z){1&P&&l.NdJ("click",function(ve){return Z.onClick(ve.button,ve.ctrlKey,ve.shiftKey,ve.altKey,ve.metaKey)}),2&P&&l.uIk("target",Z.target)("href",Z.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),F})(),il=(()=>{class F{constructor(P,Z,ie,ve,Ze,ct){this.router=P,this.element=Z,this.renderer=ie,this.cdr=ve,this.link=Ze,this.linkWithHref=ct,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=P.events.subscribe(nn=>{nn instanceof si&&this.update()})}ngAfterContentInit(){(0,Ce.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ce.of)(null)).pipe((0,wi.J)()).subscribe(P=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const P=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(Z=>!!Z).map(Z=>Z.onChanges);this.linkInputChangesSubscription=(0,me.D)(P).pipe((0,wi.J)()).subscribe(Z=>{this.isActive!==this.isLinkActive(this.router)(Z)&&this.update()})}set routerLinkActive(P){const Z=Array.isArray(P)?P:P.split(" ");this.classes=Z.filter(ie=>!!ie)}ngOnChanges(P){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const P=this.hasActiveLinks();this.isActive!==P&&(this.isActive=P,this.cdr.markForCheck(),this.classes.forEach(Z=>{P?this.renderer.addClass(this.element.nativeElement,Z):this.renderer.removeClass(this.element.nativeElement,Z)}),P&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(P))})}isLinkActive(P){const Z=function fc(F){return!!F.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ie=>!!ie.urlTree&&P.isActive(ie.urlTree,Z)}hasActiveLinks(){const P=this.isLinkActive(this.router);return this.link&&P(this.link)||this.linkWithHref&&P(this.linkWithHref)||this.links.some(P)||this.linksWithHrefs.some(P)}}return F.\u0275fac=function(P){return new(P||F)(l.Y36(Lo),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36($a,8),l.Y36(nl,8))},F.\u0275dir=l.lG2({type:F,selectors:[["","routerLinkActive",""]],contentQueries:function(P,Z,ie){if(1&P&&(l.Suo(ie,$a,5),l.Suo(ie,nl,5)),2&P){let ve;l.iGM(ve=l.CRH())&&(Z.links=ve),l.iGM(ve=l.CRH())&&(Z.linksWithHrefs=ve)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[l.TTD]}),F})();class El{buildTitle(O){let P,Z=O.root;for(;void 0!==Z;)P=this.getResolvedTitleForRoute(Z)??P,Z=Z.children.find(ie=>ie.outlet===ne);return P}getResolvedTitleForRoute(O){return O.data[Js]}}let mc=(()=>{class F extends El{constructor(P){super(),this.title=P}updateTitle(P){const Z=this.buildTitle(P);void 0!==Z&&this.title.setTitle(Z)}}return F.\u0275fac=function(P){return new(P||F)(l.LFG(Pi.Dx))},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();class rl{}class gc{preload(O,P){return(0,Ce.of)(null)}}let Vs=(()=>{class F{constructor(P,Z,ie,ve,Ze){this.router=P,this.injector=ie,this.preloadingStrategy=ve,this.loader=Ze}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(P=>P instanceof si),(0,zt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(P,Z){const ie=[];for(const ve of Z){ve.providers&&!ve._injector&&(ve._injector=(0,l.MMx)(ve.providers,P,`Route: ${ve.path}`));const Ze=ve._injector??P,ct=ve._loadedInjector??Ze;ve.loadChildren&&!ve._loadedRoutes||ve.loadComponent&&!ve._loadedComponent?ie.push(this.preloadConfig(Ze,ve)):(ve.children||ve._loadedRoutes)&&ie.push(this.processRoutes(ct,ve.children??ve._loadedRoutes))}return(0,me.D)(ie).pipe((0,wi.J)())}preloadConfig(P,Z){return this.preloadingStrategy.preload(Z,()=>{let ie;ie=Z.loadChildren&&void 0===Z.canLoad?this.loader.loadChildren(P,Z):(0,Ce.of)(null);const ve=ie.pipe((0,Nn.z)(Ze=>null===Ze?(0,Ce.of)(void 0):(Z._loadedRoutes=Ze.routes,Z._loadedInjector=Ze.injector,this.processRoutes(Ze.injector??P,Ze.routes))));if(Z.loadComponent&&!Z._loadedComponent){const Ze=this.loader.loadComponent(Z);return(0,me.D)([ve,Ze]).pipe((0,wi.J)())}return ve})}}return F.\u0275fac=function(P){return new(P||F)(l.LFG(Lo),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(rl),l.LFG(ea))},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac}),F})(),Ea=(()=>{class F{constructor(P,Z,ie={}){this.router=P,this.viewportScroller=Z,this.options=ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ie.scrollPositionRestoration=ie.scrollPositionRestoration||"disabled",ie.anchorScrolling=ie.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(P=>{P instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=P.navigationTrigger,this.restoredId=P.restoredState?P.restoredState.navigationId:0):P instanceof si&&(this.lastId=P.id,this.scheduleScrollEvent(P,this.router.parseUrl(P.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(P=>{P instanceof qt&&(P.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(P.position):P.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(P.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(P,Z){this.router.triggerEvent(new qt(P,"popstate"===this.lastSource?this.store[this.restoredId]:null,Z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(P){l.$Z()},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac}),F})();const Jr=new l.OlP("ROUTER_CONFIGURATION"),Gl=new l.OlP("ROUTER_FORROOT_GUARD"),Hl=[I.Ye,{provide:_t,useClass:ot},{provide:Lo,useFactory:function Zl(F,O,P,Z,ie,ve,Ze={},ct,nn,Bn,Ii){const Qn=new Lo(null,F,O,P,Z,ie,Wt(ve));return Bn&&(Qn.urlHandlingStrategy=Bn),Ii&&(Qn.routeReuseStrategy=Ii),Qn.titleStrategy=nn??ct,function ol(F,O){F.errorHandler&&(O.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(O.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(O.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(O.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(O.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(O.urlUpdateStrategy=F.urlUpdateStrategy),F.canceledNavigationResolution&&(O.canceledNavigationResolution=F.canceledNavigationResolution)}(Ze,Qn),Qn},deps:[_t,va,I.Ye,l.zs3,l.Sil,ca,Jr,mc,[El,new l.FiY],[class ta{},new l.FiY],[class mo{},new l.FiY]]},va,{provide:yr,useFactory:function Un(F){return F.routerState.root},deps:[Lo]},Vs,gc,class Mo{preload(O,P){return P().pipe((0,Ht.K)(()=>(0,Ce.of)(null)))}},{provide:Jr,useValue:{enableTracing:!1}},ea];function Nc(){return new l.PXZ("Router",Lo)}let xu=(()=>{class F{constructor(P,Z){}static forRoot(P,Z){return{ngModule:F,providers:[Hl,zc(P),{provide:Gl,useFactory:So,deps:[[Lo,new l.FiY,new l.tp0]]},{provide:Jr,useValue:Z||{}},{provide:I.S$,useFactory:Da,deps:[I.lw,[new l.tBr(I.mr),new l.FiY],Jr]},{provide:Ea,useFactory:$l,deps:[Lo,I.EM,Jr]},{provide:rl,useExisting:Z&&Z.preloadingStrategy?Z.preloadingStrategy:gc},{provide:l.PXZ,multi:!0,useFactory:Nc},[Dl,{provide:l.ip1,multi:!0,useFactory:Ml,deps:[Dl]},{provide:Za,useFactory:Wl,deps:[Dl]},{provide:l.tb,multi:!0,useExisting:Za}]]}}static forChild(P){return{ngModule:F,providers:[zc(P)]}}}return F.\u0275fac=function(P){return new(P||F)(l.LFG(Gl,8),l.LFG(Lo,8))},F.\u0275mod=l.oAB({type:F}),F.\u0275inj=l.cJS({}),F})();function $l(F,O,P){return P.scrollOffset&&O.setOffset(P.scrollOffset),new Ea(F,O,P)}function Da(F,O,P={}){return P.useHash?new I.Do(F,O):new I.b0(F,O)}function So(F){return"guarded"}function zc(F){return[{provide:l.deG,multi:!0,useValue:F},{provide:ca,multi:!0,useValue:F}]}let Dl=(()=>{class F{constructor(P){this.injector=P,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Zt.x}appInitializer(){return this.injector.get(I.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Z=null;const ie=new Promise(ct=>Z=ct),ve=this.injector.get(Lo),Ze=this.injector.get(Jr);return"disabled"===Ze.initialNavigation?(ve.setUpLocationChangeListener(),Z(!0)):"enabledBlocking"===Ze.initialNavigation?(ve.afterPreactivation=()=>this.initNavigation?(0,Ce.of)(void 0):(this.initNavigation=!0,Z(!0),this.resultOfPreactivationDone),ve.initialNavigation()):Z(!0),ie})}bootstrapListener(P){const Z=this.injector.get(Jr),ie=this.injector.get(Vs),ve=this.injector.get(Ea),Ze=this.injector.get(Lo),ct=this.injector.get(l.z2F);P===ct.components[0]&&(("enabledNonBlocking"===Z.initialNavigation||void 0===Z.initialNavigation)&&Ze.initialNavigation(),ie.setUpPreloading(),ve.init(),Ze.resetRootComponentType(ct.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(P){return new(P||F)(l.LFG(l.zs3))},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac}),F})();function Ml(F){return F.appInitializer.bind(F)}function Wl(F){return F.bootstrapListener.bind(F)}const Za=new l.OlP("Router Initializer")}},Sn=>{Sn(Sn.s=2987)}]);