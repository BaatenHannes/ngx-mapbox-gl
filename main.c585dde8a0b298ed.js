(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[792],{8235:($n,Tt,H)=>{"use strict";H.d(Tt,{i:()=>ge});var D=H(6939),l=H(3953);const ue=["*"];function h(Te,nt){1&Te&&l.SdG(0)}let ge=(()=>{class Te{constructor(ke,Ve){this.injector=ke,this.appRef=Ve}ngAfterViewInit(){const ke=document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items");if(!ke)throw new Error("LayoutToolbarMenuComponent: No target found");this.portalOutlet=new D.aI(ke,void 0,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}static#e=this.\u0275fac=function(Ve){return new(Ve||Te)(l.rXU(l.zZn),l.rXU(l.o8S))};static#t=this.\u0275cmp=l.VBU({type:Te,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Ve,st){if(1&Ve&&l.GBs(D.bV,5),2&Ve){let rt;l.mGM(rt=l.lsd())&&(st.portal=rt.first)}},inputs:{position:"position"},ngContentSelectors:ue,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Ve,st){1&Ve&&(l.NAR(),l.DNE(0,h,1,0,"ng-template",0))},dependencies:[D.Qq],encapsulation:2})}return Te})()},5459:($n,Tt,H)=>{"use strict";H.d(Tt,{C:()=>Te});var D=H(3953),l=H(803),ue=H(5911),h=H(9213),ge=H(8834);let Te=(()=>{class nt{static#e=this.\u0275fac=function(st){return new(st||nt)};static#t=this.\u0275cmp=D.VBU({type:nt,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-mapbox-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/Wykks/ngx-mapbox-gl"],["svgIcon","github"]],template:function(st,rt){1&st&&(D.j41(0,"mat-toolbar",0)(1,"div"),D.nrm(2,"div",1),D.j41(3,"a",2),D.nrm(4,"mat-icon",3),D.EFF(5," ngx-mapbox-gl "),D.k0s(),D.j41(6,"a",4),D.EFF(7," Demo "),D.k0s(),D.j41(8,"a",5),D.EFF(9," Documentation "),D.k0s()(),D.j41(10,"div"),D.nrm(11,"div",6),D.j41(12,"a",7),D.nrm(13,"mat-icon",8),D.EFF(14," GitHub "),D.k0s()()(),D.nrm(15,"router-outlet"))},dependencies:[l.n3,l.Wk,ue.KQ,h.An,ge.It],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]})}return nt})()},5874:($n,Tt,H)=>{"use strict";H.d(Tt,{R:()=>rt});var D=H(6939),l=H(177),ue=H(8834),h=H(9213),ge=H(5911),Te=H(803),Ve=(H(8235),H(5459),H(3953));let rt=(()=>{class ut{static#e=this.\u0275fac=function(bt){return new(bt||ut)};static#t=this.\u0275mod=Ve.$C({type:ut});static#n=this.\u0275inj=Ve.G2t({imports:[l.MD,Te.iI,ge.s5,h.m_,ue.Hl,D.jc]})}return ut})()},9401:($n,Tt,H)=>{"use strict";var D=H(345),l=H(3953),ue=H(803);let h=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-root"]],decls:1,vars:0,template:function(_,C){1&_&&l.nrm(0,"router-outlet")},dependencies:[ue.n3],encapsulation:2})}return m})();var ge=H(9213),Te=H(9969);function ke(m){return new l.wOt(3e3,!1)}function ri(m){switch(m.length){case 0:return new Te.sf;case 1:return m[0];default:return new Te.ui(m)}}function Jn(m,w,a=new Map,_=new Map){const C=[],N=[];let ee=-1,ve=null;if(w.forEach(ct=>{const Dt=ct.get("offset"),dn=Dt==ee,cn=dn&&ve||new Map;ct.forEach((ci,Di)=>{let pi=Di,wi=ci;if("offset"!==Di)switch(pi=m.normalizePropertyName(pi,C),wi){case Te.FX:wi=a.get(Di);break;case Te.kp:wi=_.get(Di);break;default:wi=m.normalizeStyleValue(Di,pi,wi,C)}cn.set(pi,wi)}),dn||N.push(cn),ve=cn,ee=Dt}),C.length)throw function Fn(m){return new l.wOt(3502,!1)}();return N}function fi(m,w,a,_){switch(w){case"start":m.onStart(()=>_(a&&wt(a,"start",m)));break;case"done":m.onDone(()=>_(a&&wt(a,"done",m)));break;case"destroy":m.onDestroy(()=>_(a&&wt(a,"destroy",m)))}}function wt(m,w,a){const N=qt(m.element,m.triggerName,m.fromState,m.toState,w||m.phaseName,a.totalTime??m.totalTime,!!a.disabled),ee=m._data;return null!=ee&&(N._data=ee),N}function qt(m,w,a,_,C="",N=0,ee){return{element:m,triggerName:w,fromState:a,toState:_,phaseName:C,totalTime:N,disabled:!!ee}}function yn(m,w,a){let _=m.get(w);return _||m.set(w,_=a),_}function gi(m){const w=m.indexOf(":");return[m.substring(1,w),m.slice(w+1)]}const yi=typeof document>"u"?null:document.documentElement;function di(m){const w=m.parentNode||m.host||null;return w===yi?null:w}let _r=null,Lr=!1;function qe(m,w){for(;w;){if(w===m)return!0;w=di(w)}return!1}function Ze(m,w,a){if(a)return Array.from(m.querySelectorAll(w));const _=m.querySelector(w);return _?[_]:[]}let Je=(()=>{class m{validateStyleProperty(a){return function zr(m){_r||(_r=function Ae(){return typeof document<"u"?document.body:null}()||{},Lr=!!_r.style&&"WebkitAppearance"in _r.style);let w=!0;return _r.style&&!function Yi(m){return"ebkit"==m.substring(1,6)}(m)&&(w=m in _r.style,!w&&Lr&&(w="Webkit"+m.charAt(0).toUpperCase()+m.slice(1)in _r.style)),w}(a)}containsElement(a,_){return qe(a,_)}getParentElement(a){return di(a)}query(a,_,C){return Ze(a,_,C)}computeStyle(a,_,C){return C||""}animate(a,_,C,N,ee,ve=[],ct){return new Te.sf(C,N)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac})}return m})();class Ue{static#e=this.NOOP=new Je}class vt{}const hn=1e3,ji="ng-enter",ei="ng-leave",Mi="ng-trigger",fr=".ng-trigger",no="ng-animating",ln=".ng-animating";function bi(m){if("number"==typeof m)return m;const w=m.match(/^(-?[\.\d]+)(m?s)/);return!w||w.length<2?0:$t(parseFloat(w[1]),w[2])}function $t(m,w){return"s"===w?m*hn:m}function zn(m,w,a){return m.hasOwnProperty("duration")?m:function Cn(m,w,a){let C,N=0,ee="";if("string"==typeof m){const ve=m.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ve)return w.push(ke()),{duration:0,delay:0,easing:""};C=$t(parseFloat(ve[1]),ve[2]);const ct=ve[3];null!=ct&&(N=$t(parseFloat(ct),ve[4]));const Dt=ve[5];Dt&&(ee=Dt)}else C=m;if(!a){let ve=!1,ct=w.length;C<0&&(w.push(function Ve(){return new l.wOt(3100,!1)}()),ve=!0),N<0&&(w.push(function st(){return new l.wOt(3101,!1)}()),ve=!0),ve&&w.splice(ct,0,ke())}return{duration:C,delay:N,easing:ee}}(m,w,a)}function U(m,w,a){w.forEach((_,C)=>{const N=be(C);a&&!a.has(C)&&a.set(C,m.style[N]),m.style[N]=_})}function K(m,w){w.forEach((a,_)=>{const C=be(_);m.style[C]=""})}function de(m){return Array.isArray(m)?1==m.length?m[0]:(0,Te.K2)(m):m}const Xe=new RegExp("{{\\s*(.+?)\\s*}}","g");function De(m){let w=[];if("string"==typeof m){let a;for(;a=Xe.exec(m);)w.push(a[1]);Xe.lastIndex=0}return w}function me(m,w,a){const _=`${m}`,C=_.replace(Xe,(N,ee)=>{let ve=w[ee];return null==ve&&(a.push(function ut(m){return new l.wOt(3003,!1)}()),ve=""),ve.toString()});return C==_?m:C}const ne=/-+([a-z0-9])/g;function be(m){return m.replace(ne,(...w)=>w[1].toUpperCase())}function ye(m,w,a){switch(w.type){case Te.If.Trigger:return m.visitTrigger(w,a);case Te.If.State:return m.visitState(w,a);case Te.If.Transition:return m.visitTransition(w,a);case Te.If.Sequence:return m.visitSequence(w,a);case Te.If.Group:return m.visitGroup(w,a);case Te.If.Animate:return m.visitAnimate(w,a);case Te.If.Keyframes:return m.visitKeyframes(w,a);case Te.If.Style:return m.visitStyle(w,a);case Te.If.Reference:return m.visitReference(w,a);case Te.If.AnimateChild:return m.visitAnimateChild(w,a);case Te.If.AnimateRef:return m.visitAnimateRef(w,a);case Te.If.Query:return m.visitQuery(w,a);case Te.If.Stagger:return m.visitStagger(w,a);default:throw function Ot(m){return new l.wOt(3004,!1)}()}}function $e(m,w){return window.getComputedStyle(m)[w]}const mt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Lt extends vt{normalizePropertyName(w,a){return be(w)}normalizeStyleValue(w,a,_,C){let N="";const ee=_.toString().trim();if(mt.has(a)&&0!==_&&"0"!==_)if("number"==typeof _)N="px";else{const ve=_.match(/^[+-]?[\d\.]+([a-z]*)$/);ve&&0==ve[1].length&&C.push(function Mt(m,w){return new l.wOt(3005,!1)}())}return ee+N}}const or="*";const $s=new Set(["true","1"]),Hs=new Set(["false","0"]);function ya(m,w){const a=$s.has(m)||Hs.has(m),_=$s.has(w)||Hs.has(w);return(C,N)=>{let ee=m==or||m==C,ve=w==or||w==N;return!ee&&a&&"boolean"==typeof C&&(ee=C?$s.has(m):Hs.has(m)),!ve&&_&&"boolean"==typeof N&&(ve=N?$s.has(w):Hs.has(w)),ee&&ve}}const Ui=new RegExp("s*:selfs*,?","g");function Li(m,w,a,_){return new Oe(m).build(w,a,_)}class Oe{constructor(w){this._driver=w}build(w,a,_){const C=new Yt(a);return this._resetContextStyleTimingState(C),ye(this,de(w),C)}_resetContextStyleTimingState(w){w.currentQuerySelector="",w.collectedStyles=new Map,w.collectedStyles.set("",new Map),w.currentTime=0}visitTrigger(w,a){let _=a.queryCount=0,C=a.depCount=0;const N=[],ee=[];return"@"==w.name.charAt(0)&&a.errors.push(function bt(){return new l.wOt(3006,!1)}()),w.definitions.forEach(ve=>{if(this._resetContextStyleTimingState(a),ve.type==Te.If.State){const ct=ve,Dt=ct.name;Dt.toString().split(/\s*,\s*/).forEach(dn=>{ct.name=dn,N.push(this.visitState(ct,a))}),ct.name=Dt}else if(ve.type==Te.If.Transition){const ct=this.visitTransition(ve,a);_+=ct.queryCount,C+=ct.depCount,ee.push(ct)}else a.errors.push(function St(){return new l.wOt(3007,!1)}())}),{type:Te.If.Trigger,name:w.name,states:N,transitions:ee,queryCount:_,depCount:C,options:null}}visitState(w,a){const _=this.visitStyle(w.styles,a),C=w.options&&w.options.params||null;if(_.containsDynamicStyles){const N=new Set,ee=C||{};_.styles.forEach(ve=>{ve instanceof Map&&ve.forEach(ct=>{De(ct).forEach(Dt=>{ee.hasOwnProperty(Dt)||N.add(Dt)})})}),N.size&&a.errors.push(function zt(m,w){return new l.wOt(3008,!1)}(0,N.values()))}return{type:Te.If.State,name:w.name,style:_,options:C?{params:C}:null}}visitTransition(w,a){a.queryCount=0,a.depCount=0;const _=ye(this,de(w.animation),a),C=function Eo(m,w){const a=[];return"string"==typeof m?m.split(/\s*,\s*/).forEach(_=>function Gs(m,w,a){if(":"==m[0]){const ct=function Io(m,w){switch(m){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,_)=>parseFloat(_)>parseFloat(a);case":decrement":return(a,_)=>parseFloat(_)<parseFloat(a);default:return w.push(function He(m){return new l.wOt(3016,!1)}()),"* => *"}}(m,a);if("function"==typeof ct)return void w.push(ct);m=ct}const _=m.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==_||_.length<4)return a.push(function Wt(m){return new l.wOt(3015,!1)}()),w;const C=_[1],N=_[2],ee=_[3];w.push(ya(C,ee)),"<"==N[0]&&(C!=or||ee!=or)&&w.push(ya(ee,C))}(_,a,w)):a.push(m),a}(w.expr,a.errors);return{type:Te.If.Transition,matchers:C,animation:_,queryCount:a.queryCount,depCount:a.depCount,options:xn(w.options)}}visitSequence(w,a){return{type:Te.If.Sequence,steps:w.steps.map(_=>ye(this,_,a)),options:xn(w.options)}}visitGroup(w,a){const _=a.currentTime;let C=0;const N=w.steps.map(ee=>{a.currentTime=_;const ve=ye(this,ee,a);return C=Math.max(C,a.currentTime),ve});return a.currentTime=C,{type:Te.If.Group,steps:N,options:xn(w.options)}}visitAnimate(w,a){const _=function Dn(m,w){if(m.hasOwnProperty("duration"))return m;if("number"==typeof m)return Ti(zn(m,w).duration,0,"");const a=m;if(a.split(/\s+/).some(N=>"{"==N.charAt(0)&&"{"==N.charAt(1))){const N=Ti(0,0,"");return N.dynamic=!0,N.strValue=a,N}const C=zn(a,w);return Ti(C.duration,C.delay,C.easing)}(w.timings,a.errors);a.currentAnimateTimings=_;let C,N=w.styles?w.styles:(0,Te.iF)({});if(N.type==Te.If.Keyframes)C=this.visitKeyframes(N,a);else{let ee=w.styles,ve=!1;if(!ee){ve=!0;const Dt={};_.easing&&(Dt.easing=_.easing),ee=(0,Te.iF)(Dt)}a.currentTime+=_.duration+_.delay;const ct=this.visitStyle(ee,a);ct.isEmptyStep=ve,C=ct}return a.currentAnimateTimings=null,{type:Te.If.Animate,timings:_,style:C,options:null}}visitStyle(w,a){const _=this._makeStyleAst(w,a);return this._validateStyleAst(_,a),_}_makeStyleAst(w,a){const _=[],C=Array.isArray(w.styles)?w.styles:[w.styles];for(let ve of C)"string"==typeof ve?ve===Te.kp?_.push(ve):a.errors.push(new l.wOt(3002,!1)):_.push(new Map(Object.entries(ve)));let N=!1,ee=null;return _.forEach(ve=>{if(ve instanceof Map&&(ve.has("easing")&&(ee=ve.get("easing"),ve.delete("easing")),!N))for(let ct of ve.values())if(ct.toString().indexOf("{{")>=0){N=!0;break}}),{type:Te.If.Style,styles:_,easing:ee,offset:w.offset,containsDynamicStyles:N,options:null}}_validateStyleAst(w,a){const _=a.currentAnimateTimings;let C=a.currentTime,N=a.currentTime;_&&N>0&&(N-=_.duration+_.delay),w.styles.forEach(ee=>{"string"!=typeof ee&&ee.forEach((ve,ct)=>{const Dt=a.collectedStyles.get(a.currentQuerySelector),dn=Dt.get(ct);let cn=!0;dn&&(N!=C&&N>=dn.startTime&&C<=dn.endTime&&(a.errors.push(function An(m,w,a,_,C){return new l.wOt(3010,!1)}()),cn=!1),N=dn.startTime),cn&&Dt.set(ct,{startTime:N,endTime:C}),a.options&&function Ee(m,w,a){const _=w.params||{},C=De(m);C.length&&C.forEach(N=>{_.hasOwnProperty(N)||a.push(function rt(m){return new l.wOt(3001,!1)}())})}(ve,a.options,a.errors)})})}visitKeyframes(w,a){const _={type:Te.If.Keyframes,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function Zt(){return new l.wOt(3011,!1)}()),_;let N=0;const ee=[];let ve=!1,ct=!1,Dt=0;const dn=w.steps.map(Cr=>{const co=this._makeStyleAst(Cr,a);let ws=null!=co.offset?co.offset:function bn(m){if("string"==typeof m)return null;let w=null;if(Array.isArray(m))m.forEach(a=>{if(a instanceof Map&&a.has("offset")){const _=a;w=parseFloat(_.get("offset")),_.delete("offset")}});else if(m instanceof Map&&m.has("offset")){const a=m;w=parseFloat(a.get("offset")),a.delete("offset")}return w}(co.styles),So=0;return null!=ws&&(N++,So=co.offset=ws),ct=ct||So<0||So>1,ve=ve||So<Dt,Dt=So,ee.push(So),co});ct&&a.errors.push(function At(){return new l.wOt(3012,!1)}()),ve&&a.errors.push(function dt(){return new l.wOt(3200,!1)}());const cn=w.steps.length;let ci=0;N>0&&N<cn?a.errors.push(function sn(){return new l.wOt(3202,!1)}()):0==N&&(ci=1/(cn-1));const Di=cn-1,pi=a.currentTime,wi=a.currentAnimateTimings,ir=wi.duration;return dn.forEach((Cr,co)=>{const ws=ci>0?co==Di?1:ci*co:ee[co],So=ws*ir;a.currentTime=pi+wi.delay+So,wi.duration=So,this._validateStyleAst(Cr,a),Cr.offset=ws,_.styles.push(Cr)}),_}visitReference(w,a){return{type:Te.If.Reference,animation:ye(this,de(w.animation),a),options:xn(w.options)}}visitAnimateChild(w,a){return a.depCount++,{type:Te.If.AnimateChild,options:xn(w.options)}}visitAnimateRef(w,a){return{type:Te.If.AnimateRef,animation:this.visitReference(w.animation,a),options:xn(w.options)}}visitQuery(w,a){const _=a.currentQuerySelector,C=w.options||{};a.queryCount++,a.currentQuery=w;const[N,ee]=function Be(m){const w=!!m.split(/\s*,\s*/).find(a=>":self"==a);return w&&(m=m.replace(Ui,"")),m=m.replace(/@\*/g,fr).replace(/@\w+/g,a=>fr+"-"+a.slice(1)).replace(/:animating/g,ln),[m,w]}(w.selector);a.currentQuerySelector=_.length?_+" "+N:N,yn(a.collectedStyles,a.currentQuerySelector,new Map);const ve=ye(this,de(w.animation),a);return a.currentQuery=null,a.currentQuerySelector=_,{type:Te.If.Query,selector:N,limit:C.limit||0,optional:!!C.optional,includeSelf:ee,animation:ve,originalSelector:w.selector,options:xn(w.options)}}visitStagger(w,a){a.currentQuery||a.errors.push(function Gt(){return new l.wOt(3013,!1)}());const _="full"===w.timings?{duration:0,delay:0,easing:"full"}:zn(w.timings,a.errors,!0);return{type:Te.If.Stagger,animation:ye(this,de(w.animation),a),timings:_,options:null}}}class Yt{constructor(w){this.errors=w,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xn(m){return m?(m={...m}).params&&(m.params=function ot(m){return m?{...m}:null}(m.params)):m={},m}function Ti(m,w,a){return{duration:m,delay:w,easing:a}}function _i(m,w,a,_,C,N,ee=null,ve=!1){return{type:1,element:m,keyframes:w,preStyleProps:a,postStyleProps:_,duration:C,delay:N,totalTime:C+N,easing:ee,subTimeline:ve}}class wr{constructor(){this._map=new Map}get(w){return this._map.get(w)||[]}append(w,a){let _=this._map.get(w);_||this._map.set(w,_=[]),_.push(...a)}has(w){return this._map.has(w)}clear(){this._map.clear()}}const go=new RegExp(":enter","g"),ar=new RegExp(":leave","g");function er(m,w,a,_,C,N=new Map,ee=new Map,ve,ct,Dt=[]){return(new Vr).buildKeyframes(m,w,a,_,C,N,ee,ve,ct,Dt)}class Vr{buildKeyframes(w,a,_,C,N,ee,ve,ct,Dt,dn=[]){Dt=Dt||new wr;const cn=new Co(w,a,Dt,C,N,dn,[]);cn.options=ct;const ci=ct.delay?bi(ct.delay):0;cn.currentTimeline.delayNextStep(ci),cn.currentTimeline.setStyles([ee],null,cn.errors,ct),ye(this,_,cn);const Di=cn.timelines.filter(pi=>pi.containsAnimation());if(Di.length&&ve.size){let pi;for(let wi=Di.length-1;wi>=0;wi--){const ir=Di[wi];if(ir.element===a){pi=ir;break}}pi&&!pi.allowOnlyTimelineStyles()&&pi.setStyles([ve],null,cn.errors,ct)}return Di.length?Di.map(pi=>pi.buildKeyframes()):[_i(a,[],[],[],0,ci,"",!1)]}visitTrigger(w,a){}visitState(w,a){}visitTransition(w,a){}visitAnimateChild(w,a){const _=a.subInstructions.get(a.element);if(_){const C=a.createSubContext(w.options),N=a.currentTimeline.currentTime,ee=this._visitSubInstructions(_,C,C.options);N!=ee&&a.transformIntoNewTimeline(ee)}a.previousNode=w}visitAnimateRef(w,a){const _=a.createSubContext(w.options);_.transformIntoNewTimeline(),this._applyAnimationRefDelays([w.options,w.animation.options],a,_),this.visitReference(w.animation,_),a.transformIntoNewTimeline(_.currentTimeline.currentTime),a.previousNode=w}_applyAnimationRefDelays(w,a,_){for(const C of w){const N=C?.delay;if(N){const ee="number"==typeof N?N:bi(me(N,C?.params??{},a.errors));_.delayNextStep(ee)}}}_visitSubInstructions(w,a,_){let N=a.currentTimeline.currentTime;const ee=null!=_.duration?bi(_.duration):null,ve=null!=_.delay?bi(_.delay):null;return 0!==ee&&w.forEach(ct=>{const Dt=a.appendInstructionToTimeline(ct,ee,ve);N=Math.max(N,Dt.duration+Dt.delay)}),N}visitReference(w,a){a.updateOptions(w.options,!0),ye(this,w.animation,a),a.previousNode=w}visitSequence(w,a){const _=a.subContextCount;let C=a;const N=w.options;if(N&&(N.params||N.delay)&&(C=a.createSubContext(N),C.transformIntoNewTimeline(),null!=N.delay)){C.previousNode.type==Te.If.Style&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=Dr);const ee=bi(N.delay);C.delayNextStep(ee)}w.steps.length&&(w.steps.forEach(ee=>ye(this,ee,C)),C.currentTimeline.applyStylesToKeyframe(),C.subContextCount>_&&C.transformIntoNewTimeline()),a.previousNode=w}visitGroup(w,a){const _=[];let C=a.currentTimeline.currentTime;const N=w.options&&w.options.delay?bi(w.options.delay):0;w.steps.forEach(ee=>{const ve=a.createSubContext(w.options);N&&ve.delayNextStep(N),ye(this,ee,ve),C=Math.max(C,ve.currentTimeline.currentTime),_.push(ve.currentTimeline)}),_.forEach(ee=>a.currentTimeline.mergeTimelineCollectedStyles(ee)),a.transformIntoNewTimeline(C),a.previousNode=w}_visitTiming(w,a){if(w.dynamic){const _=w.strValue;return zn(a.params?me(_,a.params,a.errors):_,a.errors)}return{duration:w.duration,delay:w.delay,easing:w.easing}}visitAnimate(w,a){const _=a.currentAnimateTimings=this._visitTiming(w.timings,a),C=a.currentTimeline;_.delay&&(a.incrementTime(_.delay),C.snapshotCurrentStyles());const N=w.style;N.type==Te.If.Keyframes?this.visitKeyframes(N,a):(a.incrementTime(_.duration),this.visitStyle(N,a),C.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=w}visitStyle(w,a){const _=a.currentTimeline,C=a.currentAnimateTimings;!C&&_.hasCurrentStyleProperties()&&_.forwardFrame();const N=C&&C.easing||w.easing;w.isEmptyStep?_.applyEmptyStep(N):_.setStyles(w.styles,N,a.errors,a.options),a.previousNode=w}visitKeyframes(w,a){const _=a.currentAnimateTimings,C=a.currentTimeline.duration,N=_.duration,ve=a.createSubContext().currentTimeline;ve.easing=_.easing,w.styles.forEach(ct=>{ve.forwardTime((ct.offset||0)*N),ve.setStyles(ct.styles,ct.easing,a.errors,a.options),ve.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(ve),a.transformIntoNewTimeline(C+N),a.previousNode=w}visitQuery(w,a){const _=a.currentTimeline.currentTime,C=w.options||{},N=C.delay?bi(C.delay):0;N&&(a.previousNode.type===Te.If.Style||0==_&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Dr);let ee=_;const ve=a.invokeQuery(w.selector,w.originalSelector,w.limit,w.includeSelf,!!C.optional,a.errors);a.currentQueryTotal=ve.length;let ct=null;ve.forEach((Dt,dn)=>{a.currentQueryIndex=dn;const cn=a.createSubContext(w.options,Dt);N&&cn.delayNextStep(N),Dt===a.element&&(ct=cn.currentTimeline),ye(this,w.animation,cn),cn.currentTimeline.applyStylesToKeyframe(),ee=Math.max(ee,cn.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(ee),ct&&(a.currentTimeline.mergeTimelineCollectedStyles(ct),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=w}visitStagger(w,a){const _=a.parentContext,C=a.currentTimeline,N=w.timings,ee=Math.abs(N.duration),ve=ee*(a.currentQueryTotal-1);let ct=ee*a.currentQueryIndex;switch(N.duration<0?"reverse":N.easing){case"reverse":ct=ve-ct;break;case"full":ct=_.currentStaggerTime}const dn=a.currentTimeline;ct&&dn.delayNextStep(ct);const cn=dn.currentTime;ye(this,w.animation,a),a.previousNode=w,_.currentStaggerTime=C.currentTime-cn+(C.startTime-_.currentTimeline.startTime)}}const Dr={};class Co{constructor(w,a,_,C,N,ee,ve,ct){this._driver=w,this.element=a,this.subInstructions=_,this._enterClassName=C,this._leaveClassName=N,this.errors=ee,this.timelines=ve,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Dr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ct||new dr(this._driver,a,0),ve.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(w,a){if(!w)return;const _=w;let C=this.options;null!=_.duration&&(C.duration=bi(_.duration)),null!=_.delay&&(C.delay=bi(_.delay));const N=_.params;if(N){let ee=C.params;ee||(ee=this.options.params={}),Object.keys(N).forEach(ve=>{(!a||!ee.hasOwnProperty(ve))&&(ee[ve]=me(N[ve],ee,this.errors))})}}_copyOptions(){const w={};if(this.options){const a=this.options.params;if(a){const _=w.params={};Object.keys(a).forEach(C=>{_[C]=a[C]})}}return w}createSubContext(w=null,a,_){const C=a||this.element,N=new Co(this._driver,C,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(C,_||0));return N.previousNode=this.previousNode,N.currentAnimateTimings=this.currentAnimateTimings,N.options=this._copyOptions(),N.updateOptions(w),N.currentQueryIndex=this.currentQueryIndex,N.currentQueryTotal=this.currentQueryTotal,N.parentContext=this,this.subContextCount++,N}transformIntoNewTimeline(w){return this.previousNode=Dr,this.currentTimeline=this.currentTimeline.fork(this.element,w),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(w,a,_){const C={duration:a??w.duration,delay:this.currentTimeline.currentTime+(_??0)+w.delay,easing:""},N=new Rs(this._driver,w.element,w.keyframes,w.preStyleProps,w.postStyleProps,C,w.stretchStartingKeyframe);return this.timelines.push(N),C}incrementTime(w){this.currentTimeline.forwardTime(this.currentTimeline.duration+w)}delayNextStep(w){w>0&&this.currentTimeline.delayNextStep(w)}invokeQuery(w,a,_,C,N,ee){let ve=[];if(C&&ve.push(this.element),w.length>0){w=(w=w.replace(go,"."+this._enterClassName)).replace(ar,"."+this._leaveClassName);let Dt=this._driver.query(this.element,w,1!=_);0!==_&&(Dt=_<0?Dt.slice(Dt.length+_,Dt.length):Dt.slice(0,_)),ve.push(...Dt)}return!N&&0==ve.length&&ee.push(function Qt(m){return new l.wOt(3014,!1)}()),ve}}class dr{constructor(w,a,_,C){this._driver=w,this.element=a,this.startTime=_,this._elementTimelineStylesLookup=C,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(w){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+w),a&&this.snapshotCurrentStyles()):this.startTime+=w}fork(w,a){return this.applyStylesToKeyframe(),new dr(this._driver,w,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(w){this.applyStylesToKeyframe(),this.duration=w,this._loadKeyframe()}_updateStyle(w,a){this._localTimelineStyles.set(w,a),this._globalTimelineStyles.set(w,a),this._styleSummary.set(w,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(w){w&&this._previousKeyframe.set("easing",w);for(let[a,_]of this._globalTimelineStyles)this._backFill.set(a,_||Te.kp),this._currentKeyframe.set(a,Te.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(w,a,_,C){a&&this._previousKeyframe.set("easing",a);const N=C&&C.params||{},ee=function Yo(m,w){const a=new Map;let _;return m.forEach(C=>{if("*"===C){_??=w.keys();for(let N of _)a.set(N,Te.kp)}else for(let[N,ee]of C)a.set(N,ee)}),a}(w,this._globalTimelineStyles);for(let[ve,ct]of ee){const Dt=me(ct,N,_);this._pendingStyles.set(ve,Dt),this._localTimelineStyles.has(ve)||this._backFill.set(ve,this._globalTimelineStyles.get(ve)??Te.kp),this._updateStyle(ve,Dt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((w,a)=>{this._currentKeyframe.set(a,w)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((w,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,w)}))}snapshotCurrentStyles(){for(let[w,a]of this._localTimelineStyles)this._pendingStyles.set(w,a),this._updateStyle(w,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const w=[];for(let a in this._currentKeyframe)w.push(a);return w}mergeTimelineCollectedStyles(w){w._styleSummary.forEach((a,_)=>{const C=this._styleSummary.get(_);(!C||a.time>C.time)&&this._updateStyle(_,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const w=new Set,a=new Set,_=1===this._keyframes.size&&0===this.duration;let C=[];this._keyframes.forEach((ve,ct)=>{const Dt=new Map([...this._backFill,...ve]);Dt.forEach((dn,cn)=>{dn===Te.FX?w.add(cn):dn===Te.kp&&a.add(cn)}),_||Dt.set("offset",ct/this.duration),C.push(Dt)});const N=[...w.values()],ee=[...a.values()];if(_){const ve=C[0],ct=new Map(ve);ve.set("offset",0),ct.set("offset",1),C=[ve,ct]}return _i(this.element,C,N,ee,this.duration,this.startTime,this.easing,!1)}}class Rs extends dr{constructor(w,a,_,C,N,ee,ve=!1){super(w,a,ee.delay),this.keyframes=_,this.preStyleProps=C,this.postStyleProps=N,this._stretchStartingKeyframe=ve,this.timings={duration:ee.duration,delay:ee.delay,easing:ee.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let w=this.keyframes,{delay:a,duration:_,easing:C}=this.timings;if(this._stretchStartingKeyframe&&a){const N=[],ee=_+a,ve=a/ee,ct=new Map(w[0]);ct.set("offset",0),N.push(ct);const Dt=new Map(w[0]);Dt.set("offset",Or(ve)),N.push(Dt);const dn=w.length-1;for(let cn=1;cn<=dn;cn++){let ci=new Map(w[cn]);const Di=ci.get("offset");ci.set("offset",Or((a+Di*_)/ee)),N.push(ci)}_=ee,a=0,C="",w=N}return _i(this.element,w,this.preStyleProps,this.postStyleProps,_,a,C,!0)}}function Or(m,w=3){const a=Math.pow(10,w-1);return Math.round(m*a)/a}function Ws(m,w,a,_,C,N,ee,ve,ct,Dt,dn,cn,ci){return{type:0,element:m,triggerName:w,isRemovalTransition:C,fromState:a,fromStyles:N,toState:_,toStyles:ee,timelines:ve,queriedElements:ct,preStyleProps:Dt,postStyleProps:dn,totalTime:cn,errors:ci}}const Xs={};class Go{constructor(w,a,_){this._triggerName=w,this.ast=a,this._stateStyles=_}match(w,a,_,C){return function _l(m,w,a,_,C){return m.some(N=>N(w,a,_,C))}(this.ast.matchers,w,a,_,C)}buildStyles(w,a,_){let C=this._stateStyles.get("*");return void 0!==w&&(C=this._stateStyles.get(w?.toString())||C),C?C.buildStyles(a,_):new Map}build(w,a,_,C,N,ee,ve,ct,Dt,dn){const cn=[],ci=this.ast.options&&this.ast.options.params||Xs,pi=this.buildStyles(_,ve&&ve.params||Xs,cn),wi=ct&&ct.params||Xs,ir=this.buildStyles(C,wi,cn),Cr=new Set,co=new Map,ws=new Map,So="void"===C,sc={params:La(wi,ci),delay:this.ast.options?.delay},ac=dn?[]:er(w,a,this.ast.animation,N,ee,pi,ir,sc,Dt,cn);let jo=0;return ac.forEach(ts=>{jo=Math.max(ts.duration+ts.delay,jo)}),cn.length?Ws(a,this._triggerName,_,C,So,pi,ir,[],[],co,ws,jo,cn):(ac.forEach(ts=>{const ga=ts.element,Fc=yn(co,ga,new Set);ts.preStyleProps.forEach(_a=>Fc.add(_a));const qr=yn(ws,ga,new Set);ts.postStyleProps.forEach(_a=>qr.add(_a)),ga!==a&&Cr.add(ga)}),Ws(a,this._triggerName,_,C,So,pi,ir,ac,[...Cr.values()],co,ws,jo))}}function La(m,w){const a={...w};return Object.entries(m).forEach(([_,C])=>{null!=C&&(a[_]=C)}),a}class qa{constructor(w,a,_){this.styles=w,this.defaultParams=a,this.normalizer=_}buildStyles(w,a){const _=new Map,C=La(w,this.defaultParams);return this.styles.styles.forEach(N=>{"string"!=typeof N&&N.forEach((ee,ve)=>{ee&&(ee=me(ee,C,a));const ct=this.normalizer.normalizePropertyName(ve,a);ee=this.normalizer.normalizeStyleValue(ve,ct,ee,a),_.set(ve,ee)})}),_}}class Ru{constructor(w,a,_){this.name=w,this.ast=a,this._normalizer=_,this.transitionFactories=[],this.states=new Map,a.states.forEach(C=>{this.states.set(C.name,new qa(C.style,C.options&&C.options.params||{},_))}),yl(this.states,"true","1"),yl(this.states,"false","0"),a.transitions.forEach(C=>{this.transitionFactories.push(new Go(w,C,this.states))}),this.fallbackTransition=function ou(m,w,a){return new Go(m,{type:Te.If.Transition,animation:{type:Te.If.Sequence,steps:[],options:null},matchers:[(ee,ve)=>!0],options:null,queryCount:0,depCount:0},w)}(w,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(w,a,_,C){return this.transitionFactories.find(ee=>ee.match(w,a,_,C))||null}matchStyles(w,a,_){return this.fallbackTransition.buildStyles(w,a,_)}}function yl(m,w,a){m.has(w)?m.has(a)||m.set(a,m.get(w)):m.has(a)&&m.set(w,m.get(a))}const Ps=new wr;class Pu{constructor(w,a,_){this.bodyNode=w,this._driver=a,this._normalizer=_,this._animations=new Map,this._playersById=new Map,this.players=[]}register(w,a){const _=[],N=Li(this._driver,a,_,[]);if(_.length)throw function mn(m){return new l.wOt(3503,!1)}();this._animations.set(w,N)}_buildPlayer(w,a,_){const C=w.element,N=Jn(this._normalizer,w.keyframes,a,_);return this._driver.animate(C,N,w.duration,w.delay,w.easing,[],!0)}create(w,a,_={}){const C=[],N=this._animations.get(w);let ee;const ve=new Map;if(N?(ee=er(this._driver,a,N,ji,ei,new Map,new Map,_,Ps,C),ee.forEach(dn=>{const cn=yn(ve,dn.element,new Map);dn.postStyleProps.forEach(ci=>cn.set(ci,null))})):(C.push(function Sn(){return new l.wOt(3300,!1)}()),ee=[]),C.length)throw function ai(m){return new l.wOt(3504,!1)}();ve.forEach((dn,cn)=>{dn.forEach((ci,Di)=>{dn.set(Di,this._driver.computeStyle(cn,Di,Te.kp))})});const Dt=ri(ee.map(dn=>{const cn=ve.get(dn.element);return this._buildPlayer(dn,new Map,cn)}));return this._playersById.set(w,Dt),Dt.onDestroy(()=>this.destroy(w)),this.players.push(Dt),Dt}destroy(w){const a=this._getPlayer(w);a.destroy(),this._playersById.delete(w);const _=this.players.indexOf(a);_>=0&&this.players.splice(_,1)}_getPlayer(w){const a=this._playersById.get(w);if(!a)throw function Nn(m){return new l.wOt(3301,!1)}();return a}listen(w,a,_,C){const N=qt(a,"","","");return fi(this._getPlayer(w),_,N,C),()=>{}}command(w,a,_,C){if("register"==_)return void this.register(w,C[0]);if("create"==_)return void this.create(w,a,C[0]||{});const N=this._getPlayer(w);switch(_){case"play":N.play();break;case"pause":N.pause();break;case"reset":N.reset();break;case"restart":N.restart();break;case"finish":N.finish();break;case"init":N.init();break;case"setPosition":N.setPosition(parseFloat(C[0]));break;case"destroy":this.destroy(w)}}}const Ls="ng-animate-queued",Cs="ng-animate-disabled",Ko=[],ta={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Wl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rs="__ng_removed";class xa{get params(){return this.options.params}constructor(w,a=""){this.namespaceId=a;const _=w&&w.hasOwnProperty("value");if(this.value=function pc(m){return m??null}(_?w.value:w),_){const{value:N,...ee}=w;this.options=ee}else this.options={};this.options.params||(this.options.params={})}absorbOptions(w){const a=w.params;if(a){const _=this.options.params;Object.keys(a).forEach(C=>{null==_[C]&&(_[C]=a[C])})}}}const Zs="void",wa=new xa(Zs);class dc{constructor(w,a,_){this.id=w,this.hostElement=a,this._engine=_,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+w,Zo(a,this._hostClassName)}listen(w,a,_,C){if(!this._triggers.has(a))throw function tn(m,w){return new l.wOt(3302,!1)}();if(null==_||0==_.length)throw function an(m){return new l.wOt(3303,!1)}();if(!function na(m){return"start"==m||"done"==m}(_))throw function Pn(m,w){return new l.wOt(3400,!1)}();const N=yn(this._elementListeners,w,[]),ee={name:a,phase:_,callback:C};N.push(ee);const ve=yn(this._engine.statesByElement,w,new Map);return ve.has(a)||(Zo(w,Mi),Zo(w,Mi+"-"+a),ve.set(a,wa)),()=>{this._engine.afterFlush(()=>{const ct=N.indexOf(ee);ct>=0&&N.splice(ct,1),this._triggers.has(a)||ve.delete(a)})}}register(w,a){return!this._triggers.has(w)&&(this._triggers.set(w,a),!0)}_getTrigger(w){const a=this._triggers.get(w);if(!a)throw function ui(m){return new l.wOt(3401,!1)}();return a}trigger(w,a,_,C=!0){const N=this._getTrigger(a),ee=new ds(this.id,a,w);let ve=this._engine.statesByElement.get(w);ve||(Zo(w,Mi),Zo(w,Mi+"-"+a),this._engine.statesByElement.set(w,ve=new Map));let ct=ve.get(a);const Dt=new xa(_,this.id);if(!(_&&_.hasOwnProperty("value"))&&ct&&Dt.absorbOptions(ct.options),ve.set(a,Dt),ct||(ct=wa),Dt.value!==Zs&&ct.value===Dt.value){if(!function bl(m,w){const a=Object.keys(m),_=Object.keys(w);if(a.length!=_.length)return!1;for(let C=0;C<a.length;C++){const N=a[C];if(!w.hasOwnProperty(N)||m[N]!==w[N])return!1}return!0}(ct.params,Dt.params)){const wi=[],ir=N.matchStyles(ct.value,ct.params,wi),Cr=N.matchStyles(Dt.value,Dt.params,wi);wi.length?this._engine.reportError(wi):this._engine.afterFlush(()=>{K(w,ir),U(w,Cr)})}return}const ci=yn(this._engine.playersByElement,w,[]);ci.forEach(wi=>{wi.namespaceId==this.id&&wi.triggerName==a&&wi.queued&&wi.destroy()});let Di=N.matchTransition(ct.value,Dt.value,w,Dt.params),pi=!1;if(!Di){if(!C)return;Di=N.fallbackTransition,pi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:a,transition:Di,fromState:ct,toState:Dt,player:ee,isFallbackTransition:pi}),pi||(Zo(w,Ls),ee.onStart(()=>{wn(w,Ls)})),ee.onDone(()=>{let wi=this.players.indexOf(ee);wi>=0&&this.players.splice(wi,1);const ir=this._engine.playersByElement.get(w);if(ir){let Cr=ir.indexOf(ee);Cr>=0&&ir.splice(Cr,1)}}),this.players.push(ee),ci.push(ee),ee}deregister(w){this._triggers.delete(w),this._engine.statesByElement.forEach(a=>a.delete(w)),this._elementListeners.forEach((a,_)=>{this._elementListeners.set(_,a.filter(C=>C.name!=w))})}clearElementCache(w){this._engine.statesByElement.delete(w),this._elementListeners.delete(w);const a=this._engine.playersByElement.get(w);a&&(a.forEach(_=>_.destroy()),this._engine.playersByElement.delete(w))}_signalRemovalForInnerTriggers(w,a){const _=this._engine.driver.query(w,fr,!0);_.forEach(C=>{if(C[rs])return;const N=this._engine.fetchNamespacesByElement(C);N.size?N.forEach(ee=>ee.triggerLeaveAnimation(C,a,!1,!0)):this.clearElementCache(C)}),this._engine.afterFlushAnimationsDone(()=>_.forEach(C=>this.clearElementCache(C)))}triggerLeaveAnimation(w,a,_,C){const N=this._engine.statesByElement.get(w),ee=new Map;if(N){const ve=[];if(N.forEach((ct,Dt)=>{if(ee.set(Dt,ct.value),this._triggers.has(Dt)){const dn=this.trigger(w,Dt,Zs,C);dn&&ve.push(dn)}}),ve.length)return this._engine.markElementAsRemoved(this.id,w,!0,a,ee),_&&ri(ve).onDone(()=>this._engine.processLeaveNode(w)),!0}return!1}prepareLeaveAnimationListeners(w){const a=this._elementListeners.get(w),_=this._engine.statesByElement.get(w);if(a&&_){const C=new Set;a.forEach(N=>{const ee=N.name;if(C.has(ee))return;C.add(ee);const ct=this._triggers.get(ee).fallbackTransition,Dt=_.get(ee)||wa,dn=new xa(Zs),cn=new ds(this.id,ee,w);this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:ee,transition:ct,fromState:Dt,toState:dn,player:cn,isFallbackTransition:!0})})}}removeNode(w,a){const _=this._engine;if(w.childElementCount&&this._signalRemovalForInnerTriggers(w,a),this.triggerLeaveAnimation(w,a,!0))return;let C=!1;if(_.totalAnimations){const N=_.players.length?_.playersByQueriedElement.get(w):[];if(N&&N.length)C=!0;else{let ee=w;for(;ee=ee.parentNode;)if(_.statesByElement.get(ee)){C=!0;break}}}if(this.prepareLeaveAnimationListeners(w),C)_.markElementAsRemoved(this.id,w,!1,a);else{const N=w[rs];(!N||N===ta)&&(_.afterFlush(()=>this.clearElementCache(w)),_.destroyInnerAnimations(w),_._onRemovalComplete(w,a))}}insertNode(w,a){Zo(w,this._hostClassName)}drainQueuedTransitions(w){const a=[];return this._queue.forEach(_=>{const C=_.player;if(C.destroyed)return;const N=_.element,ee=this._elementListeners.get(N);ee&&ee.forEach(ve=>{if(ve.name==_.triggerName){const ct=qt(N,_.triggerName,_.fromState.value,_.toState.value);ct._data=w,fi(_.player,ve.phase,ct,ve.callback)}}),C.markedForDestroy?this._engine.afterFlush(()=>{C.destroy()}):a.push(_)}),this._queue=[],a.sort((_,C)=>{const N=_.transition.ast.depCount,ee=C.transition.ast.depCount;return 0==N||0==ee?N-ee:this._engine.driver.containsElement(_.element,C.element)?1:-1})}destroy(w){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,w)}}class Ya{_onRemovalComplete(w,a){this.onRemovalComplete(w,a)}constructor(w,a,_){this.bodyNode=w,this.driver=a,this._normalizer=_,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(C,N)=>{}}get queuedPlayers(){const w=[];return this._namespaceList.forEach(a=>{a.players.forEach(_=>{_.queued&&w.push(_)})}),w}createNamespace(w,a){const _=new dc(w,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(_,a):(this.newHostElements.set(a,_),this.collectEnterElement(a)),this._namespaceLookup[w]=_}_balanceNamespaceList(w,a){const _=this._namespaceList,C=this.namespacesByHostElement;if(_.length-1>=0){let ee=!1,ve=this.driver.getParentElement(a);for(;ve;){const ct=C.get(ve);if(ct){const Dt=_.indexOf(ct);_.splice(Dt+1,0,w),ee=!0;break}ve=this.driver.getParentElement(ve)}ee||_.unshift(w)}else _.push(w);return C.set(a,w),w}register(w,a){let _=this._namespaceLookup[w];return _||(_=this.createNamespace(w,a)),_}registerTrigger(w,a,_){let C=this._namespaceLookup[w];C&&C.register(a,_)&&this.totalAnimations++}destroy(w,a){w&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const _=this._fetchNamespace(w);this.namespacesByHostElement.delete(_.hostElement);const C=this._namespaceList.indexOf(_);C>=0&&this._namespaceList.splice(C,1),_.destroy(a),delete this._namespaceLookup[w]}))}_fetchNamespace(w){return this._namespaceLookup[w]}fetchNamespacesByElement(w){const a=new Set,_=this.statesByElement.get(w);if(_)for(let C of _.values())if(C.namespaceId){const N=this._fetchNamespace(C.namespaceId);N&&a.add(N)}return a}trigger(w,a,_,C){if(Ea(a)){const N=this._fetchNamespace(w);if(N)return N.trigger(a,_,C),!0}return!1}insertNode(w,a,_,C){if(!Ea(a))return;const N=a[rs];if(N&&N.setForRemoval){N.setForRemoval=!1,N.setForMove=!0;const ee=this.collectedLeaveElements.indexOf(a);ee>=0&&this.collectedLeaveElements.splice(ee,1)}if(w){const ee=this._fetchNamespace(w);ee&&ee.insertNode(a,_)}C&&this.collectEnterElement(a)}collectEnterElement(w){this.collectedEnterElements.push(w)}markElementAsDisabled(w,a){a?this.disabledNodes.has(w)||(this.disabledNodes.add(w),Zo(w,Cs)):this.disabledNodes.has(w)&&(this.disabledNodes.delete(w),wn(w,Cs))}removeNode(w,a,_){if(Ea(a)){const C=w?this._fetchNamespace(w):null;C?C.removeNode(a,_):this.markElementAsRemoved(w,a,!1,_);const N=this.namespacesByHostElement.get(a);N&&N.id!==w&&N.removeNode(a,_)}else this._onRemovalComplete(a,_)}markElementAsRemoved(w,a,_,C,N){this.collectedLeaveElements.push(a),a[rs]={namespaceId:w,setForRemoval:C,hasAnimation:_,removedBeforeQueried:!1,previousTriggersValues:N}}listen(w,a,_,C,N){return Ea(a)?this._fetchNamespace(w).listen(a,_,C,N):()=>{}}_buildInstruction(w,a,_,C,N){return w.transition.build(this.driver,w.element,w.fromState.value,w.toState.value,_,C,w.fromState.options,w.toState.options,a,N)}destroyInnerAnimations(w){let a=this.driver.query(w,fr,!0);a.forEach(_=>this.destroyActiveAnimationsForElement(_)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(w,ln,!0),a.forEach(_=>this.finishActiveQueriedAnimationOnElement(_)))}destroyActiveAnimationsForElement(w){const a=this.playersByElement.get(w);a&&a.forEach(_=>{_.queued?_.markedForDestroy=!0:_.destroy()})}finishActiveQueriedAnimationOnElement(w){const a=this.playersByQueriedElement.get(w);a&&a.forEach(_=>_.finish())}whenRenderingDone(){return new Promise(w=>{if(this.players.length)return ri(this.players).onDone(()=>w());w()})}processLeaveNode(w){const a=w[rs];if(a&&a.setForRemoval){if(w[rs]=ta,a.namespaceId){this.destroyInnerAnimations(w);const _=this._fetchNamespace(a.namespaceId);_&&_.clearElementCache(w)}this._onRemovalComplete(w,a.setForRemoval)}w.classList?.contains(Cs)&&this.markElementAsDisabled(w,!1),this.driver.query(w,".ng-animate-disabled",!0).forEach(_=>{this.markElementAsDisabled(_,!1)})}flush(w=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((_,C)=>this._balanceNamespaceList(_,C)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let _=0;_<this.collectedEnterElements.length;_++)Zo(this.collectedEnterElements[_],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const _=[];try{a=this._flushAnimations(_,w)}finally{for(let C=0;C<_.length;C++)_[C]()}}else for(let _=0;_<this.collectedLeaveElements.length;_++)this.processLeaveNode(this.collectedLeaveElements[_]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(_=>_()),this._flushFns=[],this._whenQuietFns.length){const _=this._whenQuietFns;this._whenQuietFns=[],a.length?ri(a).onDone(()=>{_.forEach(C=>C())}):_.forEach(C=>C())}}reportError(w){throw function kt(m){return new l.wOt(3402,!1)}()}_flushAnimations(w,a){const _=new wr,C=[],N=new Map,ee=[],ve=new Map,ct=new Map,Dt=new Map,dn=new Set;this.disabledNodes.forEach(Oi=>{dn.add(Oi);const Vi=this.driver.query(Oi,".ng-animate-queued",!0);for(let Zi=0;Zi<Vi.length;Zi++)dn.add(Vi[Zi])});const cn=this.bodyNode,ci=Array.from(this.statesByElement.keys()),Di=hs(ci,this.collectedEnterElements),pi=new Map;let wi=0;Di.forEach((Oi,Vi)=>{const Zi=ji+wi++;pi.set(Vi,Zi),Oi.forEach($r=>Zo($r,Zi))});const ir=[],Cr=new Set,co=new Set;for(let Oi=0;Oi<this.collectedLeaveElements.length;Oi++){const Vi=this.collectedLeaveElements[Oi],Zi=Vi[rs];Zi&&Zi.setForRemoval&&(ir.push(Vi),Cr.add(Vi),Zi.hasAnimation?this.driver.query(Vi,".ng-star-inserted",!0).forEach($r=>Cr.add($r)):co.add(Vi))}const ws=new Map,So=hs(ci,Array.from(Cr));So.forEach((Oi,Vi)=>{const Zi=ei+wi++;ws.set(Vi,Zi),Oi.forEach($r=>Zo($r,Zi))}),w.push(()=>{Di.forEach((Oi,Vi)=>{const Zi=pi.get(Vi);Oi.forEach($r=>wn($r,Zi))}),So.forEach((Oi,Vi)=>{const Zi=ws.get(Vi);Oi.forEach($r=>wn($r,Zi))}),ir.forEach(Oi=>{this.processLeaveNode(Oi)})});const sc=[],ac=[];for(let Oi=this._namespaceList.length-1;Oi>=0;Oi--)this._namespaceList[Oi].drainQueuedTransitions(a).forEach(Zi=>{const $r=Zi.player,Es=Zi.element;if(sc.push($r),this.collectedEnterElements.length){const us=Es[rs];if(us&&us.setForMove){if(us.previousTriggersValues&&us.previousTriggersValues.has(Zi.triggerName)){const cc=us.previousTriggersValues.get(Zi.triggerName),Za=this.statesByElement.get(Zi.element);if(Za&&Za.has(Zi.triggerName)){const Ud=Za.get(Zi.triggerName);Ud.value=cc,Za.set(Zi.triggerName,Ud)}}return void $r.destroy()}}const lc=!cn||!this.driver.containsElement(cn,Es),Ka=ws.get(Es),mo=pi.get(Es),xo=this._buildInstruction(Zi,_,mo,Ka,lc);if(xo.errors&&xo.errors.length)return void ac.push(xo);if(lc)return $r.onStart(()=>K(Es,xo.fromStyles)),$r.onDestroy(()=>U(Es,xo.toStyles)),void C.push($r);if(Zi.isFallbackTransition)return $r.onStart(()=>K(Es,xo.fromStyles)),$r.onDestroy(()=>U(Es,xo.toStyles)),void C.push($r);const Vd=[];xo.timelines.forEach(us=>{us.stretchStartingKeyframe=!0,this.disabledNodes.has(us.element)||Vd.push(us)}),xo.timelines=Vd,_.append(Es,xo.timelines),ee.push({instruction:xo,player:$r,element:Es}),xo.queriedElements.forEach(us=>yn(ve,us,[]).push($r)),xo.preStyleProps.forEach((us,cc)=>{if(us.size){let Za=ct.get(cc);Za||ct.set(cc,Za=new Set),us.forEach((Ud,Im)=>Za.add(Im))}}),xo.postStyleProps.forEach((us,cc)=>{let Za=Dt.get(cc);Za||Dt.set(cc,Za=new Set),us.forEach((Ud,Im)=>Za.add(Im))})});if(ac.length){const Oi=[];ac.forEach(Vi=>{Oi.push(function _n(m,w){return new l.wOt(3505,!1)}())}),sc.forEach(Vi=>Vi.destroy()),this.reportError(Oi)}const jo=new Map,ts=new Map;ee.forEach(Oi=>{const Vi=Oi.element;_.has(Vi)&&(ts.set(Vi,Vi),this._beforeAnimationBuild(Oi.player.namespaceId,Oi.instruction,jo))}),C.forEach(Oi=>{const Vi=Oi.element;this._getPreviousPlayers(Vi,!1,Oi.namespaceId,Oi.triggerName,null).forEach($r=>{yn(jo,Vi,[]).push($r),$r.destroy()})});const ga=ir.filter(Oi=>Ca(Oi,ct,Dt)),Fc=new Map;Qa(Fc,this.driver,co,Dt,Te.kp).forEach(Oi=>{Ca(Oi,ct,Dt)&&ga.push(Oi)});const _a=new Map;Di.forEach((Oi,Vi)=>{Qa(_a,this.driver,new Set(Oi),ct,Te.FX)}),ga.forEach(Oi=>{const Vi=Fc.get(Oi),Zi=_a.get(Oi);Fc.set(Oi,new Map([...Vi?.entries()??[],...Zi?.entries()??[]]))});const zd=[],pl=[],Au={};ee.forEach(Oi=>{const{element:Vi,player:Zi,instruction:$r}=Oi;if(_.has(Vi)){if(dn.has(Vi))return Zi.onDestroy(()=>U(Vi,$r.toStyles)),Zi.disabled=!0,Zi.overrideTotalTime($r.totalTime),void C.push(Zi);let Es=Au;if(ts.size>1){let Ka=Vi;const mo=[];for(;Ka=Ka.parentNode;){const xo=ts.get(Ka);if(xo){Es=xo;break}mo.push(Ka)}mo.forEach(xo=>ts.set(xo,Es))}const lc=this._buildAnimation(Zi.namespaceId,$r,jo,N,_a,Fc);if(Zi.setRealPlayer(lc),Es===Au)zd.push(Zi);else{const Ka=this.playersByElement.get(Es);Ka&&Ka.length&&(Zi.parentPlayer=ri(Ka)),C.push(Zi)}}else K(Vi,$r.fromStyles),Zi.onDestroy(()=>U(Vi,$r.toStyles)),pl.push(Zi),dn.has(Vi)&&C.push(Zi)}),pl.forEach(Oi=>{const Vi=N.get(Oi.element);if(Vi&&Vi.length){const Zi=ri(Vi);Oi.setRealPlayer(Zi)}}),C.forEach(Oi=>{Oi.parentPlayer?Oi.syncPlayerEvents(Oi.parentPlayer):Oi.destroy()});for(let Oi=0;Oi<ir.length;Oi++){const Vi=ir[Oi],Zi=Vi[rs];if(wn(Vi,ei),Zi&&Zi.hasAnimation)continue;let $r=[];if(ve.size){let lc=ve.get(Vi);lc&&lc.length&&$r.push(...lc);let Ka=this.driver.query(Vi,ln,!0);for(let mo=0;mo<Ka.length;mo++){let xo=ve.get(Ka[mo]);xo&&xo.length&&$r.push(...xo)}}const Es=$r.filter(lc=>!lc.destroyed);Es.length?Fs(this,Vi,Es):this.processLeaveNode(Vi)}return ir.length=0,zd.forEach(Oi=>{this.players.push(Oi),Oi.onDone(()=>{Oi.destroy();const Vi=this.players.indexOf(Oi);this.players.splice(Vi,1)}),Oi.play()}),zd}afterFlush(w){this._flushFns.push(w)}afterFlushAnimationsDone(w){this._whenQuietFns.push(w)}_getPreviousPlayers(w,a,_,C,N){let ee=[];if(a){const ve=this.playersByQueriedElement.get(w);ve&&(ee=ve)}else{const ve=this.playersByElement.get(w);if(ve){const ct=!N||N==Zs;ve.forEach(Dt=>{Dt.queued||!ct&&Dt.triggerName!=C||ee.push(Dt)})}}return(_||C)&&(ee=ee.filter(ve=>!(_&&_!=ve.namespaceId||C&&C!=ve.triggerName))),ee}_beforeAnimationBuild(w,a,_){const N=a.element,ee=a.isRemovalTransition?void 0:w,ve=a.isRemovalTransition?void 0:a.triggerName;for(const ct of a.timelines){const Dt=ct.element,dn=Dt!==N,cn=yn(_,Dt,[]);this._getPreviousPlayers(Dt,dn,ee,ve,a.toState).forEach(Di=>{const pi=Di.getRealPlayer();pi.beforeDestroy&&pi.beforeDestroy(),Di.destroy(),cn.push(Di)})}K(N,a.fromStyles)}_buildAnimation(w,a,_,C,N,ee){const ve=a.triggerName,ct=a.element,Dt=[],dn=new Set,cn=new Set,ci=a.timelines.map(pi=>{const wi=pi.element;dn.add(wi);const ir=wi[rs];if(ir&&ir.removedBeforeQueried)return new Te.sf(pi.duration,pi.delay);const Cr=wi!==ct,co=function Ts(m){const w=[];return fc(m,w),w}((_.get(wi)||Ko).map(jo=>jo.getRealPlayer())).filter(jo=>!!jo.element&&jo.element===wi),ws=N.get(wi),So=ee.get(wi),sc=Jn(this._normalizer,pi.keyframes,ws,So),ac=this._buildPlayer(pi,sc,co);if(pi.subTimeline&&C&&cn.add(wi),Cr){const jo=new ds(w,ve,wi);jo.setRealPlayer(ac),Dt.push(jo)}return ac});Dt.forEach(pi=>{yn(this.playersByQueriedElement,pi.element,[]).push(pi),pi.onDone(()=>function hc(m,w,a){let _=m.get(w);if(_){if(_.length){const C=_.indexOf(a);_.splice(C,1)}0==_.length&&m.delete(w)}return _}(this.playersByQueriedElement,pi.element,pi))}),dn.forEach(pi=>Zo(pi,no));const Di=ri(ci);return Di.onDestroy(()=>{dn.forEach(pi=>wn(pi,no)),U(ct,a.toStyles)}),cn.forEach(pi=>{yn(C,pi,[]).push(Di)}),Di}_buildPlayer(w,a,_){return a.length>0?this.driver.animate(w.element,a,w.duration,w.delay,w.easing,_):new Te.sf(w.duration,w.delay)}}class ds{constructor(w,a,_){this.namespaceId=w,this.triggerName=a,this.element=_,this._player=new Te.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(w){this._containsRealPlayer||(this._player=w,this._queuedCallbacks.forEach((a,_)=>{a.forEach(C=>fi(w,_,void 0,C))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(w.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(w){this.totalTime=w}syncPlayerEvents(w){const a=this._player;a.triggerCallback&&w.onStart(()=>a.triggerCallback("start")),w.onDone(()=>this.finish()),w.onDestroy(()=>this.destroy())}_queueEvent(w,a){yn(this._queuedCallbacks,w,[]).push(a)}onDone(w){this.queued&&this._queueEvent("done",w),this._player.onDone(w)}onStart(w){this.queued&&this._queueEvent("start",w),this._player.onStart(w)}onDestroy(w){this.queued&&this._queueEvent("destroy",w),this._player.onDestroy(w)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(w){this.queued||this._player.setPosition(w)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(w){const a=this._player;a.triggerCallback&&a.triggerCallback(w)}}function Ea(m){return m&&1===m.nodeType}function vl(m,w){const a=m.style.display;return m.style.display=w??"none",a}function Qa(m,w,a,_,C){const N=[];a.forEach(ct=>N.push(vl(ct)));const ee=[];_.forEach((ct,Dt)=>{const dn=new Map;ct.forEach(cn=>{const ci=w.computeStyle(Dt,cn,C);dn.set(cn,ci),(!ci||0==ci.length)&&(Dt[rs]=Wl,ee.push(Dt))}),m.set(Dt,dn)});let ve=0;return a.forEach(ct=>vl(ct,N[ve++])),ee}function hs(m,w){const a=new Map;if(m.forEach(ve=>a.set(ve,[])),0==w.length)return a;const C=new Set(w),N=new Map;function ee(ve){if(!ve)return 1;let ct=N.get(ve);if(ct)return ct;const Dt=ve.parentNode;return ct=a.has(Dt)?Dt:C.has(Dt)?1:ee(Dt),N.set(ve,ct),ct}return w.forEach(ve=>{const ct=ee(ve);1!==ct&&a.get(ct).push(ve)}),a}function Zo(m,w){m.classList?.add(w)}function wn(m,w){m.classList?.remove(w)}function Fs(m,w,a){ri(a).onDone(()=>m.processLeaveNode(w))}function fc(m,w){for(let a=0;a<m.length;a++){const _=m[a];_ instanceof Te.ui?fc(_.players,w):w.push(_)}}function Ca(m,w,a){const _=a.get(m);if(!_)return!1;let C=w.get(m);return C?_.forEach(N=>C.add(N)):w.set(m,_),a.delete(m),!0}class ps{constructor(w,a,_){this._driver=a,this._normalizer=_,this._triggerCache={},this.onRemovalComplete=(C,N)=>{},this._transitionEngine=new Ya(w.body,a,_),this._timelineEngine=new Pu(w.body,a,_),this._transitionEngine.onRemovalComplete=(C,N)=>this.onRemovalComplete(C,N)}registerTrigger(w,a,_,C,N){const ee=w+"-"+C;let ve=this._triggerCache[ee];if(!ve){const ct=[],dn=Li(this._driver,N,ct,[]);if(ct.length)throw function on(m,w){return new l.wOt(3404,!1)}();ve=function uc(m,w,a){return new Ru(m,w,a)}(C,dn,this._normalizer),this._triggerCache[ee]=ve}this._transitionEngine.registerTrigger(a,C,ve)}register(w,a){this._transitionEngine.register(w,a)}destroy(w,a){this._transitionEngine.destroy(w,a)}onInsert(w,a,_,C){this._transitionEngine.insertNode(w,a,_,C)}onRemove(w,a,_){this._transitionEngine.removeNode(w,a,_)}disableAnimations(w,a){this._transitionEngine.markElementAsDisabled(w,a)}process(w,a,_,C){if("@"==_.charAt(0)){const[N,ee]=gi(_);this._timelineEngine.command(N,a,ee,C)}else this._transitionEngine.trigger(w,a,_,C)}listen(w,a,_,C,N){if("@"==_.charAt(0)){const[ee,ve]=gi(_);return this._timelineEngine.listen(ee,a,ve,N)}return this._transitionEngine.listen(w,a,_,C,N)}flush(w=-1){this._transitionEngine.flush(w)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(w){this._transitionEngine.afterFlushAnimationsDone(w)}}class Xi{static#e=this.initialStylesByElement=new WeakMap;constructor(w,a,_){this._element=w,this._startStyles=a,this._endStyles=_,this._state=0;let C=Xi.initialStylesByElement.get(w);C||Xi.initialStylesByElement.set(w,C=new Map),this._initialStyles=C}start(){this._state<1&&(this._startStyles&&U(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(U(this._element,this._initialStyles),this._endStyles&&(U(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Xi.initialStylesByElement.delete(this._element),this._startStyles&&(K(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(K(this._element,this._endStyles),this._endStyles=null),U(this._element,this._initialStyles),this._state=3)}}function os(m){let w=null;return m.forEach((a,_)=>{(function Bs(m){return"display"===m||"position"===m})(_)&&(w=w||new Map,w.set(_,a))}),w}class xl{constructor(w,a,_,C){this.element=w,this.keyframes=a,this.options=_,this._specialStyles=C,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=_.duration,this._delay=_.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(w=>w()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const w=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,w,this.options),this._finalKeyframe=w.length?w[w.length-1]:new Map;const a=()=>this._onFinish();this.domPlayer.addEventListener("finish",a),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",a)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(w){const a=[];return w.forEach(_=>{a.push(Object.fromEntries(_))}),a}_triggerWebAnimation(w,a,_){return w.animate(this._convertKeyframesToObject(a),_)}onStart(w){this._originalOnStartFns.push(w),this._onStartFns.push(w)}onDone(w){this._originalOnDoneFns.push(w),this._onDoneFns.push(w)}onDestroy(w){this._onDestroyFns.push(w)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(w=>w()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(w=>w()),this._onDestroyFns=[])}setPosition(w){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=w*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const w=new Map;this.hasStarted()&&this._finalKeyframe.forEach((_,C)=>{"offset"!==C&&w.set(C,this._finished?_:$e(this.element,C))}),this.currentSnapshot=w}triggerCallback(w){const a="start"===w?this._onStartFns:this._onDoneFns;a.forEach(_=>_()),a.length=0}}class wl{validateStyleProperty(w){return!0}validateAnimatableStyleProperty(w){return!0}containsElement(w,a){return qe(w,a)}getParentElement(w){return di(w)}query(w,a,_){return Ze(w,a,_)}computeStyle(w,a,_){return $e(w,a)}animate(w,a,_,C,N,ee=[]){const ct={duration:_,delay:C,fill:0==C?"both":"forwards"};N&&(ct.easing=N);const Dt=new Map,dn=ee.filter(Di=>Di instanceof xl);(function Ge(m,w){return 0===m||0===w})(_,C)&&dn.forEach(Di=>{Di.currentSnapshot.forEach((pi,wi)=>Dt.set(wi,pi))});let cn=function Ct(m){return m.length?m[0]instanceof Map?m:m.map(w=>new Map(Object.entries(w))):[]}(a).map(Di=>new Map(Di));cn=function Fe(m,w,a){if(a.size&&w.length){let _=w[0],C=[];if(a.forEach((N,ee)=>{_.has(ee)||C.push(ee),_.set(ee,N)}),C.length)for(let N=1;N<w.length;N++){let ee=w[N];C.forEach(ve=>ee.set(ve,$e(m,ve)))}}return w}(w,cn,Dt);const ci=function Ns(m,w){let a=null,_=null;return Array.isArray(w)&&w.length?(a=os(w[0]),w.length>1&&(_=os(w[w.length-1]))):w instanceof Map&&(a=os(w)),a||_?new Xi(m,a,_):null}(w,cn);return new xl(w,cn,ct,ci)}}const Lu="@.disabled";class Ta{constructor(w,a,_,C){this.namespaceId=w,this.delegate=a,this.engine=_,this._onDestroy=C,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(w){this.delegate.destroyNode?.(w)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(w,a){return this.delegate.createElement(w,a)}createComment(w){return this.delegate.createComment(w)}createText(w){return this.delegate.createText(w)}appendChild(w,a){this.delegate.appendChild(w,a),this.engine.onInsert(this.namespaceId,a,w,!1)}insertBefore(w,a,_,C=!0){this.delegate.insertBefore(w,a,_),this.engine.onInsert(this.namespaceId,a,w,C)}removeChild(w,a,_){this.engine.onRemove(this.namespaceId,a,this.delegate)}selectRootElement(w,a){return this.delegate.selectRootElement(w,a)}parentNode(w){return this.delegate.parentNode(w)}nextSibling(w){return this.delegate.nextSibling(w)}setAttribute(w,a,_,C){this.delegate.setAttribute(w,a,_,C)}removeAttribute(w,a,_){this.delegate.removeAttribute(w,a,_)}addClass(w,a){this.delegate.addClass(w,a)}removeClass(w,a){this.delegate.removeClass(w,a)}setStyle(w,a,_,C){this.delegate.setStyle(w,a,_,C)}removeStyle(w,a,_){this.delegate.removeStyle(w,a,_)}setProperty(w,a,_){"@"==a.charAt(0)&&a==Lu?this.disableAnimations(w,!!_):this.delegate.setProperty(w,a,_)}setValue(w,a){this.delegate.setValue(w,a)}listen(w,a,_){return this.delegate.listen(w,a,_)}disableAnimations(w,a){this.engine.disableAnimations(w,a)}}class vr extends Ta{constructor(w,a,_,C,N){super(a,_,C,N),this.factory=w,this.namespaceId=a}setProperty(w,a,_){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Lu?this.disableAnimations(w,_=void 0===_||!!_):this.engine.process(this.namespaceId,w,a.slice(1),_):this.delegate.setProperty(w,a,_)}listen(w,a,_){if("@"==a.charAt(0)){const C=function Nc(m){switch(m){case"body":return document.body;case"document":return document;case"window":return window;default:return m}}(w);let N=a.slice(1),ee="";return"@"!=N.charAt(0)&&([N,ee]=function Ao(m){const w=m.indexOf(".");return[m.substring(0,w),m.slice(w+1)]}(N)),this.engine.listen(this.namespaceId,C,N,ee,ve=>{this.factory.scheduleListenerCallback(ve._data||-1,_,ve)})}return this.delegate.listen(w,a,_)}}class Ja{constructor(w,a,_){this.delegate=w,this.engine=a,this._zone=_,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,a.onRemovalComplete=(C,N)=>{const ee=N?.parentNode(C);ee&&N.removeChild(ee,C)}}createRenderer(w,a){const C=this.delegate.createRenderer(w,a);if(!w||!a?.data?.animation){const Dt=this._rendererCache;let dn=Dt.get(C);return dn||(dn=new Ta("",C,this.engine,()=>Dt.delete(C)),Dt.set(C,dn)),dn}const N=a.id,ee=a.id+"-"+this._currentId;this._currentId++,this.engine.register(ee,w);const ve=Dt=>{Array.isArray(Dt)?Dt.forEach(ve):this.engine.registerTrigger(N,ee,w,Dt.name,Dt)};return a.data.animation.forEach(ve),new vr(this,ee,C,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(w,a,_){if(w>=0&&w<this._microtaskId)return void this._zone.run(()=>a(_));const C=this._animationCallbacksBuffer;0==C.length&&queueMicrotask(()=>{this._zone.run(()=>{C.forEach(N=>{const[ee,ve]=N;ee(ve)}),this._animationCallbacksBuffer=[]})}),C.push([a,_])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}var lr=H(177);let su=(()=>{class m extends ps{constructor(a,_,C){super(a,_,C)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(lr.qQ),l.KVO(Ue),l.KVO(vt))};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac})}return m})();const Kl=[{provide:vt,useFactory:function el(){return new Lt}},{provide:ps,useClass:su},{provide:l._9s,useFactory:function Ni(m,w,a){return new Ja(m,w,a)},deps:[D.B7,ps,l.SKi]}],qo=[{provide:Ue,useFactory:()=>new wl},{provide:l.bc$,useValue:"BrowserAnimations"},...Kl],au=[{provide:Ue,useClass:Je},{provide:l.bc$,useValue:"NoopAnimations"},...Kl];let ra=(()=>{class m{static withConfig(a){return{ngModule:m,providers:a.disableAnimations?au:qo}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({providers:qo,imports:[D.Bb]})}return m})();var te=H(1247),re=H.n(te),X=H(4523),_e=H(1413);class gt extends _e.B{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(w){const{hasError:a,_hasValue:_,_value:C,thrownError:N,isStopped:ee,_isComplete:ve}=this;a?w.error(N):(ee||ve)&&(_&&w.next(C),w.complete())}next(w){this.isStopped||(this._value=w,this._hasValue=!0)}complete(){const{_hasValue:w,_value:a,_isComplete:_}=this;_||(this._isComplete=!0,w&&super.next(a),super.complete())}}var Ei=H(8359),mr=H(1594);const io=new l.nKC("MapboxApiKey");let mi=(()=>{class m{constructor(a,_){this.zone=a,this.MAPBOX_API_KEY=_,this.mapCreated=new gt,this.mapLoaded=new gt,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new Ei.yU,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(a){this.zone.onStable.pipe((0,mr.$)()).subscribe(()=>{a.customMapboxApiUrl&&(re().baseApiUrl=a.customMapboxApiUrl),this.createMap({...a.mapOptions,accessToken:a.accessToken||this.MAPBOX_API_KEY||""}),this.hookEvents(a.mapEvents),this.mapEvents=a.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),a.mapEvents.mapCreate.observed&&this.zone.run(()=>{a.mapEvents.mapCreate.emit(this.mapInstance)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateProjection(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setProjection(a)})}updateMinZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(a)})}updateMaxZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(a)})}updateMinPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(a)})}updateMaxPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(a)})}updateRenderWorldCopies(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(a)})}updateScrollZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(a)})}updateMaxBounds(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(a)})}changeCanvasCursor(a){this.mapInstance.getCanvasContainer().style.cursor=a}queryRenderedFeatures(a,_){return this.mapInstance.queryRenderedFeatures(a,_)}panTo(a,_){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(a,_)})}move(a,_,C,N,ee,ve){return this.zone.runOutsideAngular(()=>{this.mapInstance[a]({..._,zoom:C??this.mapInstance.getZoom(),center:N??this.mapInstance.getCenter(),bearing:ee??this.mapInstance.getBearing(),pitch:ve??this.mapInstance.getPitch()})})}addLayer(a,_,C){this.zone.runOutsideAngular(()=>{Object.keys(a.layerOptions).forEach(N=>{void 0===a.layerOptions[N]&&delete a.layerOptions[N]}),this.mapInstance.addLayer(a.layerOptions,C),_&&((a.layerEvents.layerClick.observed||a.layerEvents.click.observed)&&this.mapInstance.on("click",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerClick.emit(N),a.layerEvents.click.emit(N)})}),(a.layerEvents.layerDblClick.observed||a.layerEvents.dblClick.observed)&&this.mapInstance.on("dblclick",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerDblClick.emit(N),a.layerEvents.dblClick.emit(N)})}),(a.layerEvents.layerMouseDown.observed||a.layerEvents.mouseDown.observed)&&this.mapInstance.on("mousedown",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseDown.emit(N),a.layerEvents.mouseDown.emit(N)})}),(a.layerEvents.layerMouseUp.observed||a.layerEvents.mouseUp.observed)&&this.mapInstance.on("mouseup",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseUp.emit(N),a.layerEvents.mouseUp.emit(N)})}),(a.layerEvents.layerMouseEnter.observed||a.layerEvents.mouseEnter.observed)&&this.mapInstance.on("mouseenter",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseEnter.emit(N),a.layerEvents.mouseEnter.emit(N)})}),(a.layerEvents.layerMouseLeave.observed||a.layerEvents.mouseLeave.observed)&&this.mapInstance.on("mouseleave",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseLeave.emit(N),a.layerEvents.mouseLeave.emit(N)})}),(a.layerEvents.layerMouseMove.observed||a.layerEvents.mouseMove.observed)&&this.mapInstance.on("mousemove",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseMove.emit(N),a.layerEvents.mouseMove.emit(N)})}),(a.layerEvents.layerMouseOver.observed||a.layerEvents.mouseOver.observed)&&this.mapInstance.on("mouseover",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseOver.emit(N),a.layerEvents.mouseOver.emit(N)})}),(a.layerEvents.layerMouseOut.observed||a.layerEvents.mouseOut.observed)&&this.mapInstance.on("mouseout",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerMouseOut.emit(N),a.layerEvents.mouseOut.emit(N)})}),(a.layerEvents.layerContextMenu.observed||a.layerEvents.contextMenu.observed)&&this.mapInstance.on("contextmenu",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerContextMenu.emit(N),a.layerEvents.contextMenu.emit(N)})}),(a.layerEvents.layerTouchStart.observed||a.layerEvents.touchStart.observed)&&this.mapInstance.on("touchstart",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerTouchStart.emit(N),a.layerEvents.touchStart.emit(N)})}),(a.layerEvents.layerTouchEnd.observed||a.layerEvents.touchEnd.observed)&&this.mapInstance.on("touchend",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerTouchEnd.emit(N),a.layerEvents.touchEnd.emit(N)})}),(a.layerEvents.layerTouchCancel.observed||a.layerEvents.touchCancel.observed)&&this.mapInstance.on("touchcancel",a.layerOptions.id,N=>{this.zone.run(()=>{a.layerEvents.layerTouchCancel.emit(N),a.layerEvents.touchCancel.emit(N)})}))})}removeLayer(a){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(a)&&this.mapInstance.removeLayer(a)})}addMarker(a){const _={offset:a.markersOptions.offset,anchor:a.markersOptions.anchor,draggable:!!a.markersOptions.draggable,rotationAlignment:a.markersOptions.rotationAlignment,pitchAlignment:a.markersOptions.pitchAlignment,clickTolerance:a.markersOptions.clickTolerance};a.markersOptions.element.childNodes.length>0&&(_.element=a.markersOptions.element);const C=new(re().Marker)(_);return(a.markersEvents.markerDragStart.observed||a.markersEvents.dragStart.observed)&&C.on("dragstart",ee=>{if(ee){const{target:ve}=ee;this.zone.run(()=>{a.markersEvents.markerDragStart.emit(ve),a.markersEvents.dragStart.emit(ve)})}}),(a.markersEvents.markerDrag.observed||a.markersEvents.drag.observed)&&C.on("drag",ee=>{if(ee){const{target:ve}=ee;this.zone.run(()=>{a.markersEvents.markerDrag.emit(ve),a.markersEvents.drag.emit(ve)})}}),(a.markersEvents.markerDragEnd.observed||a.markersEvents.dragEnd.observed)&&C.on("dragend",ee=>{if(ee){const{target:ve}=ee;this.zone.run(()=>{a.markersEvents.markerDragEnd.emit(ve),a.markersEvents.dragEnd.emit(ve)})}}),C.setLngLat(a.markersOptions.feature?a.markersOptions.feature.geometry.coordinates:a.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(C.addTo(this.mapInstance),C))}removeMarker(a){this.markersToRemove.push(a)}createPopup(a,_){return this.zone.runOutsideAngular(()=>{Object.keys(a.popupOptions).forEach(N=>void 0===a.popupOptions[N]&&delete a.popupOptions[N]);const C=new(re().Popup)(a.popupOptions);return C.setDOMContent(_),(a.popupEvents.popupClose.observed||a.popupEvents.close.observed)&&C.on("close",()=>{this.zone.run(()=>{a.popupEvents.popupClose.emit(),a.popupEvents.close.emit()})}),(a.popupEvents.popupOpen.observed||a.popupEvents.open.observed)&&C.on("open",()=>{this.zone.run(()=>{a.popupEvents.popupOpen.emit(),a.popupEvents.open.emit()})}),C})}addPopupToMap(a,_,C=!1){return this.zone.runOutsideAngular(()=>{C&&a._listeners&&delete a._listeners.open,a.setLngLat(_),a.addTo(this.mapInstance)})}addPopupToMarker(a,_){return this.zone.runOutsideAngular(()=>{a.setPopup(_)})}removePopupFromMap(a,_=!1){_&&a._listeners&&delete a._listeners.close,this.popupsToRemove.push(a)}removePopupFromMarker(a){return this.zone.runOutsideAngular(()=>{a.setPopup(void 0)})}addControl(a,_){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(a,_)})}removeControl(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(a)})}loadAndAddImage(a,_,C){var N=this;return(0,X.A)(function*(){return N.zone.runOutsideAngular(()=>new Promise((ee,ve)=>{N.mapInstance.loadImage(_,(ct,Dt)=>{ct?ve(ct):(N.addImage(a,Dt,C),ee())})}))})()}addImage(a,_,C){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(a,_,C)})}removeImage(a){this.imageIdsToRemove.push(a)}addSource(a,_){return this.zone.runOutsideAngular(()=>{Object.keys(_).forEach(C=>void 0===_[C]&&delete _[C]),this.mapInstance.addSource(a,_)})}getSource(a){return this.mapInstance.getSource(a)}removeSource(a){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(a).forEach(_=>this.mapInstance.removeLayer(_.id)),this.mapInstance.removeSource(a)})}setAllLayerPaintProperty(a,_){return this.zone.runOutsideAngular(()=>{Object.keys(_).forEach(C=>{this.mapInstance.setPaintProperty(a,C,_[C])})})}setAllLayerLayoutProperty(a,_){return this.zone.runOutsideAngular(()=>{Object.keys(_).forEach(C=>{this.mapInstance.setLayoutProperty(a,C,_[C])})})}setLayerFilter(a,_){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(a,_)})}setLayerBefore(a,_){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(a,_)})}setLayerZoomRange(a,_,C){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(a,_||0,C||20)})}fitBounds(a,_){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(a,_)})}fitScreenCoordinates(a,_,C){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(a[0],a[1],_,C)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(a){l.SKi.assertNotInAngularZone(),Object.keys(a).forEach(C=>{void 0===a[C]&&delete a[C]}),this.mapInstance=new(re().Map)(a),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(a.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const a of this.markersToRemove)a.remove();this.markersToRemove=[]}removePopups(){for(const a of this.popupsToRemove)a.remove();this.popupsToRemove=[]}removeImages(){for(const a of this.imageIdsToRemove)this.mapInstance.removeImage(a);this.imageIdsToRemove=[]}findLayersBySourceId(a){const _=this.mapInstance.getStyle().layers;return null==_?[]:_.filter(C=>"source"in C&&C.source===a)}hookEvents(a){this.mapInstance.on("load",_=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{a.mapLoad.emit(_),a.load.emit(_.target)})}),(a.mapResize.observed||a.resize.observed)&&this.mapInstance.on("resize",_=>this.zone.run(()=>{a.mapResize.emit(_),a.resize.emit(_)})),(a.mapRemove.observed||a.remove.observed)&&this.mapInstance.on("remove",_=>this.zone.run(()=>{a.mapRemove.emit(_),a.remove.emit(_)})),(a.mapMouseDown.observed||a.mouseDown.observed)&&this.mapInstance.on("mousedown",_=>this.zone.run(()=>{a.mapMouseDown.emit(_),a.mouseDown.emit(_)})),(a.mapMouseUp.observed||a.mouseUp.observed)&&this.mapInstance.on("mouseup",_=>this.zone.run(()=>{a.mapMouseUp.emit(_),a.mouseUp.emit(_)})),(a.mapMouseMove.observed||a.mouseMove.observed)&&this.mapInstance.on("mousemove",_=>this.zone.run(()=>{a.mapMouseMove.emit(_),a.mouseMove.emit(_)})),(a.mapClick.observed||a.click.observed)&&this.mapInstance.on("click",_=>this.zone.run(()=>{a.mapClick.emit(_),a.click.emit(_)})),(a.mapDblClick.observed||a.dblClick.observed)&&this.mapInstance.on("dblclick",_=>this.zone.run(()=>{a.mapDblClick.emit(_),a.dblClick.emit(_)})),(a.mapMouseOver.observed||a.mouseOver.observed)&&this.mapInstance.on("mouseover",_=>this.zone.run(()=>{a.mapMouseOver.emit(_),a.mouseOver.emit(_)})),(a.mapMouseOut.observed||a.mouseOut.observed)&&this.mapInstance.on("mouseout",_=>this.zone.run(()=>{a.mapMouseOut.emit(_),a.mouseOut.emit(_)})),(a.mapContextMenu.observed||a.contextMenu.observed)&&this.mapInstance.on("contextmenu",_=>this.zone.run(()=>{a.mapContextMenu.emit(_),a.contextMenu.emit(_)})),(a.mapTouchStart.observed||a.touchStart.observed)&&this.mapInstance.on("touchstart",_=>this.zone.run(()=>{a.mapTouchStart.emit(_),a.touchStart.emit(_)})),(a.mapTouchEnd.observed||a.touchEnd.observed)&&this.mapInstance.on("touchend",_=>this.zone.run(()=>{a.mapTouchEnd.emit(_),a.touchEnd.emit(_)})),(a.mapTouchMove.observed||a.touchMove.observed)&&this.mapInstance.on("touchmove",_=>this.zone.run(()=>{a.mapTouchMove.emit(_),a.touchMove.emit(_)})),(a.mapTouchCancel.observed||a.touchCancel.observed)&&this.mapInstance.on("touchcancel",_=>this.zone.run(()=>{a.mapTouchCancel.emit(_),a.touchCancel.emit(_)})),(a.mapWheel.observed||a.wheel.observed)&&this.mapInstance.on("wheel",_=>this.zone.run(()=>{a.mapWheel.emit(_),a.wheel.emit(_)})),a.moveStart.observed&&this.mapInstance.on("movestart",_=>this.zone.run(()=>a.moveStart.emit(_))),a.move.observed&&this.mapInstance.on("move",_=>this.zone.run(()=>a.move.emit(_))),a.moveEnd.observed&&this.mapInstance.on("moveend",_=>this.zone.run(()=>a.moveEnd.emit(_))),(a.mapDragStart.observed||a.dragStart.observed)&&this.mapInstance.on("dragstart",_=>this.zone.run(()=>{a.mapDragStart.emit(_),a.dragStart.emit(_)})),(a.mapDrag.observed||a.drag.observed)&&this.mapInstance.on("drag",_=>this.zone.run(()=>{a.mapDrag.emit(_),a.drag.emit(_)})),(a.mapDragEnd.observed||a.dragEnd.observed)&&this.mapInstance.on("dragend",_=>this.zone.run(()=>{a.mapDragEnd.emit(_),a.dragEnd.emit(_)})),a.zoomStart.observed&&this.mapInstance.on("zoomstart",_=>this.zone.run(()=>a.zoomStart.emit(_))),a.zoomEvt.observed&&this.mapInstance.on("zoom",_=>this.zone.run(()=>a.zoomEvt.emit(_))),a.zoomEnd.observed&&this.mapInstance.on("zoomend",_=>this.zone.run(()=>a.zoomEnd.emit(_))),a.rotateStart.observed&&this.mapInstance.on("rotatestart",_=>this.zone.run(()=>a.rotateStart.emit(_))),a.rotate.observed&&this.mapInstance.on("rotate",_=>this.zone.run(()=>a.rotate.emit(_))),a.rotateEnd.observed&&this.mapInstance.on("rotateend",_=>this.zone.run(()=>a.rotateEnd.emit(_))),a.pitchStart.observed&&this.mapInstance.on("pitchstart",_=>this.zone.run(()=>a.pitchStart.emit(_))),a.pitchEvt.observed&&this.mapInstance.on("pitch",_=>this.zone.run(()=>a.pitchEvt.emit(_))),a.pitchEnd.observed&&this.mapInstance.on("pitchend",_=>this.zone.run(()=>a.pitchEnd.emit(_))),a.boxZoomStart.observed&&this.mapInstance.on("boxzoomstart",_=>this.zone.run(()=>a.boxZoomStart.emit(_))),a.boxZoomEnd.observed&&this.mapInstance.on("boxzoomend",_=>this.zone.run(()=>a.boxZoomEnd.emit(_))),a.boxZoomCancel.observed&&this.mapInstance.on("boxzoomcancel",_=>this.zone.run(()=>a.boxZoomCancel.emit(_))),a.webGlContextLost.observed&&this.mapInstance.on("webglcontextlost",_=>this.zone.run(()=>a.webGlContextLost.emit(_))),a.webGlContextRestored.observed&&this.mapInstance.on("webglcontextrestored",_=>this.zone.run(()=>a.webGlContextRestored.emit(_))),a.render.observed&&this.mapInstance.on("render",_=>this.zone.run(()=>a.render.emit(_))),(a.mapError.observed||a.error.observed)&&this.mapInstance.on("error",_=>this.zone.run(()=>{a.mapError.emit(_),a.error.emit(_)})),a.data.observed&&this.mapInstance.on("data",_=>this.zone.run(()=>a.data.emit(_))),a.styleData.observed&&this.mapInstance.on("styledata",_=>this.zone.run(()=>a.styleData.emit(_))),a.sourceData.observed&&this.mapInstance.on("sourcedata",_=>this.zone.run(()=>a.sourceData.emit(_))),a.dataLoading.observed&&this.mapInstance.on("dataloading",_=>this.zone.run(()=>a.dataLoading.emit(_))),a.styleDataLoading.observed&&this.mapInstance.on("styledataloading",_=>this.zone.run(()=>a.styleDataLoading.emit(_))),a.sourceDataLoading.observed&&this.mapInstance.on("sourcedataloading",_=>this.zone.run(()=>a.sourceDataLoading.emit(_))),a.styleImageMissing.observed&&this.mapInstance.on("styleimagemissing",_=>this.zone.run(()=>a.styleImageMissing.emit(_))),a.idle.observed&&this.mapInstance.on("idle",_=>this.zone.run(()=>a.idle.emit(_)))}assign(a,_,C){if("string"==typeof _&&(_=_.split(".")),_.length>1){const N=_.shift();this.assign(a[N]="[object Object]"===Object.prototype.toString.call(a[N])?a[N]:{},_,C)}else a[_[0]]=C}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(l.SKi),l.KVO(io,8))};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac})}return m})();const mc=["content"],Bh=["*"];class Bc{constructor(w){this.container=w}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let Lo=(()=>{class m{constructor(a){this.mapService=a,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Bc(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-control"]],viewQuery:function(_,C){if(1&_&&l.GBs(mc,7),2&_){let N;l.mGM(N=l.lsd())&&(C.content=N.first)}},inputs:{position:"position"},ngContentSelectors:Bh,decls:3,vars:0,consts:[["content",""],[1,"mapboxgl-ctrl"]],template:function(_,C){1&_&&(l.NAR(),l.j41(0,"div",1,0),l.SdG(2),l.k0s())},encapsulation:2,changeDetection:0})}return m})(),El=(()=>{class m{constructor(a,_){this.mapService=a,this.controlComponent=_}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.compact&&(a.compact=this.compact),void 0!==this.customAttribution&&(a.customAttribution=this.customAttribution),this.controlComponent.control=new te.AttributionControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(Lo,1))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}})}return m})(),Xr=(()=>{class m{constructor(a,_){this.mapService=a,this.controlComponent=_}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new te.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(Lo,1))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglFullscreen",""]],hostBindings:function(_,C){1&_&&l.bIt("webkitfullscreenchange",function(ee){return C.onFullscreen(ee.target)},!1,l.tSv)},inputs:{container:"container"}})}return m})(),tl=(()=>{class m{constructor(a,_){this.mapService=a,this.controlComponent=_,this.geolocate=new l.bkB}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation,showUserHeading:this.showUserHeading};Object.keys(a).forEach(_=>{void 0===a[_]&&delete a[_]}),this.controlComponent.control=new te.GeolocateControl(a),this.controlComponent.control.on("geolocate",_=>{this.geolocate.emit(_)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(Lo,1))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation",showUserHeading:"showUserHeading"},outputs:{geolocate:"geolocate"}})}return m})(),Fa=(()=>{class m{constructor(a,_){this.mapService=a,this.controlComponent=_}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.showCompass&&(a.showCompass=this.showCompass),void 0!==this.showZoom&&(a.showZoom=this.showZoom),this.controlComponent.control=new te.NavigationControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(Lo,1))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}})}return m})(),Cl=(()=>{class m{constructor(a,_){this.mapService=a,this.controlComponent=_}ngOnChanges(a){a.unit&&!a.unit.isFirstChange()&&this.controlComponent.control.setUnit(a.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.maxWidth&&(a.maxWidth=this.maxWidth),void 0!==this.unit&&(a.unit=this.unit),this.controlComponent.control=new te.ScaleControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(Lo,1))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.OA$]})}return m})();var qs=H(3726),ss=H(5964),gc=H(8141),oa=H(5558),ro=H(6977),_c=H(6697),Tl=H(3703),Dl=H(9172);const zi=(m,w,a)=>{console.warn(`[ngx-mapbox-gl]: ${m}: ${w} is deprecated, please use ${a} instead.`)};let oo=(()=>{class m{constructor(a){this.mapService=a,this.layerClick=new l.bkB,this.layerDblClick=new l.bkB,this.layerMouseDown=new l.bkB,this.layerMouseUp=new l.bkB,this.layerMouseEnter=new l.bkB,this.layerMouseLeave=new l.bkB,this.layerMouseMove=new l.bkB,this.layerMouseOver=new l.bkB,this.layerMouseOut=new l.bkB,this.layerContextMenu=new l.bkB,this.layerTouchStart=new l.bkB,this.layerTouchEnd=new l.bkB,this.layerTouchCancel=new l.bkB,this.click=new l.bkB,this.dblClick=new l.bkB,this.mouseDown=new l.bkB,this.mouseUp=new l.bkB,this.mouseEnter=new l.bkB,this.mouseLeave=new l.bkB,this.mouseMove=new l.bkB,this.mouseOver=new l.bkB,this.mouseOut=new l.bkB,this.contextMenu=new l.bkB,this.touchStart=new l.bkB,this.touchEnd=new l.bkB,this.touchCancel=new l.bkB,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,oa.n)(()=>(0,qs.R)(this.mapService.mapInstance,"styledata").pipe((0,Tl.u)(!1),(0,ss.p)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Dl.Z)(!0)))).subscribe(a=>this.init(a))}ngOnChanges(a){this.layerAdded&&(a.paint&&!a.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,a.paint.currentValue),a.layout&&!a.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,a.layout.currentValue),a.filter&&!a.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,a.filter.currentValue),a.before&&!a.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,a.before.currentValue),(a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.mapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(a){this.mapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},a,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.click.observed&&a("click","layerClick"),this.dblClick.observed&&a("dblClick","layerDblClick"),this.mouseDown.observed&&a("mouseDown","layerMouseDown"),this.mouseUp.observed&&a("mouseUp","layerMouseUp"),this.mouseEnter.observed&&a("mouseEnter","layerMouseEnter"),this.mouseLeave.observed&&a("mouseLeave","layerMouseLeave"),this.mouseMove.observed&&a("mouseMove","layerMouseMove"),this.mouseOver.observed&&a("mouseOver","layerMouseOver"),this.mouseOut.observed&&a("mouseOut","layerMouseOut"),this.contextMenu.observed&&a("contextMenu","layerContextMenu"),this.touchStart.observed&&a("touchStart","layerTouchStart"),this.touchEnd.observed&&a("touchEnd","layerTouchEnd"),this.touchCancel.observed&&a("touchCancel","layerTouchCancel")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[l.OA$],decls:0,vars:0,template:function(_,C){},encapsulation:2})}return m})();var Da=H(152);let Fo=(()=>{class m{constructor(a,_){this.mapService=a,this.zone=_,this.updateFeatureData=new _e.B,this.sub=new Ei.yU,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const a=this.mapService.mapLoaded$.subscribe(()=>{this.init();const _=(0,qs.R)(this.mapService.mapInstance,"styledata").pipe((0,ss.p)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(_)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded&&((a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.buffer&&!a.buffer.isFirstChange()||a.tolerance&&!a.tolerance.isFirstChange()||a.cluster&&!a.cluster.isFirstChange()||a.clusterRadius&&!a.clusterRadius.isFirstChange()||a.clusterMaxZoom&&!a.clusterMaxZoom.isFirstChange()||a.clusterMinPoints&&!a.clusterMinPoints.isFirstChange()||a.clusterProperties&&!a.clusterProperties.isFirstChange()||a.lineMetrics&&!a.lineMetrics.isFirstChange()||a.generateId&&!a.generateId.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange()||a.filter&&!a.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),a.data&&!a.data.isFirstChange())){const _=this.mapService.getSource(this.id);if(void 0===_)return;_.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(a){var _=this;return(0,X.A)(function*(){const C=_.mapService.getSource(_.id);return _.zone.run((0,X.A)(function*(){return new Promise((N,ee)=>{C.getClusterExpansionZoom(a,(ve,ct)=>{ve?ee(ve):N(ct)})})}))})()}getClusterChildren(a){var _=this;return(0,X.A)(function*(){const C=_.mapService.getSource(_.id);return _.zone.run((0,X.A)(function*(){return new Promise((N,ee)=>{C.getClusterChildren(a,(ve,ct)=>{ve?ee(ve):N(ct)})})}))})()}getClusterLeaves(a,_,C){var N=this;return(0,X.A)(function*(){const ee=N.mapService.getSource(N.id);return N.zone.run((0,X.A)(function*(){return new Promise((ve,ct)=>{ee.getClusterLeaves(a,_,C,(Dt,dn)=>{Dt?ct(Dt):ve(dn)})})}))})()}_addFeature(a){this.data.features.push(a),this.updateFeatureData.next(null)}_removeFeature(a){const _=this.data,C=_.features.indexOf(a);C>-1&&_.features.splice(C,1),this.updateFeatureData.next(null)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const _=this.updateFeatureData.pipe((0,Da.B)(0)).subscribe(()=>{const C=this.mapService.getSource(this.id);void 0!==C&&C.setData(this.data)});this.sub.add(_),this.sourceAdded=!0}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(l.SKi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.OA$],decls:0,vars:0,template:function(_,C){},encapsulation:2,changeDetection:0})}return m})(),yc=(()=>{class m{constructor(a){this.GeoJSONSourceComponent=a,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(a){this.feature.geometry.coordinates=a,this.GeoJSONSourceComponent.updateFeatureData.next(null)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU((0,l.Rfq)(()=>Fo)))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(_,C){},encapsulation:2,changeDetection:0})}return m})(),zc=(()=>{class m{constructor(a,_,C){this.mapService=a,this.ngZone=_,this.featureComponent=C,this.featureDragStart=new l.bkB,this.featureDragEnd=new l.bkB,this.featureDrag=new l.bkB,this.dragStart=new l.bkB,this.dragEnd=new l.bkB,this.drag=new l.bkB,this.sub=new Ei.yU}ngOnInit(){let a,_,C;if(this.warnDeprecatedOutputs(),!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(a=this.layer.layerMouseEnter,_=this.layer.layerMouseLeave,C=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(a,_,C)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(a,_,C){let N=!1,ee=!1;this.mapService.mapCreated$.subscribe(()=>{const ve=(0,qs.R)(this.mapService.mapInstance,"mouseup"),ct=a.pipe((0,ss.p)(()=>!N),(0,ss.p)(cn=>this.filterFeature(cn)),(0,gc.M)(()=>{ee=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,oa.n)(()=>(0,qs.R)(this.mapService.mapInstance,"mousedown").pipe((0,ro.Q)(_)))),Dt=ct.pipe((0,oa.n)(()=>(0,qs.R)(this.mapService.mapInstance,"mousemove").pipe((0,ro.Q)(ve)))),dn=ct.pipe((0,oa.n)(()=>ve.pipe((0,_c.s)(1))));this.sub.add(ct.subscribe(cn=>{N=!0,(this.featureDragStart.observed||this.dragStart.observed)&&this.ngZone.run(()=>{this.featureDragStart.emit(cn),this.dragStart.emit(cn)})})),this.sub.add(Dt.subscribe(cn=>{C([cn.lngLat.lng,cn.lngLat.lat]),(this.featureDrag.observed||this.drag.observed)&&this.ngZone.run(()=>{this.featureDrag.emit(cn),this.drag.emit(cn)})})),this.sub.add(dn.subscribe(cn=>{N=!1,(this.featureDragEnd.observed||this.dragEnd.observed)&&this.ngZone.run(()=>{this.featureDragEnd.emit(cn),this.dragEnd.emit(cn)}),ee||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(_.pipe((0,gc.M)(()=>ee=!1),(0,ss.p)(()=>!N)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(a){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(a.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.dragStart.observed&&a("dragStart","featureDragStart"),this.dragEnd.observed&&a("dragEnd","featureDragEnd"),this.drag.observed&&a("drag","featureDrag")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(l.SKi),l.rXU(yc,9))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mglDraggable",""]],inputs:{layer:[0,"mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"}})}return m})(),nl=(()=>{class m{constructor(a,_){this.mapService=a,this.zone=_,this.imageError=new l.bkB,this.imageLoaded=new l.bkB,this.error=new l.bkB,this.loaded=new l.bkB,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,oa.n)(()=>(0,qs.R)(this.mapService.mapInstance,"styledata").pipe((0,Dl.Z)(void 0),(0,ss.p)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(a){(a.data&&!a.data.isFirstChange()||a.options&&!a.options.isFirstChange()||a.url&&!a.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var a=this;return(0,X.A)(function*(){if(a.isAdding=!0,a.data)a.mapService.addImage(a.id,a.data,a.options),a.isAdded=!0,a.isAdding=!1;else if(a.url)try{yield a.mapService.loadAndAddImage(a.id,a.url,a.options),a.isAdded=!0,a.isAdding=!1,a.zone.run(()=>{a.imageLoaded.emit(),a.loaded.emit()})}catch(_){a.zone.run(()=>{a.imageError.emit(_),a.error.emit(_)})}})()}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.error.observed&&a("error","imageError"),this.loaded.observed&&a("loaded","imageLoaded")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(l.SKi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded",error:"error",loaded:"loaded"},features:[l.OA$],decls:0,vars:0,template:function(_,C){},encapsulation:2})}return m})();var jd=H(9350);const Ir=["container"];let tr=(()=>{class m{get mapInstance(){return this.mapService.mapInstance}constructor(a){this.mapService=a,this.movingMethod="flyTo",this.mapResize=new l.bkB,this.mapRemove=new l.bkB,this.mapMouseDown=new l.bkB,this.mapMouseUp=new l.bkB,this.mapMouseMove=new l.bkB,this.mapClick=new l.bkB,this.mapDblClick=new l.bkB,this.mapMouseOver=new l.bkB,this.mapMouseOut=new l.bkB,this.mapContextMenu=new l.bkB,this.mapTouchStart=new l.bkB,this.mapTouchEnd=new l.bkB,this.mapTouchMove=new l.bkB,this.mapTouchCancel=new l.bkB,this.mapWheel=new l.bkB,this.moveStart=new l.bkB,this.move=new l.bkB,this.moveEnd=new l.bkB,this.mapDragStart=new l.bkB,this.mapDrag=new l.bkB,this.mapDragEnd=new l.bkB,this.zoomStart=new l.bkB,this.zoomEvt=new l.bkB,this.zoomEnd=new l.bkB,this.rotateStart=new l.bkB,this.rotate=new l.bkB,this.rotateEnd=new l.bkB,this.pitchStart=new l.bkB,this.pitchEvt=new l.bkB,this.pitchEnd=new l.bkB,this.boxZoomStart=new l.bkB,this.boxZoomEnd=new l.bkB,this.boxZoomCancel=new l.bkB,this.webGlContextLost=new l.bkB,this.webGlContextRestored=new l.bkB,this.mapLoad=new l.bkB,this.mapCreate=new l.bkB,this.idle=new l.bkB,this.render=new l.bkB,this.mapError=new l.bkB,this.data=new l.bkB,this.styleData=new l.bkB,this.sourceData=new l.bkB,this.dataLoading=new l.bkB,this.styleDataLoading=new l.bkB,this.sourceDataLoading=new l.bkB,this.styleImageMissing=new l.bkB,this.resize=new l.bkB,this.remove=new l.bkB,this.mouseDown=new l.bkB,this.mouseUp=new l.bkB,this.mouseMove=new l.bkB,this.click=new l.bkB,this.dblClick=new l.bkB,this.mouseOver=new l.bkB,this.mouseOut=new l.bkB,this.contextMenu=new l.bkB,this.touchStart=new l.bkB,this.touchEnd=new l.bkB,this.touchMove=new l.bkB,this.touchCancel=new l.bkB,this.wheel=new l.bkB,this.dragStart=new l.bkB,this.drag=new l.bkB,this.dragEnd=new l.bkB,this.load=new l.bkB,this.error=new l.bkB}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.mapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,projection:this.projection},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(a){var _=this;return(0,X.A)(function*(){yield function sd(m,w){const a="object"==typeof w;return new Promise((_,C)=>{let ee,N=!1;m.subscribe({next:ve=>{ee=ve,N=!0},error:C,complete:()=>{N?_(ee):a?_(w.defaultValue):C(new jd.G)}})})}(_.mapService.mapCreated$),a.cursorStyle&&!a.cursorStyle.isFirstChange()&&_.mapService.changeCanvasCursor(a.cursorStyle.currentValue),a.projection&&!a.projection.isFirstChange()&&_.mapService.updateProjection(a.projection.currentValue),a.minZoom&&!a.minZoom.isFirstChange()&&_.mapService.updateMinZoom(a.minZoom.currentValue),a.maxZoom&&!a.maxZoom.isFirstChange()&&_.mapService.updateMaxZoom(a.maxZoom.currentValue),a.minPitch&&!a.minPitch.isFirstChange()&&_.mapService.updateMinPitch(a.minPitch.currentValue),a.maxPitch&&!a.maxPitch.isFirstChange()&&_.mapService.updateMaxPitch(a.maxPitch.currentValue),a.renderWorldCopies&&!a.renderWorldCopies.isFirstChange()&&_.mapService.updateRenderWorldCopies(a.renderWorldCopies.currentValue),a.scrollZoom&&!a.scrollZoom.isFirstChange()&&_.mapService.updateScrollZoom(a.scrollZoom.currentValue),a.dragRotate&&!a.dragRotate.isFirstChange()&&_.mapService.updateDragRotate(a.dragRotate.currentValue),a.touchPitch&&!a.touchPitch.isFirstChange()&&_.mapService.updateTouchPitch(a.touchPitch.currentValue),a.touchZoomRotate&&!a.touchZoomRotate.isFirstChange()&&_.mapService.updateTouchZoomRotate(a.touchZoomRotate.currentValue),a.doubleClickZoom&&!a.doubleClickZoom.isFirstChange()&&_.mapService.updateDoubleClickZoom(a.doubleClickZoom.currentValue),a.keyboard&&!a.keyboard.isFirstChange()&&_.mapService.updateKeyboard(a.keyboard.currentValue),a.dragPan&&!a.dragPan.isFirstChange()&&_.mapService.updateDragPan(a.dragPan.currentValue),a.boxZoom&&!a.boxZoom.isFirstChange()&&_.mapService.updateBoxZoom(a.boxZoom.currentValue),a.style&&!a.style.isFirstChange()&&_.mapService.updateStyle(a.style.currentValue),a.maxBounds&&!a.maxBounds.isFirstChange()&&_.mapService.updateMaxBounds(a.maxBounds.currentValue),a.fitBounds&&a.fitBounds.currentValue&&!a.fitBounds.isFirstChange()&&_.mapService.fitBounds(a.fitBounds.currentValue,_.fitBoundsOptions),a.fitScreenCoordinates&&a.fitScreenCoordinates.currentValue&&((_.center||_.zoom||_.pitch||_.fitBounds)&&a.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),_.mapService.fitScreenCoordinates(a.fitScreenCoordinates.currentValue,_.bearing?_.bearing[0]:0,_.movingOptions)),!_.centerWithPanTo||!a.center||a.center.isFirstChange()||a.zoom||a.bearing||a.pitch?(a.center&&!a.center.isFirstChange()||a.zoom&&!a.zoom.isFirstChange()||a.bearing&&!a.bearing.isFirstChange()&&!a.fitScreenCoordinates||a.pitch&&!a.pitch.isFirstChange())&&_.mapService.move(_.movingMethod,_.movingOptions,a.zoom&&_.zoom?_.zoom[0]:void 0,a.center?_.center:void 0,a.bearing&&_.bearing?_.bearing[0]:void 0,a.pitch&&_.pitch?_.pitch[0]:void 0):_.mapService.panTo(_.center,_.panToOptions)})()}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.resize.observed&&a("resize","mapResize"),this.remove.observed&&a("remove","mapRemove"),this.mouseDown.observed&&a("mouseDown","mapMouseDown"),this.mouseUp.observed&&a("mouseUp","mapMouseUp"),this.mouseMove.observed&&a("mouseMove","mapMouseMove"),this.click.observed&&a("click","mapClick"),this.dblClick.observed&&a("dblClick","mapDblClick"),this.mouseOver.observed&&a("mouseOver","mapMouseOver"),this.mouseOut.observed&&a("mouseOut","mapMouseOut"),this.contextMenu.observed&&a("contextMenu","mapContextMenu"),this.touchStart.observed&&a("touchStart","mapTouchStart"),this.touchEnd.observed&&a("touchEnd","mapTouchEnd"),this.touchMove.observed&&a("touchMove","mapTouchMove"),this.touchCancel.observed&&a("touchCancel","mapTouchCancel"),this.wheel.observed&&a("wheel","mapWheel"),this.dragStart.observed&&a("dragStart","mapDragStart"),this.drag.observed&&a("drag","mapDrag"),this.dragEnd.observed&&a("dragEnd","mapDragEnd"),this.load.observed&&a("load","mapLoad"),this.error.observed&&a("error","mapError")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-map"]],viewQuery:function(_,C){if(1&_&&l.GBs(Ir,7),2&_){let N;l.mGM(N=l.lsd())&&(C.mapContainer=N.first)}},inputs:{accessToken:"accessToken",collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",projection:"projection",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",mapCreate:"mapCreate",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[l.Jv_([mi]),l.OA$],decls:2,vars:0,consts:[["container",""]],template:function(_,C){1&_&&l.nrm(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return m})();const Gd=["content"],Zl=["*"];let $o=(()=>{class m{constructor(a){this.mapService=a,this.markerDragStart=new l.bkB,this.markerDragEnd=new l.bkB,this.markerDrag=new l.bkB,this.dragStart=new l.bkB,this.dragEnd=new l.bkB,this.drag=new l.bkB}ngOnInit(){if(this.warnDeprecatedOutputs(),this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(a){a.lngLat&&!a.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),a.feature&&!a.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),a.draggable&&!a.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),a.popupShown&&!a.popupShown.isFirstChange()&&(a.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),a.pitchAlignment&&!a.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(a.pitchAlignment.currentValue),a.rotationAlignment&&!a.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(a.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd,dragStart:this.markerDragStart,drag:this.markerDrag,dragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(a){this.markerInstance.setLngLat(a)}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.markerDragStart.observed&&a("dragStart","markerDragStart"),this.markerDragEnd.observed&&a("dragEnd","markerDragEnd"),this.markerDrag.observed&&a("drag","markerDrag")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-marker"]],viewQuery:function(_,C){if(1&_&&l.GBs(Gd,7),2&_){let N;l.mGM(N=l.lsd())&&(C.content=N.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"},features:[l.OA$],ngContentSelectors:Zl,decls:3,vars:2,consts:[["content",""]],template:function(_,C){1&_&&(l.NAR(),l.j41(0,"div",null,0),l.SdG(2),l.k0s()),2&_&&l.HbH(C.className)},encapsulation:2,changeDetection:0})}return m})();var vc=H(7786);const bc=()=>({"circle-radius":0}),sa=m=>({$implicit:m});function cu(m,w){1&m&&l.eu8(0)}function Vc(m,w){if(1&m&&(l.qex(0),l.j41(1,"mgl-marker",3),l.DNE(2,cu,1,0,"ng-container",4),l.k0s(),l.bVm()),2&m){const a=l.XpG().$implicit,_=l.XpG();l.R7$(),l.Y8G("feature",a),l.R7$(),l.Y8G("ngTemplateOutlet",_.clusterPointTpl)("ngTemplateOutletContext",l.eq3(3,sa,a))}}function Ki(m,w){1&m&&l.eu8(0)}function br(m,w){if(1&m&&(l.qex(0),l.j41(1,"mgl-marker",3),l.DNE(2,Ki,1,0,"ng-container",4),l.k0s(),l.bVm()),2&m){const a=l.XpG().$implicit,_=l.XpG();l.R7$(),l.Y8G("feature",a),l.R7$(),l.Y8G("ngTemplateOutlet",_.pointTpl)("ngTemplateOutletContext",l.eq3(3,sa,a))}}function Fu(m,w){if(1&m&&(l.qex(0),l.DNE(1,Vc,3,5,"ng-container",2)(2,br,3,5,"ng-container",2),l.bVm()),2&m){const a=w.$implicit;l.R7$(),l.Y8G("ngIf",a.properties.cluster),l.R7$(),l.Y8G("ngIf",!a.properties.cluster)}}let Uc=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["ng-template","mglPoint",""]]})}return m})(),Na=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["ng-template","mglClusterPoint",""]]})}return m})(),uu=0,Ml=(()=>{class m{constructor(a,_,C){this.mapService=a,this.ChangeDetectorRef=_,this.zone=C,this.layerId="mgl-markers-for-clusters-"+uu++,this.sub=new Ei.yU}ngAfterContentInit(){const _=this.mapService.mapCreated$.pipe((0,oa.n)(()=>(0,qs.R)(this.mapService.mapInstance,"data").pipe((0,ss.p)(C=>C.sourceId===this.source&&"metadata"!==C.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,oa.n)(()=>(0,vc.h)((0,qs.R)(this.mapService.mapInstance,"move"),(0,qs.R)(this.mapService.mapInstance,"moveend")).pipe((0,Dl.Z)(void 0)))).subscribe(()=>{this.zone.run(()=>{this.updateCluster()})});this.sub.add(_)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(a,_){return _.id}updateCluster(){const a={layers:[this.layerId]};this.pointTpl||(a.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(a),this.ChangeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi),l.rXU(l.gRc),l.rXU(l.SKi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(_,C,N){if(1&_&&(l.wni(N,Uc,5,l.C4Q),l.wni(N,Na,5,l.C4Q)),2&_){let ee;l.mGM(ee=l.lsd())&&(C.pointTpl=ee.first),l.mGM(ee=l.lsd())&&(C.clusterPointTpl=ee.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(_,C){1&_&&(l.nrm(0,"mgl-layer",0),l.DNE(1,Fu,3,2,"ng-container",1)),2&_&&(l.Y8G("id",C.layerId)("source",C.source)("paint",l.lJ4(5,bc)),l.R7$(),l.Y8G("ngForOf",C.clusterPoints)("ngForTrackBy",C.trackByClusterPoint))},dependencies:[lr.Sq,lr.bT,lr.T3,oo,$o],encapsulation:2,changeDetection:0})}return m})(),Kn=(()=>{class m{static withConfig(a){return{ngModule:m,providers:[{provide:io,useValue:a.accessToken}]}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[lr.MD]})}return m})();const Wi=["content"],xc=["*"];let Ma=(()=>{class m{constructor(a){this.mapService=a,this.popupClose=new l.bkB,this.popupOpen=new l.bkB,this.close=new l.bkB,this.open=new l.bkB}ngOnInit(){if(this.warnDeprecatedOutputs(),this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(a){if(a.lngLat&&!a.lngLat.isFirstChange()||a.feature&&!a.feature.isFirstChange()){const _=a.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const C=this.createPopup();this.mapService.addPopupToMap(C,_,this.popupInstance.isOpen()),this.popupInstance=C}if(a.marker&&!a.marker.isFirstChange()){const _=a.marker.previousValue;_.markerInstance&&this.mapService.removePopupFromMarker(_.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}a.offset&&!a.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{open:this.open,close:this.close,popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(a){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(a,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,a)}})}warnDeprecatedOutputs(){const a=zi.bind(void 0,m.name);this.close.observed&&a("close","popupClose"),this.open.observed&&a("open","popupOpen")}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-popup"]],viewQuery:function(_,C){if(1&_&&l.GBs(Wi,7),2&_){let N;l.mGM(N=l.lsd())&&(C.content=N.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen",close:"close",open:"open"},features:[l.OA$],ngContentSelectors:xc,decls:3,vars:0,consts:[["content",""]],template:function(_,C){1&_&&(l.NAR(),l.j41(0,"div",null,0),l.SdG(2),l.k0s())},encapsulation:2,changeDetection:0})}return m})(),aa=(()=>{class m{constructor(a){this.mapService=a}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(a){if(void 0===this.sourceId)return;const _=this.mapService.getSource(this.sourceId);void 0!==_&&_.updateImage({url:void 0===a.url?void 0:this.url,coordinates:void 0===a.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.OA$],decls:0,vars:0,template:function(_,C){},encapsulation:2,changeDetection:0})}return m})(),Yl=(()=>{class m{constructor(a){this.mapService=a,this.type="vector",this.sourceAdded=!1,this.sub=new Ei.yU}ngOnInit(){const a=this.mapService.mapLoaded$.subscribe(()=>{this.init();const _=(0,qs.R)(this.mapService.mapInstance,"styledata").pipe((0,ss.p)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(_)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded)if(a.bounds&&!a.bounds.isFirstChange()||a.scheme&&!a.scheme.isFirstChange()||a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(a.url&&!a.url.isFirstChange()||a.tiles&&!a.tiles.isFirstChange()){const _=this.mapService.getSource(this.id);if(void 0===_)return;a.url&&this.url&&_.setUrl(this.url),a.tiles&&this.tiles&&_.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.OA$],decls:0,vars:0,template:function(_,C){},encapsulation:2,changeDetection:0})}return m})();var V=H(5874);const q="object"==typeof global&&global&&global.Object===Object&&global;var ce="object"==typeof self&&self&&self.Object===Object&&self;const Bt=q||ce||Function("return this")(),Un=Bt.Symbol;var Hr=Object.prototype,qi=Hr.hasOwnProperty,Fr=Hr.toString,Vn=Un?Un.toStringTag:void 0;var Sa=Object.prototype.toString;var ca=Un?Un.toStringTag:void 0;const Sl=function Ba(m){return null==m?void 0===m?"[object Undefined]":"[object Null]":ca&&ca in Object(m)?function so(m){var w=qi.call(m,Vn),a=m[Vn];try{m[Vn]=void 0;var _=!0}catch{}var C=Fr.call(m);return _&&(w?m[Vn]=a:delete m[Vn]),C}(m):function Ia(m){return Sa.call(m)}(m)},_o=function Il(m){var w=typeof m;return null!=m&&("object"==w||"function"==w)},ld=function ua(m){if(!_o(m))return!1;var w=Sl(m);return"[object Function]"==w||"[object GeneratorFunction]"==w||"[object AsyncFunction]"==w||"[object Proxy]"==w};var m,cd=Bt["__core-js_shared__"],Nu=(m=/[^.]+$/.exec(cd&&cd.keys&&cd.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";var ud=Function.prototype.toString;const ms=function Bu(m){if(null!=m){try{return ud.call(m)}catch{}try{return m+""}catch{}}return""};var il=/^\[object .+?Constructor\]$/,Al=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const dd=function Va(m){return!(!_o(m)||function Wn(m){return!!Nu&&Nu in m}(m))&&(ld(m)?Al:il).test(ms(m))},Oa=function pd(m,w){var a=function Uu(m,w){return m?.[w]}(m,w);return dd(a)?a:void 0};var ju=function(){try{var m=Oa(Object,"defineProperty");return m({},"",{}),m}catch{}}();const pu=ju,Gc=function Wd(m,w,a){"__proto__"==w&&pu?pu(m,w,{configurable:!0,enumerable:!0,value:a,writable:!0}):m[w]=a},Xd=function _p(m,w,a,_){for(var C=-1,N=null==m?0:m.length;++C<N;){var ee=m[C];w(_,ee,a(ee),m)}return _};var Kd=function rl(m){return function(w,a,_){for(var C=-1,N=Object(w),ee=_(w),ve=ee.length;ve--;){var ct=ee[m?ve:++C];if(!1===a(N[ct],ct,N))break}return w}}();const yp=Kd,$=function L(m){return null!=m&&"object"==typeof m},f=function we(m){return $(m)&&"[object Arguments]"==Sl(m)};var i=Object.prototype,d=i.hasOwnProperty,v=i.propertyIsEnumerable,E=f(function(){return arguments}())?f:function(m){return $(m)&&d.call(m,"callee")&&!v.call(m,"callee")};const M=E,P=Array.isArray;var Q="object"==typeof exports&&exports&&!exports.nodeType&&exports,ae=Q&&"object"==typeof module&&module&&!module.nodeType&&module,Ce=ae&&ae.exports===Q?Bt.Buffer:void 0;const We=(Ce?Ce.isBuffer:void 0)||function B(){return!1};var Le=/^(?:0|[1-9]\d*)$/;const et=function Ne(m,w){var a=typeof m;return!!(w=w??9007199254740991)&&("number"==a||"symbol"!=a&&Le.test(m))&&m>-1&&m%1==0&&m<w},_t=function Ke(m){return"number"==typeof m&&m>-1&&m%1==0&&m<=9007199254740991};var jr={};jr["[object Float32Array]"]=jr["[object Float64Array]"]=jr["[object Int8Array]"]=jr["[object Int16Array]"]=jr["[object Int32Array]"]=jr["[object Uint8Array]"]=jr["[object Uint8ClampedArray]"]=jr["[object Uint16Array]"]=jr["[object Uint32Array]"]=!0,jr["[object Arguments]"]=jr["[object Array]"]=jr["[object ArrayBuffer]"]=jr["[object Boolean]"]=jr["[object DataView]"]=jr["[object Date]"]=jr["[object Error]"]=jr["[object Function]"]=jr["[object Map]"]=jr["[object Number]"]=jr["[object Object]"]=jr["[object RegExp]"]=jr["[object Set]"]=jr["[object String]"]=jr["[object WeakMap]"]=!1;const Br=function ko(m){return function(w){return m(w)}};var Mr="object"==typeof exports&&exports&&!exports.nodeType&&exports,Jo=Mr&&"object"==typeof module&&module&&!module.nodeType&&module,gs=Jo&&Jo.exports===Mr&&q.process;const da=function(){try{return Jo&&Jo.require&&Jo.require("util").types||gs&&gs.binding&&gs.binding("util")}catch{}}();var $u=da&&da.isTypedArray;const $c=$u?Br($u):function kl(m){return $(m)&&_t(m.length)&&!!jr[Sl(m)]};var Ol=Object.prototype.hasOwnProperty;const po=function Rl(m,w){var a=P(m),_=!a&&M(m),C=!a&&!_&&We(m),N=!a&&!_&&!C&&$c(m),ee=a||_||C||N,ve=ee?function R(m,w){for(var a=-1,_=Array(m);++a<m;)_[a]=w(a);return _}(m.length,String):[],ct=ve.length;for(var Dt in m)(w||Ol.call(m,Dt))&&(!ee||!("length"==Dt||C&&("offset"==Dt||"parent"==Dt)||N&&("buffer"==Dt||"byteLength"==Dt||"byteOffset"==Dt)||et(Dt,ct)))&&ve.push(Dt);return ve};var Yn=Object.prototype;const es=function Hi(m){var w=m&&m.constructor;return m===("function"==typeof w&&w.prototype||Yn)},Ys=function Ec(m,w){return function(a){return m(w(a))}},Zd=Ys(Object.keys,Object);var Ms=Object.prototype.hasOwnProperty;const vp=function zh(m){return null!=m&&_t(m.length)&&!ld(m)},To=function qd(m){return vp(m)?po(m):function Hc(m){if(!es(m))return Zd(m);var w=[];for(var a in Object(m))Ms.call(m,a)&&"constructor"!=a&&w.push(a);return w}(m)};var Uh=function fu(m,w){return function(a,_){if(null==a)return a;if(!vp(a))return m(a,_);for(var C=a.length,N=w?C:-1,ee=Object(a);(w?N--:++N<C)&&!1!==_(ee[N],N,ee););return a}}(function Yd(m,w){return m&&yp(m,w,To)});const md=Uh,Jl=function Qd(m,w,a,_){return md(m,function(C,N,ee){w(_,C,a(C),ee)}),_},ol=function ec(m,w){return m===w||m!=m&&w!=w},mu=function xp(m,w){for(var a=m.length;a--;)if(ol(m[a][0],w))return a;return-1};var Cf=Array.prototype.splice;function Mc(m){var w=-1,a=null==m?0:m.length;for(this.clear();++w<a;){var _=m[w];this.set(_[0],_[1])}}Mc.prototype.clear=function Pi(){this.__data__=[],this.size=0},Mc.prototype.delete=function ha(m){var w=this.__data__,a=mu(w,m);return!(a<0||(a==w.length-1?w.pop():Cf.call(w,a,1),--this.size,0))},Mc.prototype.get=function Jd(m){var w=this.__data__,a=mu(w,m);return a<0?void 0:w[a][1]},Mc.prototype.has=function Tc(m){return mu(this.__data__,m)>-1},Mc.prototype.set=function Dc(m,w){var a=this.__data__,_=mu(a,m);return _<0?(++this.size,a.push([m,w])):a[_][1]=w,this};const Gh=Mc,Ai=Oa(Bt,"Map"),$h=Oa(Object,"create");var sl=Object.prototype.hasOwnProperty;var th=Object.prototype.hasOwnProperty;function vd(m){var w=-1,a=null==m?0:m.length;for(this.clear();++w<a;){var _=m[w];this.set(_[0],_[1])}}vd.prototype.clear=function ao(){this.__data__=$h?$h(null):{},this.size=0},vd.prototype.delete=function Kg(m){var w=this.has(m)&&delete this.__data__[m];return this.size-=w?1:0,w},vd.prototype.get=function As(m){var w=this.__data__;if($h){var a=w[m];return"__lodash_hash_undefined__"===a?void 0:a}return sl.call(w,m)?w[m]:void 0},vd.prototype.has=function wp(m){var w=this.__data__;return $h?void 0!==w[m]:th.call(w,m)},vd.prototype.set=function qy(m,w){var a=this.__data__;return this.size+=this.has(m)?0:1,a[m]=$h&&void 0===w?"__lodash_hash_undefined__":w,this};const Zg=vd,Gr=function Df(m,w){var a=m.__data__;return function tc(m){var w=typeof m;return"string"==w||"number"==w||"symbol"==w||"boolean"==w?"__proto__"!==m:null===m}(w)?a["string"==typeof w?"string":"hash"]:a.map};function Ll(m){var w=-1,a=null==m?0:m.length;for(this.clear();++w<a;){var _=m[w];this.set(_[0],_[1])}}Ll.prototype.clear=function Xc(){this.size=0,this.__data__={hash:new Zg,map:new(Ai||Gh),string:new Zg}},Ll.prototype.delete=function Nm(m){var w=Gr(this,m).delete(m);return this.size-=w?1:0,w},Ll.prototype.get=function al(m){return Gr(this,m).get(m)},Ll.prototype.has=function Cp(m){return Gr(this,m).has(m)},Ll.prototype.set=function Pl(m,w){var a=Gr(this,m),_=a.size;return a.set(m,w),this.size+=a.size==_?0:1,this};const Tp=Ll;function bd(m){var w=this.__data__=new Gh(m);this.size=w.size}bd.prototype.clear=function Xg(){this.__data__=new Gh,this.size=0},bd.prototype.delete=function Rm(m){var w=this.__data__,a=w.delete(m);return this.size=w.size,a},bd.prototype.get=function Pm(m){return this.__data__.get(m)},bd.prototype.has=function qb(m){return this.__data__.has(m)},bd.prototype.set=function ih(m,w){var a=this.__data__;if(a instanceof Gh){var _=a.__data__;if(!Ai||_.length<199)return _.push([m,w]),this.size=++a.size,this;a=this.__data__=new Tp(_)}return a.set(m,w),this.size=a.size,this};const yu=bd;function ki(m){var w=-1,a=null==m?0:m.length;for(this.__data__=new Tp;++w<a;)this.add(m[w])}ki.prototype.add=ki.prototype.push=function Mf(m){return this.__data__.set(m,"__lodash_hash_undefined__"),this},ki.prototype.has=function Ga(m){return this.__data__.has(m)};const Kc=ki,Zc=function Wu(m,w){for(var a=-1,_=null==m?0:m.length;++a<_;)if(w(m[a],a,m))return!0;return!1},Sf=function Vm(m,w){return m.has(w)},Xu=function If(m,w,a,_,C,N){var ee=1&a,ve=m.length,ct=w.length;if(ve!=ct&&!(ee&&ct>ve))return!1;var Dt=N.get(m),dn=N.get(w);if(Dt&&dn)return Dt==w&&dn==m;var cn=-1,ci=!0,Di=2&a?new Kc:void 0;for(N.set(m,w),N.set(w,m);++cn<ve;){var pi=m[cn],wi=w[cn];if(_)var ir=ee?_(wi,pi,cn,w,m,N):_(pi,wi,cn,m,w,N);if(void 0!==ir){if(ir)continue;ci=!1;break}if(Di){if(!Zc(w,function(Cr,co){if(!Sf(Di,co)&&(pi===Cr||C(pi,Cr,a,_,N)))return Di.push(co)})){ci=!1;break}}else if(pi!==wi&&!C(pi,wi,a,_,N)){ci=!1;break}}return N.delete(m),N.delete(w),ci},Ku=Bt.Uint8Array,Um=function xd(m){var w=-1,a=Array(m.size);return m.forEach(function(_,C){a[++w]=[C,_]}),a},pn=function Qg(m){var w=-1,a=Array(m.size);return m.forEach(function(_){a[++w]=_}),a};var Zu=Un?Un.prototype:void 0,Ip=Zu?Zu.valueOf:void 0;const Fl=function Gm(m,w){for(var a=-1,_=w.length,C=m.length;++a<_;)m[C+a]=w[a];return m},kf=function Yc(m,w,a){var _=w(m);return P(m)?_:Fl(_,a(m))},Ap=function Qy(){return[]};var Hm=Object.prototype.propertyIsEnumerable,Wh=Object.getOwnPropertySymbols,e_=Wh?function(m){return null==m?[]:(m=Object(m),function Nl(m,w){for(var a=-1,_=null==m?0:m.length,C=0,N=[];++a<_;){var ee=m[a];w(ee,a,m)&&(N[C++]=ee)}return N}(Wh(m),function(w){return Hm.call(m,w)}))}:Ap;const kp=e_,Ic=function Op(m){return kf(m,To,kp)};var Of=Object.prototype.hasOwnProperty;const Ac=Oa(Bt,"DataView"),ah=Oa(Bt,"Promise"),Qc=Oa(Bt,"Set"),Rf=Oa(Bt,"WeakMap");var Xm="[object Map]",Jc="[object Promise]",i_="[object Set]",Lp="[object WeakMap]",Fp="[object DataView]",Xh=ms(Ac),Km=ms(Ai),lh=ms(ah),r_=ms(Qc),cs=ms(Rf),cl=Sl;(Ac&&cl(new Ac(new ArrayBuffer(1)))!=Fp||Ai&&cl(new Ai)!=Xm||ah&&cl(ah.resolve())!=Jc||Qc&&cl(new Qc)!=i_||Rf&&cl(new Rf)!=Lp)&&(cl=function(m){var w=Sl(m),a="[object Object]"==w?m.constructor:void 0,_=a?ms(a):"";if(_)switch(_){case Xh:return Fp;case Km:return Xm;case lh:return Jc;case r_:return i_;case cs:return Lp}return w});const xu=cl;var ch="[object Arguments]",uh="[object Array]",Np="[object Object]",Bp=Object.prototype.hasOwnProperty;const zp=function s_(m,w,a,_,C,N){var ee=P(m),ve=P(w),ct=ee?uh:xu(m),Dt=ve?uh:xu(w),dn=(ct=ct==ch?Np:ct)==Np,cn=(Dt=Dt==ch?Np:Dt)==Np,ci=ct==Dt;if(ci&&We(m)){if(!We(w))return!1;ee=!0,dn=!1}if(ci&&!dn)return N||(N=new yu),ee||$c(m)?Xu(m,w,a,_,C,N):function $a(m,w,a,_,C,N,ee){switch(a){case"[object DataView]":if(m.byteLength!=w.byteLength||m.byteOffset!=w.byteOffset)return!1;m=m.buffer,w=w.buffer;case"[object ArrayBuffer]":return!(m.byteLength!=w.byteLength||!N(new Ku(m),new Ku(w)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ol(+m,+w);case"[object Error]":return m.name==w.name&&m.message==w.message;case"[object RegExp]":case"[object String]":return m==w+"";case"[object Map]":var ve=Um;case"[object Set]":if(ve||(ve=pn),m.size!=w.size&&!(1&_))return!1;var Dt=ee.get(m);if(Dt)return Dt==w;_|=2,ee.set(m,w);var dn=Xu(ve(m),ve(w),_,C,N,ee);return ee.delete(m),dn;case"[object Symbol]":if(Ip)return Ip.call(m)==Ip.call(w)}return!1}(m,w,ct,a,_,C,N);if(!(1&a)){var Di=dn&&Bp.call(m,"__wrapped__"),pi=cn&&Bp.call(w,"__wrapped__");if(Di||pi){var wi=Di?m.value():m,ir=pi?w.value():w;return N||(N=new yu),C(wi,ir,a,_,N)}}return!!ci&&(N||(N=new yu),function Wm(m,w,a,_,C,N){var ee=1&a,ve=Ic(m),ct=ve.length;if(ct!=Ic(w).length&&!ee)return!1;for(var cn=ct;cn--;){var ci=ve[cn];if(!(ee?ci in w:Of.call(w,ci)))return!1}var Di=N.get(m),pi=N.get(w);if(Di&&pi)return Di==w&&pi==m;var wi=!0;N.set(m,w),N.set(w,m);for(var ir=ee;++cn<ct;){var Cr=m[ci=ve[cn]],co=w[ci];if(_)var ws=ee?_(co,Cr,ci,w,m,N):_(Cr,co,ci,m,w,N);if(!(void 0===ws?Cr===co||C(Cr,co,a,_,N):ws)){wi=!1;break}ir||(ir="constructor"==ci)}if(wi&&!ir){var So=m.constructor,sc=w.constructor;So!=sc&&"constructor"in m&&"constructor"in w&&!("function"==typeof So&&So instanceof So&&"function"==typeof sc&&sc instanceof sc)&&(wi=!1)}return N.delete(m),N.delete(w),wi}(m,w,a,_,C,N))},Vp=function wd(m,w,a,_,C){return m===w||(null==m||null==w||!$(m)&&!$(w)?m!=m&&w!=w:zp(m,w,a,_,wd,C))},hh=function Up(m){return m==m&&!_o(m)},c_=function l_(m,w){return function(a){return null!=a&&a[m]===w&&(void 0!==w||m in Object(a))}},nv=function wu(m){var w=function Zm(m){for(var w=To(m),a=w.length;a--;){var _=w[a],C=m[_];w[a]=[_,C,hh(C)]}return w}(m);return 1==w.length&&w[0][2]?c_(w[0][0],w[0][1]):function(a){return a===m||function dh(m,w,a,_){var C=a.length,N=C,ee=!_;if(null==m)return!N;for(m=Object(m);C--;){var ve=a[C];if(ee&&ve[2]?ve[1]!==m[ve[0]]:!(ve[0]in m))return!1}for(;++C<N;){var ct=(ve=a[C])[0],Dt=m[ct],dn=ve[1];if(ee&&ve[2]){if(void 0===Dt&&!(ct in m))return!1}else{var cn=new yu;if(_)var ci=_(Dt,dn,ct,m,w,cn);if(!(void 0===ci?Vp(dn,Dt,3,_,cn):ci))return!1}}return!0}(a,m,w)}},Yu=function Ff(m){return"symbol"==typeof m||$(m)&&"[object Symbol]"==Sl(m)};var Nf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qm=/^\w*$/;const jp=function u_(m,w){if(P(m))return!1;var a=typeof m;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=m&&!Yu(m))||qm.test(m)||!Nf.test(m)||null!=w&&m in Object(w)};function Bf(m,w){if("function"!=typeof m||null!=w&&"function"!=typeof w)throw new TypeError("Expected a function");var a=function(){var _=arguments,C=w?w.apply(this,_):_[0],N=a.cache;if(N.has(C))return N.get(C);var ee=m.apply(this,_);return a.cache=N.set(C,ee)||N,ee};return a.cache=new(Bf.Cache||Tp),a}Bf.Cache=Tp;const Ed=Bf;var Gp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kh=/\\(\\)?/g,Ym=function Vf(m){var w=Ed(m,function(_){return 500===a.size&&a.clear(),_}),a=w.cache;return w}(function(m){var w=[];return 46===m.charCodeAt(0)&&w.push(""),m.replace(Gp,function(a,_,C,N){w.push(C?N.replace(Kh,"$1"):_||a)}),w});const Eu=Ym;var Qm=Un?Un.prototype:void 0,$p=Qm?Qm.toString:void 0;const Jm=function Hp(m){if("string"==typeof m)return m;if(P(m))return function Zh(m,w){for(var a=-1,_=null==m?0:m.length,C=Array(_);++a<_;)C[a]=w(m[a],a,m);return C}(m,Hp)+"";if(Yu(m))return $p?$p.call(m):"";var w=m+"";return"0"==w&&1/m==-1/0?"-0":w},Xp=function qh(m,w){return P(m)?m:jp(m,w)?[m]:Eu(function Qs(m){return null==m?"":Jm(m)}(m))},Uf=function eg(m){if("string"==typeof m||Yu(m))return m;var w=m+"";return"0"==w&&1/m==-1/0?"-0":w},p_=function iv(m,w){for(var a=0,_=(w=Xp(w,m)).length;null!=m&&a<_;)m=m[Uf(w[a++])];return a&&a==_?m:void 0},jf=function m_(m,w){return null!=m&&w in Object(m)},ng=function tg(m,w){return null!=m&&function ov(m,w,a){for(var _=-1,C=(w=Xp(w,m)).length,N=!1;++_<C;){var ee=Uf(w[_]);if(!(N=null!=m&&a(m,ee)))break;m=m[ee]}return N||++_!=C?N:!!(C=null==m?0:m.length)&&_t(C)&&et(ee,C)&&(P(m)||M(m))}(m,w,jf)},t0=function av(m,w){return jp(m)&&hh(w)?c_(Uf(m),w):function(a){var _=function f_(m,w,a){var _=null==m?void 0:p_(m,w);return void 0===_?a:_}(a,m);return void 0===_&&_===w?ng(a,m):Vp(w,_,3)}},lv=function g_(m){return m},Yh=function Gf(m){return jp(m)?function ig(m){return function(w){return w?.[m]}}(Uf(m)):function eu(m){return function(w){return p_(w,m)}}(m)};var cv=Object.prototype.hasOwnProperty,y_=function $f(m,w){return function(a,_){var C=P(a)?Xd:Jl,N=w?w():{};return C(a,m,function __(m){return"function"==typeof m?m:null==m?lv:"object"==typeof m?P(m)?t0(m[0],m[1]):nv(m):Yh(m)}(_),N)}}(function(m,w,a){cv.call(m,a)?m[a].push(w):Gc(m,a,[w])});const Cu=y_;var uv=Object.prototype.hasOwnProperty;const Ha=function Qu(m,w,a){var _=m[w];(!uv.call(m,w)||!ol(_,a)||void 0===a&&!(w in m))&&Gc(m,w,a)},gh=function v_(m,w,a,_){var C=!a;a||(a={});for(var N=-1,ee=w.length;++N<ee;){var ve=w[N],ct=_?_(a[ve],m[ve],ve,a,m):void 0;void 0===ct&&(ct=m[ve]),C?Gc(a,ve,ct):Ha(a,ve,ct)}return a};var Xf=Object.prototype.hasOwnProperty;const hv=function rg(m){if(!_o(m))return function b_(m){var w=[];if(null!=m)for(var a in Object(m))w.push(a);return w}(m);var w=es(m),a=[];for(var _ in m)"constructor"==_&&(w||!Xf.call(m,_))||a.push(_);return a},Td=function Kf(m){return vp(m)?po(m,!0):hv(m)};var w_="object"==typeof exports&&exports&&!exports.nodeType&&exports,ul=w_&&"object"==typeof module&&module&&!module.nodeType&&module,qp=ul&&ul.exports===w_?Bt.Buffer:void 0,Qh=qp?qp.allocUnsafe:void 0;const qf=Ys(Object.getPrototypeOf,Object);var sg=Object.getOwnPropertySymbols?function(m){for(var w=[];m;)Fl(w,kp(m)),m=qf(m);return w}:Ap;const ag=sg,mv=function T_(m){return kf(m,Td,ag)};var Tu=Object.prototype.hasOwnProperty;const Jp=function Qp(m){var w=new m.constructor(m.byteLength);return new Ku(w).set(new Ku(m)),w};var dg=/\w*$/;var hg=Un?Un.prototype:void 0,pg=hg?hg.valueOf:void 0;const bg=function vg(m,w,a){var _=m.constructor;switch(w){case"[object ArrayBuffer]":return Jp(m);case"[object Boolean]":case"[object Date]":return new _(+m);case"[object DataView]":return function M_(m,w){var a=w?Jp(m.buffer):m.buffer;return new m.constructor(a,m.byteOffset,m.byteLength)}(m,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function fg(m,w){var a=w?Jp(m.buffer):m.buffer;return new m.constructor(a,m.byteOffset,m.length)}(m,a);case"[object Map]":case"[object Set]":return new _;case"[object Number]":case"[object String]":return new _(m);case"[object RegExp]":return function I_(m){var w=new m.constructor(m.source,dg.exec(m));return w.lastIndex=m.lastIndex,w}(m);case"[object Symbol]":return function Qf(m){return pg?Object(pg.call(m)):{}}(m)}};var im=Object.create,yh=function(){function m(){}return function(w){if(!_o(w))return{};if(im)return im(w);m.prototype=w;var a=new m;return m.prototype=void 0,a}}();const nf=yh;var fa=da&&da.isMap;const rm=fa?Br(fa):function nu(m){return $(m)&&"[object Map]"==xu(m)};var O_=da&&da.isSet;const R_=O_?Br(O_):function sf(m){return $(m)&&"[object Set]"==xu(m)};var tp="[object Arguments]",xg="[object Function]",Id="[object Object]",yo={};yo[tp]=yo["[object Array]"]=yo["[object ArrayBuffer]"]=yo["[object DataView]"]=yo["[object Boolean]"]=yo["[object Date]"]=yo["[object Float32Array]"]=yo["[object Float64Array]"]=yo["[object Int8Array]"]=yo["[object Int16Array]"]=yo["[object Int32Array]"]=yo["[object Map]"]=yo["[object Number]"]=yo[Id]=yo["[object RegExp]"]=yo["[object Set]"]=yo["[object String]"]=yo["[object Symbol]"]=yo["[object Uint8Array]"]=yo["[object Uint8ClampedArray]"]=yo["[object Uint16Array]"]=yo["[object Uint32Array]"]=!0,yo["[object Error]"]=yo[xg]=yo["[object WeakMap]"]=!1;const wh=function sp(m,w,a,_,C,N){var ee,ve=1&w,ct=2&w,Dt=4&w;if(a&&(ee=C?a(m,_,C,N):a(m)),void 0!==ee)return ee;if(!_o(m))return m;var dn=P(m);if(dn){if(ee=function cg(m){var w=m.length,a=new m.constructor(w);return w&&"string"==typeof m[0]&&Tu.call(m,"index")&&(a.index=m.index,a.input=m.input),a}(m),!ve)return function ks(m,w){var a=-1,_=m.length;for(w||(w=Array(_));++a<_;)w[a]=m[a];return w}(m,ee)}else{var cn=xu(m),ci=cn==xg||"[object GeneratorFunction]"==cn;if(We(m))return function kc(m,w){if(w)return m.slice();var a=m.length,_=Qh?Qh(a):new m.constructor(a);return m.copy(_),_}(m,ve);if(cn==Id||cn==tp||ci&&!C){if(ee=ct||ci?{}:function vh(m){return"function"!=typeof m.constructor||es(m)?{}:nf(qf(m))}(m),!ve)return ct?function Yf(m,w){return gh(m,ag(m),w)}(m,function og(m,w){return m&&gh(w,Td(w),m)}(ee,m)):function Yp(m,w){return gh(m,kp(m),w)}(m,function Kp(m,w){return m&&gh(w,To(w),m)}(ee,m))}else{if(!yo[cn])return C?m:{};ee=bg(m,cn,ve)}}N||(N=new yu);var Di=N.get(m);if(Di)return Di;N.set(m,ee),R_(m)?m.forEach(function(ir){ee.add(sp(ir,w,a,ir,m,N))}):rm(m)&&m.forEach(function(ir,Cr){ee.set(Cr,sp(ir,w,a,Cr,m,N))});var wi=dn?void 0:(Dt?ct?mv:Ic:ct?Td:To)(m);return function Kr(m,w){for(var a=-1,_=null==m?0:m.length;++a<_&&!1!==w(m[a],a,m););}(wi||m,function(ir,Cr){wi&&(ir=m[Cr=ir]),Ha(ee,Cr,sp(ir,w,a,Cr,m,N))}),ee};function Eh(m){return"object"==typeof m&&null!=m&&1===m.nodeType}function ap(m,w){return(!w||"hidden"!==m)&&"visible"!==m&&"clip"!==m}function Ch(m,w){if(m.clientHeight<m.scrollHeight||m.clientWidth<m.scrollWidth){var a=getComputedStyle(m,null);return ap(a.overflowY,w)||ap(a.overflowX,w)||!!(C=function(N){if(!N.ownerDocument||!N.ownerDocument.defaultView)return null;try{return N.ownerDocument.defaultView.frameElement}catch{return null}}(_=m))&&(C.clientHeight<_.scrollHeight||C.clientWidth<_.scrollWidth)}var _,C;return!1}function df(m,w,a,_,C,N,ee,ve){return N<m&&ee>w||N>m&&ee<w?0:N<=m&&ve<=a||ee>=w&&ve>=a?N-m-_:ee>w&&ve<a||N<m&&ve>a?ee-w+C:0}function Mu(m,w){var a=window,_=w.scrollMode,C=w.block,N=w.inline,ee=w.boundary,ve=w.skipOverflowHiddenElements,ct="function"==typeof ee?ee:function(Ud){return Ud!==ee};if(!Eh(m))throw new TypeError("Invalid target");for(var Dt=document.scrollingElement||document.documentElement,dn=[],cn=m;Eh(cn)&&ct(cn);){if((cn=cn.parentElement)===Dt){dn.push(cn);break}null!=cn&&cn===document.body&&Ch(cn)&&!Ch(document.documentElement)||null!=cn&&Ch(cn,ve)&&dn.push(cn)}for(var ci=a.visualViewport?a.visualViewport.width:innerWidth,Di=a.visualViewport?a.visualViewport.height:innerHeight,pi=window.scrollX||pageXOffset,wi=window.scrollY||pageYOffset,ir=m.getBoundingClientRect(),Cr=ir.height,co=ir.width,ws=ir.top,So=ir.right,sc=ir.bottom,ac=ir.left,jo="start"===C||"nearest"===C?ws:"end"===C?sc:ws+Cr/2,ts="center"===N?ac+co/2:"end"===N?So:ac,ga=[],Fc=0;Fc<dn.length;Fc++){var qr=dn[Fc],_a=qr.getBoundingClientRect(),zd=_a.height,pl=_a.width,Au=_a.top,Oi=_a.right,Vi=_a.bottom,Zi=_a.left;if("if-needed"===_&&ws>=0&&ac>=0&&sc<=Di&&So<=ci&&ws>=Au&&sc<=Vi&&ac>=Zi&&So<=Oi)return ga;var $r=getComputedStyle(qr),Es=parseInt($r.borderLeftWidth,10),lc=parseInt($r.borderTopWidth,10),Ka=parseInt($r.borderRightWidth,10),mo=parseInt($r.borderBottomWidth,10),xo=0,Vd=0,ns="offsetWidth"in qr?qr.offsetWidth-qr.clientWidth-Es-Ka:0,us="offsetHeight"in qr?qr.offsetHeight-qr.clientHeight-lc-mo:0;if(Dt===qr)xo="start"===C?jo:"end"===C?jo-Di:"nearest"===C?df(wi,wi+Di,Di,lc,mo,wi+jo,wi+jo+Cr,Cr):jo-Di/2,Vd="start"===N?ts:"center"===N?ts-ci/2:"end"===N?ts-ci:df(pi,pi+ci,ci,Es,Ka,pi+ts,pi+ts+co,co),xo=Math.max(0,xo+wi),Vd=Math.max(0,Vd+pi);else{xo="start"===C?jo-Au-lc:"end"===C?jo-Vi+mo+us:"nearest"===C?df(Au,Vi,zd,lc,mo+us,jo,jo+Cr,Cr):jo-(Au+zd/2)+us/2,Vd="start"===N?ts-Zi-Es:"center"===N?ts-(Zi+pl/2)+ns/2:"end"===N?ts-Oi+Ka+ns:df(Zi,Oi,pl,Es,Ka+ns,ts,ts+co,co);var cc=qr.scrollLeft,Za=qr.scrollTop;jo+=Za-(xo=Math.max(0,Math.min(Za+xo,qr.scrollHeight-zd+us))),ts+=cc-(Vd=Math.max(0,Math.min(cc+Vd,qr.scrollWidth-pl+ns)))}ga.push({el:qr,top:xo,left:Vd})}return ga}function pm(m){return m===Object(m)&&0!==Object.keys(m).length}let rc=(()=>{class m{constructor(){this.resize$=new _e.B}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();var _s=H(9417),Cv=H(8235),Od=H(8834),Do=H(4085),zl=H(6860),Zr=H(6600),Th=H(2318);let fm=(()=>{class m{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(a){this._vertical=(0,Do.he)(a)}get inset(){return this._inset}set inset(a){this._inset=(0,Do.he)(a)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(_,C){2&_&&(l.BMQ("aria-orientation",C.vertical?"vertical":"horizontal"),l.AVh("mat-divider-vertical",C.vertical)("mat-divider-horizontal",!C.vertical)("mat-divider-inset",C.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[l.aNF],decls:0,vars:0,template:function(_,C){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return m})(),Tv=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,Zr.yE]})}return m})();var Su=H(7645),hf=H(5024),Vl=H(7336);const Dh=["*"],ys='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color);border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected::before,.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected:focus::before,.cdk-high-contrast-active .mdc-list-item:not(.mdc-list-item--selected):focus::before{border-color:CanvasText}.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item.mdc-list-item--selected::before{border-width:3px;border-style:double}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color);font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color);font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color);opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color);opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}',dl=["unscopedContent"],Ju=["text"],iu=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],ed=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],Rd=new l.nKC("ListOption");let Mh=(()=>{class m{constructor(a){this._elementRef=a}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}return m})(),ff=(()=>{class m{constructor(a){this._elementRef=a}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}return m})(),Oc=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}return m})(),_m=(()=>{class m{constructor(a){this._listOption=a}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(Rd,8))};static#t=this.\u0275dir=l.FsC({type:m,hostVars:4,hostBindings:function(_,C){2&_&&l.AVh("mdc-list-item__start",C._isAlignedAtStart())("mdc-list-item__end",!C._isAlignedAtStart())},standalone:!0})}return m})(),nd=(()=>{class m extends _m{static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[l.Vt3]})}return m})(),Rc=(()=>{class m extends _m{static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[l.Vt3]})}return m})();const Sh=new l.nKC("MAT_LIST_CONFIG");let Iu=(()=>{class m{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=(0,l.WQX)(Sh,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(a){this._disableRipple=(0,Do.he)(a)}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Do.he)(a)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275dir=l.FsC({type:m,hostVars:1,hostBindings:function(_,C){2&_&&l.BMQ("aria-disabled",C.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}return m})(),mf=(()=>{class m{set lines(a){this._explicitLines=(0,Do.OE)(a,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(a){this._disableRipple=(0,Do.he)(a)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(a){this._disabled=(0,Do.he)(a)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(a,_,C,N,ee,ve){this._elementRef=a,this._ngZone=_,this._listBase=C,this._platform=N,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Ei.yU,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=ee||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===ve,C&&!C._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Zr.ug(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add((0,vc.h)(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(a){if(!this._lines||!this._titles||!this._unscopedContent)return;a&&this._checkDomForUnscopedTextContent();const _=this._explicitLines??this._inferLinesFromContent(),C=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",_<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",_<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===_),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===_),this._hasUnscopedTextContent){const N=0===this._titles.length&&1===_;C.classList.toggle("mdc-list-item__primary-text",N),C.classList.toggle("mdc-list-item__secondary-text",!N)}else C.classList.remove("mdc-list-item__primary-text"),C.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let a=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(a+=1),a}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(a=>a.nodeType!==a.COMMENT_NODE).some(a=>!(!a.textContent||!a.textContent.trim()))}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(l.SKi),l.rXU(Iu,8),l.rXU(zl.OD),l.rXU(Zr.$E,8),l.rXU(l.bc$,8))};static#t=this.\u0275dir=l.FsC({type:m,contentQueries:function(_,C,N){if(1&_&&(l.wni(N,nd,4),l.wni(N,Rc,4)),2&_){let ee;l.mGM(ee=l.lsd())&&(C._avatars=ee),l.mGM(ee=l.lsd())&&(C._icons=ee)}},hostVars:4,hostBindings:function(_,C){2&_&&(l.BMQ("aria-disabled",C.disabled)("disabled",C._isButtonElement&&C.disabled||null),l.AVh("mdc-list-item--disabled",C.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}return m})(),W_=(()=>{class m extends Iu{static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],standalone:!0,features:[l.Jv_([{provide:Iu,useExisting:m}]),l.Vt3,l.aNF],ngContentSelectors:Dh,decls:1,vars:0,template:function(_,C){1&_&&(l.NAR(),l.SdG(0))},styles:[ys],encapsulation:2,changeDetection:0})}return m})(),Mg=(()=>{class m extends mf{get activated(){return this._activated}set activated(a){this._activated=(0,Do.he)(a)}constructor(a,_,C,N,ee,ve){super(a,_,C,N,ee,ve),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return 0!==this._meta.length&&(0!==this._avatars.length||0!==this._icons.length)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(l.SKi),l.rXU(Iu,8),l.rXU(zl.OD),l.rXU(Zr.$E,8),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(_,C,N){if(1&_&&(l.wni(N,ff,5),l.wni(N,Mh,5),l.wni(N,Oc,5)),2&_){let ee;l.mGM(ee=l.lsd())&&(C._lines=ee),l.mGM(ee=l.lsd())&&(C._titles=ee),l.mGM(ee=l.lsd())&&(C._meta=ee)}},viewQuery:function(_,C){if(1&_&&(l.GBs(dl,5),l.GBs(Ju,5)),2&_){let N;l.mGM(N=l.lsd())&&(C._unscopedContent=N.first),l.mGM(N=l.lsd())&&(C._itemText=N.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(_,C){2&_&&(l.BMQ("aria-current",C._getAriaCurrent()),l.AVh("mdc-list-item--activated",C.activated)("mdc-list-item--with-leading-avatar",0!==C._avatars.length)("mdc-list-item--with-leading-icon",0!==C._icons.length)("mdc-list-item--with-trailing-meta",0!==C._meta.length)("mat-mdc-list-item-both-leading-and-trailing",C._hasBothLeadingAndTrailing())("_mat-animation-noopable",C._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[l.Vt3,l.aNF],ngContentSelectors:ed,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(_,C){if(1&_){const N=l.RV6();l.NAR(iu),l.SdG(0),l.j41(1,"span",1),l.SdG(2,1),l.SdG(3,2),l.j41(4,"span",2,0),l.bIt("cdkObserveContent",function(){return l.eBV(N),l.Njj(C._updateItemLines(!0))}),l.SdG(6,3),l.k0s()(),l.SdG(7,4),l.SdG(8,5),l.nrm(9,"div",3)}},dependencies:[Th.Wv],encapsulation:2,changeDetection:0})}return m})(),Ih=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"],standalone:!0})}return m})(),K_=(()=>{class m extends Iu{constructor(){super(...arguments),this._isNonInteractive=!1}static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],standalone:!0,features:[l.Jv_([{provide:Iu,useExisting:m}]),l.Vt3,l.aNF],ngContentSelectors:Dh,decls:1,vars:0,template:function(_,C){1&_&&(l.NAR(),l.SdG(0))},styles:[ys],encapsulation:2,changeDetection:0})}return m})(),c=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Th.w5,lr.MD,Zr.yE,Zr.pZ,Zr.O5,Tv]})}return m})();var p=H(983);const y=(0,zl.BQ)({passive:!0});let b=(()=>{class m{constructor(a,_){this._platform=a,this._ngZone=_,this._monitoredElements=new Map}monitor(a){if(!this._platform.isBrowser)return p.w;const _=(0,Do.i8)(a),C=this._monitoredElements.get(_);if(C)return C.subject;const N=new _e.B,ee="cdk-text-field-autofilled",ve=ct=>{"cdk-text-field-autofill-start"!==ct.animationName||_.classList.contains(ee)?"cdk-text-field-autofill-end"===ct.animationName&&_.classList.contains(ee)&&(_.classList.remove(ee),this._ngZone.run(()=>N.next({target:ct.target,isAutofilled:!1}))):(_.classList.add(ee),this._ngZone.run(()=>N.next({target:ct.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{_.addEventListener("animationstart",ve,y),_.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(_,{subject:N,unlisten:()=>{_.removeEventListener("animationstart",ve,y)}}),N}stopMonitoring(a){const _=(0,Do.i8)(a),C=this._monitoredElements.get(_);C&&(C.unlisten(),C.subject.complete(),_.classList.remove("cdk-text-field-autofill-monitored"),_.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(_))}ngOnDestroy(){this._monitoredElements.forEach((a,_)=>this.stopMonitoring(_))}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(zl.OD),l.KVO(l.SKi))};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),A=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({})}return m})();var F=H(2102);const W=new l.nKC("MAT_INPUT_VALUE_ACCESSOR"),J=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let le=0,fe=(()=>{class m{get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Do.he)(a),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(a){this._id=a||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(_s.k0.required)??!1}set required(a){this._required=(0,Do.he)(a)}get type(){return this._type}set type(a){this._type=a||"text",this._validateType(),!this._isTextarea&&(0,zl.MU)().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(a){this._errorStateTracker.matcher=a}get value(){return this._inputValueAccessor.value}set value(a){a!==this.value&&(this._inputValueAccessor.value=a,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(a){this._readonly=(0,Do.he)(a)}get errorState(){return this._errorStateTracker.errorState}set errorState(a){this._errorStateTracker.errorState=a}constructor(a,_,C,N,ee,ve,ct,Dt,dn,cn){this._elementRef=a,this._platform=_,this.ngControl=C,this._autofillMonitor=Dt,this._ngZone=dn,this._formField=cn,this._uid="mat-input-"+le++,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new _e.B,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(pi=>(0,zl.MU)().has(pi)),this._iOSKeyupListener=pi=>{const wi=pi.target;!wi.value&&0===wi.selectionStart&&0===wi.selectionEnd&&(wi.setSelectionRange(1,1),wi.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};const ci=this._elementRef.nativeElement,Di=ci.nodeName.toLowerCase();this._inputValueAccessor=ct||ci,this._previousNativeValue=this.value,this.id=this.id,_.IOS&&dn.runOutsideAngular(()=>{a.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Zr.X0(ve,C,ee,N,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Di,this._isTextarea="textarea"===Di,this._isInFormField=!!cn,this._isNativeSelect&&(this.controlType=ci.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(a=>{this.autofilled=a.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(a){this._elementRef.nativeElement.focus(a)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(a){a!==this.focused&&(this.focused=a,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const a=this._elementRef.nativeElement.value;this._previousNativeValue!==a&&(this._previousNativeValue=a,this.stateChanges.next())}_dirtyCheckPlaceholder(){const a=this._getPlaceholder();if(a!==this._previousPlaceholder){const _=this._elementRef.nativeElement;this._previousPlaceholder=a,a?_.setAttribute("placeholder",a):_.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){J.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let a=this._elementRef.nativeElement.validity;return a&&a.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const a=this._elementRef.nativeElement,_=a.options[0];return this.focused||a.multiple||!this.empty||!!(a.selectedIndex>-1&&_&&_.label)}return this.focused||!this.empty}setDescribedByIds(a){a.length?this._elementRef.nativeElement.setAttribute("aria-describedby",a.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const a=this._elementRef.nativeElement;return this._isNativeSelect&&(a.multiple||a.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&"number"===this._type&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&"number"!==this._type&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(zl.OD),l.rXU(_s.vO,10),l.rXU(_s.cV,8),l.rXU(_s.j4,8),l.rXU(Zr.es),l.rXU(W,10),l.rXU(b),l.rXU(l.SKi),l.rXU(F.xb,8))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(_,C){1&_&&l.bIt("focus",function(){return C._focusChanged(!0)})("blur",function(){return C._focusChanged(!1)})("input",function(){return C._onInput()}),2&_&&(l.Mr5("id",C.id)("disabled",C.disabled)("required",C.required),l.BMQ("name",C.name||null)("readonly",C.readonly&&!C._isNativeSelect||null)("aria-invalid",C.empty&&C.required?null:C.errorState)("aria-required",C.required)("id",C.id),l.AVh("mat-input-server",C._isServer)("mat-mdc-form-field-textarea-control",C._isInFormField&&C._isTextarea)("mat-mdc-form-field-input-control",C._isInFormField)("mdc-text-field__input",C._isInFormField)("mat-mdc-native-select-inline",C._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[l.Jv_([{provide:F.qT,useExisting:m}]),l.OA$]})}return m})(),Re=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,F.RG,F.RG,A,Zr.yE]})}return m})();var ze=H(3980),it=H(8203),Qe=H(6354),pt=H(3294);const yt=["*"],Et=["content"],Ht=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Kt=["mat-drawer","mat-drawer-content","*"];function fn(m,w){if(1&m){const a=l.RV6();l.j41(0,"div",1),l.bIt("click",function(){l.eBV(a);const C=l.XpG();return l.Njj(C._onBackdropClicked())}),l.k0s()}if(2&m){const a=l.XpG();l.AVh("mat-drawer-shown",a._isShowingBackdrop())}}function Mn(m,w){1&m&&(l.j41(0,"mat-drawer-content"),l.SdG(1,2),l.k0s())}const Pt=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Jt=["mat-sidenav","mat-sidenav-content","*"];function Ln(m,w){if(1&m){const a=l.RV6();l.j41(0,"div",1),l.bIt("click",function(){l.eBV(a);const C=l.XpG();return l.Njj(C._onBackdropClicked())}),l.k0s()}if(2&m){const a=l.XpG();l.AVh("mat-drawer-shown",a._isShowingBackdrop())}}function Bn(m,w){1&m&&(l.j41(0,"mat-sidenav-content"),l.SdG(1,2),l.k0s())}const In={transformDrawer:(0,Te.hZ)("transform",[(0,Te.wk)("open, open-instant",(0,Te.iF)({transform:"none",visibility:"visible"})),(0,Te.wk)("void",(0,Te.iF)({"box-shadow":"none",visibility:"hidden"})),(0,Te.kY)("void => open-instant",(0,Te.i0)("0ms")),(0,Te.kY)("void <=> open, open-instant => void",(0,Te.i0)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Qi=new l.nKC("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Ii(){return!1}}),nr=new l.nKC("MAT_DRAWER_CONTAINER");let ti=(()=>{class m extends ze.uv{constructor(a,_,C,N,ee){super(C,N,ee),this._changeDetectorRef=a,this._container=_}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.gRc),l.rXU((0,l.Rfq)(()=>Ji)),l.rXU(l.aKT),l.rXU(ze.R),l.rXU(l.SKi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(_,C){2&_&&l.xc7("margin-left",C._container._contentMargins.left,"px")("margin-right",C._container._contentMargins.right,"px")},standalone:!0,features:[l.Jv_([{provide:ze.uv,useExisting:m}]),l.Vt3,l.aNF],ngContentSelectors:yt,decls:1,vars:0,template:function(_,C){1&_&&(l.NAR(),l.SdG(0))},encapsulation:2,changeDetection:0})}return m})(),hr=(()=>{class m{get position(){return this._position}set position(a){(a="end"===a?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(a),this._position=a,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(a){this._mode=a,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(a){this._disableClose=(0,Do.he)(a)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(a){("true"===a||"false"===a||null==a)&&(a=(0,Do.he)(a)),this._autoFocus=a}get opened(){return this._opened}set opened(a){this.toggle((0,Do.he)(a))}constructor(a,_,C,N,ee,ve,ct,Dt){this._elementRef=a,this._focusTrapFactory=_,this._focusMonitor=C,this._platform=N,this._ngZone=ee,this._interactivityChecker=ve,this._doc=ct,this._container=Dt,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new _e.B,this._animationEnd=new _e.B,this._animationState="void",this.openedChange=new l.bkB(!0),this._openedStream=this.openedChange.pipe((0,ss.p)(dn=>dn),(0,Qe.T)(()=>{})),this.openedStart=this._animationStarted.pipe((0,ss.p)(dn=>dn.fromState!==dn.toState&&0===dn.toState.indexOf("open")),(0,Tl.u)(void 0)),this._closedStream=this.openedChange.pipe((0,ss.p)(dn=>!dn),(0,Qe.T)(()=>{})),this.closedStart=this._animationStarted.pipe((0,ss.p)(dn=>dn.fromState!==dn.toState&&"void"===dn.toState),(0,Tl.u)(void 0)),this._destroyed=new _e.B,this.onPositionChanged=new l.bkB,this._modeChanged=new _e.B,this._injector=(0,l.WQX)(l.zZn),this._changeDetectorRef=(0,l.WQX)(l.gRc),this.openedChange.pipe((0,ro.Q)(this._destroyed)).subscribe(dn=>{dn?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,qs.R)(this._elementRef.nativeElement,"keydown").pipe((0,ss.p)(dn=>dn.keyCode===Vl._f&&!this.disableClose&&!(0,Vl.rp)(dn)),(0,ro.Q)(this._destroyed)).subscribe(dn=>this._ngZone.run(()=>{this.close(),dn.stopPropagation(),dn.preventDefault()}))}),this._animationEnd.pipe((0,pt.F)((dn,cn)=>dn.fromState===cn.fromState&&dn.toState===cn.toState)).subscribe(dn=>{const{fromState:cn,toState:ci}=dn;(0===ci.indexOf("open")&&"void"===cn||"void"===ci&&0===cn.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(a,_){this._interactivityChecker.isFocusable(a)||(a.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const C=()=>{a.removeEventListener("blur",C),a.removeEventListener("mousedown",C),a.removeAttribute("tabindex")};a.addEventListener("blur",C),a.addEventListener("mousedown",C)})),a.focus(_)}_focusByCssSelector(a,_){let C=this._elementRef.nativeElement.querySelector(a);C&&this._forceFocus(C,_)}_takeFocus(){if(!this._focusTrap)return;const a=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":(0,l.mal)(()=>{!this._focusTrap.focusInitialElement()&&"function"==typeof a.focus&&a.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(a){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,a):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const a=this._doc.activeElement;return!!a&&this._elementRef.nativeElement.contains(a)}ngAfterViewInit(){this._isAttached=!0,"end"===this._position&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(a){return this.toggle(!0,a)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(a=!this.opened,_){a&&_&&(this._openedVia=_);const C=this._setOpen(a,!a&&this._isFocusWithinDrawer(),this._openedVia||"program");return a||(this._openedVia=null),C}_setOpen(a,_,C){return this._opened=a,a?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",_&&this._restoreFocus(C)),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(N=>{this.openedChange.pipe((0,_c.s)(1)).subscribe(ee=>N(ee?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(a){if(!this._platform.isBrowser)return;const _=this._elementRef.nativeElement,C=_.parentNode;"end"===a?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),C.insertBefore(this._anchor,_)),C.appendChild(_)):this._anchor&&this._anchor.parentNode.insertBefore(_,this._anchor)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(Su.GX),l.rXU(Su.FN),l.rXU(zl.OD),l.rXU(l.SKi),l.rXU(Su.Z7),l.rXU(lr.qQ,8),l.rXU(nr,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-drawer"]],viewQuery:function(_,C){if(1&_&&l.GBs(Et,5),2&_){let N;l.mGM(N=l.lsd())&&(C._content=N.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(_,C){1&_&&l.Kam("@transform.start",function(ee){return C._animationStarted.next(ee)})("@transform.done",function(ee){return C._animationEnd.next(ee)}),2&_&&(l.zvX("@transform",C._animationState),l.BMQ("align",null),l.AVh("mat-drawer-end","end"===C.position)("mat-drawer-over","over"===C.mode)("mat-drawer-push","push"===C.mode)("mat-drawer-side","side"===C.mode)("mat-drawer-opened",C.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[l.aNF],ngContentSelectors:yt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(_,C){1&_&&(l.NAR(),l.j41(0,"div",1,0),l.SdG(2),l.k0s())},dependencies:[ze.uv],encapsulation:2,data:{animation:[In.transformDrawer]},changeDetection:0})}return m})(),Ji=(()=>{class m{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(a){this._autosize=(0,Do.he)(a)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(a){this._backdropOverride=null==a?null:(0,Do.he)(a)}get scrollable(){return this._userContent||this._content}constructor(a,_,C,N,ee,ve=!1,ct){this._dir=a,this._element=_,this._ngZone=C,this._changeDetectorRef=N,this._animationMode=ct,this._drawers=new l.rOR,this.backdropClick=new l.bkB,this._destroyed=new _e.B,this._doCheckSubject=new _e.B,this._contentMargins={left:null,right:null},this._contentMarginChanges=new _e.B,this._injector=(0,l.WQX)(l.zZn),a&&a.change.pipe((0,ro.Q)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ee.change().pipe((0,ro.Q)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=ve}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Dl.Z)(this._allDrawers),(0,ro.Q)(this._destroyed)).subscribe(a=>{this._drawers.reset(a.filter(_=>!_._container||_._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Dl.Z)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(a=>{this._watchDrawerToggle(a),this._watchDrawerPosition(a),this._watchDrawerMode(a)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Da.B)(10),(0,ro.Q)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(a=>a.open())}close(){this._drawers.forEach(a=>a.close())}updateContentMargins(){let a=0,_=0;if(this._left&&this._left.opened)if("side"==this._left.mode)a+=this._left._getWidth();else if("push"==this._left.mode){const C=this._left._getWidth();a+=C,_-=C}if(this._right&&this._right.opened)if("side"==this._right.mode)_+=this._right._getWidth();else if("push"==this._right.mode){const C=this._right._getWidth();_+=C,a-=C}a=a||null,_=_||null,(a!==this._contentMargins.left||_!==this._contentMargins.right)&&(this._contentMargins={left:a,right:_},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(a){a._animationStarted.pipe((0,ss.p)(_=>_.fromState!==_.toState),(0,ro.Q)(this._drawers.changes)).subscribe(_=>{"open-instant"!==_.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==a.mode&&a.openedChange.pipe((0,ro.Q)(this._drawers.changes)).subscribe(()=>this._setContainerClass(a.opened))}_watchDrawerPosition(a){a&&a.onPositionChanged.pipe((0,ro.Q)(this._drawers.changes)).subscribe(()=>{(0,l.mal)(()=>{this._validateDrawers()},{injector:this._injector,phase:l.wjH.Read})})}_watchDrawerMode(a){a&&a._modeChanged.pipe((0,ro.Q)((0,vc.h)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(a){const _=this._element.nativeElement.classList,C="mat-drawer-container-has-open";a?_.add(C):_.remove(C)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(a=>{"end"==a.position?this._end=a:this._start=a}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(a=>a&&!a.disableClose&&this._drawerHasBackdrop(a)).forEach(a=>a._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(a){return null!=a&&a.opened}_drawerHasBackdrop(a){return null==this._backdropOverride?!!a&&"side"!==a.mode:this._backdropOverride}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(it.dS,8),l.rXU(l.aKT),l.rXU(l.SKi),l.rXU(l.gRc),l.rXU(ze.Xj),l.rXU(Qi),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-drawer-container"]],contentQueries:function(_,C,N){if(1&_&&(l.wni(N,ti,5),l.wni(N,hr,5)),2&_){let ee;l.mGM(ee=l.lsd())&&(C._content=ee.first),l.mGM(ee=l.lsd())&&(C._allDrawers=ee)}},viewQuery:function(_,C){if(1&_&&l.GBs(ti,5),2&_){let N;l.mGM(N=l.lsd())&&(C._userContent=N.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(_,C){2&_&&l.AVh("mat-drawer-container-explicit-backdrop",C._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[l.Jv_([{provide:nr,useExisting:m}]),l.aNF],ngContentSelectors:Kt,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(_,C){1&_&&(l.NAR(Ht),l.DNE(0,fn,1,2,"div",0),l.SdG(1),l.SdG(2,1),l.DNE(3,Mn,2,0,"mat-drawer-content")),2&_&&(l.vxM(C.hasBackdrop?0:-1),l.R7$(3),l.vxM(C._content?-1:3))},dependencies:[ti],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return m})(),vi=(()=>{class m extends ti{constructor(a,_,C,N,ee){super(a,_,C,N,ee)}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.gRc),l.rXU((0,l.Rfq)(()=>Bo)),l.rXU(l.aKT),l.rXU(ze.R),l.rXU(l.SKi))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(_,C){2&_&&l.xc7("margin-left",C._container._contentMargins.left,"px")("margin-right",C._container._contentMargins.right,"px")},standalone:!0,features:[l.Jv_([{provide:ze.uv,useExisting:m}]),l.Vt3,l.aNF],ngContentSelectors:yt,decls:1,vars:0,template:function(_,C){1&_&&(l.NAR(),l.SdG(0))},encapsulation:2,changeDetection:0})}return m})(),Po=(()=>{class m extends hr{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(a){this._fixedInViewport=(0,Do.he)(a)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(a){this._fixedTopGap=(0,Do.OE)(a)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(a){this._fixedBottomGap=(0,Do.OE)(a)}static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(_,C){2&_&&(l.BMQ("align",null),l.xc7("top",C.fixedInViewport?C.fixedTopGap:null,"px")("bottom",C.fixedInViewport?C.fixedBottomGap:null,"px"),l.AVh("mat-drawer-end","end"===C.position)("mat-drawer-over","over"===C.mode)("mat-drawer-push","push"===C.mode)("mat-drawer-side","side"===C.mode)("mat-drawer-opened",C.opened)("mat-sidenav-fixed",C.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[l.Vt3,l.aNF],ngContentSelectors:yt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(_,C){1&_&&(l.NAR(),l.j41(0,"div",1,0),l.SdG(2),l.k0s())},dependencies:[ze.uv],encapsulation:2,data:{animation:[In.transformDrawer]},changeDetection:0})}return m})(),Bo=(()=>{class m extends Ji{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static#e=this.\u0275fac=(()=>{let a;return function(C){return(a||(a=l.xGo(m)))(C||m)}})();static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-sidenav-container"]],contentQueries:function(_,C,N){if(1&_&&(l.wni(N,vi,5),l.wni(N,Po,5)),2&_){let ee;l.mGM(ee=l.lsd())&&(C._content=ee.first),l.mGM(ee=l.lsd())&&(C._allDrawers=ee)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(_,C){2&_&&l.AVh("mat-drawer-container-explicit-backdrop",C._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[l.Jv_([{provide:nr,useExisting:m}]),l.Vt3,l.aNF],ngContentSelectors:Jt,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(_,C){1&_&&(l.NAR(Pt),l.DNE(0,Ln,1,2,"div",0),l.SdG(1),l.SdG(2,1),l.DNE(3,Bn,2,0,"mat-sidenav-content")),2&_&&(l.vxM(C.hasBackdrop?0:-1),l.R7$(3),l.vxM(C._content?-1:3))},dependencies:[vi],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return m})(),Wo=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,ze.Gj,ze.Gj,Zr.yE]})}return m})();const gr=["switch"],Sr=["*"];function fo(m,w){1&m&&(l.j41(0,"div",10),l.qSk(),l.j41(1,"svg",12),l.nrm(2,"path",13),l.k0s(),l.j41(3,"svg",14),l.nrm(4,"path",15),l.k0s()())}const lo=new l.nKC("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),to={provide:_s.kq,useExisting:(0,l.Rfq)(()=>vs),multi:!0};class vo{constructor(w,a){this.source=w,this.checked=a}}let zo=0,vs=(()=>{class m{_createChangeEvent(a){return new vo(this,a)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(a){this._checked=a,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(a,_,C,N,ee,ve){this._elementRef=a,this._focusMonitor=_,this._changeDetectorRef=C,this.defaults=ee,this._onChange=ct=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new l.bkB,this.toggleChange=new l.bkB,this.tabIndex=parseInt(N)||0,this.color=ee.color||"accent",this._noopAnimations="NoopAnimations"===ve,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++zo,this.hideIcon=ee.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{"keyboard"===a||"program"===a?(this._focused=!0,this._changeDetectorRef.markForCheck()):a||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(a){a.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(a){this.checked=!!a}registerOnChange(a){this._onChange=a}registerOnTouched(a){this._onTouched=a}validate(a){return this.required&&!0!==a.value?{required:!0}:null}registerOnValidatorChange(a){this._validatorOnChange=a}setDisabledState(a){this.disabled=a,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new vo(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(Su.FN),l.rXU(l.gRc),l.kS0("tabindex"),l.rXU(lo),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-slide-toggle"]],viewQuery:function(_,C){if(1&_&&l.GBs(gr,5),2&_){let N;l.mGM(N=l.lsd())&&(C._switchElement=N.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(_,C){2&_&&(l.Mr5("id",C.id),l.BMQ("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),l.HbH(C.color?"mat-"+C.color:""),l.AVh("mat-mdc-slide-toggle-focused",C._focused)("mat-mdc-slide-toggle-checked",C.checked)("_mat-animation-noopable",C._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",l.L39],color:"color",disabled:[2,"disabled","disabled",l.L39],disableRipple:[2,"disableRipple","disableRipple",l.L39],tabIndex:[2,"tabIndex","tabIndex",a=>null==a?0:(0,l.Udg)(a)],checked:[2,"checked","checked",l.L39],hideIcon:[2,"hideIcon","hideIcon",l.L39]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[l.Jv_([to,{provide:_s.cz,useExisting:m,multi:!0}]),l.GFd,l.OA$,l.aNF],ngContentSelectors:Sr,decls:13,vars:24,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(_,C){if(1&_){const N=l.RV6();l.NAR(),l.j41(0,"div",1)(1,"button",2,0),l.bIt("click",function(){return l.eBV(N),l.Njj(C._handleClick())}),l.nrm(3,"div",3),l.j41(4,"div",4)(5,"div",5)(6,"div",6),l.nrm(7,"div",7),l.k0s(),l.j41(8,"div",8),l.nrm(9,"div",9),l.k0s(),l.DNE(10,fo,5,0,"div",10),l.k0s()()(),l.j41(11,"label",11),l.bIt("click",function(ve){return l.eBV(N),l.Njj(ve.stopPropagation())}),l.SdG(12),l.k0s()()}if(2&_){const N=l.sdS(2);l.Y8G("labelPosition",C.labelPosition),l.R7$(),l.AVh("mdc-switch--selected",C.checked)("mdc-switch--unselected",!C.checked)("mdc-switch--checked",C.checked)("mdc-switch--disabled",C.disabled),l.Y8G("tabIndex",C.disabled?-1:C.tabIndex)("disabled",C.disabled),l.BMQ("id",C.buttonId)("name",C.name)("aria-label",C.ariaLabel)("aria-labelledby",C._getAriaLabelledBy())("aria-describedby",C.ariaDescribedby)("aria-required",C.required||null)("aria-checked",C.checked),l.R7$(8),l.Y8G("matRippleTrigger",N)("matRippleDisabled",C.disableRipple||C.disabled)("matRippleCentered",!0),l.R7$(),l.vxM(C.hideIcon?-1:10),l.R7$(),l.Y8G("for",C.buttonId),l.BMQ("id",C._labelId)}},dependencies:[Zr.r6,Zr.tO],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color)}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color)}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color)}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape)}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch--selected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--unselected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch:disabled .mdc-switch__ripple::after{display:none}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color);opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity);transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color);opacity:var(--mdc-switch-selected-pressed-state-layer-opacity);transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color)}.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color);font-family:var(--mat-switch-label-text-font);line-height:var(--mat-switch-label-text-line-height);font-size:var(--mat-switch-label-text-size);letter-spacing:var(--mat-switch-label-text-tracking);font-weight:var(--mat-switch-label-text-weight)}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return m})(),ea=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[vs,Zr.yE,Zr.yE]})}return m})();const Wr=["exampleLink"],Uo=m=>({_routerLinkActiveWakeUpHack_:m});function ma(m,w){if(1&m){const a=l.RV6();l.j41(0,"button",12),l.bIt("click",function(){l.eBV(a);const C=l.XpG();return l.Njj(C.clearSearch())}),l.j41(1,"mat-icon"),l.EFF(2,"close"),l.k0s()()}}function Mo(m,w){if(1&m&&(l.j41(0,"a",15,1),l.EFF(2),l.k0s()),2&m){const a=l.XpG().$implicit,_=l.XpG(2);l.Y8G("routerLink","/demo/"+(_.isEditMode?"/edit/":"")+a.path)("routerLinkActiveOptions",l.eq3(3,Uo,_.isEditMode)),l.R7$(2),l.SpI(" ",a.data.label," ")}}function bo(m,w){if(1&m&&(l.qex(0),l.DNE(1,Mo,3,5,"a",14),l.bVm()),2&m){const a=w.$implicit;l.R7$(),l.Y8G("ngIf",a)}}function js(m,w){if(1&m&&(l.qex(0),l.j41(1,"h3",13),l.EFF(2),l.k0s(),l.DNE(3,bo,2,1,"ng-container",10),l.nrm(4,"mat-divider"),l.bVm()),2&m){const a=w.$implicit,_=l.XpG();l.R7$(2),l.JRh(a),l.R7$(),l.Y8G("ngForOf",_.routes[a])}}let Os=(()=>{class m{constructor(a,_,C,N){this.zone=a,this.router=_,this.activatedRoute=C,this.mapResizeService=N,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild?.params.demoUrl,this.originalRoutes=Cu(Px[0].children,ee=>ee.data?ee.data.cat:null),this.categories=Object.values(Ar)}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(a){const _=this.activatedRoute.snapshot.firstChild;this.router.navigate(a.checked?["demo","edit",_.url[0].path]:["demo",_.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function c0(m){return wh(m,5)}(this.originalRoutes),Object.values(this.routes).forEach(a=>{a.forEach((_,C)=>{_.data&&!_.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete a[C]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,mr.$)()).subscribe(()=>{const a=this.exampleLinks.find(_=>_.nativeElement.classList.contains("active"));a&&function wg(m,w){var a=m.isConnected||m.ownerDocument.documentElement.contains(m);if(pm(w)&&"function"==typeof w.behavior)return w.behavior(a?Mu(m,w):[]);if(a){var _=function Ev(m){return!1===m?{block:"end",inline:"nearest"}:pm(m)?m:{block:"start",inline:"nearest"}}(w);(function kd(m,w){void 0===w&&(w="auto");var a="scrollBehavior"in document.body.style;m.forEach(function(_){var C=_.el,N=_.top,ee=_.left;C.scroll&&a?C.scroll({top:N,left:ee,behavior:w}):(C.scrollTop=N,C.scrollLeft=ee)})})(Mu(m,_),_.behavior)}}(a.nativeElement,{block:"center",scrollMode:"if-needed"})})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.SKi),l.rXU(ue.Ix),l.rXU(ue.nX),l.rXU(rc))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["ng-component"]],viewQuery:function(_,C){if(1&_&&l.GBs(Wr,5,l.aKT),2&_){let N;l.mGM(N=l.lsd())&&(C.exampleLinks=N)}},decls:18,vars:5,consts:[["sidenav",""],["exampleLink",""],["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModelChange","change","ngModel"],["mode","side",3,"openedChange","opened"],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModelChange","ngModel"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"]],template:function(_,C){if(1&_){const N=l.RV6();l.j41(0,"showcase-layout-toolbar-menu",2)(1,"button",3),l.bIt("click",function(){return l.eBV(N),l.Njj(C.toggleSidenav())}),l.j41(2,"mat-icon"),l.EFF(3,"menu"),l.k0s()()(),l.j41(4,"showcase-layout-toolbar-menu",4)(5,"mat-slide-toggle",5),l.mxI("ngModelChange",function(ve){return l.eBV(N),l.DH7(C.isEditMode,ve)||(C.isEditMode=ve),l.Njj(ve)}),l.bIt("change",function(ve){return l.eBV(N),l.Njj(C.toggleEdit(ve))}),l.EFF(6," Edit! "),l.k0s()(),l.j41(7,"mat-sidenav-container")(8,"mat-sidenav",6,0),l.bIt("openedChange",function(){return l.eBV(N),l.Njj(C.onSidenavChange())}),l.j41(10,"mat-form-field",7)(11,"input",8),l.mxI("ngModelChange",function(ve){return l.eBV(N),l.DH7(C.searchTerm,ve)||(C.searchTerm=ve),l.Njj(ve)}),l.bIt("ngModelChange",function(){return l.eBV(N),l.Njj(C.search())}),l.k0s(),l.DNE(12,ma,3,0,"button",9),l.k0s(),l.j41(13,"mat-nav-list"),l.DNE(14,js,5,2,"ng-container",10),l.k0s()(),l.j41(15,"mat-sidenav-content")(16,"section",11),l.nrm(17,"router-outlet"),l.k0s()()()}2&_&&(l.R7$(5),l.R50("ngModel",C.isEditMode),l.R7$(3),l.Y8G("opened",C.sidenavIsOpen),l.R7$(3),l.R50("ngModel",C.searchTerm),l.R7$(),l.Y8G("ngIf",C.searchTerm),l.R7$(2),l.Y8G("ngForOf",C.categories))},dependencies:[ue.n3,ue.Wk,ue.wQ,lr.Sq,lr.bT,_s.me,_s.BC,_s.vS,Cv.i,Od.$z,Od.iY,K_,Mg,Ih,fm,fe,F.rl,F.yw,ge.An,Po,Bo,vi,vs],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]})}return m})(),Gi=(()=>{class m{constructor(a,_){this.mapResizeService=a,this.map=_,this.sub=new Ei.yU}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(rc),l.rXU(tr))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["mgl-map"]]})}return m})();const hl=()=>[15.5],bs=m=>[m,40.7135],id=()=>[45],Ah=m=>[m],lp=()=>["==","extrude","true"],kh=()=>["linear"],gf=()=>["zoom"],Sg=()=>["get","height"],cp=(m,w,a)=>["interpolate",m,w,15,0,15.05,a],Pd=()=>["get","min_height"],vm=(m,w)=>({"fill-extrusion-color":"#aaa","fill-extrusion-height":m,"fill-extrusion-base":w,"fill-extrusion-opacity":.6});let Pc=(()=>{class m{onLoad(a){const _=a.getStyle().layers;_&&(this.labelLayerId=this.getLabelLayerId(_))}getLabelLayerId(a){for(const _ of a)if("symbol"===_.type&&_.layout?.["text-field"])return _.id}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:34,consts:[[3,"mapLoad","zoom","center","pitch","bearing"],["id","3d-buildings","source","composite","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.bIt("mapLoad",function(ee){return C.onLoad(ee.target)}),l.nrm(1,"mgl-layer",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("zoom",l.lJ4(10,hl))("center",l.eq3(11,bs,-74.0066))("pitch",l.lJ4(13,id))("bearing",l.eq3(14,Ah,-17.6)),l.R7$(),l.Y8G("filter",l.lJ4(16,lp))("minzoom",15)("paint",l.l_i(31,vm,l.sMw(20,cp,l.lJ4(17,kh),l.lJ4(18,gf),l.lJ4(19,Sg)),l.sMw(27,cp,l.lJ4(24,kh),l.lJ4(25,gf),l.lJ4(26,Pd))))("before",C.labelLayerId))},dependencies:[tr,oo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const up=m=>({width:64,height:64,data:m}),Ld=()=>({}),_f=()=>[0,0],dp=m=>({type:"Point",coordinates:m}),Fd=(m,w)=>({type:"Feature",properties:m,geometry:w}),bm=m=>[m],Ov=m=>({type:"FeatureCollection",features:m}),Ul=m=>({type:"geojson",data:m}),jl=()=>({"icon-image":"gradient"});let hp=(()=>{class m{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const C=new Uint8Array(16384);for(let N=0;N<64;N++)for(let ee=0;ee<64;ee++){const ve=4*(64*ee+N);C[ve+0]=ee/64*255,C[ve+1]=N/64*255,C[ve+2]=128,C[ve+3]=255}return C}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:21,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map"),l.nrm(1,"mgl-image",0)(2,"mgl-layer",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.R7$(),l.Y8G("data",l.eq3(5,up,C.imageData)),l.R7$(),l.Y8G("source",l.eq3(18,Ul,l.eq3(16,Ov,l.eq3(14,bm,l.l_i(11,Fd,l.lJ4(7,Ld),l.eq3(9,dp,l.lJ4(8,_f)))))))("layout",l.lJ4(20,jl)))},dependencies:[tr,oo,nl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const xm=()=>[0,0],ur=m=>({type:"Point",coordinates:m}),Nd=()=>({color:"255,0,0"}),Z_=(m,w)=>({type:"Feature",geometry:m,properties:w}),wm=()=>[50,0],h0=()=>({color:"255,209,28"}),p0=m=>[m,0],dw=()=>({color:"242,127,32"}),q_=(m,w,a)=>[m,w,a],yf=m=>({type:"FeatureCollection",features:m}),Rv=m=>({type:"geojson",data:m}),Ig=()=>["get","color"],f0=m=>["concat","square-rgb-",m],Pv=m=>({"icon-image":m});function Lv(m,w){if(1&m&&l.nrm(0,"mgl-image",3),2&m){const a=w.$implicit;l.Y8G("id",a.id)("data",a)}}let Fv=(()=>{class m{constructor(){this.imagesData=[]}generateImage({id:a}){const _="square-rgb-";if(0!==a.indexOf(_))return;const C=a.replace(_,"").split(",").map(Number),ve=new Uint8Array(16384);for(let Dt=0;Dt<64;Dt++)for(let dn=0;dn<64;dn++){const cn=4*(64*dn+Dt);ve[cn+0]=C[0],ve[cn+1]=C[1],ve[cn+2]=C[2],ve[cn+3]=255}this.imagesData=[...this.imagesData,{id:a,width:64,height:64,data:ve}]}trackByImage(a,_){return _.id}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.bIt("styleImageMissing",function(ee){return C.generateImage(ee)}),l.DNE(1,Lv,1,2,"mgl-image",1),l.nrm(2,"mgl-layer",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.R7$(),l.Y8G("ngForOf",C.imagesData)("ngForTrackBy",C.trackByImage),l.R7$(),l.Y8G("source",l.eq3(34,Rv,l.eq3(32,yf,l.sMw(28,q_,l.l_i(10,Z_,l.eq3(7,ur,l.lJ4(6,xm)),l.lJ4(9,Nd)),l.l_i(17,Z_,l.eq3(14,ur,l.lJ4(13,wm)),l.lJ4(16,h0)),l.l_i(25,Z_,l.eq3(22,ur,l.eq3(20,p0,-50)),l.lJ4(24,dw))))))("layout",l.eq3(39,Pv,l.eq3(37,f0,l.lJ4(36,Ig)))))},dependencies:[lr.Sq,tr,oo,nl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const m0=()=>({}),Nv=()=>[0,0],hw=m=>({type:"Point",coordinates:m}),pw=(m,w)=>({type:"Feature",properties:m,geometry:w}),fw=m=>[m],g0=m=>({type:"FeatureCollection",features:m}),mw=m=>({type:"geojson",data:m}),gw=()=>({"icon-image":"cat","icon-size":.25});function _w(m,w){1&m&&l.nrm(0,"mgl-layer",2),2&m&&l.Y8G("source",l.eq3(13,mw,l.eq3(11,g0,l.eq3(9,fw,l.l_i(6,pw,l.lJ4(2,m0),l.eq3(4,hw,l.lJ4(3,Nv)))))))("layout",l.lJ4(15,gw))}let yw=(()=>{class m{constructor(){this.imageLoaded=!1}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map")(1,"mgl-image",0),l.bIt("imageLoaded",function(){return C.imageLoaded=!0}),l.k0s(),l.DNE(2,_w,1,16,"mgl-layer",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.R7$(2),l.Y8G("ngIf",C.imageLoaded))},dependencies:[lr.bT,tr,oo,nl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const _0=m=>[m,38.907],y0=()=>[11.15];let vw=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-control",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("center",l.eq3(5,_0,-77.04))("zoom",l.lJ4(7,y0))("attributionControl",!1))},dependencies:[tr,Lo,El,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const bw=()=>[8],Lc=()=>({"icon-image":"rocket-15"});function xw(m,w){1&m&&l.nrm(0,"mgl-feature",4),2&m&&l.Y8G("geometry",w.$implicit)}let ww=(()=>{class m{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(a){this.center=a.features[0].geometry.coordinates}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layerClick","layerMouseEnter","layerMouseLeave","layout"],[3,"geometry"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-geojson-source",1),l.DNE(2,xw,1,1,"mgl-feature",2),l.k0s(),l.j41(3,"mgl-layer",3),l.bIt("layerClick",function(ee){return C.centerMapTo(ee)})("layerMouseEnter",function(){return C.cursorStyle="pointer"})("layerMouseLeave",function(){return C.cursorStyle=""}),l.k0s()()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("zoom",l.lJ4(7,bw))("center",C.center)("cursorStyle",C.cursorStyle),l.R7$(2),l.Y8G("ngForOf",C.geometries),l.R7$(),l.Y8G("layout",l.lJ4(8,Lc)))},dependencies:[lr.Sq,tr,oo,Fo,yc,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const VC=()=>[.3],Bv=()=>[0,20],zv=()=>["!=","cluster",!0];function Ew(m,w){1&m&&l.nrm(0,"showcase-cluster-point",6),2&m&&l.Y8G("properties",w.$implicit.properties)}const Cw=m=>({font:m}),Tw=m=>({fill:m});function v0(m,w){if(1&m&&(l.qSk(),l.nrm(0,"path",4)),2&m){const a=w.$implicit;l.Y8G("ngStyle",l.eq3(2,Tw,a.fill)),l.BMQ("d",a.d)}}const Em=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let Dw=(()=>{class m{constructor(){const a=["<",["get","mag"],2],_=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],C=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],N=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",a,1,0]],mag2:["+",["case",_,1,0]],mag3:["+",["case",C,1,0]],mag4:["+",["case",N,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",a,Em[0],_,Em[1],C,Em[2],N,Em[3],Em[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-geojson-source",1),l.j41(2,"mgl-markers-for-clusters",2),l.DNE(3,Ew,1,1,"ng-template",3),l.k0s(),l.nrm(4,"mgl-layer",4)(5,"mgl-layer",5),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v10"),l.Y8G("zoom",l.lJ4(12,VC))("center",l.lJ4(13,Bv)),l.R7$(),l.Y8G("cluster",!0)("clusterRadius",80)("clusterProperties",C.clusterProperties),l.R7$(3),l.Y8G("filter",l.lJ4(14,zv))("paint",C.circlePaint),l.R7$(),l.Y8G("filter",l.lJ4(15,zv))("layout",C.labelLayout)("paint",C.labelPaint))},dependencies:()=>[tr,oo,Fo,Na,Ml,Gi,Vv],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})(),Vv=(()=>{class m{ngOnInit(){const a=[],_=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let C=0;for(const ee of _)a.push(C),C+=ee;this.font=(C>=1e3?22:C>=100?20:C>=10?18:16)+"px sans-serif",this.r=C>=1e3?50:C>=100?32:C>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let ee=0;ee<_.length;ee++)this.segments.push(this.donutSegment(a[ee]/C,(a[ee]+_[ee])/C,Em[ee]));this.totalString=C.toLocaleString()}donutSegment(a,_,C){_-a==1&&(_-=1e-5);const N=2*Math.PI*(a-.25),ee=2*Math.PI*(_-.25),ve=Math.cos(N),ct=Math.sin(N),Dt=Math.cos(ee),dn=Math.sin(ee),cn=_-a>.5?1:0;return{d:`M ${this.r+this.r0*ve} ${this.r+this.r0*ct} L ${this.r+this.r*ve} ${this.r+this.r*ct} A ${this.r} ${this.r} 0 ${cn} 1 ${this.r+this.r*Dt} ${this.r+this.r*dn} L ${this.r+this.r0*Dt} ${this.r+this.r0*dn} A ${this.r0} ${this.r0} 0 ${cn} 0 ${this.r+this.r0*ve} ${this.r+this.r0*ct}`,fill:C}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(_,C){1&_&&(l.qSk(),l.j41(0,"svg",0),l.DNE(1,v0,1,4,"path",1),l.nrm(2,"circle",2),l.j41(3,"text",3),l.EFF(4),l.k0s()()),2&_&&(l.Y8G("ngStyle",l.eq3(10,Cw,C.font)),l.BMQ("width",C.w)("height",C.w)("viewbox",C.viewbox),l.R7$(),l.Y8G("ngForOf",C.segments),l.R7$(),l.BMQ("cx",C.r)("cy",C.r)("r",C.r0),l.R7$(),l.BMQ("transform",C.textTransform),l.R7$(),l.SpI(" ",C.totalString," "))},dependencies:[lr.Sq,lr.B3],encapsulation:2})}return m})();const Mw=()=>[3],Sw=m=>[m,40.66995747013945],b0=()=>["has","point_count"],Iw=()=>[0,"#51bbd6"],Aw=()=>[100,"#f1f075"],Bd=()=>[750,"#f28cb1"],Y_=(m,w,a)=>[m,w,a],x0=m=>({property:"point_count",type:"interval",stops:m}),kw=()=>[0,20],w0=()=>[100,30],E0=()=>[750,40],Q_=(m,w)=>({"circle-color":m,"circle-radius":w}),Uv=()=>["DIN Offc Pro Medium","Arial Unicode MS Bold"],UC=m=>({"text-field":"{point_count_abbreviated}","text-font":m,"text-size":12}),C0=()=>["!has","point_count"],T0=()=>({"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"});function D0(m,w){if(1&m&&(l.qex(0),l.nrm(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.bVm()),2&m){const a=l.XpG();l.R7$(),l.Y8G("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.R7$(),l.Y8G("filter",l.lJ4(10,b0))("paint",l.l_i(29,Q_,l.eq3(18,x0,l.sMw(14,Y_,l.lJ4(11,Iw),l.lJ4(12,Aw),l.lJ4(13,Bd))),l.eq3(27,x0,l.sMw(23,Y_,l.lJ4(20,kw),l.lJ4(21,w0),l.lJ4(22,E0))))),l.R7$(),l.Y8G("filter",l.lJ4(32,b0))("layout",l.eq3(34,UC,l.lJ4(33,Uv))),l.R7$(),l.Y8G("filter",l.lJ4(36,C0))("paint",l.lJ4(37,T0))}}let J_=(()=>{class m{ngOnInit(){var a=this;return(0,X.A)(function*(){a.earthquakes=yield H.e(1).then(H.t.bind(H,2001,19))})()}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.DNE(1,D0,5,38,"ng-container",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/dark-v9"),l.Y8G("zoom",l.lJ4(5,Mw))("center",l.eq3(6,Sw,-103.59179687498357)),l.R7$(),l.Y8G("ngIf",C.earthquakes))},dependencies:[lr.bT,tr,oo,Fo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const jv=m=>[m,38.907],Oh=()=>[11.15],Ow=()=>['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"];let Rw=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-control",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("center",l.eq3(6,jv,-77.04))("zoom",l.lJ4(8,Oh))("attributionControl",!1),l.R7$(),l.Y8G("customAttribution",l.lJ4(9,Ow)))},dependencies:[tr,Lo,El,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const Gv=()=>[36.235656,50.00387],Pw=()=>[11.15];let Cm=(()=>{class m{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("center",l.lJ4(5,Gv))("zoom",l.lJ4(6,Pw))("locale",C.locale))},dependencies:[tr,Lo,Xr,Fa,tl,Cl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const M0=()=>[5],vf=(m,w)=>[m,w],Tm=(m,w,a)=>({"background-image":m,width:w,height:a});function $v(m,w){if(1&m){const a=l.RV6();l.j41(0,"mgl-marker",2)(1,"div",3),l.bIt("click",function(){const C=l.eBV(a).$implicit,N=l.XpG();return l.Njj(N.alert(C.properties.message))}),l.k0s()()}if(2&m){const a=w.$implicit;l.Y8G("feature",a),l.R7$(),l.Y8G("ngStyle",l.sMw(2,Tm,"url(https://placekitten.com/g/"+a.properties.iconSize.join("/")+"/)",a.properties.iconSize[0]+"px",a.properties.iconSize[1]+"px"))}}let Ag=(()=>{class m{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(a){alert(a)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"click","ngStyle"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.DNE(1,$v,2,6,"mgl-marker",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(5,M0))("center",l.l_i(6,vf,-65.017,-16.457)),l.R7$(),l.Y8G("ngForOf",C.geojson.features))},dependencies:[lr.Sq,lr.B3,tr,$o,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]})}return m})();const S0=()=>[3],I0=m=>[m,39];let Lw=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(_,C){1&_&&l.nrm(0,"mgl-map",0),2&_&&(l.Aen("mapbox://styles/mapbox/dark-v9"),l.Y8G("zoom",l.lJ4(4,S0))("center",l.eq3(5,I0,-77.38)))},dependencies:[tr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const Fw=()=>[9],Nw=m=>[m,40];let Bw=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(_,C){1&_&&l.nrm(0,"mgl-map",0),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(4,Fw))("center",l.eq3(5,Nw,-74.5)))},dependencies:[tr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const zw=["*"],jw=new l.nKC("MAT_CARD_CONFIG");let ty=(()=>{class m{constructor(a){this.appearance=a?.appearance||"raised"}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(jw,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(_,C){2&_&&l.AVh("mat-mdc-card-outlined","outlined"===C.appearance)("mdc-card--outlined","outlined"===C.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[l.aNF],ngContentSelectors:zw,decls:1,vars:0,template:function(_,C){1&_&&(l.NAR(),l.SdG(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color);border-color:var(--mdc-elevated-card-container-color);border-radius:var(--mdc-elevated-card-container-shape);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color);border-radius:var(--mdc-outlined-card-container-shape);border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return m})(),Wv=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,lr.MD,Zr.yE]})}return m})();const Ww=()=>[2],Xw=()=>[0,0];function KC(m,w){if(1&m&&(l.j41(0,"mgl-control",3)(1,"mat-card")(2,"div"),l.EFF(3),l.k0s(),l.j41(4,"div"),l.EFF(5),l.k0s()()()),2&m){const a=l.XpG();l.R7$(3),l.SpI("Longitude:\xa0",a.coordinates[0],""),l.R7$(2),l.SpI("Latitude:\xa0",a.coordinates[1],"")}}let Kw=(()=>{class m{constructor(){this.color="#3887be"}onDragEnd(a){this.coordinates=a.getLngLat().toArray()}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"markerDragEnd","lngLat","draggable"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-marker",1),l.bIt("markerDragEnd",function(ee){return C.onDragEnd(ee)}),l.k0s(),l.DNE(2,KC,6,2,"mgl-control",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,Ww))("center",l.lJ4(8,Xw)),l.R7$(),l.Y8G("lngLat",l.lJ4(9,Xw))("draggable",!0),l.R7$(),l.Y8G("ngIf",C.coordinates))},dependencies:[lr.bT,tr,$o,Lo,ty,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const Zw=()=>[13],ZC=()=>[11.255,43.77];let qw=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-control",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/outdoors-v9"),l.Y8G("zoom",l.lJ4(4,Zw))("center",l.lJ4(5,ZC)))},dependencies:[tr,Lo,Xr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const qC=()=>[15],Yw=m=>[m,37.830348],Qw=()=>({}),Jw=m=>[m,37.83381888486939],Xv=m=>[m,37.83317489144141],kg=m=>[m,37.83270036637107],Kv=m=>[m,37.832056363179625],oy=m=>[m,37.83114119107971],O0=m=>[m,37.83049717427869],Og=m=>[m,37.829920943955045],R0=m=>[m,37.82954808664175],e1=m=>[m,37.82944639795659],Rg=m=>[m,37.82880236636284],P0=m=>[m,37.82931081282506],L0=m=>[m,37.83080223556934],F0=m=>[m,37.83168351665737],N0=m=>[m,37.832158048267786],t1=m=>[m,37.83297152392784],n1=m=>[m,37.83263257682617],r1=m=>[m,37.832937629287755],Pg=m=>[m,37.832429207817725],o1=m=>[m,37.832564787218985],s1=m=>[m,37.83337825839438],a1=m=>[m,37.83368330777276],sy=(m,w,a,_,C,N,ee,ve,ct,Dt,dn,cn,ci,Di,pi,wi,ir,Cr,co,ws,So)=>[m,w,a,_,C,N,ee,ve,ct,Dt,dn,cn,ci,Di,pi,wi,ir,Cr,co,ws,So],B0=m=>({type:"LineString",coordinates:m}),z0=(m,w)=>({type:"Feature",properties:m,geometry:w}),V0=m=>({type:"geojson",data:m}),l1=()=>({"line-join":"round","line-cap":"round"}),U0=()=>({"line-color":"#888","line-width":8});let Zv=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-layer",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,qC))("center",l.eq3(8,Yw,-122.486052)),l.R7$(),l.Y8G("source",l.eq3(80,V0,l.l_i(77,z0,l.lJ4(10,Qw),l.eq3(75,B0,l.zJS(53,sy,[l.eq3(11,Jw,-122.48369693756104),l.eq3(13,Xv,-122.48348236083984),l.eq3(15,kg,-122.48339653015138),l.eq3(17,Kv,-122.48356819152832),l.eq3(19,oy,-122.48404026031496),l.eq3(21,O0,-122.48404026031496),l.eq3(23,Og,-122.48348236083984),l.eq3(25,R0,-122.48356819152832),l.eq3(27,e1,-122.48507022857666),l.eq3(29,Rg,-122.48610019683838),l.eq3(31,P0,-122.48695850372314),l.eq3(33,L0,-122.48700141906738),l.eq3(35,F0,-122.48751640319824),l.eq3(37,N0,-122.48803138732912),l.eq3(39,t1,-122.48888969421387),l.eq3(41,n1,-122.48987674713133),l.eq3(43,r1,-122.49043464660643),l.eq3(45,Pg,-122.49125003814696),l.eq3(47,o1,-122.49163627624512),l.eq3(49,s1,-122.49223709106445),l.eq3(51,a1,-122.49378204345702)])))))("layout",l.lJ4(82,l1))("paint",l.lJ4(83,U0)))},dependencies:[tr,oo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const ay=()=>[3],c1=m=>[m,40.66995747013945],u1=()=>["!=","cluster",!0],d1=()=>({"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1});function h1(m,w){if(1&m&&l.nrm(0,"mgl-layer",5),2&m){const a=w.$implicit;l.Y8G("id",a.id)("type",a.type)("filter",a.filter)("paint",a.paint)}}function p1(m,w){if(1&m&&(l.qex(0),l.nrm(1,"mgl-geojson-source",2),l.DNE(2,h1,1,4,"mgl-layer",3),l.nrm(3,"mgl-layer",4),l.bVm()),2&m){const a=l.XpG();l.R7$(),l.Y8G("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.R7$(),l.Y8G("ngForOf",a.clusterLayers),l.R7$(),l.Y8G("filter",l.lJ4(7,u1))("paint",l.lJ4(8,d1))}}let f1=(()=>{class m{ngOnInit(){var a=this;return(0,X.A)(function*(){a.earthquakes=yield H.e(1).then(H.t.bind(H,2001,19));const _=[[0,"green"],[20,"orange"],[200,"red"]];a.clusterLayers=_.map((C,N)=>({type:"circle",id:`cluster-${N}`,paint:{"circle-color":C[1],"circle-radius":70,"circle-blur":1},filter:N===_.length-1?[">=","point_count",C[0]]:["all",[">=","point_count",C[0]],["<","point_count",_[N+1][0]]]}))})()}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes","before","waterway-label",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes","before","waterway-label",3,"filter","paint"],["source","earthquakes","before","waterway-label",3,"id","type","filter","paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.DNE(1,p1,4,9,"ng-container",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/dark-v9"),l.Y8G("zoom",l.lJ4(5,ay))("center",l.eq3(6,c1,-103.59179687498357)),l.R7$(),l.Y8G("ngIf",C.earthquakes))},dependencies:[lr.Sq,lr.bT,tr,oo,Fo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const qv=()=>[2],Lg=m=>[m,37.830348],j0=()=>({"fill-color":"#627BC1","fill-opacity":.5}),G0=()=>({"line-color":"#627BC1","line-width":2}),m1=()=>({"fill-color":"#627BC1","fill-opacity":1});let Fg=(()=>{class m{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(a){this.hoverFilter=["==","name",a.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"layerMouseMove","layerMouseLeave","paint"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-geojson-source",1),l.j41(2,"mgl-layer",2),l.bIt("layerMouseMove",function(ee){return C.activateHoverOn(ee)})("layerMouseLeave",function(){return C.disableHover()}),l.k0s(),l.nrm(3,"mgl-layer",3)(4,"mgl-layer",4),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(8,qv))("center",l.eq3(9,Lg,-100.486052)),l.R7$(2),l.Y8G("paint",l.lJ4(11,j0)),l.R7$(),l.Y8G("paint",l.lJ4(12,G0)),l.R7$(),l.Y8G("paint",l.lJ4(13,m1))("filter",C.hoverFilter))},dependencies:[tr,oo,Fo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const ly=()=>[9],YC=m=>[m,40];let g1=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(_,C){1&_&&l.nrm(0,"mgl-map",0),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(5,ly))("center",l.eq3(6,YC,-74.5))("interactive",!1))},dependencies:[tr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const $0=()=>[2.9],Yv=()=>[16.05,48];let _1=(()=>{class m{changeLangTo(a){this.map.setLayoutProperty("country-label-lg","text-field","{name_"+a+"}")}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"mapCreate","zoom","center"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.bIt("mapCreate",function(ee){return C.map=ee}),l.j41(1,"mgl-control")(2,"button",1),l.bIt("click",function(){return C.changeLangTo("fr")}),l.EFF(3," French "),l.k0s(),l.j41(4,"button",1),l.bIt("click",function(){return C.changeLangTo("ru")}),l.EFF(5," Russian "),l.k0s(),l.j41(6,"button",1),l.bIt("click",function(){return C.changeLangTo("de")}),l.EFF(7," German "),l.k0s(),l.j41(8,"button",1),l.bIt("click",function(){return C.changeLangTo("es")}),l.EFF(9," Spanish "),l.k0s()()()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("zoom",l.lJ4(4,$0))("center",l.lJ4(5,Yv)))},dependencies:[tr,Lo,Od.$z,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();var Qv=H(1584),y1=H(2816),H0=H(7048);const W0=m=>[m],X0=()=>({"line-color":"yellow","line-opacity":.75,"line-width":5});function Jv(m,w){if(1&m&&l.nrm(0,"mgl-geojson-source",3),2&m){const a=l.XpG();l.Y8G("data",a.data)}}function v1(m,w){1&m&&l.nrm(0,"mgl-layer",4),2&m&&l.Y8G("paint",l.lJ4(1,X0))}let b1=(()=>{class m{constructor(){this.zoom=[0],this.originalCoordinates=[]}ngOnInit(){var a=this;return(0,X.A)(function*(){const _=yield H.e(912).then(H.t.bind(H,5912,19));a.originalCoordinates=_.features[0].geometry.coordinates.slice(),_.features[0].geometry.coordinates=[a.originalCoordinates[0]],a.data=_,a.center=a.originalCoordinates[0],a.zoom=[14],a.pitch=30})()}animate(){this.sub=(0,Qv.O)(0,10).pipe((0,y1.S)(a=>a+1,0),(0,H0.v)(a=>a<this.originalCoordinates.length)).subscribe(a=>{this.center=this.originalCoordinates[a],this.data.features[0].geometry.coordinates.push(this.originalCoordinates[a]),this.data={...this.data}})}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[["movingMethod","jumpTo",3,"mapLoad","zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.bIt("mapLoad",function(){return C.animate()}),l.DNE(1,Jv,1,1,"mgl-geojson-source",1)(2,v1,1,2,"mgl-layer",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/satellite-v9"),l.Y8G("zoom",C.zoom)("center",C.center)("centerWithPanTo",!0)("pitch",l.eq3(8,W0,C.pitch)),l.R7$(),l.Y8G("ngIf",C.data),l.R7$(),l.Y8G("ngIf",C.data))},dependencies:[lr.bT,tr,oo,Fo,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();var x1=H(3236);const E1=()=>[14],C1=()=>({"raster-fade-duration":0});let eb=(()=>{class m{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var a=this;return(0,X.A)(function*(){const C=(yield H.e(912).then(H.t.bind(H,5912,19))).features[0].geometry?.coordinates,N=C.map(ve=>a.makeRectangle(ve));a.center=C[0],a.coordinates=N[0];let ee=0;a.sub=function w1(m=0,w=x1.E){return m<0&&(m=0),(0,Qv.O)(m,m,w)}(250).subscribe(()=>{a.url=Math.random()<.5?"assets/red.png":"assets/blue.png",a.coordinates=N[ee],ee=(ee+1)%N.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([a,_]){return[[a,_],[a+this.size,_],[a+this.size,_-this.size],[a,_-this.size]]}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-image-source",1)(2,"mgl-layer",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/satellite-v9"),l.Y8G("center",C.center)("zoom",l.lJ4(7,E1)),l.R7$(),l.Y8G("url",C.url)("coordinates",C.coordinates),l.R7$(),l.Y8G("paint",l.lJ4(8,C1)))},dependencies:[tr,oo,aa,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const T1=()=>({enableHighAccuracy:!0});let D1=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation","showUserHeading"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map"),l.nrm(1,"mgl-control",0),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.R7$(),l.Y8G("positionOptions",l.lJ4(5,T1))("trackUserLocation",!0)("showUserHeading",!0))},dependencies:[tr,Lo,tl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const M1=()=>[.6],bf=()=>[0,0],Ng=()=>({name:"naturalEarth"});let tb=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","projection"]],template:function(_,C){1&_&&l.nrm(0,"mgl-map",0),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v11"),l.Y8G("zoom",l.lJ4(5,M1))("center",l.lJ4(6,bf))("projection",l.lJ4(7,Ng)))},dependencies:[tr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const cy=m=>[m],S1=()=>[17],Dm=()=>[4.577979,51.038189],K0=()=>[4.577979,51.03816];let I1=(()=>{class m{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let a=0;setInterval(()=>{a+=.01,1===a&&(a=0),this.pitch=45+15*Math.cos(a),this.bearing=20*Math.sin(a)-103},20)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.qSk(),l.j41(3,"svg",3),l.nrm(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.k0s()()()()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("interactive",!1)("pitch",l.eq3(8,cy,C.pitch))("bearing",l.eq3(10,cy,C.bearing))("zoom",l.lJ4(12,S1))("center",l.lJ4(13,Dm)),l.R7$(),l.Y8G("lngLat",l.lJ4(14,K0)))},dependencies:[tr,$o,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]})}return m})();const A1=()=>[9],k1=m=>[m,40];let O1=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-control",1),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(4,A1))("center",l.eq3(5,k1,-74.5)))},dependencies:[tr,Lo,Fa,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();var R1=H(2771),nb=H(2798),uy=H(7987),Z0=H(6939);const dy=["tooltip"],ib=new l.nKC("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{const m=(0,l.WQX)(uy.hJ);return()=>m.scrollStrategies.reposition({scrollThrottle:20})}}),L1={provide:ib,deps:[uy.hJ],useFactory:function P1(m){return()=>m.scrollStrategies.reposition({scrollThrottle:20})}},Mm=new l.nKC("mat-tooltip-default-options",{providedIn:"root",factory:function xf(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),F1="tooltip-panel",rb=(0,zl.BQ)({passive:!0});let JC=(()=>{class m{get position(){return this._position}set position(a){a!==this._position&&(this._position=a,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(a){this._positionAtOrigin=(0,Do.he)(a),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Do.he)(a),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(a){this._showDelay=(0,Do.OE)(a)}get hideDelay(){return this._hideDelay}set hideDelay(a){this._hideDelay=(0,Do.OE)(a),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(a){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=a?String(a).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(a){this._tooltipClass=a,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(a,_,C,N,ee,ve,ct,Dt,dn,cn,ci,Di){this._overlay=a,this._elementRef=_,this._scrollDispatcher=C,this._viewContainerRef=N,this._ngZone=ee,this._platform=ve,this._ariaDescriber=ct,this._focusMonitor=Dt,this._dir=cn,this._defaultOptions=ci,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=z1,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new _e.B,this._injector=(0,l.WQX)(l.zZn),this._scrollStrategy=dn,this._document=Di,ci&&(this._showDelay=ci.showDelay,this._hideDelay=ci.hideDelay,ci.position&&(this.position=ci.position),ci.positionAtOrigin&&(this.positionAtOrigin=ci.positionAtOrigin),ci.touchGestures&&(this.touchGestures=ci.touchGestures)),cn.change.pipe((0,ro.Q)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=8}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,ro.Q)(this._destroyed)).subscribe(a=>{a?"keyboard"===a&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const a=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([_,C])=>{a.removeEventListener(_,C,rb)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(a,this.message,"tooltip"),this._focusMonitor.stopMonitoring(a)}show(a=this.showDelay,_){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const C=this._createOverlay(_);this._detach(),this._portal=this._portal||new Z0.A8(this._tooltipComponent,this._viewContainerRef);const N=this._tooltipInstance=C.attach(this._portal).instance;N._triggerElement=this._elementRef.nativeElement,N._mouseLeaveHideDelay=this._hideDelay,N.afterHidden().pipe((0,ro.Q)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),N.show(a)}hide(a=this.hideDelay){const _=this._tooltipInstance;_&&(_.isVisible()?_.hide(a):(_._cancelPendingAnimations(),this._detach()))}toggle(a){this._isTooltipVisible()?this.hide():this.show(void 0,a)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(a){if(this._overlayRef){const N=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!a)&&N._origin instanceof l.aKT)return this._overlayRef;this._detach()}const _=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),C=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&a||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(_);return C.positionChanges.pipe((0,ro.Q)(this._destroyed)).subscribe(N=>{this._updateCurrentPositionClass(N.connectionPair),this._tooltipInstance&&N.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:C,panelClass:`${this._cssClassPrefix}-${F1}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,ro.Q)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,ro.Q)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,ro.Q)(this._destroyed)).subscribe(N=>{this._isTooltipVisible()&&N.keyCode===Vl._f&&!(0,Vl.rp)(N)&&(N.preventDefault(),N.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(a){const _=a.getConfig().positionStrategy,C=this._getOrigin(),N=this._getOverlayPosition();_.withPositions([this._addOffset({...C.main,...N.main}),this._addOffset({...C.fallback,...N.fallback})])}_addOffset(a){const C=!this._dir||"ltr"==this._dir.value;return"top"===a.originY?a.offsetY=-8:"bottom"===a.originY?a.offsetY=8:"start"===a.originX?a.offsetX=C?-8:8:"end"===a.originX&&(a.offsetX=C?8:-8),a}_getOrigin(){const a=!this._dir||"ltr"==this._dir.value,_=this.position;let C;"above"==_||"below"==_?C={originX:"center",originY:"above"==_?"top":"bottom"}:"before"==_||"left"==_&&a||"right"==_&&!a?C={originX:"start",originY:"center"}:("after"==_||"right"==_&&a||"left"==_&&!a)&&(C={originX:"end",originY:"center"});const{x:N,y:ee}=this._invertPosition(C.originX,C.originY);return{main:C,fallback:{originX:N,originY:ee}}}_getOverlayPosition(){const a=!this._dir||"ltr"==this._dir.value,_=this.position;let C;"above"==_?C={overlayX:"center",overlayY:"bottom"}:"below"==_?C={overlayX:"center",overlayY:"top"}:"before"==_||"left"==_&&a||"right"==_&&!a?C={overlayX:"end",overlayY:"center"}:("after"==_||"right"==_&&a||"left"==_&&!a)&&(C={overlayX:"start",overlayY:"center"});const{x:N,y:ee}=this._invertPosition(C.overlayX,C.overlayY);return{main:C,fallback:{overlayX:N,overlayY:ee}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),(0,l.mal)(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(a){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=a,this._tooltipInstance._markForCheck())}_invertPosition(a,_){return"above"===this.position||"below"===this.position?"top"===_?_="bottom":"bottom"===_&&(_="top"):"end"===a?a="start":"start"===a&&(a="end"),{x:a,y:_}}_updateCurrentPositionClass(a){const{overlayY:_,originX:C,originY:N}=a;let ee;if(ee="center"===_?this._dir&&"rtl"===this._dir.value?"end"===C?"left":"right":"start"===C?"left":"right":"bottom"===_&&"top"===N?"above":"below",ee!==this._currentPosition){const ve=this._overlayRef;if(ve){const ct=`${this._cssClassPrefix}-${F1}-`;ve.removePanelClass(ct+this._currentPosition),ve.addPanelClass(ct+ee)}this._currentPosition=ee}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",a=>{let _;this._setupPointerExitEventsIfNeeded(),void 0!==a.x&&void 0!==a.y&&(_=a),this.show(void 0,_)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",a=>{const _=a.targetTouches?.[0],C=_?{x:_.clientX,y:_.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,C),this._defaultOptions.touchLongPressShowDelay??500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const a=[];if(this._platformSupportsMouseEvents())a.push(["mouseleave",_=>{const C=_.relatedTarget;(!C||!this._overlayRef?.overlayElement.contains(C))&&this.hide()}],["wheel",_=>this._wheelListener(_)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const _=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};a.push(["touchend",_],["touchcancel",_])}this._addListeners(a),this._passiveListeners.push(...a)}_addListeners(a){a.forEach(([_,C])=>{this._elementRef.nativeElement.addEventListener(_,C,rb)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(a){if(this._isTooltipVisible()){const _=this._document.elementFromPoint(a.clientX,a.clientY),C=this._elementRef.nativeElement;_!==C&&!C.contains(_)&&this.hide()}}_disableNativeGesturesIfNecessary(){const a=this.touchGestures;if("off"!==a){const _=this._elementRef.nativeElement,C=_.style;("on"===a||"INPUT"!==_.nodeName&&"TEXTAREA"!==_.nodeName)&&(C.userSelect=C.msUserSelect=C.webkitUserSelect=C.MozUserSelect="none"),("on"===a||!_.draggable)&&(C.webkitUserDrag="none"),C.touchAction="none",C.webkitTapHighlightColor="transparent"}}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(uy.hJ),l.rXU(l.aKT),l.rXU(ze.R),l.rXU(l.c1b),l.rXU(l.SKi),l.rXU(zl.OD),l.rXU(Su.vr),l.rXU(Su.FN),l.rXU(ib),l.rXU(it.dS),l.rXU(Mm,8),l.rXU(lr.qQ))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(_,C){2&_&&l.AVh("mat-mdc-tooltip-disabled",C.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}return m})(),z1=(()=>{class m{constructor(a,_,C){this._changeDetectorRef=a,this._elementRef=_,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new _e.B,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled="NoopAnimations"===C}show(a){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},a)}hide(a){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},a)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:a}){(!a||!this._triggerElement.contains(a))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const a=this._elementRef.nativeElement.getBoundingClientRect();return a.height>24&&a.width>=200}_handleAnimationEnd({animationName:a}){(a===this._showAnimation||a===this._hideAnimation)&&this._finalizeAnimation(a===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(a){a?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(a){const _=this._tooltip.nativeElement,C=this._showAnimation,N=this._hideAnimation;if(_.classList.remove(a?N:C),_.classList.add(a?C:N),this._isVisible!==a&&(this._isVisible=a,this._changeDetectorRef.markForCheck()),a&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const ee=getComputedStyle(_);("0s"===ee.getPropertyValue("animation-duration")||"none"===ee.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}a&&this._onShow(),this._animationsDisabled&&(_.classList.add("_mat-animation-noopable"),this._finalizeAnimation(a))}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.gRc),l.rXU(l.aKT),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-tooltip-component"]],viewQuery:function(_,C){if(1&_&&l.GBs(dy,7),2&_){let N;l.mGM(N=l.lsd())&&(C._tooltip=N.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(_,C){1&_&&l.bIt("mouseleave",function(ee){return C._handleMouseLeave(ee)}),2&_&&l.xc7("zoom",C.isVisible()?1:null)},standalone:!0,features:[l.aNF],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(_,C){if(1&_){const N=l.RV6();l.j41(0,"div",1,0),l.bIt("animationend",function(ve){return l.eBV(N),l.Njj(C._handleAnimationEnd(ve))}),l.j41(2,"div",2),l.EFF(3),l.k0s()()}2&_&&(l.AVh("mdc-tooltip--multiline",C._isMultiline),l.Y8G("ngClass",C.tooltipClass),l.R7$(3),l.JRh(C.message))},dependencies:[lr.YU],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color);color:var(--mdc-plain-tooltip-supporting-text-color);border-radius:var(--mdc-plain-tooltip-container-shape);font-family:var(--mdc-plain-tooltip-supporting-text-font);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return m})(),ob=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({providers:[L1],imports:[Su.Pd,lr.MD,uy.z_,Zr.yE,Zr.yE,ze.Gj]})}return m})();function V1(m,w){if(1&m&&(l.j41(0,"mat-option",17),l.EFF(1),l.k0s()),2&m){const a=w.$implicit;l.Y8G("value",a),l.R7$(),l.SpI(" ",a," ")}}function U1(m,w){if(1&m){const a=l.RV6();l.j41(0,"mat-form-field",14)(1,"mat-select",16,0),l.bIt("selectionChange",function(C){l.eBV(a);const N=l.XpG(2);return l.Njj(N._changePageSize(C.value))}),l.Z7z(3,V1,2,2,"mat-option",17,l.fX1),l.k0s(),l.j41(5,"div",18),l.bIt("click",function(){l.eBV(a);const C=l.sdS(2);return l.Njj(C.open())}),l.k0s()()}if(2&m){const a=l.XpG(2);l.Y8G("appearance",a._formFieldAppearance)("color",a.color),l.R7$(),l.Y8G("value",a.pageSize)("disabled",a.disabled)("aria-labelledby",a._pageSizeLabelId)("panelClass",a.selectConfig.panelClass||"")("disableOptionCentering",a.selectConfig.disableOptionCentering),l.R7$(2),l.Dyx(a._displayedPageSizeOptions)}}function j1(m,w){if(1&m&&(l.j41(0,"div",15),l.EFF(1),l.k0s()),2&m){const a=l.XpG(2);l.R7$(),l.JRh(a.pageSize)}}function eT(m,w){if(1&m&&(l.j41(0,"div",3)(1,"div",13),l.EFF(2),l.k0s(),l.DNE(3,U1,6,7,"mat-form-field",14)(4,j1,2,1,"div",15),l.k0s()),2&m){const a=l.XpG();l.R7$(),l.BMQ("id",a._pageSizeLabelId),l.R7$(),l.SpI(" ",a._intl.itemsPerPageLabel," "),l.R7$(),l.vxM(a._displayedPageSizeOptions.length>1?3:-1),l.R7$(),l.vxM(a._displayedPageSizeOptions.length<=1?4:-1)}}function J0(m,w){if(1&m){const a=l.RV6();l.j41(0,"button",19),l.bIt("click",function(){l.eBV(a);const C=l.XpG();return l.Njj(C.firstPage())}),l.qSk(),l.j41(1,"svg",8),l.nrm(2,"path",20),l.k0s()()}if(2&m){const a=l.XpG();l.Y8G("matTooltip",a._intl.firstPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),l.BMQ("aria-label",a._intl.firstPageLabel)}}function oc(m,w){if(1&m){const a=l.RV6();l.j41(0,"button",21),l.bIt("click",function(){l.eBV(a);const C=l.XpG();return l.Njj(C.lastPage())}),l.qSk(),l.j41(1,"svg",8),l.nrm(2,"path",22),l.k0s()()}if(2&m){const a=l.XpG();l.Y8G("matTooltip",a._intl.lastPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),l.BMQ("aria-label",a._intl.lastPageLabel)}}let Bg=(()=>{class m{constructor(){this.changes=new _e.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(a,_,C)=>{if(0==C||0==_)return`0 of ${C}`;const N=a*_;return`${N+1} \u2013 ${N<(C=Math.max(C,0))?Math.min(N+_,C):N+_} of ${C}`}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();const tx={provide:Bg,deps:[[new l.Xx1,new l.kdw,Bg]],useFactory:function ex(m){return m||new Bg}},G1=new l.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS");let sb=0,ab=(()=>{class m{get pageIndex(){return this._pageIndex}set pageIndex(a){this._pageIndex=Math.max(a||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(a){this._length=a||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(a){this._pageSize=Math.max(a||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(a){this._pageSizeOptions=(a||[]).map(_=>(0,l.Udg)(_,0)),this._updateDisplayedPageSizeOptions()}constructor(a,_,C){if(this._intl=a,this._changeDetectorRef=_,this._pageSizeLabelId="mat-paginator-page-size-label-"+sb++,this._isInitialized=!1,this._initializedStream=new R1.m(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new l.bkB,this.initialized=this._initializedStream,this._intlChanges=a.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),C){const{pageSize:N,pageSizeOptions:ee,hidePageSize:ve,showFirstLastButtons:ct}=C;null!=N&&(this._pageSize=N),null!=ee&&(this._pageSizeOptions=ee),null!=ve&&(this.hidePageSize=ve),null!=ct&&(this.showFirstLastButtons=ct)}this._formFieldAppearance=C?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(a)}previousPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(a)}firstPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=0,this._emitPageEvent(a)}lastPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(a)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const a=this.getNumberOfPages()-1;return this.pageIndex<a&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(a){const C=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/a)||0,this.pageSize=a,this._emitPageEvent(C)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((a,_)=>a-_),this._changeDetectorRef.markForCheck())}_emitPageEvent(a){this.page.emit({previousPageIndex:a,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(Bg),l.rXU(l.gRc),l.rXU(G1,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",l.Udg],length:[2,"length","length",l.Udg],pageSize:[2,"pageSize","pageSize",l.Udg],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",l.L39],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",l.L39],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",l.L39]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[l.GFd,l.aNF],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(_,C){1&_&&(l.j41(0,"div",1)(1,"div",2),l.DNE(2,eT,5,4,"div",3),l.j41(3,"div",4)(4,"div",5),l.EFF(5),l.k0s(),l.DNE(6,J0,3,5,"button",6),l.j41(7,"button",7),l.bIt("click",function(){return C.previousPage()}),l.qSk(),l.j41(8,"svg",8),l.nrm(9,"path",9),l.k0s()(),l.joV(),l.j41(10,"button",10),l.bIt("click",function(){return C.nextPage()}),l.qSk(),l.j41(11,"svg",8),l.nrm(12,"path",11),l.k0s()(),l.DNE(13,oc,3,5,"button",12),l.k0s()()()),2&_&&(l.R7$(2),l.vxM(C.hidePageSize?-1:2),l.R7$(3),l.SpI(" ",C._intl.getRangeLabel(C.pageIndex,C.pageSize,C.length)," "),l.R7$(),l.vxM(C.showFirstLastButtons?6:-1),l.R7$(),l.Y8G("matTooltip",C._intl.previousPageLabel)("matTooltipDisabled",C._previousButtonsDisabled())("matTooltipPosition","above")("disabled",C._previousButtonsDisabled()),l.BMQ("aria-label",C._intl.previousPageLabel),l.R7$(3),l.Y8G("matTooltip",C._intl.nextPageLabel)("matTooltipDisabled",C._nextButtonsDisabled())("matTooltipPosition","above")("disabled",C._nextButtonsDisabled()),l.BMQ("aria-label",C._intl.nextPageLabel),l.R7$(3),l.vxM(C.showFirstLastButtons?13:-1))},dependencies:[F.rl,nb.VO,Zr.wT,Od.iY,JC],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}return m})(),$1=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({providers:[tx],imports:[Od.Hl,nb.Ve,ob,ab]})}return m})();const lb=()=>[3],nx=m=>[m,40.66995747013945];function ix(m,w){if(1&m&&(l.j41(0,"div",8),l.EFF(1),l.k0s()),2&m){const a=w.$implicit;l.Y8G("title",a.properties["Secondary ID"]),l.R7$(),l.SpI(" ",a.properties["Primary ID"]," ")}}function cb(m,w){if(1&m){const a=l.RV6();l.j41(0,"div",9),l.bIt("click",function(C){const N=l.eBV(a).$implicit,ee=l.XpG(2);return l.Njj(ee.selectCluster(C,N))}),l.EFF(1),l.k0s()}if(2&m){const a=w.$implicit;l.R7$(),l.SpI(" ",null==a.properties?null:a.properties.point_count," ")}}function H1(m,w){if(1&m&&(l.j41(0,"mgl-popup",10),l.nrm(1,"showcase-cluster-popup",11),l.k0s()),2&m){l.XpG();const a=l.sdS(2),_=l.XpG();l.Y8G("feature",_.selectedCluster),l.R7$(),l.Y8G("clusterComponent",a)("selectedCluster",_.selectedCluster)}}function W1(m,w){if(1&m&&(l.qex(0),l.nrm(1,"mgl-geojson-source",3,0),l.j41(3,"mgl-markers-for-clusters",4),l.DNE(4,ix,2,2,"ng-template",5)(5,cb,2,1,"ng-template",6),l.k0s(),l.DNE(6,H1,2,3,"mgl-popup",7),l.bVm()),2&m){const a=l.XpG();l.R7$(),l.Y8G("data",a.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.R7$(5),l.Y8G("ngIf",a.selectedCluster)}}function rx(m,w){if(1&m&&(l.j41(0,"mat-list-item"),l.EFF(1),l.k0s()),2&m){const a=w.$implicit;l.R7$(),l.SpI(" ",null==a.properties?null:a.properties["Primary ID"]," ")}}let X1=(()=>{class m{ngOnInit(){var a=this;return(0,X.A)(function*(){const _=yield H.e(1).then(H.t.bind(H,2001,19));setInterval(()=>{_.features.length&&_.features.pop(),a.earthquakes={..._}},500)})()}selectCluster(a,_){a.stopPropagation(),this.selectedCluster=_}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[["clusterComponent",""],[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",1),l.DNE(1,W1,7,5,"ng-container",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/dark-v9"),l.Y8G("zoom",l.lJ4(5,lb))("center",l.eq3(6,nx,-103.59179687498357)),l.R7$(),l.Y8G("ngIf",C.earthquakes))},dependencies:()=>[lr.bT,tr,Fo,Ma,Uc,Na,Ml,Gi,Gl],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]})}return m})(),Gl=(()=>{class m{ngOnChanges(a){this.changePage(),a.selectedCluster&&!a.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(a){var _=this;return(0,X.A)(function*(){let C=0;a&&(C=5*a.pageIndex),_.leaves=yield _.clusterComponent.getClusterLeaves(_.selectedCluster.properties?.cluster_id??0,5,C)})()}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-cluster-popup"]],viewQuery:function(_,C){if(1&_&&l.GBs(ab,7),2&_){let N;l.mGM(N=l.lsd())&&(C.paginator=N.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.OA$],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"page","length","pageSize"]],template:function(_,C){1&_&&(l.j41(0,"mat-list"),l.DNE(1,rx,2,1,"mat-list-item",0),l.k0s(),l.j41(2,"mat-paginator",1),l.bIt("page",function(ee){return C.changePage(ee)}),l.k0s()),2&_&&(l.R7$(),l.Y8G("ngForOf",C.leaves),l.R7$(),l.Y8G("length",null==C.selectedCluster.properties?null:C.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[lr.Sq,W_,Mg,ab],encapsulation:2})}return m})(),ox=(()=>{class m{alert(a){alert(a)}onGeolocate(a){console.log("geolocate",a)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:10,vars:2,consts:[["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeocoder","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map")(1,"mgl-control")(2,"button",0),l.bIt("click",function(){return C.alert("Hello")}),l.EFF(3," Hello "),l.k0s()(),l.nrm(4,"mgl-control",1)(5,"mgl-control",2)(6,"mgl-control",3),l.j41(7,"mgl-control",4),l.bIt("geolocate",function(ee){return C.onGeolocate(ee)}),l.k0s(),l.nrm(8,"mgl-control",5)(9,"mgl-control",6),l.k0s()),2&_&&l.Aen("mapbox://styles/mapbox/streets-v9")},dependencies:[tr,Lo,Xr,Fa,tl,El,Cl,Od.Sr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const ub=()=>[5],zg=(m,w)=>[m,w];let sx=(()=>{class m{alert(a){alert(a)}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.bIt("click",function(){return C.alert("Foo")}),l.k0s()(),l.j41(3,"mgl-marker",1)(4,"div",3),l.bIt("click",function(){return C.alert("Bar")}),l.k0s()(),l.j41(5,"mgl-marker",1)(6,"div",4),l.bIt("click",function(){return C.alert("Baz")}),l.k0s()()()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,ub))("center",l.l_i(8,zg,-65.017,-16.457)),l.R7$(),l.Y8G("lngLat",l.l_i(11,zg,-66.324462890625,-16.024695711685304)),l.R7$(2),l.Y8G("lngLat",l.l_i(14,zg,-61.2158203125,-15.97189158092897)),l.R7$(2),l.Y8G("lngLat",l.l_i(17,zg,-63.29223632812499,-18.28151823530889)))},dependencies:[tr,$o,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]})}return m})();const K1=()=>[2],db=()=>[0,0],Z1=m=>({type:"Point",coordinates:m});let q1=(()=>{class m{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(a){console.log("onDragStart",a)}onDragEnd(a){console.log("onDragEnd",a)}onDrag(a){console.log("onDrag",a),this.coordinates=a.lngLat.toArray()}changeColor(a){this.layerPaint={...this.layerPaint,"circle-color":a}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[["targetLayer",""],[3,"zoom","center"],["id","point"],[3,"featureDragStart","featureDragEnd","featureDrag","properties","geometry","mglDraggable"],["id","point","type","circle","source","point",3,"layerMouseEnter","layerMouseLeave","paint"],["position","bottom-left"]],template:function(_,C){if(1&_){const N=l.RV6();l.j41(0,"mgl-map",1)(1,"mgl-geojson-source",2)(2,"mgl-feature",3),l.bIt("featureDragStart",function(ve){return l.eBV(N),l.Njj(C.onDragStart(ve))})("featureDragEnd",function(ve){return l.eBV(N),l.Njj(C.onDragEnd(ve))})("featureDrag",function(ve){return l.eBV(N),l.Njj(C.onDrag(ve))}),l.k0s()(),l.j41(3,"mgl-layer",4,0),l.bIt("layerMouseEnter",function(){return l.eBV(N),l.Njj(C.changeColor("#3bb2d0"))})("layerMouseLeave",function(){return l.eBV(N),l.Njj(C.changeColor("#3887be"))}),l.k0s(),l.j41(5,"mgl-control",5)(6,"mat-card")(7,"div"),l.EFF(8),l.k0s(),l.j41(9,"div"),l.EFF(10),l.k0s()()()()}if(2&_){const N=l.sdS(4);l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(9,K1))("center",l.lJ4(10,db)),l.R7$(2),l.Y8G("geometry",l.eq3(12,Z1,l.lJ4(11,db)))("mglDraggable",N),l.R7$(),l.Y8G("paint",C.layerPaint),l.R7$(5),l.SpI("Longitude:\xa0",C.coordinates[0],""),l.R7$(2),l.SpI("Latitude:\xa0",C.coordinates[1],"")}},dependencies:[tr,oo,zc,Fo,yc,Lo,ty,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const fy=()=>[15],hb=m=>[m,37.830348],pp=()=>({"line-join":"round","line-cap":"round"}),my=()=>({"line-color":"#888","line-width":8});let ax=(()=>{class m{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-geojson-source",1),l.nrm(2,"mgl-feature",2),l.k0s(),l.nrm(3,"mgl-layer",3),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,fy))("center",l.eq3(8,hb,-122.486052)),l.R7$(2),l.Y8G("geometry",C.geometry),l.R7$(),l.Y8G("layout",l.lJ4(10,pp))("paint",l.lJ4(11,my)))},dependencies:[tr,oo,Fo,yc,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})(),Vg=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map"),l.nrm(1,"mgl-control",0),l.k0s()),2&_&&l.Aen("mapbox://styles/mapbox/streets-v9")},dependencies:[tr,Lo,Cl,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const Y1=()=>[3],Q1=m=>[m,38.907],pb=()=>({type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}),lx=()=>({"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"});function fp(m,w){if(1&m&&(l.j41(0,"mgl-popup",3),l.nrm(1,"span",4),l.k0s()),2&m){const a=l.XpG();l.Y8G("lngLat",a.selectedLngLat),l.R7$(),l.Y8G("innerHTML",null==a.selectedElement?null:a.selectedElement.name,l.npT)}}let Ug=(()=>{class m{onClick(a){this.selectedLngLat=a.lngLat,this.selectedElement=a.features?.[0].properties}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle"],["id","states-layer","type","fill",3,"layerMouseEnter","layerMouseLeave","layerClick","source","paint"],[3,"lngLat",4,"ngIf"],[3,"lngLat"],[3,"innerHTML"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-layer",1),l.bIt("layerMouseEnter",function(){return C.cursorStyle="pointer"})("layerMouseLeave",function(){return C.cursorStyle=""})("layerClick",function(ee){return C.onClick(ee)}),l.k0s(),l.DNE(2,fp,2,2,"mgl-popup",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(8,Y1))("center",l.eq3(9,Q1,-100.04))("cursorStyle",C.cursorStyle),l.R7$(),l.Y8G("source",l.lJ4(11,pb))("paint",l.lJ4(12,lx)),l.R7$(),l.Y8G("ngIf",C.selectedLngLat))},dependencies:[lr.bT,tr,oo,Ma,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const nT=()=>[11.15],gy=m=>[m,38.907],cx=()=>({"icon-image":"{icon}-15","icon-allow-overlap":!0});function ux(m,w){if(1&m&&(l.j41(0,"mgl-popup",4),l.nrm(1,"span",5),l.k0s()),2&m){const a=l.XpG();l.Y8G("feature",a.selectedPoint),l.R7$(),l.Y8G("innerHTML",null==a.selectedPoint.properties?null:a.selectedPoint.properties.description,l.npT)}}let J1=(()=>{class m{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art-gallery"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(a){this.selectedPoint=a.features?.[0]}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layerClick","layerMouseEnter","layerMouseLeave","layout"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-geojson-source",1),l.j41(2,"mgl-layer",2),l.bIt("layerClick",function(ee){return C.onClick(ee)})("layerMouseEnter",function(){return C.cursorStyle="pointer"})("layerMouseLeave",function(){return C.cursorStyle=""}),l.k0s(),l.DNE(3,ux,2,2,"mgl-popup",3),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(8,nT))("center",l.eq3(9,gy,-77.04))("cursorStyle",C.cursorStyle),l.R7$(),l.Y8G("data",C.points),l.R7$(),l.Y8G("layout",l.lJ4(11,cx)),l.R7$(),l.Y8G("ngIf",C.selectedPoint))},dependencies:[lr.bT,tr,oo,Fo,Ma,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const jg=()=>[3],dx=m=>[m,37.8];let eE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l.EFF(3,"Hello world !"),l.k0s()()()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,jg))("center",l.eq3(8,dx,-96)),l.R7$(),l.Y8G("lngLat",l.eq3(10,dx,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[tr,Ma,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]})}return m})();const tE=()=>[9],nE=()=>[137.9150899566626,36.25956997955441];let iE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:1,vars:6,consts:[[3,"zoom","center"]],template:function(_,C){1&_&&l.nrm(0,"mgl-map",0),2&_&&(l.Aen("mapbox://styles/mapbox/satellite-v9"),l.Y8G("zoom",l.lJ4(4,tE))("center",l.lJ4(5,nE)))},dependencies:[tr,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const rE=()=>[15],hx=m=>[m,38.8895],oE=()=>({"background-image":"url(https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"});let _y=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[["myMarker",""],[3,"zoom","center"],[3,"lngLat"],[3,"ngStyle"],[3,"marker"]],template:function(_,C){if(1&_&&(l.j41(0,"mgl-map",1)(1,"mgl-marker",2,0),l.nrm(3,"div",3),l.k0s(),l.j41(4,"mgl-popup",4),l.EFF(5," Construction on the Washington Monument began in 1848. "),l.k0s()()),2&_){const N=l.sdS(2);l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("zoom",l.lJ4(7,rE))("center",l.eq3(8,hx,-77.0353)),l.R7$(),l.Y8G("lngLat",l.eq3(10,hx,-77.0353)),l.R7$(2),l.Y8G("ngStyle",l.lJ4(12,oE)),l.R7$(),l.Y8G("marker",N)}},dependencies:[lr.B3,tr,$o,Ma,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})();const sE=["input"],aE=["formField"],px=["*"];let fb=0;class yy{constructor(w,a){this.source=w,this.value=a}}const fx={provide:_s.kq,useExisting:(0,l.Rfq)(()=>gb),multi:!0},mx=new l.nKC("MatRadioGroup"),gx=new l.nKC("mat-radio-default-options",{providedIn:"root",factory:function mb(){return{color:"accent"}}});let gb=(()=>{class m{get name(){return this._name}set name(a){this._name=a,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(a){this._labelPosition="before"===a?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(a){this._selected=a,this.value=a?a.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(a){this._disabled=a,this._markRadiosForCheck()}get required(){return this._required}set required(a){this._required=a,this._markRadiosForCheck()}constructor(a){this._changeDetector=a,this._value=null,this._name="mat-radio-group-"+fb++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.bkB}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(a=>a===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(a=>{a.name=this.name,a._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(_=>{_.checked=this.value===_.value,_.checked&&(this._selected=_)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new yy(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(a=>a._markForCheck())}writeValue(a){this.value=a,this._changeDetector.markForCheck()}registerOnChange(a){this._controlValueAccessorChangeFn=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a,this._changeDetector.markForCheck()}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.gRc))};static#t=this.\u0275dir=l.FsC({type:m,selectors:[["mat-radio-group"]],contentQueries:function(_,C,N){if(1&_&&l.wni(N,vy,5),2&_){let ee;l.mGM(ee=l.lsd())&&(C._radios=ee)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",l.L39],required:[2,"required","required",l.L39]},outputs:{change:"change"},exportAs:["matRadioGroup"],standalone:!0,features:[l.Jv_([fx,{provide:mx,useExisting:m}]),l.GFd]})}return m})(),vy=(()=>{class m{get checked(){return this._checked}set checked(a){this._checked!==a&&(this._checked=a,a&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!a&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),a&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===a),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(a){this._labelPosition=a}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(a){this._setDisabled(a)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(a){this._required=a}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(a){this._color=a}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(a,_,C,N,ee,ve,ct,Dt){this._elementRef=_,this._changeDetector=C,this._focusMonitor=N,this._radioDispatcher=ee,this._providerOverride=ct,this._uniqueId="mat-radio-"+ ++fb,this.id=this._uniqueId,this.disableRipple=!1,this.tabIndex=0,this.change=new l.bkB,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this._injector=(0,l.WQX)(l.zZn),this.radioGroup=a,this._noopAnimations="NoopAnimations"===ve,Dt&&(this.tabIndex=(0,l.Udg)(Dt,0))}focus(a,_){_?this._focusMonitor.focusVia(this._inputElement,_,a):this._inputElement.nativeElement.focus(a)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((a,_)=>{a!==this.id&&_===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{!a&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new yy(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(a){a.stopPropagation()}_onInputInteraction(a){if(a.stopPropagation(),!this.checked&&!this.disabled){const _=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),_&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(a){this._onInputInteraction(a),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(a){this._disabled!==a&&(this._disabled=a,this._changeDetector.markForCheck())}_updateTabIndex(){const a=this.radioGroup;let _;if(_=a&&a.selected&&!this.disabled?a.selected===this?this.tabIndex:-1:this.tabIndex,_!==this._previousTabIndex){const C=this._inputElement?.nativeElement;C&&(C.setAttribute("tabindex",_+""),this._previousTabIndex=_,(0,l.mal)(()=>{queueMicrotask(()=>{a&&a.selected&&a.selected!==this&&document.activeElement===C&&(a.selected?._inputElement.nativeElement.focus(),document.activeElement===C&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(mx,8),l.rXU(l.aKT),l.rXU(l.gRc),l.rXU(Su.FN),l.rXU(hf.zP),l.rXU(l.bc$,8),l.rXU(gx,8),l.kS0("tabindex"))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-radio-button"]],viewQuery:function(_,C){if(1&_&&(l.GBs(sE,5),l.GBs(aE,7,l.aKT)),2&_){let N;l.mGM(N=l.lsd())&&(C._inputElement=N.first),l.mGM(N=l.lsd())&&(C._rippleTrigger=N.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(_,C){1&_&&l.bIt("focus",function(){return C._inputElement.nativeElement.focus()}),2&_&&(l.BMQ("id",C.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.AVh("mat-primary","primary"===C.color)("mat-accent","accent"===C.color)("mat-warn","warn"===C.color)("mat-mdc-radio-checked",C.checked)("_mat-animation-noopable",C._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",l.L39],tabIndex:[2,"tabIndex","tabIndex",a=>null==a?0:(0,l.Udg)(a)],checked:[2,"checked","checked",l.L39],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",l.L39],required:[2,"required","required",l.L39],color:"color"},outputs:{change:"change"},exportAs:["matRadioButton"],standalone:!0,features:[l.GFd,l.aNF],ngContentSelectors:px,decls:13,vars:16,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(_,C){if(1&_){const N=l.RV6();l.NAR(),l.j41(0,"div",2,0)(2,"div",3)(3,"div",4),l.bIt("click",function(ve){return l.eBV(N),l.Njj(C._onTouchTargetClick(ve))}),l.k0s(),l.j41(4,"input",5,1),l.bIt("change",function(ve){return l.eBV(N),l.Njj(C._onInputInteraction(ve))}),l.k0s(),l.j41(6,"div",6),l.nrm(7,"div",7)(8,"div",8),l.k0s(),l.j41(9,"div",9),l.nrm(10,"div",10),l.k0s()(),l.j41(11,"label",11),l.SdG(12),l.k0s()()}2&_&&(l.Y8G("labelPosition",C.labelPosition),l.R7$(2),l.AVh("mdc-radio--disabled",C.disabled),l.R7$(2),l.Y8G("id",C.inputId)("checked",C.checked)("disabled",C.disabled)("required",C.required),l.BMQ("name",C.name)("value",C.value)("aria-label",C.ariaLabel)("aria-labelledby",C.ariaLabelledby)("aria-describedby",C.ariaDescribedby),l.R7$(5),l.Y8G("matRippleTrigger",C._rippleTrigger.nativeElement)("matRippleDisabled",C._isRippleDisabled())("matRippleCentered",!0),l.R7$(2),l.Y8G("for",C.inputId))},dependencies:[Zr.r6,Zr.tO],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size);top:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color);opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color);opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color);font-family:var(--mat-radio-label-text-font);line-height:var(--mat-radio-label-text-line-height);font-size:var(--mat-radio-label-text-size);letter-spacing:var(--mat-radio-label-text-tracking);font-weight:var(--mat-radio-label-text-weight)}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return m})(),lE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,lr.MD,Zr.pZ,vy,Zr.yE]})}return m})();const cE=()=>[13],uE=()=>[4.899,52.372];let _b=(()=>{class m{constructor(){this.layerId="basic"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(a){this.style=`mapbox://styles/mapbox/${a}-v9`}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:14,vars:7,consts:[[3,"zoom","center"],[3,"ngModelChange","ngModel"],["value","basic"],["value","streets"],["value","bright"],["value","light"],["value","dark"],["value","satellite"]],template:function(_,C){1&_&&(l.nrm(0,"mgl-map",0),l.j41(1,"mat-radio-group",1),l.bIt("ngModelChange",function(ee){return C.changeStyle(ee)}),l.j41(2,"mat-radio-button",2),l.EFF(3,"basic"),l.k0s(),l.j41(4,"mat-radio-button",3),l.EFF(5,"streets"),l.k0s(),l.j41(6,"mat-radio-button",4),l.EFF(7,"bright"),l.k0s(),l.j41(8,"mat-radio-button",5),l.EFF(9,"light"),l.k0s(),l.j41(10,"mat-radio-button",6),l.EFF(11,"dark"),l.k0s(),l.j41(12,"mat-radio-button",7),l.EFF(13,"satellite"),l.k0s()()),2&_&&(l.Aen(C.style),l.Y8G("zoom",l.lJ4(5,cE))("center",l.lJ4(6,uE)),l.R7$(),l.Y8G("ngModel",C.layerId))},dependencies:[_s.BC,_s.vS,tr,gb,vy,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]})}return m})();const yb=["button"],_x=["*"];function vb(m,w){if(1&m&&l.nrm(0,"mat-pseudo-checkbox",3),2&m){const a=l.XpG();l.Y8G("disabled",a.disabled)}}function bb(m,w){if(1&m&&l.nrm(0,"mat-pseudo-checkbox",3),2&m){const a=l.XpG();l.Y8G("disabled",a.disabled)}}const yx=new l.nKC("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:function dE(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1}}}),vx=new l.nKC("MatButtonToggleGroup");let xb=0;class by{constructor(w,a){this.source=w,this.value=a}}let xy=(()=>{class m{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(a){this._tabIndex=a,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(a){this._appearance=a}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(a){a!==this._checked&&(this._checked=a,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(a){this._disabled=a}constructor(a,_,C,N,ee,ve){this._changeDetectorRef=_,this._elementRef=C,this._focusMonitor=N,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.bkB;const ct=Number(ee);this.tabIndex=ct||0===ct?ct:null,this.buttonToggleGroup=a,this.appearance=ve&&ve.appearance?ve.appearance:"standard"}ngOnInit(){const a=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+xb++,a&&(a._isPrechecked(this)?this.checked=!0:a._isSelected(this)!==this._checked&&a._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const a=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),a&&a._isSelected(this)&&a._syncButtonToggle(this,!1,!1,!0)}focus(a){this._buttonElement.nativeElement.focus(a)}_onButtonClick(){const a=!!this.isSingleSelector()||!this._checked;if(a!==this._checked&&(this._checked=a,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){const _=this.buttonToggleGroup._buttonToggles.find(C=>0===C.tabIndex);_&&(_.tabIndex=-1),this.tabIndex=0}this.change.emit(new by(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(vx,8),l.rXU(l.gRc),l.rXU(l.aKT),l.rXU(Su.FN),l.kS0("tabindex"),l.rXU(yx,8))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-button-toggle"]],viewQuery:function(_,C){if(1&_&&l.GBs(yb,5),2&_){let N;l.mGM(N=l.lsd())&&(C._buttonElement=N.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(_,C){1&_&&l.bIt("focus",function(){return C.focus()}),2&_&&(l.BMQ("aria-label",null)("aria-labelledby",null)("id",C.id)("name",null),l.AVh("mat-button-toggle-standalone",!C.buttonToggleGroup)("mat-button-toggle-checked",C.checked)("mat-button-toggle-disabled",C.disabled)("mat-button-toggle-appearance-standard","standard"===C.appearance))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",l.L39],appearance:"appearance",checked:[2,"checked","checked",l.L39],disabled:[2,"disabled","disabled",l.L39]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[l.GFd,l.aNF],ngContentSelectors:_x,decls:8,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(_,C){if(1&_){const N=l.RV6();l.NAR(),l.j41(0,"button",1,0),l.bIt("click",function(){return l.eBV(N),l.Njj(C._onButtonClick())}),l.j41(2,"span",2),l.DNE(3,vb,1,1,"mat-pseudo-checkbox",3)(4,bb,1,1,"mat-pseudo-checkbox",3),l.SdG(5),l.k0s()(),l.nrm(6,"span",4)(7,"span",5)}if(2&_){const N=l.sdS(1);l.Y8G("id",C.buttonId)("disabled",C.disabled||null),l.BMQ("role",C.isSingleSelector()?"radio":"button")("tabindex",C.disabled?-1:C.tabIndex)("aria-pressed",C.isSingleSelector()?null:C.checked)("aria-checked",C.isSingleSelector()?C.checked:null)("name",C._getButtonName())("aria-label",C.ariaLabel)("aria-labelledby",C.ariaLabelledby),l.R7$(3),l.vxM(C.buttonToggleGroup&&C.checked&&!C.buttonToggleGroup.multiple&&!C.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),l.R7$(),l.vxM(C.buttonToggleGroup&&C.checked&&C.buttonToggleGroup.multiple&&!C.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),l.R7$(3),l.Y8G("matRippleTrigger",N)("matRippleDisabled",C.disableRipple||C.disabled)}},dependencies:[Zr.r6,Zr.wg],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-standard-button-toggle-selected-state-text-color )}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-legacy-button-toggle-selected-state-text-color )}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-legacy-button-toggle-disabled-state-text-color )}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font);font-size:var(--mat-standard-button-toggle-label-text-size);line-height:var(--mat-standard-button-toggle-label-text-line-height);font-weight:var(--mat-standard-button-toggle-label-text-weight);letter-spacing:var(--mat-standard-button-toggle-label-text-tracking)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-standard-button-toggle-disabled-selected-state-text-color )}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape);border-bottom-right-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape);border-bottom-left-radius:var(--mat-standard-button-toggle-shape)}"],encapsulation:2,changeDetection:0})}return m})(),bx=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Zr.yE,Zr.pZ,xy,Zr.yE]})}return m})();const xx=()=>[15],pE=(m,w)=>[m,w],wx=()=>({"circle-radius":8,"circle-color":"rgba(55,148,179,1)"}),fE=()=>({"line-color":"#877b59","line-width":1});let Eb=(()=>{class m{constructor(){this.layouts={contours:{visibility:"visible","line-join":"round","line-cap":"round"},museums:{visibility:"visible"}}}toggleLayer(a){this.layouts[a.value]={...this.layouts[a.value],visibility:"visible"===this.layouts[a.value].visibility?"none":"visible"}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","museums","url","mapbox://mapbox.2opop9hr"],["id","contours","url","mapbox://mapbox.mapbox-terrain-v2"],["id","museums","type","circle","source","museums","sourceLayer","museum-cusco",3,"layout","paint"],["id","contours","type","line","source","contours","sourceLayer","contour",3,"layout","paint"],[1,"menu"],["value","contours",3,"change","checked"],["value","museums",3,"change","checked"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.nrm(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.k0s(),l.j41(5,"div",5)(6,"mat-button-toggle",6),l.bIt("change",function(ee){return C.toggleLayer(ee)}),l.EFF(7,"contours"),l.k0s(),l.j41(8,"mat-button-toggle",7),l.bIt("change",function(ee){return C.toggleLayer(ee)}),l.EFF(9,"museums"),l.k0s()()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(10,xx))("center",l.l_i(11,pE,-71.97722138410576,-13.517379300798098)),l.R7$(3),l.Y8G("layout",C.layouts.museums)("paint",l.lJ4(14,wx)),l.R7$(),l.Y8G("layout",C.layouts.contours)("paint",l.lJ4(15,fE)),l.R7$(2),l.Y8G("checked",!0),l.R7$(2),l.Y8G("checked",!0))},dependencies:[tr,oo,Yl,xy,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]})}return m})();const Ex=()=>[12],Cb=m=>[m,38.897],iT=()=>({padding:20}),rT=()=>({"line-color":"#BF93E4","line-width":5}),Cx=()=>({"line-join":"round","line-cap":"round"});let Tx=(()=>{class m{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const a=this.source.data.features[0].geometry.coordinates;this.bounds=a.reduce((_,C)=>_.extend(C),new te.LngLatBounds(a[0],a[0]))}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.bIt("click",function(){return C.zoomToBounds()}),l.EFF(3," Zoom to bounds "),l.k0s()(),l.nrm(4,"mgl-layer",2),l.k0s()),2&_&&(l.Aen("mapbox://styles/mapbox/light-v9"),l.Y8G("zoom",l.lJ4(9,Ex))("center",l.eq3(10,Cb,-77.0214))("fitBounds",C.bounds)("fitBoundsOptions",l.lJ4(12,iT)),l.R7$(4),l.Y8G("source",C.source)("paint",l.lJ4(13,rT))("layout",l.lJ4(14,Cx)))},dependencies:[tr,oo,Lo,Od.$z,Gi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return m})(),Tb=(()=>{class m{constructor(a){this.router=a}canActivate(a){return!!Px[0].children?.some(_=>_.path===a.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(ue.Ix))};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();function Mb(){return Math.random().toString(36).substring(7)}function wf(m){var w="";return m?(m.forceEmbedLayout&&(w+="embed=1"),m.clickToLoad&&(w+=(w.length?"&":"")+"ctl=1"),m.openFile&&(w+=(w.length?"&":"")+"file="+m.openFile),!m.view||"preview"!==m.view&&"editor"!==m.view||(w+=(w.length?"&":"")+"view="+m.view),m.hideExplorer&&(w+=(w.length?"&":"")+"hideExplorer=1"),m.hideNavigation&&(w+=(w.length?"&":"")+"hideNavigation=1;"),m.hideDevTools&&(w+=(w.length?"&":"")+"hidedevtools=1"),"number"==typeof m.devToolsHeight&&m.devToolsHeight>0&&m.devToolsHeight<100&&(w+=(w.length?"&":"")+"devtoolsheight="+m.devToolsHeight),w.length?"?"+w:w):w}function wy(m,w,a){if(null===m.parentNode)throw new Error("Invalid Element");w.id=m.id,function oT(m,w){w&&(w.hasOwnProperty("height")&&(m.height=""+w.height),w.hasOwnProperty("width")&&(m.width=""+w.width)),m.height||(m.height="300"),m.width||m.setAttribute("style","width:100%;")}(w,a),m.parentNode.replaceChild(w,m)}function Ey(m){if("string"==typeof m){var w=document.getElementById(m);if(null!==w)return w}else if(m instanceof HTMLElement)return m;throw new Error("Invalid Element")}function Sb(m){return m&&!1===m.newWindow?"_self":"_blank"}var mE=function(m){var w=this;this.pending={},this.port=m,this.port.onmessage=function(a){if(a.data.payload.__reqid){var _=a.data.payload.__reqid,C=a.data.payload.__success;if(w.pending[_]){if(delete a.data.payload.__reqid,delete a.data.payload.__success,C){var N=0===Object.keys(a.data.payload).length&&a.data.payload.constructor===Object?null:a.data.payload;w.pending[_].resolve(N)}else w.pending[_].reject(a.data.payload.error?a.data.type+": "+a.data.payload.error:a.data.type);delete w.pending[_]}}}};mE.prototype.request=function(m){var w=this,a=Mb();return new Promise(function(_,C){w.pending[a]={resolve:_,reject:C},m.payload.__reqid=a,w.port.postMessage(m)})};var Ib=function(m,w){var a=this;this.rdc=new mE(m),this.preview={},Object.defineProperty(this.preview,"origin",{value:w.previewOrigin,writable:!1}),this.editor={openFile:function(_){return a.rdc.request({type:"SDK_OPEN_FILE",payload:{path:_}})}}};Ib.prototype.applyFsDiff=function(m){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:m})},Ib.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Ib.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var Ab=[],Dx=function(m){var w=this;this.id=Mb(),this.element=m,this.pending=new Promise(function(a,_){var C=function(Dt){Dt.data.action&&"SDK_INIT_SUCCESS"===Dt.data.action&&Dt.data.id===w.id&&(w.vm=new Ib(Dt.ports[0],Dt.data.payload),a(w.vm),ee())},N=function(){w.element.contentWindow&&w.element.contentWindow.postMessage({action:"SDK_INIT",id:w.id},"*")};function ee(){window.clearInterval(ct),window.removeEventListener("message",C)}window.addEventListener("message",C),N();var ve=0,ct=window.setInterval(function(){if(w.vm)ee();else{if(ve>=20)return ee(),_("Timeout: Unable to establish a connection with the StackBlitz VM"),void Ab.forEach(function(Dt,dn){Dt.id===w.id&&Ab.splice(dn,1)});ve++,N()}},500)}),Ab.push(this)},Mx=["typescript","create-react-app","angular-cli","javascript","polymer"],_E="https://stackblitz.com/run";function mp(m,w){var a=document.createElement("input");return a.type="hidden",a.name=m,a.value=w,a}function kb(m){-1===Mx.indexOf(m.template)&&console.warn("Unsupported project template, must be one of: "+Mx.join(", "));var w=document.createElement("form");return w.method="POST",w.setAttribute("style","display:none;"),w.appendChild(mp("project[title]",m.title)),w.appendChild(mp("project[description]",m.description)),w.appendChild(mp("project[template]",m.template)),m.tags&&m.tags.forEach(function(a){w.appendChild(mp("project[tags][]",a))}),m.dependencies&&w.appendChild(mp("project[dependencies]",JSON.stringify(m.dependencies))),m.settings&&w.appendChild(mp("project[settings]",JSON.stringify(m.settings))),Object.keys(m.files).forEach(function(a){w.appendChild(mp("project[files]["+a+"]",m.files[a]))}),w}var Ob={connect:function(m){if(!m||!m.contentWindow)return Promise.reject("Provided element is not an iframe.");var w=function(m){var w=m instanceof Element?"element":"id";return Ab.find(function(_){return _[w]===m})||null}(m);return w?w.pending:new Dx(m).pending},openGithubProject:function(m,w){window.open("https://stackblitz.com/github/"+m+wf(w),Sb(w))},openProject:function(m,w){!function aT(m,w){var a=kb(m);a.action=_E+wf(w),a.target=Sb(w),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}(m,w)},openProjectId:function(m,w){window.open("https://stackblitz.com/edit/"+m+wf(w),Sb(w))},embedGithubProject:function(m,w,a){var _=Ey(m),C=document.createElement("iframe");return C.src="https://stackblitz.com/github/"+w+wf(a),wy(_,C,a),Ob.connect(C)},embedProject:function(m,w,a){var _=Ey(m),C=function sT(m,w){var a=kb(m);return a.action=_E+wf(w),a.id="sb","<html><head><title></title></head><body>"+a.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(w,a),N=document.createElement("iframe");return wy(_,N,a),N.contentDocument&&N.contentDocument.write(C),Ob.connect(N)},embedProjectId:function(m,w,a){var _=Ey(m),C=document.createElement("iframe");return C.src="https://stackblitz.com/edit/"+w+wf(a),wy(_,C,a),Ob.connect(C)}};const lT=Ob;var Sx=H(7468),cT=H(6648),Ix=H(4668),uT=H(980),yE=H(7673),Rh=H(1626);const Sm="app/demo/examples/";let vE=(()=>{class m{constructor(a){this.http=a,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(a){let _=this.fileCache.get(a);return _||(_=this.http.get(`${Sm}${a}.component.ts`,{responseType:"text"}).pipe((0,oa.n)(C=>this.loadAdditionnalFilesIfNecessary(C)),(0,Ix.t)(1)),this.fileCache.set(a,_),_)}loadAdditionnalFilesIfNecessary(a){const _=/'\.\/([\w-.]+\.\w+)'/g;let C;const N=[],ee={"src/demo.ts":a};for(;C=_.exec(a);)N.push(this.loadFile(C[1]));return N.length?(0,Sx.p)(N).pipe((0,Qe.T)(ve=>({...Object.assign({},...ve),...ee}))):(0,yE.of)(ee)}loadFile(a){let _=this.fileCache.get(a);return _||(_=this.http.get(`${Sm}${a}`,{responseType:"text"}).pipe((0,Qe.T)(C=>({[`src/${a}`]:C})),(0,Ix.t)(1)),this.fileCache.set(a,_),_)}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(Rh.Qq))};static#t=this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();const hT=["determinateSpinner"];function Ax(m,w){if(1&m&&(l.qSk(),l.j41(0,"svg",11),l.nrm(1,"circle",12),l.k0s()),2&m){const a=l.XpG();l.BMQ("viewBox",a._viewBox()),l.R7$(),l.xc7("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeCircumference()/2,"px")("stroke-width",a._circleStrokeWidth(),"%"),l.BMQ("r",a._circleRadius())}}const bE=new l.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function pT(){return{diameter:kx}}}),kx=100;let wE=(()=>{class m{get color(){return this._color||this._defaultColor}set color(a){this._color=a}constructor(a,_,C){this._elementRef=a,this._defaultColor="primary",this._value=0,this._diameter=kx,this._noopAnimations="NoopAnimations"===_&&!!C&&!C._forceAnimations,this.mode="mat-spinner"===a.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",C&&(C.color&&(this.color=this._defaultColor=C.color),C.diameter&&(this.diameter=C.diameter),C.strokeWidth&&(this.strokeWidth=C.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(a){this._value=Math.max(0,Math.min(100,a||0))}get diameter(){return this._diameter}set diameter(a){this._diameter=a||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(a){this._strokeWidth=a||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const a=2*this._circleRadius()+this.strokeWidth;return`0 0 ${a} ${a}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.aKT),l.rXU(l.bc$,8),l.rXU(bE))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(_,C){if(1&_&&l.GBs(hT,5),2&_){let N;l.mGM(N=l.lsd())&&(C._determinateCircle=N.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(_,C){2&_&&(l.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===C.mode?C.value:null)("mode",C.mode),l.HbH("mat-"+C.color),l.xc7("width",C.diameter,"px")("height",C.diameter,"px")("--mdc-circular-progress-size",C.diameter+"px")("--mdc-circular-progress-active-indicator-width",C.diameter+"px"),l.AVh("_mat-animation-noopable",C._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===C.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",l.Udg],diameter:[2,"diameter","diameter",l.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",l.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[l.GFd,l.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(_,C){if(1&_&&(l.DNE(0,Ax,2,8,"ng-template",null,0,l.C5r),l.j41(2,"div",2,1),l.qSk(),l.j41(4,"svg",3),l.nrm(5,"circle",4),l.k0s()(),l.joV(),l.j41(6,"div",5)(7,"div",6)(8,"div",7),l.eu8(9,8),l.k0s(),l.j41(10,"div",9),l.eu8(11,8),l.k0s(),l.j41(12,"div",10),l.eu8(13,8),l.k0s()()()),2&_){const N=l.sdS(1);l.R7$(4),l.BMQ("viewBox",C._viewBox()),l.R7$(),l.xc7("stroke-dasharray",C._strokeCircumference(),"px")("stroke-dashoffset",C._strokeDashOffset(),"px")("stroke-width",C._circleStrokeWidth(),"%"),l.BMQ("r",C._circleRadius()),l.R7$(4),l.Y8G("ngTemplateOutlet",N),l.R7$(2),l.Y8G("ngTemplateOutlet",N),l.R7$(2),l.Y8G("ngTemplateOutlet",N)}},dependencies:[lr.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return m})(),Ox=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[lr.MD,Zr.yE]})}return m})();const EE=["container"];function Rx(m,w){1&m&&(l.j41(0,"div",2),l.nrm(1,"mat-spinner")(2,"div"),l.k0s())}let fT=(()=>{class m{constructor(a,_,C,N,ee){this.zone=a,this.activatedRoute=_,this.demoFileLoaderService=C,this.http=N,this.ChangeDetectorRef=ee,this.loading=!0,this.projectbase$=(0,Sx.p)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,Ix.t)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,gc.M)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,oa.n)(a=>(0,Sx.p)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(a.demoUrl)])),(0,oa.n)(([a,_])=>(0,cT.H)(this.openExample(a,_)).pipe((0,uT.j)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(a,_){var C=this;return(0,X.A)(function*(){if(C.vm)return void(yield C.vm.applyFsDiff({create:_,destroy:[]}));const N=((m,w)=>({files:{"src/main.ts":m[0],"angular.json":m[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...w},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","mapbox-gl":"*","ngx-mapbox-gl":"*","@angular/cdk":"*","@angular/material":"*","@angular/animations":"*","@angular/forms":"*",url:"*",querystring:"*",events:"*","@types/mapbox-gl":"*","@types/supercluster":"*","@types/geojson":"*"}}))(a,_);yield C.zone.runOutsideAngular((0,X.A)(function*(){C.vm=yield lT.embedProject(C.stackblitzContainer.nativeElement,N,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}static#e=this.\u0275fac=function(_){return new(_||m)(l.rXU(l.SKi),l.rXU(ue.nX),l.rXU(vE),l.rXU(Rh.Qq),l.rXU(l.gRc))};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["ng-component"]],viewQuery:function(_,C){if(1&_&&l.GBs(EE,5),2&_){let N;l.mGM(N=l.lsd())&&(C.stackblitzContainer=N.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(_,C){1&_&&(l.nrm(0,"div",null,0),l.DNE(2,Rx,3,0,"div",1)),2&_&&(l.R7$(2),l.Y8G("ngIf",C.loading))},dependencies:[lr.bT,wE],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0})}return m})();var Ar=function(m){return m.STYLES="Styles",m.LAYERS="Layers",m.SOURCES="Sources",m.USER_INTERACTION="User interaction",m.CAMERA="Camera",m.CONTROLS_AND_OVERLAYS="Controls and overlays",m.PROJECTIONS="Projections",m}(Ar||{});const Px=[{path:"",component:Os,children:[{path:"edit/:demoUrl",component:fT,canActivate:[Tb]},{path:"display-map",component:Bw,data:{label:"Display a map",cat:Ar.STYLES}},{path:"custom-style-id",component:Lw,data:{label:"Display a map with a custom style",cat:Ar.STYLES}},{path:"set-style",component:_b,data:{label:"Change a map's style",cat:Ar.STYLES}},{path:"satellite-map",component:iE,data:{label:"Display a satellite map",cat:Ar.STYLES}},{path:"add-image-generated",component:hp,data:{label:"Add a generated icon to the map",cat:Ar.LAYERS}},{path:"add-image",component:yw,data:{label:"Add an icon to the map",cat:Ar.LAYERS}},{path:"toggle-layers",component:Eb,data:{label:"Show and hide layers",cat:Ar.LAYERS}},{path:"3d-buildings",component:Pc,data:{label:"Display 3d buildings",cat:Ar.LAYERS}},{path:"cluster",component:J_,data:{label:"Create and style clusters",cat:Ar.LAYERS}},{path:"heatmap",component:f1,data:{label:"Create a heatmap layer",cat:Ar.LAYERS}},{path:"geojson-line",component:Zv,data:{label:"Add a GeoJSON line",cat:Ar.LAYERS}},{path:"ngx-geojson-line",component:ax,data:{label:"[NGX] Add a GeoJSON line",cat:Ar.LAYERS}},{path:"custom-marker-icons",component:Ag,data:{label:"Add custom icons with Markers",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:sx,data:{label:"[NGX] Add custom icons with Markers",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:b1,data:{label:"Update a feature in realtime",cat:Ar.SOURCES}},{path:"live-update-image-source",component:eb,data:{label:"Update an image source in realtime",cat:Ar.SOURCES}},{path:"popup",component:eE,data:{label:"Display a popup",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:_y,data:{label:"Attach a popup to a marker instance",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:qw,data:{label:"View a fullscreen map",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:O1,data:{label:"Display map navigation controls",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:D1,data:{label:"Locate the user",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:vw,data:{label:"Change the default position for attribution",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:Vg,data:{label:"[NGX] Show scale information",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:ox,data:{label:"[NGX] Add a custom control",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:g1,data:{label:"Display a non-interactive map",cat:Ar.USER_INTERACTION}},{path:"language-switch",component:_1,data:{label:"Change a map's language",cat:Ar.USER_INTERACTION}},{path:"center-on-symbol",component:ww,data:{label:"Center the map on a clicked symbol",cat:Ar.USER_INTERACTION}},{path:"ngx-drag-a-point",component:q1,data:{label:"[NGX] Create a draggable point",cat:Ar.USER_INTERACTION}},{path:"drag-a-marker",component:Kw,data:{label:"Create a draggable marker",cat:Ar.USER_INTERACTION}},{path:"hover-styles",component:Fg,data:{label:"Create a hover effect",cat:Ar.USER_INTERACTION}},{path:"popup-on-click",component:J1,data:{label:"Display a popup on click",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:Tx,data:{label:"Fit to the bounds of a LineString",cat:Ar.USER_INTERACTION}},{path:"cluster-html",component:Dw,data:{label:"Display HTML clusters with custom properties",cat:Ar.LAYERS}},{path:"ngx-cluster-html",component:X1,data:{label:"[NGX] Display HTML clusters with custom properties",cat:Ar.LAYERS}},{path:"polygon-popup-on-click",component:Ug,data:{label:"Show polygon information on click",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Fv,data:{label:"Generate and add a missing icon to the map",cat:Ar.STYLES}},{path:"custom-attribution",component:Rw,data:{label:"Add custom attributions",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:Cm,data:{label:"Add custom localization for controls",cat:Ar.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:I1,data:{label:"Marker alignment options",cat:Ar.CAMERA}},{path:"map-projection",component:tb,data:{label:"Display a web map using an alternate projection",cat:Ar.PROJECTIONS}},{path:"**",redirectTo:"display-map"}]}],CE=()=>[2],Pb=[{path:"",component:(()=>{class m{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:a=>a}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const a=this.center[0];0===a?this.center=[90,0]:90===a?this.center=[180,0]:180===a?this.center=[-90,0]:-90===a&&(this.center=[0,0])}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275cmp=l.VBU({type:m,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"mapLoad","moveEnd","zoom","center","centerWithPanTo","panToOptions","interactive"],[1,"main"],["svgIcon","ngx-mapbox-gl-red",1,"logo"]],template:function(_,C){1&_&&(l.j41(0,"mgl-map",0),l.bIt("mapLoad",function(){return C.moveCenter()})("moveEnd",function(){return C.moveCenter()}),l.k0s(),l.j41(1,"div",1),l.nrm(2,"mat-icon",2),l.j41(3,"h1"),l.EFF(4,"Angular binding of mapbox-gl-js"),l.k0s()()),2&_&&(l.Aen("mapbox://styles/mapbox/streets-v9"),l.Y8G("zoom",l.lJ4(7,CE))("center",C.center)("centerWithPanTo",!0)("panToOptions",C.panToOptions)("interactive",!1))},dependencies:[tr,ge.An],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]})}return m})(),pathMatch:"full"}],ME=[{path:"",component:H(5459).C,children:[{path:"demo",children:Px},...Pb,{path:"doc",loadChildren:()=>H.e(259).then(H.bind(H,9259)).then(m=>m.DocModule)}]},{path:"**",redirectTo:""}];let Cy=(()=>{class m{constructor(a,_){a.addSvgIcon("ngx-mapbox-gl",_.bypassSecurityTrustResourceUrl("assets/ngx-mapbox-gl.svg")),a.addSvgIcon("ngx-mapbox-gl-red",_.bypassSecurityTrustResourceUrl("assets/ngx-mapbox-gl-red.svg")),a.addSvgIcon("github",_.bypassSecurityTrustResourceUrl("assets/github.svg"))}static#e=this.\u0275fac=function(_){return new(_||m)(l.KVO(ge.tp),l.KVO(D.up))};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[D.Bb,ra,ge.m_,ue.iI.forRoot(ME),Kn.withConfig({accessToken:"pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg"}),V.R]})}return m})(),SE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({providers:[Tb,(0,Rh.$R)((0,Rh.Sx)())],imports:[ue.iI,lr.MD,_s.YN,Kn,V.R,lE,bx,Od.Hl,c,Wv,Ox,Re,ge.m_,Wo,$1,ea]})}return m})(),IE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m});static#n=this.\u0275inj=l.G2t({imports:[Kn,ge.m_]})}return m})(),AE=(()=>{class m{static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275mod=l.$C({type:m,bootstrap:[h]});static#n=this.\u0275inj=l.G2t({imports:[ue.iI,Cy,IE,SE]})}return m})();(0,l.SmG)(),D.sG().bootstrapModule(AE).catch(m=>console.error(m))},1247:function($n){$n.exports=function(){"use strict";var Tt,H,D;function l(h,ge){if(Tt)if(H){var Te="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Tt+")(sharedChunk); ("+H+")(sharedChunk); self.onerror = null;",nt={};Tt(nt),D=ge(nt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(D.workerUrl=window.URL.createObjectURL(new Blob([Te],{type:"text/javascript"})))}else H=ge;else Tt=ge}return l(0,function(h){var ge=typeof self<"u"?self:{},Te=nt;function nt(r,t,s,c){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=c,this.p2x=s,this.p2y=c}nt.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},nt.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},nt.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},nt.prototype.solveCurveX=function(r,t){var s,c,p,y,b;for(void 0===t&&(t=1e-6),p=r,b=0;b<8;b++){if(y=this.sampleCurveX(p)-r,Math.abs(y)<t)return p;var T=this.sampleCurveDerivativeX(p);if(Math.abs(T)<1e-6)break;p-=y/T}if((p=r)<(s=0))return s;if(p>(c=1))return c;for(;s<c;){if(y=this.sampleCurveX(p),Math.abs(y-r)<t)return p;r>y?s=p:c=p,p=.5*(c-s)+s}return p},nt.prototype.solve=function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))};var ke=Ve;function Ve(r,t){this.x=r,this.y=t}Ve.prototype={clone:function(){return new Ve(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,s=r.y-this.y;return t*t+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),s=Math.sin(r),c=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=c,this},_rotateAround:function(r,t){var s=Math.cos(r),c=Math.sin(r),p=t.y+c*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-c*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ve.convert=function(r){return r instanceof Ve?r:Array.isArray(r)?new Ve(r[0],r[1]):r};const st=Math.PI/180,rt=180/Math.PI;function ut(r){return r*st}function Ot(r){return r*rt}const Mt=[[0,0],[1,0],[1,1],[0,1]];function bt(r){if(r<=0)return 0;if(r>=1)return 1;const t=r*r,s=t*r;return 4*(r<.5?s:3*(r-t)+s-.75)}function St(r,t,s,c){const p=new Te(r,t,s,c);return function(y){return p.solve(y)}}const zt=St(.25,.1,.25,1);function Rt(r,t,s){return Math.min(s,Math.max(t,r))}function On(r,t,s){return(s=Rt((s-r)/(t-r),0,1))*s*(3-2*s)}function An(r,t,s){const c=s-t,p=((r-t)%c+c)%c+t;return p===t?s:p}function Zt(r,t,s){if(!r.length)return s(null,[]);let c=r.length;const p=new Array(r.length);let y=null;r.forEach((b,T)=>{t(b,(I,A)=>{I&&(y=I),p[T]=A,0==--c&&s(y,p)})})}function At(r){const t=[];for(const s in r)t.push(r[s]);return t}function dt(r,...t){for(const s of t)for(const c in s)r[c]=s[c];return r}let sn=1;function Gt(){return sn++}function Qt(){return function r(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function Wt(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function He(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function ft(r,t){r.forEach(s=>{t[s]&&(t[s]=t[s].bind(t))})}function Ut(r,t){return-1!==r.indexOf(t,r.length-t.length)}function on(r,t,s){const c={};for(const p in r)c[p]=t.call(s||this,r[p],p,r);return c}function Fn(r,t,s){const c={};for(const p in r)t.call(s||this,r[p],p,r)&&(c[p]=r[p]);return c}function mn(r){return Array.isArray(r)?r.map(mn):"object"==typeof r&&r?on(r,mn):r}const Sn={};function ai(r){Sn[r]||(typeof console<"u"&&console.warn(r),Sn[r]=!0)}function Nn(r,t,s){return(s.y-r.y)*(t.x-r.x)>(t.y-r.y)*(s.x-r.x)}function tn(r){let t=0;for(let s,c,p=0,y=r.length,b=y-1;p<y;b=p++)s=r[p],c=r[b],t+=(c.x-s.x)*(s.y+c.y);return t}function an(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pn(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,p,y)=>{const b=p||y;return t[c]=!b||b.toLowerCase(),""}),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t}let ui=null;function kt(r){if(null==ui){const t=r.navigator?r.navigator.userAgent:null;ui=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ui}function It(r){try{const t=ge[r];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function _n(r,t){return[r[4*t],r[4*t+1],r[4*t+2],r[4*t+3]]}const ni=ge.performance;function ri(r){const t=r?r.url.toString():void 0;return ni.getEntriesByName(t)}let fi,wt,qt,yn;const gi={now:()=>void 0!==qt?qt:ge.performance.now(),setNow(r){qt=r},restoreNow(){qt=void 0},frame(r){const t=ge.requestAnimationFrame(r);return{cancel:()=>ge.cancelAnimationFrame(t)}},getImageData(r,t=0){const{width:s,height:c}=r;yn||(yn=ge.document.createElement("canvas"));const p=yn.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return(s>yn.width||c>yn.height)&&(yn.width=s,yn.height=c),p.clearRect(-t,-t,s+2*t,c+2*t),p.drawImage(r,0,0,s,c),p.getImageData(-t,-t,s+2*t,c+2*t)},resolveURL:r=>(fi||(fi=ge.document.createElement("a")),fi.href=r,fi.href),get devicePixelRatio(){return ge.devicePixelRatio},get prefersReducedMotion(){return!!ge.matchMedia&&(null==wt&&(wt=ge.matchMedia("(prefers-reduced-motion: reduce)")),wt.matches)}};let yi;const di={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==yi){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{yi=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):r}catch{yi=r}}return yi},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Yi={supported:!1,testSupport:function(r){!zr&&Lr&&(rn?Ae(r):_r=r)}};let _r,Lr,zr=!1,rn=!1;function Ae(r){const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Lr),r.isContextLost())return;Yi.supported=!0}catch{}r.deleteTexture(t),zr=!0}ge.document&&(Lr=ge.document.createElement("img"),Lr.onload=function(){_r&&Ae(_r),_r=null,rn=!0},Lr.onerror=function(){zr=!0,_r=null},Lr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const qe="01",Ze="NO_ACCESS_TOKEN";function Pe(r){return 0===r.indexOf("mapbox:")}function Je(r){return di.API_URL_REGEX.test(r)}const Ue=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function vt(r){const t=r.match(Ue);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function nn(r){const t=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${t}`}function hn(r){if(!r)return null;const t=r.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(ge.atob(t[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Gn{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const s=hn(di.ACCESS_TOKEN);let c="";return c=s&&s.u?ge.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(p,y)=>String.fromCharCode(+("0x"+y)))):di.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${c}`:`mapbox.eventData:${c}`}fetchEventData(){const t=It("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(t)try{const p=ge.localStorage.getItem(s);p&&(this.eventData=JSON.parse(p));const y=ge.localStorage.getItem(c);y&&(this.anonId=y)}catch{ai("Unable to read from LocalStorage")}}saveEventData(){const t=It("localStorage"),s=this.getStorageKey(),c=this.getStorageKey("uuid");if(t)try{ge.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&ge.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{ai("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,s,c,p){if(!di.EVENTS_URL)return;const y=vt(di.EVENTS_URL);y.params.push(`access_token=${p||di.ACCESS_TOKEN||""}`);const b={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.9.2",skuId:qe,userId:this.anonId},T=s?dt(b,s):b,I={url:nn(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=be(I,A=>{this.pendingRequest=null,c(A),this.saveEventData(),this.processRequests(p)})}queueRequest(t,s){this.queue.push(t),this.processRequests(s)}}const si=new class extends Gn{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,t){di.EVENTS_URL&&di.ACCESS_TOKEN&&Array.isArray(r)&&r.some(s=>Pe(s)||Je(s))&&this.queueRequest(Date.now(),t)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=hn(di.ACCESS_TOKEN),s=t?t.u:di.ACCESS_TOKEN;let c=s!==this.eventData.tokenU;He(this.anonId)||(this.anonId=Qt(),c=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),b=new Date(p),T=(p-this.eventData.lastSuccess)/864e5;c=c||T>=1||T<-1||y.getDate()!==b.getDate()}else c=!0;c?this.postEvent(p,{"enabled.telemetry":!1},y=>{y||(this.eventData.lastSuccess=p,this.eventData.tokenU=s)},r):this.processRequests()}},ji=si.postTurnstileEvent.bind(si),ei=new class extends Gn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,t,s,c){this.skuToken=t,this.errorCb=c,di.EVENTS_URL&&(s||di.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},s):this.errorCb(new Error(Ze)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:s}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),He(this.anonId)||(this.anonId=Qt()),this.postEvent(s,{skuToken:this.skuToken},c=>{c?this.errorCb(c):t&&(this.success[t]=!0)},r))}},Mi=ei.postMapLoadEvent.bind(ei),fr=new class extends Gn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,t,s,c){if(!di.API_URL||!di.SESSION_PATH)return;const p=vt(di.API_URL+di.SESSION_PATH);p.params.push(`sku=${t||""}`),p.params.push(`access_token=${c||di.ACCESS_TOKEN||""}`);const y={url:nn(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=at(y,b=>{this.pendingRequest=null,s(b),this.saveEventData(),this.processRequests(c)})}getSessionAPI(r,t,s,c){this.skuToken=t,this.errorCb=c,di.SESSION_PATH&&di.API_URL&&(s||di.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},s):this.errorCb(new Error(Ze)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:s}=this.queue.shift();t&&this.success[t]||this.getSession(s,this.skuToken,c=>{c?this.errorCb(c):t&&(this.success[t]=!0)},r)}},no=fr.getSessionAPI.bind(fr),ln=new Set;let bi,$t=500,zn=50,Cn={};function Ct(r){const t=U(r);let s,c;t&&t.forEach(y=>{const b=y.split("=");"language"===b[0]?s=b[1]:"worldview"===b[0]&&(c=b[1])});let p="mapbox-tiles";return s&&(p+=`-${s}`),c&&(p+=`-${c}`),p}function ie(r){ge.caches&&!Cn[r]&&(Cn[r]=ge.caches.open(r))}function U(r){const t=r.indexOf("?");return t>0?r.slice(t+1).split("&"):[]}function K(r){const t=r.indexOf("?");if(t<0)return r;const s=U(r).filter(c=>{const p=c.split("=");return"language"===p[0]||"worldview"===p[0]});return s.length?`${r.slice(0,t)}?${s.join("&")}`:r.slice(0,t)}let de=1/0;const Ee={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ee);class Xe extends Error{constructor(t,s,c){401===s&&Je(c)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=s,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const De=an()?()=>self.worker&&self.worker.referrer:()=>("blob:"===ge.location.protocol?ge.parent:ge).location.href,me=function(r,t){if(!(/^file:/.test(s=r.url)||/^file:/.test(De())&&!/^\w+:/.test(s))){if(ge.fetch&&ge.Request&&ge.AbortController&&ge.Request.prototype.hasOwnProperty("signal"))return function(c,p){const y=new ge.AbortController,b=new ge.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:De(),signal:y.signal});let T=!1,I=!1;const A=(F=b.url).indexOf("sku=")>0&&Je(F);var F;"json"===c.type&&b.headers.set("Accept","application/json");const j=(J,le,fe)=>{if(I)return;if(J&&"SecurityError"!==J.message&&ai(J),le&&fe)return W(le);const Re=Date.now();ge.fetch(b).then(ze=>{if(ze.ok){const it=A?ze.clone():null;return W(ze,it,Re)}return p(new Xe(ze.statusText,ze.status,c.url))}).catch(ze=>{20!==ze.code&&p(new Error(ze.message))})},W=(J,le,fe)=>{("arrayBuffer"===c.type?J.arrayBuffer():"json"===c.type?J.json():J.text()).then(Re=>{I||(le&&fe&&function(ze,it,Qe){const pt=Ct(ze.url);if(ie(pt),!Cn[pt])return;const yt={status:it.status,statusText:it.statusText,headers:new ge.Headers};it.headers.forEach((Kt,fn)=>yt.headers.set(fn,Kt));const Et=Pn(it.headers.get("Cache-Control")||"");if(Et["no-store"])return;Et["max-age"]&&yt.headers.set("Expires",new Date(Qe+1e3*Et["max-age"]).toUTCString());const Ht=yt.headers.get("Expires");Ht&&(new Date(Ht).getTime()-Qe<42e4||function(Kt,fn){if(void 0===bi)try{new Response(new ReadableStream),bi=!0}catch{bi=!1}bi?fn(Kt.body):Kt.blob().then(fn)}(it,Kt=>{const fn=new ge.Response(Kt,yt);ie(pt),Cn[pt]&&Cn[pt].then(Mn=>Mn.put(K(ze.url),fn)).catch(Mn=>ai(Mn.message))}))}(b,le,fe),T=!0,p(null,Re,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(Re=>{I||p(new Error(Re.message))})};return A?function(J,le){const fe=Ct(J.url);if(ie(fe),!Cn[fe])return le(null);const Re=K(J.url);Cn[fe].then(ze=>{ze.match(Re).then(it=>{const Qe=function(pt){if(!pt)return!1;const yt=new Date(pt.headers.get("Expires")||0),Et=Pn(pt.headers.get("Cache-Control")||"");return yt>Date.now()&&!Et["no-cache"]}(it);ze.delete(Re),Qe&&ze.put(Re,it.clone()),le(null,it,Qe)}).catch(le)}).catch(le)}(b,j):j(null,null),{cancel:()=>{I=!0,T||y.abort()}}}(r,t);if(an()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t,void 0,!0)}var s;return function(c,p){const y=new ge.XMLHttpRequest;y.open(c.method||"GET",c.url,!0),"arrayBuffer"===c.type&&(y.responseType="arraybuffer");for(const b in c.headers)y.setRequestHeader(b,c.headers[b]);return"json"===c.type&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials="include"===c.credentials,y.onerror=()=>{p(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||0===y.status)&&null!==y.response){let b=y.response;if("json"===c.type)try{b=JSON.parse(y.response)}catch(T){return p(T)}p(null,b,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else p(new Xe(y.statusText,y.status,c.url))},y.send(c.body),{cancel:()=>y.abort()}}(r,t)},ne=function(r,t){return me(dt(r,{type:"arrayBuffer"}),t)},be=function(r,t){return me(dt(r,{method:"POST"}),t)},at=function(r,t){return me(dt(r,{method:"GET"}),t)};function Ge(r){const t=ge.document.createElement("a");return t.href=r,t.protocol===ge.document.location.protocol&&t.host===ge.document.location.host}const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ye,$e;ye=[],$e=0;const mt=function(r,t){if(Yi.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),$e>=di.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:r,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ye.push(y),y}$e++;let s=!1;const c=()=>{if(!s)for(s=!0,$e--;ye.length&&$e<di.MAX_PARALLEL_IMAGE_REQUESTS;){const y=ye.shift(),{requestParameters:b,callback:T,cancelled:I}=y;I||(y.cancel=mt(b,T).cancel)}},p=ne(r,(y,b,T,I)=>{c(),y?t(y):b&&(ge.createImageBitmap?function(A,F){const j=new ge.Blob([new Uint8Array(A)],{type:"image/png"});ge.createImageBitmap(j).then(W=>{F(null,W)}).catch(W=>{F(new Error(`Could not load image because of ${W.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(A,F)=>t(A,F,T,I)):function(A,F){const j=new ge.Image,W=ge.URL;j.onload=()=>{F(null,j),W.revokeObjectURL(j.src),j.onload=null,ge.requestAnimationFrame(()=>{j.src=Fe})},j.onerror=()=>F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const J=new ge.Blob([new Uint8Array(A)],{type:"image/png"});j.src=A.byteLength?W.createObjectURL(J):Fe}(b,(A,F)=>t(A,F,T,I)))});return{cancel:()=>{p.cancel(),c()}}};function Lt(r,t,s){s[r]&&-1!==s[r].indexOf(t)||(s[r]=s[r]||[],s[r].push(t))}function kn(r,t,s){if(s&&s[r]){const c=s[r].indexOf(t);-1!==c&&s[r].splice(c,1)}}class hi{constructor(t,s={}){dt(this,s),this.type=t}}class Bi extends hi{constructor(t,s={}){super("error",dt({error:t},s))}}class Ri{on(t,s){return this._listeners=this._listeners||{},Lt(t,s,this._listeners),this}off(t,s){return kn(t,s,this._listeners),kn(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Lt(t,s,this._oneTimeListeners),this):new Promise(c=>this.once(t,c))}fire(t,s){"string"==typeof t&&(t=new hi(t,s||{}));const c=t.type;if(this.listens(c)){t.target=this;const p=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const T of p)T.call(this,t);const y=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const T of y)kn(c,T,this._oneTimeListeners),T.call(this,t);const b=this._eventedParent;b&&(dt(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof Bi&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var xt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Yr(r,...t){for(const s of t)for(const c in s)r[c]=s[c];return r}function or(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Eo(r){if(Array.isArray(r))return r.map(Eo);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const s in r)t[s]=Eo(r[s]);return t}return or(r)}class Gs extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}var Io=Gs;class $s{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[c,p]of s)this.bindings[c]=p}concat(t){return new $s(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Hs=$s;const ya={kind:"null"},Hn={kind:"number"},Ui={kind:"string"},Li={kind:"boolean"},Xo={kind:"color"},Oe={kind:"object"},Be={kind:"value"},ot={kind:"collator"},Yt={kind:"formatted"},bn={kind:"resolvedImage"};function Dn(r,t){return{kind:"array",itemType:r,N:t}}function xn(r){if("array"===r.kind){const t=xn(r.itemType);return"number"==typeof r.N?`array<${t}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${t}>`}return r.kind}const Ti=[ya,Hn,Ui,Li,Xo,Yt,Oe,Dn(Be),bn];function _i(r,t){if("error"===t.kind)return null;if("array"===r.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!_i(r.itemType,t.itemType))&&("number"!=typeof r.N||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if("value"===r.kind)for(const s of Ti)if(!_i(s,t))return null}return`Expected ${xn(r)} but found ${xn(t)} instead.`}function wr(r,t){return t.some(s=>s.kind===r.kind)}function uo(r,t){return t.some(s=>"null"===s?null===r:"array"===s?Array.isArray(r):"object"===s?r&&!Array.isArray(r)&&"object"==typeof r:s===typeof r)}function Tr(r){var t={exports:{}};return r(t,t.exports),t.exports}var go=Tr(function(r,t){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(T){return(T=Math.round(T))<0?0:T>255?255:T}function p(T){return c("%"===T[T.length-1]?parseFloat(T)/100*255:parseInt(T))}function y(T){return(I="%"===T[T.length-1]?parseFloat(T)/100:parseFloat(T))<0?0:I>1?1:I;var I}function b(T,I,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?T+(I-T)*A*6:2*A<1?I:3*A<2?T+(I-T)*(2/3-A)*6:T}try{t.parseCSSColor=function(T){var I,A=T.replace(/ /g,"").toLowerCase();if(A in s)return s[A].slice();if("#"===A[0])return 4===A.length?(I=parseInt(A.substr(1),16))>=0&&I<=4095?[(3840&I)>>4|(3840&I)>>8,240&I|(240&I)>>4,15&I|(15&I)<<4,1]:null:7===A.length&&(I=parseInt(A.substr(1),16))>=0&&I<=16777215?[(16711680&I)>>16,(65280&I)>>8,255&I,1]:null;var F=A.indexOf("("),j=A.indexOf(")");if(-1!==F&&j+1===A.length){var W=A.substr(0,F),J=A.substr(F+1,j-(F+1)).split(","),le=1;switch(W){case"rgba":if(4!==J.length)return null;le=y(J.pop());case"rgb":return 3!==J.length?null:[p(J[0]),p(J[1]),p(J[2]),le];case"hsla":if(4!==J.length)return null;le=y(J.pop());case"hsl":if(3!==J.length)return null;var fe=(parseFloat(J[0])%360+360)%360/360,Re=y(J[1]),ze=y(J[2]),it=ze<=.5?ze*(Re+1):ze+Re-ze*Re,Qe=2*ze-it;return[c(255*b(Qe,it,fe+1/3)),c(255*b(Qe,it,fe)),c(255*b(Qe,it,fe-1/3)),le];default:return null}}return null}}catch{}});class sr{constructor(t,s,c,p=1){this.r=t,this.g=s,this.b=c,this.a=p}static parse(t){if(!t)return;if(t instanceof sr)return t;if("string"!=typeof t)return;const s=go.parseCSSColor(t);return s?new sr(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[t,s,c,p]=this.toArray();return`rgba(${Math.round(t)},${Math.round(s)},${Math.round(c)},${p})`}toArray(){const{r:t,g:s,b:c,a:p}=this;return 0===p?[0,0,0,0]:[255*t/p,255*s/p,255*c/p,p]}toArray01(){const{r:t,g:s,b:c,a:p}=this;return 0===p?[0,0,0,0]:[t/p,s/p,c/p,p]}toArray01PremultipliedAlpha(){const{r:t,g:s,b:c,a:p}=this;return[t,s,c,p]}}sr.black=new sr(0,0,0,1),sr.white=new sr(1,1,1,1),sr.transparent=new sr(0,0,0,0),sr.red=new sr(1,0,0,1),sr.blue=new sr(0,0,1,1);var ar=sr;class er{constructor(t,s,c){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Vr{constructor(t,s,c,p,y){this.text=t.normalize?t.normalize():t,this.image=s,this.scale=c,this.fontStack=p,this.textColor=y}}class Dr{constructor(t){this.sections=t}static fromString(t){return new Dr([new Vr(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof Dr?t:Dr.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const s of this.sections){if(s.image){t.push(["image",s.image.name]);continue}t.push(s.text);const c={};s.fontStack&&(c["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(c["font-scale"]=s.scale),s.textColor&&(c["text-color"]=["rgba"].concat(s.textColor.toArray())),t.push(c)}return t}}class Co{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Co({name:t,available:!1}):null}serialize(){return["image",this.name]}}function dr(r,t,s,c){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===c||"number"==typeof c&&c>=0&&c<=1?null:`Invalid rgba value [${[r,t,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof c?[r,t,s,c]:[r,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rs(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof ar||r instanceof er||r instanceof Dr||r instanceof Co)return!0;if(Array.isArray(r)){for(const t of r)if(!Rs(t))return!1;return!0}if("object"==typeof r){for(const t in r)if(!Rs(r[t]))return!1;return!0}return!1}function Or(r){if(null===r)return ya;if("string"==typeof r)return Ui;if("boolean"==typeof r)return Li;if("number"==typeof r)return Hn;if(r instanceof ar)return Xo;if(r instanceof er)return ot;if(r instanceof Dr)return Yt;if(r instanceof Co)return bn;if(Array.isArray(r)){const t=r.length;let s;for(const c of r){const p=Or(c);if(s){if(s===p)continue;s=Be;break}s=p}return Dn(s||Be,t)}return Oe}function Yo(r){const t=typeof r;return null===r?"":"string"===t||"number"===t||"boolean"===t?String(r):r instanceof ar||r instanceof Dr||r instanceof Co?r.toString():JSON.stringify(r)}class Ws{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(2!==t.length)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Rs(t[1]))return s.error("invalid value");const c=t[1];let p=Or(c);const y=s.expectedType;return"array"!==p.kind||0!==p.N||!y||"array"!==y.kind||"number"==typeof y.N&&0!==y.N||(p=y),new Ws(p,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ar?["rgba"].concat(this.value.toArray()):this.value instanceof Dr?this.value.serialize():this.value}}var Xs=Ws,Go=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const $l={string:Ui,number:Hn,boolean:Li,object:Oe};class _l{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let c,p=1;const y=t[0];if("array"===y){let T,I;if(t.length>2){const A=t[1];if("string"!=typeof A||!(A in $l)||"object"===A)return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=$l[A],p++}else T=Be;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=t[2],p++}c=Dn(T,I)}else c=$l[y];const b=[];for(;p<t.length;p++){const T=s.parse(t[p],p,Be);if(!T)return null;b.push(T)}return new _l(c,b)}evaluate(t){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(t);if(!_i(this.type,Or(c)))return c;if(s===this.args.length-1)throw new Go(`Expected value to be of type ${xn(this.type)}, but found ${xn(Or(c))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,s=[t.kind];if("array"===t.kind){const c=t.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){s.push(c.kind);const p=t.N;("number"==typeof p||this.args.length>1)&&s.push(p)}}return s.concat(this.args.map(c=>c.serialize()))}}var La=_l;class qa{constructor(t){this.type=Yt,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&"object"==typeof c)return s.error("First argument must be an image or text section.");const p=[];let y=!1;for(let b=1;b<=t.length-1;++b){const T=t[b];if(y&&"object"==typeof T&&!Array.isArray(T)){y=!1;let I=null;if(T["font-scale"]&&(I=s.parse(T["font-scale"],1,Hn),!I))return null;let A=null;if(T["text-font"]&&(A=s.parse(T["text-font"],1,Dn(Ui)),!A))return null;let F=null;if(T["text-color"]&&(F=s.parse(T["text-color"],1,Xo),!F))return null;const j=p[p.length-1];j.scale=I,j.font=A,j.textColor=F}else{const I=s.parse(t[b],1,Be);if(!I)return null;const A=I.type.kind;if("string"!==A&&"value"!==A&&"null"!==A&&"resolvedImage"!==A)return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:I,scale:null,font:null,textColor:null})}}return new qa(p)}evaluate(t){return new Dr(this.sections.map(s=>{const c=s.content.evaluate(t);return Or(c)===bn?new Vr("",c,null,null,null):new Vr(Yo(c),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null)}))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const s of this.sections){t.push(s.content.serialize());const c={};s.scale&&(c["font-scale"]=s.scale.serialize()),s.font&&(c["text-font"]=s.font.serialize()),s.textColor&&(c["text-color"]=s.textColor.serialize()),t.push(c)}return t}}class uc{constructor(t){this.type=bn,this.input=t}static parse(t,s){if(2!==t.length)return s.error("Expected two arguments.");const c=s.parse(t[1],1,Ui);return c?new uc(c):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),c=Co.fromString(s);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(s)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ru={"to-boolean":Li,"to-color":Xo,"to-number":Hn,"to-string":Ui};class ou{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const c=t[0];if(("to-boolean"===c||"to-string"===c)&&2!==t.length)return s.error("Expected one argument.");const p=Ru[c],y=[];for(let b=1;b<t.length;b++){const T=s.parse(t[b],b,Be);if(!T)return null;y.push(T)}return new ou(p,y)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let s,c;for(const p of this.args){if(s=p.evaluate(t),c=null,s instanceof ar)return s;if("string"==typeof s){const y=t.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:dr(s[0],s[1],s[2],s[3]),!c))return new ar(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Go(c||`Could not parse color from value '${"string"==typeof s?s:String(JSON.stringify(s))}'`)}if("number"===this.type.kind){let s=null;for(const c of this.args){if(s=c.evaluate(t),null===s)return 0;const p=Number(s);if(!isNaN(p))return p}throw new Go(`Could not convert ${JSON.stringify(s)} to number.`)}return"formatted"===this.type.kind?Dr.fromString(Yo(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Co.fromString(Yo(this.args[0].evaluate(t))):Yo(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new qa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new uc(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(s=>{t.push(s.serialize())}),t}}var yl=ou;const Ps=["Unknown","Point","LineString","Polygon"];var Pu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ps[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:s,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*t-r[0])+this.featureDistanceData.bearing[1]*(c*t-r[1])}return 0}parseColor(r){let t=this._parseColorCache[r];return t||(t=this._parseColorCache[r]=ar.parse(r)),t}};class Ls{constructor(t,s,c,p){this.name=t,this.type=s,this._evaluate=c,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,s){const c=t[0],p=Ls.definitions[c];if(!p)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,T=b.filter(([A])=>!Array.isArray(A)||A.length===t.length-1);let I=null;for(const[A,F]of T){I=new fc(s.registry,s.path,null,s.scope);const j=[];let W=!1;for(let J=1;J<t.length;J++){const le=t[J],fe=Array.isArray(A)?A[J-1]:A.type,Re=I.parse(le,1+j.length,fe);if(!Re){W=!0;break}j.push(Re)}if(!W)if(Array.isArray(A)&&A.length!==j.length)I.error(`Expected ${A.length} arguments, but found ${j.length} instead.`);else{for(let J=0;J<j.length;J++){const le=Array.isArray(A)?A[J]:A.type,fe=j[J];I.concat(J+1).checkSubtype(le,fe.type)}if(0===I.errors.length)return new Ls(c,y,F,j)}}if(1===T.length)s.errors.push(...I.errors);else{const A=(T.length?T:b).map(([j])=>{return W=j,Array.isArray(W)?`(${W.map(xn).join(", ")})`:`(${xn(W.type)}...)`;var W}).join(" | "),F=[];for(let j=1;j<t.length;j++){const W=s.parse(t[j],1+F.length);if(!W)return null;F.push(xn(W.type))}s.error(`Expected arguments of type ${A}, but found (${F.join(", ")}) instead.`)}return null}static register(t,s){Ls.definitions=s;for(const c in s)t[c]=Ls}}var va=Ls;class Cs{constructor(t,s,c){this.type=ot,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(2!==t.length)return s.error("Expected one argument.");const c=t[1];if("object"!=typeof c||Array.isArray(c))return s.error("Collator options argument must be an object.");const p=s.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,Li);if(!p)return null;const y=s.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,Li);if(!y)return null;let b=null;return c.locale&&(b=s.parse(c.locale,1,Ui),!b)?null:new Cs(p,y,b)}evaluate(t){return new er(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Ks=8192;function Hl(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function ba(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function Ko(r,t){const s=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(s*p*Ks),Math.round(c*p*Ks)]}function ta(r,t,s){const c=r[0]-t[0],p=r[1]-t[1],y=r[0]-s[0],b=r[1]-s[1];return c*b-y*p==0&&c*y<=0&&p*b<=0}function Wl(r,t){let s=!1;for(let b=0,T=t.length;b<T;b++){const I=t[b];for(let A=0,F=I.length;A<F-1;A++){if(ta(r,I[A],I[A+1]))return!1;(p=I[A])[1]>(c=r)[1]!=(y=I[A+1])[1]>c[1]&&c[0]<(y[0]-p[0])*(c[1]-p[1])/(y[1]-p[1])+p[0]&&(s=!s)}}var c,p,y;return s}function rs(r,t){for(let s=0;s<t.length;s++)if(Wl(r,t[s]))return!0;return!1}function xa(r,t,s,c){const p=c[0]-s[0],y=c[1]-s[1],b=(r[0]-s[0])*y-p*(r[1]-s[1]),T=(t[0]-s[0])*y-p*(t[1]-s[1]);return b>0&&T<0||b<0&&T>0}function Zs(r,t,s){for(const A of s)for(let F=0;F<A.length-1;++F)if((T=[(b=A[F+1])[0]-(y=A[F])[0],b[1]-y[1]])[0]*(I=[(p=t)[0]-(c=r)[0],p[1]-c[1]])[1]-T[1]*I[0]!=0&&xa(c,p,y,b)&&xa(y,b,c,p))return!0;var c,p,y,b,T,I;return!1}function wa(r,t){for(let s=0;s<r.length;++s)if(!Wl(r[s],t))return!1;for(let s=0;s<r.length-1;++s)if(Zs(r[s],r[s+1],t))return!1;return!0}function dc(r,t){for(let s=0;s<t.length;s++)if(wa(r,t[s]))return!0;return!1}function Ya(r,t,s){const c=[];for(let p=0;p<r.length;p++){const y=[];for(let b=0;b<r[p].length;b++){const T=Ko(r[p][b],s);Hl(t,T),y.push(T)}c.push(y)}return c}function ds(r,t,s){const c=[];for(let p=0;p<r.length;p++){const y=Ya(r[p],t,s);c.push(y)}return c}function hc(r,t,s,c){if(r[0]<s[0]||r[0]>s[2]){const p=.5*c;let y=r[0]-s[0]>p?-c:s[0]-r[0]>p?c:0;0===y&&(y=r[0]-s[2]>p?-c:s[2]-r[0]>p?c:0),r[0]+=y}Hl(t,r)}function pc(r,t,s,c){const p=Math.pow(2,c.z)*Ks,y=[c.x*Ks,c.y*Ks],b=[];if(!r)return b;for(const T of r)for(const I of T){const A=[I.x+y[0],I.y+y[1]];hc(A,t,s,p),b.push(A)}return b}function Ea(r,t,s,c){const p=Math.pow(2,c.z)*Ks,y=[c.x*Ks,c.y*Ks],b=[];if(!r)return b;for(const I of r){const A=[];for(const F of I){const j=[F.x+y[0],F.y+y[1]];Hl(t,j),A.push(j)}b.push(A)}if(t[2]-t[0]<=p/2){(T=t)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const I of b)for(const A of I)hc(A,t,s,p)}var T;return b}class na{constructor(t,s){this.type=Li,this.geojson=t,this.geometries=s}static parse(t,s){if(2!==t.length)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Rs(t[1])){const c=t[1];if("FeatureCollection"===c.type)for(let p=0;p<c.features.length;++p){const y=c.features[p].geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new na(c,c.features[p].geometry)}else if("Feature"===c.type){const p=c.geometry.type;if("Polygon"===p||"MultiPolygon"===p)return new na(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new na(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(s,c){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(!b)return!1;if("Polygon"===c.type){const T=Ya(c.coordinates,y,b),I=pc(s.geometry(),p,y,b);if(!ba(p,y))return!1;for(const A of I)if(!Wl(A,T))return!1}if("MultiPolygon"===c.type){const T=ds(c.coordinates,y,b),I=pc(s.geometry(),p,y,b);if(!ba(p,y))return!1;for(const A of I)if(!rs(A,T))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(s,c){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(!b)return!1;if("Polygon"===c.type){const T=Ya(c.coordinates,y,b),I=Ea(s.geometry(),p,y,b);if(!ba(p,y))return!1;for(const A of I)if(!wa(A,T))return!1}if("MultiPolygon"===c.type){const T=ds(c.coordinates,y,b),I=Ea(s.geometry(),p,y,b);if(!ba(p,y))return!1;for(const A of I)if(!dc(A,T))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var vl=na;function Qa(r){if(r instanceof va&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof vl)return!1;let t=!0;return r.eachChild(s=>{t&&!Qa(s)&&(t=!1)}),t}function hs(r){if(r instanceof va&&"feature-state"===r.name)return!1;let t=!0;return r.eachChild(s=>{t&&!hs(s)&&(t=!1)}),t}function Zo(r,t){if(r instanceof va&&t.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild(c=>{s&&!Zo(c,t)&&(s=!1)}),s}class wn{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(2!==t.length||"string"!=typeof t[1])return s.error("'var' expression requires exactly one string literal argument.");const c=t[1];return s.scope.has(c)?new wn(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Fs=wn;class Ts{constructor(t,s=[],c,p=new Hs,y=[]){this.registry=t,this.path=s,this.key=s.map(b=>`[${b}]`).join(""),this.scope=p,this.errors=y,this.expectedType=c}parse(t,s,c,p,y={}){return s?this.concat(s,c,p)._parse(t,y):this._parse(t,y)}_parse(t,s){function c(p,y,b){return"assert"===b?new La(y,[p]):"coerce"===b?new yl(y,[p]):p}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if("string"!=typeof p)return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[p];if(y){let b=y.parse(t,this);if(!b)return null;if(this.expectedType){const T=this.expectedType,I=b.type;if("string"!==T.kind&&"number"!==T.kind&&"boolean"!==T.kind&&"object"!==T.kind&&"array"!==T.kind||"value"!==I.kind)if("color"!==T.kind&&"formatted"!==T.kind&&"resolvedImage"!==T.kind||"value"!==I.kind&&"string"!==I.kind){if(this.checkSubtype(T,I))return null}else b=c(b,T,s.typeAnnotation||"coerce");else b=c(b,T,s.typeAnnotation||"assert")}if(!(b instanceof Xs)&&"resolvedImage"!==b.type.kind&&bl(b)){const T=new Pu;try{b=new Xs(b.type,b.evaluate(T))}catch(I){return this.error(I.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,c){const p="number"==typeof t?this.path.concat(t):this.path,y=c?this.scope.concat(c):this.scope;return new Ts(this.registry,p,s||null,y,this.errors)}error(t,...s){const c=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Io(c,t))}checkSubtype(t,s){const c=_i(t,s);return c&&this.error(c),c}}var fc=Ts;function bl(r){if(r instanceof Fs)return bl(r.boundExpression);if(r instanceof va&&"error"===r.name||r instanceof Cs||r instanceof vl)return!1;const t=r instanceof yl||r instanceof La;let s=!0;return r.eachChild(c=>{s=t?s&&bl(c):s&&c instanceof Xs}),!!s&&Qa(r)&&Zo(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ca(r,t){const s=r.length-1;let c,p,y=0,b=s,T=0;for(;y<=b;)if(T=Math.floor((y+b)/2),c=r[T],p=r[T+1],c<=t){if(T===s||t<p)return T;y=T+1}else{if(!(c>t))throw new Go("Input is not a number.");b=T-1}return 0}class ps{constructor(t,s,c){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[p,y]of c)this.labels.push(p),this.outputs.push(y)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(t[1],1,Hn);if(!c)return null;const p=[];let y=null;s.expectedType&&"value"!==s.expectedType.kind&&(y=s.expectedType);for(let b=1;b<t.length;b+=2){const T=1===b?-1/0:t[b],I=t[b+1],A=b,F=b+1;if("number"!=typeof T)return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(p.length&&p[p.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const j=s.parse(I,F,y);if(!j)return null;y=y||j.type,p.push([T,j])}return new ps(y,c,p)}evaluate(t){const s=this.labels,c=this.outputs;if(1===s.length)return c[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return c[0].evaluate(t);const y=s.length;return p>=s[y-1]?c[y-1].evaluate(t):c[Ca(s,p)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&t.push(this.labels[s]),t.push(this.outputs[s].serialize());return t}}var Ns=ps;function Xi(r,t,s){return r*(1-s)+t*s}var os=Object.freeze({__proto__:null,number:Xi,color:function(r,t,s){return new ar(Xi(r.r,t.r,s),Xi(r.g,t.g,s),Xi(r.b,t.b,s),Xi(r.a,t.a,s))},array:function(r,t,s){return r.map((c,p)=>Xi(c,t[p],s))}});const wl=4/29,ia=6/29,Xl=3*ia*ia,ho=Math.PI/180,Lu=180/Math.PI;function Ta(r){return r>.008856451679035631?Math.pow(r,1/3):r/Xl+wl}function vr(r){return r>ia?r*r*r:Xl*(r-wl)}function Nc(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Ao(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Ja(r){const t=Ao(r.r),s=Ao(r.g),c=Ao(r.b),p=Ta((.4124564*t+.3575761*s+.1804375*c)/.95047),y=Ta((.2126729*t+.7151522*s+.072175*c)/1);return{l:116*y-16,a:500*(p-y),b:200*(y-Ta((.0193339*t+.119192*s+.9503041*c)/1.08883)),alpha:r.a}}function lr(r){let t=(r.l+16)/116,s=isNaN(r.a)?t:t+r.a/500,c=isNaN(r.b)?t:t-r.b/200;return t=1*vr(t),s=.95047*vr(s),c=1.08883*vr(c),new ar(Nc(3.2404542*s-1.5371385*t-.4985314*c),Nc(-.969266*s+1.8760108*t+.041556*c),Nc(.0556434*s-.2040259*t+1.0572252*c),r.alpha)}function su(r,t,s){const c=t-r;return r+s*(c>180||c<-180?c-360*Math.round(c/360):c)}const el={forward:Ja,reverse:lr,interpolate:function(r,t,s){return{l:Xi(r.l,t.l,s),a:Xi(r.a,t.a,s),b:Xi(r.b,t.b,s),alpha:Xi(r.alpha,t.alpha,s)}}},Ni={forward:function(r){const{l:t,a:s,b:c}=Ja(r),p=Math.atan2(c,s)*Lu;return{h:p<0?p+360:p,c:Math.sqrt(s*s+c*c),l:t,alpha:r.a}},reverse:function(r){const t=r.h*ho,s=r.c;return lr({l:r.l,a:Math.cos(t)*s,b:Math.sin(t)*s,alpha:r.alpha})},interpolate:function(r,t,s){return{h:su(r.h,t.h,s),c:Xi(r.c,t.c,s),l:Xi(r.l,t.l,s),alpha:Xi(r.alpha,t.alpha,s)}}};var Kl=Object.freeze({__proto__:null,lab:el,hcl:Ni});class qo{constructor(t,s,c,p,y){this.type=t,this.operator=s,this.interpolation=c,this.input=p,this.labels=[],this.outputs=[];for(const[b,T]of y)this.labels.push(b),this.outputs.push(T)}static interpolationFactor(t,s,c,p){let y=0;if("exponential"===t.name)y=au(s,t.base,c,p);else if("linear"===t.name)y=au(s,1,c,p);else if("cubic-bezier"===t.name){const b=t.controlPoints;y=new Te(b[0],b[1],b[2],b[3]).solve(au(s,1,c,p))}return y}static parse(t,s){let[c,p,y,...b]=t;if(!Array.isArray(p)||0===p.length)return s.error("Expected an interpolation type expression.",1);if("linear"===p[0])p={name:"linear"};else if("exponential"===p[0]){const A=p[1];if("number"!=typeof A)return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:A}}else{if("cubic-bezier"!==p[0])return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const A=p.slice(1);if(4!==A.length||A.some(F=>"number"!=typeof F||F<0||F>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:A}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Hn),!y)return null;const T=[];let I=null;"interpolate-hcl"===c||"interpolate-lab"===c?I=Xo:s.expectedType&&"value"!==s.expectedType.kind&&(I=s.expectedType);for(let A=0;A<b.length;A+=2){const F=b[A],j=b[A+1],W=A+3,J=A+4;if("number"!=typeof F)return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(T.length&&T[T.length-1][0]>=F)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const le=s.parse(j,J,I);if(!le)return null;I=I||le.type,T.push([F,le])}return"number"===I.kind||"color"===I.kind||"array"===I.kind&&"number"===I.itemType.kind&&"number"==typeof I.N?new qo(I,c,p,y,T):s.error(`Type ${xn(I)} is not interpolatable.`)}evaluate(t){const s=this.labels,c=this.outputs;if(1===s.length)return c[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return c[0].evaluate(t);const y=s.length;if(p>=s[y-1])return c[y-1].evaluate(t);const b=Ca(s,p),T=qo.interpolationFactor(this.interpolation,p,s[b],s[b+1]),I=c[b].evaluate(t),A=c[b+1].evaluate(t);return"interpolate"===this.operator?os[this.type.kind.toLowerCase()](I,A,T):"interpolate-hcl"===this.operator?Ni.reverse(Ni.interpolate(Ni.forward(I),Ni.forward(A),T)):el.reverse(el.interpolate(el.forward(I),el.forward(A),T))}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,t,this.input.serialize()];for(let c=0;c<this.labels.length;c++)s.push(this.labels[c],this.outputs[c].serialize());return s}}function au(r,t,s,c){const p=c-s,y=r-s;return 0===p?0:1===t?y/p:(Math.pow(t,y)-1)/(Math.pow(t,p)-1)}var ra=qo;class lu{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expectected at least one argument.");let c=null;const p=s.expectedType;p&&"value"!==p.kind&&(c=p);const y=[];for(const T of t.slice(1)){const I=s.parse(T,1+y.length,c,void 0,{typeAnnotation:"omit"});if(!I)return null;c=c||I.type,y.push(I)}const b=p&&y.some(T=>_i(p,T.type));return new lu(b?Be:c,y)}evaluate(t){let s,c=null,p=0;for(const y of this.args){if(p++,c=y.evaluate(t),c&&c instanceof Co&&!c.available&&(s||(s=c),c=null,p===this.args.length))return s;if(null!==c)break}return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(s=>{t.push(s.serialize())}),t}}var fs=lu;class od{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let y=1;y<t.length-1;y+=2){const b=t[y];if("string"!=typeof b)return s.error(`Expected string, but found ${typeof b} instead.`,y);if(/[^a-zA-Z0-9_]/.test(b))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const T=s.parse(t[y+1],y+1);if(!T)return null;c.push([b,T])}const p=s.parse(t[t.length-1],t.length-1,s.expectedType,c);return p?new od(c,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[s,c]of this.bindings)t.push(s,c.serialize());return t.push(this.result.serialize()),t}}var te=od;class re{constructor(t,s,c){this.type=t,this.index=s,this.input=c}static parse(t,s){if(3!==t.length)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Hn),p=s.parse(t[2],2,Dn(s.expectedType||Be));return c&&p?new re(p.type.itemType,c,p):null}evaluate(t){const s=this.index.evaluate(t),c=this.input.evaluate(t);if(s<0)throw new Go(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new Go(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new Go(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var X=re;class _e{constructor(t,s){this.type=Li,this.needle=t,this.haystack=s}static parse(t,s){if(3!==t.length)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Be),p=s.parse(t[2],2,Be);return c&&p?wr(c.type,[Li,Ui,Hn,ya,Be])?new _e(c,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${xn(c.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(null==c)return!1;if(!uo(s,["boolean","string","number","null"]))throw new Go(`Expected first argument to be of type boolean, string, number or null, but found ${xn(Or(s))} instead.`);if(!uo(c,["string","array"]))throw new Go(`Expected second argument to be of type array or string, but found ${xn(Or(c))} instead.`);return c.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var gt=_e;class Ei{constructor(t,s,c){this.type=Hn,this.needle=t,this.haystack=s,this.fromIndex=c}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Be),p=s.parse(t[2],2,Be);if(!c||!p)return null;if(!wr(c.type,[Li,Ui,Hn,ya,Be]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${xn(c.type)} instead`);if(4===t.length){const y=s.parse(t[3],3,Hn);return y?new Ei(c,p,y):null}return new Ei(c,p)}evaluate(t){const s=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!uo(s,["boolean","string","number","null"]))throw new Go(`Expected first argument to be of type boolean, string, number or null, but found ${xn(Or(s))} instead.`);if(!uo(c,["string","array"]))throw new Go(`Expected second argument to be of type array or string, but found ${xn(Or(c))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(t);return c.indexOf(s,p)}return c.indexOf(s)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var mr=Ei;class io{constructor(t,s,c,p,y,b){this.inputType=t,this.type=s,this.input=c,this.cases=p,this.outputs=y,this.otherwise=b}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let c,p;s.expectedType&&"value"!==s.expectedType.kind&&(p=s.expectedType);const y={},b=[];for(let A=2;A<t.length-1;A+=2){let F=t[A];const j=t[A+1];Array.isArray(F)||(F=[F]);const W=s.concat(A);if(0===F.length)return W.error("Expected at least one branch label.");for(const le of F){if("number"!=typeof le&&"string"!=typeof le)return W.error("Branch labels must be numbers or strings.");if("number"==typeof le&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof le&&Math.floor(le)!==le)return W.error("Numeric branch labels must be integer values.");if(c){if(W.checkSubtype(c,Or(le)))return null}else c=Or(le);if(void 0!==y[String(le)])return W.error("Branch labels must be unique.");y[String(le)]=b.length}const J=s.parse(j,A,p);if(!J)return null;p=p||J.type,b.push(J)}const T=s.parse(t[1],1,Be);if(!T)return null;const I=s.parse(t[t.length-1],t.length-1,p);return I?"value"!==T.type.kind&&s.concat(1).checkSubtype(c,T.type)?null:new io(c,p,T,y,b,I):null}evaluate(t){const s=this.input.evaluate(t);return(Or(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),c=[],p={};for(const b of s){const T=p[this.cases[b]];void 0===T?(p[this.cases[b]]=c.length,c.push([this.cases[b],[b]])):c[T][1].push(b)}const y=b=>"number"===this.inputType.kind?Number(b):b;for(const[b,T]of c)t.push(1===T.length?y(T[0]):T.map(y)),t.push(this.outputs[b].serialize());return t.push(this.otherwise.serialize()),t}}var mi=io;class mc{constructor(t,s,c){this.type=t,this.branches=s,this.otherwise=c}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&"value"!==s.expectedType.kind&&(c=s.expectedType);const p=[];for(let b=1;b<t.length-1;b+=2){const T=s.parse(t[b],b,Li);if(!T)return null;const I=s.parse(t[b+1],b+1,c);if(!I)return null;p.push([T,I]),c=c||I.type}const y=s.parse(t[t.length-1],t.length-1,c);return y?new mc(c,p,y):null}evaluate(t){for(const[s,c]of this.branches)if(s.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,c]of this.branches)t(s),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(s=>{t.push(s.serialize())}),t}}var Bh=mc;class Bc{constructor(t,s,c,p){this.type=t,this.input=s,this.beginIndex=c,this.endIndex=p}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Be),p=s.parse(t[2],2,Hn);if(!c||!p)return null;if(!wr(c.type,[Dn(Be),Ui,Be]))return s.error(`Expected first argument to be of type array or string, but found ${xn(c.type)} instead`);if(4===t.length){const y=s.parse(t[3],3,Hn);return y?new Bc(c.type,c,p,y):null}return new Bc(c.type,c,p)}evaluate(t){const s=this.input.evaluate(t),c=this.beginIndex.evaluate(t);if(!uo(s,["string","array"]))throw new Go(`Expected first argument to be of type array or string, but found ${xn(Or(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(t);return s.slice(c,p)}return s.slice(c)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Lo=Bc;function El(r,t){return"=="===r||"!="===r?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Xr(r,t,s,c){return 0===c.compare(t,s)}function tl(r,t,s){const c="=="!==r&&"!="!==r;return class mI{constructor(y,b,T){this.type=Li,this.lhs=y,this.rhs=b,this.collator=T,this.hasUntypedArgument="value"===y.type.kind||"value"===b.type.kind}static parse(y,b){if(3!==y.length&&4!==y.length)return b.error("Expected two or three arguments.");const T=y[0];let I=b.parse(y[1],1,Be);if(!I)return null;if(!El(T,I.type))return b.concat(1).error(`"${T}" comparisons are not supported for type '${xn(I.type)}'.`);let A=b.parse(y[2],2,Be);if(!A)return null;if(!El(T,A.type))return b.concat(2).error(`"${T}" comparisons are not supported for type '${xn(A.type)}'.`);if(I.type.kind!==A.type.kind&&"value"!==I.type.kind&&"value"!==A.type.kind)return b.error(`Cannot compare types '${xn(I.type)}' and '${xn(A.type)}'.`);c&&("value"===I.type.kind&&"value"!==A.type.kind?I=new La(A.type,[I]):"value"!==I.type.kind&&"value"===A.type.kind&&(A=new La(I.type,[A])));let F=null;if(4===y.length){if("string"!==I.type.kind&&"string"!==A.type.kind&&"value"!==I.type.kind&&"value"!==A.type.kind)return b.error("Cannot use collator to compare non-string types.");if(F=b.parse(y[3],3,ot),!F)return null}return new mI(I,A,F)}evaluate(y){const b=this.lhs.evaluate(y),T=this.rhs.evaluate(y);if(c&&this.hasUntypedArgument){const I=Or(b),A=Or(T);if(I.kind!==A.kind||"string"!==I.kind&&"number"!==I.kind)throw new Go(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${I.kind}, ${A.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const I=Or(b),A=Or(T);if("string"!==I.kind||"string"!==A.kind)return t(y,b,T)}return this.collator?s(y,b,T,this.collator.evaluate(y)):t(y,b,T)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[r];return this.eachChild(b=>{y.push(b.serialize())}),y}}}const Fa=tl("==",function(r,t,s){return t===s},Xr),Cl=tl("!=",function(r,t,s){return t!==s},function(r,t,s,c){return!Xr(0,t,s,c)}),qs=tl("<",function(r,t,s){return t<s},function(r,t,s,c){return c.compare(t,s)<0}),ss=tl(">",function(r,t,s){return t>s},function(r,t,s,c){return c.compare(t,s)>0}),gc=tl("<=",function(r,t,s){return t<=s},function(r,t,s,c){return c.compare(t,s)<=0}),oa=tl(">=",function(r,t,s){return t>=s},function(r,t,s,c){return c.compare(t,s)>=0});class ro{constructor(t,s,c,p,y){this.type=Ui,this.number=t,this.locale=s,this.currency=c,this.minFractionDigits=p,this.maxFractionDigits=y}static parse(t,s){if(3!==t.length)return s.error("Expected two arguments.");const c=s.parse(t[1],1,Hn);if(!c)return null;const p=t[2];if("object"!=typeof p||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=s.parse(p.locale,1,Ui),!y))return null;let b=null;if(p.currency&&(b=s.parse(p.currency,1,Ui),!b))return null;let T=null;if(p["min-fraction-digits"]&&(T=s.parse(p["min-fraction-digits"],1,Hn),!T))return null;let I=null;return p["max-fraction-digits"]&&(I=s.parse(p["max-fraction-digits"],1,Hn),!I)?null:new ro(c,y,b,T,I)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class _c{constructor(t){this.type=Hn,this.input=t}static parse(t,s){if(2!==t.length)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=s.parse(t[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?s.error(`Expected argument of type string or array, but found ${xn(c.type)} instead.`):new _c(c):null}evaluate(t){const s=this.input.evaluate(t);if("string"==typeof s||Array.isArray(s))return s.length;throw new Go(`Expected value to be of type string or array, but found ${xn(Or(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(s=>{t.push(s.serialize())}),t}}const Tl={"==":Fa,"!=":Cl,">":ss,"<":qs,">=":oa,"<=":gc,array:La,at:X,boolean:La,case:Bh,coalesce:fs,collator:Cs,format:qa,image:uc,in:gt,"index-of":mr,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:_c,let:te,literal:Xs,match:mi,number:La,"number-format":ro,object:La,slice:Lo,step:Ns,string:La,"to-boolean":yl,"to-color":yl,"to-number":yl,"to-string":yl,var:Fs,within:vl};function Dl(r,[t,s,c,p]){t=t.evaluate(r),s=s.evaluate(r),c=c.evaluate(r);const y=p?p.evaluate(r):1,b=dr(t,s,c,y);if(b)throw new Go(b);return new ar(t/255*y,s/255*y,c/255*y,y)}function zi(r,t){return r in t}function oo(r,t){const s=t[r];return void 0===s?null:s}function Da(r){return{type:r}}va.register(Tl,{error:[{kind:"error"},[Ui],(r,[t])=>{throw new Go(t.evaluate(r))}],typeof:[Ui,[Be],(r,[t])=>xn(Or(t.evaluate(r)))],"to-rgba":[Dn(Hn,4),[Xo],(r,[t])=>t.evaluate(r).toArray()],rgb:[Xo,[Hn,Hn,Hn],Dl],rgba:[Xo,[Hn,Hn,Hn,Hn],Dl],has:{type:Li,overloads:[[[Ui],(r,[t])=>zi(t.evaluate(r),r.properties())],[[Ui,Oe],(r,[t,s])=>zi(t.evaluate(r),s.evaluate(r))]]},get:{type:Be,overloads:[[[Ui],(r,[t])=>oo(t.evaluate(r),r.properties())],[[Ui,Oe],(r,[t,s])=>oo(t.evaluate(r),s.evaluate(r))]]},"feature-state":[Be,[Ui],(r,[t])=>oo(t.evaluate(r),r.featureState||{})],properties:[Oe,[],r=>r.properties()],"geometry-type":[Ui,[],r=>r.geometryType()],id:[Be,[],r=>r.id()],zoom:[Hn,[],r=>r.globals.zoom],pitch:[Hn,[],r=>r.globals.pitch||0],"distance-from-center":[Hn,[],r=>r.distanceFromCenter()],"heatmap-density":[Hn,[],r=>r.globals.heatmapDensity||0],"line-progress":[Hn,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[Hn,[],r=>r.globals.skyRadialProgress||0],accumulated:[Be,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[Hn,Da(Hn),(r,t)=>{let s=0;for(const c of t)s+=c.evaluate(r);return s}],"*":[Hn,Da(Hn),(r,t)=>{let s=1;for(const c of t)s*=c.evaluate(r);return s}],"-":{type:Hn,overloads:[[[Hn,Hn],(r,[t,s])=>t.evaluate(r)-s.evaluate(r)],[[Hn],(r,[t])=>-t.evaluate(r)]]},"/":[Hn,[Hn,Hn],(r,[t,s])=>t.evaluate(r)/s.evaluate(r)],"%":[Hn,[Hn,Hn],(r,[t,s])=>t.evaluate(r)%s.evaluate(r)],ln2:[Hn,[],()=>Math.LN2],pi:[Hn,[],()=>Math.PI],e:[Hn,[],()=>Math.E],"^":[Hn,[Hn,Hn],(r,[t,s])=>Math.pow(t.evaluate(r),s.evaluate(r))],sqrt:[Hn,[Hn],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[Hn,[Hn],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[Hn,[Hn],(r,[t])=>Math.log(t.evaluate(r))],log2:[Hn,[Hn],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[Hn,[Hn],(r,[t])=>Math.sin(t.evaluate(r))],cos:[Hn,[Hn],(r,[t])=>Math.cos(t.evaluate(r))],tan:[Hn,[Hn],(r,[t])=>Math.tan(t.evaluate(r))],asin:[Hn,[Hn],(r,[t])=>Math.asin(t.evaluate(r))],acos:[Hn,[Hn],(r,[t])=>Math.acos(t.evaluate(r))],atan:[Hn,[Hn],(r,[t])=>Math.atan(t.evaluate(r))],min:[Hn,Da(Hn),(r,t)=>Math.min(...t.map(s=>s.evaluate(r)))],max:[Hn,Da(Hn),(r,t)=>Math.max(...t.map(s=>s.evaluate(r)))],abs:[Hn,[Hn],(r,[t])=>Math.abs(t.evaluate(r))],round:[Hn,[Hn],(r,[t])=>{const s=t.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Hn,[Hn],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[Hn,[Hn],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Li,[Ui,Be],(r,[t,s])=>r.properties()[t.value]===s.value],"filter-id-==":[Li,[Be],(r,[t])=>r.id()===t.value],"filter-type-==":[Li,[Ui],(r,[t])=>r.geometryType()===t.value],"filter-<":[Li,[Ui,Be],(r,[t,s])=>{const c=r.properties()[t.value],p=s.value;return typeof c==typeof p&&c<p}],"filter-id-<":[Li,[Be],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s<c}],"filter->":[Li,[Ui,Be],(r,[t,s])=>{const c=r.properties()[t.value],p=s.value;return typeof c==typeof p&&c>p}],"filter-id->":[Li,[Be],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s>c}],"filter-<=":[Li,[Ui,Be],(r,[t,s])=>{const c=r.properties()[t.value],p=s.value;return typeof c==typeof p&&c<=p}],"filter-id-<=":[Li,[Be],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s<=c}],"filter->=":[Li,[Ui,Be],(r,[t,s])=>{const c=r.properties()[t.value],p=s.value;return typeof c==typeof p&&c>=p}],"filter-id->=":[Li,[Be],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s>=c}],"filter-has":[Li,[Be],(r,[t])=>t.value in r.properties()],"filter-has-id":[Li,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[Li,[Dn(Ui)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Li,[Dn(Be)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Li,[Ui,Dn(Be)],(r,[t,s])=>s.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Li,[Ui,Dn(Be)],(r,[t,s])=>function(c,p,y,b){for(;y<=b;){const T=y+b>>1;if(p[T]===c)return!0;p[T]>c?b=T-1:y=T+1}return!1}(r.properties()[t.value],s.value,0,s.value.length-1)],all:{type:Li,overloads:[[[Li,Li],(r,[t,s])=>t.evaluate(r)&&s.evaluate(r)],[Da(Li),(r,t)=>{for(const s of t)if(!s.evaluate(r))return!1;return!0}]]},any:{type:Li,overloads:[[[Li,Li],(r,[t,s])=>t.evaluate(r)||s.evaluate(r)],[Da(Li),(r,t)=>{for(const s of t)if(s.evaluate(r))return!0;return!1}]]},"!":[Li,[Li],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Li,[Ui],(r,[t])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(t.evaluate(r))}],upcase:[Ui,[Ui],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Ui,[Ui],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Ui,Da(Be),(r,t)=>t.map(s=>Yo(s.evaluate(r))).join("")],"resolved-locale":[Ui,[ot],(r,[t])=>t.evaluate(r).resolvedLocale()]});var Fo=Tl;function yc(r){return{result:"success",value:r}}function zc(r){return{result:"error",value:r}}function nl(r){return"data-driven"===r["property-type"]||"cross-faded-data-driven"===r["property-type"]}function jd(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function sd(r){return!!r.expression&&r.expression.interpolated}function Ir(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function tr(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function Gd(r){return r}function Zl(r,t){const s="color"===t.type,c=r.stops&&"object"==typeof r.stops[0][0],p=c||!(c||void 0!==r.property),y=r.type||(sd(t)?"exponential":"interval");if(s&&((r=Yr({},r)).stops&&(r.stops=r.stops.map(A=>[A[0],ar.parse(A[1])])),r.default=ar.parse(r.default?r.default:t.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!Kl[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let b,T,I;if("exponential"===y)b=sa;else if("interval"===y)b=bc;else if("categorical"===y){b=vc,T=Object.create(null);for(const A of r.stops)T[A[0]]=A[1];I=typeof r.stops[0][0]}else{if("identity"!==y)throw new Error(`Unknown function type "${y}"`);b=cu}if(c){const A={},F=[];for(let J=0;J<r.stops.length;J++){const le=r.stops[J],fe=le[0].zoom;void 0===A[fe]&&(A[fe]={zoom:fe,type:r.type,property:r.property,default:r.default,stops:[]},F.push(fe)),A[fe].stops.push([le[0].value,le[1]])}const j=[];for(const J of F)j.push([A[J].zoom,Zl(A[J],t)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:ra.interpolationFactor.bind(void 0,W),zoomStops:j.map(J=>J[0]),evaluate:({zoom:J},le)=>sa({stops:j,base:r.base},t,J).evaluate(J,le)}}if(p){const A="exponential"===y?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:ra.interpolationFactor.bind(void 0,A),zoomStops:r.stops.map(F=>F[0]),evaluate:({zoom:F})=>b(r,t,F,T,I)}}return{kind:"source",evaluate(A,F){const j=F&&F.properties?F.properties[r.property]:void 0;return void 0===j?$o(r.default,t.default):b(r,t,j,T,I)}}}function $o(r,t,s){return void 0!==r?r:void 0!==t?t:void 0!==s?s:void 0}function vc(r,t,s,c,p){return $o(typeof s===p?c[s]:void 0,r.default,t.default)}function bc(r,t,s){if("number"!==Ir(s))return $o(r.default,t.default);const c=r.stops.length;if(1===c||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[c-1][0])return r.stops[c-1][1];const p=Ca(r.stops.map(y=>y[0]),s);return r.stops[p][1]}function sa(r,t,s){const c=void 0!==r.base?r.base:1;if("number"!==Ir(s))return $o(r.default,t.default);const p=r.stops.length;if(1===p||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[p-1][0])return r.stops[p-1][1];const y=Ca(r.stops.map(F=>F[0]),s),b=function(F,j,W,J){const le=J-W,fe=F-W;return 0===le?0:1===j?fe/le:(Math.pow(j,fe)-1)/(Math.pow(j,le)-1)}(s,c,r.stops[y][0],r.stops[y+1][0]),T=r.stops[y][1],I=r.stops[y+1][1];let A=os[t.type]||Gd;if(r.colorSpace&&"rgb"!==r.colorSpace){const F=Kl[r.colorSpace];A=(j,W)=>F.reverse(F.interpolate(F.forward(j),F.forward(W),b))}return"function"==typeof T.evaluate?{evaluate(...F){const j=T.evaluate.apply(void 0,F),W=I.evaluate.apply(void 0,F);if(void 0!==j&&void 0!==W)return A(j,W,b)}}:A(T,I,b)}function cu(r,t,s){return"color"===t.type?s=ar.parse(s):"formatted"===t.type?s=Dr.fromString(s.toString()):"resolvedImage"===t.type?s=Co.fromString(s.toString()):Ir(s)===t.type||"enum"===t.type&&t.values[s]||(s=void 0),$o(s,r.default,t.default)}class Vc{constructor(t,s){var c;this.expression=t,this._warningHistory={},this._evaluator=new Pu,this._defaultValue=s?"color"===(c=s).type&&(tr(c.default)||Array.isArray(c.default))?new ar(0,0,0,0):"color"===c.type?ar.parse(c.default)||null:void 0===c.default?null:c.default:null,this._enumValues=s&&"enum"===s.type?s.values:null}evaluateWithoutErrorHandling(t,s,c,p,y,b,T,I){return this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(t,s,c,p,y,b,T,I){this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=I||null;try{const A=this.expression.evaluate(this._evaluator);if(null==A||"number"==typeof A&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Go(`Expected value to be one of ${Object.keys(this._enumValues).map(F=>JSON.stringify(F)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function Ki(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in Fo}function br(r,t){const s=new fc(Fo,[],t?function(p){const y={color:Xo,string:Ui,number:Hn,enum:Ui,boolean:Li,formatted:Yt,resolvedImage:bn};return"array"===p.type?Dn(y[p.value]||Be,p.length):y[p.type]}(t):void 0),c=s.parse(r,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return c?yc(new Vc(c,t)):zc(s.errors)}class Fu{constructor(t,s){this.kind=t,this._styleExpression=s,this.isStateDependent="constant"!==t&&!hs(s.expression)}evaluateWithoutErrorHandling(t,s,c,p,y,b){return this._styleExpression.evaluateWithoutErrorHandling(t,s,c,p,y,b)}evaluate(t,s,c,p,y,b){return this._styleExpression.evaluate(t,s,c,p,y,b)}}class Uc{constructor(t,s,c,p){this.kind=t,this.zoomStops=c,this._styleExpression=s,this.isStateDependent="camera"!==t&&!hs(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(t,s,c,p,y,b){return this._styleExpression.evaluateWithoutErrorHandling(t,s,c,p,y,b)}evaluate(t,s,c,p,y,b){return this._styleExpression.evaluate(t,s,c,p,y,b)}interpolationFactor(t,s,c){return this.interpolationType?ra.interpolationFactor(this.interpolationType,t,s,c):0}}function Na(r,t){if("error"===(r=br(r,t)).result)return r;const s=r.value.expression,c=Qa(s);if(!c&&!nl(t))return zc([new Io("","data expressions not supported")]);const p=Zo(s,["zoom","pitch","distance-from-center"]);if(!p&&!jd(t))return zc([new Io("","zoom expressions not supported")]);const y=Ml(s);return y||p?y instanceof Io?zc([y]):y instanceof ra&&!sd(t)?zc([new Io("",'"interpolate" expressions cannot be used with this property')]):yc(y?new Uc(c?"camera":"composite",r.value,y.labels,y instanceof ra?y.interpolation:void 0):new Fu(c?"constant":"source",r.value)):zc([new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class uu{constructor(t,s){this._parameters=t,this._specification=s,Yr(this,Zl(this._parameters,this._specification))}static deserialize(t){return new uu(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ml(r){let t=null;if(r instanceof te)t=Ml(r.result);else if(r instanceof fs){for(const s of r.args)if(t=Ml(s),t)break}else(r instanceof Ns||r instanceof ra)&&r.input instanceof va&&"zoom"===r.input.name&&(t=r);return t instanceof Io||r.eachChild(s=>{const c=Ml(s);c instanceof Io?t=c:!t&&c?t=new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new Io("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}class Kn{constructor(t,s,c,p){this.message=(t?`${t}: `:"")+c,p&&(this.identifier=p),null!=s&&s.__line__&&(this.line=s.__line__)}}function Wi(r){const t=r.key,s=r.value,c=r.valueSpec||{},p=r.objectElementValidators||{},y=r.style,b=r.styleSpec;let T=[];const I=Ir(s);if("object"!==I)return[new Kn(t,s,`object expected, ${I} found`)];for(const A in s){const F=A.split(".")[0];let W;p[F]?W=p[F]:c[F]?W=_o:p["*"]?W=p["*"]:c["*"]&&(W=_o),W?T=T.concat(W({key:(t&&`${t}.`)+A,value:s[A],valueSpec:c[F]||c["*"],style:y,styleSpec:b,object:s,objectKey:A},s)):T.push(new Kn(t,s[A],`unknown property "${A}"`))}for(const A in c)p[A]||c[A].required&&void 0===c[A].default&&void 0===s[A]&&T.push(new Kn(t,s,`missing required property "${A}"`));return T}function xc(r){const t=r.value,s=r.valueSpec,c=r.style,p=r.styleSpec,y=r.key,b=r.arrayElementValidator||_o;if("array"!==Ir(t))return[new Kn(y,t,`array expected, ${Ir(t)} found`)];if(s.length&&t.length!==s.length)return[new Kn(y,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Kn(y,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let T={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};p.$version<7&&(T.function=s.function),"object"===Ir(s.value)&&(T=s.value);let I=[];for(let A=0;A<t.length;A++)I=I.concat(b({array:t,arrayIndex:A,value:t[A],valueSpec:T,style:c,styleSpec:p,key:`${y}[${A}]`}));return I}function Ma(r){const t=r.key,s=r.value,c=r.valueSpec;let p=Ir(s);if("number"===p&&s!=s&&(p="NaN"),"number"!==p)return[new Kn(t,s,`number expected, ${p} found`)];if("minimum"in c){let y=c.minimum;if("array"===Ir(c.minimum)&&(y=c.minimum[r.arrayIndex]),s<y)return[new Kn(t,s,`${s} is less than the minimum value ${y}`)]}if("maximum"in c){let y=c.maximum;if("array"===Ir(c.maximum)&&(y=c.maximum[r.arrayIndex]),s>y)return[new Kn(t,s,`${s} is greater than the maximum value ${y}`)]}return[]}function Ds(r){const t=r.valueSpec,s=or(r.value.type);let c,p,y,b={};const T="categorical"!==s&&void 0===r.value.property,I=!T,A="array"===Ir(r.value.stops)&&"array"===Ir(r.value.stops[0])&&"object"===Ir(r.value.stops[0][0]),F=Wi({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(J){if("identity"===s)return[new Kn(J.key,J.value,'identity function may not have a "stops" property')];let le=[];const fe=J.value;return le=le.concat(xc({key:J.key,value:fe,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:j})),"array"===Ir(fe)&&0===fe.length&&le.push(new Kn(J.key,fe,"array must have at least one stop")),le},default:function(J){return _o({key:J.key,value:J.value,valueSpec:t,style:J.style,styleSpec:J.styleSpec})}}});return"identity"===s&&T&&F.push(new Kn(r.key,r.value,'missing required property "property"')),"identity"===s||r.value.stops||F.push(new Kn(r.key,r.value,'missing required property "stops"')),"exponential"===s&&r.valueSpec.expression&&!sd(r.valueSpec)&&F.push(new Kn(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(I&&!nl(r.valueSpec)?F.push(new Kn(r.key,r.value,"property functions not supported")):T&&!jd(r.valueSpec)&&F.push(new Kn(r.key,r.value,"zoom functions not supported"))),"categorical"!==s&&!A||void 0!==r.value.property||F.push(new Kn(r.key,r.value,'"property" property is required')),F;function j(J){let le=[];const fe=J.value,Re=J.key;if("array"!==Ir(fe))return[new Kn(Re,fe,`array expected, ${Ir(fe)} found`)];if(2!==fe.length)return[new Kn(Re,fe,`array length 2 expected, length ${fe.length} found`)];if(A){if("object"!==Ir(fe[0]))return[new Kn(Re,fe,`object expected, ${Ir(fe[0])} found`)];if(void 0===fe[0].zoom)return[new Kn(Re,fe,"object stop key must have zoom")];if(void 0===fe[0].value)return[new Kn(Re,fe,"object stop key must have value")];const ze=or(fe[0].zoom);if("number"!=typeof ze)return[new Kn(Re,fe[0].zoom,"stop zoom values must be numbers")];if(y&&y>ze)return[new Kn(Re,fe[0].zoom,"stop zoom values must appear in ascending order")];ze!==y&&(y=ze,p=void 0,b={}),le=le.concat(Wi({key:`${Re}[0]`,value:fe[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Ma,value:W}}))}else le=le.concat(W({key:`${Re}[0]`,value:fe[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},fe));return Ki(Eo(fe[1]))?le.concat([new Kn(`${Re}[1]`,fe[1],"expressions are not allowed in function stops.")]):le.concat(_o({key:`${Re}[1]`,value:fe[1],valueSpec:t,style:J.style,styleSpec:J.styleSpec}))}function W(J,le){const fe=Ir(J.value),Re=or(J.value),ze=null!==J.value?J.value:le;if(c){if(fe!==c)return[new Kn(J.key,ze,`${fe} stop domain type must match previous stop domain type ${c}`)]}else c=fe;if("number"!==fe&&"string"!==fe&&"boolean"!==fe&&"number"!=typeof Re&&"string"!=typeof Re&&"boolean"!=typeof Re)return[new Kn(J.key,ze,"stop domain value must be a number, string, or boolean")];if("number"!==fe&&"categorical"!==s){let it=`number expected, ${fe} found`;return nl(t)&&void 0===s&&(it+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kn(J.key,ze,it)]}return"categorical"!==s||"number"!==fe||"number"==typeof Re&&isFinite(Re)&&Math.floor(Re)===Re?"categorical"!==s&&"number"===fe&&"number"==typeof Re&&"number"==typeof p&&void 0!==p&&Re<p?[new Kn(J.key,ze,"stop domain values must appear in ascending order")]:(p=Re,"categorical"===s&&Re in b?[new Kn(J.key,ze,"stop domain values must be unique")]:(b[Re]=!0,[])):[new Kn(J.key,ze,`integer expected, found ${String(Re)}`)]}}function aa(r){const t=("property"===r.expressionContext?Na:br)(Eo(r.value),r.valueSpec);if("error"===t.result)return t.value.map(c=>new Kn(`${r.key}${c.key}`,r.value,c.message));const s=t.value.expression||t.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!s.outputDefined())return[new Kn(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!hs(s))return[new Kn(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext)return $d(s,r);if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!Zo(s,["zoom","feature-state"]))return[new Kn(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!Qa(s))return[new Kn(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $d(r,t){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const p of t.valueSpec.expression.parameters)s.delete(p);if(0===s.size)return[];const c=[];return r instanceof va&&s.has(r.name)?[new Kn(t.key,t.value,`["${r.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(r.eachChild(p=>{c.push(...$d(p,t))}),c)}function ql(r){const t=r.key,s=r.value,c=r.valueSpec,p=[];return Array.isArray(c.values)?-1===c.values.indexOf(or(s))&&p.push(new Kn(t,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):-1===Object.keys(c.values).indexOf(or(s))&&p.push(new Kn(t,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Yl(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Yl(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Ql(r,t="fill"){if(null==r)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Yl(r)||(r=En(r));const s=r;let c=!0;try{c=function(A){if(!q(A))return A;let F=Eo(A);return he(F),F=V(F),F}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(s,null,2)}\n        `)}const p=xt[`filter_${t}`],y=br(c,p);let b=null;if("error"===y.result)throw new Error(y.value.map(A=>`${A.key}: ${A.message}`).join(", "));b=(A,F,j)=>y.value.evaluate(A,F,{},j);let T=null,I=null;if(c!==s){const A=br(s,p);if("error"===A.result)throw new Error(A.value.map(F=>`${F.key}: ${F.message}`).join(", "));T=(F,j,W,J,le)=>A.value.evaluate(F,j,{},W,void 0,void 0,J,le),I=!Qa(A.value.expression)}return{filter:b,dynamicFilter:T||void 0,needGeometry:Bt(c),needFeature:!!I}}function V(r){if(!Array.isArray(r))return r;const t=function(s){if(ce.has(s[0]))for(let c=1;c<s.length;c++)if(q(s[c]))return!0;return s}(r);return!0===t?t:t.map(s=>V(s))}function he(r){let t=!1;const s=[];if("case"===r[0]){for(let c=1;c<r.length-1;c+=2)t=t||q(r[c]),s.push(r[c+1]);s.push(r[r.length-1])}else if("match"===r[0]){t=t||q(r[1]);for(let c=2;c<r.length-1;c+=2)s.push(r[c+1]);s.push(r[r.length-1])}else if("step"===r[0]){t=t||q(r[1]);for(let c=1;c<r.length-1;c+=2)s.push(r[c+1])}t&&(r.length=0,r.push("any",...s));for(let c=1;c<r.length;c++)he(r[c])}function q(r){if(!Array.isArray(r))return!1;if("pitch"===(t=r[0])||"distance-from-center"===t)return!0;var t;for(let s=1;s<r.length;s++)if(q(r[s]))return!0;return!1}const ce=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ye(r,t){return r<t?-1:r>t?1:0}function Bt(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(let t=1;t<r.length;t++)if(Bt(r[t]))return!0;return!1}function En(r){if(!r)return!0;const t=r[0];return r.length<=1?"any"!==t:"=="===t?Un(r[1],r[2],"=="):"!="===t?Fr(Un(r[1],r[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Un(r[1],r[2],t):"any"===t?(s=r.slice(1),["any"].concat(s.map(En))):"all"===t?["all"].concat(r.slice(1).map(En)):"none"===t?["all"].concat(r.slice(1).map(En).map(Fr)):"in"===t?Hr(r[1],r.slice(2)):"!in"===t?Fr(Hr(r[1],r.slice(2))):"has"===t?qi(r[1]):"!has"===t?Fr(qi(r[1])):"within"!==t||r;var s}function Un(r,t,s){switch(r){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,r,t]}}function Hr(r,t){if(0===t.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(s=>typeof s!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Ye)]]:["filter-in-small",r,["literal",t]]}}function qi(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Fr(r){return["!",r]}function Vn(r){return Yl(Eo(r.value))?aa(Yr({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):so(r)}function so(r){const t=r.value,s=r.key;if("array"!==Ir(t))return[new Kn(s,t,`array expected, ${Ir(t)} found`)];const c=r.styleSpec;let p,y=[];if(t.length<1)return[new Kn(s,t,"filter array must have at least 1 element")];switch(y=y.concat(ql({key:`${s}[0]`,value:t[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),or(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===or(t[1])&&y.push(new Kn(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&y.push(new Kn(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=Ir(t[1]),"string"!==p&&y.push(new Kn(`${s}[1]`,t[1],`string expected, ${p} found`)));for(let b=2;b<t.length;b++)p=Ir(t[b]),"$type"===or(t[1])?y=y.concat(ql({key:`${s}[${b}]`,value:t[b],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==p&&"number"!==p&&"boolean"!==p&&y.push(new Kn(`${s}[${b}]`,t[b],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)y=y.concat(so({key:`${s}[${b}]`,value:t[b],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":p=Ir(t[1]),2!==t.length?y.push(new Kn(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==p&&y.push(new Kn(`${s}[1]`,t[1],`string expected, ${p} found`));break;case"within":p=Ir(t[1]),2!==t.length?y.push(new Kn(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==p&&y.push(new Kn(`${s}[1]`,t[1],`object expected, ${p} found`))}return y}function Rr(r,t){const s=r.key,c=r.style,p=r.styleSpec,y=r.value,b=r.objectKey,T=p[`${t}_${r.layerType}`];if(!T)return[];const I=b.match(/^(.*)-transition$/);if("paint"===t&&I&&T[I[1]]&&T[I[1]].transition)return _o({key:s,value:y,valueSpec:p.transition,style:c,styleSpec:p});const A=r.valueSpec||T[b];if(!A)return[new Kn(s,y,`unknown property "${b}"`)];let F;if("string"===Ir(y)&&nl(A)&&!A.tokens&&(F=/^{([^}]+)}$/.exec(y)))return[new Kn(s,y,`"${b}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const j=[];return"symbol"===r.layerType&&("text-field"===b&&c&&!c.glyphs&&j.push(new Kn(s,y,'use of "text-field" requires a style "glyphs" property')),"text-font"===b&&tr(Eo(y))&&"identity"===or(y.type)&&j.push(new Kn(s,y,'"text-font" does not support identity functions'))),j.concat(_o({key:r.key,value:y,valueSpec:A,style:c,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:b}))}function Pr(r){return Rr(r,"paint")}function Sa(r){return Rr(r,"layout")}function Ia(r){let t=[];const s=r.value,c=r.key,p=r.style,y=r.styleSpec;s.type||s.ref||t.push(new Kn(c,s,'either "type" or "ref" is required'));let b=or(s.type);const T=or(s.ref);if(s.id){const I=or(s.id);for(let A=0;A<r.arrayIndex;A++){const F=p.layers[A];or(F.id)===I&&t.push(new Kn(c,s.id,`duplicate layer id "${s.id}", previously used at line ${F.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(A=>{A in s&&t.push(new Kn(c,s[A],`"${A}" is prohibited for ref layers`))}),p.layers.forEach(A=>{or(A.id)===T&&(I=A)}),I?I.ref?t.push(new Kn(c,s.ref,"ref cannot reference another ref layer")):b=or(I.type):"string"==typeof T&&t.push(new Kn(c,s.ref,`ref layer "${T}" not found`))}else if("background"!==b&&"sky"!==b)if(s.source){const I=p.sources&&p.sources[s.source],A=I&&or(I.type);I?"vector"===A&&"raster"===b?t.push(new Kn(c,s.source,`layer "${s.id}" requires a raster source`)):"raster"===A&&"raster"!==b?t.push(new Kn(c,s.source,`layer "${s.id}" requires a vector source`)):"vector"!==A||s["source-layer"]?"raster-dem"===A&&"hillshade"!==b?t.push(new Kn(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==b||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||"geojson"===A&&I.lineMetrics||t.push(new Kn(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Kn(c,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Kn(c,s.source,`source "${s.source}" not found`))}else t.push(new Kn(c,s,'missing required property "source"'));return t=t.concat(Wi({key:c,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>_o({key:`${c}.type`,value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"}),filter:I=>Vn(Yr({layerType:b},I)),layout:I=>Wi({layer:s,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":A=>Sa(Yr({layerType:b},A))}}),paint:I=>Wi({layer:s,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":A=>Pr(Yr({layerType:b},A))}})}})),t}function zs(r){const t=r.value,s=r.key,c=Ir(t);return"string"!==c?[new Kn(s,t,`string expected, ${c} found`)]:[]}const la={promoteId:function({key:r,value:t}){if("string"===Ir(t))return zs({key:r,value:t});{const s=[];for(const c in t)s.push(...zs({key:`${r}.${c}`,value:t[c]}));return s}}};function Aa(r){const t=r.value,s=r.key,c=r.styleSpec,p=r.style;if(!t.type)return[new Kn(s,t,'"type" is required')];const y=or(t.type);let b;switch(y){case"vector":case"raster":case"raster-dem":return b=Wi({key:s,value:t,valueSpec:c[`source_${y.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:la}),b;case"geojson":if(b=Wi({key:s,value:t,valueSpec:c.source_geojson,style:p,styleSpec:c,objectElementValidators:la}),t.cluster)for(const T in t.clusterProperties){const[I,A]=t.clusterProperties[T],F="string"==typeof I?[I,["accumulated"],["get",T]]:I;b.push(...aa({key:`${s}.${T}.map`,value:A,expressionContext:"cluster-map"})),b.push(...aa({key:`${s}.${T}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return b;case"video":return Wi({key:s,value:t,valueSpec:c.source_video,style:p,styleSpec:c});case"image":return Wi({key:s,value:t,valueSpec:c.source_image,style:p,styleSpec:c});case"canvas":return[new Kn(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ql({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:c})}}function ca(r){const t=r.value,s=r.styleSpec,c=s.light,p=r.style;let y=[];const b=Ir(t);if(void 0===t)return y;if("object"!==b)return y=y.concat([new Kn("light",t,`object expected, ${b} found`)]),y;for(const T in t){const I=T.match(/^(.*)-transition$/);y=y.concat(I&&c[I[1]]&&c[I[1]].transition?_o({key:T,value:t[T],valueSpec:s.transition,style:p,styleSpec:s}):c[T]?_o({key:T,value:t[T],valueSpec:c[T],style:p,styleSpec:s}):[new Kn(T,t[T],`unknown property "${T}"`)])}return y}function Ba(r){const t=r.value,s=r.key,c=r.style,p=r.styleSpec,y=p.terrain;let b=[];const T=Ir(t);if(void 0===t)return b;if("object"!==T)return b=b.concat([new Kn("terrain",t,`object expected, ${T} found`)]),b;for(const I in t){const A=I.match(/^(.*)-transition$/);b=b.concat(A&&y[A[1]]&&y[A[1]].transition?_o({key:I,value:t[I],valueSpec:p.transition,style:c,styleSpec:p}):y[I]?_o({key:I,value:t[I],valueSpec:y[I],style:c,styleSpec:p}):[new Kn(I,t[I],`unknown property "${I}"`)])}if(t.source){const I=c.sources&&c.sources[t.source],A=I&&or(I.type);I?"raster-dem"!==A&&b.push(new Kn(s,t.source,`terrain cannot be used with a source of type ${String(A)}, it only be used with a "raster-dem" source type`)):b.push(new Kn(s,t.source,`source "${t.source}" not found`))}else b.push(new Kn(s,t,'terrain is missing required property "source"'));return b}function Sl(r){const t=r.value,s=r.style,c=r.styleSpec,p=c.fog;let y=[];const b=Ir(t);if(void 0===t)return y;if("object"!==b)return y=y.concat([new Kn("fog",t,`object expected, ${b} found`)]),y;for(const T in t){const I=T.match(/^(.*)-transition$/);y=y.concat(I&&p[I[1]]&&p[I[1]].transition?_o({key:T,value:t[T],valueSpec:c.transition,style:s,styleSpec:c}):p[T]?_o({key:T,value:t[T],valueSpec:p[T],style:s,styleSpec:c}):[new Kn(T,t[T],`unknown property "${T}"`)])}return y}const Il={"*":()=>[],array:xc,boolean:function(r){const t=r.value,s=r.key,c=Ir(t);return"boolean"!==c?[new Kn(s,t,`boolean expected, ${c} found`)]:[]},number:Ma,color:function(r){const t=r.key,s=r.value,c=Ir(s);return"string"!==c?[new Kn(t,s,`color expected, ${c} found`)]:null===go.parseCSSColor(s)?[new Kn(t,s,`color expected, "${s}" found`)]:[]},enum:ql,filter:Vn,function:Ds,layer:Ia,object:Wi,source:Aa,light:ca,terrain:Ba,fog:Sl,string:zs,formatted:function(r){return 0===zs(r).length?[]:aa(r)},resolvedImage:function(r){return 0===zs(r).length?[]:aa(r)},projection:function(r){const t=r.value,s=r.styleSpec,c=s.projection,p=r.style;let y=[];const b=Ir(t);if("object"===b)for(const T in t)y=y.concat(_o({key:T,value:t[T],valueSpec:c[T],style:p,styleSpec:s}));else"string"!==b&&(y=y.concat([new Kn("projection",t,`object or string expected, ${b} found`)]));return y}};function _o(r){const t=r.value,s=r.valueSpec,c=r.styleSpec;return s.expression&&tr(or(t))?Ds(r):s.expression&&Ki(Eo(t))?aa(r):s.type&&Il[s.type]?Il[s.type](r):Wi(Yr({},r,{valueSpec:s.type?c[s.type]:s}))}function Vs(r){const t=r.value,s=r.key,c=zs(r);return c.length||(-1===t.indexOf("{fontstack}")&&c.push(new Kn(s,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&c.push(new Kn(s,t,'"glyphs" url must include a "{range}" token'))),c}function du(r,t=xt){return ua(_o({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,objectElementValidators:{glyphs:Vs,"*":()=>[]}}))}const ad=r=>ua(Pr(r)),ka=r=>ua(Sa(r));function ua(r){return r.slice().sort((t,s)=>t.line&&s.line?t.line-s.line:0)}function ld(r,t){let s=!1;if(t&&t.length)for(const c of t)r.fire(new Bi(new Error(c.message))),s=!0;return s}var cd=za;function za(r,t,s){var c=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var p=new Int32Array(this.arrayBuffer);r=p[0],this.d=(t=p[1])+2*(s=p[2]);for(var y=0;y<this.d*this.d;y++){var b=p[3+y],T=p[3+y+1];c.push(b===T?null:p.subarray(b,T))}var I=p[3+c.length+1];this.keys=p.subarray(p[3+c.length],I),this.bboxes=p.subarray(I),this.insert=this._insertReadonly}else{this.d=t+2*s;for(var A=0;A<this.d*this.d;A++)c.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=r,this.padding=s,this.scale=t/r,this.uid=0;var F=s/t*r;this.min=-F,this.max=r+F}za.prototype.insert=function(r,t,s,c,p){this._forEachCell(t,s,c,p,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(t),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(p)},za.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},za.prototype._insertCell=function(r,t,s,c,p,y){this.cells[p].push(y)},za.prototype.query=function(r,t,s,c,p){var y=this.min,b=this.max;if(r<=y&&t<=y&&b<=s&&b<=c&&!p)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(r,t,s,c,this._queryCell,T,{},p),T},za.prototype._queryCell=function(r,t,s,c,p,y,b,T){var I=this.cells[p];if(null!==I)for(var A=this.keys,F=this.bboxes,j=0;j<I.length;j++){var W=I[j];if(void 0===b[W]){var J=4*W;(T?T(F[J+0],F[J+1],F[J+2],F[J+3]):r<=F[J+2]&&t<=F[J+3]&&s>=F[J+0]&&c>=F[J+1])?(b[W]=!0,y.push(A[W])):b[W]=!1}}},za.prototype._forEachCell=function(r,t,s,c,p,y,b,T){for(var I=this._convertToCellCoord(r),A=this._convertToCellCoord(t),F=this._convertToCellCoord(s),j=this._convertToCellCoord(c),W=I;W<=F;W++)for(var J=A;J<=j;J++){var le=this.d*J+W;if((!T||T(this._convertFromCellCoord(W),this._convertFromCellCoord(J),this._convertFromCellCoord(W+1),this._convertFromCellCoord(J+1)))&&p.call(this,r,t,s,c,le,y,b,T))return}},za.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},za.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},za.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,t=3+this.cells.length+1+1,s=0,c=0;c<this.cells.length;c++)s+=this.cells[c].length;var p=new Int32Array(t+s+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var y=t,b=0;b<r.length;b++){var T=r[b];p[3+b]=y,p.set(T,y),y+=T.length}return p[3+r.length]=y,p.set(this.keys,y),p[3+r.length+1]=y+=this.keys.length,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer};const Nu={};function Wn(r,t,s={}){Object.defineProperty(r,"_classRegistryKey",{value:t,writeable:!1}),Nu[t]={klass:r,omit:s.omit||[]}}Wn(Object,"Object"),cd.serialize=function(r,t){const s=r.toArrayBuffer();return t&&t.push(s),{buffer:s}},cd.deserialize=function(r){return new cd(r.buffer)},Object.defineProperty(cd,"name",{value:"Grid"}),Wn(cd,"Grid"),Wn(ar,"Color"),Wn(Error,"Error"),Wn(Xe,"AJAXError"),Wn(Co,"ResolvedImage"),Wn(uu,"StylePropertyFunction"),Wn(Vc,"StyleExpression",{omit:["_evaluator"]}),Wn(Uc,"ZoomDependentExpression"),Wn(Fu,"ZoomConstantExpression"),Wn(va,"CompoundExpression",{omit:["_evaluate"]});for(const r in Fo)Nu[Fo[r]._classRegistryKey]||Wn(Fo[r],`Expression${r}`);function hu(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function jc(r){return ge.ImageBitmap&&r instanceof ge.ImageBitmap}function ud(r,t){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(hu(r)||jc(r))return t&&t.push(r),r;if(ArrayBuffer.isView(r)){const s=r;return t&&t.push(s.buffer),s}if(r instanceof ge.ImageData)return t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const s=[];for(const c of r)s.push(ud(c,t));return s}if("object"==typeof r){const s=r.constructor,c=s._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const p=s.serialize?s.serialize(r,t):{};if(!s.serialize){for(const y in r)r.hasOwnProperty(y)&&(Nu[c].omit.indexOf(y)>=0||(p[y]=ud(r[y],t)));r instanceof Error&&(p.message=r.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==c&&(p.$name=c),p}throw new Error("can't serialize object of type "+typeof r)}function Bu(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||hu(r)||jc(r)||ArrayBuffer.isView(r)||r instanceof ge.ImageData)return r;if(Array.isArray(r))return r.map(Bu);if("object"==typeof r){const t=r.$name||"Object",{klass:s}=Nu[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(r);const c=Object.create(s.prototype);for(const p of Object.keys(r))"$name"!==p&&(c[p]=Bu(r[p]));return c}throw new Error("can't deserialize object of type "+typeof r)}class ms{constructor(){this.first=!0}update(t,s){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const Nr=r=>r>=1536&&r<=1791,il=r=>r>=1872&&r<=1919,zu=r=>r>=2208&&r<=2303,Hd=r=>r>=11904&&r<=12031,Vu=r=>r>=12032&&r<=12255,wc=r=>r>=12272&&r<=12287,Al=r=>r>=12288&&r<=12351,Va=r=>r>=12352&&r<=12447,dd=r=>r>=12448&&r<=12543,Uu=r=>r>=12544&&r<=12591,hd=r=>r>=12704&&r<=12735,pd=r=>r>=12736&&r<=12783,Oa=r=>r>=12784&&r<=12799,ju=r=>r>=12800&&r<=13055,pu=r=>r>=13056&&r<=13311,Wd=r=>r>=13312&&r<=19903,Gc=r=>r>=19968&&r<=40959,_p=r=>r>=40960&&r<=42127,Xd=r=>r>=42128&&r<=42191,rl=r=>r>=44032&&r<=55215,Ef=r=>r>=63744&&r<=64255,Kd=r=>r>=64336&&r<=65023,yp=r=>r>=65040&&r<=65055,R=r=>r>=65072&&r<=65103,G=r=>r>=65104&&r<=65135,L=r=>r>=65136&&r<=65279,$=r=>r>=65280&&r<=65519;function oe(r){for(const t of r)if(i(t.charCodeAt(0)))return!0;return!1}function we(r){for(const t of r)if(!f(t.charCodeAt(0)))return!1;return!0}function f(r){return!(Nr(r)||il(r)||zu(r)||Kd(r)||L(r))}function i(r){return!(746!==r&&747!==r&&(r<4352||!(hd(r)||Uu(r)||R(r)&&!(r>=65097&&r<=65103)||Ef(r)||pu(r)||Hd(r)||pd(r)||!(!Al(r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||Wd(r)||Gc(r)||ju(r)||(t=r,t>=12592&&t<=12687)||(t=>t>=43360&&t<=43391)(r)||(t=>t>=55216&&t<=55295)(r)||(t=>t>=4352&&t<=4607)(r)||rl(r)||Va(r)||wc(r)||(t=>t>=12688&&t<=12703)(r)||Vu(r)||Oa(r)||dd(r)&&12540!==r||!(!$(r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!G(r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||(t=>t>=5120&&t<=5759)(r)||(t=>t>=6320&&t<=6399)(r)||yp(r)||(t=>t>=19904&&t<=19967)(r)||_p(r)||Xd(r))));var t}function d(r){return!(i(r)||(t=r,(s=t)>=128&&s<=255&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(s=>s>=8192&&s<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(s=>s>=8448&&s<=8527)(t)||(s=>s>=8528&&s<=8591)(t)||(s=>s>=8960&&s<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(s=>s>=9216&&s<=9279)(t)&&9251!==t||(s=>s>=9280&&s<=9311)(t)||(s=>s>=9312&&s<=9471)(t)||(s=>s>=9632&&s<=9727)(t)||(s=>s>=9728&&s<=9983)(t)&&!(t>=9754&&t<=9759)||(s=>s>=11008&&s<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Al(t)||dd(t)||(s=>s>=57344&&s<=63743)(t)||R(t)||G(t)||$(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t,s}function v(r){return r>=1424&&r<=2303||Kd(r)||L(r)}function E(r,t){return!(!t&&v(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||(s=r,s>=6016&&s<=6143));var s}function M(r){for(const t of r)if(v(t.charCodeAt(0)))return!0;return!1}const k="deferred",P="loading",B="loaded";let Z=null,Q="unavailable",ae=null;const pe=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(Q="error"),Z&&Z(r)};function Ce(){Se.fire(new hi("pluginStateChange",{pluginStatus:Q,pluginURL:ae}))}const Se=new Ri,xe=function(){return Q},We=function(){if(Q!==k||!ae)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Q=P,Ce(),ae&&ne({url:ae},r=>{r?pe(r):(Q=B,Ce())})},Me={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Q===B||null!=Me.applyArabicShaping,isLoading:()=>Q===P,setState(r){Q=r.pluginStatus,ae=r.pluginURL},isParsed:()=>null!=Me.applyArabicShaping&&null!=Me.processBidirectionalText&&null!=Me.processStyledBidirectionalText,getPluginURL:()=>ae};class Le{constructor(t,s){this.zoom=t,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ms,this.transition={},this.pitch=0)}isSupportedScript(t){return function(s,c){for(const p of s)if(!E(p.charCodeAt(0),c))return!1;return!0}(t,Me.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class Ne{constructor(t,s){this.property=t,this.value=s,this.expression=function(c,p){if(tr(c))return new uu(c,p);if(Ki(c)){const y=Na(c,p);if("error"===y.result)throw new Error(y.value.map(b=>`${b.key}: ${b.message}`).join(", "));return y.value}{let y=c;return"string"==typeof c&&"color"===p.type&&(y=ar.parse(c)),{kind:"constant",evaluate:()=>y}}}(void 0===s?t.specification.default:s,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,s,c){return this.property.possiblyEvaluate(this,t,s,c)}}class et{constructor(t){this.property=t,this.value=new Ne(t,void 0)}transitioned(t,s){return new Ke(this.property,this.value,s,dt({},t.transition,this.transition),t.now)}untransitioned(){return new Ke(this.property,this.value,null,{},0)}}class je{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return mn(this._values[t].value.value)}setValue(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new et(this._values[t].property)),this._values[t].value=new Ne(this._values[t].property,null===s?void 0:mn(s))}getTransition(t){return mn(this._values[t].transition)}setTransition(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new et(this._values[t].property)),this._values[t].transition=mn(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const c=this.getValue(s);void 0!==c&&(t[s]=c);const p=this.getTransition(s);void 0!==p&&(t[`${s}-transition`]=p)}return t}transitioned(t,s){const c=new _t(this._properties);for(const p of Object.keys(this._values))c._values[p]=this._values[p].transitioned(t,s._values[p]);return c}untransitioned(){const t=new _t(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class Ke{constructor(t,s,c,p,y){const b=p.delay||0,T=p.duration||0;y=y||0,this.property=t,this.value=s,this.begin=y+b,this.end=this.begin+T,t.specification.transition&&(p.delay||p.duration)&&(this.prior=c)}possiblyEvaluate(t,s,c){const p=t.now||0,y=this.value.possiblyEvaluate(t,s,c),b=this.prior;if(b){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return b.possiblyEvaluate(t,s,c);{const T=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,s,c),y,bt(T))}}return y}}class _t{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,c){const p=new jt(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(t,s,c);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Vt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return mn(this._values[t].value)}setValue(t,s){this._values[t]=new Ne(this._values[t].property,null===s?void 0:mn(s))}serialize(){const t={};for(const s of Object.keys(this._values)){const c=this.getValue(s);void 0!==c&&(t[s]=c)}return t}possiblyEvaluate(t,s,c){const p=new jt(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(t,s,c);return p}}class Xt{constructor(t,s,c){this.property=t,this.value=s,this.parameters=c}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,s,c,p){return this.property.evaluate(this.value,this.parameters,t,s,c,p)}}class jt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Nt{constructor(t){this.specification=t}possiblyEvaluate(t,s){return t.expression.evaluate(s)}interpolate(t,s,c){const p=os[this.specification.type];return p?p(t,s,c):t}}class tt{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,c,p){return new Xt(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(s,null,{},c,p)}:t.expression,s)}interpolate(t,s,c){if("constant"!==t.value.kind||"constant"!==s.value.kind)return t;if(void 0===t.value.value||void 0===s.value.value)return new Xt(this,{kind:"constant",value:void 0},t.parameters);const p=os[this.specification.type];return p?new Xt(this,{kind:"constant",value:p(t.value.value,s.value.value,c)},t.parameters):t}evaluate(t,s,c,p,y,b){return"constant"===t.kind?t.value:t.evaluate(s,c,p,y,b)}}class un extends tt{possiblyEvaluate(t,s,c,p){if(void 0===t.value)return new Xt(this,{kind:"constant",value:void 0},s);if("constant"===t.expression.kind){const y=t.expression.evaluate(s,null,{},c,p),b="resolvedImage"===t.property.specification.type&&"string"!=typeof y?y.name:y,T=this._calculate(b,b,b,s);return new Xt(this,{kind:"constant",value:T},s)}if("camera"===t.expression.kind){const y=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new Xt(this,{kind:"constant",value:y},s)}return new Xt(this,t.expression,s)}evaluate(t,s,c,p,y,b){if("source"===t.kind){const T=t.evaluate(s,c,p,y,b);return this._calculate(T,T,T,s)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},c,p),t.evaluate({zoom:Math.floor(s.zoom)},c,p),t.evaluate({zoom:Math.floor(s.zoom)+1},c,p),s):t.value}_calculate(t,s,c,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s,other:c}:{from:c,to:s,other:t}}interpolate(t){return t}}class gn{constructor(t){this.specification=t}possiblyEvaluate(t,s,c,p){if(void 0!==t.value){if("constant"===t.expression.kind){const y=t.expression.evaluate(s,null,{},c,p);return this._calculate(y,y,y,s)}return this._calculate(t.expression.evaluate(new Le(Math.floor(s.zoom-1),s)),t.expression.evaluate(new Le(Math.floor(s.zoom),s)),t.expression.evaluate(new Le(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,c,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:c,to:s}}interpolate(t){return t}}class qn{constructor(t){this.specification=t}possiblyEvaluate(t,s,c,p){return!!t.expression.evaluate(s,null,{},c,p)}interpolate(){return!1}}class en{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new Le(0,{});for(const c in t){const p=t[c];p.specification.overridable&&this.overridableProperties.push(c);const y=this.defaultPropertyValues[c]=new Ne(p,void 0),b=this.defaultTransitionablePropertyValues[c]=new et(p);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=y.possiblyEvaluate(s)}}}function Ci(r,t){return 256*(r=Rt(Math.floor(r),0,255))+Rt(Math.floor(t),0,255)}Wn(tt,"DataDrivenProperty"),Wn(Nt,"DataConstantProperty"),Wn(un,"CrossFadedDataDrivenProperty"),Wn(gn,"CrossFadedProperty"),Wn(qn,"ColorRampProperty");const Zn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Xn{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function jn(r,t=1){let s=0,c=0;return{members:r.map(p=>{const y=Zn[p.type].BYTES_PER_ELEMENT,b=s=Fi(s,Math.max(t,y)),T=p.components||1;return c=Math.max(c,y),s+=y*T,{name:p.name,type:p.type,components:T,offset:b}}),size:Fi(s,Math.max(c,t)),alignment:t}}function Fi(r,t){return Math.ceil(r/t)*t}class Si extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const p=2*t;return this.int16[p+0]=s,this.int16[p+1]=c,t}}Si.prototype.bytesPerElement=4,Wn(Si,"StructArrayLayout2i4");class cr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,c)}emplace(t,s,c,p){const y=3*t;return this.int16[y+0]=s,this.int16[y+1]=c,this.int16[y+2]=p,t}}cr.prototype.bytesPerElement=6,Wn(cr,"StructArrayLayout3i6");class xi extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,p)}emplace(t,s,c,p,y){const b=4*t;return this.int16[b+0]=s,this.int16[b+1]=c,this.int16[b+2]=p,this.int16[b+3]=y,t}}xi.prototype.bytesPerElement=8,Wn(xi,"StructArrayLayout4i8");class $i extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T){const I=this.length;return this.resize(I+1),this.emplace(I,t,s,c,p,y,b,T)}emplace(t,s,c,p,y,b,T,I){const A=6*t,F=12*t,j=3*t;return this.int16[A+0]=s,this.int16[A+1]=c,this.uint8[F+4]=p,this.uint8[F+5]=y,this.uint8[F+6]=b,this.uint8[F+7]=T,this.float32[j+2]=I,t}}$i.prototype.bytesPerElement=12,Wn($i,"StructArrayLayout2i4ub1f12");class Ur extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,p)}emplace(t,s,c,p,y){const b=4*t;return this.float32[b+0]=s,this.float32[b+1]=c,this.float32[b+2]=p,this.float32[b+3]=y,t}}Ur.prototype.bytesPerElement=16,Wn(Ur,"StructArrayLayout4f16");class Qr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I,A,F){const j=this.length;return this.resize(j+1),this.emplace(j,t,s,c,p,y,b,T,I,A,F)}emplace(t,s,c,p,y,b,T,I,A,F,j){const W=10*t;return this.uint16[W+0]=s,this.uint16[W+1]=c,this.uint16[W+2]=p,this.uint16[W+3]=y,this.uint16[W+4]=b,this.uint16[W+5]=T,this.uint16[W+6]=I,this.uint16[W+7]=A,this.uint16[W+8]=F,this.uint16[W+9]=j,t}}Qr.prototype.bytesPerElement=20,Wn(Qr,"StructArrayLayout10ui20");class Qo extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I){const A=this.length;return this.resize(A+1),this.emplace(A,t,s,c,p,y,b,T,I)}emplace(t,s,c,p,y,b,T,I,A){const F=8*t;return this.uint16[F+0]=s,this.uint16[F+1]=c,this.uint16[F+2]=p,this.uint16[F+3]=y,this.uint16[F+4]=b,this.uint16[F+5]=T,this.uint16[F+6]=I,this.uint16[F+7]=A,t}}Qo.prototype.bytesPerElement=16,Wn(Qo,"StructArrayLayout8ui16");class Jr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,t,s,c,p,y,b)}emplace(t,s,c,p,y,b,T){const I=6*t;return this.int16[I+0]=s,this.int16[I+1]=c,this.int16[I+2]=p,this.int16[I+3]=y,this.int16[I+4]=b,this.int16[I+5]=T,t}}Jr.prototype.bytesPerElement=12,Wn(Jr,"StructArrayLayout6i12");class Ua extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I,A,F,j,W){const J=this.length;return this.resize(J+1),this.emplace(J,t,s,c,p,y,b,T,I,A,F,j,W)}emplace(t,s,c,p,y,b,T,I,A,F,j,W,J){const le=12*t;return this.int16[le+0]=s,this.int16[le+1]=c,this.int16[le+2]=p,this.int16[le+3]=y,this.uint16[le+4]=b,this.uint16[le+5]=T,this.uint16[le+6]=I,this.uint16[le+7]=A,this.int16[le+8]=F,this.int16[le+9]=j,this.int16[le+10]=W,this.int16[le+11]=J,t}}Ua.prototype.bytesPerElement=24,Wn(Ua,"StructArrayLayout4i4ui4i24");class jr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,t,s,c,p,y,b)}emplace(t,s,c,p,y,b,T){const I=10*t,A=5*t;return this.int16[I+0]=s,this.int16[I+1]=c,this.int16[I+2]=p,this.float32[A+2]=y,this.float32[A+3]=b,this.float32[A+4]=T,t}}jr.prototype.bytesPerElement=20,Wn(jr,"StructArrayLayout3i3f20");class kl extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}kl.prototype.bytesPerElement=4,Wn(kl,"StructArrayLayout1ul4");class eo extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I,A,F,j,W,J){const le=this.length;return this.resize(le+1),this.emplace(le,t,s,c,p,y,b,T,I,A,F,j,W,J)}emplace(t,s,c,p,y,b,T,I,A,F,j,W,J,le){const fe=20*t,Re=10*t;return this.int16[fe+0]=s,this.int16[fe+1]=c,this.int16[fe+2]=p,this.int16[fe+3]=y,this.int16[fe+4]=b,this.float32[Re+3]=T,this.float32[Re+4]=I,this.float32[Re+5]=A,this.float32[Re+6]=F,this.int16[fe+14]=j,this.uint32[Re+8]=W,this.uint16[fe+18]=J,this.uint16[fe+19]=le,t}}eo.prototype.bytesPerElement=40,Wn(eo,"StructArrayLayout5i4f1i1ul2ui40");class ko extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T){const I=this.length;return this.resize(I+1),this.emplace(I,t,s,c,p,y,b,T)}emplace(t,s,c,p,y,b,T,I){const A=8*t;return this.int16[A+0]=s,this.int16[A+1]=c,this.int16[A+2]=p,this.int16[A+4]=y,this.int16[A+5]=b,this.int16[A+6]=T,this.int16[A+7]=I,t}}ko.prototype.bytesPerElement=16,Wn(ko,"StructArrayLayout3i2i2i16");class Br extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y){const b=this.length;return this.resize(b+1),this.emplace(b,t,s,c,p,y)}emplace(t,s,c,p,y,b){const T=4*t,I=8*t;return this.float32[T+0]=s,this.float32[T+1]=c,this.float32[T+2]=p,this.int16[I+6]=y,this.int16[I+7]=b,t}}Br.prototype.bytesPerElement=16,Wn(Br,"StructArrayLayout2f1f2i16");class Mr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,p)}emplace(t,s,c,p,y){const b=12*t,T=3*t;return this.uint8[b+0]=s,this.uint8[b+1]=c,this.float32[T+1]=p,this.float32[T+2]=y,t}}Mr.prototype.bytesPerElement=12,Wn(Mr,"StructArrayLayout2ub2f12");class Jo extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,c)}emplace(t,s,c,p){const y=3*t;return this.float32[y+0]=s,this.float32[y+1]=c,this.float32[y+2]=p,t}}Jo.prototype.bytesPerElement=12,Wn(Jo,"StructArrayLayout3f12");class kr extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,c)}emplace(t,s,c,p){const y=3*t;return this.uint16[y+0]=s,this.uint16[y+1]=c,this.uint16[y+2]=p,t}}kr.prototype.bytesPerElement=6,Wn(kr,"StructArrayLayout3ui6");class gs extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt){const Et=this.length;return this.resize(Et+1),this.emplace(Et,t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt)}emplace(t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt,Et){const Ht=30*t,Kt=15*t,fn=60*t;return this.int16[Ht+0]=s,this.int16[Ht+1]=c,this.int16[Ht+2]=p,this.float32[Kt+2]=y,this.float32[Kt+3]=b,this.uint16[Ht+8]=T,this.uint16[Ht+9]=I,this.uint32[Kt+5]=A,this.uint32[Kt+6]=F,this.uint32[Kt+7]=j,this.uint16[Ht+16]=W,this.uint16[Ht+17]=J,this.uint16[Ht+18]=le,this.float32[Kt+10]=fe,this.float32[Kt+11]=Re,this.uint8[fn+48]=ze,this.uint8[fn+49]=it,this.uint8[fn+50]=Qe,this.uint32[Kt+13]=pt,this.int16[Ht+28]=yt,this.uint8[fn+58]=Et,t}}gs.prototype.bytesPerElement=60,Wn(gs,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Gu extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt,Jt,Ln,Bn){const oi=this.length;return this.resize(oi+1),this.emplace(oi,t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt,Jt,Ln,Bn)}emplace(t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re,ze,it,Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt,Jt,Ln,Bn,oi){const In=38*t,ii=19*t;return this.int16[In+0]=s,this.int16[In+1]=c,this.int16[In+2]=p,this.float32[ii+2]=y,this.float32[ii+3]=b,this.int16[In+8]=T,this.int16[In+9]=I,this.int16[In+10]=A,this.int16[In+11]=F,this.int16[In+12]=j,this.int16[In+13]=W,this.uint16[In+14]=J,this.uint16[In+15]=le,this.uint16[In+16]=fe,this.uint16[In+17]=Re,this.uint16[In+18]=ze,this.uint16[In+19]=it,this.uint16[In+20]=Qe,this.uint16[In+21]=pt,this.uint16[In+22]=yt,this.uint16[In+23]=Et,this.uint16[In+24]=Ht,this.uint16[In+25]=Kt,this.uint16[In+26]=fn,this.uint16[In+27]=Mn,this.uint16[In+28]=Pt,this.uint32[ii+15]=Jt,this.float32[ii+16]=Ln,this.float32[ii+17]=Bn,this.float32[ii+18]=oi,t}}Gu.prototype.bytesPerElement=76,Wn(Gu,"StructArrayLayout3i2f6i15ui1ul3f76");class da extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}da.prototype.bytesPerElement=4,Wn(da,"StructArrayLayout1f4");class $u extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y,b,T){const I=this.length;return this.resize(I+1),this.emplace(I,t,s,c,p,y,b,T)}emplace(t,s,c,p,y,b,T,I){const A=7*t;return this.float32[A+0]=s,this.float32[A+1]=c,this.float32[A+2]=p,this.float32[A+3]=y,this.float32[A+4]=b,this.float32[A+5]=T,this.float32[A+6]=I,t}}$u.prototype.bytesPerElement=28,Wn($u,"StructArrayLayout7f28");class fd extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,p,y){const b=this.length;return this.resize(b+1),this.emplace(b,t,s,c,p,y)}emplace(t,s,c,p,y,b){const T=5*t;return this.float32[T+0]=s,this.float32[T+1]=c,this.float32[T+2]=p,this.float32[T+3]=y,this.float32[T+4]=b,t}}fd.prototype.bytesPerElement=20,Wn(fd,"StructArrayLayout5f20");class $c extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,p){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,p)}emplace(t,s,c,p,y){const b=6*t;return this.uint32[3*t+0]=s,this.uint16[b+2]=c,this.uint16[b+3]=p,this.uint16[b+4]=y,t}}$c.prototype.bytesPerElement=12,Wn($c,"StructArrayLayout1ul3ui12");class as extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const p=2*t;return this.uint16[p+0]=s,this.uint16[p+1]=c,t}}as.prototype.bytesPerElement=4,Wn(as,"StructArrayLayout2ui4");class Ol extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}Ol.prototype.bytesPerElement=2,Wn(Ol,"StructArrayLayout1ui2");class Rl extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const p=2*t;return this.float32[p+0]=s,this.float32[p+1]=c,t}}Rl.prototype.bytesPerElement=8,Wn(Rl,"StructArrayLayout2f8");class po extends Xn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}po.prototype.size=12;class Yn extends Jr{get(t){return new po(this,t)}}Wn(Yn,"FillExtrusionExtArray");class Hi extends Xn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Hi.prototype.size=40;class es extends eo{get(t){return new Hi(this,t)}}Wn(es,"CollisionBoxArray");class Ec extends Xn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Ec.prototype.size=60;class Ys extends gs{get(t){return new Ec(this,t)}}Wn(Ys,"PlacedSymbolArray");class ja extends Xn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ja.prototype.size=76;class Zd extends Gu{get(t){return new ja(this,t)}}Wn(Zd,"SymbolInstanceArray");class No extends da{getoffsetX(t){return this.float32[1*t+0]}}Wn(No,"GlyphOffsetArray");class Ms extends cr{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Wn(Ms,"SymbolLineVertexArray");class Hc extends Xn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Hc.prototype.size=12;class rr extends $c{get(t){return new Hc(this,t)}}Wn(rr,"FeatureIndexArray");class zh extends Xn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}zh.prototype.size=4;class vp extends as{get(t){return new zh(this,t)}}Wn(vp,"FillExtrusionCentroidArray");class qd extends Xn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}qd.prototype.size=12;class To extends Jr{get(t){return new qd(this,t)}}Wn(To,"CircleGlobeExtArray");const Yd=jn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Vh=jn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var fu=Tr(function(r){r.exports=function(t,s){var c,p,y,b,T,I,A,F;for(p=t.length-(c=3&t.length),y=s,T=3432918353,I=461845907,F=0;F<p;)A=255&t.charCodeAt(F)|(255&t.charCodeAt(++F))<<8|(255&t.charCodeAt(++F))<<16|(255&t.charCodeAt(++F))<<24,++F,y=27492+(65535&(b=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*T+(((A>>>16)*T&65535)<<16)&4294967295)<<15|A>>>17))*I+(((A>>>16)*I&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(A=0,c){case 3:A^=(255&t.charCodeAt(F+2))<<16;case 2:A^=(255&t.charCodeAt(F+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(F)))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<15|A>>>17))*I+(((A>>>16)*I&65535)<<16)&4294967295}return y^=t.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),bp=Tr(function(r){r.exports=function(t,s){for(var c,p=t.length,y=s^p,b=0;p>=4;)c=1540483477*(65535&(c=255&t.charCodeAt(b)|(255&t.charCodeAt(++b))<<8|(255&t.charCodeAt(++b))<<16|(255&t.charCodeAt(++b))<<24))+((1540483477*(c>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),p-=4,++b;switch(p){case 3:y^=(255&t.charCodeAt(b+2))<<16;case 2:y^=(255&t.charCodeAt(b+1))<<8;case 1:y=1540483477*(65535&(y^=255&t.charCodeAt(b)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),Uh=fu,md=bp;Uh.murmur3=fu,Uh.murmur2=md;class Qd{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,c,p){this.ids.push(Jl(t)),this.positions.push(s,c,p)}getPositions(t){const s=Jl(t);let c=0,p=this.ids.length-1;for(;c<p;){const b=c+p>>1;this.ids[b]>=s?p=b:c=b+1}const y=[];for(;this.ids[c]===s;)y.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return y}static serialize(t,s){const c=new Float64Array(t.ids),p=new Uint32Array(t.positions);return Pi(c,p,0,c.length-1),s&&s.push(c.buffer,p.buffer),{ids:c,positions:p}}static deserialize(t){const s=new Qd;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function Jl(r){const t=+r;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Uh(String(r))}function Pi(r,t,s,c){for(;s<c;){const p=r[s+c>>1];let y=s-1,b=c+1;for(;;){do{y++}while(r[y]<p);do{b--}while(r[b]>p);if(y>=b)break;jh(r,y,b),jh(t,3*y,3*b),jh(t,3*y+1,3*b+1),jh(t,3*y+2,3*b+2)}b-s<c-b?(Pi(r,t,s,b),s=b+1):(Pi(r,t,b+1,c),c=b)}}function jh(r,t,s){const c=r[t];r[t]=r[s],r[s]=c}Wn(Qd,"FeaturePositionMap");class ec{constructor(t,s){this.gl=t.gl,this.location=s}}class ol extends ec{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class xp extends ec{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class mu extends ec{constructor(t,s){super(t,s),this.current=ar.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Ss=new Float32Array(16),Cf=new Float32Array(9),ha=new Float32Array(4);function pa(r){return[Ci(255*r.r,255*r.g),Ci(255*r.b,255*r.a)]}class Jd{constructor(t,s,c){this.value=t,this.uniformNames=s.map(p=>`u_${p}`),this.type=c}setUniform(t,s,c){t.set(c.constantOr(this.value))}getBinding(t,s,c){return"color"===this.type?new mu(t,s):new ol(t,s)}}class Cc{constructor(t,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio||1,this.pixelRatioTo=t.pixelRatio||1,this.patternFrom=s.tl.concat(s.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,s,c,p){const y="u_pattern_to"===p||"u_dash_to"===p?this.patternTo:"u_pattern_from"===p||"u_dash_from"===p?this.patternFrom:"u_pixel_ratio_to"===p?this.pixelRatioTo:"u_pixel_ratio_from"===p?this.pixelRatioFrom:null;y&&t.set(y)}getBinding(t,s,c){return"u_pattern_from"===c||"u_pattern_to"===c||"u_dash_from"===c||"u_dash_to"===c?new xp(t,s):new ol(t,s)}}class Tc{constructor(t,s,c,p){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:"color"===c?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(t,s,c,p,y,b){const T=this.paintVertexArray.length,I=this.expression.evaluate(new Le(0),s,{},y,p,b);this.paintVertexArray.resize(t),this._setPaintValue(T,t,I)}updatePaintArray(t,s,c,p,y){const b=this.expression.evaluate({zoom:0},c,p,void 0,y);this._setPaintValue(t,s,b)}_setPaintValue(t,s,c){if("color"===this.type){const p=pa(c);for(let y=t;y<s;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=t;p<s;p++)this.paintVertexArray.emplace(p,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Is{constructor(t,s,c,p,y,b){this.expression=t,this.uniformNames=s.map(T=>`u_${T}_t`),this.type=c,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(T=>({name:`a_${T}`,type:"Float32",components:"color"===c?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,s,c,p,y,b){const T=this.expression.evaluate(new Le(this.zoom),s,{},y,p,b),I=this.expression.evaluate(new Le(this.zoom+1),s,{},y,p,b),A=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(A,t,T,I)}updatePaintArray(t,s,c,p,y){const b=this.expression.evaluate({zoom:this.zoom},c,p,void 0,y),T=this.expression.evaluate({zoom:this.zoom+1},c,p,void 0,y);this._setPaintValue(t,s,b,T)}_setPaintValue(t,s,c,p){if("color"===this.type){const y=pa(c),b=pa(p);for(let T=t;T<s;T++)this.paintVertexArray.emplace(T,y[0],y[1],b[0],b[1])}else{for(let y=t;y<s;y++)this.paintVertexArray.emplace(y,c,p);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=Rt(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,s,c){return new ol(t,s)}}class Dc{constructor(t,s,c,p,y,b,T){this.expression=t,this.type=c,this.useIntegerZoom=p,this.zoom=y,this.layerId=T,this.paintVertexAttributes=("array"===c?Vh:Yd).members;for(let I=0;I<s.length;++I);this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(t,s,c){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(t,s,c,p,y,b){this._setPaintValues(t,s,c.patterns&&c.patterns[this.layerId],b)}_setPaintValues(t,s,c,p){if(!p||!c)return;const{min:y,mid:b,max:T}=c,I=p[y],A=p[b],F=p[T];if(I&&A&&F)for(let j=t;j<s;j++)this._setPaintValue(this.zoomInPaintVertexArray,j,A,I),this._setPaintValue(this.zoomOutPaintVertexArray,j,A,F)}_setPaintValue(t,s,c,p){t.emplace(s,c.tl[0],c.tl[1],c.br[0],c.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],c.pixelRatio,p.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gd{constructor(t,s,c=(()=>!0)){this.binders={},this._buffers=[];const p=[];for(const y in t.paint._values){if(!c(y))continue;const b=t.paint.get(y);if(!(b instanceof Xt&&nl(b.property.specification)))continue;const T=Xg(y,t.type),I=b.value,A=b.property.specification.type,F=b.property.useIntegerZoom,j=b.property.specification["property-type"],W="cross-faded"===j||"cross-faded-data-driven"===j,J="line-dasharray"===String(y)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==I.kind||J)if("source"===I.kind||J||W){const le=Xy(y,A,"source");this.binders[y]=W?new Dc(I,T,A,F,s,le,t.id):new Tc(I,T,A,le),p.push(`/a_${y}`)}else{const le=Xy(y,A,"composite");this.binders[y]=new Is(I,T,A,F,s,le),p.push(`/z_${y}`)}else this.binders[y]=W?new Cc(I.value,T):new Jd(I.value,T,A),p.push(`/u_${y}`)}this.cacheKey=p.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof Tc||s instanceof Is?s.maxValue:0}populatePaintArrays(t,s,c,p,y,b){for(const T in this.binders){const I=this.binders[T];(I instanceof Tc||I instanceof Is||I instanceof Dc)&&I.populatePaintArray(t,s,c,p,y,b)}}setConstantPatternPositions(t,s){for(const c in this.binders){const p=this.binders[c];p instanceof Cc&&p.setConstantPatternPositions(t,s)}}updatePaintArrays(t,s,c,p,y,b){let T=!1;for(const I in t){const A=s.getPositions(I);for(const F of A){const j=c.feature(F.index);for(const W in this.binders){const J=this.binders[W];if((J instanceof Tc||J instanceof Is||J instanceof Dc)&&!0===J.expression.isStateDependent){const le=p.paint.get(W);J.expression=le.value,J.updatePaintArray(F.start,F.end,j,t[I],y,b),T=!0}}}}return T}defines(){const t=[];for(const s in this.binders){const c=this.binders[s];(c instanceof Jd||c instanceof Cc)&&t.push(...c.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Tc||c instanceof Is||c instanceof Dc)for(let p=0;p<c.paintVertexAttributes.length;p++)t.push(c.paintVertexAttributes[p].name)}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Jd||c instanceof Cc||c instanceof Is)for(const p of c.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const c=[];for(const p in this.binders){const y=this.binders[p];if(y instanceof Jd||y instanceof Cc||y instanceof Is)for(const b of y.uniformNames)if(s[b]){const T=y.getBinding(t,s[b],b);c.push({name:b,property:p,binding:T})}}return c}setUniforms(t,s,c,p){for(const{name:y,property:b,binding:T}of s)this.binders[b].setUniform(T,p,c.get(b),y)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(t&&c instanceof Dc){const p=2===t.fromScale?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(c instanceof Tc||c instanceof Is)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const s in this.binders){const c=this.binders[s];(c instanceof Tc||c instanceof Is||c instanceof Dc)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof Tc||s instanceof Is||s instanceof Dc)&&s.destroy()}}}class Mc{constructor(t,s,c=(()=>!0)){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new gd(p,s,c);this.needsUpload=!1,this._featureMap=new Qd,this._bufferOffset=0}populatePaintArrays(t,s,c,p,y,b,T){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(t,s,p,y,b,T);void 0!==s.id&&this._featureMap.add(s.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,c,p,y){for(const b of c)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(t,this._featureMap,s,b,p,y)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Gh={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Xg(r,t){return Gh[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}const Wy={"line-pattern":{source:Qr,composite:Qr},"fill-pattern":{source:Qr,composite:Qr},"fill-extrusion-pattern":{source:Qr,composite:Qr},"line-dasharray":{source:Qo,composite:Qo}},Rm={color:{source:Rl,composite:Ur},number:{source:da,composite:Rl}};function Xy(r,t,s){const c=Wy[r];return c&&c[s]||Rm[t][s]}Wn(Jd,"ConstantBinder"),Wn(Cc,"CrossFadedConstantBinder"),Wn(Tc,"SourceExpressionBinder"),Wn(Dc,"CrossFadedCompositeBinder"),Wn(Is,"CompositeExpressionBinder"),Wn(gd,"ProgramConfiguration",{omit:["_buffers"]}),Wn(Mc,"ProgramConfigurationSet");const Pm="-transition";class gu extends Ri{constructor(t,s){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),s.layout&&(this._unevaluatedLayout=new Vt(s.layout)),s.paint)){this._transitionablePaint=new je(s.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jt(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,s,c={}){null!=s&&this._validate(ka,`layers.${this.id}.layout.${t}`,t,s,c)||("visibility"!==t?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return Ut(t,Pm)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,c={}){if(null!=s&&this._validate(ad,`layers.${this.id}.paint.${t}`,t,s,c))return!1;if(Ut(t,Pm))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[t],y="cross-faded-data-driven"===p.property.specification["property-type"],b=p.value.isDataDriven(),T=p.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const I=this._transitionablePaint._values[t].value;return I.isDataDriven()||b||y||this._handleOverridablePaintPropertyUpdate(t,T,I)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,s,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Fn(t,(s,c)=>!(void 0===s||"layout"===c&&!Object.keys(s).length||"paint"===c&&!Object.keys(s).length))}_validate(t,s,c,p,y={}){return(!y||!1!==y.validate)&&ld(this,t.call(du,{key:s,layerType:this.type,objectKey:c,value:p,styleSpec:xt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof Xt&&nl(s.property.specification)&&("source"===s.value.kind||"composite"===s.value.kind)&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ql(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const qb=jn([{name:"a_pos",components:2,type:"Int16"}],4),Yb=jn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ls{constructor(t=[]){this.segments=t}prepareSegment(t,s,c,p){let y=this.segments[this.segments.length-1];return t>ls.MAX_VERTEX_ARRAY_LENGTH&&ai(`Max vertices per segment is ${ls.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!y||y.vertexLength+t>ls.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},void 0!==p&&(y.sortKey=p),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,c,p){return new ls([{vertexOffset:t,primitiveOffset:s,vertexLength:c,primitiveLength:p,vaos:{},sortKey:0}])}}ls.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wn(ls,"SegmentVector");var Ai=8192;class eh{constructor(t,s){t&&(s?this.setSouthWest(t).setNorthEast(s):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ao?new ao(t.lng,t.lat):ao.convert(t),this}setSouthWest(t){return this._sw=t instanceof ao?new ao(t.lng,t.lat):ao.convert(t),this}extend(t){const s=this._sw,c=this._ne;let p,y;if(t instanceof ao)p=t,y=t;else{if(!(t instanceof eh))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(eh.convert(t)):this.extend(ao.convert(t)):this;if(p=t._sw,y=t._ne,!p||!y)return this}return s||c?(s.lng=Math.min(p.lng,s.lng),s.lat=Math.min(p.lat,s.lat),c.lng=Math.max(y.lng,c.lng),c.lat=Math.max(y.lat,c.lat)):(this._sw=new ao(p.lng,p.lat),this._ne=new ao(y.lng,y.lat)),this}getCenter(){return new ao((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ao(this.getWest(),this.getNorth())}getSouthEast(){return new ao(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:s,lat:c}=ao.convert(t);let p=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&p}static convert(t){return!t||t instanceof eh?t:new eh(t)}}const $h=6371008.8;class ao{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ao(An(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,c=this.lat*s,p=t.lat*s,y=Math.sin(c)*Math.sin(p)+Math.cos(c)*Math.cos(p)*Math.cos((t.lng-this.lng)*s);return $h*Math.acos(Math.min(y,1))}toBounds(t=0){const s=360*t/40075017,c=s/Math.cos(Math.PI/180*this.lat);return new eh(new ao(this.lng-c,this.lat-s),new ao(this.lng+c,this.lat+s))}static convert(t){if(t instanceof ao)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ao(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ao(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ky=2*Math.PI*$h;function Kg(r){return Ky*Math.cos(r*Math.PI/180)}function _d(r){return(180+r)/360}function yd(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Wc(r,t){return r/Kg(t)}function sl(r){return 360*r-180}function As(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Zy(r,t){return r*Kg(As(t))}const _u=85.051129;class th{constructor(t,s,c=0){this.x=+t,this.y=+s,this.z=+c}static fromLngLat(t,s=0){const c=ao.convert(t);return new th(_d(c.lng),yd(c.lat),Wc(s,c.lat))}toLngLat(){return new ao(sl(this.x),As(this.y))}toAltitude(){return Zy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ky*(t=As(this.y),1/Math.cos(t*Math.PI/180));var t}}function wp(r,t,s,c,p,y,b,T,I){const A=(t+c)/2,F=(s+p)/2,j=new ke(A,F);T(j),function(W,J,le,fe,Re,ze){const it=le-Re,Qe=fe-ze;return Math.abs((fe-J)*it-(le-W)*Qe)/Math.hypot(it,Qe)}(j.x,j.y,y.x,y.y,b.x,b.y)>=I?(wp(r,t,s,A,F,y,j,T,I),wp(r,A,F,c,p,j,b,T,I)):r.push(b)}function Lm(r,t,s){let c=r[0],p=c.x,y=c.y;t(c);const b=[c];for(let T=1;T<r.length;T++){const I=r[T],{x:A,y:F}=I;t(I),wp(b,p,y,A,F,c,I,t,s),p=A,y=F,c=I}return b}function Fm(r,t,s,c,p){if(p(t,s)){const y=t.add(s).mult(.5);c(y),Fm(r,t,y,c,p),Fm(r,y,s,c,p)}else r.push(s)}function qy(r,t,s){let c=r[0];t(c);const p=[c];for(let y=1;y<r.length;y++){const b=r[y];t(b),Fm(p,c,b,t,s),c=b}return p}const Tf=Math.pow(2,14)-1,vd=-Tf-1;function Zg(r,t){const s=Math.round(r.x*t),c=Math.round(r.y*t);return r.x=Rt(s,vd,Tf),r.y=Rt(c,vd,Tf),(s<r.x||s>r.x+1||c<r.y||c>r.y+1)&&ai("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function Xc(r,t,s){const c=r.loadGeometry(),p=r.extent,y=Ai/p;if(t&&s&&s.projection.isReprojectedInTileSpace){const b=1<<t.z,{scale:T,x:I,y:A,projection:F}=s,j=W=>{const J=sl((t.x+W.x/p)/b),le=As((t.y+W.y/p)/b),fe=F.project(J,le);W.x=(fe.x*T-I)*p,W.y=(fe.y*T-A)*p};for(let W=0;W<c.length;W++)if(1!==r.type)c[W]=Lm(c[W],j,1);else{const J=[];for(const le of c[W])le.x<0||le.x>=p||le.y<0||le.y>=p||(j(le),J.push(le));c[W]=J}}for(const b of c)for(const T of b)Zg(T,y);return c}function nh(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Xc(r):[]}}function tc(r,t,s,c,p){r.emplaceBack(2*t+(c+1)/2,2*s+(p+1)/2)}function Ep(r,t,s){r.emplaceBack(t.x,t.y,t.z,16384*s[0],16384*s[1],16384*s[2])}class Df{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Si,this.indexArray=new kr,this.segments=new ls,this.programConfigurations=new Mc(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c,p){const y=this.layers[0],b=[];let T=null;"circle"===y.type&&(T=y.layout.get("circle-sort-key"));for(const{feature:A,id:F,index:j,sourceLayerIndex:W}of t){const J=this.layers[0]._featureFilter.needGeometry,le=nh(A,J);if(!this.layers[0]._featureFilter.filter(new Le(this.zoom),le,c))continue;const fe=T?T.evaluate(le,{},c):void 0,Re={id:F,properties:A.properties,type:A.type,sourceLayerIndex:W,index:j,geometry:J?le.geometry:Xc(A,c,p),patterns:{},sortKey:fe};b.push(Re)}T&&b.sort((A,F)=>A.sortKey-F.sortKey);let I=null;"globe"===p.projection.name&&(this.globeExtVertexArray=new To,I=p.projection);for(const A of b){const{geometry:F,index:j,sourceLayerIndex:W}=A,J=t[j].feature;this.addFeature(A,F,j,s.availableImages,c,I),s.featureIndex.insert(J,F,j,W,this.index)}}update(t,s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,qb.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Yb.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,s,c,p,y,b){for(const T of s)for(const I of T){const A=I.x,F=I.y;if(A<0||A>=Ai||F<0||F>=Ai)continue;if(b){const J=b.projectTilePoint(A,F,y),le=b.upVector(y,A,F),fe=this.globeExtVertexArray;Ep(fe,J,le),Ep(fe,J,le),Ep(fe,J,le),Ep(fe,J,le)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),W=j.vertexLength;tc(this.layoutVertexArray,A,F,-1,-1),tc(this.layoutVertexArray,A,F,1,-1),tc(this.layoutVertexArray,A,F,1,1),tc(this.layoutVertexArray,A,F,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+2,W+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},p,y)}}function Gr(r,t){for(let s=0;s<r.length;s++)if(Ll(t,r[s]))return!0;for(let s=0;s<t.length;s++)if(Ll(r,t[s]))return!0;return!!Bm(r,t)}function Nm(r,t,s){return!!Ll(r,t)||!!Hu(t,r,s)}function Hh(r,t){if(1===r.length)return qg(t,r[0]);for(let s=0;s<t.length;s++){const c=t[s];for(let p=0;p<c.length;p++)if(Ll(r,c[p]))return!0}for(let s=0;s<r.length;s++)if(qg(t,r[s]))return!0;for(let s=0;s<t.length;s++)if(Bm(r,t[s]))return!0;return!1}function al(r,t,s){if(r.length>1){if(Bm(r,t))return!0;for(let c=0;c<t.length;c++)if(Hu(t[c],r,s))return!0}for(let c=0;c<r.length;c++)if(Hu(r[c],t,s))return!0;return!1}function Bm(r,t){if(0===r.length||0===t.length)return!1;for(let s=0;s<r.length-1;s++){const c=r[s],p=r[s+1];for(let y=0;y<t.length-1;y++)if(Cp(c,p,t[y],t[y+1]))return!0}return!1}function Cp(r,t,s,c){return Nn(r,s,c)!==Nn(t,s,c)&&Nn(r,t,s)!==Nn(r,t,c)}function Hu(r,t,s){const c=s*s;if(1===t.length)return r.distSqr(t[0])<c;for(let p=1;p<t.length;p++)if(Pl(r,t[p-1],t[p])<c)return!0;return!1}function Pl(r,t,s){const c=t.distSqr(s);if(0===c)return r.distSqr(t);const p=((r.x-t.x)*(s.x-t.x)+(r.y-t.y)*(s.y-t.y))/c;return r.distSqr(p<0?t:p>1?s:s.sub(t)._mult(p)._add(t))}function qg(r,t){let s,c,p,y=!1;for(let b=0;b<r.length;b++){s=r[b];for(let T=0,I=s.length-1;T<s.length;I=T++)c=s[T],p=s[I],c.y>t.y!=p.y>t.y&&t.x<(p.x-c.x)*(t.y-c.y)/(p.y-c.y)+c.x&&(y=!y)}return y}function Ll(r,t){let s=!1;for(let c=0,p=r.length-1;c<r.length;p=c++){const y=r[c],b=r[p];y.y>t.y!=b.y>t.y&&t.x<(b.x-y.x)*(t.y-y.y)/(b.y-y.y)+y.x&&(s=!s)}return s}function Tp(r,t,s,c,p){for(const b of r)if(t<=b.x&&s<=b.y&&c>=b.x&&p>=b.y)return!0;const y=[new ke(t,s),new ke(t,p),new ke(c,p),new ke(c,s)];if(r.length>2)for(const b of y)if(Ll(r,b))return!0;for(let b=0;b<r.length-1;b++)if(Sc(r[b],r[b+1],y))return!0;return!1}function Sc(r,t,s){const c=s[0],p=s[2];if(r.x<c.x&&t.x<c.x||r.x>p.x&&t.x>p.x||r.y<c.y&&t.y<c.y||r.y>p.y&&t.y>p.y)return!1;const y=Nn(r,t,s[0]);return y!==Nn(r,t,s[1])||y!==Nn(r,t,s[2])||y!==Nn(r,t,s[3])}function ih(r,t,s){const c=t.paint.get(r).value;return"constant"===c.kind?c.value:s.programConfigurations.get(t.id).getMaxValue(r)}function Dp(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function bd(r,t,s,c,p){if(!t[0]&&!t[1])return r;const y=ke.convert(t)._mult(p);"viewport"===s&&y._rotate(-c);const b=[];for(let T=0;T<r.length;T++)b.push(r[T].sub(y));return b}function yu(r,t,s,c){const p=ke.convert(r)._mult(c);return"viewport"===t&&p._rotate(-s),p}Wn(Df,"CircleBucket",{omit:["layers"]});const zm=new en({"circle-sort-key":new tt(xt.layout_circle["circle-sort-key"])});var Mf={paint:new en({"circle-radius":new tt(xt.paint_circle["circle-radius"]),"circle-color":new tt(xt.paint_circle["circle-color"]),"circle-blur":new tt(xt.paint_circle["circle-blur"]),"circle-opacity":new tt(xt.paint_circle["circle-opacity"]),"circle-translate":new Nt(xt.paint_circle["circle-translate"]),"circle-translate-anchor":new Nt(xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nt(xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nt(xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new tt(xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new tt(xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new tt(xt.paint_circle["circle-stroke-opacity"])}),layout:zm},rh=1e-6,Ga=typeof Float32Array<"u"?Float32Array:Array;function vu(){var r=new Ga(9);return Ga!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function ki(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Kc(r,t,s){var c=t[0],p=t[1],y=t[2],b=t[3],T=t[4],I=t[5],A=t[6],F=t[7],j=t[8],W=t[9],J=t[10],le=t[11],fe=t[12],Re=t[13],ze=t[14],it=t[15],Qe=s[0],pt=s[1],yt=s[2],Et=s[3];return r[0]=Qe*c+pt*T+yt*j+Et*fe,r[1]=Qe*p+pt*I+yt*W+Et*Re,r[2]=Qe*y+pt*A+yt*J+Et*ze,r[3]=Qe*b+pt*F+yt*le+Et*it,r[4]=(Qe=s[4])*c+(pt=s[5])*T+(yt=s[6])*j+(Et=s[7])*fe,r[5]=Qe*p+pt*I+yt*W+Et*Re,r[6]=Qe*y+pt*A+yt*J+Et*ze,r[7]=Qe*b+pt*F+yt*le+Et*it,r[8]=(Qe=s[8])*c+(pt=s[9])*T+(yt=s[10])*j+(Et=s[11])*fe,r[9]=Qe*p+pt*I+yt*W+Et*Re,r[10]=Qe*y+pt*A+yt*J+Et*ze,r[11]=Qe*b+pt*F+yt*le+Et*it,r[12]=(Qe=s[12])*c+(pt=s[13])*T+(yt=s[14])*j+(Et=s[15])*fe,r[13]=Qe*p+pt*I+yt*W+Et*Re,r[14]=Qe*y+pt*A+yt*J+Et*ze,r[15]=Qe*b+pt*F+yt*le+Et*it,r}function Wu(r,t,s){var c,p,y,b,T,I,A,F,j,W,J,le,fe=s[0],Re=s[1],ze=s[2];return t===r?(r[12]=t[0]*fe+t[4]*Re+t[8]*ze+t[12],r[13]=t[1]*fe+t[5]*Re+t[9]*ze+t[13],r[14]=t[2]*fe+t[6]*Re+t[10]*ze+t[14],r[15]=t[3]*fe+t[7]*Re+t[11]*ze+t[15]):(p=t[1],y=t[2],b=t[3],T=t[4],I=t[5],A=t[6],F=t[7],j=t[8],W=t[9],J=t[10],le=t[11],r[0]=c=t[0],r[1]=p,r[2]=y,r[3]=b,r[4]=T,r[5]=I,r[6]=A,r[7]=F,r[8]=j,r[9]=W,r[10]=J,r[11]=le,r[12]=c*fe+T*Re+j*ze+t[12],r[13]=p*fe+I*Re+W*ze+t[13],r[14]=y*fe+A*Re+J*ze+t[14],r[15]=b*fe+F*Re+le*ze+t[15]),r}function Zc(r,t,s){var c=s[0],p=s[1],y=s[2];return r[0]=t[0]*c,r[1]=t[1]*c,r[2]=t[2]*c,r[3]=t[3]*c,r[4]=t[4]*p,r[5]=t[5]*p,r[6]=t[6]*p,r[7]=t[7]*p,r[8]=t[8]*y,r[9]=t[9]*y,r[10]=t[10]*y,r[11]=t[11]*y,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Vm(r,t,s){var c=Math.sin(s),p=Math.cos(s),y=t[4],b=t[5],T=t[6],I=t[7],A=t[8],F=t[9],j=t[10],W=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=y*p+A*c,r[5]=b*p+F*c,r[6]=T*p+j*c,r[7]=I*p+W*c,r[8]=A*p-y*c,r[9]=F*p-b*c,r[10]=j*p-T*c,r[11]=W*p-I*c,r}function Sf(r,t,s){var c=Math.sin(s),p=Math.cos(s),y=t[0],b=t[1],T=t[2],I=t[3],A=t[8],F=t[9],j=t[10],W=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=y*p-A*c,r[1]=b*p-F*c,r[2]=T*p-j*c,r[3]=I*p-W*c,r[8]=y*c+A*p,r[9]=b*c+F*p,r[10]=T*c+j*p,r[11]=I*c+W*p,r}function Yg(r,t,s){var c,p,y,b=s[0],T=s[1],I=s[2],A=Math.hypot(b,T,I);return A<rh?null:(b*=A=1/A,T*=A,I*=A,c=Math.sin(t),p=Math.cos(t),r[0]=b*b*(y=1-p)+p,r[1]=T*b*y+I*c,r[2]=I*b*y-T*c,r[3]=0,r[4]=b*T*y-I*c,r[5]=T*T*y+p,r[6]=I*T*y+b*c,r[7]=0,r[8]=b*I*y+T*c,r[9]=T*I*y-b*c,r[10]=I*I*y+p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Yy=Kc;function If(){var r=new Ga(3);return Ga!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Xu(r){var t=new Ga(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Mp(r){return Math.hypot(r[0],r[1],r[2])}function Ku(r,t,s){var c=new Ga(3);return c[0]=r,c[1]=t,c[2]=s,c}function xd(r,t,s){return r[0]=t[0]+s[0],r[1]=t[1]+s[1],r[2]=t[2]+s[2],r}function Um(r,t,s){return r[0]=t[0]-s[0],r[1]=t[1]-s[1],r[2]=t[2]-s[2],r}function Qg(r,t,s){return r[0]=t[0]*s[0],r[1]=t[1]*s[1],r[2]=t[2]*s[2],r}function pn(r,t,s){return r[0]=Math.min(t[0],s[0]),r[1]=Math.min(t[1],s[1]),r[2]=Math.min(t[2],s[2]),r}function Er(r,t,s){return r[0]=Math.max(t[0],s[0]),r[1]=Math.max(t[1],s[1]),r[2]=Math.max(t[2],s[2]),r}function qc(r,t,s){return r[0]=t[0]*s,r[1]=t[1]*s,r[2]=t[2]*s,r}function Sp(r,t,s,c){return r[0]=t[0]+s[0]*c,r[1]=t[1]+s[1]*c,r[2]=t[2]+s[2]*c,r}function xr(r,t){var s=t[0],c=t[1],p=t[2],y=s*s+c*c+p*p;return y>0&&(y=1/Math.sqrt(y)),r[0]=t[0]*y,r[1]=t[1]*y,r[2]=t[2]*y,r}function nc(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function oh(r,t,s){var c=t[0],p=t[1],y=t[2],b=s[0],T=s[1],I=s[2];return r[0]=p*I-y*T,r[1]=y*b-c*I,r[2]=c*T-p*b,r}function Oo(r,t,s){var c=t[0],p=t[1],y=t[2],b=s[3]*c+s[7]*p+s[11]*y+s[15];return r[0]=(s[0]*c+s[4]*p+s[8]*y+s[12])/(b=b||1),r[1]=(s[1]*c+s[5]*p+s[9]*y+s[13])/b,r[2]=(s[2]*c+s[6]*p+s[10]*y+s[14])/b,r}function Af(r,t,s){var c=s[0],p=s[1],y=s[2],b=t[0],T=t[1],I=t[2],A=p*I-y*T,F=y*b-c*I,j=c*T-p*b,W=p*j-y*F,J=y*A-c*j,le=c*F-p*A,fe=2*s[3];return F*=fe,j*=fe,J*=2,le*=2,r[0]=b+(A*=fe)+(W*=2),r[1]=T+F+J,r[2]=I+j+le,r}var sh,ic=Um,Qb=Qg,Jb=Mp;function jm(r,t,s){return r[0]=t[0]*s,r[1]=t[1]*s,r[2]=t[2]*s,r[3]=t[3]*s,r}function Zu(r,t,s){var c=t[0],p=t[1],y=t[2],b=t[3];return r[0]=s[0]*c+s[4]*p+s[8]*y+s[12]*b,r[1]=s[1]*c+s[5]*p+s[9]*y+s[13]*b,r[2]=s[2]*c+s[6]*p+s[10]*y+s[14]*b,r[3]=s[3]*c+s[7]*p+s[11]*y+s[15]*b,r}function Ip(){var r=new Ga(4);return Ga!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function $a(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function bu(r,t,s){s*=.5;var c=t[0],p=t[1],y=t[2],b=t[3],T=Math.sin(s),I=Math.cos(s);return r[0]=c*I+b*T,r[1]=p*I+y*T,r[2]=y*I-p*T,r[3]=b*I-c*T,r}function Gm(r,t,s){s*=.5;var c=t[0],p=t[1],y=t[2],b=t[3],T=Math.sin(s),I=Math.cos(s);return r[0]=c*I-y*T,r[1]=p*I+b*T,r[2]=y*I+c*T,r[3]=b*I-p*T,r}If(),sh=new Ga(4),Ga!=Float32Array&&(sh[0]=0,sh[1]=0,sh[2]=0,sh[3]=0),If(),Ku(1,0,0),Ku(0,1,0),Ip(),Ip(),vu();class Fl{constructor(t,s){this.pos=t,this.dir=s}intersectsPlane(t,s,c){const p=nc(s,this.dir);if(Math.abs(p)<1e-6)return!1;const y=((t[0]-this.pos[0])*s[0]+(t[1]-this.pos[1])*s[1]+(t[2]-this.pos[2])*s[2])/p;return c[0]=this.pos[0]+this.dir[0]*y,c[1]=this.pos[1]+this.dir[1]*y,c[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(t,s,c){if(fe=(J=this.pos)[0],Re=J[1],ze=J[2],it=(le=t)[0],Qe=le[1],pt=le[2],Math.abs(fe-it)<=rh*Math.max(1,Math.abs(fe),Math.abs(it))&&Math.abs(Re-Qe)<=rh*Math.max(1,Math.abs(Re),Math.abs(Qe))&&Math.abs(ze-pt)<=rh*Math.max(1,Math.abs(ze),Math.abs(pt))||0===s)return c[0]=c[1]=c[2]=0,!1;var J,le,fe,Re,ze,it,Qe,pt;const[p,y,b]=this.dir,T=this.pos[0]-t[0],I=this.pos[1]-t[1],A=this.pos[2]-t[2],F=p*p+y*y+b*b,j=2*(T*p+I*y+A*b),W=j*j-4*F*(T*T+I*I+A*A-s*s);if(W<0){const J=Math.max(-j/2,0),le=T+p*J,fe=I+y*J,Re=A+b*J,ze=Math.hypot(le,fe,Re);return c[0]=le*s/ze,c[1]=fe*s/ze,c[2]=Re*s/ze,!1}{const J=(-j-Math.sqrt(W))/(2*F);if(J<0){const le=Math.hypot(T,I,A);return c[0]=T*s/le,c[1]=I*s/le,c[2]=A*s/le,!1}return c[0]=T+p*J,c[1]=I+y*J,c[2]=A+b*J,!0}}}class Yc{constructor(t,s,c,p,y){this.TL=t,this.TR=s,this.BR=c,this.BL=p,this.horizon=y}static fromInvProjectionMatrix(t,s,c){const p=[-1,1,1],y=[1,1,1],b=[1,-1,1],T=[-1,-1,1],I=Oo(p,p,t),A=Oo(y,y,t),F=Oo(b,b,t),j=Oo(T,T,t);return new Yc(I,A,F,j,s/c)}}class kf{constructor(t,s){this.points=t,this.planes=s}static fromInvProjectionMatrix(t,s,c,p){const y=Math.pow(2,c),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const A=Zu([],I,t),F=1/A[3]/s*y;return(j=A)[0]=(W=A)[0]*(J=[F,F,p?1/A[3]:F,F])[0],j[1]=W[1]*J[1],j[2]=W[2]*J[2],j[3]=W[3]*J[3],j;var j,W,J}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const A=xr([],oh([],ic([],b[I[0]],b[I[1]]),ic([],b[I[2]],b[I[1]]))),F=-nc(A,b[I[1]]);return A.concat(F)});return new kf(b,T)}}class Nl{constructor(t,s){this.min=t,this.max=s,this.center=qc([],xd([],this.min,this.max),.5)}quadrant(t){const s=[t%2==0,t<2],c=Xu(this.min),p=Xu(this.max);for(let y=0;y<s.length;y++)c[y]=s[y]?this.min[y]:this.center[y],p[y]=s[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new Nl(c,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,s=this.max;return[[t[0],t[1],t[2]],[s[0],t[1],t[2]],[s[0],s[1],t[2]],[t[0],s[1],t[2]],[t[0],t[1],s[2]],[s[0],t[1],s[2]],[s[0],s[1],s[2]],[t[0],s[1],s[2]]]}intersects(t){const s=this.getCorners();let c=!0;for(let p=0;p<t.planes.length;p++){const y=t.planes[p];let b=0;for(let T=0;T<s.length;T++)b+=nc(y,s[T])+y[3]>=0;if(0===b)return 0;b!==s.length&&(c=!1)}if(c)return 2;for(let p=0;p<3;p++){let y=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<t.points.length;T++){const I=t.points[T][p]-this.min[p];y=Math.min(y,I),b=Math.max(b,I)}if(b<0||y>this.max[p]-this.min[p])return 0}return 1}}function Jg(r,t,s,c,p,y,b,T,I){if(y&&r.queryGeometry.isAboveHorizon)return!1;y&&(I*=r.pixelToTileUnitsFactor);const A=r.tileID.canonical,F=s.projection.upVectorScale(A,s.center.lat,s.worldSize).metersToTile;for(const j of t)for(const W of j){const J=W.add(T),le=p&&s.elevation?s.elevation.exaggeration()*p.getElevationAt(J.x,J.y,!0):0,fe=s.projection.projectTilePoint(J.x,J.y,A);if(le>0){const Qe=s.projection.upVector(A,J.x,J.y);fe.x+=Qe[0]*F*le,fe.y+=Qe[1]*F*le,fe.z+=Qe[2]*F*le}const Re=y?J:Qy(fe.x,fe.y,fe.z,c),ze=y?r.tilespaceRays.map(Qe=>Hm(Qe,le)):r.queryGeometry.screenGeometry,it=Zu([],[fe.x,fe.y,fe.z,1],c);if(!b&&y?I*=it[3]/s.cameraToCenterDistance:b&&!y&&(I*=s.cameraToCenterDistance/it[3]),y){const Qe=As((W.y/Ai+A.y)/(1<<A.z));I/=s.projection.pixelsPerMeter(Qe,1)/Wc(1,Qe)}if(Nm(ze,Re,I))return!0}return!1}function Qy(r,t,s,c){const p=Zu([],[r,t,s,1],c);return new ke(p[0]/p[3],p[1]/p[3])}const Ap=Ku(0,0,0),$m=Ku(0,0,1);function Hm(r,t){const s=If();return Ap[2]=t,r.intersectsPlane(Ap,$m,s),new ke(s[0],s[1])}class Wh extends Df{}function e_(r,{width:t,height:s},c,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*s*c)throw new RangeError("mismatched image size")}else p=new Uint8Array(t*s*c);return r.width=t,r.height=s,r.data=p,r}function kp(r,t,s){const{width:c,height:p}=t;c===r.width&&p===r.height||(Op(r,t,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,c),height:Math.min(r.height,p)},s),r.width=c,r.height=p,r.data=t.data)}function Op(r,t,s,c,p,y){if(0===p.width||0===p.height)return t;if(p.width>r.width||p.height>r.height||s.x>r.width-p.width||s.y>r.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||c.x>t.width-p.width||c.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const b=r.data,T=t.data;for(let I=0;I<p.height;I++){const A=((s.y+I)*r.width+s.x)*y,F=((c.y+I)*t.width+c.x)*y;for(let j=0;j<p.width*y;j++)T[F+j]=b[A+j]}return t}Wn(Wh,"HeatmapBucket",{omit:["layers"]});class Ic{constructor(t,s){e_(this,t,1,s)}resize(t){kp(this,new Ic(t),1)}clone(){return new Ic({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,c,p,y){Op(t,s,c,p,y,1)}}class ll{constructor(t,s){e_(this,t,4,s)}resize(t){kp(this,new ll(t),4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ll({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,c,p,y){Op(t,s,c,p,y,4)}}Wn(Ic,"AlphaImage"),Wn(ll,"RGBAImage");var t_={paint:new en({"heatmap-radius":new tt(xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new tt(xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nt(xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qn(xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nt(xt.paint_heatmap["heatmap-opacity"])})};function Of(r){const t={},s=r.resolution||256,c=r.clips?r.clips.length:1,p=r.image||new ll({width:s,height:c}),y=(b,T,I)=>{t[r.evaluationKey]=I;const A=r.expression.evaluate(t);p.data[b+T+0]=Math.floor(255*A.r/A.a),p.data[b+T+1]=Math.floor(255*A.g/A.a),p.data[b+T+2]=Math.floor(255*A.b/A.a),p.data[b+T+3]=Math.floor(255*A.a)};if(r.clips)for(let b=0,T=0;b<c;++b,T+=4*s)for(let I=0,A=0;I<s;I++,A+=4){const F=I/(s-1),{start:j,end:W}=r.clips[b];y(T,A,j*(1-F)+W*F)}else for(let b=0,T=0;b<s;b++,T+=4)y(0,T,b/(s-1));return p}var Wm={paint:new en({"hillshade-illumination-direction":new Nt(xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nt(xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nt(xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nt(xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nt(xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nt(xt.paint_hillshade["hillshade-accent-color"])})};const Jy=jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ra}=Jy;var Ac=ah,Ho=ah;function ah(r,t,s){s=s||2;var c,p,y,b,T,I,A,F=t&&t.length,j=F?t[0]*s:r.length,W=n_(r,0,j,s,!0),J=[];if(!W||W.next===W.prev)return J;if(F&&(W=function(fe,Re,ze,it){var Qe,pt,yt,Et=[];for(Qe=0,pt=Re.length;Qe<pt;Qe++)(yt=n_(fe,Re[Qe]*it,Qe<pt-1?Re[Qe+1]*it:fe.length,it,!1))===yt.next&&(yt.steiner=!0),Et.push(Km(yt));for(Et.sort(i_),Qe=0;Qe<Et.length;Qe++)ze=Qc(ze=Lp(Et[Qe],ze),ze.next);return ze}(r,t,W,s)),r.length>80*s){c=y=r[0],p=b=r[1];for(var le=s;le<j;le+=s)(T=r[le])<c&&(c=T),(I=r[le+1])<p&&(p=I),T>y&&(y=T),I>b&&(b=I);A=0!==(A=Math.max(y-c,b-p))?1/A:0}return Rp(W,J,s,c,p,A),J}function n_(r,t,s,c,p){var y,b;if(p===zp(r,t,s,c)>0)for(y=t;y<s;y+=c)b=o_(y,r[y],r[y+1],b);else for(y=s-c;y>=t;y-=c)b=o_(y,r[y],r[y+1],b);return b&&cl(b,b.next)&&(Bp(b),b=b.next),b}function Qc(r,t){if(!r)return r;t||(t=r);var s,c=r;do{if(s=!1,c.steiner||!cl(c,c.next)&&0!==cs(c.prev,c,c.next))c=c.next;else{if(Bp(c),(c=t=c.prev)===c.next)break;s=!0}}while(s||c!==t);return t}function Rp(r,t,s,c,p,y,b){if(r){!b&&y&&function(F,j,W,J){var le=F;do{null===le.z&&(le.z=Xh(le.x,le.y,j,W,J)),le.prevZ=le.prev,le.nextZ=le.next,le=le.next}while(le!==F);le.prevZ.nextZ=null,le.prevZ=null,function(fe){var Re,ze,it,Qe,pt,yt,Et,Ht,Kt=1;do{for(ze=fe,fe=null,pt=null,yt=0;ze;){for(yt++,it=ze,Et=0,Re=0;Re<Kt&&(Et++,it=it.nextZ);Re++);for(Ht=Kt;Et>0||Ht>0&&it;)0!==Et&&(0===Ht||!it||ze.z<=it.z)?(Qe=ze,ze=ze.nextZ,Et--):(Qe=it,it=it.nextZ,Ht--),pt?pt.nextZ=Qe:fe=Qe,Qe.prevZ=pt,pt=Qe;ze=it}pt.nextZ=null,Kt*=2}while(yt>1)}(le)}(r,c,p,y);for(var T,I,A=r;r.prev!==r.next;)if(T=r.prev,I=r.next,y?Xm(r,c,p,y):Rf(r))t.push(T.i/s),t.push(r.i/s),t.push(I.i/s),Bp(r),r=I.next,A=I.next;else if((r=I)===A){b?1===b?Rp(r=Pp(Qc(r),t,s),t,s,c,p,y,2):2===b&&Jc(r,t,s,c,p,y):Rp(Qc(r),t,s,c,p,y,1);break}}}function Rf(r){var t=r.prev,s=r,c=r.next;if(cs(t,s,c)>=0)return!1;for(var p=r.next.next;p!==r.prev;){if(lh(t.x,t.y,s.x,s.y,c.x,c.y,p.x,p.y)&&cs(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Xm(r,t,s,c){var p=r.prev,y=r,b=r.next;if(cs(p,y,b)>=0)return!1;for(var T=p.x>y.x?p.x>b.x?p.x:b.x:y.x>b.x?y.x:b.x,I=p.y>y.y?p.y>b.y?p.y:b.y:y.y>b.y?y.y:b.y,A=Xh(p.x<y.x?p.x<b.x?p.x:b.x:y.x<b.x?y.x:b.x,p.y<y.y?p.y<b.y?p.y:b.y:y.y<b.y?y.y:b.y,t,s,c),F=Xh(T,I,t,s,c),j=r.prevZ,W=r.nextZ;j&&j.z>=A&&W&&W.z<=F;){if(j!==r.prev&&j!==r.next&&lh(p.x,p.y,y.x,y.y,b.x,b.y,j.x,j.y)&&cs(j.prev,j,j.next)>=0||(j=j.prevZ,W!==r.prev&&W!==r.next&&lh(p.x,p.y,y.x,y.y,b.x,b.y,W.x,W.y)&&cs(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;j&&j.z>=A;){if(j!==r.prev&&j!==r.next&&lh(p.x,p.y,y.x,y.y,b.x,b.y,j.x,j.y)&&cs(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;W&&W.z<=F;){if(W!==r.prev&&W!==r.next&&lh(p.x,p.y,y.x,y.y,b.x,b.y,W.x,W.y)&&cs(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function Pp(r,t,s){var c=r;do{var p=c.prev,y=c.next.next;!cl(p,y)&&xu(p,c,c.next,y)&&uh(p,y)&&uh(y,p)&&(t.push(p.i/s),t.push(c.i/s),t.push(y.i/s),Bp(c),Bp(c.next),c=r=y),c=c.next}while(c!==r);return Qc(c)}function Jc(r,t,s,c,p,y){var b=r;do{for(var T=b.next.next;T!==b.prev;){if(b.i!==T.i&&r_(b,T)){var I=Np(b,T);return b=Qc(b,b.next),I=Qc(I,I.next),Rp(b,t,s,c,p,y),void Rp(I,t,s,c,p,y)}T=T.next}b=b.next}while(b!==r)}function i_(r,t){return r.x-t.x}function Lp(r,t){var s=function(y,b){var T,I=b,A=y.x,F=y.y,j=-1/0;do{if(F<=I.y&&F>=I.next.y&&I.next.y!==I.y){var W=I.x+(F-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(W<=A&&W>j){if(j=W,W===A){if(F===I.y)return I;if(F===I.next.y)return I.next}T=I.x<I.next.x?I:I.next}}I=I.next}while(I!==b);if(!T)return null;if(A===j)return T;var J,le=T,fe=T.x,Re=T.y,ze=1/0;I=T;do{A>=I.x&&I.x>=fe&&A!==I.x&&lh(F<Re?A:j,F,fe,Re,F<Re?j:A,F,I.x,I.y)&&(J=Math.abs(F-I.y)/(A-I.x),uh(I,y)&&(J<ze||J===ze&&(I.x>T.x||I.x===T.x&&Fp(T,I)))&&(T=I,ze=J)),I=I.next}while(I!==le);return T}(r,t);if(!s)return t;var c=Np(s,r),p=Qc(s,s.next);return Qc(c,c.next),t===s?p:t}function Fp(r,t){return cs(r.prev,r,t.prev)<0&&cs(t.next,r,r.next)<0}function Xh(r,t,s,c,p){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*p)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Km(r){var t=r,s=r;do{(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next}while(t!==r);return s}function lh(r,t,s,c,p,y,b,T){return(p-b)*(t-T)-(r-b)*(y-T)>=0&&(r-b)*(c-T)-(s-b)*(t-T)>=0&&(s-b)*(y-T)-(p-b)*(c-T)>=0}function r_(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(s,c){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==c.i&&p.next.i!==c.i&&xu(p,p.next,s,c))return!0;p=p.next}while(p!==s);return!1}(r,t)&&(uh(r,t)&&uh(t,r)&&function(s,c){var p=s,y=!1,b=(s.x+c.x)/2,T=(s.y+c.y)/2;do{p.y>T!=p.next.y>T&&p.next.y!==p.y&&b<(p.next.x-p.x)*(T-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next}while(p!==s);return y}(r,t)&&(cs(r.prev,r,t.prev)||cs(r,t.prev,t))||cl(r,t)&&cs(r.prev,r,r.next)>0&&cs(t.prev,t,t.next)>0)}function cs(r,t,s){return(t.y-r.y)*(s.x-t.x)-(t.x-r.x)*(s.y-t.y)}function cl(r,t){return r.x===t.x&&r.y===t.y}function xu(r,t,s,c){var p=ch(cs(r,t,s)),y=ch(cs(r,t,c)),b=ch(cs(s,c,r)),T=ch(cs(s,c,t));return p!==y&&b!==T||!(0!==p||!Pf(r,s,t))||!(0!==y||!Pf(r,c,t))||!(0!==b||!Pf(s,r,c))||!(0!==T||!Pf(s,t,c))}function Pf(r,t,s){return t.x<=Math.max(r.x,s.x)&&t.x>=Math.min(r.x,s.x)&&t.y<=Math.max(r.y,s.y)&&t.y>=Math.min(r.y,s.y)}function ch(r){return r>0?1:r<0?-1:0}function uh(r,t){return cs(r.prev,r,r.next)<0?cs(r,t,r.next)>=0&&cs(r,r.prev,t)>=0:cs(r,t,r.prev)<0||cs(r,r.next,t)<0}function Np(r,t){var s=new s_(r.i,r.x,r.y),c=new s_(t.i,t.x,t.y),p=r.next,y=t.prev;return r.next=t,t.prev=r,s.next=p,p.prev=s,c.next=s,s.prev=c,y.next=c,c.prev=y,c}function o_(r,t,s,c){var p=new s_(r,t,s);return c?(p.next=c.next,p.prev=c,c.next.prev=p,c.next=p):(p.prev=p,p.next=p),p}function Bp(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function s_(r,t,s){this.i=r,this.x=t,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zp(r,t,s,c){for(var p=0,y=t,b=s-c;y<s;y+=c)p+=(r[b]-r[y])*(r[y+1]+r[b+1]),b=y;return p}function wd(r,t,s,c,p){Vp(r,t,s||0,c||r.length-1,p||ev)}function Vp(r,t,s,c,p){for(;c>s;){if(c-s>600){var y=c-s+1,b=t-s+1,T=Math.log(y),I=.5*Math.exp(2*T/3),A=.5*Math.sqrt(T*I*(y-I)/y)*(b-y/2<0?-1:1);Vp(r,t,Math.max(s,Math.floor(t-b*I/y+A)),Math.min(c,Math.floor(t+(y-b)*I/y+A)),p)}var F=r[t],j=s,W=c;for(qu(r,s,t),p(r[c],F)>0&&qu(r,s,c);j<W;){for(qu(r,j,W),j++,W--;p(r[j],F)<0;)j++;for(;p(r[W],F)>0;)W--}0===p(r[s],F)?qu(r,s,W):qu(r,++W,c),W<=t&&(s=W+1),t<=W&&(c=W-1)}}function qu(r,t,s){var c=r[t];r[t]=r[s],r[s]=c}function ev(r,t){return r<t?-1:r>t?1:0}function dh(r,t){const s=r.length;if(s<=1)return[r];const c=[];let p,y;for(let b=0;b<s;b++){const T=tn(r[b]);0!==T&&(r[b].area=Math.abs(T),void 0===y&&(y=T<0),y===T<0?(p&&c.push(p),p=[r[b]]):p.push(r[b]))}if(p&&c.push(p),t>1)for(let b=0;b<c.length;b++)c[b].length<=t||(wd(c[b],t,1,c[b].length-1,tv),c[b]=c[b].slice(0,t));return c}function tv(r,t){return t.area-r.area}function Up(r,t,s){const c=s.patternDependencies;let p=!1;for(const y of t){const b=y.paint.get(`${r}-pattern`);b.isConstant()||(p=!0);const T=b.constantOr(null);T&&(p=!0,c[T.to]=!0,c[T.from]=!0)}return p}function hh(r,t,s,c,p){const y=p.patternDependencies;for(const b of t){const T=b.paint.get(`${r}-pattern`).value;if("constant"!==T.kind){let I=T.evaluate({zoom:c-1},s,{},p.availableImages),A=T.evaluate({zoom:c},s,{},p.availableImages),F=T.evaluate({zoom:c+1},s,{},p.availableImages);I=I&&I.name?I.name:I,A=A&&A.name?A.name:A,F=F&&F.name?F.name:F,y[I]=!0,y[A]=!0,y[F]=!0,s.patterns[b.id]={min:I,mid:A,max:F}}}return s}ah.deviation=function(r,t,s,c){var p=t&&t.length,y=Math.abs(zp(r,0,p?t[0]*s:r.length,s));if(p)for(var b=0,T=t.length;b<T;b++)y-=Math.abs(zp(r,t[b]*s,b<T-1?t[b+1]*s:r.length,s));var I=0;for(b=0;b<c.length;b+=3){var A=c[b]*s,F=c[b+1]*s,j=c[b+2]*s;I+=Math.abs((r[A]-r[j])*(r[F+1]-r[A+1])-(r[A]-r[F])*(r[j+1]-r[A+1]))}return 0===y&&0===I?0:Math.abs((I-y)/y)},ah.flatten=function(r){for(var t=r[0][0].length,s={vertices:[],holes:[],dimensions:t},c=0,p=0;p<r.length;p++){for(var y=0;y<r[p].length;y++)for(var b=0;b<t;b++)s.vertices.push(r[p][y][b]);p>0&&s.holes.push(c+=r[p-1].length)}return s},Ac.default=Ho;class Zm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Si,this.indexArray=new kr,this.indexArray2=new as,this.programConfigurations=new Mc(t.layers,t.zoom),this.segments=new ls,this.segments2=new ls,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=t.projection}populate(t,s,c,p){this.hasPattern=Up("fill",this.layers,s);const y=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:T,id:I,index:A,sourceLayerIndex:F}of t){const j=this.layers[0]._featureFilter.needGeometry,W=nh(T,j);if(!this.layers[0]._featureFilter.filter(new Le(this.zoom),W,c))continue;const J=y?y.evaluate(W,{},c,s.availableImages):void 0,le={id:I,properties:T.properties,type:T.type,sourceLayerIndex:F,index:A,geometry:j?W.geometry:Xc(T,c,p),patterns:{},sortKey:J};b.push(le)}y&&b.sort((T,I)=>T.sortKey-I.sortKey);for(const T of b){const{geometry:I,index:A,sourceLayerIndex:F}=T;if(this.hasPattern){const j=hh("fill",this.layers,T,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(T,I,A,c,{},s.availableImages);s.featureIndex.insert(t[A].feature,I,A,F,this.index)}}update(t,s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c,p)}addFeatures(t,s,c,p,y){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,s,c,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ra),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,c,p,y,b=[]){for(const T of dh(s,500)){let I=0;for(const le of T)I+=le.length;const A=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),F=A.vertexLength,j=[],W=[];for(const le of T){if(0===le.length)continue;le!==T[0]&&W.push(j.length/2);const fe=this.segments2.prepareSegment(le.length,this.layoutVertexArray,this.indexArray2),Re=fe.vertexLength;this.layoutVertexArray.emplaceBack(le[0].x,le[0].y),this.indexArray2.emplaceBack(Re+le.length-1,Re),j.push(le[0].x),j.push(le[0].y);for(let ze=1;ze<le.length;ze++)this.layoutVertexArray.emplaceBack(le[ze].x,le[ze].y),this.indexArray2.emplaceBack(Re+ze-1,Re+ze),j.push(le[ze].x),j.push(le[ze].y);fe.vertexLength+=le.length,fe.primitiveLength+=le.length}const J=Ac(j,W);for(let le=0;le<J.length;le+=3)this.indexArray.emplaceBack(F+J[le],F+J[le+1],F+J[le+2]);A.vertexLength+=I,A.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,b,p)}}Wn(Zm,"FillBucket",{omit:["layers","patternFeatures"]});const a_=new en({"fill-sort-key":new tt(xt.layout_fill["fill-sort-key"])});var l_={paint:new en({"fill-antialias":new Nt(xt.paint_fill["fill-antialias"]),"fill-opacity":new tt(xt.paint_fill["fill-opacity"]),"fill-color":new tt(xt.paint_fill["fill-color"]),"fill-outline-color":new tt(xt.paint_fill["fill-outline-color"]),"fill-translate":new Nt(xt.paint_fill["fill-translate"]),"fill-translate-anchor":new Nt(xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new un(xt.paint_fill["fill-pattern"])}),layout:a_};const c_=jn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),wu=jn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),nv=jn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Lf}=c_;var Ff=Yu;function Yu(r,t,s,c,p){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=p,r.readFields(Nf,this,t)}function Nf(r,t,s){1==r?t.id=s.readVarint():2==r?function(c,p){for(var y=c.readVarint()+c.pos;c.pos<y;){var b=p._keys[c.readVarint()],T=p._values[c.readVarint()];p.properties[b]=T}}(s,t):3==r?t.type=s.readVarint():4==r&&(t._geometry=s.pos)}function qm(r){for(var t,s,c=0,p=0,y=r.length,b=y-1;p<y;b=p++)c+=((s=r[b]).x-(t=r[p]).x)*(t.y+s.y);return c}Yu.types=["Unknown","Point","LineString","Polygon"],Yu.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,s=r.readVarint()+r.pos,c=1,p=0,y=0,b=0,T=[];r.pos<s;){if(p<=0){var I=r.readVarint();c=7&I,p=I>>3}if(p--,1===c||2===c)y+=r.readSVarint(),b+=r.readSVarint(),1===c&&(t&&T.push(t),t=[]),t.push(new ke(y,b));else{if(7!==c)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&T.push(t),T},Yu.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,s=1,c=0,p=0,y=0,b=1/0,T=-1/0,I=1/0,A=-1/0;r.pos<t;){if(c<=0){var F=r.readVarint();s=7&F,c=F>>3}if(c--,1===s||2===s)(p+=r.readSVarint())<b&&(b=p),p>T&&(T=p),(y+=r.readSVarint())<I&&(I=y),y>A&&(A=y);else if(7!==s)throw new Error("unknown command "+s)}return[b,I,T,A]},Yu.prototype.toGeoJSON=function(r,t,s){var c,p,y=this.extent*Math.pow(2,s),b=this.extent*r,T=this.extent*t,I=this.loadGeometry(),A=Yu.types[this.type];function F(J){for(var le=0;le<J.length;le++){var fe=J[le];J[le]=[360*(fe.x+b)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(fe.y+T)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(c=0;c<I.length;c++)j[c]=I[c][0];F(I=j);break;case 2:for(c=0;c<I.length;c++)F(I[c]);break;case 3:for(I=function(J){var le=J.length;if(le<=1)return[J];for(var fe,Re,ze=[],it=0;it<le;it++){var Qe=qm(J[it]);0!==Qe&&(void 0===Re&&(Re=Qe<0),Re===Qe<0?(fe&&ze.push(fe),fe=[J[it]]):fe.push(J[it]))}return fe&&ze.push(fe),ze}(I),c=0;c<I.length;c++)for(p=0;p<I[c].length;p++)F(I[c][p])}1===I.length?I=I[0]:A="Multi"+A;var W={type:"Feature",geometry:{type:A,coordinates:I},properties:this.properties};return"id"in this&&(W.id=this.id),W};var u_=jp;function jp(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(d_,this,t),this.length=this._features.length}function d_(r,t,s){15===r?t.version=s.readVarint():1===r?t.name=s.readString():5===r?t.extent=s.readVarint():2===r?t._features.push(s.pos):3===r?t._keys.push(s.readString()):4===r&&t._values.push(function(c){for(var p=null,y=c.readVarint()+c.pos;c.pos<y;){var b=c.readVarint()>>3;p=1===b?c.readString():2===b?c.readFloat():3===b?c.readDouble():4===b?c.readVarint64():5===b?c.readVarint():6===b?c.readSVarint():7===b?c.readBoolean():null}return p}(s))}function Bf(r,t,s){if(3===r){var c=new u_(s,s.readVarint()+s.pos);c.length&&(t[c.name]=c)}}jp.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new Ff(this._pbf,t,this.extent,this._keys,this._values)};var Ed={VectorTile:function(r,t){this.layers=r.readFields(Bf,{},t)},VectorTileFeature:Ff,VectorTileLayer:u_};function zf(r,t,s,c){const p=[],y=0===c?(b,T,I,A,F,j)=>{b.push(new ke(j,I+(j-T)/(A-T)*(F-I)))}:(b,T,I,A,F,j)=>{b.push(new ke(T+(j-I)/(F-I)*(A-T),j))};for(const b of r){const T=[];for(const I of b){if(I.length<=2)continue;const A=[];for(let W=0;W<I.length-1;W++){const J=I[W].x,le=I[W].y,fe=I[W+1].x,Re=I[W+1].y,ze=0===c?J:le,it=0===c?fe:Re;ze<t?it>t&&y(A,J,le,fe,Re,t):ze>s?it<s&&y(A,J,le,fe,Re,s):A.push(I[W]),it<t&&ze>=t&&y(A,J,le,fe,Re,t),it>s&&ze<=s&&y(A,J,le,fe,Re,s)}let F=I[I.length-1];const j=0===c?F.x:F.y;j>=t&&j<=s&&A.push(F),A.length&&(F=A[A.length-1],A[0].x===F.x&&A[0].y===F.y||A.push(A[0]),T.push(A))}T.length&&p.push(T)}return p}const Vf=Ed.VectorTileFeature.types,ph=Math.pow(2,13);function Gp(r,t,s,c,p,y,b,T){r.emplaceBack((t<<1)+b,(s<<1)+y,(Math.floor(c*ph)<<1)+p,Math.round(T))}function Kh(r,t,s){r.emplaceBack(t.x,t.y,t.z,16384*s[0],16384*s[1],16384*s[2])}class Ym{constructor(){this.acc=new ke(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ke(t.x,t.y),this.max=new ke(t.x,t.y))}append(t,s){this.currentPolyCount.edges++,this.acc._add(t);const c=this.min,p=this.max;t.x<c.x?c.x=t.x:t.x>p.x&&(p.x=t.x),t.y<c.y?c.y=t.y:t.y>p.y&&(p.y=t.y),((0===t.x||t.x===Ai)&&t.x===s.x)!=((0===t.y||t.y===Ai)&&t.y===s.y)&&this.processBorderOverlap(t,s),s.x<0!=t.x<0&&this.addBorderIntersection(0,Xi(s.y,t.y,(0-s.x)/(t.x-s.x))),s.x>Ai!=t.x>Ai&&this.addBorderIntersection(1,Xi(s.y,t.y,(Ai-s.x)/(t.x-s.x))),s.y<0!=t.y<0&&this.addBorderIntersection(2,Xi(s.x,t.x,(0-s.y)/(t.y-s.y))),s.y>Ai!=t.y>Ai&&this.addBorderIntersection(3,Xi(s.x,t.x,(Ai-s.y)/(t.y-s.y)))}addBorderIntersection(t,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[t];s<c[0]&&(c[0]=s),s>c[1]&&(c[1]=s)}processBorderOverlap(t,s){if(t.x===s.x){if(t.y===s.y)return;const c=0===t.x?0:1;this.addBorderIntersection(c,s.y),this.addBorderIntersection(c,t.y)}else{const c=0===t.y?2:3;this.addBorderIntersection(c,s.x),this.addBorderIntersection(c,t.x)}}centroid(){const t=this.polyCount.reduce((s,c)=>s+c.edges,0);return 0!==t?this.acc.div(t)._round():new ke(0,0)}span(){return new ke(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,s)=>t+ +(s[0]!==Number.MAX_VALUE),0)}}class Eu{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new xi,this.centroidVertexArray=new vp,this.indexArray=new kr,this.programConfigurations=new Mc(t.layers,t.zoom),this.segments=new ls,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=t.enableTerrain}populate(t,s,c,p){this.features=[],this.hasPattern=Up("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const b=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*b/(b*b+1)/Ai/(1<<y.z)}(c);for(const{feature:y,id:b,index:T,sourceLayerIndex:I}of t){const A=this.layers[0]._featureFilter.needGeometry,F=nh(y,A);if(!this.layers[0]._featureFilter.filter(new Le(this.zoom),F,c))continue;const j={id:b,sourceLayerIndex:I,index:T,geometry:A?F.geometry:Xc(y,c,p),properties:y.properties,type:y.type,patterns:{}},W=this.layoutVertexArray.length;this.hasPattern?this.features.push(hh("fill-extrusion",this.layers,j,this.zoom,s)):this.addFeature(j,j.geometry,T,c,{},s.availableImages,p),s.featureIndex.insert(y,j.geometry,T,I,this.index,W)}this.sortBorders()}addFeatures(t,s,c,p,y){for(const b of this.features){const{geometry:T}=b;this.addFeature(b,T,b.index,s,c,p,y)}this.sortBorders()}update(t,s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lf),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,nv.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,wu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,c,p,y,b,T){const I=[new ke(0,0),new ke(Ai,Ai)],A=T.projection,F="globe"===A.name,j=this.enableTerrain&&!F?new Ym:null;F&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Yn);const W=dh(s,500);for(let fe=W.length-1;fe>=0;fe--){const Re=W[fe];(0===Re.length||(J=Re[0]).every(ze=>ze.x<=0)||J.every(ze=>ze.x>=Ai)||J.every(ze=>ze.y<=0)||J.every(ze=>ze.y>=Ai))&&W.splice(fe,1)}var J;let le;if(F)le=h_(W,I,p);else{le=[];for(const fe of W)le.push({polygon:fe,bounds:I})}for(const fe of le){const Re=fe.polygon;let ze=0,it=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let Ht=0;Ht<Re.length;Ht++){const Kt=Re[Ht];if(0===Kt.length)continue;ze+=Kt.length;let fn=0;j&&j.startRing(Kt[0]);for(let Mn=0;Mn<Kt.length;Mn++){const Pt=Kt[Mn];if(Mn>=1){const Jt=Kt[Mn-1];if(!Zh(Pt,Jt,fe.bounds)){j&&j.append(Pt,Jt),it.vertexLength+4>ls.MAX_VERTEX_ARRAY_LENGTH&&(it=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ln=Pt.sub(Jt)._perp(),Bn=Ln.x/(Math.abs(Ln.x)+Math.abs(Ln.y)),oi=Ln.y>0?1:0,In=Jt.dist(Pt);fn+In>32768&&(fn=0),Gp(this.layoutVertexArray,Pt.x,Pt.y,Bn,oi,0,0,fn),Gp(this.layoutVertexArray,Pt.x,Pt.y,Bn,oi,0,1,fn),fn+=In,Gp(this.layoutVertexArray,Jt.x,Jt.y,Bn,oi,0,0,fn),Gp(this.layoutVertexArray,Jt.x,Jt.y,Bn,oi,0,1,fn);const ii=it.vertexLength;if(this.indexArray.emplaceBack(ii,ii+2,ii+1),this.indexArray.emplaceBack(ii+1,ii+2,ii+3),it.vertexLength+=4,it.primitiveLength+=2,F){const Qi=this.layoutVertexExtArray,nr=A.projectTilePoint(Pt.x,Pt.y,p),Ii=A.projectTilePoint(Jt.x,Jt.y,p),ti=A.upVector(p,Pt.x,Pt.y),hr=A.upVector(p,Jt.x,Jt.y);Kh(Qi,nr,ti),Kh(Qi,nr,ti),Kh(Qi,Ii,hr),Kh(Qi,Ii,hr)}}}}}if(it.vertexLength+ze>ls.MAX_VERTEX_ARRAY_LENGTH&&(it=this.segments.prepareSegment(ze,this.layoutVertexArray,this.indexArray)),"Polygon"!==Vf[t.type])continue;const Qe=[],pt=[],yt=it.vertexLength;for(let Ht=0;Ht<Re.length;Ht++){const Kt=Re[Ht];if(0!==Kt.length){Kt!==Re[0]&&pt.push(Qe.length/2);for(let fn=0;fn<Kt.length;fn++){const Mn=Kt[fn];Gp(this.layoutVertexArray,Mn.x,Mn.y,0,0,1,1,0),Qe.push(Mn.x),Qe.push(Mn.y),j&&j.currentPolyCount.top++,F&&Kh(this.layoutVertexExtArray,A.projectTilePoint(Mn.x,Mn.y,p),A.upVector(p,Mn.x,Mn.y))}}}const Et=Ac(Qe,pt);for(let Ht=0;Ht<Et.length;Ht+=3)this.indexArray.emplaceBack(yt+Et[Ht],yt+Et[Ht+2],yt+Et[Ht+1]);it.primitiveLength+=Et.length/3,it.vertexLength+=ze}if(j&&j.polyCount.length>0){if(j.borders){j.vertexArrayOffset=this.centroidVertexArray.length;const fe=j.borders,Re=this.featuresOnBorder.push(j)-1;for(let ze=0;ze<4;ze++)fe[ze][0]!==Number.MAX_VALUE&&this.borders[ze].push(Re)}this.encodeCentroid(j.borders?void 0:j.centroid(),j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,b,p)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((s,c)=>this.featuresOnBorder[s].borders[t][0]-this.featuresOnBorder[c].borders[t][0])}encodeCentroid(t,s,c=!0){let p,y;if(t)if(0!==t.y){const T=s.span()._mult(this.tileToMeter);p=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(T.x/10)),y=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(T.y/10))}else p=Math.ceil(7*(t.x+450)),y=0;else p=0,y=+c;let b=c?this.centroidVertexArray.length:s.vertexArrayOffset;for(const T of s.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*T.edges+T.top);for(let I=0;I<2*T.edges;I++)this.centroidVertexArray.emplace(b++,0,y),this.centroidVertexArray.emplace(b++,p,y);for(let I=0;I<T.top;I++)this.centroidVertexArray.emplace(b++,p,y)}}}function Zh(r,t,s){return r.x===t.x&&(r.x<s[0].x||r.x>s[1].x)||r.y===t.y&&(r.y<s[0].y||r.y>s[1].y)}function Us(){const r=Math.PI/32,t=Math.tan(r),s=$h;return s*Math.sqrt(1+2*t*t)-s}function h_(r,t,s){const c=1<<s.z,p=sl(s.x/c),y=sl((s.x+1)/c),b=As(s.y/c),T=As((s.y+1)/c);return function(I,A,F,j,W=0,J){const le=[];if(!I.length||!F||!j)return le;const fe=(Et,Ht)=>{for(const Kt of Et)le.push({polygon:Kt,bounds:Ht})},Re=Math.ceil(Math.log2(F)),ze=Math.ceil(Math.log2(j)),it=Re-ze,Qe=[];for(let Et=0;Et<Math.abs(it);Et++)Qe.push(it>0?0:1);for(let Et=0;Et<Math.min(Re,ze);Et++)Qe.push(0),Qe.push(1);let pt=I;if(pt=zf(pt,A[0].y-W,A[1].y+W,1),pt=zf(pt,A[0].x-W,A[1].x+W,0),!pt.length)return le;const yt=[];for(Qe.length?yt.push({polygons:pt,bounds:A,depth:0}):fe(pt,A);yt.length;){const Et=yt.pop(),Ht=Et.depth,Kt=Qe[Ht],fn=Et.bounds[0],Mn=Et.bounds[1],Pt=0===Kt?fn.x:fn.y,Jt=0===Kt?Mn.x:Mn.y,Ln=J?J(Kt,Pt,Jt):.5*(Pt+Jt),Bn=zf(Et.polygons,Pt-W,Ln+W,Kt),oi=zf(Et.polygons,Ln-W,Jt+W,Kt);if(Bn.length){const In=[fn,new ke(0===Kt?Ln:Mn.x,1===Kt?Ln:Mn.y)];Qe.length>Ht+1?yt.push({polygons:Bn,bounds:In,depth:Ht+1}):fe(Bn,In)}if(oi.length){const In=[new ke(0===Kt?Ln:fn.x,1===Kt?Ln:fn.y),Mn];Qe.length>Ht+1?yt.push({polygons:oi,bounds:In,depth:Ht+1}):fe(oi,In)}}return le}(r,t,Math.ceil((y-p)/11.25),Math.ceil((b-T)/11.25),1,(I,A,F)=>{if(0===I)return.5*(A+F);{const j=As((s.y+A/Ai)/c);return(yd(.5*(As((s.y+F/Ai)/c)+j))*c-s.y)*Ai}})}Wn(Eu,"FillExtrusionBucket",{omit:["layers","features"]}),Wn(Ym,"PartMetadata");var Qm={paint:new en({"fill-extrusion-opacity":new Nt(xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new tt(xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nt(xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nt(xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new un(xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new tt(xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new tt(xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nt(xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function $p(r,t,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[r*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class Hp{constructor(t,s,c){this.z=t,this.x=s,this.y=c,this.key=Wp(0,t,t,s,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s){const c=(b=this.y,T=this.z,I=$p(256*(y=this.x),256*(b=Math.pow(2,T)-b-1),T),A=$p(256*(y+1),256*(b+1),T),I[0]+","+I[1]+","+A[0]+","+A[1]),p=function(y,b,T){let I,A="";for(let F=y;F>0;F--)I=1<<F-1,A+=(b&I?1:0)+(T&I?2:0);return A}(this.z,this.x,this.y);var y,b,T,I,A;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===s?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Jm{constructor(t,s){this.wrap=t,this.canonical=s,this.key=Wp(t,s.z,s.z,s.x,s.y)}}class Qs{constructor(t,s,c,p,y){this.overscaledZ=t,this.wrap=s,this.canonical=new Hp(c,+p,+y),this.key=0===s&&t===c?this.canonical.key:Wp(s,t,c,p,y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const s=this.canonical.z-t;return t>this.canonical.z?new Qs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qs(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(t,s=!0){if(this.overscaledZ===t&&s)return this.key;if(t>this.canonical.z)return Wp(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-t;return Wp(this.wrap*+s,t,t,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const s=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new Qs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,p=2*this.canonical.y;return[new Qs(s,this.wrap,s,c,p),new Qs(s,this.wrap,s,c+1,p),new Qs(s,this.wrap,s,c,p+1),new Qs(s,this.wrap,s,c+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Qs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Qs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Jm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wp(r,t,s,c,p){const y=1<<Math.min(s,22);let b=y*(p%y)+c%y;return r&&s<22&&(b+=y*y*((r<0?-2*r-1:2*r)%(1<<2*(22-s)))),16*(32*b+s)+(t-s)}function qh(r,t){return r.x*t.x+r.y*t.y}function Xp(r,t){if(1===r.length){let s=0;const c=t[s++];let p;for(;!p||c.equals(p);)if(p=t[s++],!p)return 1/0;for(;s<t.length;s++){const y=t[s],b=r[0],T=p.sub(c),I=y.sub(c),A=b.sub(c),F=qh(T,T),j=qh(T,I),W=qh(I,I),J=qh(A,T),le=qh(A,I),fe=F*W-j*j,Re=(W*J-j*le)/fe,ze=(F*le-j*J)/fe,it=c.z*(1-Re-ze)+p.z*Re+y.z*ze;if(isFinite(it))return it}return 1/0}{let s=1/0;for(const c of t)s=Math.min(s,c.z);return s}}function fh(r){const t=new ke(r[0],r[1]);return t.z=r[2],t}function eg(r,t,s,c,p,y,b,T){const I=b*p.getElevationAt(r,t,!0,!0),A=0!==y[0],F=A?0===y[1]?b*(y[0]/7-450):b*function(j,W,J){const le=Math.floor(W[0]/8),fe=Math.floor(W[1]/8),Re=10*(W[0]-8*le),ze=10*(W[1]-8*fe),it=j.getElevationAt(le,fe,!0,!0),Qe=j.getMeterToDEM(J),pt=Math.floor(.5*(Re*Qe-1)),yt=Math.floor(.5*(ze*Qe-1)),Et=j.tileCoordToPixel(le,fe),Ht=2*pt+1,Kt=2*yt+1,fn=(Qi=Ht,nr=Kt,[(oi=j).getElevationAtPixel(In=Et.x-pt,ii=Et.y-yt,!0),oi.getElevationAtPixel(In+nr,ii,!0),oi.getElevationAtPixel(In,ii+nr,!0),oi.getElevationAtPixel(In+Qi,ii+nr,!0)]),Mn=Math.abs(fn[0]-fn[1]),Pt=Math.abs(fn[2]-fn[3]),Jt=Math.abs(fn[0]-fn[2])+Math.abs(fn[1]-fn[3]),Ln=Math.min(.25,.5*Qe*(Mn+Pt)/Ht),Bn=Math.min(.25,.5*Qe*Jt/Kt);var oi,In,ii,Qi,nr;return it+Math.max(Ln*Re,Bn*ze)}(p,y,T):I;return{base:I+(0===s)?-1:s,top:A?Math.max(F+c,I+s+2):I+c}}Wn(Hp,"CanonicalTileID"),Wn(Qs,"OverscaledTileID",{omit:["projMatrix"]});const Uf=jn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:iv}=Uf,p_=jn([{name:"a_packed",components:4,type:"Float32"}]),{members:f_}=p_,rv=Ed.VectorTileFeature.types,m_=Math.cos(Math.PI/180*37.5);class jf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new $i,this.layoutVertexArray2=new Ur,this.indexArray=new kr,this.programConfigurations=new Mc(t.layers,t.zoom),this.segments=new ls,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c,p){this.hasPattern=Up("line",this.layers,s);const y=this.layers[0].layout.get("line-sort-key"),b=[];for(const{feature:F,id:j,index:W,sourceLayerIndex:J}of t){const le=this.layers[0]._featureFilter.needGeometry,fe=nh(F,le);if(!this.layers[0]._featureFilter.filter(new Le(this.zoom),fe,c))continue;const Re=y?y.evaluate(fe,{},c):void 0,ze={id:j,properties:F.properties,type:F.type,sourceLayerIndex:J,index:W,geometry:le?fe.geometry:Xc(F,c,p),patterns:{},sortKey:Re};b.push(ze)}y&&b.sort((F,j)=>F.sortKey-j.sortKey);const{lineAtlas:T,featureIndex:I}=s,A=this.addConstantDashes(T);for(const F of b){const{geometry:j,index:W,sourceLayerIndex:J}=F;if(A&&this.addFeatureDashes(F,T),this.hasPattern){const le=hh("line",this.layers,F,this.zoom,s);this.patternFeatures.push(le)}else this.addFeature(F,j,W,c,T.positions,s.availableImages);I.insert(t[W].feature,j,W,J,this.index)}}addConstantDashes(t){let s=!1;for(const c of this.layers){const p=c.paint.get("line-dasharray").value,y=c.layout.get("line-cap").value;if("constant"!==p.kind||"constant"!==y.kind)s=!0;else{const b=y.value,T=p.value;if(!T)continue;t.addDash(T.from,b),t.addDash(T.to,b),T.other&&t.addDash(T.other,b)}}return s}addFeatureDashes(t,s){const c=this.zoom;for(const p of this.layers){const y=p.paint.get("line-dasharray").value,b=p.layout.get("line-cap").value;if("constant"===y.kind&&"constant"===b.kind)continue;let T,I,A,F,j,W;if("constant"===y.kind){const Re=y.value;if(!Re)continue;T=Re.other||Re.to,I=Re.to,A=Re.from}else T=y.evaluate({zoom:c-1},t),I=y.evaluate({zoom:c},t),A=y.evaluate({zoom:c+1},t);"constant"===b.kind?F=j=W=b.value:(F=b.evaluate({zoom:c-1},t),j=b.evaluate({zoom:c},t),W=b.evaluate({zoom:c+1},t)),s.addDash(T,F),s.addDash(I,j),s.addDash(A,W);const J=s.getKey(T,F),le=s.getKey(I,j),fe=s.getKey(A,W);t.patterns[p.id]={min:J,mid:le,max:fe}}}update(t,s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c,p)}addFeatures(t,s,c,p,y){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,s,c,p)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,f_)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,iv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,c,p,y,b){const T=this.layers[0].layout,I=T.get("line-join").evaluate(t,{}),A=T.get("line-cap").evaluate(t,{}),F=T.get("line-miter-limit"),j=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const W of s)this.addLine(W,t,I,A,F,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,b,p)}addLine(t,s,c,p,y,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ze=0;ze<t.length-1;ze++)this.totalDistance+=t[ze].dist(t[ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T="Polygon"===rv[s.type];let I=t.length;for(;I>=2&&t[I-1].equals(t[I-2]);)I--;let A=0;for(;A<I-1&&t[A].equals(t[A+1]);)A++;if(I<(T?3:2))return;"bevel"===c&&(y=1.05);const F=this.overscaling<=16?122880/(512*this.overscaling):0,j=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let W,J,le,fe,Re;this.e1=this.e2=-1,T&&(W=t[I-2],Re=t[A].sub(W)._unit()._perp());for(let ze=A;ze<I;ze++){if(le=ze===I-1?T?t[A+1]:void 0:t[ze+1],le&&t[ze].equals(le))continue;Re&&(fe=Re),W&&(J=W),W=t[ze],Re=le?le.sub(W)._unit()._perp():fe,fe=fe||Re;let it=fe.add(Re);0===it.x&&0===it.y||it._unit();const Qe=fe.x*Re.x+fe.y*Re.y,pt=it.x*Re.x+it.y*Re.y,yt=0!==pt?1/pt:1/0,Et=2*Math.sqrt(2-2*pt),Ht=pt<m_&&J&&le,Kt=fe.x*Re.y-fe.y*Re.x>0;if(Ht&&ze>A){const Pt=W.dist(J);if(Pt>2*F){const Jt=W.sub(W.sub(J)._mult(F/Pt)._round());this.updateDistance(J,Jt),this.addCurrentVertex(Jt,fe,0,0,j),J=Jt}}const fn=J&&le;let Mn=fn?c:T?"butt":p;if(fn&&"round"===Mn&&(yt<b?Mn="miter":yt<=2&&(Mn="fakeround")),"miter"===Mn&&yt>y&&(Mn="bevel"),"bevel"===Mn&&(yt>2&&(Mn="flipbevel"),yt<y&&(Mn="miter")),J&&this.updateDistance(J,W),"miter"===Mn)it._mult(yt),this.addCurrentVertex(W,it,0,0,j);else if("flipbevel"===Mn){if(yt>100)it=Re.mult(-1);else{const Pt=yt*fe.add(Re).mag()/fe.sub(Re).mag();it._perp()._mult(Pt*(Kt?-1:1))}this.addCurrentVertex(W,it,0,0,j),this.addCurrentVertex(W,it.mult(-1),0,0,j)}else if("bevel"===Mn||"fakeround"===Mn){const Pt=-Math.sqrt(yt*yt-1),Jt=Kt?Pt:0,Ln=Kt?0:Pt;if(J&&this.addCurrentVertex(W,fe,Jt,Ln,j),"fakeround"===Mn){const Bn=Math.round(180*Et/Math.PI/20);for(let oi=1;oi<Bn;oi++){let In=oi/Bn;if(.5!==In){const Qi=In-.5;In+=In*Qi*(In-1)*((1.0904+Qe*(Qe*(3.55645-1.43519*Qe)-3.2452))*Qi*Qi+(.848013+Qe*(.215638*Qe-1.06021)))}const ii=Re.sub(fe)._mult(In)._add(fe)._unit()._mult(Kt?-1:1);this.addHalfVertex(W,ii.x,ii.y,!1,Kt,0,j)}}le&&this.addCurrentVertex(W,Re,-Jt,-Ln,j)}else if("butt"===Mn)this.addCurrentVertex(W,it,0,0,j);else if("square"===Mn){const Pt=J?1:-1;J||this.addCurrentVertex(W,it,Pt,Pt,j),this.addCurrentVertex(W,it,0,0,j),J&&this.addCurrentVertex(W,it,Pt,Pt,j)}else"round"===Mn&&(J&&(this.addCurrentVertex(W,fe,0,0,j),this.addCurrentVertex(W,fe,1,1,j,!0)),le&&(this.addCurrentVertex(W,Re,-1,-1,j,!0),this.addCurrentVertex(W,Re,0,0,j)));if(Ht&&ze<I-1){const Pt=W.dist(le);if(Pt>2*F){const Jt=W.add(le.sub(W)._mult(F/Pt)._round());this.updateDistance(W,Jt),this.addCurrentVertex(Jt,Re,0,0,j),W=Jt}}}}addCurrentVertex(t,s,c,p,y,b=!1){const T=s.y*p-s.x,I=-s.y-s.x*p;this.addHalfVertex(t,s.x+s.y*c,s.y-s.x*c,b,!1,c,y),this.addHalfVertex(t,T,I,b,!0,-p,y)}addHalfVertex({x:t,y:s},c,p,y,b,T,I){this.layoutVertexArray.emplaceBack((t<<1)+(y?1:0),(s<<1)+(b?1:0),Math.round(63*c)+128,Math.round(63*p)+128,1+(0===T?0:T<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const A=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),I.primitiveLength++),b?this.e2=A:this.e1=A}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}}Wn(jf,"LineBucket",{omit:["layers","patternFeatures"]});const ov=new en({"line-cap":new tt(xt.layout_line["line-cap"]),"line-join":new tt(xt.layout_line["line-join"]),"line-miter-limit":new Nt(xt.layout_line["line-miter-limit"]),"line-round-limit":new Nt(xt.layout_line["line-round-limit"]),"line-sort-key":new tt(xt.layout_line["line-sort-key"])});var sv={paint:new en({"line-opacity":new tt(xt.paint_line["line-opacity"]),"line-color":new tt(xt.paint_line["line-color"]),"line-translate":new Nt(xt.paint_line["line-translate"]),"line-translate-anchor":new Nt(xt.paint_line["line-translate-anchor"]),"line-width":new tt(xt.paint_line["line-width"]),"line-gap-width":new tt(xt.paint_line["line-gap-width"]),"line-offset":new tt(xt.paint_line["line-offset"]),"line-blur":new tt(xt.paint_line["line-blur"]),"line-dasharray":new un(xt.paint_line["line-dasharray"]),"line-pattern":new un(xt.paint_line["line-pattern"]),"line-gradient":new qn(xt.paint_line["line-gradient"]),"line-trim-offset":new Nt(xt.paint_line["line-trim-offset"])}),layout:ov};const tg=new class extends tt{possiblyEvaluate(r,t){return t=new Le(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(r,t)}evaluate(r,t,s,c){return t=dt({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(r,t,s,c)}}(sv.paint.properties["line-width"].specification);function ng(r,t){return t>0?t+2*r:r}tg.useIntegerZoom=!0;const Js=jn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),e0=jn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),av=jn([{name:"a_projected_pos",components:4,type:"Float32"}],4);jn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const t0=jn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),g_=jn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);jn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lv=jn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ig=jn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);jn([{name:"triangle",components:3,type:"Uint16"}]),jn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),jn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),jn([{type:"Float32",name:"offsetX"}]),jn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ro=24;const eu=128;function mh(r,t){const{expression:s}=t;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new Le(r+1))};if("source"===s.kind)return{kind:"source"};{const{zoomStops:c,interpolationType:p}=s;let y=0;for(;y<c.length&&c[y]<=r;)y++;y=Math.max(0,y-1);let b=y;for(;b<c.length&&c[b]<r+1;)b++;b=Math.min(c.length-1,b);const T=c[y],I=c[b];return"composite"===s.kind?{kind:"composite",minZoom:T,maxZoom:I,interpolationType:p}:{kind:"camera",minZoom:T,maxZoom:I,minSize:s.evaluate(new Le(T)),maxSize:s.evaluate(new Le(I)),interpolationType:p}}}function Gf(r,{uSize:t,uSizeT:s},{lowerSize:c,upperSize:p}){return"source"===r.kind?c/eu:"composite"===r.kind?Xi(c/eu,p/eu,s):t}function Yh(r,t){let s=0,c=0;if("constant"===r.kind)c=r.layoutSize;else if("source"!==r.kind){const{interpolationType:p,minZoom:y,maxZoom:b}=r,T=p?Rt(ra.interpolationFactor(p,t,y,b),0,1):0;"camera"===r.kind?c=Xi(r.minSize,r.maxSize,T):s=T}return{uSizeT:s,uSize:c}}var __=Object.freeze({__proto__:null,getSizeData:mh,evaluateSizeForFeature:Gf,evaluateSizeForZoom:Yh,SIZE_PACK_FACTOR:eu});function n0(r,t,s){return r.sections.forEach(c=>{c.text=function(p,y,b){const T=y.layout.get("text-transform").evaluate(b,{});return"uppercase"===T?p=p.toLocaleUpperCase():"lowercase"===T&&(p=p.toLocaleLowerCase()),Me.applyArabicShaping&&(p=Me.applyArabicShaping(p)),p}(c.text,t,s)}),r}const $f={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function r0(r){return"\ufe36"===r||"\ufe48"===r||"\ufe38"===r||"\ufe44"===r||"\ufe42"===r||"\ufe3e"===r||"\ufe3c"===r||"\ufe3a"===r||"\ufe18"===r||"\ufe40"===r||"\ufe10"===r||"\ufe13"===r||"\ufe14"===r||"\uff40"===r||"\uffe3"===r||"\ufe11"===r||"\ufe12"===r}function o0(r){return"\ufe35"===r||"\ufe47"===r||"\ufe37"===r||"\ufe43"===r||"\ufe41"===r||"\ufe3d"===r||"\ufe3b"===r||"\ufe39"===r||"\ufe17"===r||"\ufe3f"===r}var cv=function(r,t,s,c,p){var y,b,T=8*p-c-1,I=(1<<T)-1,A=I>>1,F=-7,j=s?p-1:0,W=s?-1:1,J=r[t+j];for(j+=W,y=J&(1<<-F)-1,J>>=-F,F+=T;F>0;y=256*y+r[t+j],j+=W,F-=8);for(b=y&(1<<-F)-1,y>>=-F,F+=c;F>0;b=256*b+r[t+j],j+=W,F-=8);if(0===y)y=1-A;else{if(y===I)return b?NaN:1/0*(J?-1:1);b+=Math.pow(2,c),y-=A}return(J?-1:1)*b*Math.pow(2,y-c)},y_=function(r,t,s,c,p,y){var b,T,I,A=8*y-p-1,F=(1<<A)-1,j=F>>1,W=23===p?Math.pow(2,-24)-Math.pow(2,-77):0,J=c?0:y-1,le=c?1:-1,fe=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(T=isNaN(t)?1:0,b=F):(b=Math.floor(Math.log(t)/Math.LN2),t*(I=Math.pow(2,-b))<1&&(b--,I*=2),(t+=b+j>=1?W/I:W*Math.pow(2,1-j))*I>=2&&(b++,I/=2),b+j>=F?(T=0,b=F):b+j>=1?(T=(t*I-1)*Math.pow(2,p),b+=j):(T=t*Math.pow(2,j-1)*Math.pow(2,p),b=0));p>=8;r[s+J]=255&T,J+=le,T/=256,p-=8);for(b=b<<p|T,A+=p;A>0;r[s+J]=255&b,J+=le,b/=256,A-=8);r[s+J-le]|=128*fe},Cu=Kr;function Kr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var Hf=4294967296,Cd=1/Hf,uv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Qu(r){return r.type===Kr.Bytes?r.readVarint()+r.pos:r.pos+1}function v_(r,t,s){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(c);for(var p=s.pos-1;p>=r;p--)s.buf[p+c]=s.buf[p]}function gh(r,t){for(var s=0;s<r.length;s++)t.writeVarint(r[s])}function Kp(r,t){for(var s=0;s<r.length;s++)t.writeSVarint(r[s])}function dv(r,t){for(var s=0;s<r.length;s++)t.writeFloat(r[s])}function b_(r,t){for(var s=0;s<r.length;s++)t.writeDouble(r[s])}function x_(r,t){for(var s=0;s<r.length;s++)t.writeBoolean(r[s])}function Wf(r,t){for(var s=0;s<r.length;s++)t.writeFixed32(r[s])}function Xf(r,t){for(var s=0;s<r.length;s++)t.writeSFixed32(r[s])}function rg(r,t){for(var s=0;s<r.length;s++)t.writeFixed64(r[s])}function hv(r,t){for(var s=0;s<r.length;s++)t.writeSFixed64(r[s])}function Kf(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function Td(r,t,s){r[s]=t,r[s+1]=t>>>8,r[s+2]=t>>>16,r[s+3]=t>>>24}function og(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}function pv(r,t,s){t.glyphs=[],1===r&&s.readMessage(w_,t)}function w_(r,t,s){if(3===r){const{id:c,bitmap:p,width:y,height:b,left:T,top:I,advance:A}=s.readMessage(ul,{});t.glyphs.push({id:c,bitmap:new Ic({width:y+6,height:b+6},p),metrics:{width:y,height:b,left:T,top:I,advance:A}})}else 4===r?t.ascender=s.readSVarint():5===r&&(t.descender=s.readSVarint())}function ul(r,t,s){1===r?t.id=s.readVarint():2===r?t.bitmap=s.readBytes():3===r?t.width=s.readVarint():4===r?t.height=s.readVarint():5===r?t.left=s.readSVarint():6===r?t.top=s.readSVarint():7===r&&(t.advance=s.readVarint())}function Zp(r){let t=0,s=0;for(const b of r)t+=b.w*b.h,s=Math.max(s,b.w);r.sort((b,T)=>T.h-b.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let p=0,y=0;for(const b of r)for(let T=c.length-1;T>=0;T--){const I=c[T];if(!(b.w>I.w||b.h>I.h)){if(b.x=I.x,b.y=I.y,y=Math.max(y,b.y+b.h),p=Math.max(p,b.x+b.w),b.w===I.w&&b.h===I.h){const A=c.pop();T<c.length&&(c[T]=A)}else b.h===I.h?(I.x+=b.w,I.w-=b.w):b.w===I.w?(I.y+=b.h,I.h-=b.h):(c.push({x:I.x+b.w,y:I.y,w:I.w-b.w,h:b.h}),I.y+=b.h,I.h-=b.h);break}}return{w:p,h:y,fill:t/(p*y)||0}}Kr.prototype={destroy:function(){this.buf=null},readFields:function(r,t,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),p=c>>3,y=this.pos;this.type=7&c,r(p,t,this),this.pos===y&&this.skip(c)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=Kf(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=og(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Kf(this.buf,this.pos)+Kf(this.buf,this.pos+4)*Hf;return this.pos+=8,r},readSFixed64:function(){var r=Kf(this.buf,this.pos)+og(this.buf,this.pos+4)*Hf;return this.pos+=8,r},readFloat:function(){var r=cv(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=cv(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,s,c=this.buf;return t=127&(s=c[this.pos++]),s<128?t:(t|=(127&(s=c[this.pos++]))<<7,s<128?t:(t|=(127&(s=c[this.pos++]))<<14,s<128?t:(t|=(127&(s=c[this.pos++]))<<21,s<128?t:function(p,y,b){var T,I,A=b.buf;if(T=(112&(I=A[b.pos++]))>>4,I<128||(T|=(127&(I=A[b.pos++]))<<3,I<128)||(T|=(127&(I=A[b.pos++]))<<10,I<128)||(T|=(127&(I=A[b.pos++]))<<17,I<128)||(T|=(127&(I=A[b.pos++]))<<24,I<128)||(T|=(1&(I=A[b.pos++]))<<31,I<128))return function Ha(r,t,s){return s?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}(p,T,y);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(s=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&uv?uv.decode(this.buf.subarray(t,r)):function(s,c,p){for(var y="",b=c;b<p;){var T,I,A,F=s[b],j=null,W=F>239?4:F>223?3:F>191?2:1;if(b+W>p)break;1===W?F<128&&(j=F):2===W?128==(192&(T=s[b+1]))&&(j=(31&F)<<6|63&T)<=127&&(j=null):3===W?(I=s[b+2],128==(192&(T=s[b+1]))&&128==(192&I)&&((j=(15&F)<<12|(63&T)<<6|63&I)<=2047||j>=55296&&j<=57343)&&(j=null)):4===W&&(I=s[b+2],A=s[b+3],128==(192&(T=s[b+1]))&&128==(192&I)&&128==(192&A)&&((j=(15&F)<<18|(63&T)<<12|(63&I)<<6|63&A)<=65535||j>=1114112)&&(j=null)),null===j?(j=65533,W=1):j>65535&&(j-=65536,y+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),y+=String.fromCharCode(j),b+=W}return y}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==Kr.Bytes)return r.push(this.readVarint(t));var s=Qu(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==Kr.Bytes)return r.push(this.readSVarint());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Kr.Bytes)return r.push(this.readBoolean());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Kr.Bytes)return r.push(this.readFloat());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Kr.Bytes)return r.push(this.readDouble());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Kr.Bytes)return r.push(this.readFixed32());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Kr.Bytes)return r.push(this.readSFixed32());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Kr.Bytes)return r.push(this.readFixed64());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Kr.Bytes)return r.push(this.readSFixed64());var t=Qu(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kr.Fixed32)this.pos+=4;else{if(t!==Kr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var s=new Uint8Array(t);s.set(this.buf),this.buf=s,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Td(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Td(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Td(this.buf,-1&r,this.pos),Td(this.buf,Math.floor(r*Cd),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Td(this.buf,-1&r,this.pos),Td(this.buf,Math.floor(r*Cd),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,s){var c,p,y,T;if(t>=0?(c=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,p=p+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),y=c,(T=s).buf[T.pos++]=127&y|128,y>>>=7,T.buf[T.pos++]=127&y|128,y>>>=7,T.buf[T.pos++]=127&y|128,y>>>=7,T.buf[T.pos++]=127&y|128,T.buf[T.pos]=127&(y>>>=7),function(y,b){var T=(7&y)<<4;b.buf[b.pos++]|=T|((y>>>=3)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y)))))}(p,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(c,p,y){for(var b,T,I=0;I<p.length;I++){if((b=p.charCodeAt(I))>55295&&b<57344){if(!T){b>56319||I+1===p.length?(c[y++]=239,c[y++]=191,c[y++]=189):T=b;continue}if(b<56320){c[y++]=239,c[y++]=191,c[y++]=189,T=b;continue}b=T-55296<<10|b-56320|65536,T=null}else T&&(c[y++]=239,c[y++]=191,c[y++]=189,T=null);b<128?c[y++]=b:(b<2048?c[y++]=b>>6|192:(b<65536?c[y++]=b>>12|224:(c[y++]=b>>18|240,c[y++]=b>>12&63|128),c[y++]=b>>6&63|128),c[y++]=63&b|128)}return y}(this.buf,r,this.pos);var s=this.pos-t;s>=128&&v_(t,s,this),this.pos=t-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),y_(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),y_(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var s=0;s<t;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,t){this.pos++;var s=this.pos;r(t,this);var c=this.pos-s;c>=128&&v_(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,t,s){this.writeTag(r,Kr.Bytes),this.writeRawMessage(t,s)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,gh,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,Kp,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,x_,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,dv,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,b_,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,Wf,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,Xf,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,rg,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,hv,t)},writeBytesField:function(r,t){this.writeTag(r,Kr.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,Kr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,Kr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,Kr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,Kr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,Kr.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,Kr.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,Kr.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,Kr.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,Kr.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,!!t)}};class qp{constructor(t,{pixelRatio:s,version:c,stretchX:p,stretchY:y,content:b}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=p,this.stretchY=y,this.content=b,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Qh{constructor(t,s){const c={},p={};this.haveRenderCallbacks=[];const y=[];this.addImages(t,c,y),this.addImages(s,p,y);const{w:b,h:T}=Zp(y),I=new ll({width:b||1,height:T||1});for(const A in t){const F=t[A],j=c[A].paddedRect;ll.copy(F.data,I,{x:0,y:0},{x:j.x+1,y:j.y+1},F.data)}for(const A in s){const F=s[A],j=p[A].paddedRect,W=j.x+1,J=j.y+1,le=F.data.width,fe=F.data.height;ll.copy(F.data,I,{x:0,y:0},{x:W,y:J},F.data),ll.copy(F.data,I,{x:0,y:fe-1},{x:W,y:J-1},{width:le,height:1}),ll.copy(F.data,I,{x:0,y:0},{x:W,y:J+fe},{width:le,height:1}),ll.copy(F.data,I,{x:le-1,y:0},{x:W-1,y:J},{width:1,height:fe}),ll.copy(F.data,I,{x:0,y:0},{x:W+le,y:J},{width:1,height:fe})}this.image=I,this.iconPositions=c,this.patternPositions=p}addImages(t,s,c){for(const p in t){const y=t[p],b={x:0,y:0,w:y.data.width+2,h:y.data.height+2};c.push(b),s[p]=new qp(b,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>t.hasImage(c)),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),s)}patchUpdatedImage(t,s,c){if(!t||!s||t.version===s.version)return;t.version=s.version;const[p,y]=t.tl;c.update(s.data,void 0,{x:p,y})}}Wn(qp,"ImagePosition"),Wn(Qh,"ImageAtlas");const kc={horizontal:1,vertical:2,horizontalOnly:3};class Zf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,s){const c=new Zf;return c.scale=t||1,c.fontStack=s,c}static forImage(t){const s=new Zf;return s.imageName=t,s}}class ks{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,s){const c=new ks;for(let p=0;p<t.sections.length;p++){const y=t.sections[p];y.image?c.addImageSection(y):c.addTextSection(y,s)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(s,c){let p="";for(let y=0;y<s.length;y++){const b=s.charCodeAt(y+1)||null,T=s.charCodeAt(y-1)||null;p+=!c&&(b&&d(b)&&!$f[s[y+1]]||T&&d(T)&&!$f[s[y-1]])||!$f[s[y]]?s[y]:$f[s[y]]}return p}(this.text,t)}trim(){let t=0;for(let c=0;c<this.text.length&&Yp[this.text.charCodeAt(c)];c++)t++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&Yp[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(t,s),this.sectionIndex=this.sectionIndex.slice(t,s)}substring(t,s){const c=new ks;return c.text=this.text.substring(t,s),c.sectionIndex=this.sectionIndex.slice(t,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,s)=>Math.max(t,this.sections[s].scale),0)}addTextSection(t,s){this.text+=t.text,this.sections.push(Zf.forText(t.scale,t.fontStack||s));const c=this.sections.length-1;for(let p=0;p<t.text.length;++p)this.sectionIndex.push(c)}addImageSection(t){const s=t.image?t.image.name:"";if(0===s.length)return void ai("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Zf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ai("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dd(r,t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe){const Re=ks.fromFeature(r,p);let ze;j===kc.vertical&&Re.verticalizePunctuation(W);const{processBidirectionalText:it,processStyledBidirectionalText:Qe}=Me;if(it&&1===Re.sections.length){ze=[];const Et=it(Re.toString(),Yf(Re,A,y,t,c,J,le));for(const Ht of Et){const Kt=new ks;Kt.text=Ht,Kt.sections=Re.sections;for(let fn=0;fn<Ht.length;fn++)Kt.sectionIndex.push(0);ze.push(Kt)}}else if(Qe){ze=[];const Et=Qe(Re.text,Re.sectionIndex,Yf(Re,A,y,t,c,J,le));for(const Ht of Et){const Kt=new ks;Kt.text=Ht[0],Kt.sectionIndex=Ht[1],Kt.sections=Re.sections,ze.push(Kt)}}else ze=function(Et,Ht){const Kt=[],fn=Et.text;let Mn=0;for(const Pt of Ht)Kt.push(Et.substring(Mn,Pt)),Mn=Pt;return Mn<fn.length&&Kt.push(Et.substring(Mn,fn.length)),Kt}(Re,Yf(Re,A,y,t,c,J,le));const pt=[],yt={positionedLines:pt,text:Re.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Et,Ht,Kt,fn,Mn,Pt,Jt,Ln,Bn,oi,In,ii){let Qi=0,nr=0,Ii=0;const ti="right"===Ln?1:"left"===Ln?0:.5;let hr=!1;for(const gr of Mn){const Sr=gr.getSections();for(const fo of Sr){if(fo.imageName)continue;const lo=Ht[fo.fontStack];if(lo&&(hr=void 0!==lo.ascender&&void 0!==lo.descender,!hr))break}if(!hr)break}let Ji=0;for(const gr of Mn){gr.trim();const Sr=gr.getMaxScale(),fo=(Sr-1)*Ro,lo={positionedGlyphs:[],lineOffset:0};Et.positionedLines[Ji]=lo;const to=lo.positionedGlyphs;let vo=0;if(!gr.length()){nr+=Pt,++Ji;continue}let zo=0,vs=0;for(let yr=0;yr<gr.length();yr++){const Vo=gr.getSection(yr),ea=gr.getSectionIndex(yr),Wr=gr.getCharCode(yr);let Uo=Vo.scale,ma=null,Mo=null,bo=null,js=Ro,Os=0;const Gi=!(Bn===kc.horizontal||!In&&!i(Wr)||In&&(Yp[Wr]||(vi=Wr,Nr(vi)||il(vi)||zu(vi)||Kd(vi)||L(vi))));if(Vo.imageName){const hl=fn[Vo.imageName];if(!hl)continue;bo=Vo.imageName,Et.iconsInText=Et.iconsInText||!0,Mo=hl.paddedRect;const bs=hl.displaySize;Uo=Uo*Ro/ii,ma={width:bs[0],height:bs[1],left:1,top:-3,advance:Gi?bs[1]:bs[0],localGlyph:!1},Os=hr?-ma.height*Uo:Sr*Ro-17-bs[1]*Uo,js=ma.advance;const id=(Gi?bs[0]:bs[1])*Uo-Ro*Sr;id>0&&id>vo&&(vo=id)}else{const hl=Kt[Vo.fontStack];if(!hl)continue;hl[Wr]&&(Mo=hl[Wr]);const bs=Ht[Vo.fontStack];if(!bs)continue;const id=bs.glyphs[Wr];if(!id)continue;if(ma=id.metrics,js=8203!==Wr?Ro:0,hr){const Ah=void 0!==bs.ascender?Math.abs(bs.ascender):0,lp=void 0!==bs.descender?Math.abs(bs.descender):0,kh=(Ah+lp)*Uo;zo<kh&&(zo=kh,vs=(Ah-lp)/2*Uo),Os=-Ah*Uo}else Os=(Sr-Uo)*Ro-17}Gi?(Et.verticalizable=!0,to.push({glyph:Wr,imageName:bo,x:Qi,y:nr+Os,vertical:Gi,scale:Uo,localGlyph:ma.localGlyph,fontStack:Vo.fontStack,sectionIndex:ea,metrics:ma,rect:Mo}),Qi+=js*Uo+oi):(to.push({glyph:Wr,imageName:bo,x:Qi,y:nr+Os,vertical:Gi,scale:Uo,localGlyph:ma.localGlyph,fontStack:Vo.fontStack,sectionIndex:ea,metrics:ma,rect:Mo}),Qi+=ma.advance*Uo+oi)}0!==to.length&&(Ii=Math.max(Qi-oi,Ii),hr?T_(to,ti,vo,vs,Pt*Sr/2):T_(to,ti,vo,0,Pt/2)),Qi=0;const Pa=Pt*Sr+vo;lo.lineOffset=Math.max(vo,fo),nr+=Pa,++Ji}var vi;const Po=nr,{horizontalAlign:Bo,verticalAlign:Wo}=lg(Jt);(function(gr,Sr,fo,lo,to,vo){const zo=(Sr-fo)*to,vs=-vo*lo;for(const Pa of gr)for(const yr of Pa.positionedGlyphs)yr.x+=zo,yr.y+=vs})(Et.positionedLines,ti,Bo,Wo,Ii,Po),Et.top+=-Wo*Po,Et.bottom=Et.top+Po,Et.left+=-Bo*Ii,Et.right=Et.left+Ii,Et.hasBaseline=hr}(yt,t,s,c,ze,b,T,I,j,A,W,fe),!function(Et){for(const Ht of Et)if(0!==Ht.positionedGlyphs.length)return!1;return!0}(pt)&&yt}const Yp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function C_(r,t,s,c,p,y){if(t.imageName){const b=c[t.imageName];return b?b.displaySize[0]*t.scale*Ro/y+p:0}{const b=s[t.fontStack],T=b&&b.glyphs[r];return T?T.metrics.advance*t.scale+p:0}}function qf(r,t,s,c){const p=Math.pow(r-t,2);return c?r<t?p/2:2*p:p+Math.abs(s)*s}function fv(r,t,s){let c=0;return 10===r&&(c-=1e4),s&&(c+=150),40!==r&&65288!==r||(c+=50),41!==t&&65289!==t||(c+=50),c}function sg(r,t,s,c,p,y){let b=null,T=qf(t,s,p,y);for(const I of c){const A=qf(t-I.x,s,p,y)+I.badness;A<=T&&(b=I,T=A)}return{index:r,x:t,priorBreak:b,badness:T}}function ag(r){return r?ag(r.priorBreak).concat(r.index):[]}function Yf(r,t,s,c,p,y,b){if("point"!==y)return[];if(!r)return[];const T=[],I=function(W,J,le,fe,Re,ze){let it=0;for(let Qe=0;Qe<W.length();Qe++){const pt=W.getSection(Qe);it+=C_(W.getCharCode(Qe),pt,fe,Re,J,ze)}return it/Math.max(1,Math.ceil(it/le))}(r,t,s,c,p,b),A=r.text.indexOf("\u200b")>=0;let F=0;for(let W=0;W<r.length();W++){const J=r.getSection(W),le=r.getCharCode(W);if(Yp[le]||(F+=C_(le,J,c,p,t,b)),W<r.length()-1){const fe=!((j=le)<11904||!(hd(j)||Uu(j)||R(j)||Ef(j)||pu(j)||Hd(j)||pd(j)||Al(j)||Wd(j)||Gc(j)||ju(j)||$(j)||Va(j)||wc(j)||Vu(j)||Oa(j)||dd(j)||yp(j)||Xd(j)||_p(j)));(E_[le]||fe||J.imageName)&&T.push(sg(W+1,F,I,T,fv(le,r.getCharCode(W+1),fe&&A),!1))}}var j;return ag(sg(r.length(),F,I,T,0,!0))}function lg(r){let t=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function T_(r,t,s,c,p){if(!(t||s||c||p))return;const y=r.length-1,b=r[y],T=(b.x+b.metrics.advance*b.scale)*t;for(let I=0;I<=y;I++)r[I].x-=T,r[I].y+=s+c+p}function mv(r,t,s){const{horizontalAlign:c,verticalAlign:p}=lg(s),y=t[0]-r.displaySize[0]*c,b=t[1]-r.displaySize[1]*p;return{image:r,top:b,bottom:b+r.displaySize[1],left:y,right:y+r.displaySize[0]}}function D_(r,t,s,c,p,y){const b=r.image;let T;if(b.content){const Re=b.content,ze=b.pixelRatio||1;T=[Re[0]/ze,Re[1]/ze,b.displaySize[0]-Re[2]/ze,b.displaySize[1]-Re[3]/ze]}const I=t.left*y,A=t.right*y;let F,j,W,J;"width"===s||"both"===s?(J=p[0]+I-c[3],j=p[0]+A+c[1]):(J=p[0]+(I+A-b.displaySize[0])/2,j=J+b.displaySize[0]);const le=t.top*y,fe=t.bottom*y;return"height"===s||"both"===s?(F=p[1]+le-c[0],W=p[1]+fe+c[2]):(F=p[1]+(le+fe-b.displaySize[1])/2,W=F+b.displaySize[1]),{image:b,top:F,right:j,bottom:W,left:J,collisionPadding:T}}class Tu extends ke{constructor(t,s,c,p,y){super(t,s),this.angle=p,this.z=c,void 0!==y&&(this.segment=y)}clone(){return new Tu(this.x,this.y,this.z,this.angle,this.segment)}}function cg(r,t,s,c,p){if(void 0===t.segment)return!0;let y=t,b=t.segment+1,T=0;for(;T>-s/2;){if(b--,b<0)return!1;T-=r[b].dist(y),y=r[b]}T+=r[b].dist(r[b+1]),b++;const I=[];let A=0;for(;T<s/2;){const F=r[b],j=r[b+1];if(!j)return!1;let W=r[b-1].angleTo(F)-F.angleTo(j);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:T,angleDelta:W}),A+=W;T-I[0].distance>c;)A-=I.shift().angleDelta;if(A>p)return!1;b++,T+=F.dist(j)}return!0}function ug(r){let t=0;for(let s=0;s<r.length-1;s++)t+=r[s].dist(r[s+1]);return t}function Qp(r,t,s){return r?.6*t*s:0}function Jp(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function M_(r,t,s,c,p,y){const b=Qp(s,p,y),T=Jp(s,c)*y;let I=0;const A=ug(r)/2;for(let F=0;F<r.length-1;F++){const j=r[F],W=r[F+1],J=j.dist(W);if(I+J>A){const le=(A-I)/J,fe=Xi(j.x,W.x,le),Re=Xi(j.y,W.y,le),ze=new Tu(fe,Re,0,W.angleTo(j),F);return!b||cg(r,ze,T,b,t)?ze:void 0}I+=J}}function S_(r,t,s,c,p,y,b,T,I){const A=Qp(c,y,b),F=Jp(c,p),j=F*b,W=0===r[0].x||r[0].x===I||0===r[0].y||r[0].y===I;return t-j<t/4&&(t=j+t/4),dg(r,W?t/2*T%t:(F/2+2*y)*b*T%t,t,A,s,j,W,!1,I)}function dg(r,t,s,c,p,y,b,T,I){const A=y/2,F=ug(r);let j=0,W=t-s,J=[];for(let le=0;le<r.length-1;le++){const fe=r[le],Re=r[le+1],ze=fe.dist(Re),it=Re.angleTo(fe);for(;W+s<j+ze;){W+=s;const Qe=(W-j)/ze,pt=Xi(fe.x,Re.x,Qe),yt=Xi(fe.y,Re.y,Qe);if(pt>=0&&pt<I&&yt>=0&&yt<I&&W-A>=0&&W+A<=F){const Et=new Tu(pt,yt,0,it,le);Et._round(),c&&!cg(r,Et,y,c,p)||J.push(Et)}}j+=ze}return T||J.length||b||(J=dg(r,j/2,s,c,p,y,b,!0,I)),J}function I_(r,t,s,c,p){const y=[];for(let b=0;b<r.length;b++){const T=r[b];let I;for(let A=0;A<T.length-1;A++){let F=T[A],j=T[A+1];F.x<t&&j.x<t||(F.x<t?F=new ke(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x<t&&(j=new ke(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y<s&&j.y<s||(F.y<s?F=new ke(F.x+(s-F.y)/(j.y-F.y)*(j.x-F.x),s)._round():j.y<s&&(j=new ke(F.x+(s-F.y)/(j.y-F.y)*(j.x-F.x),s)._round()),F.x>=c&&j.x>=c||(F.x>=c?F=new ke(c,F.y+(c-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x>=c&&(j=new ke(c,F.y+(c-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y>=p&&j.y>=p||(F.y>=p?F=new ke(F.x+(p-F.y)/(j.y-F.y)*(j.x-F.x),p)._round():j.y>=p&&(j=new ke(F.x+(p-F.y)/(j.y-F.y)*(j.x-F.x),p)._round()),I&&F.equals(I[I.length-1])||(I=[F],y.push(I)),I.push(j)))))}}return y}Wn(Tu,"Anchor");const ef=1e20;function hg(r,t,s,c,p,y,b,T,I){for(let A=t;A<t+c;A++)pg(r,s*y+A,y,p,b,T,I);for(let A=s;A<s+p;A++)pg(r,A*y+t,1,c,b,T,I)}function pg(r,t,s,c,p,y,b){y[0]=0,b[0]=-ef,b[1]=ef,p[0]=r[t];for(let T=1,I=0,A=0;T<c;T++){p[T]=r[t+T*s];const F=T*T;do{const j=y[I];A=(p[T]-p[j]+F-j*j)/(T-j)/2}while(A<=b[I]&&--I>-1);I++,y[I]=T,b[I]=A,b[I+1]=ef}for(let T=0,I=0;T<c;T++){for(;b[I+1]<T;)I++;const A=y[I],F=T-A;r[t+T*s]=p[A]+F*F}}const Qf={none:0,ideographs:1,all:2};class tf{constructor(t,s,c){this.requestManager=t,this.localGlyphMode=s,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,s){const c=[];for(const p in t)for(const y of t[p])c.push({stack:p,id:y});Zt(c,({stack:p,id:y},b)=>{let T=this.entries[p];T||(T=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=T.glyphs[y];if(void 0!==I)return void b(null,{stack:p,id:y,glyph:I});if(I=this._tinySDF(T,p,y),I)return T.glyphs[y]=I,void b(null,{stack:p,id:y,glyph:I});const A=Math.floor(y/256);if(256*A>65535)return void b(new Error("glyphs > 65535 not supported"));if(T.ranges[A])return void b(null,{stack:p,id:y,glyph:I});let F=T.requests[A];F||(F=T.requests[A]=[],tf.loadGlyphRange(p,A,this.url,this.requestManager,(j,W)=>{if(W){T.ascender=W.ascender,T.descender=W.descender;for(const J in W.glyphs)this._doesCharSupportLocalGlyph(+J)||(T.glyphs[+J]=W.glyphs[+J]);T.ranges[A]=!0}for(const J of F)J(j,W);delete T.requests[A]})),F.push((j,W)=>{j?b(j):W&&b(null,{stack:p,id:y,glyph:W.glyphs[y]||null})})},(p,y)=>{if(p)s(p);else if(y){const b={};for(const{stack:T,id:I,glyph:A}of y)void 0===b[T]&&(b[T]={}),void 0===b[T].glyphs&&(b[T].glyphs={}),b[T].glyphs[I]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics},b[T].ascender=this.entries[T].ascender,b[T].descender=this.entries[T].descender;s(null,b)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Qf.none&&(this.localGlyphMode===Qf.all?!!this.localFontFamily:!!this.localFontFamily&&(Gc(t)||rl(t)||Va(t)||dd(t)||Al(t)))}_tinySDF(t,s,c){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(c))return;let y=t.tinySDF;if(!y){let fe="400";/bold/i.test(s)?fe="900":/medium/i.test(s)?fe="500":/light/i.test(s)&&(fe="200"),y=t.tinySDF=new tf.TinySDF({fontFamily:p,fontWeight:fe,fontSize:48,buffer:6,radius:16}),y.fontWeight=fe}if(this.localGlyphs[y.fontWeight][c])return this.localGlyphs[y.fontWeight][c];const b=String.fromCharCode(c),{data:T,width:I,height:A,glyphWidth:F,glyphHeight:j,glyphLeft:W,glyphTop:J,glyphAdvance:le}=y.draw(b);return this.localGlyphs[y.fontWeight][c]={id:c,bitmap:new Ic({width:I,height:A},T),metrics:{width:F/2,height:j/2,left:W/2,top:J/2-27,advance:le/2,localGlyph:!0}}}}function fg(r,t,s,c){const p=[],y=r.image,b=y.pixelRatio,T=y.paddedRect.w-2,I=y.paddedRect.h-2,A=r.right-r.left,F=r.bottom-r.top,j=y.stretchX||[[0,T]],W=y.stretchY||[[0,I]],J=(Pt,Jt)=>Pt+Jt[1]-Jt[0],le=j.reduce(J,0),fe=W.reduce(J,0),Re=T-le,ze=I-fe;let it=0,Qe=le,pt=0,yt=fe,Et=0,Ht=Re,Kt=0,fn=ze;if(y.content&&c){const Pt=y.content;it=Jf(j,0,Pt[0]),pt=Jf(W,0,Pt[1]),Qe=Jf(j,Pt[0],Pt[2]),yt=Jf(W,Pt[1],Pt[3]),Et=Pt[0]-it,Kt=Pt[1]-pt,Ht=Pt[2]-Pt[0]-Qe,fn=Pt[3]-Pt[1]-yt}const Mn=(Pt,Jt,Ln,Bn)=>{const oi=mg(Pt.stretch-it,Qe,A,r.left),In=em(Pt.fixed-Et,Ht,Pt.stretch,le),ii=mg(Jt.stretch-pt,yt,F,r.top),Qi=em(Jt.fixed-Kt,fn,Jt.stretch,fe),nr=mg(Ln.stretch-it,Qe,A,r.left),Ii=em(Ln.fixed-Et,Ht,Ln.stretch,le),ti=mg(Bn.stretch-pt,yt,F,r.top),hr=em(Bn.fixed-Kt,fn,Bn.stretch,fe),Ji=new ke(oi,ii),vi=new ke(nr,ii),Po=new ke(nr,ti),Bo=new ke(oi,ti),Wo=new ke(In/b,Qi/b),gr=new ke(Ii/b,hr/b),Sr=t*Math.PI/180;if(Sr){const to=Math.sin(Sr),vo=Math.cos(Sr),zo=[vo,-to,to,vo];Ji._matMult(zo),vi._matMult(zo),Bo._matMult(zo),Po._matMult(zo)}const fo=Pt.stretch+Pt.fixed,lo=Jt.stretch+Jt.fixed;return{tl:Ji,tr:vi,bl:Bo,br:Po,tex:{x:y.paddedRect.x+1+fo,y:y.paddedRect.y+1+lo,w:Ln.stretch+Ln.fixed-fo,h:Bn.stretch+Bn.fixed-lo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wo,pixelOffsetBR:gr,minFontScaleX:Ht/b/A,minFontScaleY:fn/b/F,isSDF:s}};if(c&&(y.stretchX||y.stretchY)){const Pt=A_(j,Re,le),Jt=A_(W,ze,fe);for(let Ln=0;Ln<Pt.length-1;Ln++){const Bn=Pt[Ln],oi=Pt[Ln+1];for(let In=0;In<Jt.length-1;In++)p.push(Mn(Bn,Jt[In],oi,Jt[In+1]))}}else p.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:I+1}));return p}function Jf(r,t,s){let c=0;for(const p of r)c+=Math.max(t,Math.min(s,p[1]))-Math.max(t,Math.min(s,p[0]));return c}function A_(r,t,s){const c=[{fixed:-1,stretch:0}];for(const[p,y]of r){const b=c[c.length-1];c.push({fixed:p-b.stretch,stretch:b.stretch}),c.push({fixed:p-b.stretch,stretch:b.stretch+(y-p)})}return c.push({fixed:t+1,stretch:s}),c}function mg(r,t,s,c){return r/t*s+c}function em(r,t,s,c){return r-t*s/c}function k_(r,t,s,c){const p=t+r.positionedLines[c].lineOffset;return 0===c?s+p/2:s+(p+(t+r.positionedLines[c-1].lineOffset))/2}tf.loadGlyphRange=function(r,t,s,c,p){const y=256*t,b=y+255,T=c.transformRequest(c.normalizeGlyphsURL(s).replace("{fontstack}",r).replace("{range}",`${y}-${b}`),Ee.Glyphs);ne(T,(I,A)=>{if(I)p(I);else if(A){const F={},j=new Cu(A).readFields(pv,{});for(const W of j.glyphs)F[W.id]=W;p(null,{glyphs:F,ascender:j.ascender,descender:j.descender})}})},tf.TinySDF=class{constructor({fontSize:r=24,buffer:t=3,radius:s=8,cutoff:c=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:b="normal"}={}){this.buffer=t,this.cutoff=c,this.radius=s;const T=this.size=r+4*t,I=this._createCanvas(T),A=this.ctx=I.getContext("2d",{willReadFrequently:!0});A.font=`${b} ${y} ${r}px ${p}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(r){const t=document.createElement("canvas");return t.width=t.height=r,t}draw(r){const{width:t,actualBoundingBoxAscent:s,actualBoundingBoxDescent:c,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(r),b=Math.ceil(s),T=Math.min(this.size-this.buffer,Math.ceil(y-p)),I=Math.min(this.size-this.buffer,b+Math.ceil(c)),A=T+2*this.buffer,F=I+2*this.buffer,j=Math.max(A*F,0),W=new Uint8ClampedArray(j),J={data:W,width:A,height:F,glyphWidth:T,glyphHeight:I,glyphTop:b,glyphLeft:0,glyphAdvance:t};if(0===T||0===I)return J;const{ctx:le,buffer:fe,gridInner:Re,gridOuter:ze}=this;le.clearRect(fe,fe,T,I),le.fillText(r,fe,fe+b);const it=le.getImageData(fe,fe,T,I);ze.fill(ef,0,j),Re.fill(0,0,j);for(let Qe=0;Qe<I;Qe++)for(let pt=0;pt<T;pt++){const yt=it.data[4*(Qe*T+pt)+3]/255;if(0===yt)continue;const Et=(Qe+fe)*A+pt+fe;if(1===yt)ze[Et]=0,Re[Et]=ef;else{const Ht=.5-yt;ze[Et]=Ht>0?Ht*Ht:0,Re[Et]=Ht<0?Ht*Ht:0}}hg(ze,0,0,A,F,A,this.f,this.v,this.z),hg(Re,fe,fe,T,I,A,this.f,this.v,this.z);for(let Qe=0;Qe<j;Qe++){const pt=Math.sqrt(ze[Qe])-Math.sqrt(Re[Qe]);W[Qe]=Math.round(255-255*(pt/this.radius+this.cutoff))}return J}};class gg{constructor(t=[],s=gv){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:c}=this,p=s[t];for(;t>0;){const y=t-1>>1,b=s[y];if(c(p,b)>=0)break;s[t]=b,t=y}s[t]=p}_down(t){const{data:s,compare:c}=this,p=this.length>>1,y=s[t];for(;t<p;){let b=1+(t<<1),T=s[b];const I=b+1;if(I<this.length&&c(s[I],T)<0&&(b=I,T=s[I]),c(T,y)>=0)break;s[t]=T,t=b}s[t]=y}}function gv(r,t){return r<t?-1:r>t?1:0}function Md(r,t=1,s=!1){let c=1/0,p=1/0,y=-1/0,b=-1/0;const T=r[0];for(let J=0;J<T.length;J++){const le=T[J];(!J||le.x<c)&&(c=le.x),(!J||le.y<p)&&(p=le.y),(!J||le.x>y)&&(y=le.x),(!J||le.y>b)&&(b=le.y)}const I=Math.min(y-c,b-p);let A=I/2;const F=new gg([],tm);if(0===I)return new ke(c,p);for(let J=c;J<y;J+=I)for(let le=p;le<b;le+=I)F.push(new Jh(J+A,le+A,A,r));let j=function(J){let le=0,fe=0,Re=0;const ze=J[0];for(let it=0,Qe=ze.length,pt=Qe-1;it<Qe;pt=it++){const yt=ze[it],Et=ze[pt],Ht=yt.x*Et.y-Et.x*yt.y;fe+=(yt.x+Et.x)*Ht,Re+=(yt.y+Et.y)*Ht,le+=3*Ht}return new Jh(fe/le,Re/le,0,J)}(r),W=F.length;for(;F.length;){const J=F.pop();(J.d>j.d||!j.d)&&(j=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,W)),J.max-j.d<=t||(A=J.h/2,F.push(new Jh(J.p.x-A,J.p.y-A,A,r)),F.push(new Jh(J.p.x+A,J.p.y-A,A,r)),F.push(new Jh(J.p.x-A,J.p.y+A,A,r)),F.push(new Jh(J.p.x+A,J.p.y+A,A,r)),W+=4)}return s&&(console.log(`num probes: ${W}`),console.log(`best distance: ${j.d}`)),j.p}function tm(r,t){return t.max-r.max}function Jh(r,t,s,c){this.p=new ke(r,t),this.h=s,this.d=function(p,y){let b=!1,T=1/0;for(let I=0;I<y.length;I++){const A=y[I];for(let F=0,j=A.length,W=j-1;F<j;W=F++){const J=A[F],le=A[W];J.y>p.y!=le.y>p.y&&p.x<(le.x-J.x)*(p.y-J.y)/(le.y-J.y)+J.x&&(b=!b),T=Math.min(T,Pl(p,J,le))}}return(b?1:-1)*Math.sqrt(T)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const nm=Number.POSITIVE_INFINITY,_g=Math.sqrt(2);function _v(r,t){return t[1]!==nm?function(s,c,p){let y=0,b=0;switch(c=Math.abs(c),p=Math.abs(p),s){case"top-right":case"top-left":case"top":b=p-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-p}switch(s){case"top-right":case"bottom-right":case"right":y=-c;break;case"top-left":case"bottom-left":case"left":y=c}return[y,b]}(r,t[0],t[1]):function(s,c){let p=0,y=0;c<0&&(c=0);const b=c/_g;switch(s){case"top-right":case"top-left":y=b-7;break;case"bottom-right":case"bottom-left":y=7-b;break;case"bottom":y=7-c;break;case"top":y=c-7}switch(s){case"top-right":case"bottom-right":p=-b;break;case"top-left":case"bottom-left":p=b;break;case"left":p=c;break;case"right":p=-c}return[p,y]}(r,t[0])}function yv(r,t,s,c,p,y,b,T,I,A){r.createArrays(),r.tilePixelRatio=Ai/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const F=r.layers[0].layout,j=r.layers[0]._unevaluatedLayout._values,W={};if("composite"===r.textSizeData.kind){const{minZoom:fe,maxZoom:Re}=r.textSizeData;W.compositeTextSizes=[j["text-size"].possiblyEvaluate(new Le(fe),T),j["text-size"].possiblyEvaluate(new Le(Re),T)]}if("composite"===r.iconSizeData.kind){const{minZoom:fe,maxZoom:Re}=r.iconSizeData;W.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new Le(fe),T),j["icon-size"].possiblyEvaluate(new Le(Re),T)]}W.layoutTextSize=j["text-size"].possiblyEvaluate(new Le(I+1),T),W.layoutIconSize=j["icon-size"].possiblyEvaluate(new Le(I+1),T),W.textMaxSize=j["text-size"].possiblyEvaluate(new Le(18),T);const J="map"===F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement"),le=F.get("text-size");for(const fe of r.features){const Re=F.get("text-font").evaluate(fe,{},T).join(","),ze=le.evaluate(fe,{},T),it=W.layoutTextSize.evaluate(fe,{},T),Qe=(W.layoutIconSize.evaluate(fe,{},T),{horizontal:{},vertical:void 0}),pt=fe.text;let yt,Et=[0,0];if(pt){const fn=pt.toString(),Mn=F.get("text-letter-spacing").evaluate(fe,{},T)*Ro,Pt=F.get("text-line-height").evaluate(fe,{},T)*Ro,Jt=we(fn)?Mn:0,Ln=F.get("text-anchor").evaluate(fe,{},T),Bn=F.get("text-variable-anchor");if(!Bn){const Ii=F.get("text-radial-offset").evaluate(fe,{},T);Et=Ii?_v(Ln,[Ii*Ro,nm]):F.get("text-offset").evaluate(fe,{},T).map(ti=>ti*Ro)}let oi=J?"center":F.get("text-justify").evaluate(fe,{},T);const In=F.get("symbol-placement"),ii="point"===In,Qi="point"===In?F.get("text-max-width").evaluate(fe,{},T)*Ro:0,nr=Ii=>{r.allowVerticalPlacement&&oe(fn)&&(Qe.vertical=Dd(pt,t,s,p,Re,Qi,Pt,Ln,Ii,Jt,Et,kc.vertical,!0,In,it,ze))};if(!J&&Bn){const Ii="auto"===oi?Bn.map(hr=>yg(hr)):[oi];let ti=!1;for(let hr=0;hr<Ii.length;hr++){const Ji=Ii[hr];if(!Qe.horizontal[Ji])if(ti)Qe.horizontal[Ji]=Qe.horizontal[0];else{const vi=Dd(pt,t,s,p,Re,Qi,Pt,"center",Ji,Jt,Et,kc.horizontal,!1,In,it,ze);vi&&(Qe.horizontal[Ji]=vi,ti=1===vi.positionedLines.length)}}nr("left")}else{if("auto"===oi&&(oi=yg(Ln)),ii||F.get("text-writing-mode").indexOf("horizontal")>=0||!oe(fn)){const Ii=Dd(pt,t,s,p,Re,Qi,Pt,Ln,oi,Jt,Et,kc.horizontal,!1,In,it,ze);Ii&&(Qe.horizontal[oi]=Ii)}nr("point"===In?"left":oi)}}let Ht=!1;if(fe.icon&&fe.icon.name){const fn=c[fe.icon.name];fn&&(yt=mv(p[fe.icon.name],F.get("icon-offset").evaluate(fe,{},T),F.get("icon-anchor").evaluate(fe,{},T)),Ht=fn.sdf,void 0===r.sdfIcons?r.sdfIcons=fn.sdf:r.sdfIcons!==fn.sdf&&ai("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fn.pixelRatio!==r.pixelRatio||0!==F.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}const Kt=xv(Qe.horizontal)||Qe.vertical;r.iconsInText||(r.iconsInText=!!Kt&&Kt.iconsInText),(Kt||yt)&&vv(r,fe,Qe,yt,c,W,it,0,Et,Ht,b,T,A)}y&&r.generateCollisionDebugBuffers(I,r.collisionBoxArray)}function yg(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vv(r,t,s,c,p,y,b,T,I,A,F,j,W){let J=y.textMaxSize.evaluate(t,{},j);void 0===J&&(J=b);const le=r.layers[0].layout,fe=le.get("icon-offset").evaluate(t,{},j),Re=xv(s.horizontal)||s.vertical,ze="globe"===W.name,it=b/24,Qe=r.tilePixelRatio*J/24,pt=(Jt=r.overscaling,r.zoom>18&&Jt>2&&(Jt>>=1),Math.max(Ai/(512*Jt),1)*le.get("symbol-spacing")),yt=le.get("text-padding")*r.tilePixelRatio,Et=le.get("icon-padding")*r.tilePixelRatio,Ht=ut(le.get("text-max-angle")),Kt="map"===le.get("text-rotation-alignment")&&"point"!==le.get("symbol-placement"),fn="map"===le.get("icon-rotation-alignment")&&"point"!==le.get("symbol-placement"),Mn=le.get("symbol-placement"),Pt=pt/2;var Jt;const Ln=le.get("icon-text-fit");let Bn;c&&"none"!==Ln&&(r.allowVerticalPlacement&&s.vertical&&(Bn=D_(c,s.vertical,Ln,le.get("icon-text-fit-padding"),fe,it)),Re&&(c=D_(c,Re,Ln,le.get("icon-text-fit-padding"),fe,it)));const oi=(In,ii,Qi)=>{if(ii.x<0||ii.x>=Ai||ii.y<0||ii.y>=Ai)return;let nr=null;if(ze){const{x:Ii,y:ti,z:hr}=W.projectTilePoint(ii.x,ii.y,Qi);nr={anchor:new Tu(Ii,ti,hr,0,void 0),up:W.upVector(Qi,ii.x,ii.y)}}!function(Ii,ti,hr,Ji,vi,Po,Bo,Wo,gr,Sr,fo,lo,to,vo,zo,vs,Pa,yr,Vo,ea,Wr,Uo,ma,Mo,bo){const js=Ii.addToLineVertexArray(ti,Ji);let Os,Gi,hl,bs,id,Ah,lp,kh=0,gf=0,Sg=0,cp=0,Pd=-1,vm=-1;const Pc={};let up=Uh("");const Ld=hr?hr.anchor:ti;let _f=0,dp=0;if(void 0===gr._unevaluatedLayout.getValue("text-radial-offset")?[_f,dp]=gr.layout.get("text-offset").evaluate(Wr,{},bo).map(Ul=>Ul*Ro):(_f=gr.layout.get("text-radial-offset").evaluate(Wr,{},bo)*Ro,dp=nm),Ii.allowVerticalPlacement&&vi.vertical){const Ul=vi.vertical;if(zo)Ah=vg(Ul),Wo&&(lp=vg(Wo));else{const jl=gr.layout.get("text-rotate").evaluate(Wr,{},bo)+90;hl=_h(Sr,Ld,ti,fo,lo,to,Ul,vo,jl,vs),Wo&&(bs=_h(Sr,Ld,ti,fo,lo,to,Wo,yr,jl))}}if(Po){const Ul=gr.layout.get("icon-rotate").evaluate(Wr,{},bo),jl="none"!==gr.layout.get("icon-text-fit"),hp=fg(Po,Ul,ma,jl),xm=Wo?fg(Wo,Ul,ma,jl):void 0;Gi=_h(Sr,Ld,ti,fo,lo,to,Po,yr,Ul),kh=4*hp.length;const ur=Ii.iconSizeData;let Nd=null;"source"===ur.kind?(Nd=[eu*gr.layout.get("icon-size").evaluate(Wr,{},bo)],Nd[0]>Sd&&ai(`${Ii.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===ur.kind&&(Nd=[eu*Uo.compositeIconSizes[0].evaluate(Wr,{},bo),eu*Uo.compositeIconSizes[1].evaluate(Wr,{},bo)],(Nd[0]>Sd||Nd[1]>Sd)&&ai(`${Ii.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ii.addSymbols(Ii.icon,hp,Nd,ea,Vo,Wr,!1,hr,ti,js.lineStartIndex,js.lineLength,-1,Mo,bo),Pd=Ii.icon.placedSymbolArray.length-1,xm&&(gf=4*xm.length,Ii.addSymbols(Ii.icon,xm,Nd,ea,Vo,Wr,kc.vertical,hr,ti,js.lineStartIndex,js.lineLength,-1,Mo,bo),vm=Ii.icon.placedSymbolArray.length-1)}for(const Ul in vi.horizontal){const jl=vi.horizontal[Ul];Os||(up=Uh(jl.text),zo?id=vg(jl):Os=_h(Sr,Ld,ti,fo,lo,to,jl,vo,gr.layout.get("text-rotate").evaluate(Wr,{},bo),vs));const hp=1===jl.positionedLines.length;if(Sg+=bv(Ii,hr,ti,jl,Bo,gr,zo,Wr,vs,js,vi.vertical?kc.horizontal:kc.horizontalOnly,hp?Object.keys(vi.horizontal):[Ul],Pc,Pd,Uo,Mo,bo),hp)break}vi.vertical&&(cp+=bv(Ii,hr,ti,vi.vertical,Bo,gr,zo,Wr,vs,js,kc.vertical,["vertical"],Pc,vm,Uo,Mo,bo));let Fd=-1;const bm=(Ul,jl)=>Ul?Math.max(Ul,jl):jl;Fd=bm(id,Fd),Fd=bm(Ah,Fd),Fd=bm(lp,Fd);const Ov=Fd>-1?1:0;Ii.glyphOffsetArray.length>=kd.MAX_GLYPHS&&ai("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Wr.sortKey&&Ii.addToSortKeyRanges(Ii.symbolInstances.length,Wr.sortKey),Ii.symbolInstances.emplaceBack(Ld.x,Ld.y,Ld.z,ti.x,ti.y,Pc.right>=0?Pc.right:-1,Pc.center>=0?Pc.center:-1,Pc.left>=0?Pc.left:-1,Pc.vertical>=0?Pc.vertical:-1,Pd,vm,up,void 0!==Os?Os:Ii.collisionBoxArray.length,void 0!==Os?Os+1:Ii.collisionBoxArray.length,void 0!==hl?hl:Ii.collisionBoxArray.length,void 0!==hl?hl+1:Ii.collisionBoxArray.length,void 0!==Gi?Gi:Ii.collisionBoxArray.length,void 0!==Gi?Gi+1:Ii.collisionBoxArray.length,bs||Ii.collisionBoxArray.length,bs?bs+1:Ii.collisionBoxArray.length,fo,Sg,cp,kh,gf,Ov,0,_f,dp,Fd)}(r,ii,nr,In,s,c,p,Bn,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,yt,Kt,I,0,Et,fn,fe,t,y,A,F,j)};if("line"===Mn)for(const In of I_(t.geometry,0,0,Ai,Ai)){const ii=S_(In,pt,Ht,s.vertical||Re,c,24,Qe,r.overscaling,Ai);for(const Qi of ii)Re&&bg(r,Re.text,Pt,Qi)||oi(In,Qi,j)}else if("line-center"===Mn){for(const In of t.geometry)if(In.length>1){const ii=M_(In,Ht,s.vertical||Re,c,24,Qe);ii&&oi(In,ii,j)}}else if("Polygon"===t.type)for(const In of dh(t.geometry,0)){const ii=Md(In,16);oi(In[0],new Tu(ii.x,ii.y,0,0,void 0),j)}else if("LineString"===t.type)for(const In of t.geometry)oi(In,new Tu(In[0].x,In[0].y,0,0,void 0),j);else if("Point"===t.type)for(const In of t.geometry)for(const ii of In)oi([ii],new Tu(ii.x,ii.y,0,0,void 0),j)}const Sd=32640;function bv(r,t,s,c,p,y,b,T,I,A,F,j,W,J,le,fe,Re){const ze=function(pt,yt,Et,Ht,Kt,fn,Mn,Pt){const Jt=[];if(0===yt.positionedLines.length)return Jt;const Ln=Ht.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,Bn=function(nr){const Ii=nr[0],ti=nr[1],hr=Ii*ti;return hr>0?[Ii,-ti]:hr<0?[-Ii,ti]:0===Ii?[ti,Ii]:[ti,-Ii]}(Et);let oi=Math.abs(yt.top-yt.bottom);for(const nr of yt.positionedLines)oi-=nr.lineOffset;const In=yt.positionedLines.length,ii=oi/In;let Qi=yt.top-Et[1];for(let nr=0;nr<In;++nr){const Ii=yt.positionedLines[nr];Qi=k_(yt,ii,Qi,nr);for(const ti of Ii.positionedGlyphs){if(!ti.rect)continue;const hr=ti.rect||{};let Ji=4,vi=!0,Po=1,Bo=0;if(ti.imageName){const Mo=Mn[ti.imageName];if(!Mo)continue;if(Mo.sdf){ai("SDF images are not supported in formatted text and will be ignored.");continue}vi=!1,Po=Mo.pixelRatio,Ji=1/Po}const Wo=(Kt||Pt)&&ti.vertical,gr=ti.metrics.advance*ti.scale/2,Sr=ti.metrics,fo=ti.rect;if(null===fo)continue;Pt&&yt.verticalizable&&(Bo=ti.imageName?gr-ti.metrics.width*ti.scale/2:0);const lo=Kt?[ti.x+gr,ti.y]:[0,0];let to=[0,0],vo=[0,0],zo=!1;Kt||(Wo?(vo=[ti.x+gr+Bn[0],ti.y+Bn[1]-Bo],zo=!0):to=[ti.x+gr+Et[0],ti.y+Et[1]-Bo]);const vs=fo.w*ti.scale/(Po*(ti.localGlyph?2:1)),Pa=fo.h*ti.scale/(Po*(ti.localGlyph?2:1));let yr,Vo,ea,Wr;if(Wo){const Mo=ti.y-Qi,bo=new ke(-gr,gr-Mo),js=-Math.PI/2,Os=new ke(...vo);yr=new ke(-gr+to[0],to[1]),yr._rotateAround(js,bo)._add(Os),yr.x+=-Mo+gr,yr.y-=(Sr.left-Ji)*ti.scale;const Gi=ti.imageName?Sr.advance*ti.scale:Ro*ti.scale,hl=String.fromCharCode(ti.glyph);r0(hl)?yr.x+=(1-Ji)*ti.scale:o0(hl)?yr.x+=Gi-Sr.height*ti.scale+(-Ji-1)*ti.scale:yr.x+=ti.imageName||Sr.width+2*Ji===fo.w&&Sr.height+2*Ji===fo.h?(Gi-Pa)/2:(Gi-(Sr.height+2*Ji)*ti.scale)/2,Vo=new ke(yr.x,yr.y-vs),ea=new ke(yr.x+Pa,yr.y),Wr=new ke(yr.x+Pa,yr.y-vs)}else{const Mo=(Sr.left-Ji)*ti.scale-gr+to[0],bo=(-Sr.top-Ji)*ti.scale+to[1],js=Mo+vs,Os=bo+Pa;yr=new ke(Mo,bo),Vo=new ke(js,bo),ea=new ke(Mo,Os),Wr=new ke(js,Os)}if(Ln){let Mo;Mo=Kt?new ke(0,0):zo?new ke(Bn[0],Bn[1]):new ke(Et[0],Et[1]),yr._rotateAround(Ln,Mo),Vo._rotateAround(Ln,Mo),ea._rotateAround(Ln,Mo),Wr._rotateAround(Ln,Mo)}const Uo=new ke(0,0),ma=new ke(0,0);Jt.push({tl:yr,tr:Vo,bl:ea,br:Wr,tex:hr,writingMode:yt.writingMode,glyphOffset:lo,sectionIndex:ti.sectionIndex,isSDF:vi,pixelOffsetTL:Uo,pixelOffsetBR:ma,minFontScaleX:0,minFontScaleY:0})}}return Jt}(0,c,I,y,b,T,p,r.allowVerticalPlacement),it=r.textSizeData;let Qe=null;"source"===it.kind?(Qe=[eu*y.layout.get("text-size").evaluate(T,{},Re)],Qe[0]>Sd&&ai(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===it.kind&&(Qe=[eu*le.compositeTextSizes[0].evaluate(T,{},Re),eu*le.compositeTextSizes[1].evaluate(T,{},Re)],(Qe[0]>Sd||Qe[1]>Sd)&&ai(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,ze,Qe,I,b,T,F,t,s,A.lineStartIndex,A.lineLength,J,fe,Re);for(const pt of j)W[pt]=r.text.placedSymbolArray.length-1;return 4*ze.length}function xv(r){for(const t in r)return r[t];return null}function _h(r,t,s,c,p,y,b,T,I,A){let F=b.top,j=b.bottom,W=b.left,J=b.right;const le=b.collisionPadding;if(le&&(W-=le[0],F-=le[1],J+=le[2],j+=le[3]),I){const fe=new ke(W,F),Re=new ke(J,F),ze=new ke(W,j),it=new ke(J,j),Qe=ut(I);let pt=new ke(0,0);A&&(pt=new ke(A[0],A[1])),fe._rotateAround(Qe,pt),Re._rotateAround(Qe,pt),ze._rotateAround(Qe,pt),it._rotateAround(Qe,pt),W=Math.min(fe.x,Re.x,ze.x,it.x),J=Math.max(fe.x,Re.x,ze.x,it.x),F=Math.min(fe.y,Re.y,ze.y,it.y),j=Math.max(fe.y,Re.y,ze.y,it.y)}return r.emplaceBack(t.x,t.y,t.z,s.x,s.y,W,F,J,j,T,c,p,y),r.length-1}function vg(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const t=r.bottom-r.top;return t>0?Math.max(10,t):null}function bg(r,t,s,c){const p=r.compareText;if(t in p){const y=p[t];for(let b=y.length-1;b>=0;b--)if(c.dist(y[b])<s)return!0}else p[t]=[];return p[t].push(c),!1}const im=jn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),{members:yh}=im,nf=jn([{name:"a_pos_3",components:3,type:"Int16"}]);var vh=jn([{name:"a_pos",type:"Int16",components:2}]);const tu=Ai/Math.PI/2,ep=2*Wc(1,0)*tu*Math.PI,nu=[64,32,16],Wa=-tu,fa=tu,rf=[new Nl([Wa,Wa,Wa],[fa,fa,fa]),new Nl([Wa,Wa,Wa],[0,0,fa]),new Nl([0,Wa,Wa],[fa,0,fa]),new Nl([Wa,0,Wa],[0,fa,fa]),new Nl([0,0,Wa],[fa,fa,fa])];function rm(r,t,s,c=!0){const p=qc([],r._camera.position,r.worldSize),y=[t,s,1,1];Zu(y,y,r.pixelMatrixInverse),jm(y,y,1/y[3]);const b=xr([],ic([],y,p)),T=r.globeMatrix,I=[T[12],T[13],T[14]],A=ic([],I,p),F=Mp(A),j=xr([],A),W=r.worldSize/(2*Math.PI),J=nc(j,b),le=Math.asin(W/F);if(le<Math.acos(J)){if(!c)return null;const Mn=[],Pt=[];qc(Mn,b,F/J),xr(Pt,ic(Pt,Mn,A)),xr(b,xd(b,A,qc(b,Pt,Math.tan(le)*F)))}const fe=[];new Fl(p,b).closestPointOnSphere(I,W,fe);const Re=xr([],_n(T,0)),ze=xr([],_n(T,1)),it=xr([],_n(T,2)),Qe=nc(Re,fe),pt=nc(ze,fe),yt=nc(it,fe),Et=Ot(Math.asin(-pt/W));let Ht=Ot(Math.atan2(Qe,yt));Ht=r.center.lng+function(Mn,Pt){const Jt=(Pt-Mn+180)%360-180;return Jt<-180?Jt+360:Jt}(r.center.lng,Ht);const Kt=_d(Ht),fn=Rt(yd(Et),0,1);return new th(Kt,fn)}class s0{constructor(t,s,c){this.a=ic([],t,c),this.b=ic([],s,c),this.center=c;const p=xr([],this.a),y=xr([],this.b);this.angle=Math.acos(nc(p,y))}}function sf(r,t){if(0===r.angle)return null;let s;return s=0===r.a[t]?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[t]/r.a[t]/Math.sin(r.angle)-1/Math.tan(r.angle)),s<0||s>1?null:function(c,p,y,b){const T=Math.sin(y);return c*(Math.sin((1-b)*y)/T)+p*(Math.sin(b*y)/T)}(r.a[t],r.b[t],r.angle,Rt(s,0,1))+r.center[t]}function Bl(r){if(r.z<=1)return rf[r.z+2*r.y+r.x];const[t,s]=om(r),c=[Xa(t[0],t[1]),Xa(t[0],s[1]),Xa(s[0],t[1]),Xa(s[0],s[1])],p=[fa,fa,fa],y=[Wa,Wa,Wa];for(const b of c)p[0]=Math.min(p[0],b[0]),p[1]=Math.min(p[1],b[1]),p[2]=Math.min(p[2],b[2]),y[0]=Math.max(y[0],b[0]),y[1]=Math.max(y[1],b[1]),y[2]=Math.max(y[2],b[2]);return new Nl(p,y)}function om(r){const t=1<<r.z,s=r.x/t,c=(r.x+1)/t,p=(r.y+1)/t;return[[As(r.y/t),sl(s)],[As(p),sl(c)]]}function R_(r,t,s,c=tu){return s=ut(s),[r*Math.sin(s)*c,-t*c,r*Math.cos(s)*c]}function Xa(r,t,s){return R_(Math.cos(ut(r)),Math.sin(ut(r)),t,s)}function sm(r,t,s){const c=Math.pow(2,s.z),p=(r/Ai+s.x)/c;return Xa(As((t/Ai+s.y)/c),sl(p))}function af(r){return 16383/Math.max(...ic([],r.max,r.min))}function tp(r){const t=ki(new Float64Array(16)),s=af(r);var c,p;return Zc(t,t,[s,s,s]),Wu(t,t,((c=[])[0]=-(p=r.min)[0],c[1]=-p[1],c[2]=-p[2],c)),t}function P_(r){const t=ki(new Float64Array(16)),s=1/af(r);return Wu(t,t,r.min),Zc(t,t,[s,s,s]),t}function np(r,t,s,c,p){const y=function(I){const A=Ai/(2*Math.PI);return I/(2*Math.PI)/A}(s),b=[r,t,-s/(2*Math.PI)],T=ki(new Float64Array(16));return Wu(T,T,b),Zc(T,T,[y,y,y]),Vm(T,T,ut(-p)),Sf(T,T,ut(-c)),T}function am(r){return On(5,6,r)}function lm(r,t){const s=Xa(t.lat,t.lng);return y=(c=Um([],function(J){const le=Xa(J._center.lat,J._center.lng);let fe=oh([],Ku(0,1,0),le);const Re=Yg([],-J.angle,le);fe=Oo(fe,fe,Re),Yg(Re,-J._pitch,fe);const ze=xr([],le);return qc(ze,ze,J.cameraToCenterDistance/J.pixelsPerMeter*ep),Oo(ze,ze,Re),xd([],le,ze)}(r),s))[0],b=c[1],T=c[2],I=(p=s)[0],A=p[1],F=p[2],W=(j=Math.sqrt(y*y+b*b+T*T)*Math.sqrt(I*I+A*A+F*F))&&nc(c,p)/j,Math.acos(Math.min(Math.max(W,-1),1));var c,p,y,b,T,I,A,F,j,W}const xg=ut(85),a0=Math.cos(xg),l0=Math.sin(xg);function ip(r,t){const s=r.fovAboveCenter,c=r.elevation?r.elevation.getMinElevationBelowMSL()*t:0,p=(r._camera.position[2]*r.worldSize-c)/Math.cos(r._pitch),y=Math.sin(s)*p/Math.sin(Math.max(Math.PI/2-r._pitch-s,.01)),b=Math.sin(r._pitch)*y+p;return Math.min(1.01*b,p*(1/r._horizonShift))}function Id(r,t){if(!t.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:t};const s=Math.pow(2,-r.z),c=r.x*s,p=(r.x+1)*s,y=r.y*s,b=(r.y+1)*s,T=sl(c),I=sl(p),A=As(y),F=As(b),j=t.project(T,A),W=t.project(I,A),J=t.project(I,F),le=t.project(T,F);let fe=Math.min(j.x,W.x,J.x,le.x),Re=Math.min(j.y,W.y,J.y,le.y),ze=Math.max(j.x,W.x,J.x,le.x),it=Math.max(j.y,W.y,J.y,le.y);const Qe=s/16;function pt(Et,Ht,Kt,fn,Mn,Pt){const Jt=(Kt+Mn)/2,Ln=(fn+Pt)/2,Bn=t.project(sl(Jt),As(Ln)),oi=Math.max(0,fe-Bn.x,Re-Bn.y,Bn.x-ze,Bn.y-it);fe=Math.min(fe,Bn.x),ze=Math.max(ze,Bn.x),Re=Math.min(Re,Bn.y),it=Math.max(it,Bn.y),oi>Qe&&(pt(Et,Bn,Kt,fn,Jt,Ln),pt(Bn,Ht,Jt,Ln,Mn,Pt))}pt(j,W,c,y,p,y),pt(W,J,p,y,p,b),pt(J,le,p,b,c,b),pt(le,j,c,b,c,y),fe-=Qe,Re-=Qe,ze+=Qe,it+=Qe;const yt=1/Math.max(ze-fe,it-Re);return{scale:yt,x:fe*yt,y:Re*yt,x2:ze*yt,y2:it*yt,projection:t}}const cm=ki(new Float32Array(16));class Du{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,s){return{x:0,y:0,z:0}}unproject(t,s){return new ao(0,0)}projectTilePoint(t,s,c){return{x:t,y:s,z:0}}locationPoint(t,s,c=!0){return t._coordinatePoint(t.locationCoordinate(s),c)}pixelsPerMeter(t,s){return Wc(1,t)*s}pixelSpaceConversion(t,s,c){return 1}farthestPixelDistance(t){return ip(t,t.pixelsPerMeter)}pointCoordinate(t,s,c,p){const y=t.horizonLineFromTop(!1),b=new ke(s,Math.max(y,c));return t.rayIntersectionCoordinate(t.pointRayIntersection(b,p))}pointCoordinate3D(t,s,c){const p=new ke(s,c);if(t.elevation)return t.elevation.pointCoordinate(p);{const y=this.pointCoordinate(t,p.x,p.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(t,s){if(t.elevation)return!this.pointCoordinate3D(t,s.x,s.y);const c=t.horizonLineFromTop();return s.y<c}createInversionMatrix(t,s){return cm}createTileMatrix(t,s,c){let p,y,b;const T=c.canonical,I=ki(new Float64Array(16));if(this.isReprojectedInTileSpace){const A=Id(T,this);p=1,y=A.x+c.wrap*A.scale,b=A.y,Zc(I,I,[p/A.scale,p/A.scale,t.pixelsPerMeter/s])}else p=s/t.zoomScale(T.z),y=(T.x+Math.pow(2,T.z)*c.wrap)*p,b=T.y*p;return Wu(I,I,[y,b,0]),Zc(I,I,[p/Ai,p/Ai,1]),I}upVector(t,s,c){return[0,0,1]}upVectorScale(t,s,c){return{metersToTile:1}}}class L_ extends Du{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[s,c]=this.parallels=t.parallels||[29.5,45.5],p=Math.sin(ut(s));this.n=(p+Math.sin(ut(c)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(t,s){const{n:c,c:p,r0:y}=this,b=ut(t-this.center[0]),T=ut(s),I=Math.sqrt(p-2*c*Math.sin(T))/c;return{x:I*Math.sin(b*c),y:I*Math.cos(b*c)-y,z:0}}unproject(t,s){const{n:c,c:p,r0:y}=this,b=y+s;let T=Math.atan2(t,Math.abs(b))*Math.sign(b);b*c<0&&(T-=Math.PI*Math.sign(t)*Math.sign(b));const I=ut(this.center[0])*c;T=An(T,-Math.PI-I,Math.PI-I);const A=Ot(T/c)+this.center[0],F=Math.asin(Rt((p-(t*t+b*b)*c*c)/(2*c),-1,1)),j=Rt(Ot(F),-85.051129,_u);return new ao(A,j)}}const lf=1.340264,rp=-.081106,bh=893e-6,op=.003796,Ad=Math.sqrt(3)/2;class F_ extends Du{project(t,s){s=s/180*Math.PI,t=t/180*Math.PI;const c=Math.asin(Ad*Math.sin(s)),p=c*c,y=p*p*p;return{x:.5*(t*Math.cos(c)/(Ad*(lf+3*rp*p+y*(7*bh+9*op*p)))/Math.PI+.5),y:1-.5*(c*(lf+rp*p+y*(bh+op*p))/Math.PI+1),z:0}}unproject(t,s){t=(2*t-.5)*Math.PI;let c=s=(2*(1-s)-1)*Math.PI,p=c*c,y=p*p*p;for(let F,j,W,J=0;J<12&&(j=c*(lf+rp*p+y*(bh+op*p))-s,W=lf+3*rp*p+y*(7*bh+9*op*p),F=j/W,c=Rt(c-F,-Math.PI/3,Math.PI/3),p=c*c,y=p*p*p,!(Math.abs(F)<1e-12));++J);const b=Ad*t*(lf+3*rp*p+y*(7*bh+9*op*p))/Math.cos(c),T=Math.asin(Math.sin(c)/Ad),I=Rt(180*b/Math.PI,-180,180),A=Rt(180*T/Math.PI,-85.051129,_u);return new ao(I,A)}}class um extends Du{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,s){return{x:.5+t/360,y:.5-s/360,z:0}}unproject(t,s){const c=360*(t-.5),p=Rt(360*(.5-s),-85.051129,_u);return new ao(c,p)}}const xh=Math.PI/2;function cf(r){return Math.tan((xh+r)/2)}class N_ extends Du{constructor(t){super(t),this.center=t.center||[0,30];const[s,c]=this.parallels=t.parallels||[30,30],p=ut(s),y=ut(c),b=Math.cos(p);this.n=p===y?Math.sin(p):Math.log(b/Math.cos(y))/Math.log(cf(y)/cf(p)),this.f=b*Math.pow(cf(p),this.n)/this.n}project(t,s){s=ut(s),t=ut(t-this.center[0]);const c=1e-6,{n:p,f:y}=this;y>0?s<-xh+c&&(s=-xh+c):s>xh-c&&(s=xh-c);const b=y/Math.pow(cf(s),p),T=b*Math.sin(p*t),I=y-b*Math.cos(p*t);return{x:.5*(T/Math.PI+.5),y:1-.5*(I/Math.PI+.5),z:0}}unproject(t,s){t=(2*t-.5)*Math.PI,s=(2*(1-s)-.5)*Math.PI;const{n:c,f:p}=this,y=p-s,b=Math.sign(y),T=Math.sign(c)*Math.sqrt(t*t+y*y);let I=Math.atan2(t,Math.abs(y))*b;y*c<0&&(I-=Math.PI*Math.sign(t)*b);const A=Rt(Ot(I/c)+this.center[0],-180,180),F=Rt(Ot(2*Math.atan(Math.pow(p/T,1/c))-xh),-85.051129,_u);return new ao(A,F)}}class uf extends Du{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,s){return{x:_d(t),y:yd(s),z:0}}unproject(t,s){const c=sl(t),p=As(s);return new ao(c,p)}}const dm=ut(_u);class B_ extends Du{project(t,s){const c=(s=ut(s))*s,p=c*c;return{x:.5*((t=ut(t))*(.8707-.131979*c+p*(p*(.003971*c-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+c*(.015085+p*(.028874*c-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(t,s){t=(2*t-.5)*Math.PI;let c=s=(2*(1-s)-1)*Math.PI,p=25,y=0,b=c*c;do{b=c*c;const A=b*b;y=(c*(1.007226+b*(.015085+A*(.028874*b-.044475-.005916*A)))-s)/(1.007226+b*(.045255+A*(.259866*b-.311325-.005916*11*A))),c=Rt(c-y,-dm,dm)}while(Math.abs(y)>1e-6&&--p>0);b=c*c;const T=Rt(Ot(t/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),I=Ot(c);return new ao(T,I)}}const yo=ut(_u);class sp extends Du{project(t,s){s=ut(s),t=ut(t);const c=Math.cos(s),p=2/Math.PI,y=Math.acos(c*Math.cos(t/2)),b=Math.sin(y)/y,T=.5*(t*p+2*c*Math.sin(t/2)/b)||0,I=.5*(s+Math.sin(s)/b)||0;return{x:.5*(T/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(t,s){let c=t=(2*t-.5)*Math.PI,p=s=(2*(1-s)-1)*Math.PI,y=25;const b=1e-6;let T=0,I=0;do{const A=Math.cos(p),F=Math.sin(p),j=2*F*A,W=F*F,J=A*A,le=Math.cos(c/2),fe=Math.sin(c/2),Re=2*le*fe,ze=fe*fe,it=1-J*le*le,Qe=it?1/it:0,pt=it?Math.acos(A*le)*Math.sqrt(1/it):0,yt=.5*(2*pt*A*fe+2*c/Math.PI)-t,Et=.5*(pt*F+p)-s,Ht=.5*Qe*(J*ze+pt*A*le*W)+1/Math.PI,Kt=Qe*(Re*j/4-pt*F*fe),fn=.125*Qe*(j*fe-pt*F*J*Re),Mn=.5*Qe*(W*le+pt*ze*A)+.5,Pt=Kt*fn-Mn*Ht;T=(Et*Kt-yt*Mn)/Pt,I=(yt*fn-Et*Ht)/Pt,c=Rt(c-T,-Math.PI,Math.PI),p=Rt(p-I,-yo,yo)}while((Math.abs(T)>b||Math.abs(I)>b)&&--y>0);return new ao(Ot(c),Ot(p))}}class wh extends Du{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ut(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,s){const{scale:c,cosPhi:p}=this;return{x:ut(t)*p*c+.5,y:-Math.sin(ut(s))/p*c+.5,z:0}}unproject(t,s){const{scale:c,cosPhi:p}=this,y=-(s-.5)/c,b=Rt(Ot((t-.5)/c)/p,-180,180),T=Math.asin(Rt(y*p,-1,1)),I=Rt(Ot(T),-85.051129,_u);return new ao(b,I)}}class wv extends uf{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(t,s,c){const p=Math.pow(2,c.z),y=(t/Ai+c.x)/p,b=Xa(As((s/Ai+c.y)/p),sl(y));return Oo(b,b,tp(Bl(c))),{x:b[0],y:b[1],z:b[2]}}locationPoint(t,s){const c=Xa(s.lat,s.lng),p=xr([],c),y=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(s),t._centerAltitude):t._centerAltitude;Sp(c,c,p,Wc(1,0)*Ai*y);const b=ki(new Float64Array(16));return Kc(b,t.pixelMatrix,t.globeMatrix),Oo(c,c,b),new ke(c[0],c[1])}pixelsPerMeter(t,s){return Wc(1,0)*s}pixelSpaceConversion(t,s,c){const p=Xi(Wc(1,45)*s,Wc(1,t)*s,c);return this.pixelsPerMeter(t,s)/p}createTileMatrix(t,s,c){const p=P_(Bl(c.canonical));return Kc(new Float64Array(16),t.globeMatrix,p)}createInversionMatrix(t,s){const{center:c}=t,p=ki(new Float64Array(16));return Kc(p,p,tp(Bl(s))),Sf(p,p,ut(c.lng)),Vm(p,p,ut(c.lat)),Zc(p,p,[t._projectionScaler,t._projectionScaler,1]),Float32Array.from(p)}pointCoordinate(t,s,c,p){return rm(t,s,c,!0)||new th(0,0)}pointCoordinate3D(t,s,c){const p=this.pointCoordinate(t,s,c,0);return[p.x,p.y,p.z]}isPointAboveHorizon(t,s){return!rm(t,s.x,s.y,!1)}farthestPixelDistance(t){const s=function(p,y){const b=p.cameraToCenterDistance,T=p._centerAltitude*y,I=p._camera,A=p._camera.forward(),F=xd([],qc([],A,-b),[0,0,T]),j=p.worldSize/(2*Math.PI),W=[0,0,-j],J=p.width/p.height,le=Math.tan(p.fovAboveCenter),fe=qc([],I.up(),le),Re=qc([],I.right(),le*J),ze=xr([],xd([],xd([],A,fe),Re)),it=[];let Qe;if(new Fl(F,ze).closestPointOnSphere(W,j,it)){const pt=xd([],it,W),yt=ic([],pt,F);Qe=Math.cos(p.fovAboveCenter)*Mp(yt)}else{const pt=ic([],F,W),yt=ic([],W,F);xr(yt,yt);const Et=Mp(pt)-j;Qe=Math.sqrt(Et*(Et+2*j));const Ht=Math.acos(Qe/(j+Et))-Math.acos(nc(A,yt));Qe*=Math.cos(Ht)}return 1.01*Qe}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),c=am(t.zoom);if(c>0){const p=ip(t,Wc(1,t.center.lat)*t.worldSize),y=t.worldSize/(2*Math.PI),b=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Xi(s,p+y*(1-Math.cos(b)),Math.pow(c,10))}return s}upVector(t,s,c){const p=1<<t.z,y=(s/Ai+t.x)/p;return Xa(As((c/Ai+t.y)/p),sl(y),1)}upVectorScale(t){return{metersToTile:ep*af(Bl(t))}}}function z_(r){const t=r.parallels,s=!!t&&Math.abs(t[0]+t[1])<.01;switch(r.name){case"mercator":return new uf(r);case"equirectangular":return new um(r);case"naturalEarth":return new B_(r);case"equalEarth":return new F_(r);case"winkelTripel":return new sp(r);case"albers":return s?new wh(r):new L_(r);case"lambertConformalConic":return s?new wh(r):new N_(r);case"globe":return new wv(r)}throw new Error(`Invalid projection name: ${r.name}`)}const c0=Ed.VectorTileFeature.types,hm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Eh(r,t,s,c,p,y,b,T,I,A,F,j,W){const J=T?Math.min(Sd,Math.round(T[0])):0,le=T?Math.min(Sd,Math.round(T[1])):0;r.emplaceBack(t,s,Math.round(32*c),Math.round(32*p),y,b,(J<<1)+(I?1:0),le,16*A,16*F,256*j,256*W)}function ap(r,t,s,c,p,y,b){r.emplaceBack(t,s,c,p,y,b)}function Ch(r,t,s,c,p){r.emplaceBack(t,s,c,p),r.emplaceBack(t,s,c,p),r.emplaceBack(t,s,c,p),r.emplaceBack(t,s,c,p)}function df(r){for(const t of r.sections)if(M(t.text))return!0;return!1}class Mu{constructor(t){this.layoutVertexArray=new Ua,this.indexArray=new kr,this.programConfigurations=t,this.segments=new ls,this.dynamicLayoutVertexArray=new Ur,this.opacityVertexArray=new kl,this.placedSymbolArray=new Ys,this.globeExtVertexArray=new jr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,s,c,p){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Js.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,av.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hm,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,e0.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Wn(Mu,"SymbolBuffers");class pm{constructor(t,s,c){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new c,this.segments=new ls,this.collisionVertexArray=new Mr,this.collisionVertexArrayExt=new Jo}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,t0.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,g_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Wn(pm,"CollisionBuffers");class kd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ki([]),this.placementViewportMatrix=ki([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mh(this.zoom,s["text-size"]),this.iconSizeData=mh(this.zoom,s["icon-size"]);const c=this.layers[0].layout,p=c.get("symbol-sort-key"),y=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==y&&void 0!==p.constantOr(1),this.sortFeaturesByY=("viewport-y"===y||"auto"===y&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(b=>kc[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new Mu(new Mc(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Mu(new Mc(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new No,this.lineVertexArray=new Ms,this.symbolInstances=new Zd}calculateGlyphDependencies(t,s,c,p,y){for(let b=0;b<t.length;b++)if(s[t.charCodeAt(b)]=!0,p&&y){const T=$f[t.charAt(b)];T&&(s[T.charCodeAt(0)]=!0)}}populate(t,s,c,p){const y=this.layers[0],b=y.layout,T="globe"===this.projection.name,I=b.get("text-font"),A=b.get("text-field"),F=b.get("icon-image"),j=("constant"!==A.value.kind||A.value.value instanceof Dr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&("constant"!==I.value.kind||I.value.value.length>0),W="constant"!==F.value.kind||!!F.value.value||Object.keys(F.parameters).length>0,J=b.get("symbol-sort-key");if(this.features=[],!j&&!W)return;const le=s.iconDependencies,fe=s.glyphDependencies,Re=s.availableImages,ze=new Le(this.zoom);for(const{feature:it,id:Qe,index:pt,sourceLayerIndex:yt}of t){const Et=y._featureFilter.needGeometry,Ht=nh(it,Et);if(!y._featureFilter.filter(ze,Ht,c))continue;if(Et||(Ht.geometry=Xc(it,c,p)),T&&1!==it.type&&c.z<=5){const Pt=Ht.geometry,Jt=1<<c.z,Ln=c.x,Bn=c.y,oi=.98078528056;for(let In=0;In<Pt.length;In++)Pt[In]=qy(Pt[In],ii=>ii,(ii,Qi)=>nc(Xa(As((ii.y/Ai+Bn)/Jt),sl((ii.x/Ai+Ln)/Jt),1),Xa(As((Qi.y/Ai+Bn)/Jt),sl((Qi.x/Ai+Ln)/Jt),1))<oi)}let Kt,fn;if(j){const Pt=y.getValueAndResolveTokens("text-field",Ht,c,Re),Jt=Dr.factory(Pt);df(Jt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===xe()||this.hasRTLText&&Me.isParsed())&&(Kt=n0(Jt,y,Ht))}if(W){const Pt=y.getValueAndResolveTokens("icon-image",Ht,c,Re);fn=Pt instanceof Co?Pt:Co.fromString(Pt)}if(!Kt&&!fn)continue;const Mn=this.sortFeaturesByKey?J.evaluate(Ht,{},c):void 0;if(this.features.push({id:Qe,text:Kt,icon:fn,index:pt,sourceLayerIndex:yt,geometry:Ht.geometry,properties:it.properties,type:c0[it.type],sortKey:Mn}),fn&&(le[fn.name]=!0),Kt){const Pt=I.evaluate(Ht,{},c).join(","),Jt="map"===b.get("text-rotation-alignment")&&"point"!==b.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(kc.vertical)>=0;for(const Ln of Kt.sections)if(Ln.image)le[Ln.image.name]=!0;else{const Bn=oe(Kt.toString()),oi=Ln.fontStack||Pt,In=fe[oi]=fe[oi]||{};this.calculateGlyphDependencies(Ln.text,In,Jt,this.allowVerticalPlacement,Bn)}}}"line"===b.get("symbol-placement")&&(this.features=function(it){const Qe={},pt={},yt=[];let Et=0;function Ht(Pt){yt.push(it[Pt]),Et++}function Kt(Pt,Jt,Ln){const Bn=pt[Pt];return delete pt[Pt],pt[Jt]=Bn,yt[Bn].geometry[0].pop(),yt[Bn].geometry[0]=yt[Bn].geometry[0].concat(Ln[0]),Bn}function fn(Pt,Jt,Ln){const Bn=Qe[Jt];return delete Qe[Jt],Qe[Pt]=Bn,yt[Bn].geometry[0].shift(),yt[Bn].geometry[0]=Ln[0].concat(yt[Bn].geometry[0]),Bn}function Mn(Pt,Jt,Ln){const Bn=Ln?Jt[0][Jt[0].length-1]:Jt[0][0];return`${Pt}:${Bn.x}:${Bn.y}`}for(let Pt=0;Pt<it.length;Pt++){const Jt=it[Pt],Ln=Jt.geometry,Bn=Jt.text?Jt.text.toString():null;if(!Bn){Ht(Pt);continue}const oi=Mn(Bn,Ln),In=Mn(Bn,Ln,!0);if(oi in pt&&In in Qe&&pt[oi]!==Qe[In]){const ii=fn(oi,In,Ln),Qi=Kt(oi,In,yt[ii].geometry);delete Qe[oi],delete pt[In],pt[Mn(Bn,yt[Qi].geometry,!0)]=Qi,yt[ii].geometry=null}else oi in pt?Kt(oi,In,Ln):In in Qe?fn(oi,In,Ln):(Ht(Pt),Qe[oi]=Et-1,pt[In]=Et-1)}return yt.filter(Pt=>Pt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((it,Qe)=>it.sortKey-Qe.sortKey)}update(t,s,c,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,c,p),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,c,p))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=z_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const c=this.lineVertexArray.length,p=t.segment;if(void 0!==p){let y=t.dist(s[p+1]),b=t.dist(s[p]);const T={};for(let I=p+1;I<s.length;I++)T[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:y},I<s.length-1&&(y+=s[I+1].dist(s[I]));for(let I=p||0;I>=0;I--)T[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:b},I>0&&(b+=s[I-1].dist(s[I]));for(let I=0;I<s.length;I++){const A=T[I];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,s,c,p,y,b,T,I,A,F,j,W,J,le){const fe=t.indexArray,Re=t.layoutVertexArray,ze=t.globeExtVertexArray,it=t.segments.prepareSegment(4*s.length,Re,fe,this.canOverlap?b.sortKey:void 0),Qe=this.glyphOffsetArray.length,pt=it.vertexLength,yt=this.allowVerticalPlacement&&T===kc.vertical?Math.PI/2:0,Et=b.text&&b.text.sections;for(let Kt=0;Kt<s.length;Kt++){const{tl:fn,tr:Mn,bl:Pt,br:Jt,tex:Ln,pixelOffsetTL:Bn,pixelOffsetBR:oi,minFontScaleX:In,minFontScaleY:ii,glyphOffset:Qi,isSDF:nr,sectionIndex:Ii}=s[Kt],ti=it.vertexLength,hr=Qi[1];if(Eh(Re,A.x,A.y,fn.x,hr+fn.y,Ln.x,Ln.y,c,nr,Bn.x,Bn.y,In,ii),Eh(Re,A.x,A.y,Mn.x,hr+Mn.y,Ln.x+Ln.w,Ln.y,c,nr,oi.x,Bn.y,In,ii),Eh(Re,A.x,A.y,Pt.x,hr+Pt.y,Ln.x,Ln.y+Ln.h,c,nr,Bn.x,oi.y,In,ii),Eh(Re,A.x,A.y,Jt.x,hr+Jt.y,Ln.x+Ln.w,Ln.y+Ln.h,c,nr,oi.x,oi.y,In,ii),I){const Ji=I.anchor,vi=I.up;ap(ze,Ji.x,Ji.y,Ji.z,vi[0],vi[1],vi[2]),ap(ze,Ji.x,Ji.y,Ji.z,vi[0],vi[1],vi[2]),ap(ze,Ji.x,Ji.y,Ji.z,vi[0],vi[1],vi[2]),ap(ze,Ji.x,Ji.y,Ji.z,vi[0],vi[1],vi[2]),Ch(t.dynamicLayoutVertexArray,Ji.x,Ji.y,Ji.z,yt)}else Ch(t.dynamicLayoutVertexArray,A.x,A.y,A.z,yt);fe.emplaceBack(ti,ti+1,ti+2),fe.emplaceBack(ti+1,ti+2,ti+3),it.vertexLength+=4,it.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qi[0]),Kt!==s.length-1&&Ii===s[Kt+1].sectionIndex||t.programConfigurations.populatePaintArrays(Re.length,b,b.index,{},J,le,Et&&Et[Ii])}const Ht=I?I.anchor:A;t.placedSymbolArray.emplaceBack(Ht.x,Ht.y,Ht.z,A.x,A.y,Qe,this.glyphOffsetArray.length-Qe,pt,F,j,A.segment,c?c[0]:0,c?c[1]:0,p[0],p[1],T,0,!1,0,W,0)}_commitLayoutVertex(t,s,c,p,y,b,T){t.emplaceBack(s,c,p,y,b,Math.round(T.x),Math.round(T.y))}_addCollisionDebugVertices(t,s,c,p,y,b,T){const I=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),A=I.vertexLength,F=T.tileAnchorX,j=T.tileAnchorY;for(let J=0;J<4;J++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(s,-t.padding,-t.padding),c.collisionVertexArrayExt.emplaceBack(s,t.padding,-t.padding),c.collisionVertexArrayExt.emplaceBack(s,t.padding,t.padding),c.collisionVertexArrayExt.emplaceBack(s,-t.padding,t.padding),this._commitLayoutVertex(c.layoutVertexArray,p,y,b,F,j,new ke(t.x1,t.y1)),this._commitLayoutVertex(c.layoutVertexArray,p,y,b,F,j,new ke(t.x2,t.y1)),this._commitLayoutVertex(c.layoutVertexArray,p,y,b,F,j,new ke(t.x2,t.y2)),this._commitLayoutVertex(c.layoutVertexArray,p,y,b,F,j,new ke(t.x1,t.y2)),I.vertexLength+=4;const W=c.indexArray;W.emplaceBack(A,A+1),W.emplaceBack(A+1,A+2),W.emplaceBack(A+2,A+3),W.emplaceBack(A+3,A),I.primitiveLength+=4}_addTextDebugCollisionBoxes(t,s,c,p,y,b){for(let T=p;T<y;T++){const I=c.get(T),A=this.getSymbolInstanceTextSize(t,b,s,T);this._addCollisionDebugVertices(I,A,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(t,s,c,p,y,b){for(let T=p;T<y;T++){const I=c.get(T),A=this.getSymbolInstanceIconSize(t,s,T);this._addCollisionDebugVertices(I,A,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,b)}}generateCollisionDebugBuffers(t,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pm(ko,lv.members,as),this.iconCollisionBox=new pm(ko,lv.members,as);const c=Yh(this.iconSizeData,t),p=Yh(this.textSizeData,t);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(p,t,s,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(p,t,s,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(c,t,s,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(c,t,s,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(t,s,c,p){const y=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:p),b=Gf(this.textSizeData,t,y)/Ro;return this.tilePixelRatio*b}getSymbolInstanceIconSize(t,s,c){const p=this.icon.placedSymbolArray.get(c),y=Gf(this.iconSizeData,t,p);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(t,s,c){t.emplaceBack(s,-c,-c),t.emplaceBack(s,c,-c),t.emplaceBack(s,c,c),t.emplaceBack(s,-c,c)}_updateTextDebugCollisionBoxes(t,s,c,p,y,b){for(let T=p;T<y;T++){const I=c.get(T),A=this.getSymbolInstanceTextSize(t,b,s,T);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,A,I.padding)}}_updateIconDebugCollisionBoxes(t,s,c,p,y){for(let b=p;b<y;b++){const T=c.get(b),I=this.getSymbolInstanceIconSize(t,s,b);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,I,T.padding)}}updateCollisionDebugBuffers(t,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=Yh(this.iconSizeData,t),p=Yh(this.textSizeData,t);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(p,t,s,b.textBoxStartIndex,b.textBoxEndIndex,b),this._updateTextDebugCollisionBoxes(p,t,s,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._updateIconDebugCollisionBoxes(c,t,s,b.iconBoxStartIndex,b.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(c,t,s,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,s,c,p,y,b,T,I,A){const F={};for(let j=s;j<c;j++){const W=t.get(j);F.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,padding:W.padding,projectedAnchorX:W.projectedAnchorX,projectedAnchorY:W.projectedAnchorY,projectedAnchorZ:W.projectedAnchorZ,tileAnchorX:W.tileAnchorX,tileAnchorY:W.tileAnchorY},F.textFeatureIndex=W.featureIndex;break}for(let j=p;j<y;j++){const W=t.get(j);F.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,padding:W.padding,projectedAnchorX:W.projectedAnchorX,projectedAnchorY:W.projectedAnchorY,projectedAnchorZ:W.projectedAnchorZ,tileAnchorX:W.tileAnchorX,tileAnchorY:W.tileAnchorY},F.verticalTextFeatureIndex=W.featureIndex;break}for(let j=b;j<T;j++){const W=t.get(j);F.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,padding:W.padding,projectedAnchorX:W.projectedAnchorX,projectedAnchorY:W.projectedAnchorY,projectedAnchorZ:W.projectedAnchorZ,tileAnchorX:W.tileAnchorX,tileAnchorY:W.tileAnchorY},F.iconFeatureIndex=W.featureIndex;break}for(let j=I;j<A;j++){const W=t.get(j);F.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,padding:W.padding,projectedAnchorX:W.projectedAnchorX,projectedAnchorY:W.projectedAnchorY,projectedAnchorZ:W.projectedAnchorZ,tileAnchorX:W.tileAnchorX,tileAnchorY:W.tileAnchorY},F.verticalIconFeatureIndex=W.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const c=t.placedSymbolArray.get(s),p=c.vertexStartIndex+4*c.numGlyphs;for(let y=c.vertexStartIndex;y<p;y+=4)t.indexArray.emplaceBack(y,y+1,y+2),t.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const s=Math.sin(t),c=Math.cos(t),p=[],y=[],b=[];for(let T=0;T<this.symbolInstances.length;++T){b.push(T);const I=this.symbolInstances.get(T);p.push(0|Math.round(s*I.tileAnchorX+c*I.tileAnchorY)),y.push(I.featureIndex)}return b.sort((T,I)=>p[T]-p[I]||y[I]-y[T]),b}addToSortKeyRanges(t,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((p,y,b)=>{p>=0&&b.indexOf(p)===y&&this.addIndicesForPlacedSymbol(this.text,p)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Wn(kd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),kd.MAX_GLYPHS=65535,kd.addDynamicAttributes=Ch;const Ev=new en({"symbol-placement":new Nt(xt.layout_symbol["symbol-placement"]),"symbol-spacing":new Nt(xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nt(xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new tt(xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nt(xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nt(xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Nt(xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nt(xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nt(xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new tt(xt.layout_symbol["icon-size"]),"icon-text-fit":new Nt(xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nt(xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new tt(xt.layout_symbol["icon-image"]),"icon-rotate":new tt(xt.layout_symbol["icon-rotate"]),"icon-padding":new Nt(xt.layout_symbol["icon-padding"]),"icon-keep-upright":new Nt(xt.layout_symbol["icon-keep-upright"]),"icon-offset":new tt(xt.layout_symbol["icon-offset"]),"icon-anchor":new tt(xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nt(xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nt(xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nt(xt.layout_symbol["text-rotation-alignment"]),"text-field":new tt(xt.layout_symbol["text-field"]),"text-font":new tt(xt.layout_symbol["text-font"]),"text-size":new tt(xt.layout_symbol["text-size"]),"text-max-width":new tt(xt.layout_symbol["text-max-width"]),"text-line-height":new tt(xt.layout_symbol["text-line-height"]),"text-letter-spacing":new tt(xt.layout_symbol["text-letter-spacing"]),"text-justify":new tt(xt.layout_symbol["text-justify"]),"text-radial-offset":new tt(xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nt(xt.layout_symbol["text-variable-anchor"]),"text-anchor":new tt(xt.layout_symbol["text-anchor"]),"text-max-angle":new Nt(xt.layout_symbol["text-max-angle"]),"text-writing-mode":new Nt(xt.layout_symbol["text-writing-mode"]),"text-rotate":new tt(xt.layout_symbol["text-rotate"]),"text-padding":new Nt(xt.layout_symbol["text-padding"]),"text-keep-upright":new Nt(xt.layout_symbol["text-keep-upright"]),"text-transform":new tt(xt.layout_symbol["text-transform"]),"text-offset":new tt(xt.layout_symbol["text-offset"]),"text-allow-overlap":new Nt(xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Nt(xt.layout_symbol["text-ignore-placement"]),"text-optional":new Nt(xt.layout_symbol["text-optional"])});var wg={paint:new en({"icon-opacity":new tt(xt.paint_symbol["icon-opacity"]),"icon-color":new tt(xt.paint_symbol["icon-color"]),"icon-halo-color":new tt(xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new tt(xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new tt(xt.paint_symbol["icon-halo-blur"]),"icon-translate":new Nt(xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nt(xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new tt(xt.paint_symbol["text-opacity"]),"text-color":new tt(xt.paint_symbol["text-color"],{runtimeType:Xo,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new tt(xt.paint_symbol["text-halo-color"]),"text-halo-width":new tt(xt.paint_symbol["text-halo-width"]),"text-halo-blur":new tt(xt.paint_symbol["text-halo-blur"]),"text-translate":new Nt(xt.paint_symbol["text-translate"]),"text-translate-anchor":new Nt(xt.paint_symbol["text-translate-anchor"])}),layout:Ev};class V_{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ya,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wn(V_,"FormatSectionOverride",{omit:["defaultValue"]});class rc extends gu{constructor(t){super(t,wg)}recalculate(t,s){super.recalculate(t,s),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const p=[];for(const y of c)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,s,c,p){const y=this.layout.get(t).evaluate(s,{},c,p),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||Ki(b.value)||!y?y:(T=s.properties,y.replace(/{([^{}]+)}/g,(A,F)=>F in T?String(T[F]):""));var T}createBucket(t){return new kd(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of wg.paint.overridableProperties){if(!rc.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),c=new V_(s),p=new Vc(c,s.property.specification);let y=null;y="constant"===s.value.kind||"source"===s.value.kind?new Fu("source",p):new Uc("composite",p,s.value.zoomStops,s.value._interpolationType),this.paint._values[t]=new Xt(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&rc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const c=t.get("text-field"),p=wg.paint.properties[s];let y=!1;const b=T=>{for(const I of T)if(p.overrides&&p.overrides.hasOverride(I))return void(y=!0)};if("constant"===c.value.kind&&c.value.value instanceof Dr)b(c.value.value.sections);else if("source"===c.value.kind){const T=A=>{y||(A instanceof Xs&&Or(A.value)===Yt?b(A.value.sections):A instanceof qa?b(A.sections):A.eachChild(T))},I=c.value;I._styleExpression&&T(I._styleExpression.expression)}return y}getProgramConfiguration(t){return new gd(this,t)}}var _s={paint:new en({"background-color":new Nt(xt.paint_background["background-color"]),"background-pattern":new gn(xt.paint_background["background-pattern"]),"background-opacity":new Nt(xt.paint_background["background-opacity"])})},Cv={paint:new en({"raster-opacity":new Nt(xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nt(xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nt(xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nt(xt.paint_raster["raster-brightness-max"]),"raster-saturation":new Nt(xt.paint_raster["raster-saturation"]),"raster-contrast":new Nt(xt.paint_raster["raster-contrast"]),"raster-resampling":new Nt(xt.paint_raster["raster-resampling"]),"raster-fade-duration":new Nt(xt.paint_raster["raster-fade-duration"])})};class Od extends gu{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var Do={paint:new en({"sky-type":new Nt(xt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Nt(xt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Nt(xt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Nt(xt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Nt(xt.paint_sky["sky-gradient-radius"]),"sky-gradient":new qn(xt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Nt(xt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Nt(xt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Nt(xt.paint_sky["sky-opacity"])})};function zl(r,t,s){const c=[0,0,1],p=$a([]);return Gm(p,p,s?-ut(r)+Math.PI:ut(r)),bu(p,p,-ut(t)),Af(c,c,p),xr(c,c)}const Zr={circle:class extends gu{constructor(r){super(r,Mf)}createBucket(r){return new Df(r)}queryRadius(r){const t=r;return ih("circle-radius",this,t)+ih("circle-stroke-width",this,t)+Dp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,t,s,c,p,y,b,T){const I=yu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,r.pixelToTileUnitsFactor),A=this.paint.get("circle-radius").evaluate(t,s)+this.paint.get("circle-stroke-width").evaluate(t,s);return Jg(r,c,y,b,T,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),I,A)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new gd(this,r)}},heatmap:class extends gu{createBucket(r){return new Wh(r)}constructor(r){super(r,t_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Of({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return ih("heatmap-radius",this,r)}queryIntersectsFeature(r,t,s,c,p,y,b,T){const I=this.paint.get("heatmap-radius").evaluate(t,s);return Jg(r,c,y,b,T,!0,!0,new ke(0,0),I)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new gd(this,r)}},hillshade:class extends gu{constructor(r){super(r,Wm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends gu{constructor(r){super(r,l_)}getProgramIds(){const r=this.paint.get("fill-pattern"),t=r&&r.constantOr(1),s=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(r){return new gd(this,r)}recalculate(r,t){super.recalculate(r,t);const s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Zm(r)}queryRadius(){return Dp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,t,s,c,p,y){return!r.queryGeometry.isAboveHorizon&&Hh(bd(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,r.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends gu{constructor(r){super(r,Qm)}createBucket(r){return new Eu(r)}queryRadius(){return Dp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new gd(this,r)}queryIntersectsFeature(r,t,s,c,p,y,b,T,I){const A=yu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,r.pixelToTileUnitsFactor),F=this.paint.get("fill-extrusion-height").evaluate(t,s),j=this.paint.get("fill-extrusion-base").evaluate(t,s),W=[0,0],J=T&&y.elevation,le=y.elevation?y.elevation.exaggeration():1,fe=r.tile.getBucket(this);if(J&&fe instanceof Eu){const it=fe.centroidVertexArray,Qe=I+1;if(Qe<it.length){const pt=it.get(Qe);W[0]=pt.a_centroid_pos0,W[1]=pt.a_centroid_pos1}}if(0===W[0]&&1===W[1])return!1;"globe"===y.projection.name&&(c=h_([c],[new ke(0,0),new ke(Ai,Ai)],r.tileID.canonical).map(it=>it.polygon).flat());const Re=(Qe=c,pt=j,yt=F,Et=A,Ht=b,Kt=J?T:null,fn=W,Mn=le,Pt=y.center.lat,"globe"===(it=y).projection.name?function(Ln,Bn,oi,In,ii,Qi,nr,Ii,ti,hr,Ji){const vi=[],Po=[],Bo=Ln.projection.upVectorScale(Ji,Ln.center.lat,Ln.worldSize).metersToTile,Wo=[0,0,0,1],gr=[0,0,0,1],Sr=(lo,to,vo,zo)=>{lo[0]=to,lo[1]=vo,lo[2]=zo,lo[3]=1},fo=Us();oi>0&&(oi+=fo),In+=fo;for(const lo of Bn){const to=[],vo=[];for(const zo of lo){const vs=zo.x+ii.x,Pa=zo.y+ii.y,yr=Ln.projection.projectTilePoint(vs,Pa,Ji),Vo=Ln.projection.upVector(Ji,zo.x,zo.y);let ea=oi,Wr=In;if(nr){const Uo=eg(vs,Pa,oi,In,nr,Ii,ti,hr);ea+=Uo.base,Wr+=Uo.top}0!==oi?Sr(Wo,yr.x+Vo[0]*Bo*ea,yr.y+Vo[1]*Bo*ea,yr.z+Vo[2]*Bo*ea):Sr(Wo,yr.x,yr.y,yr.z),Sr(gr,yr.x+Vo[0]*Bo*Wr,yr.y+Vo[1]*Bo*Wr,yr.z+Vo[2]*Bo*Wr),Oo(Wo,Wo,Qi),Oo(gr,gr,Qi),to.push(fh(Wo)),vo.push(fh(gr))}vi.push(to),Po.push(vo)}return[vi,Po]}(it,Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt,r.tileID.canonical):Kt?function(Ln,Bn,oi,In,ii,Qi,nr,Ii,ti){const hr=[],Ji=[],vi=[0,0,0,1];for(const Po of Ln){const Bo=[],Wo=[];for(const gr of Po){const Sr=gr.x+In.x,fo=gr.y+In.y,lo=eg(Sr,fo,Bn,oi,Qi,nr,Ii,ti);vi[0]=Sr,vi[1]=fo,vi[2]=lo.base,vi[3]=1,Zu(vi,vi,ii),vi[3]=Math.max(vi[3],1e-5);const to=fh([vi[0]/vi[3],vi[1]/vi[3],vi[2]/vi[3]]);vi[0]=Sr,vi[1]=fo,vi[2]=lo.top,vi[3]=1,Zu(vi,vi,ii),vi[3]=Math.max(vi[3],1e-5);const vo=fh([vi[0]/vi[3],vi[1]/vi[3],vi[2]/vi[3]]);Bo.push(to),Wo.push(vo)}hr.push(Bo),Ji.push(Wo)}return[hr,Ji]}(Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt):function(Ln,Bn,oi,In,ii){const Qi=[],nr=[],Ii=ii[8]*Bn,ti=ii[9]*Bn,hr=ii[10]*Bn,Ji=ii[11]*Bn,vi=ii[8]*oi,Po=ii[9]*oi,Bo=ii[10]*oi,Wo=ii[11]*oi;for(const gr of Ln){const Sr=[],fo=[];for(const lo of gr){const to=lo.x+In.x,vo=lo.y+In.y,zo=ii[0]*to+ii[4]*vo+ii[12],vs=ii[1]*to+ii[5]*vo+ii[13],Pa=ii[2]*to+ii[6]*vo+ii[14],yr=ii[3]*to+ii[7]*vo+ii[15],Vo=zo+Ii,ea=vs+ti,Wr=Pa+hr,Uo=Math.max(yr+Ji,1e-5),ma=zo+vi,Mo=vs+Po,bo=Pa+Bo,js=Math.max(yr+Wo,1e-5),Os=new ke(Vo/Uo,ea/Uo);Os.z=Wr/Uo,Sr.push(Os);const Gi=new ke(ma/js,Mo/js);Gi.z=bo/js,fo.push(Gi)}Qi.push(Sr),nr.push(fo)}return[Qi,nr]}(Qe,pt,yt,Et,Ht)),ze=r.queryGeometry;var it,Qe,pt,yt,Et,Ht,Kt,fn,Mn,Pt;return function(it,Qe,pt){let yt=1/0;Hh(pt,Qe)&&(yt=Xp(pt,Qe[0]));for(let Et=0;Et<Qe.length;Et++){const Ht=Qe[Et],Kt=it[Et];for(let fn=0;fn<Ht.length-1;fn++){const Mn=Ht[fn],Pt=[Mn,Ht[fn+1],Kt[fn+1],Kt[fn],Mn];Gr(pt,Pt)&&(yt=Math.min(yt,Xp(pt,Pt)))}}return yt!==1/0&&yt}(Re[0],Re[1],ze.isPointQuery()?ze.screenBounds:ze.screenGeometry)}},line:class extends gu{constructor(r){super(r,sv),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if("line-gradient"===r){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ns,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,t){super.recalculate(r,t),this.paint._values["line-floorwidth"]=tg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new jf(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new gd(this,r)}queryRadius(r){const t=r,s=ng(ih("line-width",this,t),ih("line-gap-width",this,t)),c=ih("line-offset",this,t);return s/2+Math.abs(c)+Dp(this.paint.get("line-translate"))}queryIntersectsFeature(r,t,s,c,p,y){if(r.queryGeometry.isAboveHorizon)return!1;const b=bd(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,r.pixelToTileUnitsFactor),T=r.pixelToTileUnitsFactor/2*ng(this.paint.get("line-width").evaluate(t,s),this.paint.get("line-gap-width").evaluate(t,s)),I=this.paint.get("line-offset").evaluate(t,s);return I&&(c=function(A,F){const j=[],W=new ke(0,0);for(let J=0;J<A.length;J++){const le=A[J],fe=[];for(let Re=0;Re<le.length;Re++){const it=le[Re],Qe=le[Re+1],pt=0===Re?W:it.sub(le[Re-1])._unit()._perp(),yt=Re===le.length-1?W:Qe.sub(it)._unit()._perp(),Et=pt._add(yt)._unit();Et._mult(1/(Et.x*yt.x+Et.y*yt.y)),fe.push(Et._mult(F)._add(it))}j.push(fe)}return j}(c,I*r.pixelToTileUnitsFactor)),function(A,F,j){for(let W=0;W<F.length;W++){const J=F[W];if(A.length>=3)for(let le=0;le<J.length;le++)if(Ll(A,J[le]))return!0;if(al(A,J,j))return!0}return!1}(b,c,T)}isTileClipped(){return!0}},symbol:rc,background:class extends gu{constructor(r){super(r,_s)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends gu{constructor(r){super(r,Cv)}getProgramIds(){return["raster"]}},sky:class extends gu{constructor(r){super(r,Do),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"sky-gradient"===r?this._updateColorRamp():"sky-atmosphere-sun"!==r&&"sky-atmosphere-halo-color"!==r&&"sky-atmosphere-color"!==r&&"sky-atmosphere-sun-intensity"!==r||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Of({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(r,t){if("atmosphere"===this.paint.get("sky-type")){const c=this.paint.get("sky-atmosphere-sun"),p=!c,y=r.style.light,b=y.properties.get("position");return p&&"viewport"===y.properties.get("anchor")&&ai("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?zl(b.azimuthal,90-b.polar,t):zl(c[0],90-c[1],t)}const s=this.paint.get("sky-gradient-center");return zl(s[0],90-s[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return"atmosphere"===r?["skyboxCapture","skybox"]:"gradient"===r?["skyboxGradient"]:null}}};class Th{constructor(t,s,c,p){this.context=t,this.format=c,this.texture=t.gl.createTexture(),this.update(s,p)}update(t,s,c){const{width:p,height:y}=t,{context:b}=this,{gl:T}=b,{HTMLImageElement:I,HTMLCanvasElement:A,HTMLVideoElement:F,ImageData:j,ImageBitmap:W}=ge;if(T.bindTexture(T.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!s||!1!==s.premultiply)),c||this.size&&this.size[0]===p&&this.size[1]===y){const{x:J,y:le}=c||{x:0,y:0};t instanceof I||t instanceof A||t instanceof F||t instanceof j||W&&t instanceof W?T.texSubImage2D(T.TEXTURE_2D,0,J,le,T.RGBA,T.UNSIGNED_BYTE,t):T.texSubImage2D(T.TEXTURE_2D,0,J,le,p,y,T.RGBA,T.UNSIGNED_BYTE,t.data)}else this.size=[p,y],t instanceof I||t instanceof A||t instanceof F||t instanceof j||W&&t instanceof W?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,t):T.texImage2D(T.TEXTURE_2D,0,this.format,p,y,0,this.format,T.UNSIGNED_BYTE,t.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&T.generateMipmap(T.TEXTURE_2D)}bind(t,s){const{context:c}=this,{gl:p}=c;p.bindTexture(p.TEXTURE_2D,this.texture),t!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,t),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?t===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:t),this.filter=t),s!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class fm{constructor(t,s){this.width=t,this.height=s,this.nextRow=0,this.image=new Ic({width:t,height:s}),this.positions={},this.uploaded=!1}getDash(t,s){const c=this.getKey(t,s);return this.positions[c]}trim(){const t=this.width,s=this.height=Wt(this.nextRow);this.image.resize({width:t,height:s})}getKey(t,s){return t.join(",")+s}getDashRanges(t,s,c){const p=[];let y=t.length%2==1?-t[t.length-1]*c:0,b=t[0]*c,T=!0;p.push({left:y,right:b,isDash:T,zeroLength:0===t[0]});let I=t[0];for(let A=1;A<t.length;A++){T=!T;const F=t[A];y=I*c,I+=F,b=I*c,p.push({left:y,right:b,isDash:T,zeroLength:0===F})}return p}addRoundDash(t,s,c){const p=s/2;for(let y=-c;y<=c;y++){const b=this.width*(this.nextRow+c+y);let T=0,I=t[T];for(let A=0;A<this.width;A++){A/I.right>1&&(I=t[++T]);const F=Math.abs(A-I.left),j=Math.abs(A-I.right),W=Math.min(F,j);let J;const le=y/c*(p+1);if(I.isDash){const fe=p-Math.abs(le);J=Math.sqrt(W*W+fe*fe)}else J=p-Math.sqrt(W*W+le*le);this.image.data[b+A]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(t,s){for(let I=t.length-1;I>=0;--I){const A=t[I],F=t[I+1];A.zeroLength?t.splice(I,1):F&&F.isDash===A.isDash&&(F.left=A.left,t.splice(I,1))}const c=t[0],p=t[t.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,T=t[b];for(let I=0;I<this.width;I++){I/T.right>1&&(T=t[++b]);const A=Math.abs(I-T.left),F=Math.abs(I-T.right),j=Math.min(A,F);this.image.data[y+I]=Math.max(0,Math.min(255,(T.isDash?j:-j)+s+128))}}addDash(t,s){const c=this.getKey(t,s);if(this.positions[c])return this.positions[c];const p="round"===s,y=p?7:0,b=2*y+1;if(this.nextRow+b>this.height)return ai("LineAtlas out of space"),null;0===t.length&&t.push(1);let T=0;for(let F=0;F<t.length;F++)t[F]<0&&(ai("Negative value is found in line dasharray, replacing values with 0"),t[F]=0),T+=t[F];if(0!==T){const F=this.width/T,j=this.getDashRanges(t,this.width,F);p?this.addRoundDash(j,F,y):this.addRegularDash(j,"square"===s?.5*F:0)}const I=this.nextRow+y;this.nextRow+=b;const A={tl:[I,y],br:[T,0]};return this.positions[c]=A,A}}Wn(fm,"LineAtlas");class Tv{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Su{constructor(){this.tasks={},this.taskQueue=[],ft(["process"],this),this.invoker=new Tv(this.process),this.nextId=0}add(t,s){const c=this.nextId++,p=function({type:y,isSymbolTile:b,zoom:T}){return T=T||0,"message"===y?0:"maybePrepare"!==y||b?"parseTile"!==y||b?"parseTile"===y&&b?300-T:"maybePrepare"===y&&b?400-T:500:200-T:100-T}(s);if(0===p){an();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:t,metadata:s,priority:p,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){an();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const s=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let t=null,s=1/0;for(let p=0;p<this.taskQueue.length;p++){const y=this.tasks[this.taskQueue[p]];y.priority<s&&(s=y.priority,t=p)}if(null===t)return null;const c=this.taskQueue[t];return this.taskQueue.splice(t,1),c}remove(){this.invoker.remove()}}class hf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const c=t[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const Vl=["tile","layer","source","sourceLayer","state"];class Dh{constructor(t,s,c,p,y){this.type="Feature",this._vectorTileFeature=t,this._z=s,this._x=c,this._y=p,this.properties=t.properties,this.id=y}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const s of Vl)void 0!==this[s]&&(t[s]=this[s]);return t}}const Ju=new Uint16Array(8184);for(let r=0;r<2046;r++){let t=r+2,s=0,c=0,p=0,y=0,b=0,T=0;for(1&t?p=y=b=32:s=c=T=32;(t>>=1)>1;){const A=s+p>>1,F=c+y>>1;1&t?(p=s,y=c,s=b,c=T):(s=p,c=y,p=b,y=T),b=A,T=F}const I=4*r;Ju[I+0]=s,Ju[I+1]=c,Ju[I+2]=p,Ju[I+3]=y}const iu=new Uint16Array(2178),ed=new Uint8Array(1089),Eg=new Uint16Array(1089);function Dv(r){return 0===r?-.03125:32===r?.03125:0}var Mv=jn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const mm={type:2,extent:Ai,loadGeometry:()=>[[new ke(0,0),new ke(8193,0),new ke(8193,8193),new ke(0,8193),new ke(0,0)]]};class pf{constructor(t,s,c,p,y){this.tileID=t,this.uid=Gt(),this.uses=0,this.tileSize=s,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(t){const s=t+this.timeAdded;s<gi.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Id(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,s,c){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(p,y){const b={};if(!y)return b;for(const T of p){const I=T.layerIds.map(A=>y.getLayer(A)).filter(Boolean);if(0!==I.length){T.layers=I,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(A=>I.filter(F=>F.id===A)[0]));for(const A of I)b[A.id]=T}}return b}(t.buckets,s.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof kd){if(this.hasSymbolBuckets=!0,!c)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof kd&&y.hasRTLText){this.hasRTLText=!0,Me.isLoading()||Me.isLoaded()||"deferred"!==xe()||We();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(p).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new es}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const c in this.buckets){const p=this.buckets[c];p.uploadPending()&&p.upload(t)}const s=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Th(t,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Th(t,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Th(t,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,s,c,p,y,b,T,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:T,transform:b,params:y,tileTransform:this.tileTransform},t,s,c):{}}querySourceFeatures(t,s){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const p=c.loadVTLayers(),y=s?s.sourceLayer:"",b=p._geojsonTileLayer||p[y];if(!b)return;const T=Ql(s&&s.filter),{z:I,x:A,y:F}=this.tileID.canonical,j={z:I,x:A,y:F};for(let W=0;W<b.length;W++){const J=b.feature(W);if(T.needGeometry){const Re=nh(J,!0);if(!T.filter(new Le(this.tileID.overscaledZ),Re,this.tileID.canonical))continue}else if(!T.filter(new Le(this.tileID.overscaledZ),J))continue;const le=c.getId(J,y),fe=new Dh(J,I,A,F,le);fe.tile=j,t.push(fe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const s=this.expirationTime;if(t.cacheControl){const c=Pn(t.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const c=Date.now();let p=!1;if(this.expirationTime>c)p=!1;else if(s)if(this.expirationTime<s)p=!0;else{const y=this.expirationTime-s;y?this.expirationTime=c+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!s)return;const c=this.latestFeatureIndex.loadVTLayers(),p=s.style.listImages();for(const y in this.buckets){if(!s.style.hasLayer(y))continue;const b=this.buckets[y],T=b.layers[0].sourceLayer||"_geojsonTileLayer",I=c[T],A=t[T];if(!I||!A||0===Object.keys(A).length)continue;if(b.update(A,I,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),b instanceof jf||b instanceof Zm){const j=s.style._getSourceCache(b.layers[0].source);s._terrain&&s._terrain.enabled&&j&&b.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(j.id,this.tileID)}const F=s&&s.style&&s.style.getLayer(y);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(b)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<gi.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=gi.now()+t}setTexture(t,s){const c=s.context,p=c.gl;this.texture=s.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new Th(c,t,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),c.extTextureFilterAnisotropic&&p.texParameterf(p.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax))}setDependencies(t,s){const c={};for(const p of s)c[p]=!0;this.dependencies[t]=c}hasDependency(t,s){for(const c of t){const p=this.dependencies[c];if(p)for(const y of s)if(p[y])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,s){if(!s||"mercator"===s.name||this._tileDebugBuffer)return;const c=Xc(mm,this.tileID.canonical,this.tileTransform)[0],p=new Si,y=new Ol;for(let b=0;b<c.length;b++){const{x:T,y:I}=c[b];p.emplaceBack(T,I),y.emplaceBack(b)}y.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(y),this._tileDebugBuffer=t.createVertexBuffer(p,vh.members),this._tileDebugSegments=ls.simpleSegment(0,0,p.length,y.length)}_makeTileBoundsBuffers(t,s){if(this._tileBoundsBuffer||!s||"mercator"===s.name)return;const c=Xc(mm,this.tileID.canonical,this.tileTransform)[0];let p,y;if(this.isRaster){const b=function(T,I){const A=Id(T,I),F=Math.pow(2,T.z);for(let Re=0;Re<33;Re++)for(let ze=0;ze<33;ze++){const it=sl((T.x+(ze+Dv(ze))/32)/F),Qe=As((T.y+(Re+Dv(Re))/32)/F),pt=I.project(it,Qe),yt=33*Re+ze;iu[2*yt+0]=Math.round((pt.x*A.scale-A.x)*Ai),iu[2*yt+1]=Math.round((pt.y*A.scale-A.y)*Ai)}ed.fill(0),Eg.fill(0);for(let Re=2045;Re>=0;Re--){const ze=4*Re,it=Ju[ze+0],Qe=Ju[ze+1],pt=Ju[ze+2],yt=Ju[ze+3],Et=it+pt>>1,Ht=Qe+yt>>1,Kt=Et+Ht-Qe,fn=Ht+it-Et,Mn=33*Qe+it,Pt=33*yt+pt,Jt=33*Ht+Et,Ln=Math.hypot((iu[2*Mn+0]+iu[2*Pt+0])/2-iu[2*Jt+0],(iu[2*Mn+1]+iu[2*Pt+1])/2-iu[2*Jt+1])>=16;ed[Jt]=ed[Jt]||(Ln?1:0),Re<1022&&(ed[Jt]=ed[Jt]||ed[33*(Qe+fn>>1)+(it+Kt>>1)]||ed[33*(yt+fn>>1)+(pt+Kt>>1)])}const j=new xi,W=new kr;let J=0;function le(Re,ze){const it=33*ze+Re;return 0===Eg[it]&&(j.emplaceBack(iu[2*it+0],iu[2*it+1],Re*Ai/32,ze*Ai/32),Eg[it]=++J),Eg[it]-1}function fe(Re,ze,it,Qe,pt,yt){const Et=Re+it>>1,Ht=ze+Qe>>1;if(Math.abs(Re-pt)+Math.abs(ze-yt)>1&&ed[33*Ht+Et])fe(pt,yt,Re,ze,Et,Ht),fe(it,Qe,pt,yt,Et,Ht);else{const Kt=le(Re,ze),fn=le(it,Qe),Mn=le(pt,yt);W.emplaceBack(Kt,fn,Mn)}}return fe(0,0,32,32,32,0),fe(32,32,0,0,0,32),{vertices:j,indices:W}}(this.tileID.canonical,s);p=b.vertices,y=b.indices}else{p=new xi,y=new kr;for(const{x:T,y:I}of c)p.emplaceBack(T,I,0,0);const b=Ac(p.int16,void 0,4);for(let T=0;T<b.length;T+=3)y.emplaceBack(b[T],b[T+1],b[T+2])}this._tileBoundsBuffer=t.createVertexBuffer(p,Mv.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(y),this._tileBoundsSegments=ls.simpleSegment(0,0,p.length,y.length)}_makeGlobeTileDebugBuffers(t,s){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!s||"globe"!==s.name)return;const c=this.tileID.canonical,p=tp(Bl(c));this._makeGlobeTileDebugBorderBuffer(t,c,p),this._makeGlobeTileDebugTextBuffer(t,c,p)}_makeGlobeTileDebugBorderBuffer(t,s,c){const p=new Si,y=new Ol,b=new cr,T=(A,F,j,W,J)=>{const le=(j-A)/(J-1),fe=(W-F)/(J-1),Re=p.length;for(let ze=0;ze<J;ze++){const it=A+ze*le,Qe=F+ze*fe;p.emplaceBack(it,Qe);const pt=sm(it,Qe,s),yt=Oo(pt,pt,c);b.emplaceBack(yt[0],yt[1],yt[2]),y.emplaceBack(Re+ze)}},I=Ai;T(0,0,I,0,16),T(I,0,I,I,16),T(I,I,0,I,16),T(0,I,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(y),this._tileDebugBuffer=t.createVertexBuffer(p,vh.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(b,nf.members),this._tileDebugSegments=ls.simpleSegment(0,0,p.length,y.length)}_makeGlobeTileDebugTextBuffer(t,s,c){const p=new Si,y=new kr,b=new cr,T=25;y.reserve(32),p.reserve(T),b.reserve(T);const I=(A,F)=>T*A+F;for(let A=0;A<T;A++){const F=2048*A;for(let j=0;j<T;j++){const W=2048*j;p.emplaceBack(W,F);const J=sm(W,F,s),le=Oo(J,J,c);b.emplaceBack(le[0],le[1],le[2])}}for(let A=0;A<4;A++)for(let F=0;F<4;F++){const j=I(A,F),W=I(A,F+1),J=I(A+1,F),le=I(A+1,F+1);y.emplaceBack(j,W,J),y.emplaceBack(J,W,le)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(y),this._tileDebugTextBuffer=t.createVertexBuffer(p,vh.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(b,nf.members),this._tileDebugTextSegments=ls.simpleSegment(0,0,T,32)}}class u0{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,s,c){const p=String(s);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},dt(this.stateChanges[t][p],c),null===this.deletedStates[t]){this.deletedStates[t]={};for(const y in this.state[t])y!==p&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][p]){this.deletedStates[t][p]={};for(const y in this.state[t][p])c[y]||(this.deletedStates[t][p][y]=null)}else for(const y in c)this.deletedStates[t]&&this.deletedStates[t][p]&&null===this.deletedStates[t][p][y]&&delete this.deletedStates[t][p][y]}removeFeatureState(t,s,c){if(null===this.deletedStates[t])return;const p=String(s);if(this.deletedStates[t]=this.deletedStates[t]||{},c&&void 0!==s)null!==this.deletedStates[t][p]&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][c]=null);else if(void 0!==s)if(this.stateChanges[t]&&this.stateChanges[t][p])for(c in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][c]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,s){const c=String(s),p=dt({},(this.state[t]||{})[c],(this.stateChanges[t]||{})[c]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const y=this.deletedStates[t][s];if(null===y)return{};for(const b in y)delete p[b]}return p}initializeTileState(t,s){t.setFeatureState(this.state,s)}coalesceChanges(t,s){const c={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const b in this.stateChanges[p])this.state[p][b]||(this.state[p][b]={}),dt(this.state[p][b],this.stateChanges[p][b]),y[b]=this.state[p][b];c[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(null===this.deletedStates[p])for(const b in this.state[p])y[b]={},this.state[p][b]={};else for(const b in this.deletedStates[p]){if(null===this.deletedStates[p][b])this.state[p][b]={};else for(const T of Object.keys(this.deletedStates[p][b]))delete this.state[p][b][T];y[b]=this.state[p][b]}c[p]=c[p]||{},dt(c[p],y)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(const p in t)t[p].setFeatureState(c,s)}}class Sv{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,s){const c=this.toIdx(t,s);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(t,s){return this.leaves[this.toIdx(t,s)]}toIdx(t,s){return s*this.size+t}}function Cg(r,t,s,c){let p=0,y=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(c[b])<1e-15){if(s[b]<r[b]||s[b]>t[b])return null}else{const T=1/c[b];let I=(r[b]-s[b])*T,A=(t[b]-s[b])*T;if(I>A){const F=I;I=A,A=F}if(I>p&&(p=I),A<y&&(y=A),p>y)return null}return p}function U_(r,t,s,c,p,y,b,T,I,A,F){const j=c-r,W=p-t,J=y-s,le=b-r,fe=T-t,Re=I-s,ze=F[1]*Re-F[2]*fe,it=F[2]*le-F[0]*Re,Qe=F[0]*fe-F[1]*le,pt=j*ze+W*it+J*Qe;if(Math.abs(pt)<1e-15)return null;const yt=1/pt,Et=A[0]-r,Ht=A[1]-t,Kt=A[2]-s,fn=(Et*ze+Ht*it+Kt*Qe)*yt;if(fn<0||fn>1)return null;const Mn=Ht*J-Kt*W,Pt=Kt*j-Et*J,Jt=Et*W-Ht*j,Ln=(F[0]*Mn+F[1]*Pt+F[2]*Jt)*yt;return Ln<0||fn+Ln>1?null:(le*Mn+fe*Pt+Re*Jt)*yt}function j_(r,t,s){return(r-t)/(s-t)}function G_(r,t,s,c,p,y,b,T,I){const A=1<<s,F=y-c,j=b-p,W=(r+1)/A*F+c,J=(t+0)/A*j+p,le=(t+1)/A*j+p;T[0]=(r+0)/A*F+c,T[1]=J,I[0]=W,I[1]=le}class $_{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(y){const b=Math.ceil(Math.log2(y.dim/8)),T=[];let I=Math.ceil(Math.pow(2,b));const A=1/I,F=(J,le,fe,Re,ze)=>{const it=Re?1:0,Qe=(J+1)*fe-it,pt=le*fe,yt=(le+1)*fe-it;ze[0]=J*fe,ze[1]=pt,ze[2]=Qe,ze[3]=yt};let j=new Sv(I);const W=[];for(let J=0;J<I*I;J++){F(J%I,Math.floor(J/I),A,!1,W);const le=td(W[0],W[1],y),fe=td(W[2],W[1],y),Re=td(W[2],W[3],y),ze=td(W[0],W[3],y);j.minimums.push(Math.min(le,fe,Re,ze)),j.maximums.push(Math.max(le,fe,Re,ze)),j.leaves.push(1)}for(T.push(j),I/=2;I>=1;I/=2){const J=T[T.length-1];j=new Sv(I);for(let le=0;le<I*I;le++){F(le%I,Math.floor(le/I),2,!0,W);const fe=J.getElevation(W[0],W[1]),Re=J.getElevation(W[2],W[1]),ze=J.getElevation(W[2],W[3]),it=J.getElevation(W[0],W[3]),Qe=J.isLeaf(W[0],W[1]),pt=J.isLeaf(W[2],W[1]),yt=J.isLeaf(W[2],W[3]),Et=J.isLeaf(W[0],W[3]),Ht=Math.min(fe.min,Re.min,ze.min,it.min),Kt=Math.max(fe.max,Re.max,ze.max,it.max),fn=Qe&&pt&&yt&&Et;j.maximums.push(Kt),j.minimums.push(Ht),j.leaves.push(Kt-Ht<=5&&fn?1:0)}T.push(j)}return T}(this.dem),c=s.length-1,p=s[c];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(s,0,0,c,0)}raycastRoot(t,s,c,p,y,b,T=1){return Cg([t,s,-100],[c,p,this.maximums[0]*T],y,b)}raycast(t,s,c,p,y,b,T=1){if(!this.nodeCount)return null;const I=this.raycastRoot(t,s,c,p,y,b,T);if(null==I)return null;const A=[],F=[],j=[],W=[],J=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;J.length>0;){const{idx:le,t:fe,nodex:Re,nodey:ze,depth:it}=J.pop();if(this.leaves[le]){G_(Re,ze,it,t,s,c,p,j,W);const pt=1<<it,yt=(Re+0)/pt,Et=(Re+1)/pt,Ht=(ze+0)/pt,Kt=(ze+1)/pt,fn=td(yt,Ht,this.dem)*T,Mn=td(Et,Ht,this.dem)*T,Pt=td(Et,Kt,this.dem)*T,Jt=td(yt,Kt,this.dem)*T,Ln=U_(j[0],j[1],fn,W[0],j[1],Mn,W[0],W[1],Pt,y,b),Bn=U_(W[0],W[1],Pt,j[0],W[1],Jt,j[0],j[1],fn,y,b),oi=Math.min(null!==Ln?Ln:Number.MAX_VALUE,null!==Bn?Bn:Number.MAX_VALUE);if(oi!==Number.MAX_VALUE)return oi;{const In=Sp([],y,b,fe);if(H_(fn,Mn,Jt,Pt,j_(In[0],j[0],W[0]),j_(In[1],j[1],W[1]))>=In[2])return fe}continue}let Qe=0;for(let pt=0;pt<this._siblingOffset.length;pt++){G_((Re<<1)+this._siblingOffset[pt][0],(ze<<1)+this._siblingOffset[pt][1],it+1,t,s,c,p,j,W),j[2]=-100,W[2]=this.maximums[this.childOffsets[le]+pt]*T;const yt=Cg(j,W,y,b);if(null!=yt){const Et=yt;A[pt]=Et;let Ht=!1;for(let Kt=0;Kt<Qe&&!Ht;Kt++)Et>=A[F[Kt]]&&(F.splice(Kt,0,pt),Ht=!0);Ht||(F[Qe]=pt),Qe++}}for(let pt=0;pt<Qe;pt++){const yt=F[pt];J.push({idx:this.childOffsets[le]+yt,t:A[yt],nodex:(Re<<1)+this._siblingOffset[yt][0],nodey:(ze<<1)+this._siblingOffset[yt][1],depth:it+1})}}return null}_addNode(t,s,c){return this.minimums.push(t),this.maximums.push(s),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(t,s,c,p,y){if(1===t[p].isLeaf(s,c))return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const b=p-1,T=t[b];let I=0,A=0;for(let F=0;F<this._siblingOffset.length;F++){const j=2*s+this._siblingOffset[F][0],W=2*c+this._siblingOffset[F][1],J=T.getElevation(j,W),le=T.isLeaf(j,W),fe=this._addNode(J.min,J.max,le);le&&(I|=1<<F),A||(A=fe)}for(let F=0;F<this._siblingOffset.length;F++)I&1<<F||this._construct(t,2*s+this._siblingOffset[F][0],2*c+this._siblingOffset[F][1],b,A+F)}}function H_(r,t,s,c,p,y){return Xi(Xi(r,s,y),Xi(t,c,y),p)}function td(r,t,s){const c=s.dim,p=Rt(r*c-.5,0,c-1),y=Rt(t*c-.5,0,c-1),b=Math.floor(p),T=Math.floor(y),I=Math.min(b+1,c-1),A=Math.min(T+1,c-1);return H_(s.get(b,T),s.get(I,T),s.get(b,A),s.get(I,A),p-b,y-T)}const Tg={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class gm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,s,c,p=!1,y=!1){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return ai(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const b=this.dim=s.height-2,T=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=c||"mapbox",this.borderReady=p,!p){for(let I=0;I<b;I++)T[this._idx(-1,I)]=T[this._idx(0,I)],T[this._idx(b,I)]=T[this._idx(b-1,I)],T[this._idx(I,-1)]=T[this._idx(I,0)],T[this._idx(I,b)]=T[this._idx(I,b-1)];T[this._idx(-1,-1)]=T[this._idx(0,0)],T[this._idx(b,-1)]=T[this._idx(b-1,0)],T[this._idx(-1,b)]=T[this._idx(0,b-1)],T[this._idx(b,b)]=T[this._idx(b-1,b-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new $_(this)}get(t,s,c=!1){c&&(t=Rt(t,-1,this.dim),s=Rt(s,-1,this.dim));const p=4*this._idx(t,s);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(t){return Tg[t]}get unpackVector(){return Tg[this.encoding]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}_unpackMapbox(t,s,c){return(256*t*256+256*s+c)/10-1e4}_unpackTerrarium(t,s,c){return 256*t+s+c/256-32768}static pack(t,s){const c=[0,0,0,0],p=gm.getUnpackVector(s);let y=Math.floor((t+p[3])/p[2]);return c[2]=y%256,y=Math.floor(y/256),c[1]=y%256,y=Math.floor(y/256),c[0]=y,c}getPixels(){return new ll({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,s,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,y=s*this.dim+this.dim,b=c*this.dim,T=c*this.dim+this.dim;switch(s){case-1:p=y-1;break;case 1:y=p+1}switch(c){case-1:b=T-1;break;case 1:T=b+1}const I=-s*this.dim,A=-c*this.dim;for(let F=b;F<T;F++)for(let j=p;j<y;j++){const W=4*this._idx(j,F),J=4*this._idx(j+I,F+A);this.pixels[W+0]=t.pixels[J+0],this.pixels[W+1]=t.pixels[J+1],this.pixels[W+2]=t.pixels[J+2],this.pixels[W+3]=t.pixels[J+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Wn(gm,"DEMData"),Wn($_,"DemMinMaxQuadTree",{omit:["dem"]});class Iv{constructor(t,s){this.max=t,this.onRemove=s,this.reset()}reset(){for(const t in this.data)for(const s of this.data[t])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(t,s,c){const p=t.wrapped().key;void 0===this.data[p]&&(this.data[p]=[]);const y={value:s,timeout:void 0};if(void 0!==c&&(y.timeout=setTimeout(()=>{this.remove(t,y)},c)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const s=this.data[t].shift();return s.timeout&&clearTimeout(s.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),s.value}getByKey(t){const s=this.data[t];return s?s[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,s){if(!this.has(t))return this;const c=t.wrapped().key,p=void 0===s?0:this.data[c].indexOf(s),y=this.data[c][p];return this.data[c].splice(p,1),y.timeout&&clearTimeout(y.timeout),0===this.data[c].length&&delete this.data[c],this.onRemove(y.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(t){const s=[];for(const c in this.data)for(const p of this.data[c])t(p.value)||s.push(p);for(const c of s)this.remove(c.value.tileID,c)}}class Rd{constructor(t,s,c){this.func=t,this.mask=s,this.range=c}}Rd.ReadOnly=!1,Rd.ReadWrite=!0,Rd.disabled=new Rd(519,Rd.ReadOnly,[0,1]);class ff{constructor(t,s,c,p,y,b){this.test=t,this.ref=s,this.mask=c,this.fail=p,this.depthFail=y,this.pass=b}}ff.disabled=new ff({func:519,mask:0},0,0,7680,7680,7680);class Oc{constructor(t,s,c){this.blendFunction=t,this.blendColor=s,this.mask=c}}Oc.Replace=[1,0],Oc.disabled=new Oc(Oc.Replace,ar.transparent,[!1,!1,!1,!1]),Oc.unblended=new Oc(Oc.Replace,ar.transparent,[!0,!0,!0,!0]),Oc.alphaBlended=new Oc([1,771],ar.transparent,[!0,!0,!0,!0]);class Rc{constructor(t,s,c){this.enable=t,this.mode=s,this.frontFace=c}}Rc.disabled=new Rc(!1,1029,2305),Rc.backCCW=new Rc(!0,1029,2305),Rc.backCW=new Rc(!0,1029,2304),Rc.frontCW=new Rc(!0,1028,2304),Rc.frontCCW=new Rc(!0,1028,2305);class Sh extends Ri{constructor(t,s,c){super(),this.id=t,this._onlySymbols=c,s.on("data",p=>{"source"===p.dataType&&"metadata"===p.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===p.dataType&&"content"===p.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new Iv(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new u0,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const s=this._tiles[t];if("loaded"!==s.state&&"errored"!==s.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,s){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,s)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const s in this._tiles){const c=this._tiles[s];this._source.prepareTile(c)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,c.tileID),c.upload(t),c.prepare(this.map.style.imageManager)}else for(const s in this._tiles){const c=this._tiles[s];c.upload(t),c.prepare(this.map.style.imageManager)}}getIds(){return At(this._tiles).map(t=>t.tileID).sort(Iu).map(t=>t.key)}getRenderableIds(t){const s=[];for(const c in this._tiles)this._isIdRenderable(+c,t)&&s.push(this._tiles[c]);return t?s.sort((c,p)=>{const y=c.tileID,b=p.tileID,T=new ke(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new ke(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-b.overscaledZ||I.y-T.y||I.x-T.x}).map(c=>c.tileID.key):s.map(c=>c.tileID).sort(Iu).map(c=>c.key)}hasRenderableParent(t){const s=this.findLoadedParent(t,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(t,s){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(s||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,s){const c=this._tiles[t];c&&("loading"!==c.state&&(c.state=s),this._loadTile(c,this._tileLoaded.bind(this,c,t,s)))}_tileLoaded(t,s,c,p){if(p)if(t.state="errored",404!==p.status)this._source.fire(new Bi(p,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=gi.now(),"expired"===c&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(s,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new hi("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const s=this.getRenderableIds();for(let p=0;p<s.length;p++){const y=s[p];if(t.neighboringTiles&&t.neighboringTiles[y]){const b=this.getTileByID(y);c(t,b),c(b,t)}}function c(p,y){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let b=y.tileID.canonical.x-p.tileID.canonical.x;const T=y.tileID.canonical.y-p.tileID.canonical.y,I=Math.pow(2,p.tileID.canonical.z),A=y.tileID.key;0===b&&0===T||Math.abs(T)>1||(Math.abs(b)>1&&(1===Math.abs(b+I)?b+=I:1===Math.abs(b-I)&&(b-=I)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,b,T),p.neighboringTiles&&p.neighboringTiles[A]&&(p.neighboringTiles[A].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,s,c,p){for(const y in this._tiles){let b=this._tiles[y];if(p[y]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>c)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){const A=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[A.key],b&&b.hasData()&&(T=A)}let I=T;for(;I.overscaledZ>s;)if(I=I.scaledTo(I.overscaledZ-1),t[I.key]){p[T.key]=T;break}}}findLoadedParent(t,s){if(t.key in this._loadedParentTiles){const c=this._loadedParentTiles[t.key];return c&&c.tileID.overscaledZ>=s?c:null}for(let c=t.overscaledZ-1;c>=s;c--){const p=t.scaledTo(c),y=this._getLoadedTile(p);if(y)return y}}_getLoadedTile(t){const s=this._tiles[t.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,s){s=s||this._source.tileSize;const c=Math.ceil(t.width/s)+1,p=Math.ceil(t.height/s)+1,y=Math.floor(c*p*5),b="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,y):y,T="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(T)}handleWrapJump(t){const s=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,s){const c={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+s),c[y.tileID.key]=y}this._tiles=c;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(t,s,c){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let p;this.updateCacheSize(t,s),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(T=>new Qs(T.canonical.z,T.wrap,T.canonical.z,T.canonical.x,T.canonical.y)):(p=t.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(T=>this._source.hasTile(T)))):p=[];const y=this._updateRetainedTiles(p);if(mf(this._source.type)&&0!==p.length){const T={},I={},A=Object.keys(y);for(const j of A){const W=y[j],J=this._tiles[j];if(!J||J.fadeEndTime&&J.fadeEndTime<=gi.now())continue;const le=this.findLoadedParent(W,Math.max(W.overscaledZ-Sh.maxOverzooming,this._source.minzoom));le&&(this._addTile(le.tileID),T[le.tileID.key]=le.tileID),I[j]=W}const F=p[p.length-1].overscaledZ;for(const j in this._tiles){const W=this._tiles[j];if(y[j]||!W.hasData())continue;let J=W.tileID;for(;J.overscaledZ>F;){J=J.scaledTo(J.overscaledZ-1);const le=this._tiles[J.key];if(le&&le.hasData()&&I[J.key]){y[j]=W.tileID;break}}}for(const j in T)y[j]||(this._coveredTiles[j]=!0,y[j]=T[j])}for(const T in y)this._tiles[T].clearFadeHold();const b=function(T,I){const A=[];for(const F in T)F in I||A.push(F);return A}(this._tiles,y);for(const T of b){const I=this._tiles[T];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+T)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const s={};if(0===t.length)return s;const c={},p=t.reduce((A,F)=>Math.min(A,F.overscaledZ),1/0),y=t[0].overscaledZ,b=Math.max(y-Sh.maxOverzooming,this._source.minzoom),T=Math.max(y+Sh.maxUnderzooming,this._source.minzoom),I={};for(const A of t){const F=this._addTile(A);s[A.key]=A,F.hasData()||p<this._source.maxzoom&&(I[A.key]=A)}this._retainLoadedChildren(I,p,T,s);for(const A of t){let F=this._tiles[A.key];if(F.hasData())continue;if(A.canonical.z>=this._source.maxzoom){const W=A.children(this._source.maxzoom)[0],J=this.getTile(W);if(J&&J.hasData()){s[W.key]=W;continue}}else{const W=A.children(this._source.maxzoom);if(s[W[0].key]&&s[W[1].key]&&s[W[2].key]&&s[W[3].key])continue}let j=F.wasRequested();for(let W=A.overscaledZ-1;W>=b;--W){const J=A.scaledTo(W);if(c[J.key]||(c[J.key]=!0,F=this.getTile(J),!F&&j&&(F=this._addTile(J)),F&&(s[J.key]=J,j=F.wasRequested(),F.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const s=[];let c,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){c=this._loadedParentTiles[p.key];break}s.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(c=this._getLoadedTile(y),c)break;p=y}for(const y of s)this._loadedParentTiles[y]=c}}_addTile(t){let s=this._tiles[t.key];if(s)return this._source.prepareTile&&this._source.prepareTile(s),s;s=this._cache.getAndRemove(t),s&&(this._setTileReloadTimer(t.key,s),s.tileID=t,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,s)));const c=!!s;if(!c){const p=this.map?this.map.painter:null;s=new pf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._source.prepareTile&&this._source.prepareTile(s)||this._loadTile(s,this._tileLoaded.bind(this,s,t.key,s.state))}return s?(s.uses++,this._tiles[t.key]=s,c||this._source.fire(new hi("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(t,s){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const c=s.getExpiryTimeout();c&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},c))}_removeTile(t){const s=this._tiles[t];s&&(s.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),s.uses>0||(s.hasData()&&"reloading"!==s.state?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,s,c){const p=[],y=this.transform;if(!y)return p;const b="globe"===y.projection.name,T=_d(y.center.lng);for(const I in this._tiles){const A=this._tiles[I];if(c&&A.clearQueryDebugViz(),A.holdingForFade())continue;let F;if(b){const j=A.tileID.canonical;if(0===j.z){const W=[Math.abs(Rt(T,...ym(j,-1))-T),Math.abs(Rt(T,...ym(j,1))-T)];F=[0,2*W.indexOf(Math.min(...W))-1]}else{const W=[Math.abs(Rt(T,...ym(j,-1))-T),Math.abs(Rt(T,...ym(j,0))-T),Math.abs(Rt(T,...ym(j,1))-T)];F=[W.indexOf(Math.min(...W))-1]}}else F=[0];for(const j of F){const W=t.containsTile(A,y,s,j);W&&p.push(W)}}return p}getVisibleCoordinates(t){const s=this.getRenderableIds(t).map(c=>this._tiles[c].tileID);for(const c of s)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(mf(this._source.type))for(const t in this._tiles){const s=this._tiles[t];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=gi.now())return!0}return!1}setFeatureState(t,s,c){this._state.updateState(t=t||"_geojsonTileLayer",s,c)}removeFeatureState(t,s,c){this._state.removeFeatureState(t=t||"_geojsonTileLayer",s,c)}getFeatureState(t,s){return this._state.getState(t=t||"_geojsonTileLayer",s)}setDependencies(t,s,c){const p=this._tiles[t];p&&p.setDependencies(s,c)}reloadTilesForDependencies(t,s){for(const c in this._tiles)this._tiles[c].hasDependency(t,s)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(t,s))}_preloadTiles(t,s){const c=new Map,p=Array.isArray(t)?t:[t],y=this.map.painter.terrain,b=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const T of p){const I=T.coveringTiles({tileSize:b,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const A of I)c.set(A.key,A);this.usedForTerrain&&T.updateElevation(!1)}Zt(Array.from(c.values()),(T,I)=>{const A=new pf(T,this._source.tileSize*T.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(A,F=>{"raster-dem"===this._source.type&&A.dem&&this._backfillDEM(A),I(F,A)})},s)}}function Iu(r,t){const s=Math.abs(2*r.wrap)-+(r.wrap<0),c=Math.abs(2*t.wrap)-+(t.wrap<0);return r.overscaledZ-t.overscaledZ||c-s||t.canonical.y-r.canonical.y||t.canonical.x-r.canonical.x}function mf(r){return"raster"===r||"image"===r||"video"===r}function ym(r,t){const s=1<<r.z;return[r.x/s+t,(r.x+1)/s+t]}Sh.maxOverzooming=10,Sh.maxUnderzooming=3;class Dg{constructor(t,s,c){this._demTile=t,this._dem=this._demTile.dem,this._scale=s,this._offset=c}static create(t,s,c){const p=c||t.findDEMTileFor(s);if(!p||!p.dem)return;const y=p.dem,b=p.tileID,T=1<<s.canonical.z-b.canonical.z;return new Dg(p,p.tileSize/Ai/T,[(s.canonical.x/T-b.canonical.x)*y.dim,(s.canonical.y/T-b.canonical.y)*y.dim])}tileCoordToPixel(t,s){const c=s*this._scale+this._offset[1],p=Math.floor(t*this._scale+this._offset[0]),y=Math.floor(c);return new ke(p,y)}getElevationAt(t,s,c,p){const y=t*this._scale+this._offset[0],b=s*this._scale+this._offset[1],T=Math.floor(y),I=Math.floor(b),A=this._dem;return p=!!p,c?Xi(Xi(A.get(T,I,p),A.get(T,I+1,p),b-I),Xi(A.get(T+1,I,p),A.get(T+1,I+1,p),b-I),y-T):A.get(T,I,p)}getElevationAtPixel(t,s,c){return this._dem.get(t,s,!!c)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Wc(1,t)*this._dem.stride}}class Av{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new cd(Ai,16,0),this.featureIndexArray=new rr,this.promoteId=s}insert(t,s,c,p,y,b=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,p,y,b);const I=this.grid;for(let A=0;A<s.length;A++){const F=s[A],j=[1/0,1/0,-1/0,-1/0];for(let W=0;W<F.length;W++){const J=F[W];j[0]=Math.min(j[0],J.x),j[1]=Math.min(j[1],J.y),j[2]=Math.max(j[2],J.x),j[3]=Math.max(j[3],J.y)}j[0]<Ai&&j[1]<Ai&&j[2]>=0&&j[3]>=0&&I.insert(T,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ed.VectorTile(new Cu(this.rawTileData)).layers,this.sourceLayerCoder=new hf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,s,c,p){this.loadVTLayers();const y=t.params||{},b=Ql(y.filter),T=t.tileResult,I=t.transform,A=T.bufferedTilespaceBounds,F=this.grid.query(A.min.x,A.min.y,A.max.x,A.max.y,(le,fe,Re,ze)=>Tp(T.bufferedTilespaceGeometry,le,fe,Re,ze));F.sort(Mg);let j=null;I.elevation&&F.length>0&&(j=Dg.create(I.elevation,this.tileID));const W={};let J;for(let le=0;le<F.length;le++){const fe=F[le];if(fe===J)continue;J=fe;const Re=this.featureIndexArray.get(fe);let ze=null;this.loadMatchingFeature(W,Re,b,y.layers,y.availableImages,s,c,p,(it,Qe,pt,yt=0)=>(ze||(ze=Xc(it,this.tileID.canonical,t.tileTransform)),Qe.queryIntersectsFeature(T,it,pt,ze,this.z,t.transform,t.pixelPosMatrix,j,yt)))}return W}loadMatchingFeature(t,s,c,p,y,b,T,I,A){const{featureIndex:F,bucketIndex:j,sourceLayerIndex:W,layoutVertexArrayOffset:J}=s,le=this.bucketLayerIDs[j];if(p&&!function(it,Qe){for(let pt=0;pt<it.length;pt++)if(Qe.indexOf(it[pt])>=0)return!0;return!1}(p,le))return;const fe=this.sourceLayerCoder.decode(W),Re=this.vtLayers[fe].feature(F);if(c.needGeometry){const it=nh(Re,!0);if(!c.filter(new Le(this.tileID.overscaledZ),it,this.tileID.canonical))return}else if(!c.filter(new Le(this.tileID.overscaledZ),Re))return;const ze=this.getId(Re,fe);for(let it=0;it<le.length;it++){const Qe=le[it];if(p&&p.indexOf(Qe)<0)continue;const pt=b[Qe];if(!pt)continue;let yt={};void 0!==ze&&I&&(yt=I.getState(pt.sourceLayer||"_geojsonTileLayer",ze));const Et=dt({},T[Qe]);Et.paint=W_(Et.paint,pt.paint,Re,yt,y),Et.layout=W_(Et.layout,pt.layout,Re,yt,y);const Ht=!A||A(Re,pt,yt,J);if(!Ht)continue;const Kt=new Dh(Re,this.z,this.x,this.y,ze);Kt.layer=Et;let fn=t[Qe];void 0===fn&&(fn=t[Qe]=[]),fn.push({featureIndex:F,feature:Kt,intersectionZ:Ht})}}lookupSymbolFeatures(t,s,c,p,y,b,T,I){const A={};this.loadVTLayers();const F=Ql(y);for(const j of t)this.loadMatchingFeature(A,{bucketIndex:c,sourceLayerIndex:p,featureIndex:j,layoutVertexArrayOffset:0},F,b,T,I,s);return A}loadFeature(t){const{featureIndex:s,sourceLayerIndex:c}=t;this.loadVTLayers();const p=this.sourceLayerCoder.decode(c),y=this.vtFeatures[p];if(y[s])return y[s];const b=this.vtLayers[p].feature(s);return y[s]=b,b}hasLayer(t){for(const s of this.bucketLayerIDs)for(const c of s)if(t===c)return!0;return!1}getId(t,s){let c=t.id;return this.promoteId&&(c=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[s]],"boolean"==typeof c&&(c=Number(c))),c}}function W_(r,t,s,c,p){return on(r,(y,b)=>{const T=t instanceof jt?t.get(b):null;return T&&T.evaluate?T.evaluate(s,c,p):T})}function Mg(r,t){return t-r}Wn(Av,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class X_{constructor(t){const s={},c=[];for(const T in t){const I=t[T],A=s[T]={};for(const F in I.glyphs){const j=I.glyphs[+F];if(!j||0===j.bitmap.width||0===j.bitmap.height)continue;const W=j.metrics.localGlyph?2:1,J={x:0,y:0,w:j.bitmap.width+2*W,h:j.bitmap.height+2*W};c.push(J),A[F]=J}}const{w:p,h:y}=Zp(c),b=new Ic({width:p||1,height:y||1});for(const T in t){const I=t[T];for(const A in I.glyphs){const F=I.glyphs[+A];if(!F||0===F.bitmap.width||0===F.bitmap.height)continue;const j=s[T][A],W=F.metrics.localGlyph?2:1;Ic.copy(F.bitmap,b,{x:0,y:0},{x:j.x+W,y:j.y+W},F.bitmap)}}this.image=b,this.positions=s}}Wn(X_,"GlyphAtlas");class d0{constructor(t){this.tileID=new Qs(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Id(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,s,c,p,y){this.status="parsing",this.data=t,this.collisionBoxArray=new es;const b=new hf(Object.keys(t.layers).sort()),T=new Av(this.tileID,this.promoteId);T.bucketLayerIDs=[];const I={},A=new fm(256,256),F={featureIndex:T,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:A,availableImages:c},j=s.familiesBySource[this.source];for(const yt in j){const Et=t.layers[yt];if(!Et)continue;let Ht=!1,Kt=!1;for(const Pt of j[yt])"symbol"===Pt[0].type?Ht=!0:Kt=!0;if(!0===this.isSymbolTile&&!Ht||!1===this.isSymbolTile&&!Kt)continue;1===Et.version&&ai(`Vector tile source "${this.source}" layer "${yt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fn=b.encode(yt),Mn=[];for(let Pt=0;Pt<Et.length;Pt++){const Jt=Et.feature(Pt),Ln=T.getId(Jt,yt);Mn.push({feature:Jt,id:Ln,index:Pt,sourceLayerIndex:fn})}for(const Pt of j[yt]){const Jt=Pt[0];void 0!==this.isSymbolTile&&"symbol"===Jt.type!==this.isSymbolTile||Jt.minzoom&&this.zoom<Math.floor(Jt.minzoom)||Jt.maxzoom&&this.zoom>=Jt.maxzoom||"none"!==Jt.visibility&&(Ih(Pt,this.zoom,c),(I[Jt.id]=Jt.createBucket({index:T.bucketLayerIDs.length,layers:Pt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(Mn,F,this.tileID.canonical,this.tileTransform),T.bucketLayerIDs.push(Pt.map(Ln=>Ln.id)))}}let W,J,le,fe;A.trim();const Re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ze=on(F.glyphDependencies,yt=>Object.keys(yt).map(Number));Object.keys(ze).length?p.send("getGlyphs",{uid:this.uid,stacks:ze},(yt,Et)=>{W||(W=yt,J=Et,pt.call(this))},void 0,!1,Re):J={};const it=Object.keys(F.iconDependencies);it.length?p.send("getImages",{icons:it,source:this.source,tileID:this.tileID,type:"icons"},(yt,Et)=>{W||(W=yt,le=Et,pt.call(this))},void 0,!1,Re):le={};const Qe=Object.keys(F.patternDependencies);function pt(){if(W)return y(W);if(J&&le&&fe){const yt=new X_(J),Et=new Qh(le,fe);for(const Ht in I){const Kt=I[Ht];Kt instanceof kd?(Ih(Kt.layers,this.zoom,c),yv(Kt,J,yt.positions,le,Et.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):Kt.hasPattern&&(Kt instanceof jf||Kt instanceof Zm||Kt instanceof Eu)&&(Ih(Kt.layers,this.zoom,c),Kt.addFeatures(F,this.tileID.canonical,Et.patternPositions,c,this.tileTransform))}this.status="done",y(null,{buckets:At(I).filter(Ht=>!Ht.isEmpty()),featureIndex:T,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yt.image,lineAtlas:A,imageAtlas:Et,glyphMap:this.returnDependencies?J:null,iconMap:this.returnDependencies?le:null,glyphPositions:this.returnDependencies?yt.positions:null})}}Qe.length?p.send("getImages",{icons:Qe,source:this.source,tileID:this.tileID,type:"patterns"},(yt,Et)=>{W||(W=yt,fe=Et,pt.call(this))},void 0,!1,Re):fe={},pt.call(this)}}function Ih(r,t,s){const c=new Le(t);for(const p of r)p.recalculate(c,s)}class kv{constructor(t){this.entries={},this.scheduler=t}request(t,s,c,p){const y=this.entries[t]=this.entries[t]||{callbacks:[]};if(y.result){const[b,T]=y.result;return this.scheduler?this.scheduler.add(()=>{p(b,T)},s):p(b,T),()=>{}}return y.callbacks.push(p),y.cancel||(y.cancel=c((b,T)=>{y.result=[b,T];for(const I of y.callbacks)this.scheduler?this.scheduler.add(()=>{I(b,T)},s):I(b,T);setTimeout(()=>delete this.entries[t],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(b=>b!==p),y.callbacks.length||(y.cancel(),delete this.entries[t]))}}}function K_(r,t,s){const c=JSON.stringify(r.request);return r.data&&(this.deduped.entries[c]={result:[null,r.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},p=>{const y=ne(r.request,(b,T,I,A)=>{b?p(b):T&&p(null,{vectorTile:s?void 0:new Ed.VectorTile(new Cu(T)),rawData:T,cacheControl:I,expires:A})});return()=>{y.cancel(),p()}},t)}h.ARRAY_TYPE=Ga,h.AUTH_ERR_MSG=Ze,h.Aabb=Nl,h.Actor=class{constructor(r,t,s){this.target=r,this.parent=t,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ft(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=an()?r:ge,this.scheduler=new Su}send(r,t,s,c,p=!1,y){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=y,this.callbacks[b]=s);const T=kt(this.globalScope)?void 0:[];return this.target.postMessage({id:b,type:r,hasCallback:!!s,targetMapId:c,mustQueue:p,sourceMapId:this.mapId,data:ud(t,T)},T),{cancel:()=>{s&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const t=r.data,s=t.id;if(s&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const c=this.cancelCallbacks[s];delete this.cancelCallbacks[s],c&&c.cancel()}else if(t.mustQueue||an()){const c=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,t),c&&c.metadata||{type:"message"})}else this.processTask(s,t)}processTask(r,t){if("<response>"===t.type){const s=this.callbacks[r];delete this.callbacks[r],s&&(t.error?s(Bu(t.error)):s(null,Bu(t.data)))}else{const s=kt(this.globalScope)?void 0:[],c=t.hasCallback?(y,b)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:y?ud(y):null,data:ud(b,s)},s)}:y=>{},p=Bu(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,p,c);else if(this.parent.getWorkerSource){const y=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,y[0],p.source)[y[1]](p,c)}else c(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.CanonicalTileID=Hp,h.Color=ar,h.ColorMode=Oc,h.CullFaceMode=Rc,h.DEMData=gm,h.DataConstantProperty=Nt,h.DedupedRequest=kv,h.DepthMode=Rd,h.EXTENT=Ai,h.Elevation=class{isDataAvailableAtPoint(r){const t=this._source();if(!t||r.y<0||r.y>1)return!1;const s=t.getSource().maxzoom,c=1<<s,p=Math.floor(r.x),y=Math.floor((r.x-p)*c),b=Math.floor(r.y*c),T=this.findDEMTileFor(new Qs(s,p,s,y,b));return!(!T||!T.dem)}getAtPointOrZero(r,t=0){return this.getAtPoint(r,t)||0}getAtPoint(r,t,s=!0){null==t&&(t=null);const c=this._source();if(!c||r.y<0||r.y>1)return t;const p=c.getSource().maxzoom,y=1<<p,b=Math.floor(r.x),T=r.x-b,I=new Qs(p,b,p,Math.floor(T*y),Math.floor(r.y*y)),A=this.findDEMTileFor(I);if(!A||!A.dem)return t;const F=A.dem,j=1<<A.tileID.canonical.z,W=(T*j-A.tileID.canonical.x)*F.dim,J=(r.y*j-A.tileID.canonical.y)*F.dim,le=Math.floor(W),fe=Math.floor(J);return(s?this.exaggeration():1)*Xi(Xi(F.get(le,fe),F.get(le,fe+1),J-fe),Xi(F.get(le+1,fe),F.get(le+1,fe+1),J-fe),W-le)}getAtTileOffset(r,t,s){const c=1<<r.canonical.z;return this.getAtPointOrZero(new th(r.wrap+(r.canonical.x+t/Ai)/c,(r.canonical.y+s/Ai)/c))}getAtTileOffsetFunc(r,t,s,c){return p=>{const y=this.getAtTileOffset(r,p.x,p.y),b=c.upVector(r.canonical,p.x,p.y);return qc(b,b,y*c.upVectorScale(r.canonical,t,s).metersToTile),b}}getForTilePoints(r,t,s,c){const p=Dg.create(this,r,c);return!!p&&(t.forEach(y=>{y[2]=this.exaggeration()*p.getElevationAt(y[0],y[1],s)}),!0)}getMinMaxForTile(r){const t=this.findDEMTileFor(r);if(!t||!t.dem)return null;const s=t.dem.tree,c=t.tileID,p=1<<r.canonical.z-c.canonical.z;let y=r.canonical.x/p-c.canonical.x,b=r.canonical.y/p-c.canonical.y,T=0;for(let I=0;I<r.canonical.z-c.canonical.z&&!s.leaves[T];I++){y*=2,b*=2;const A=2*Math.floor(b)+Math.floor(y);T=s.childOffsets[T]+A,y%=1,b%=1}return{min:this.exaggeration()*s.minimums[T],max:this.exaggeration()*s.maximums[T]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,t,s){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},h.ErrorEvent=Bi,h.EvaluationParameters=Le,h.Event=hi,h.Evented=Ri,h.FillExtrusionBucket=Eu,h.Frustum=kf,h.FrustumCorners=Yc,h.GLOBE_METERS_TO_ECEF=ep,h.GLOBE_RADIUS=tu,h.GLOBE_SCALE_MATCH_LATITUDE=45,h.GLOBE_ZOOM_THRESHOLD_MAX=6,h.GLOBE_ZOOM_THRESHOLD_MIN=5,h.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();for(const r of this._gridSegments)r.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const r of this._wireframeSegments)r.destroy()}}_createGrid(r){const t=new Si,s=new kr,c=65;for(let p=0;p<c;p++)for(let y=0;y<c;y++)t.emplaceBack(y,p);this._gridSegments=[];for(let p=0,y=0;p<nu.length;p++){const b=nu[p];for(let I=0;I<b;I++)for(let A=0;A<64;A++){const F=I*c+A;s.emplaceBack(F+1,F,F+c),s.emplaceBack(F+c,F+c+1,F+1)}const T=64*b*2;this._gridSegments.push(ls.simpleSegment(0,y,(b+1)*c,T)),y+=T}this._gridBuffer=r.createVertexBuffer(t,vh.members),this._gridIndexBuffer=r.createIndexBuffer(s,!0)}_createPoles(r){const t=new kr;for(let p=0;p<=64;p++)t.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=r.createIndexBuffer(t,!0);const s=new $u,c=new $u;this._poleSegments=[];for(let p=0,y=0;p<5;p++){const b=1<<p,T=512*b/Math.PI/2,I=360/b;s.emplaceBack(0,-T,0,0,0,.5,0),c.emplaceBack(0,-T,0,0,0,.5,1);for(let A=0;A<=64;A++){const F=A/64,j=Xi(0,I,F),[W,J,le]=R_(a0,l0,j,T);s.emplaceBack(W,J,le,0,0,F,0),c.emplaceBack(W,J,le,0,0,F,1)}this._poleSegments.push(ls.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(s,yh,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(c,yh,!1)}getGridBuffers(r){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[r]]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,t){if(!this._wireframeSegments){const s=new as,c=64,p=c+1;this._wireframeSegments=[];for(let y=0,b=0;y<nu.length;y++){const T=nu[y];for(let A=0;A<T;A++)for(let F=0;F<c;F++){const j=A*p+F;s.emplaceBack(j,j+1),s.emplaceBack(j,j+p),s.emplaceBack(j,j+p+1)}const I=T*c*3;this._wireframeSegments.push(ls.simpleSegment(0,b,(T+1)*p,I)),b+=I}this._wireframeIndexBuffer=r.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},h.GlyphManager=tf,h.ImagePosition=qp,h.LineAtlas=fm,h.LngLat=ao,h.LngLatBounds=eh,h.LocalGlyphMode=Qf,h.MAX_MERCATOR_LATITUDE=_u,h.MercatorCoordinate=th,h.ONE_EM=Ro,h.OverscaledTileID=Qs,h.Properties=en,h.RGBAImage=ll,h.Ray=Fl,h.RequestManager=class{constructor(r,t,s){this._transformRequestFn=r,this._customAccessToken=t,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const r=function(){let t="";for(let s=0;s<10;s++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",qe,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,t){return this._transformRequestFn&&this._transformRequestFn(r,t)||{url:r}}normalizeStyleURL(r,t){if(!Pe(r))return r;const s=vt(r);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||t)}normalizeGlyphsURL(r,t){if(!Pe(r))return r;const s=vt(r);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||t)}normalizeSourceURL(r,t,s,c){if(!Pe(r))return r;const p=vt(r);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),s&&p.params.push(`language=${s}`),c&&p.params.push(`worldview=${c}`),this._makeAPIURL(p,this._customAccessToken||t)}normalizeSpriteURL(r,t,s,c){const p=vt(r);return Pe(r)?(p.path=`/styles/v1${p.path}/sprite${t}${s}`,this._makeAPIURL(p,this._customAccessToken||c)):(p.path+=`${t}${s}`,nn(p))}normalizeTileURL(r,t,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Pe(r))return r;const c=vt(r);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||s&&"raster"!==c.authority&&512===s?"@2x":""}${Yi.supported?".webp":"$1"}`),"raster"===c.authority?c.path=`/${di.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${di.TILE_URL_VERSION}${c.path}`);const p=this._customAccessToken||function(y){for(const b of y){const T=b.match(/^access_token=(.*)$/);if(T)return T[1]}return null}(c.params)||di.ACCESS_TOKEN;return di.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,p)}canonicalizeTileURL(r,t){const s=vt(r);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return r;let c="mapbox://";s.path.match(/^\/raster\/v1\//)?c+=`raster/${s.path.replace(`/${di.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${s.path.replace(`/${di.TILE_URL_VERSION}/`,"")}`;let p=s.params;return t&&(p=p.filter(y=>!y.match(/^access_token=/))),p.length&&(c+=`?${p.join("&")}`),c}canonicalizeTileset(r,t){const s=!!t&&Pe(t),c=[];for(const p of r.tiles||[])Je(p)?c.push(this.canonicalizeTileURL(p,s)):c.push(p);return c}_makeAPIURL(r,t){const s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=vt(di.API_URL);if(r.protocol=c.protocol,r.authority=c.authority,"http"===r.protocol){const p=r.params.indexOf("secure");p>=0&&r.params.splice(p,1)}if("/"!==c.path&&(r.path=`${c.path}${r.path}`),!di.REQUIRE_ACCESS_TOKEN)return nn(r);if(t=t||di.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return r.params=r.params.filter(p=>-1===p.indexOf("access_token")),r.params.push(`access_token=${t||""}`),nn(r)}},h.ResourceType=Ee,h.SegmentVector=ls,h.SourceCache=Sh,h.StencilMode=ff,h.StructArrayLayout1ui2=Ol,h.StructArrayLayout2f1f2i16=Br,h.StructArrayLayout2i4=Si,h.StructArrayLayout2ui4=as,h.StructArrayLayout3f12=Jo,h.StructArrayLayout3ui6=kr,h.StructArrayLayout4i8=xi,h.StructArrayLayout5f20=fd,h.Texture=Th,h.Tile=pf,h.Transitionable=je,h.Uniform1f=ol,h.Uniform1i=class extends ec{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},h.Uniform2f=class extends ec{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},h.Uniform3f=class extends ec{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},h.Uniform4f=xp,h.UniformColor=mu,h.UniformMatrix2f=class extends ec{constructor(r,t){super(r,t),this.current=ha}set(r){for(let t=0;t<4;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},h.UniformMatrix3f=class extends ec{constructor(r,t){super(r,t),this.current=Cf}set(r){for(let t=0;t<9;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},h.UniformMatrix4f=class extends ec{constructor(r,t){super(r,t),this.current=Ss}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},h.UnwrappedTileID=Jm,h.ValidationError=Kn,h.VectorTileWorkerSource=class extends Ri{constructor(r,t,s,c,p){super(),this.actor=r,this.layerIndex=t,this.availableImages=s,this.loadVectorData=p||K_,this.loading={},this.loaded={},this.deduped=new kv(r.scheduler),this.isSpriteLoaded=c,this.scheduler=r.scheduler}loadTile(r,t){const s=r.uid,c=r&&r.request,p=c&&c.collectResourceTiming,y=this.loading[s]=new d0(r);y.abort=this.loadVectorData(r,(b,T)=>{const I=!this.loading[s];if(delete this.loading[s],I||b||!T)return y.status="done",I||(this.loaded[s]=y),t(b);const A=T.rawData,F={};T.expires&&(F.expires=T.expires),T.cacheControl&&(F.cacheControl=T.cacheControl),y.vectorTile=T.vectorTile||new Ed.VectorTile(new Cu(A));const j=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(W,J)=>{if(W||!J)return t(W);const le={};if(p){const fe=ri(c);fe.length>0&&(le.resourceTiming=JSON.parse(JSON.stringify(fe)))}t(null,dt({rawTileData:A.slice(0)},J,F,le))})};this.isSpriteLoaded?j():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(j,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):j()}),this.loaded=this.loaded||{},this.loaded[s]=y})}reloadTile(r,t){const s=this.loaded,c=r.uid,p=this;if(s&&s[c]){const y=s[c];y.showCollisionBoxes=r.showCollisionBoxes,y.enableTerrain=!!r.enableTerrain,y.projection=r.projection,y.tileTransform=Id(r.tileID.canonical,r.projection);const b=(T,I)=>{const A=y.reloadCallback;A&&(delete y.reloadCallback,y.parse(y.vectorTile,p.layerIndex,this.availableImages,p.actor,A)),t(T,I)};"parsing"===y.status?y.reloadCallback=b:"done"===y.status&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,b):b())}}abortTile(r,t){const s=r.uid,c=this.loading[s];c&&(c.abort&&c.abort(),delete this.loading[s]),t()}removeTile(r,t){const s=this.loaded,c=r.uid;s&&s[c]&&delete s[c],t()}},h.WritingMode=kc,h.ZoomHistory=ms,h.add=xd,h.addDynamicAttributes=Ch,h.adjoint=function(r,t){var s=t[0],c=t[1],p=t[2],y=t[3],b=t[4],T=t[5],I=t[6],A=t[7],F=t[8];return r[0]=b*F-T*A,r[1]=p*A-c*F,r[2]=c*T-p*b,r[3]=T*I-y*F,r[4]=s*F-p*I,r[5]=p*y-s*T,r[6]=y*A-b*I,r[7]=c*I-s*A,r[8]=s*b-c*y,r},h.asyncAll=Zt,h.bezier=St,h.bindAll=ft,h.boundsAttributes=Mv,h.bufferConvexPolygon=function(r,t){const s=[];for(let c=0;c<r.length;c++){const p=An(c-1,-1,r.length-1),y=An(c+1,-1,r.length-1),b=r[c],T=r[y],I=r[p].sub(b).unit(),A=T.sub(b).unit(),F=A.angleWithSep(I.x,I.y),j=I.add(A).unit().mult(-1*t/Math.sin(F/2));s.push(b.add(j))}return s},h.cacheEntryPossiblyAdded=function(r){de++,de>zn&&(r.getActor().send("enforceCacheSizeLimit",$t),de=0)},h.calculateGlobeLabelMatrix=function(r,t){const{x:s,y:c}=r.point,p=np(s,c,r.worldSize/r._projectionScaler,0,0);return Kc(p,p,P_(Bl(t)))},h.calculateGlobeMatrix=function(r){const{x:t,y:s}=r.point,{lng:c,lat:p}=r._center;return np(t,s,r.worldSize,c,p)},h.calculateGlobeMercatorMatrix=function(r){const t=r.worldSize,s=r.point,c=Wc(1,r.center.lat)*t,p=r.pixelsPerMeter,y=t/(c/r.pixelsPerMeter),b=ki(new Float64Array(16));return Wu(b,b,[s.x,s.y,0]),Zc(b,b,[y,y,p]),Float32Array.from(b)},h.circumferenceAtLatitude=Kg,h.clamp=Rt,h.clearTileCache=function(r){const t=[];for(const s in Cn)t.push(ge.caches.delete(s)),delete Cn[s];r&&Promise.all(t).catch(r).then(()=>r())},h.clipLine=I_,h.clone=function(r){var t=new Ga(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},h.clone$1=mn,h.collisionCircleLayout=ig,h.config=di,h.conjugate=function(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r},h.create=function(){var r=new Ga(16);return Ga!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},h.create$1=vu,h.createExpression=br,h.createLayout=jn,h.createStyleLayer=function(r){return"custom"===r.type?new Od(r):new Zr[r.type](r)},h.cross=oh,h.degToRad=ut,h.distance=function(r,t){return Math.hypot(t[0]-r[0],t[1]-r[1],t[2]-r[2])},h.div=function(r,t,s){return r[0]=t[0]/s[0],r[1]=t[1]/s[1],r[2]=t[2]/s[2],r},h.dot=nc,h.ease=zt,h.easeCubicInOut=bt,h.emitValidationErrors=ld,h.endsWith=Ut,h.enforceCacheSizeLimit=function(r){for(const t in Cn)ie(t),Cn[t].then(s=>{s.keys().then(c=>{for(let p=0;p<c.length-r;p++)s.delete(c[p])})})},h.evaluateSizeForFeature=Gf,h.evaluateSizeForZoom=Yh,h.evaluateVariableOffset=_v,h.evented=Se,h.exactEquals=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]},h.exactEquals$1=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]},h.exported=gi,h.exported$1=Yi,h.extend=dt,h.extend$1=Yr,h.fillExtrusionHeightLift=Us,h.filterObject=Fn,h.fromMat4=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r},h.fromQuat=function(r,t){var s=t[0],c=t[1],p=t[2],y=t[3],b=s+s,T=c+c,I=p+p,A=s*b,F=c*b,j=c*T,W=p*b,J=p*T,le=p*I,fe=y*b,Re=y*T,ze=y*I;return r[0]=1-j-le,r[1]=F+ze,r[2]=W-Re,r[3]=0,r[4]=F-ze,r[5]=1-A-le,r[6]=J+fe,r[7]=0,r[8]=W+Re,r[9]=J-fe,r[10]=1-A-j,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},h.fromRotation=function(r,t){var s=Math.sin(t),c=Math.cos(t);return r[0]=c,r[1]=s,r[2]=0,r[3]=-s,r[4]=c,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},h.fromScaling=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},h.furthestTileCorner=function(r){const t=Math.round((r+45+360)%360/90)%4;return Mt[t]},h.getAABBPointSquareDist=function(r,t,s){let c=0;for(let p=0;p<2;++p){const y=s?s[p]:0;r[p]>y&&(c+=(r[p]-y)*(r[p]-y)),t[p]<y&&(c+=(y-t[p])*(y-t[p]))}return c},h.getAnchorAlignment=lg,h.getAnchorJustification=yg,h.getBounds=function(r){let t=1/0,s=1/0,c=-1/0,p=-1/0;for(const y of r)t=Math.min(t,y.x),s=Math.min(s,y.y),c=Math.max(c,y.x),p=Math.max(p,y.y);return{min:new ke(t,s),max:new ke(c,p)}},h.getColumn=_n,h.getGridMatrix=function(r,t,s){const[c,p]=t,y=.015625;return[0,(p[1]-c[1])*y,1<<r.z,(p[0]-c[0])/nu[s],0,r.y,c[0],c[1],y]},h.getImage=mt,h.getJSON=function(r,t){return me(dt(r,{type:"json"}),t)},h.getLatitudinalLod=function(r){const t=80.051129;r=Rt(r,-80.051129,t)/t*90;const s=Math.pow(Math.abs(Math.sin(ut(r))),3);return Math.round(s*(nu.length-1))},h.getMapSessionAPI=no,h.getPerformanceMeasurement=ri,h.getProjection=z_,h.getRTLTextPluginStatus=xe,h.getReferrer=De,h.getTilePoint=function(r,{x:t,y:s},c=0){return new ke(((t-c)*r.scale-r.x)*Ai,(s*r.scale-r.y)*Ai)},h.getTileVec3=function(r,t,s=0){return Ku(((t.x-s)*r.scale-r.x)*Ai,(t.y*r.scale-r.y)*Ai,Zy(t.z,t.y))},h.getVideo=function(r,t){const s=ge.document.createElement("video");s.muted=!0,s.onloadstart=function(){t(null,s)};for(let c=0;c<r.length;c++){const p=ge.document.createElement("source");Ge(r[c])||(s.crossOrigin="Anonymous"),p.src=r[c],s.appendChild(p)}return{cancel:()=>{}}},h.globeCenterToScreenPoint=function(r){const t=[0,0,0],s=ki(new Float64Array(16));return Kc(s,r.pixelMatrix,r.globeMatrix),Oo(t,t,s),new ke(t[0],t[1])},h.globeECEFOrigin=function(r,t){const s=[0,0,0];return Oo(s,s,tp(Bl(t.canonical))),Oo(s,s,r),s},h.globeNormalizeECEF=tp,h.globePixelsToTileUnits=function(r,t){return Ai/(512*Math.pow(2,r))*af(Bl(t))},h.globePoleMatrixForTile=function(r,t,s){const c=ki(new Float64Array(16)),p=1<<r,y=360*(t/p-.5),b=s.point,T=s.worldSize/(s.tileSize*p);return Wu(c,c,[b.x,b.y,-s.worldSize/Math.PI/2]),Zc(c,c,[T,T,T]),Vm(c,c,ut(-s._center.lat)),Sf(c,c,ut(-s._center.lng+y)),Float32Array.from(c)},h.globeTileBounds=Bl,h.globeTileLatLngCorners=om,h.globeTiltAtLngLat=lm,h.globeToMercatorTransition=am,h.globeUseCustomAntiAliasing=function(r,t,s){const c=am(s.zoom),p=r.style.map._antialias,y=!!t.extStandardDerivatives,b=t.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return 0===c&&!p&&!b&&y},h.identity=ki,h.identity$1=$a,h.invert=function(r,t){var s=t[0],c=t[1],p=t[2],y=t[3],b=t[4],T=t[5],I=t[6],A=t[7],F=t[8],j=t[9],W=t[10],J=t[11],le=t[12],fe=t[13],Re=t[14],ze=t[15],it=s*T-c*b,Qe=s*I-p*b,pt=s*A-y*b,yt=c*I-p*T,Et=c*A-y*T,Ht=p*A-y*I,Kt=F*fe-j*le,fn=F*Re-W*le,Mn=F*ze-J*le,Pt=j*Re-W*fe,Jt=j*ze-J*fe,Ln=W*ze-J*Re,Bn=it*Ln-Qe*Jt+pt*Pt+yt*Mn-Et*fn+Ht*Kt;return Bn?(r[0]=(T*Ln-I*Jt+A*Pt)*(Bn=1/Bn),r[1]=(p*Jt-c*Ln-y*Pt)*Bn,r[2]=(fe*Ht-Re*Et+ze*yt)*Bn,r[3]=(W*Et-j*Ht-J*yt)*Bn,r[4]=(I*Mn-b*Ln-A*fn)*Bn,r[5]=(s*Ln-p*Mn+y*fn)*Bn,r[6]=(Re*pt-le*Ht-ze*Qe)*Bn,r[7]=(F*Ht-W*pt+J*Qe)*Bn,r[8]=(b*Jt-T*Mn+A*Kt)*Bn,r[9]=(c*Mn-s*Jt-y*Kt)*Bn,r[10]=(le*Et-fe*pt+ze*it)*Bn,r[11]=(j*pt-F*Et-J*it)*Bn,r[12]=(T*fn-b*Pt-I*Kt)*Bn,r[13]=(s*Pt-c*fn+p*Kt)*Bn,r[14]=(fe*Qe-le*yt-Re*it)*Bn,r[15]=(F*yt-j*Qe+W*it)*Bn,r):null},h.isLngLatBehindGlobe=function(r,t){return lm(r,t)>Math.PI/2*1.01},h.isMapAuthenticated=function(r){return ln.has(r)},h.isMapboxURL=Pe,h.isSafariWithAntialiasingBug=function(r){const t=r.navigator?r.navigator.userAgent:null;return!!kt(r)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},h.latFromMercatorY=As,h.len=Jb,h.length=Mp,h.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},h.loadVectorTile=K_,h.makeRequest=me,h.mapValue=function(r,t,s,c,p){return Rt((r-t)/(s-t)*(p-c)+c,c,p)},h.mercatorXfromLng=_d,h.mercatorYfromLat=yd,h.mercatorZfromAltitude=Wc,h.mul=Yy,h.mul$1=Qb,h.multiply=Kc,h.multiply$1=function(r,t,s){var c=t[0],p=t[1],y=t[2],b=t[3],T=t[4],I=t[5],A=t[6],F=t[7],j=t[8],W=s[0],J=s[1],le=s[2],fe=s[3],Re=s[4],ze=s[5],it=s[6],Qe=s[7],pt=s[8];return r[0]=W*c+J*b+le*A,r[1]=W*p+J*T+le*F,r[2]=W*y+J*I+le*j,r[3]=fe*c+Re*b+ze*A,r[4]=fe*p+Re*T+ze*F,r[5]=fe*y+Re*I+ze*j,r[6]=it*c+Qe*b+pt*A,r[7]=it*p+Qe*T+pt*F,r[8]=it*y+Qe*I+pt*j,r},h.multiply$2=Qg,h.nextPowerOfTwo=Wt,h.normalize=xr,h.normalize$1=function(r,t){var s=t[0],c=t[1],p=t[2],y=t[3],b=s*s+c*c+p*p+y*y;return b>0&&(b=1/Math.sqrt(b)),r[0]=s*b,r[1]=c*b,r[2]=p*b,r[3]=y*b,r},h.number=Xi,h.ortho=function(r,t,s,c,p,y,b){var T=1/(t-s),I=1/(c-p),A=1/(y-b);return r[0]=-2*T,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*I,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(t+s)*T,r[13]=(p+c)*I,r[14]=(b+y)*A,r[15]=1,r},h.pbf=Cu,h.perspective=function(r,t,s,c,p){var y,b=1/Math.tan(t/2);return r[0]=b/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=b,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=p&&p!==1/0?(r[10]=(p+c)*(y=1/(c-p)),r[14]=2*p*c*y):(r[10]=-1,r[14]=-2*c),r},h.pick=function(r,t){const s={};for(let c=0;c<t.length;c++){const p=t[c];p in r&&(s[p]=r[p])}return s},h.plugin=Me,h.pointGeometry=ke,h.polygonContainsPoint=Ll,h.polygonIntersectsBox=Tp,h.polygonIntersectsPolygon=Gr,h.polygonizeBounds=function(r,t,s=0,c=!0){const p=new ke(s,s),y=r.sub(p),b=t.add(p),T=[y,new ke(b.x,y.y),b,new ke(y.x,b.y)];return c&&T.push(y.clone()),T},h.posAttributes=vh,h.postMapLoadEvent=Mi,h.postTurnstileEvent=ji,h.potpack=Zp,h.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},h.radToDeg=Ot,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.registerForPluginStateChange=function(r){return r({pluginStatus:Q,pluginURL:ae}),Se.on("pluginStateChange",r),r},h.removeAuthState=function(r){ln.delete(r)},h.renderColorRamp=Of,h.resample=Lm,h.rotateX=Vm,h.rotateX$1=bu,h.rotateY=Sf,h.rotateY$1=Gm,h.rotateZ=function(r,t,s){var c=Math.sin(s),p=Math.cos(s),y=t[0],b=t[1],T=t[2],I=t[3],A=t[4],F=t[5],j=t[6],W=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=y*p+A*c,r[1]=b*p+F*c,r[2]=T*p+j*c,r[3]=I*p+W*c,r[4]=A*p-y*c,r[5]=F*p-b*c,r[6]=j*p-T*c,r[7]=W*p-I*c,r},h.rotateZ$1=function(r,t,s){s*=.5;var c=t[0],p=t[1],y=t[2],b=t[3],T=Math.sin(s),I=Math.cos(s);return r[0]=c*I+p*T,r[1]=p*I-c*T,r[2]=y*I+b*T,r[3]=b*I-y*T,r},h.scale=Zc,h.scale$1=jm,h.scale$2=qc,h.scaleAndAdd=Sp,h.setCacheLimits=function(r,t){$t=r,zn=t},h.setColumn=function(r,t,s){r[4*t+0]=s[0],r[4*t+1]=s[1],r[4*t+2]=s[2],r[4*t+3]=s[3]},h.setRTLTextPlugin=function(r,t,s=!1){if(Q===k||Q===P||Q===B)throw new Error("setRTLTextPlugin cannot be called multiple times.");ae=gi.resolveURL(r),Q=k,Z=t,Ce(),s||We()},h.smoothstep=On,h.spec=xt,h.storeAuthState=function(r,t){t?ln.add(r):ln.delete(r)},h.sub=ic,h.subtract=Um,h.symbolSize=__,h.tileAABB=function(r,t,s,c,p,y,b,T,I){if("globe"===I.name)return function O_(r,t,s){const c=t/r.worldSize,p=Number.MAX_VALUE,y=[-p,-p,-p],b=[p,p,p],T=ki(new Float64Array(16));if(Zc(T,T,[c,c,c]),Kc(T,T,r.globeMatrix),s.z<=1){const Pt=Bl(s).getCorners();for(let Jt=0;Jt<Pt.length;Jt++)Oo(Pt[Jt],Pt[Jt],T),pn(b,b,Pt[Jt]),Er(y,y,Pt[Jt]);return new Nl(b,y)}const[I,A]=om(s),F=new eh;F.setSouthWest([I[1],A[0]]),F.setNorthEast([A[1],I[0]]);const j=[Xa(F.getSouth(),F.getWest()),Xa(F.getSouth(),F.getEast()),Xa(F.getNorth(),F.getEast()),Xa(F.getNorth(),F.getWest())];for(let Pt=0;Pt<j.length;Pt++)Oo(j[Pt],j[Pt],T),pn(b,b,j[Pt]),Er(y,y,j[Pt]);if(F.contains(r.center)){y[2]=0;const Pt=r.point,Jt=[Pt.x*c,Pt.y*c,0];return pn(b,b,Jt),Er(y,y,Jt),new Nl(b,y)}const W=[T[12],T[13],T[14]],J=r.center.lng,le=Rt(r.center.lat,-85.051129,_u),fe=[_d(J),yd(le)],Re=F.getCenter().lng,ze=Rt(F.getCenter().lat,-85.051129,_u),it=[_d(Re),yd(ze)];let Qe=new Array(3),pt=0,yt=fe[0]-it[0];const Et=fe[1]-it[1];if(yt>.5?yt-=1:yt<-.5&&(yt+=1),Math.abs(yt)>Math.abs(Et))pt=yt>=0?1:3,Qe=W;else{pt=Et>=0?0:2;const Pt=[T[4],T[5],T[6]];let Jt;Jt=Et>=0?-Math.sin(ut(F.getSouth()))*tu:-Math.sin(ut(F.getNorth()))*tu,Qe=Sp(Qe,W,Pt,Jt)}const Ht=j[pt],Kt=j[(pt+1)%4],fn=new s0(Ht,Kt,Qe),Mn=[sf(fn,0)||Ht[0],sf(fn,1)||Ht[1],sf(fn,2)||Ht[2]];return b[2]=Math.min(Ht[2],Kt[2]),pn(b,b,Mn),Er(y,y,Mn),new Nl(b,y)}(r,t,new Hp(s,c,p));const A=Id({z:s,x:c,y:p},I);return new Nl([(y+A.x/A.scale)*t,t*(A.y/A.scale),b],[(y+A.x2/A.scale)*t,t*(A.y2/A.scale),T])},h.tileTransform=Id,h.transformMat3=function(r,t,s){var c=t[0],p=t[1],y=t[2];return r[0]=c*s[0]+p*s[3]+y*s[6],r[1]=c*s[1]+p*s[4]+y*s[7],r[2]=c*s[2]+p*s[5]+y*s[8],r},h.transformMat4=Oo,h.transformMat4$1=Zu,h.transformQuat=Af,h.translate=Wu,h.transpose=function(r,t){if(r===t){var s=t[1],c=t[2],p=t[5];r[1]=t[3],r[2]=t[6],r[3]=s,r[5]=t[7],r[6]=c,r[7]=p}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r},h.triggerPluginCompletionEvent=pe,h.uniqueId=Gt,h.updateGlobeVertexNormal=function(r,t,s,c,p){const y=5*t+2;r.float32[y+0]=s,r.float32[y+1]=c,r.float32[y+2]=p},h.validateCustomStyleLayer=function(r){const t=[],s=r.id;return void 0===s&&t.push({message:`layers.${s}: missing required property "id"`}),void 0===r.render&&t.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},h.validateFilter=r=>ua(Vn(r)),h.validateFog=r=>ua(Sl(r)),h.validateLayer=r=>ua(Ia(r)),h.validateLight=r=>ua(ca(r)),h.validateSource=r=>ua(Aa(r)),h.validateStyle=du,h.validateTerrain=r=>ua(Ba(r)),h.values=At,h.vectorTile=Ed,h.version="2.9.2",h.warnOnce=ai,h.window=ge,h.wrap=An}),l(0,function(h){function ge(ie){if("number"==typeof ie||"boolean"==typeof ie||"string"==typeof ie||null==ie)return JSON.stringify(ie);if(Array.isArray(ie)){let K="[";for(const de of ie)K+=`${ge(de)},`;return`${K}]`}let U="{";for(const K of Object.keys(ie).sort())U+=`${K}:${ge(ie[K])},`;return`${U}}`}function Te(ie){let U="";for(const K of h.refProperties)U+=`/${ge(ie[K])}`;return U}class nt{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,K){for(const Ee of U)this._layerConfigs[Ee.id]=Ee,(this._layers[Ee.id]=h.createStyleLayer(Ee)).compileFilter(),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id];for(const Ee of K)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const de=function(Ee,Xe){const De={};for(let ne=0;ne<Ee.length;ne++){const be=Xe&&Xe[Ee[ne].id]||Te(Ee[ne]);Xe&&(Xe[Ee[ne].id]=be);let at=De[be];at||(at=De[be]=[]),at.push(Ee[ne])}const me=[];for(const ne in De)me.push(De[ne]);return me}(h.values(this._layerConfigs),this.keyCache);for(const Ee of de){const Xe=Ee.map(Ge=>this._layers[Ge.id]),De=Xe[0];if("none"===De.visibility)continue;const me=De.source||"";let ne=this.familiesBySource[me];ne||(ne=this.familiesBySource[me]={});const be=De.sourceLayer||"_geojsonTileLayer";let at=ne[be];at||(at=ne[be]=[]),at.push(Xe)}}}class ke{loadTile(U,K){const{uid:de,encoding:Ee,rawImageData:Xe,padding:De,buildQuadTree:me}=U,ne=h.window.ImageBitmap&&Xe instanceof h.window.ImageBitmap?this.getImageData(Xe,De):Xe;K(null,new h.DEMData(de,ne,Ee,De<1,me))}getImageData(U,K){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const de=this.offscreenCanvasContext.getImageData(-K,-K,U.width+2*K,U.height+2*K);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),de}}var Ve=function ie(U,K){var de,Ee=U&&U.type;if("FeatureCollection"===Ee)for(de=0;de<U.features.length;de++)ie(U.features[de],K);else if("GeometryCollection"===Ee)for(de=0;de<U.geometries.length;de++)ie(U.geometries[de],K);else if("Feature"===Ee)ie(U.geometry,K);else if("Polygon"===Ee)st(U.coordinates,K);else if("MultiPolygon"===Ee)for(de=0;de<U.coordinates.length;de++)st(U.coordinates[de],K);return U};function st(ie,U){if(0!==ie.length){rt(ie[0],U);for(var K=1;K<ie.length;K++)rt(ie[K],!U)}}function rt(ie,U){for(var K=0,de=0,Ee=0,Xe=ie.length,De=Xe-1;Ee<Xe;De=Ee++){var me=(ie[Ee][0]-ie[De][0])*(ie[De][1]+ie[Ee][1]),ne=K+me;de+=Math.abs(K)>=Math.abs(me)?K-ne+me:me-ne+K,K=ne}K+de>=0!=!!U&&ie.reverse()}const ut=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ot{constructor(U){this._feature=U,this.extent=h.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(1===this._feature.type){const U=[];for(const K of this._feature.geometry)U.push([new h.pointGeometry(K[0],K[1])]);return U}{const U=[];for(const K of this._feature.geometry){const de=[];for(const Ee of K)de.push(new h.pointGeometry(Ee[0],Ee[1]));U.push(de)}return U}}toGeoJSON(U,K,de){return ut.call(this,U,K,de)}}class Mt{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=U.length,this._features=U}feature(U){return new Ot(this._features[U])}}var bt=h.vectorTile.VectorTileFeature,St=zt;function zt(ie,U){this.options=U||{},this.features=ie,this.length=ie.length}function Rt(ie,U){this.id="number"==typeof ie.id?ie.id:void 0,this.type=ie.type,this.rawGeometry=1===ie.type?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=U||4096}zt.prototype.feature=function(ie){return new Rt(this.features[ie],this.options.extent)},Rt.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var U=0;U<ie.length;U++){for(var K=ie[U],de=[],Ee=0;Ee<K.length;Ee++)de.push(new h.pointGeometry(K[Ee][0],K[Ee][1]));this.geometry.push(de)}return this.geometry},Rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,U=1/0,K=-1/0,de=1/0,Ee=-1/0,Xe=0;Xe<ie.length;Xe++)for(var De=ie[Xe],me=0;me<De.length;me++){var ne=De[me];U=Math.min(U,ne.x),K=Math.max(K,ne.x),de=Math.min(de,ne.y),Ee=Math.max(Ee,ne.y)}return[U,de,K,Ee]},Rt.prototype.toGeoJSON=bt.prototype.toGeoJSON;var On=Zt,An=St;function Zt(ie){var U=new h.pbf;return function(K,de){for(var Ee in K.layers)de.writeMessage(3,At,K.layers[Ee])}(ie,U),U.finish()}function At(ie,U){var K;U.writeVarintField(15,ie.version||1),U.writeStringField(1,ie.name||""),U.writeVarintField(5,ie.extent||4096);var de={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<ie.length;K++)de.feature=ie.feature(K),U.writeMessage(2,dt,de);var Ee=de.keys;for(K=0;K<Ee.length;K++)U.writeStringField(3,Ee[K]);var Xe=de.values;for(K=0;K<Xe.length;K++)U.writeMessage(4,He,Xe[K])}function dt(ie,U){var K=ie.feature;void 0!==K.id&&U.writeVarintField(1,K.id),U.writeMessage(2,sn,ie),U.writeVarintField(3,K.type),U.writeMessage(4,Wt,K)}function sn(ie,U){var K=ie.feature,de=ie.keys,Ee=ie.values,Xe=ie.keycache,De=ie.valuecache;for(var me in K.properties){var ne=K.properties[me],be=Xe[me];if(null!==ne){void 0===be&&(de.push(me),Xe[me]=be=de.length-1),U.writeVarint(be);var at=typeof ne;"string"!==at&&"boolean"!==at&&"number"!==at&&(ne=JSON.stringify(ne));var Ge=at+":"+ne,Fe=De[Ge];void 0===Fe&&(Ee.push(ne),De[Ge]=Fe=Ee.length-1),U.writeVarint(Fe)}}}function Gt(ie,U){return(U<<3)+(7&ie)}function Qt(ie){return ie<<1^ie>>31}function Wt(ie,U){for(var K=ie.loadGeometry(),de=ie.type,Ee=0,Xe=0,De=K.length,me=0;me<De;me++){var ne=K[me],be=1;1===de&&(be=ne.length),U.writeVarint(Gt(1,be));for(var at=3===de?ne.length-1:ne.length,Ge=0;Ge<at;Ge++){1===Ge&&1!==de&&U.writeVarint(Gt(2,at-1));var Fe=ne[Ge].x-Ee,ye=ne[Ge].y-Xe;U.writeVarint(Qt(Fe)),U.writeVarint(Qt(ye)),Ee+=Fe,Xe+=ye}3===de&&U.writeVarint(Gt(7,1))}}function He(ie,U){var K=typeof ie;"string"===K?U.writeStringField(1,ie):"boolean"===K?U.writeBooleanField(7,ie):"number"===K&&(ie%1!=0?U.writeDoubleField(3,ie):ie<0?U.writeSVarintField(6,ie):U.writeVarintField(5,ie))}function ft(ie,U,K,de,Ee,Xe){if(Ee-de<=K)return;const De=de+Ee>>1;Ut(ie,U,De,de,Ee,Xe%2),ft(ie,U,K,de,De-1,Xe+1),ft(ie,U,K,De+1,Ee,Xe+1)}function Ut(ie,U,K,de,Ee,Xe){for(;Ee>de;){if(Ee-de>600){const be=Ee-de+1,at=K-de+1,Ge=Math.log(be),Fe=.5*Math.exp(2*Ge/3),ye=.5*Math.sqrt(Ge*Fe*(be-Fe)/be)*(at-be/2<0?-1:1);Ut(ie,U,K,Math.max(de,Math.floor(K-at*Fe/be+ye)),Math.min(Ee,Math.floor(K+(be-at)*Fe/be+ye)),Xe)}const De=U[2*K+Xe];let me=de,ne=Ee;for(on(ie,U,de,K),U[2*Ee+Xe]>De&&on(ie,U,de,Ee);me<ne;){for(on(ie,U,me,ne),me++,ne--;U[2*me+Xe]<De;)me++;for(;U[2*ne+Xe]>De;)ne--}U[2*de+Xe]===De?on(ie,U,de,ne):(ne++,on(ie,U,ne,Ee)),ne<=K&&(de=ne+1),K<=ne&&(Ee=ne-1)}}function on(ie,U,K,de){Fn(ie,K,de),Fn(U,2*K,2*de),Fn(U,2*K+1,2*de+1)}function Fn(ie,U,K){const de=ie[U];ie[U]=ie[K],ie[K]=de}function mn(ie,U,K,de){const Ee=ie-K,Xe=U-de;return Ee*Ee+Xe*Xe}On.fromVectorTileJs=Zt,On.fromGeojsonVt=function(ie,U){U=U||{};var K={};for(var de in ie)K[de]=new St(ie[de].features,U),K[de].name=de,K[de].version=U.version,K[de].extent=U.extent;return Zt({layers:K})},On.GeoJSONWrapper=An;const Sn=ie=>ie[0],ai=ie=>ie[1];class Nn{constructor(U,K=Sn,de=ai,Ee=64,Xe=Float64Array){this.nodeSize=Ee,this.points=U;const De=U.length<65536?Uint16Array:Uint32Array,me=this.ids=new De(U.length),ne=this.coords=new Xe(2*U.length);for(let be=0;be<U.length;be++)me[be]=be,ne[2*be]=K(U[be]),ne[2*be+1]=de(U[be]);ft(me,ne,Ee,0,me.length-1,0)}range(U,K,de,Ee){return function(Xe,De,me,ne,be,at,Ge){const Fe=[0,Xe.length-1,0],ye=[];let $e,mt;for(;Fe.length;){const Lt=Fe.pop(),kn=Fe.pop(),hi=Fe.pop();if(kn-hi<=Ge){for(let xt=hi;xt<=kn;xt++)$e=De[2*xt],mt=De[2*xt+1],$e>=me&&$e<=be&&mt>=ne&&mt<=at&&ye.push(Xe[xt]);continue}const Bi=Math.floor((hi+kn)/2);$e=De[2*Bi],mt=De[2*Bi+1],$e>=me&&$e<=be&&mt>=ne&&mt<=at&&ye.push(Xe[Bi]);const Ri=(Lt+1)%2;(0===Lt?me<=$e:ne<=mt)&&(Fe.push(hi),Fe.push(Bi-1),Fe.push(Ri)),(0===Lt?be>=$e:at>=mt)&&(Fe.push(Bi+1),Fe.push(kn),Fe.push(Ri))}return ye}(this.ids,this.coords,U,K,de,Ee,this.nodeSize)}within(U,K,de){return function(Ee,Xe,De,me,ne,be){const at=[0,Ee.length-1,0],Ge=[],Fe=ne*ne;for(;at.length;){const ye=at.pop(),$e=at.pop(),mt=at.pop();if($e-mt<=be){for(let Ri=mt;Ri<=$e;Ri++)mn(Xe[2*Ri],Xe[2*Ri+1],De,me)<=Fe&&Ge.push(Ee[Ri]);continue}const Lt=Math.floor((mt+$e)/2),kn=Xe[2*Lt],hi=Xe[2*Lt+1];mn(kn,hi,De,me)<=Fe&&Ge.push(Ee[Lt]);const Bi=(ye+1)%2;(0===ye?De-ne<=kn:me-ne<=hi)&&(at.push(mt),at.push(Lt-1),at.push(Bi)),(0===ye?De+ne>=kn:me+ne>=hi)&&(at.push(Lt+1),at.push($e),at.push(Bi))}return Ge}(this.ids,this.coords,U,K,de,this.nodeSize)}}const tn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},an=Math.fround||(Pn=new Float32Array(1),ie=>(Pn[0]=+ie,Pn[0]));var Pn;class ui{constructor(U){this.options=wt(Object.create(tn),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:K,minZoom:de,maxZoom:Ee,nodeSize:Xe}=this.options;K&&console.time("total time");const De=`prepare ${U.length} points`;K&&console.time(De),this.points=U;let me=[];for(let ne=0;ne<U.length;ne++)U[ne].geometry&&me.push(It(U[ne],ne));this.trees[Ee+1]=new Nn(me,qt,yn,Xe,Float32Array),K&&console.timeEnd(De);for(let ne=Ee;ne>=de;ne--){const be=+Date.now();me=this._cluster(me,ne),this.trees[ne]=new Nn(me,qt,yn,Xe,Float32Array),K&&console.log("z%d: %d clusters in %dms",ne,me.length,+Date.now()-be)}return K&&console.timeEnd("total time"),this}getClusters(U,K){let de=((U[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,U[1]));let Xe=180===U[2]?180:((U[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)de=-180,Xe=180;else if(de>Xe){const at=this.getClusters([de,Ee,180,De],K),Ge=this.getClusters([-180,Ee,Xe,De],K);return at.concat(Ge)}const me=this.trees[this._limitZoom(K)],ne=me.range(ri(de),Jn(De),ri(Xe),Jn(Ee)),be=[];for(const at of ne){const Ge=me.points[at];be.push(Ge.numPoints?_n(Ge):this.points[Ge.index])}return be}getChildren(U){const K=this._getOriginId(U),de=this._getOriginZoom(U),Ee="No cluster with the specified id.",Xe=this.trees[de];if(!Xe)throw new Error(Ee);const De=Xe.points[K];if(!De)throw new Error(Ee);const me=this.options.radius/(this.options.extent*Math.pow(2,de-1)),ne=Xe.within(De.x,De.y,me),be=[];for(const at of ne){const Ge=Xe.points[at];Ge.parentId===U&&be.push(Ge.numPoints?_n(Ge):this.points[Ge.index])}if(0===be.length)throw new Error(Ee);return be}getLeaves(U,K,de){const Ee=[];return this._appendLeaves(Ee,U,K=K||10,de=de||0,0),Ee}getTile(U,K,de){const Ee=this.trees[this._limitZoom(U)],Xe=Math.pow(2,U),{extent:De,radius:me}=this.options,ne=me/De,be=(de-ne)/Xe,at=(de+1+ne)/Xe,Ge={features:[]};return this._addTileFeatures(Ee.range((K-ne)/Xe,be,(K+1+ne)/Xe,at),Ee.points,K,de,Xe,Ge),0===K&&this._addTileFeatures(Ee.range(1-ne/Xe,be,1,at),Ee.points,Xe,de,Xe,Ge),K===Xe-1&&this._addTileFeatures(Ee.range(0,be,ne/Xe,at),Ee.points,-1,de,Xe,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(U){let K=this._getOriginZoom(U)-1;for(;K<=this.options.maxZoom;){const de=this.getChildren(U);if(K++,1!==de.length)break;U=de[0].properties.cluster_id}return K}_appendLeaves(U,K,de,Ee,Xe){const De=this.getChildren(K);for(const me of De){const ne=me.properties;if(ne&&ne.cluster?Xe+ne.point_count<=Ee?Xe+=ne.point_count:Xe=this._appendLeaves(U,ne.cluster_id,de,Ee,Xe):Xe<Ee?Xe++:U.push(me),U.length===de)break}return Xe}_addTileFeatures(U,K,de,Ee,Xe,De){for(const me of U){const ne=K[me],be=ne.numPoints;let at,Ge,Fe;if(be)at=ni(ne),Ge=ne.x,Fe=ne.y;else{const mt=this.points[ne.index];at=mt.properties,Ge=ri(mt.geometry.coordinates[0]),Fe=Jn(mt.geometry.coordinates[1])}const ye={type:1,geometry:[[Math.round(this.options.extent*(Ge*Xe-de)),Math.round(this.options.extent*(Fe*Xe-Ee))]],tags:at};let $e;be?$e=ne.id:this.options.generateId?$e=ne.index:this.points[ne.index].id&&($e=this.points[ne.index].id),void 0!==$e&&(ye.id=$e),De.features.push(ye)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))}_cluster(U,K){const de=[],{radius:Ee,extent:Xe,reduce:De,minPoints:me}=this.options,ne=Ee/(Xe*Math.pow(2,K));for(let be=0;be<U.length;be++){const at=U[be];if(at.zoom<=K)continue;at.zoom=K;const Ge=this.trees[K+1],Fe=Ge.within(at.x,at.y,ne),ye=at.numPoints||1;let $e=ye;for(const mt of Fe){const Lt=Ge.points[mt];Lt.zoom>K&&($e+=Lt.numPoints||1)}if($e>ye&&$e>=me){let mt=at.x*ye,Lt=at.y*ye,kn=De&&ye>1?this._map(at,!0):null;const hi=(be<<5)+(K+1)+this.points.length;for(const Bi of Fe){const Ri=Ge.points[Bi];if(Ri.zoom<=K)continue;Ri.zoom=K;const xt=Ri.numPoints||1;mt+=Ri.x*xt,Lt+=Ri.y*xt,Ri.parentId=hi,De&&(kn||(kn=this._map(at,!0)),De(kn,this._map(Ri)))}at.parentId=hi,de.push(kt(mt/$e,Lt/$e,hi,$e,kn))}else if(de.push(at),$e>1)for(const mt of Fe){const Lt=Ge.points[mt];Lt.zoom<=K||(Lt.zoom=K,de.push(Lt))}}return de}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,K){if(U.numPoints)return K?wt({},U.properties):U.properties;const de=this.points[U.index].properties,Ee=this.options.map(de);return K&&Ee===de?wt({},Ee):Ee}}function kt(ie,U,K,de,Ee){return{x:an(ie),y:an(U),zoom:1/0,id:K,parentId:-1,numPoints:de,properties:Ee}}function It(ie,U){const[K,de]=ie.geometry.coordinates;return{x:an(ri(K)),y:an(Jn(de)),zoom:1/0,index:U,parentId:-1}}function _n(ie){return{type:"Feature",id:ie.id,properties:ni(ie),geometry:{type:"Point",coordinates:[(U=ie.x,360*(U-.5)),fi(ie.y)]}};var U}function ni(ie){const U=ie.numPoints,K=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return wt(wt({},ie.properties),{cluster:!0,cluster_id:ie.id,point_count:U,point_count_abbreviated:K})}function ri(ie){return ie/360+.5}function Jn(ie){const U=Math.sin(ie*Math.PI/180),K=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return K<0?0:K>1?1:K}function fi(ie){const U=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function wt(ie,U){for(const K in U)ie[K]=U[K];return ie}function qt(ie){return ie.x}function yn(ie){return ie.y}function gi(ie,U,K,de){for(var Ee,Xe=de,De=K-U>>1,me=K-U,ne=ie[U],be=ie[U+1],at=ie[K],Ge=ie[K+1],Fe=U+3;Fe<K;Fe+=3){var ye=yi(ie[Fe],ie[Fe+1],ne,be,at,Ge);if(ye>Xe)Ee=Fe,Xe=ye;else if(ye===Xe){var $e=Math.abs(Fe-De);$e<me&&(Ee=Fe,me=$e)}}Xe>de&&(Ee-U>3&&gi(ie,U,Ee,de),ie[Ee+2]=Xe,K-Ee>3&&gi(ie,Ee,K,de))}function yi(ie,U,K,de,Ee,Xe){var De=Ee-K,me=Xe-de;if(0!==De||0!==me){var ne=((ie-K)*De+(U-de)*me)/(De*De+me*me);ne>1?(K=Ee,de=Xe):ne>0&&(K+=De*ne,de+=me*ne)}return(De=ie-K)*De+(me=U-de)*me}function di(ie,U,K,de){var Ee={id:void 0===ie?null:ie,type:U,geometry:K,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Xe){var De=Xe.geometry,me=Xe.type;if("Point"===me||"MultiPoint"===me||"LineString"===me)Yi(Xe,De);else if("Polygon"===me||"MultiLineString"===me)for(var ne=0;ne<De.length;ne++)Yi(Xe,De[ne]);else if("MultiPolygon"===me)for(ne=0;ne<De.length;ne++)for(var be=0;be<De[ne].length;be++)Yi(Xe,De[ne][be])}(Ee),Ee}function Yi(ie,U){for(var K=0;K<U.length;K+=3)ie.minX=Math.min(ie.minX,U[K]),ie.minY=Math.min(ie.minY,U[K+1]),ie.maxX=Math.max(ie.maxX,U[K]),ie.maxY=Math.max(ie.maxY,U[K+1])}function _r(ie,U,K,de){if(U.geometry){var Ee=U.geometry.coordinates,Xe=U.geometry.type,De=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),me=[],ne=U.id;if(K.promoteId?ne=U.properties[K.promoteId]:K.generateId&&(ne=de||0),"Point"===Xe)Lr(Ee,me);else if("MultiPoint"===Xe)for(var be=0;be<Ee.length;be++)Lr(Ee[be],me);else if("LineString"===Xe)zr(Ee,me,De,!1);else if("MultiLineString"===Xe){if(K.lineMetrics){for(be=0;be<Ee.length;be++)zr(Ee[be],me=[],De,!1),ie.push(di(ne,"LineString",me,U.properties));return}rn(Ee,me,De,!1)}else if("Polygon"===Xe)rn(Ee,me,De,!0);else{if("MultiPolygon"!==Xe){if("GeometryCollection"===Xe){for(be=0;be<U.geometry.geometries.length;be++)_r(ie,{id:ne,geometry:U.geometry.geometries[be],properties:U.properties},K,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(be=0;be<Ee.length;be++){var at=[];rn(Ee[be],at,De,!0),me.push(at)}}ie.push(di(ne,Xe,me,U.properties))}}function Lr(ie,U){U.push(Ae(ie[0])),U.push(qe(ie[1])),U.push(0)}function zr(ie,U,K,de){for(var Ee,Xe,De=0,me=0;me<ie.length;me++){var ne=Ae(ie[me][0]),be=qe(ie[me][1]);U.push(ne),U.push(be),U.push(0),me>0&&(De+=de?(Ee*be-ne*Xe)/2:Math.sqrt(Math.pow(ne-Ee,2)+Math.pow(be-Xe,2))),Ee=ne,Xe=be}var at=U.length-3;U[2]=1,gi(U,0,at,K),U[at+2]=1,U.size=Math.abs(De),U.start=0,U.end=U.size}function rn(ie,U,K,de){for(var Ee=0;Ee<ie.length;Ee++){var Xe=[];zr(ie[Ee],Xe,K,de),U.push(Xe)}}function Ae(ie){return ie/360+.5}function qe(ie){var U=Math.sin(ie*Math.PI/180),K=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return K<0?0:K>1?1:K}function Ze(ie,U,K,de,Ee,Xe,De,me){if(de/=U,Xe>=(K/=U)&&De<de)return ie;if(De<K||Xe>=de)return null;for(var ne=[],be=0;be<ie.length;be++){var at=ie[be],Ge=at.geometry,Fe=at.type,ye=0===Ee?at.minX:at.minY,$e=0===Ee?at.maxX:at.maxY;if(ye>=K&&$e<de)ne.push(at);else if(!($e<K||ye>=de)){var mt=[];if("Point"===Fe||"MultiPoint"===Fe)Pe(Ge,mt,K,de,Ee);else if("LineString"===Fe)Je(Ge,mt,K,de,Ee,!1,me.lineMetrics);else if("MultiLineString"===Fe)vt(Ge,mt,K,de,Ee,!1);else if("Polygon"===Fe)vt(Ge,mt,K,de,Ee,!0);else if("MultiPolygon"===Fe)for(var Lt=0;Lt<Ge.length;Lt++){var kn=[];vt(Ge[Lt],kn,K,de,Ee,!0),kn.length&&mt.push(kn)}if(mt.length){if(me.lineMetrics&&"LineString"===Fe){for(Lt=0;Lt<mt.length;Lt++)ne.push(di(at.id,Fe,mt[Lt],at.tags));continue}"LineString"!==Fe&&"MultiLineString"!==Fe||(1===mt.length?(Fe="LineString",mt=mt[0]):Fe="MultiLineString"),"Point"!==Fe&&"MultiPoint"!==Fe||(Fe=3===mt.length?"Point":"MultiPoint"),ne.push(di(at.id,Fe,mt,at.tags))}}}return ne.length?ne:null}function Pe(ie,U,K,de,Ee){for(var Xe=0;Xe<ie.length;Xe+=3){var De=ie[Xe+Ee];De>=K&&De<=de&&(U.push(ie[Xe]),U.push(ie[Xe+1]),U.push(ie[Xe+2]))}}function Je(ie,U,K,de,Ee,Xe,De){for(var me,ne,be=Ue(ie),at=0===Ee?hn:Gn,Ge=ie.start,Fe=0;Fe<ie.length-3;Fe+=3){var ye=ie[Fe],$e=ie[Fe+1],mt=ie[Fe+2],Lt=ie[Fe+3],kn=ie[Fe+4],hi=0===Ee?ye:$e,Bi=0===Ee?Lt:kn,Ri=!1;De&&(me=Math.sqrt(Math.pow(ye-Lt,2)+Math.pow($e-kn,2))),hi<K?Bi>K&&(ne=at(be,ye,$e,Lt,kn,K),De&&(be.start=Ge+me*ne)):hi>de?Bi<de&&(ne=at(be,ye,$e,Lt,kn,de),De&&(be.start=Ge+me*ne)):nn(be,ye,$e,mt),Bi<K&&hi>=K&&(ne=at(be,ye,$e,Lt,kn,K),Ri=!0),Bi>de&&hi<=de&&(ne=at(be,ye,$e,Lt,kn,de),Ri=!0),!Xe&&Ri&&(De&&(be.end=Ge+me*ne),U.push(be),be=Ue(ie)),De&&(Ge+=me)}var xt=ie.length-3;ye=ie[xt],$e=ie[xt+1],mt=ie[xt+2],(hi=0===Ee?ye:$e)>=K&&hi<=de&&nn(be,ye,$e,mt),xt=be.length-3,Xe&&xt>=3&&(be[xt]!==be[0]||be[xt+1]!==be[1])&&nn(be,be[0],be[1],be[2]),be.length&&U.push(be)}function Ue(ie){var U=[];return U.size=ie.size,U.start=ie.start,U.end=ie.end,U}function vt(ie,U,K,de,Ee,Xe){for(var De=0;De<ie.length;De++)Je(ie[De],U,K,de,Ee,Xe,!1)}function nn(ie,U,K,de){ie.push(U),ie.push(K),ie.push(de)}function hn(ie,U,K,de,Ee,Xe){var De=(Xe-U)/(de-U);return ie.push(Xe),ie.push(K+(Ee-K)*De),ie.push(1),De}function Gn(ie,U,K,de,Ee,Xe){var De=(Xe-K)/(Ee-K);return ie.push(U+(de-U)*De),ie.push(Xe),ie.push(1),De}function si(ie,U){for(var K=[],de=0;de<ie.length;de++){var Ee,Xe=ie[de],De=Xe.type;if("Point"===De||"MultiPoint"===De||"LineString"===De)Ee=ji(Xe.geometry,U);else if("MultiLineString"===De||"Polygon"===De){Ee=[];for(var me=0;me<Xe.geometry.length;me++)Ee.push(ji(Xe.geometry[me],U))}else if("MultiPolygon"===De)for(Ee=[],me=0;me<Xe.geometry.length;me++){for(var ne=[],be=0;be<Xe.geometry[me].length;be++)ne.push(ji(Xe.geometry[me][be],U));Ee.push(ne)}K.push(di(Xe.id,De,Ee,Xe.tags))}return K}function ji(ie,U){var K=[];K.size=ie.size,void 0!==ie.start&&(K.start=ie.start,K.end=ie.end);for(var de=0;de<ie.length;de+=3)K.push(ie[de]+U,ie[de+1],ie[de+2]);return K}function ei(ie,U){if(ie.transformed)return ie;var K,de,Ee,Xe=1<<ie.z,De=ie.x,me=ie.y;for(K=0;K<ie.features.length;K++){var ne=ie.features[K],be=ne.geometry,at=ne.type;if(ne.geometry=[],1===at)for(de=0;de<be.length;de+=2)ne.geometry.push(Mi(be[de],be[de+1],U,Xe,De,me));else for(de=0;de<be.length;de++){var Ge=[];for(Ee=0;Ee<be[de].length;Ee+=2)Ge.push(Mi(be[de][Ee],be[de][Ee+1],U,Xe,De,me));ne.geometry.push(Ge)}}return ie.transformed=!0,ie}function Mi(ie,U,K,de,Ee,Xe){return[Math.round(K*(ie*de-Ee)),Math.round(K*(U*de-Xe))]}function fr(ie,U,K,de,Ee){for(var Xe=U===Ee.maxZoom?0:Ee.tolerance/((1<<U)*Ee.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:de,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<ie.length;me++){De.numFeatures++,no(De,ie[me],Xe,Ee);var ne=ie[me].minX,be=ie[me].minY,at=ie[me].maxX,Ge=ie[me].maxY;ne<De.minX&&(De.minX=ne),be<De.minY&&(De.minY=be),at>De.maxX&&(De.maxX=at),Ge>De.maxY&&(De.maxY=Ge)}return De}function no(ie,U,K,de){var Ee=U.geometry,Xe=U.type,De=[];if("Point"===Xe||"MultiPoint"===Xe)for(var me=0;me<Ee.length;me+=3)De.push(Ee[me]),De.push(Ee[me+1]),ie.numPoints++,ie.numSimplified++;else if("LineString"===Xe)ln(De,Ee,ie,K,!1,!1);else if("MultiLineString"===Xe||"Polygon"===Xe)for(me=0;me<Ee.length;me++)ln(De,Ee[me],ie,K,"Polygon"===Xe,0===me);else if("MultiPolygon"===Xe)for(var ne=0;ne<Ee.length;ne++){var be=Ee[ne];for(me=0;me<be.length;me++)ln(De,be[me],ie,K,!0,0===me)}if(De.length){var at=U.tags||null;if("LineString"===Xe&&de.lineMetrics){for(var Ge in at={},U.tags)at[Ge]=U.tags[Ge];at.mapbox_clip_start=Ee.start/Ee.size,at.mapbox_clip_end=Ee.end/Ee.size}var Fe={geometry:De,type:"Polygon"===Xe||"MultiPolygon"===Xe?3:"LineString"===Xe||"MultiLineString"===Xe?2:1,tags:at};null!==U.id&&(Fe.id=U.id),ie.features.push(Fe)}}function ln(ie,U,K,de,Ee,Xe){var De=de*de;if(de>0&&U.size<(Ee?De:de))K.numPoints+=U.length/3;else{for(var me=[],ne=0;ne<U.length;ne+=3)(0===de||U[ne+2]>De)&&(K.numSimplified++,me.push(U[ne]),me.push(U[ne+1])),K.numPoints++;Ee&&function(be,at){for(var Ge=0,Fe=0,ye=be.length,$e=ye-2;Fe<ye;$e=Fe,Fe+=2)Ge+=(be[Fe]-be[$e])*(be[Fe+1]+be[$e+1]);if(Ge>0===at)for(Fe=0,ye=be.length;Fe<ye/2;Fe+=2){var mt=be[Fe],Lt=be[Fe+1];be[Fe]=be[ye-2-Fe],be[Fe+1]=be[ye-1-Fe],be[ye-2-Fe]=mt,be[ye-1-Fe]=Lt}}(me,Xe),ie.push(me)}}function bi(ie,U){var K=(U=this.options=function(Ee,Xe){for(var De in Xe)Ee[De]=Xe[De];return Ee}(Object.create(this.options),U)).debug;if(K&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee,Xe,De,me,ne,be,de=function(Ee,Xe){var De=[];if("FeatureCollection"===Ee.type)for(var me=0;me<Ee.features.length;me++)_r(De,Ee.features[me],Xe,me);else _r(De,"Feature"===Ee.type?Ee:{geometry:Ee},Xe);return De}(ie,U);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ee=de,Xe=U,De=Xe.buffer/Xe.extent,me=Ee,ne=Ze(Ee,1,-1-De,De,0,-1,2,Xe),be=Ze(Ee,1,1-De,2+De,0,-1,2,Xe),(ne||be)&&(me=Ze(Ee,1,-De,1+De,0,-1,2,Xe)||[],ne&&(me=si(ne,1).concat(me)),be&&(me=me.concat(si(be,-1)))),de=me).length&&this.splitTile(de,0,0,0),K&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $t(ie,U,K){return 32*((1<<ie)*K+U)+ie}function zn(ie,U){const K=ie.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const de=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!de)return U(null,null);const Ee=new Mt(de.features);let Xe=On(Ee);0===Xe.byteOffset&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),U(null,{vectorTile:Ee,rawData:Xe.buffer})}bi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bi.prototype.splitTile=function(ie,U,K,de,Ee,Xe,De){for(var me=[ie,U,K,de],ne=this.options,be=ne.debug;me.length;){de=me.pop(),K=me.pop(),U=me.pop(),ie=me.pop();var at=1<<U,Ge=$t(U,K,de),Fe=this.tiles[Ge];if(!Fe&&(be>1&&console.time("creation"),Fe=this.tiles[Ge]=fr(ie,U,K,de,ne),this.tileCoords.push({z:U,x:K,y:de}),be)){be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,K,de,Fe.numFeatures,Fe.numPoints,Fe.numSimplified),console.timeEnd("creation"));var ye="z"+U;this.stats[ye]=(this.stats[ye]||0)+1,this.total++}if(Fe.source=ie,Ee){if(U===ne.maxZoom||U===Ee)continue;var $e=1<<Ee-U;if(K!==Math.floor(Xe/$e)||de!==Math.floor(De/$e))continue}else if(U===ne.indexMaxZoom||Fe.numPoints<=ne.indexMaxPoints)continue;if(Fe.source=null,0!==ie.length){be>1&&console.time("clipping");var mt,Lt,kn,hi,Bi,Ri,xt=.5*ne.buffer/ne.extent,Yr=.5-xt,or=.5+xt,Eo=1+xt;mt=Lt=kn=hi=null,Bi=Ze(ie,at,K-xt,K+or,0,Fe.minX,Fe.maxX,ne),Ri=Ze(ie,at,K+Yr,K+Eo,0,Fe.minX,Fe.maxX,ne),ie=null,Bi&&(mt=Ze(Bi,at,de-xt,de+or,1,Fe.minY,Fe.maxY,ne),Lt=Ze(Bi,at,de+Yr,de+Eo,1,Fe.minY,Fe.maxY,ne),Bi=null),Ri&&(kn=Ze(Ri,at,de-xt,de+or,1,Fe.minY,Fe.maxY,ne),hi=Ze(Ri,at,de+Yr,de+Eo,1,Fe.minY,Fe.maxY,ne),Ri=null),be>1&&console.timeEnd("clipping"),me.push(mt||[],U+1,2*K,2*de),me.push(Lt||[],U+1,2*K,2*de+1),me.push(kn||[],U+1,2*K+1,2*de),me.push(hi||[],U+1,2*K+1,2*de+1)}}},bi.prototype.getTile=function(ie,U,K){var de=this.options,Ee=de.extent,Xe=de.debug;if(ie<0||ie>24)return null;var De=1<<ie,me=$t(ie,U=(U%De+De)%De,K);if(this.tiles[me])return ei(this.tiles[me],Ee);Xe>1&&console.log("drilling down to z%d-%d-%d",ie,U,K);for(var ne,be=ie,at=U,Ge=K;!ne&&be>0;)be--,at=Math.floor(at/2),Ge=Math.floor(Ge/2),ne=this.tiles[$t(be,at,Ge)];return ne&&ne.source?(Xe>1&&console.log("found parent tile z%d-%d-%d",be,at,Ge),Xe>1&&console.time("drilling down"),this.splitTile(ne.source,be,at,Ge,ie,U,K),Xe>1&&console.timeEnd("drilling down"),this.tiles[me]?ei(this.tiles[me],Ee):null):null};class Cn extends h.VectorTileWorkerSource{constructor(U,K,de,Ee,Xe){super(U,K,de,Ee,zn),Xe&&(this.loadGeoJSON=Xe)}loadData(U,K){const de=U&&U.request,Ee=de&&de.collectResourceTiming;this.loadGeoJSON(U,(Xe,De)=>{if(Xe||!De)return K(Xe);if("object"!=typeof De)return K(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{Ve(De,!0);try{if(U.filter){const ne=h.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ne.result)throw new Error(ne.value.map(at=>`${at.key}: ${at.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(at=>ne.value.evaluate({zoom:0},at))}}this._geoJSONIndex=U.cluster?new ui(function({superclusterOptions:ne,clusterProperties:be}){if(!be||!ne)return ne;const at={},Ge={},Fe={accumulated:null,zoom:0},ye={properties:null},$e=Object.keys(be);for(const mt of $e){const[Lt,kn]=be[mt],hi=h.createExpression(kn),Bi=h.createExpression("string"==typeof Lt?[Lt,["accumulated"],["get",mt]]:Lt);at[mt]=hi.value,Ge[mt]=Bi.value}return ne.map=mt=>{ye.properties=mt;const Lt={};for(const kn of $e)Lt[kn]=at[kn].evaluate(Fe,ye);return Lt},ne.reduce=(mt,Lt)=>{ye.properties=Lt;for(const kn of $e)Fe.accumulated=mt[kn],mt[kn]=Ge[kn].evaluate(Fe,ye)},ne}(U)).load(De.features):new bi(ne=De,U.geojsonVtOptions)}catch(ne){return K(ne)}this.loaded={};const me={};if(Ee){const ne=h.getPerformanceMeasurement(de);ne&&(me.resourceTiming={},me.resourceTiming[U.source]=JSON.parse(JSON.stringify(ne)))}K(null,me)}var ne})}reloadTile(U,K){const de=this.loaded;return de&&de[U.uid]?super.reloadTile(U,K):this.loadTile(U,K)}loadGeoJSON(U,K){if(U.request)h.getJSON(U.request,K);else{if("string"!=typeof U.data)return K(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));try{return K(null,JSON.parse(U.data))}catch{return K(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(U,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(de){K(de)}}getClusterChildren(U,K){try{K(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(de){K(de)}}getClusterLeaves(U,K){try{K(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(de){K(de)}}}class Ct{constructor(U){this.self=U,this.actor=new h.Actor(U,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=h.getProjection({name:"mercator"}),this.workerSourceTypes={vector:h.VectorTileWorkerSource,geojson:Cn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(K,de)=>{if(this.workerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.workerSourceTypes[K]=de},this.self.registerRTLTextPlugin=K=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=K.applyArabicShaping,h.plugin.processBidirectionalText=K.processBidirectionalText,h.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}}clearCaches(U,K,de){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U],de()}checkIfReady(U,K,de){de()}setReferrer(U,K){this.referrer=K}spriteLoaded(U,K){this.isSpriteLoaded[U]=K;for(const de in this.workerSources[U]){const Ee=this.workerSources[U][de];for(const Xe in Ee)Ee[Xe]instanceof h.VectorTileWorkerSource&&(Ee[Xe].isSpriteLoaded=K,Ee[Xe].fire(new h.Event("isSpriteLoaded")))}}setImages(U,K,de){this.availableImages[U]=K;for(const Ee in this.workerSources[U]){const Xe=this.workerSources[U][Ee];for(const De in Xe)Xe[De].availableImages=K}de()}enableTerrain(U,K,de){this.terrain=K,de()}setProjection(U,K){this.projections[U]=h.getProjection(K)}setLayers(U,K,de){this.getLayerIndex(U).replace(K),de()}updateLayers(U,K,de){this.getLayerIndex(U).update(K.layers,K.removedIds),de()}loadTile(U,K,de){const Ee=this.enableTerrain?h.extend({enableTerrain:this.terrain},K):K;Ee.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,K.type,K.source).loadTile(Ee,de)}loadDEMTile(U,K,de){const Ee=this.enableTerrain?h.extend({buildQuadTree:this.terrain},K):K;this.getDEMWorkerSource(U,K.source).loadTile(Ee,de)}reloadTile(U,K,de){const Ee=this.enableTerrain?h.extend({enableTerrain:this.terrain},K):K;Ee.projection=this.projections[U]||this.defaultProjection,this.getWorkerSource(U,K.type,K.source).reloadTile(Ee,de)}abortTile(U,K,de){this.getWorkerSource(U,K.type,K.source).abortTile(K,de)}removeTile(U,K,de){this.getWorkerSource(U,K.type,K.source).removeTile(K,de)}removeSource(U,K,de){if(!this.workerSources[U]||!this.workerSources[U][K.type]||!this.workerSources[U][K.type][K.source])return;const Ee=this.workerSources[U][K.type][K.source];delete this.workerSources[U][K.type][K.source],void 0!==Ee.removeSource?Ee.removeSource(K,de):de()}loadWorkerSource(U,K,de){try{this.self.importScripts(K.url),de()}catch(Ee){de(Ee.toString())}}syncRTLPluginState(U,K,de){try{h.plugin.setState(K);const Ee=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&null!=Ee){this.self.importScripts(Ee);const Xe=h.plugin.isParsed();de(Xe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ee}`),Xe)}}catch(Ee){de(Ee.toString())}}getAvailableImages(U){let K=this.availableImages[U];return K||(K=[]),K}getLayerIndex(U){let K=this.layerIndexes[U];return K||(K=this.layerIndexes[U]=new nt),K}getWorkerSource(U,K,de){return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][K]||(this.workerSources[U][K]={}),this.workerSources[U][K][de]||(this.workerSources[U][K][de]=new this.workerSourceTypes[K]({send:(Ee,Xe,De,me,ne,be)=>{this.actor.send(Ee,Xe,De,U,ne,be)},scheduler:this.actor.scheduler},this.getLayerIndex(U),this.getAvailableImages(U),this.isSpriteLoaded[U])),this.workerSources[U][K][de]}getDEMWorkerSource(U,K){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][K]||(this.demWorkerSources[U][K]=new ke),this.demWorkerSources[U][K]}enforceCacheSizeLimit(U,K){h.enforceCacheSizeLimit(K)}getWorkerPerformanceMetrics(U,K,de){de(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ct(self)),Ct}),l(0,function(h){function ge(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let d=0;d<f.length;d++)if(!ge(f[d],i[d]))return!1;return!0}if("object"==typeof f&&null!==f&&null!==i){if("object"!=typeof i||Object.keys(f).length!==Object.keys(i).length)return!1;for(const d in f)if(!ge(f[d],i[d]))return!1;return!0}return f===i}var Te=nt;function nt(f){return i=f,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var v,E,M=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(M);try{E=new Worker(k),v=!0}catch{v=!1}return E&&E.terminate(),URL.revokeObjectURL(k),v}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var v=document.createElement("canvas");v.width=v.height=1;var E=v.getContext("2d");if(!E)return!1;var M=E.getImageData(0,0,1,1);return M&&M.width===v.width}()||(void 0===ke[d=i&&i.failIfMajorPerformanceCaveat]&&(ke[d]=function(v){var E,k,P,B,M=(k=v,P=document.createElement("canvas"),(B=Object.create(nt.webGLContextAttributes)).failIfMajorPerformanceCaveat=k,P.getContext("webgl",B)||P.getContext("experimental-webgl",B));if(!M)return!1;try{E=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!E||M.isContextLost())&&(M.shaderSource(E,"void main() {}"),M.compileShader(E),!0===M.getShaderParameter(E,M.COMPILE_STATUS))}(d)),!ke[d]||document.documentMode));var i,d}var ke={};function Ve(f,i,d){const v=h.window.document.createElement(f);return void 0!==i&&(v.className=i),d&&d.appendChild(v),v}function st(f,i,d){const v=h.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const E of Object.keys(i))v.setAttributeNS(null,E,i[E]);return d&&d.appendChild(v),v}nt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const rt=h.window.document&&h.window.document.documentElement.style,ut=rt&&void 0!==rt.userSelect?"userSelect":"WebkitUserSelect";let Ot;function Mt(){rt&&ut&&(Ot=rt[ut],rt[ut]="none")}function bt(){rt&&ut&&(rt[ut]=Ot)}function St(f){f.preventDefault(),f.stopPropagation(),h.window.removeEventListener("click",St,!0)}function zt(){h.window.addEventListener("click",St,!0),h.window.setTimeout(()=>{h.window.removeEventListener("click",St,!0)},0)}function Rt(f,i){const d=f.getBoundingClientRect();return Zt(f,d,i)}function On(f,i){const d=f.getBoundingClientRect(),v=[];for(let E=0;E<i.length;E++)v.push(Zt(f,d,i[E]));return v}function An(f){return void 0!==h.window.InstallTrigger&&2===f.button&&f.ctrlKey&&h.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function Zt(f,i,d){const v=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new h.pointGeometry((d.clientX-i.left)*v,(d.clientY-i.top)*v)}function At(f,i){var d=i[0],v=i[1],E=i[2],M=i[3],k=d*M-E*v;return k?(f[0]=M*(k=1/k),f[1]=-v*k,f[2]=-E*k,f[3]=d*k,f):null}function dt(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class sn extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:d,callback:v}of this.requestors)this._notify(d,v);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,d){this._validate(i,d)&&(this.images[i]=d)}_validate(i,d){let v=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),v=!1),v}_validateStretch(i,d){if(!i)return!0;let v=0;for(const E of i){if(E[0]<v||E[1]<E[0]||d<E[1])return!1;v=E[1]}return!0}_validateContent(i,d){return!(i&&(4!==i.length||i[0]<0||d.data.width<i[0]||i[1]<0||d.data.height<i[1]||i[2]<0||d.data.width<i[2]||i[3]<0||d.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,d){d.version=this.images[i].version+1,this.images[i]=d,this.updatedImages[i]=!0}removeImage(i){const d=this.images[i];delete this.images[i],delete this.patterns[i],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,d){let v=!0;if(!this.isLoaded())for(const E of i)this.images[E]||(v=!1);this.isLoaded()||v?this._notify(i,d):this.requestors.push({ids:i,callback:d})}_notify(i,d){const v={};for(const E of i){this.images[E]||this.fire(new h.Event("styleimagemissing",{id:E}));const M=this.images[E];M?v[E]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!(!M.userImage||!M.userImage.render)}:h.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,v)}getPixelSize(){const{width:i,height:d}=this.atlasImage;return{width:i,height:d}}getPattern(i){const d=this.patterns[i],v=this.getImage(i);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const E={w:v.data.width+2,h:v.data.height+2,x:0,y:0},M=new h.ImagePosition(E,v);this.patterns[i]={bin:E,position:M}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const d=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new h.Texture(i,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const M in this.patterns)i.push(this.patterns[M].bin);const{w:d,h:v}=h.potpack(i),E=this.atlasImage;E.resize({width:d||1,height:v||1});for(const M in this.patterns){const{bin:k}=this.patterns[M],P=k.x+1,B=k.y+1,Z=this.images[M].data,Q=Z.width,ae=Z.height;h.RGBAImage.copy(Z,E,{x:0,y:0},{x:P,y:B},{width:Q,height:ae}),h.RGBAImage.copy(Z,E,{x:0,y:ae-1},{x:P,y:B-1},{width:Q,height:1}),h.RGBAImage.copy(Z,E,{x:0,y:0},{x:P,y:B+ae},{width:Q,height:1}),h.RGBAImage.copy(Z,E,{x:Q-1,y:0},{x:P-1,y:B},{width:1,height:ae}),h.RGBAImage.copy(Z,E,{x:0,y:0},{x:P+Q,y:B},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const d of i){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.images[d];dt(v)&&this.updateImage(d,v)}}}const Gt=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(f,i){return function([d,v,E]){const M=h.degToRad(v+90),k=h.degToRad(E);return{x:d*Math.cos(M)*Math.sin(k),y:d*Math.sin(M)*Math.sin(k),z:d*Math.cos(k),azimuthal:v,polar:E}}(f.expression.evaluate(i))}interpolate(f,i,d){return{x:h.number(f.x,i.x,d),y:h.number(f.y,i.y,d),z:h.number(f.z,i.z,d),azimuthal:h.number(f.azimuthal,i.azimuthal,d),polar:h.number(f.polar,i.polar,d)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),Qt="-transition";class Wt extends h.Evented{constructor(i){super(),this._transitionable=new h.Transitionable(Gt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,d={}){if(!this._validate(h.validateLight,i,d))for(const v in i){const E=i[v];h.endsWith(v,Qt)?this._transitionable.setTransition(v.slice(0,-11),E):this._transitionable.setValue(v,E)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,v){return(!v||!1!==v.validate)&&h.emitValidationErrors(this,i.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}const He=new h.Properties({source:new h.DataConstantProperty(h.spec.terrain.source),exaggeration:new h.DataConstantProperty(h.spec.terrain.exaggeration)}),ft="-transition";class Ut extends h.Evented{constructor(i,d){super(),this._transitionable=new h.Transitionable(He),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(i){for(const d in i){const v=i[d];h.endsWith(d,ft)?this._transitionable.setTransition(d.slice(0,-11),v):this._transitionable.setValue(d,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function on(f,i,d,v){const E=h.smoothstep(45,65,d),[M,k]=Fn(f,v),P=h.length(i);let B=1-Math.min(1,Math.exp((P-M)/(k-M)*-6));return B*=B*B,B=Math.min(1,1.00747*B),B*E*f.alpha}function Fn(f,i){const d=.5/Math.tan(.5*i);return[f.range[0]+d,f.range[1]+d]}const mn=new h.Properties({range:new h.DataConstantProperty(h.spec.fog.range),color:new h.DataConstantProperty(h.spec.fog.color),"high-color":new h.DataConstantProperty(h.spec.fog["high-color"]),"space-color":new h.DataConstantProperty(h.spec.fog["space-color"]),"horizon-blend":new h.DataConstantProperty(h.spec.fog["horizon-blend"]),"star-intensity":new h.DataConstantProperty(h.spec.fog["star-intensity"])}),Sn="-transition";class ai extends h.Evented{constructor(i,d){super(),this._transitionable=new h.Transitionable(mn),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const i=this._transform,d="globe"===i.projection.name,v=h.globeToMercatorTransition(i.zoom),E=this.properties.get("range"),M=[.5,3];return{range:d?[h.number(M[0],E[0],v),h.number(M[1],E[1],v)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,d={}){if(!this._validate(h.validateFog,i,d)){for(const v of Object.keys(h.spec.fog))i&&void 0===i[v]&&(i[v]=h.spec.fog[v].default);for(const v in i){const E=i[v];h.endsWith(v,Sn)?this._transitionable.setTransition(v.slice(0,-11),E):this._transitionable.setValue(v,E)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:h.smoothstep(45,65,i))*d.a}getOpacityAtLatLng(i,d){return this._transform.projection.supportsFog?function(v,E,M){const k=h.MercatorCoordinate.fromLngLat(E),P=M.elevation?M.elevation.getAtPointOrZero(k):0,B=[k.x,k.y,P];return h.transformMat4(B,B,M.mercatorFogMatrix),on(v,B,M.pitch,M._fov)}(this.state,i,d):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Fn(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,v){return(!v||!1!==v.validate)&&h.emitValidationErrors(this,i.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class Nn{constructor(i,d){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const v=this.workerPool.acquire(this.id);for(let E=0;E<v.length;E++){const M=new Nn.Actor(v[E],d,this.id);M.name=`Worker ${E}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,d,v){h.asyncAll(this.actors,(E,M)=>{E.send(i,d,M)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function tn(f,i,d){return i*(h.EXTENT/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}Nn.Actor=h.Actor;class an{constructor(i,d,v,E){this.screenBounds=i,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(i,d){let v,E;if(i instanceof h.pointGeometry||"number"==typeof i[0]){const M=h.pointGeometry.convert(i);v=[h.pointGeometry.convert(i)],E=d.isPointAboveHorizon(M)}else{const M=h.pointGeometry.convert(i[0]),k=h.pointGeometry.convert(i[1]);v=[M,k],E=h.polygonizeBounds(M,k).every(P=>d.isPointAboveHorizon(P))}return new an(v,d.getCameraPoint(),E,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(i){return h.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const d=this.screenBounds[0],v=1===this.screenBounds.length?this.screenBounds[0].add(new h.pointGeometry(1,1)):this.screenBounds[1],E=h.polygonizeBounds(d,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<v.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?E[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(E[3]=this.cameraPoint)),h.bufferConvexPolygon(E,i)}bufferedCameraGeometryGlobe(i){const d=this.screenBounds[0],v=1===this.screenBounds.length?this.screenBounds[0].add(new h.pointGeometry(1,1)):this.screenBounds[1],E=h.polygonizeBounds(d,v,i),M=this.cameraPoint.clone();switch(3*((M.y>d.y)+(M.y>v.y))+((M.x>d.x)+(M.x>v.x))){case 0:E[0]=M,E[4]=M.clone();break;case 1:E.splice(1,0,M);break;case 2:E[1]=M;break;case 3:E.splice(4,0,M);break;case 5:E.splice(2,0,M);break;case 6:E[3]=M;break;case 7:E.splice(3,0,M);break;case 8:E[2]=M}return E}containsTile(i,d,v,E=0){const M=i.queryPadding/d._projectionScaler+1,k=v?this._bufferedCameraMercator(M,d):this._bufferedScreenMercator(M,d);let P=i.tileID.wrap+(k.unwrapped?E:0);const B=k.polygon.map(We=>h.getTilePoint(i.tileTransform,We,P));if(!h.polygonIntersectsBox(B,0,0,h.EXTENT,h.EXTENT))return;P=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const Z=this.screenGeometryMercator.polygon.map(We=>h.getTileVec3(i.tileTransform,We,P)),Q=Z.map(We=>new h.pointGeometry(We[0],We[1])),ae=d.getFreeCameraOptions().position||new h.MercatorCoordinate(0,0,0),pe=h.getTileVec3(i.tileTransform,ae,P),Ce=Z.map(We=>{const Me=h.sub(We,We,pe);return h.normalize(Me,Me),new h.Ray(pe,Me)}),Se=tn(i,1,d.zoom)*d._projectionScaler;return{queryGeometry:this,tilespaceGeometry:Q,tilespaceRays:Ce,bufferedTilespaceGeometry:B,bufferedTilespaceBounds:(xe=h.getBounds(B),xe.min.x=h.clamp(xe.min.x,0,h.EXTENT),xe.min.y=h.clamp(xe.min.y,0,h.EXTENT),xe.max.x=h.clamp(xe.max.x,0,h.EXTENT),xe.max.y=h.clamp(xe.max.y,0,h.EXTENT),xe),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:Se};var xe}_bufferedScreenMercator(i,d){const v=kt(i);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let E;return E="globe"===d.projection.name?this._projectAndResample(this.bufferedScreenGeometry(i),d):{polygon:this.bufferedScreenGeometry(i).map(M=>d.pointCoordinate3D(M)),unwrapped:!0},this._screenRaycastCache[v]=E,E}}_bufferedCameraMercator(i,d){const v=kt(i);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let E;return E="globe"===d.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),d):{polygon:this.bufferedCameraGeometry(i).map(M=>d.pointCoordinate3D(M)),unwrapped:!0},this._cameraRaycastCache[v]=E,E}}_projectAndResample(i,d){const v=function(M,k){const P=h.multiply([],k.pixelMatrix,k.globeMatrix),B=[0,-h.GLOBE_RADIUS,0,1],Z=[0,h.GLOBE_RADIUS,0,1],Q=[0,0,0,1];h.transformMat4$1(B,B,P),h.transformMat4$1(Z,Z,P),h.transformMat4$1(Q,Q,P);const ae=new h.pointGeometry(B[0]/B[3],B[1]/B[3]),pe=new h.pointGeometry(Z[0]/Z[3],Z[1]/Z[3]),Ce=h.polygonContainsPoint(M,ae)&&B[3]<Q[3],Se=h.polygonContainsPoint(M,pe)&&Z[3]<Q[3];if(!Ce&&!Se)return null;const xe=function(_t,Vt,Xt){for(let jt=1;jt<_t.length;jt++){const Nt=ui(Vt.pointCoordinate3D(_t[jt-1]).x),tt=ui(Vt.pointCoordinate3D(_t[jt]).x);if(Xt<0){if(Nt<tt)return{idx:jt,t:-Nt/(tt-1-Nt)}}else if(tt<Nt)return{idx:jt,t:(1-Nt)/(tt+1-Nt)}}return null}(M,k,Ce?-1:1);if(!xe)return null;const{idx:We,t:Me}=xe;let Le=We>1?Pn(M.slice(0,We),k):[],Ne=We<M.length?Pn(M.slice(We),k):[];Le=Le.map(_t=>new h.pointGeometry(ui(_t.x),_t.y)),Ne=Ne.map(_t=>new h.pointGeometry(ui(_t.x),_t.y));const et=[...Le];0===et.length&&et.push(Ne[Ne.length-1]);const je=h.number(et[et.length-1].y,(0===Ne.length?Le[0]:Ne[0]).y,Me);let Ke;return Ke=Ce?[new h.pointGeometry(0,je),new h.pointGeometry(0,0),new h.pointGeometry(1,0),new h.pointGeometry(1,je)]:[new h.pointGeometry(1,je),new h.pointGeometry(1,1),new h.pointGeometry(0,1),new h.pointGeometry(0,je)],et.push(...Ke),0===Ne.length?et.push(Le[0]):et.push(...Ne),{polygon:et.map(_t=>new h.MercatorCoordinate(_t.x,_t.y)),unwrapped:!1}}(i,d);if(v)return v;const E=function(M,k){let P=!1,B=-1/0,Z=0;for(let ae=0;ae<M.length-1;ae++)M[ae].x>B&&(B=M[ae].x,Z=ae);for(let ae=0;ae<M.length-1;ae++){const pe=(Z+ae)%(M.length-1),Ce=M[pe],Se=M[pe+1];Math.abs(Ce.x-Se.x)>.5&&(Ce.x<Se.x?(Ce.x+=1,0===pe&&(M[M.length-1].x+=1)):(Se.x+=1,pe+1===M.length-1&&(M[0].x+=1)),P=!0)}const Q=h.mercatorXfromLng(k.center.lng);return P&&Q<Math.abs(Q-1)&&M.forEach(ae=>{ae.x-=1}),{polygon:M,unwrapped:P}}(Pn(i,d).map(M=>new h.pointGeometry(ui(M.x),M.y)),d);return{polygon:E.polygon.map(M=>new h.MercatorCoordinate(M.x,M.y)),unwrapped:E.unwrapped}}}function Pn(f,i){return h.resample(f,d=>{const v=i.pointCoordinate3D(d);d.x=v.x,d.y=v.y},1/256)}function ui(f){return f<0?1+f%1:f%1}function kt(f){return 100*f|0}function It(f,i,d,v,E){const M=function(k,P){if(k)return E(k);if(P){const B=h.pick(h.extend(P,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(B.vectorLayers=P.vector_layers,B.vectorLayerIds=B.vectorLayers.map(Z=>Z.id)),P.language_options&&(B.languageOptions=P.language_options),P.language&&P.language[P.id]&&(B.language=P.language[P.id]),P.worldview_options&&(B.worldviewOptions=P.worldview_options),P.worldview?B.worldview=P.worldview[P.id]:P.worldview_default&&(B.worldview=P.worldview_default),B.tiles=i.canonicalizeTileset(B,f.url),E(null,B)}};return f.url?h.getJSON(i.transformRequest(i.normalizeSourceURL(f.url,null,d,v),h.ResourceType.Source),M):h.exported.frame(()=>M(null,f))}class _n{constructor(i,d,v){this.bounds=h.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const d=Math.pow(2,i.z),v=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*d),E=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*d),M=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*d),k=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*d);return i.x>=v&&i.x<M&&i.y>=E&&i.y<k}}class ni{constructor(i,d,v){this.context=i;const E=i.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ri={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Jn{constructor(i,d,v,E){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=E,this.context=i;const M=i.gl;this.buffer=M.createBuffer(),i.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,d){for(let v=0;v<this.attributes.length;v++){const E=d.attributes[this.attributes[v].name];void 0!==E&&i.enableVertexAttribArray(E)}}setVertexAttribPointers(i,d,v){for(let E=0;E<this.attributes.length;E++){const M=this.attributes[E],k=d.attributes[M.name];void 0!==k&&i.vertexAttribPointer(k,M.components,i[ri[M.type]],!1,this.itemSize,M.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class fi{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wt extends fi{getDefault(){return h.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class qt extends fi{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class yn extends fi{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class gi extends fi{getDefault(){return[!0,!0,!0,!0]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class yi extends fi{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class di extends fi{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Yi extends fi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const d=this.current;(i.func!==d.func||i.ref!==d.ref||i.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class _r extends fi{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Lr extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=i,this.dirty=!1}}class zr extends fi{getDefault(){return[0,1]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class rn extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ae extends fi{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class qe extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.BLEND):d.disable(d.BLEND),this.current=i,this.dirty=!1}}class Ze extends fi{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Pe extends fi{getDefault(){return h.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Je extends fi{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ue extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=i,this.dirty=!1}}class vt extends fi{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class nn extends fi{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class hn extends fi{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Gn extends fi{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class si extends fi{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ji extends fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ei extends fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Mi extends fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class fr extends fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class no extends fi{getDefault(){return null}set(i){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ln extends fi{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class bi extends fi{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class $t extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class zn extends fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Cn extends fi{constructor(i,d){super(i),this.context=i,this.parent=d}getDefault(){return null}}class Ct extends Cn{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ie extends Cn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class U extends ie{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class K{constructor(i,d,v,E){this.context=i,this.width=d,this.height=v;const M=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Ct(i,M),E&&(this.depthAttachment=new ie(i,M))}destroy(){const i=this.context.gl,d=this.colorAttachment.get();if(d&&i.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&i.deleteRenderbuffer(v)}i.deleteFramebuffer(this.framebuffer)}}class de{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new wt(this),this.clearDepth=new qt(this),this.clearStencil=new yn(this),this.colorMask=new gi(this),this.depthMask=new yi(this),this.stencilMask=new di(this),this.stencilFunc=new Yi(this),this.stencilOp=new _r(this),this.stencilTest=new Lr(this),this.depthRange=new zr(this),this.depthTest=new rn(this),this.depthFunc=new Ae(this),this.blend=new qe(this),this.blendFunc=new Ze(this),this.blendColor=new Pe(this),this.blendEquation=new Je(this),this.cullFace=new Ue(this),this.cullFaceSide=new vt(this),this.frontFace=new nn(this),this.program=new hn(this),this.activeTexture=new Gn(this),this.viewport=new si(this),this.bindFramebuffer=new ji(this),this.bindRenderbuffer=new ei(this),this.bindTexture=new Mi(this),this.bindVertexBuffer=new fr(this),this.bindElementBuffer=new no(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ln(this),this.pixelStoreUnpack=new bi(this),this.pixelStoreUnpackPremultiplyAlpha=new $t(this),this.pixelStoreUnpackFlipY=new zn(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,d){return new ni(this,i,d)}createVertexBuffer(i,d,v){return new Jn(this,i,d,v)}createRenderbuffer(i,d,v){const E=this.gl,M=E.createRenderbuffer();return this.bindRenderbuffer.set(M),E.renderbufferStorage(E.RENDERBUFFER,i,d,v),this.bindRenderbuffer.set(null),M}createFramebuffer(i,d,v){return new K(this,i,d,v)}clear({color:i,depth:d,stencil:v}){const E=this.gl;let M=0;i&&(M|=E.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(M|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==v&&(M|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),E.clear(M)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){ge(i.blendFunction,h.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ee extends h.Evented{constructor(i,d,v,E){super(),this.id=i,this.dispatcher=v,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},d),h.extend(this,h.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=It(this._options,this.map._requestManager,null,null,(i,d)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new h.ErrorEvent(i)):d&&(h.extend(this,d),d.bounds&&(this.tileBounds=new _n(d.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(d.tiles),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,d){const v=h.exported.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);i.request=h.getImage(this.map._requestManager.transformRequest(E,h.ResourceType.Tile),(M,k,P,B)=>(delete i.request,i.aborted?(i.state="unloaded",d(null)):M?(i.state="errored",d(M)):k?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:P,expires:B}),i.setTexture(k,this.map.painter),i.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(i,d,v){i.setTexture(d,v)}static unloadTileData(i,d){i.texture&&d.saveTileTexture(i.texture)}abortTile(i,d){i.request&&(i.request.cancel(),delete i.request),d()}unloadTile(i,d){i.texture&&this.map.painter.saveTileTexture(i.texture),d()}hasTransition(){return!1}}let Xe;function De(f,i,d,v,E,M,k,P){const B=[f,d,E,i,v,M,1,1,1],Z=[k,P,1],Q=h.adjoint([],B),[ae,pe,Ce]=h.transformMat3(Z,Z,h.transpose(Q,Q));return h.multiply$1(B,[ae,0,0,0,pe,0,0,0,Ce],B)}class me extends h.Evented{constructor(i,d,v,E){super(),this.id=i,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=d}load(i,d){this._loaded=d||!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(v,E)=>{if(this._loaded=!0,v)this.fire(new h.ErrorEvent(v));else if(E){const{HTMLImageElement:M}=h.window;this.image=E instanceof M?h.exported.getImageData(E):E,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const d=i.map(h.MercatorCoordinate.fromLngLat);return this.tileID=function(v){let E=1/0,M=1/0,k=-1/0,P=-1/0;for(const ae of v)E=Math.min(E,ae.x),M=Math.min(M,ae.y),k=Math.max(k,ae.x),P=Math.max(P,ae.y);const B=Math.max(k-E,P-M),Z=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),Q=Math.pow(2,Z);return new h.CanonicalTileID(Z,Math.floor((E+k)/2*Q),Math.floor((M+P)/2*Q))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const B in this.tiles){const Z=this.tiles[B];"loaded"!==Z.state&&(Z.state="loaded",Z.texture=this.texture)}if(this._boundsArray)return;const d=h.tileTransform(this.tileID,this.map.transform.projection),[v,E,M,k]=this.coordinates.map(B=>{const Z=d.projection.project(B[0],B[1]);return h.getTilePoint(d,Z)._round()});this.perspectiveTransform=function(B,Z,Q,ae,pe,Ce,Se,xe,We,Me){const Le=De(0,0,B,0,0,Z,B,Z),Ne=De(Q,ae,pe,Ce,Se,xe,We,Me);return h.multiply$1(Ne,h.adjoint(Le,Le),Ne),[Ne[6]/Ne[8]*B/h.EXTENT,Ne[7]/Ne[8]*Z/h.EXTENT]}(this.width,this.height,v.x,v.y,E.x,E.y,k.x,k.y,M.x,M.y);const P=this._boundsArray=new h.StructArrayLayout4i8;P.emplaceBack(v.x,v.y,0,0),P.emplaceBack(E.x,E.y,h.EXTENT,0),P.emplaceBack(k.x,k.y,0,h.EXTENT),P.emplaceBack(M.x,M.y,h.EXTENT,h.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(P,h.boundsAttributes.members),this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,d=i.gl;this.texture?this.texture.update(this.image):(this.texture=new h.Texture(i,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._prepareData(i)}loadTile(i,d){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},d(null)):(i.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ne={vector:class extends h.Evented{constructor(f,i,d,v){if(super(),this.id=f,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(i,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new h.DedupedRequest}load(f){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"}));const i=this.language||this.map._language,d=this.worldview||this.map._worldview;this._tileJSONRequest=It(this._options,this.map._requestManager,i,d,(v,E)=>{this._tileJSONRequest=null,this._loaded=!0,v?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${i}`),d&&2!==d.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new h.ErrorEvent(v))):E&&(h.extend(this,E),E.bounds&&(this.tileBounds=new _n(E.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(E.tiles,this.map._requestManager._customAccessToken),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))),f&&f(v)})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.load(()=>{const i=this.map.style._getSourceCaches(this.id);for(const d of i)d.clearTiles()})}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}_setLanguage(f){return f===this.language||this.setSourceProperty(()=>{this.language=f}),this}_setWorldview(f){return f===this.worldview?this:this.worldviewOptions&&f&&!this.worldviewOptions[f]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${f}".`),this):(this.setSourceProperty(()=>{this.worldview=f}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(f,i){const d=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,h.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,f.actor&&"expired"!==f.state)"loading"===f.state?f.reloadCallback=i:f.request=f.actor.send("reloadTile",v,E.bind(this));else if(f.actor=this._tileWorkers[d]=this._tileWorkers[d]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",v,E.bind(this),void 0,!0);else{const M=h.loadVectorTile.call({deduped:this._deduped},v,(k,P)=>{k||!P?E.call(this,k):(v.data={cacheControl:P.cacheControl,expires:P.expires,rawData:P.rawData.slice(0)},f.actor&&f.actor.send("loadTile",v,E.bind(this),void 0,!0))},!0);f.request={cancel:M}}function E(M,k){return delete f.request,f.aborted?i(null):M&&404!==M.status?i(M):(k&&k.resourceTiming&&(f.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&f.setExpiryData(k),f.loadVectorData(k,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ee,"raster-dem":class extends Ee{constructor(f,i,d,v){super(f,i,d,v),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const d=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(E,M){E&&(f.state="errored",i(E)),M&&(f.dem=M,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=h.getImage(this.map._requestManager.transformRequest(d,h.ResourceType.Tile),function(E,M,k,P){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(E)f.state="errored",i(E);else if(M){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:k,expires:P});const B=h.window.ImageBitmap&&M instanceof h.window.ImageBitmap&&(null==Xe&&(Xe=h.window.OffscreenCanvas&&new h.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof h.window.createImageBitmap),Xe),Z=1-(M.width-h.prevPowerOfTwo(M.width))/2;Z<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const Q=B?M:h.exported.getImageData(M,Z),ae={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:Q,encoding:this.encoding,padding:Z};f.actor&&"expired"!==f.state||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",ae,v.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const i=f.canonical,d=Math.pow(2,i.z),v=(i.x-1+d)%d,E=0===i.x?f.wrap-1:f.wrap,M=(i.x+1+d)%d,k=i.x+1===d?f.wrap+1:f.wrap,P={};return P[new h.OverscaledTileID(f.overscaledZ,E,i.z,v,i.y).key]={backfilled:!1},P[new h.OverscaledTileID(f.overscaledZ,k,i.z,M,i.y).key]={backfilled:!1},i.y>0&&(P[new h.OverscaledTileID(f.overscaledZ,E,i.z,v,i.y-1).key]={backfilled:!1},P[new h.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},P[new h.OverscaledTileID(f.overscaledZ,k,i.z,M,i.y-1).key]={backfilled:!1}),i.y+1<d&&(P[new h.OverscaledTileID(f.overscaledZ,E,i.z,v,i.y+1).key]={backfilled:!1},P[new h.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},P[new h.OverscaledTileID(f.overscaledZ,k,i.z,M,i.y+1).key]={backfilled:!1}),P}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends h.Evented{constructor(f,i,d,v){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=i.data,this._options=h.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const E=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*E,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*E,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:h.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*E,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:d},v),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new h.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=h.extend({},this.workerOptions),i=this._data;"string"==typeof i?(f.request=this.map._requestManager.transformRequest(h.exported.resolveURL(i),h.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(d,v)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new h.ErrorEvent(d));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(E.resourceTiming=v.resourceTiming[this.id]),this.fire(new h.Event("data",E)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,i){const d=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(d,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(v,E)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):v?i(v):(f.loadVectorData(E,this.map.painter,"reloadTile"===d),i(null))),void 0,"loadTile"===d)}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends me{constructor(f,i,d,v){super(f,i,d,v),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,h.ResourceType.Source).url);h.getVideo(this.urls,(i,d)=>{this._loaded=!0,i?this.fire(new h.ErrorEvent(i)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new h.Texture(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:me,canvas:class extends me{constructor(f,i,d,v){super(f,i,d,v),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(E=>!Array.isArray(E)||2!==E.length||E.some(M=>"number"!=typeof M))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof h.window.HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof h.window.HTMLCanvasElement?this.options.canvas:h.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new h.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends h.Evented{constructor(f,i,d,v){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=i,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new h.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new h.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new _n(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.coveringTiles=this._coveringTiles.bind(this),h.extend(this,h.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return h.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:i,y:d,z:v}=f.canonical;return this._implementation.hasTile({x:i,y:d,z:v})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,i){const{x:d,y:v,z:E}=f.tileID.canonical,M=new h.window.AbortController,k=this._implementation.loadTile({x:d,y:v,z:E},{signal:M.signal});if(!k)return this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null);k.cancel=()=>M.abort(),f.request=k.then(function(P){return delete f.request,f.aborted?(f.state="unloaded",i(null)):P?(B=P)instanceof h.window.ImageData||B instanceof h.window.ImageBitmap||B instanceof h.window.HTMLCanvasElement?(this.loadTileData(f,P),f.state="loaded",void i(null)):(f.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null));var B}.bind(this)).catch(P=>{20!==P.code&&(f.state="errored",i(P))})}loadTileData(f,i){Ee.loadTileData(f,i,this._map.painter)}unloadTileData(f){Ee.unloadTileData(f,this._map.painter)}prepareTile(f){if(!this._implementation.prepareTile)return null;const{x:i,y:d,z:v}=f.tileID.canonical,E=this._implementation.prepareTile({x:i,y:d,z:v});return E?(this.loadTileData(f,E),f.state="loaded",E):null}unloadTile(f,i){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:d,y:v,z:E}=f.tileID.canonical;this._implementation.unloadTile({x:d,y:v,z:E})}i()}abortTile(f,i){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_update(){this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))}}},be=function(f,i,d,v){const E=new ne[i.type](f,i,d,v);if(E.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${E.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],E),E};function at(f,i){const d=h.identity([]);return h.scale(d,d,[.5*f.width,.5*-f.height,1]),h.translate(d,d,[1,-1,0]),h.multiply(d,d,f.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(d)}function Ge(f,i,d,v,E,M,k,P=!1){const B=f.tilesIn(v,k,P);B.sort(ye);const Z=[];for(const ae of B)Z.push({wrappedTileID:ae.tile.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(i,d,f._state,ae,E,M,at(f.transform,ae.tile.tileID),P)});const Q=function(ae){const pe={},Ce={};for(const Se of ae){const xe=Se.queryResults,We=Se.wrappedTileID,Me=Ce[We]=Ce[We]||{};for(const Le in xe){const Ne=xe[Le],et=Me[Le]=Me[Le]||{},je=pe[Le]=pe[Le]||[];for(const Ke of Ne)et[Ke.featureIndex]||(et[Ke.featureIndex]=!0,je.push(Ke))}}return pe}(Z);for(const ae in Q)Q[ae].forEach(pe=>{const Ce=pe.feature,Se=Ce.layer;Se&&"background"!==Se.type&&"sky"!==Se.type&&(Ce.source=Se.source,Se["source-layer"]&&(Ce.sourceLayer=Se["source-layer"]),Ce.state=void 0!==Ce.id?f.getFeatureState(Se["source-layer"],Ce.id):{})});return Q}function Fe(f,i){const d=f.getRenderableIds().map(M=>f.getTileByID(M)),v=[],E={};for(let M=0;M<d.length;M++){const k=d[M],P=k.tileID.canonical.key;E[P]||(E[P]=!0,k.querySourceFeatures(v,i))}return v}function ye(f,i){const d=f.tileID,v=i.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function $e(){return null!=we.workerClass?new we.workerClass:new h.window.Worker(we.workerUrl)}const mt="mapboxgl_preloaded_worker_pool";class Lt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new $e);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mt]}numActive(){return Object.keys(this.active).length}}let kn;function hi(){return kn||(kn=new Lt),kn}function Bi(f,i){const d={};for(const v in f)"ref"!==v&&(d[v]=f[v]);return h.refProperties.forEach(v=>{v in i&&(d[v]=i[v])}),d}function Ri(f){f=f.slice();const i=Object.create(null);for(let d=0;d<f.length;d++)i[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Bi(f[d],i[f[d].ref]));return f}Lt.workerCount=2;const xt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Yr(f,i,d){d.push({command:xt.addSource,args:[f,i[f]]})}function or(f,i,d){i.push({command:xt.removeSource,args:[f]}),d[f]=!0}function Eo(f,i,d,v){or(f,d,v),Yr(f,i,d)}function Gs(f,i,d){let v;for(v in f[d])if(f[d].hasOwnProperty(v)&&"data"!==v&&!ge(f[d][v],i[d][v]))return!1;for(v in i[d])if(i[d].hasOwnProperty(v)&&"data"!==v&&!ge(f[d][v],i[d][v]))return!1;return!0}function Io(f,i,d,v,E,M){let k;for(k in i=i||{},f=f||{})f.hasOwnProperty(k)&&(ge(f[k],i[k])||d.push({command:M,args:[v,k,i[k],E]}));for(k in i)i.hasOwnProperty(k)&&!f.hasOwnProperty(k)&&(ge(f[k],i[k])||d.push({command:M,args:[v,k,i[k],E]}))}function $s(f){return f.id}function Hs(f,i){return f[i.id]=i,f}class ya{constructor(i,d){this.reset(i,d)}reset(i,d){this.points=i||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=h.clamp(i,0,1);let d=1,v=this._distances[d];const E=i*this.paddedLength+this.padding;for(;v<E&&d<this._distances.length;)v=this._distances[++d];const M=d-1,k=this._distances[M],P=v-k,B=P>0?(E-k)/P:0;return this.points[M].mult(1-B).add(this.points[d].mult(B))}}class Hn{constructor(i,d,v){const E=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(i/v),this.yCellCount=Math.ceil(d/v);for(let k=0;k<this.xCellCount*this.yCellCount;k++)E.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=d,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,d,v,E,M){this._forEachCell(d,v,E,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(E),this.bboxes.push(M)}insertCircle(i,d,v,E){this._forEachCell(d-E,v-E,d+E,v+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(d),this.circles.push(v),this.circles.push(E)}_insertBoxCell(i,d,v,E,M,k){this.boxCells[M].push(k)}_insertCircleCell(i,d,v,E,M,k){this.circleCells[M].push(k)}_query(i,d,v,E,M,k){if(v<0||i>this.width||E<0||d>this.height)return!M&&[];const P=[];if(i<=0&&d<=0&&this.width<=v&&this.height<=E){if(M)return!0;for(let B=0;B<this.boxKeys.length;B++)P.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const Z=this.circles[3*B],Q=this.circles[3*B+1],ae=this.circles[3*B+2];P.push({key:this.circleKeys[B],x1:Z-ae,y1:Q-ae,x2:Z+ae,y2:Q+ae})}return k?P.filter(k):P}return this._forEachCell(i,d,v,E,this._queryCell,P,{hitTest:M,seenUids:{box:{},circle:{}}},k),M?P.length>0:P}_queryCircle(i,d,v,E,M){const k=i-v,P=i+v,B=d-v,Z=d+v;if(P<0||k>this.width||Z<0||B>this.height)return!E&&[];const Q=[];return this._forEachCell(k,B,P,Z,this._queryCellCircle,Q,{hitTest:E,circle:{x:i,y:d,radius:v},seenUids:{box:{},circle:{}}},M),E?Q.length>0:Q}query(i,d,v,E,M){return this._query(i,d,v,E,!1,M)}hitTest(i,d,v,E,M){return this._query(i,d,v,E,!0,M)}hitTestCircle(i,d,v,E){return this._queryCircle(i,d,v,!0,E)}_queryCell(i,d,v,E,M,k,P,B){const Z=P.seenUids,Q=this.boxCells[M];if(null!==Q){const pe=this.bboxes;for(const Ce of Q)if(!Z.box[Ce]){Z.box[Ce]=!0;const Se=4*Ce;if(i<=pe[Se+2]&&d<=pe[Se+3]&&v>=pe[Se+0]&&E>=pe[Se+1]&&(!B||B(this.boxKeys[Ce]))){if(P.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[Ce],x1:pe[Se],y1:pe[Se+1],x2:pe[Se+2],y2:pe[Se+3]})}}}const ae=this.circleCells[M];if(null!==ae){const pe=this.circles;for(const Ce of ae)if(!Z.circle[Ce]){Z.circle[Ce]=!0;const Se=3*Ce;if(this._circleAndRectCollide(pe[Se],pe[Se+1],pe[Se+2],i,d,v,E)&&(!B||B(this.circleKeys[Ce]))){if(P.hitTest)return k.push(!0),!0;{const xe=pe[Se],We=pe[Se+1],Me=pe[Se+2];k.push({key:this.circleKeys[Ce],x1:xe-Me,y1:We-Me,x2:xe+Me,y2:We+Me})}}}}}_queryCellCircle(i,d,v,E,M,k,P,B){const Z=P.circle,Q=P.seenUids,ae=this.boxCells[M];if(null!==ae){const Ce=this.bboxes;for(const Se of ae)if(!Q.box[Se]){Q.box[Se]=!0;const xe=4*Se;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,Ce[xe+0],Ce[xe+1],Ce[xe+2],Ce[xe+3])&&(!B||B(this.boxKeys[Se])))return k.push(!0),!0}}const pe=this.circleCells[M];if(null!==pe){const Ce=this.circles;for(const Se of pe)if(!Q.circle[Se]){Q.circle[Se]=!0;const xe=3*Se;if(this._circlesCollide(Ce[xe],Ce[xe+1],Ce[xe+2],Z.x,Z.y,Z.radius)&&(!B||B(this.circleKeys[Se])))return k.push(!0),!0}}}_forEachCell(i,d,v,E,M,k,P,B){const Z=this._convertToXCellCoord(i),Q=this._convertToYCellCoord(d),ae=this._convertToXCellCoord(v),pe=this._convertToYCellCoord(E);for(let Ce=Z;Ce<=ae;Ce++)for(let Se=Q;Se<=pe;Se++)if(M.call(this,i,d,v,E,this.xCellCount*Se+Ce,k,P,B))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,d,v,E,M,k){const P=E-i,B=M-d,Z=v+k;return Z*Z>P*P+B*B}_circleAndRectCollide(i,d,v,E,M,k,P){const B=(k-E)/2,Z=Math.abs(i-(E+B));if(Z>B+v)return!1;const Q=(P-M)/2,ae=Math.abs(d-(M+Q));if(ae>Q+v)return!1;if(Z<=B||ae<=Q)return!0;const pe=Z-B,Ce=ae-Q;return pe*pe+Ce*Ce<=v*v}}const Ui=Math.tan(85*Math.PI/180);function Li(f,i,d,v,E,M,k){const P=h.create();if(d)if("globe"===M.name){const B=h.calculateGlobeLabelMatrix(E,i);h.multiply(P,P,B)}else{const B=At([],k);P[0]=B[0],P[1]=B[1],P[4]=B[2],P[5]=B[3],v||h.rotateZ(P,P,E.angle)}else h.multiply(P,E.labelPlaneMatrix,f);return P}function Xo(f,i,d,v,E,M,k){const P=Li(f,i,d,v,E,M,k);return"globe"===M.name&&d||(P[2]=P[6]=P[10]=P[14]=0),P}function Oe(f,i,d,v,E,M,k){if(d){if("globe"===M.name){const P=Li(f,i,d,v,E,M,k);return h.invert(P,P),h.multiply(P,f,P),P}{const P=h.clone(f),B=h.identity([]);return B[0]=k[0],B[1]=k[1],B[4]=k[2],B[5]=k[3],h.multiply(P,P,B),v||h.rotateZ(P,P,-E.angle),P}}return E.glCoordMatrix}function Be(f,i,d=0){const v=[f.x,f.y,d,1];d?h.transformMat4$1(v,v,i):ar(v,v,i);const E=v[3];return{point:[v[0]/E,v[1]/E,v[2]/E],signedDistanceFromCamera:E}}function ot(f,i){const d=[f[0],f[1],f[2],1];h.transformMat4$1(d,d,i);const v=d[3];return{point:[d[0]/v,d[1]/v,d[2]/v],signedDistanceFromCamera:v}}function Yt(f,i){return Math.min(.5+f/i*.5,1.5)}function bn(f,i){const d=f[0]/f[3],v=f[1]/f[3];return d>=-i[0]&&d<=i[0]&&v>=-i[1]&&v<=i[1]}function Dn(f,i,d,v,E,M,k,P,B,Z){const Q=d.transform,ae=v?f.textSizeData:f.iconSizeData,pe=h.evaluateSizeForZoom(ae,d.transform.zoom),Ce="globe"===Q.projection.name,Se=[256/d.width*2+1,256/d.height*2+1],xe=v?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;xe.clear();let We=null;Ce&&(We=v?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const Me=f.lineVertexArray,Le=v?f.text.placedSymbolArray:f.icon.placedSymbolArray,Ne=d.transform.width/d.transform.height;let et=!1;for(let je=0;je<Le.length;je++){const Ke=Le.get(je);if(Ke.writingMode!==h.WritingMode.vertical||et||0!==je&&Le.get(je-1).writingMode===h.WritingMode.horizontal||(et=!0),(Ke.hidden||Ke.writingMode===h.WritingMode.vertical)&&!et){sr(Ke.numGlyphs,xe);continue}et=!1;const _t=new h.pointGeometry(Ke.tileAnchorX,Ke.tileAnchorY),Vt=B?B(_t):[0,0,0],Xt=Q.projection.projectTilePoint(_t.x,_t.y,Z.canonical),jt=[Xt.x+Vt[0],Xt.y+Vt[1],Xt.z+Vt[2]],Nt=[...jt,1];if(h.transformMat4$1(Nt,Nt,i),!bn(Nt,Se)){sr(Ke.numGlyphs,xe);continue}const tt=Yt(d.transform.cameraToCenterDistance,Nt[3]),un=h.evaluateSizeForFeature(ae,pe,Ke),gn=k?un/tt:un*tt,qn=Be(new h.pointGeometry(jt[0],jt[1]),E,jt[2]);if(qn.signedDistanceFromCamera<=0){sr(Ke.numGlyphs,xe);continue}let en={};const Ci=k?null:B,Zn=_i(Ke,gn,!1,P,i,E,M,f.glyphOffsetArray,Me,xe,We,qn.point,_t,en,Ne,Ci,Q.projection,Z,k);et=Zn.useVertical,Ci&&Zn.needsFlipping&&(en={}),(Zn.notEnoughRoom||et||Zn.needsFlipping&&_i(Ke,gn,!0,P,i,E,M,f.glyphOffsetArray,Me,xe,We,qn.point,_t,en,Ne,Ci,Q.projection,Z,k).notEnoughRoom)&&sr(Ke.numGlyphs,xe)}v?(f.text.dynamicLayoutVertexBuffer.updateData(xe),We&&f.text.globeExtVertexBuffer.updateData(We)):(f.icon.dynamicLayoutVertexBuffer.updateData(xe),We&&f.icon.globeExtVertexBuffer.updateData(We))}function xn(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe){const We=P.glyphStartIndex+P.numGlyphs,Me=P.lineStartIndex,Le=P.lineStartIndex+P.lineLength,Ne=i.getoffsetX(P.glyphStartIndex),et=i.getoffsetX(We-1),je=Tr(f*Ne,d,v,E,M,k,P.segment,Me,Le,B,Z,Q,ae,pe,!0,Ce,Se,xe);if(!je)return null;const Ke=Tr(f*et,d,v,E,M,k,P.segment,Me,Le,B,Z,Q,ae,pe,!0,Ce,Se,xe);return Ke?{first:je,last:Ke}:null}function Ti(f,i,d,v){return f.writingMode===h.WritingMode.horizontal&&Math.abs(d.y-i.y)>Math.abs(d.x-i.x)*v?{useVertical:!0}:f.writingMode===h.WritingMode.vertical?i.y<d.y?{needsFlipping:!0}:null:0!==f.flipState&&function(E,M,k){const P=(M.x-E.x)*k;return 0===P||Math.abs((M.y-E.y)/P)>Ui}(i,d,v)?1===f.flipState?{needsFlipping:!0}:null:i.x>d.x?{needsFlipping:!0}:null}function _i(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe,We,Me,Le){const Ne=i/24,et=f.lineOffsetX*Ne,je=f.lineOffsetY*Ne;let Ke;if(f.numGlyphs>1){const _t=f.glyphStartIndex+f.numGlyphs,Vt=f.lineStartIndex,Xt=f.lineStartIndex+f.lineLength,jt=xn(Ne,P,et,je,d,ae,pe,f,B,M,Ce,xe,!1,We,Me,Le);if(!jt)return{notEnoughRoom:!0};const Nt=ot(jt.first.point,k).point,tt=ot(jt.last.point,k).point,un=new h.pointGeometry(Nt[0],Nt[1]),gn=new h.pointGeometry(tt[0],tt[1]);if(v&&!d){const qn=Ti(f,un,gn,Se);if(f.flipState=qn&&qn.needsFlipping?1:2,qn)return qn}Ke=[jt.first];for(let qn=f.glyphStartIndex+1;qn<_t-1;qn++)Ke.push(Tr(Ne*P.getoffsetX(qn),et,je,d,ae,pe,f.segment,Vt,Xt,B,M,Ce,xe,!1,!1,We,Me,Le));Ke.push(jt.last)}else{if(v&&!d){const Vt=Be(pe,E).point,Xt=f.lineStartIndex+f.segment+1,jt=new h.pointGeometry(B.getx(Xt),B.gety(Xt)),Nt=Be(jt,E),tt=Nt.signedDistanceFromCamera>0?Nt.point:uo(pe,jt,Vt,1,E,void 0,We,Me.canonical),un=Ti(f,new h.pointGeometry(Vt[0],Vt[1]),new h.pointGeometry(tt[0],tt[1]),Se);if(f.flipState=un&&un.needsFlipping?1:2,un)return un}const _t=Tr(Ne*P.getoffsetX(f.glyphStartIndex),et,je,d,ae,pe,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,B,M,Ce,xe,!1,!1,We,Me,Le);if(!_t)return{notEnoughRoom:!0};Ke=[_t]}if(Q)for(const _t of Ke)h.updateGlobeVertexNormal(Q,Z.length+0,_t.up[0],_t.up[1],_t.up[2]),h.updateGlobeVertexNormal(Q,Z.length+1,_t.up[0],_t.up[1],_t.up[2]),h.updateGlobeVertexNormal(Q,Z.length+2,_t.up[0],_t.up[1],_t.up[2]),h.updateGlobeVertexNormal(Q,Z.length+3,_t.up[0],_t.up[1],_t.up[2]),h.addDynamicAttributes(Z,_t.point[0],_t.point[1],_t.point[2],_t.angle);else for(const _t of Ke)h.addDynamicAttributes(Z,_t.point[0],_t.point[1],_t.point[2],_t.angle);return{}}function wr(f,i,d,v,E){const M=v.projectTilePoint(f.x,f.y,i);if(!E)return Be(M,d,M.z);const k=E(f);return Be(new h.pointGeometry(M.x+k[0],M.y+k[1]),d,M.z+k[2])}function uo(f,i,d,v,E,M,k,P){const B=wr(f.add(f.sub(i)._unit()),P,E,k,M).point,Z=h.sub([],d,B);return h.scaleAndAdd([],d,Z,v/h.length(Z))}function Tr(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe,We,Me){const Le=v?f-i:f+i;let Ne=Le>0?1:-1,et=0;v&&(Ne*=-1,et=Math.PI),Ne<0&&(et+=Math.PI);let je=Ne>0?P+k:P+k+1,Ke=E,_t=E,Vt=0,Xt=0;const jt=Math.abs(Le),Nt=[],tt=[];let un=M;const gn=()=>{const xi=je-Ne;return 0===Vt?M:new h.pointGeometry(Z.getx(xi),Z.gety(xi))},qn=()=>uo(gn(),un,_t,jt-Vt+1,Q,pe,xe,We.canonical);for(;Vt+Xt<=jt;){if(je+=Ne,je<P||je>=B)return null;if(_t=Ke,Nt.push(Ke),Ce&&tt.push(un||gn()),Ke=ae[je],void 0===Ke){un=new h.pointGeometry(Z.getx(je),Z.gety(je));const xi=wr(un,We.canonical,Q,xe,pe);Ke=xi.signedDistanceFromCamera>0?ae[je]=xi.point:qn()}else un=null;Vt+=Xt,Xt=h.distance(_t,Ke)}un=un||new h.pointGeometry(Z.getx(je),Z.gety(je));const en=gn();Se&&pe&&(ae[je]=Ke=void 0===ae[je]?Ke:qn(),Xt=h.distance(_t,Ke));const Ci=(jt-Vt)/Xt,Zn=un.sub(en).mult(Ci)._add(en),Xn=h.sub([],Ke,_t),Tn=h.scaleAndAdd([],_t,Xn,Ci);let jn=[0,0,1],Fi=Xn[0],Si=Xn[1];if(Me&&(jn=xe.upVector(We.canonical,Zn.x,Zn.y),0!==jn[0]||0!==jn[1]||1!==jn[2])){const xi=[1,0,0],$i=[0,1,0];xi[0]=jn[2],xi[1]=0,xi[2]=-jn[0],h.cross($i,jn,xi),h.normalize(xi,xi),h.normalize($i,$i),Fi=h.dot(Xn,xi),Si=h.dot(Xn,$i)}if(d){const xi=h.cross([],jn,Xn);h.normalize(xi,xi),h.scaleAndAdd(Tn,Tn,xi,d*Ne)}const cr=et+Math.atan2(Si,Fi);return Nt.push(Tn),Ce&&tt.push(Zn),{point:Tn,angle:cr,path:Nt,tilePath:tt,up:jn}}const go=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sr(f,i){for(let d=0;d<f;d++){const v=i.length;i.resize(v+4),i.float32.set(go,4*v)}}function ar(f,i,d){const v=i[0],E=i[1];return f[0]=d[0]*v+d[4]*E+d[12],f[1]=d[1]*v+d[5]*E+d[13],f[3]=d[3]*v+d[7]*E+d[15],f}const er=100;class Vr{constructor(i,d,v=new Hn(i.width+200,i.height+200,25),E=new Hn(i.width+200,i.height+200,25)){this.transform=i,this.grid=v,this.ignoredGrid=E,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+er,this.screenBottomBoundary=i.height+er,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=d}placeCollisionBox(i,d,v,E,M,k,P,B){let Z=v.projectedAnchorX,Q=v.projectedAnchorY,ae=v.projectedAnchorZ;const pe=v.elevation,Ce=v.tileID;if(pe&&Ce){const je=i.getProjection().upVector(Ce.canonical,v.tileAnchorX,v.tileAnchorY),Ke=i.getProjection().upVectorScale(Ce.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Z+=je[0]*pe*Ke,Q+=je[1]*pe*Ke,ae+=je[2]*pe*Ke}const Se=this.projectAndGetPerspectiveRatio(P,[Z,Q,ae],v.tileID,"globe"===i.projection.name||!!pe||this.transform.pitch>0,i.getProjection()),xe=k*Se.perspectiveRatio,We=(v.x1*d+E.x-v.padding)*xe+Se.point.x,Me=(v.y1*d+E.y-v.padding)*xe+Se.point.y,Le=(v.x2*d+E.x+v.padding)*xe+Se.point.x,Ne=(v.y2*d+E.y+v.padding)*xe+Se.point.y,et=Se.perspectiveRatio<=.55||Se.occluded;return!this.isInsideGrid(We,Me,Le,Ne)||!M&&this.grid.hitTest(We,Me,Le,Ne,B)||et?{box:[],offscreen:!1,occluded:Se.occluded}:{box:[We,Me,Le,Ne],offscreen:this.isOffscreen(We,Me,Le,Ne),occluded:!1}}placeCollisionCircles(i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe){const We=[],Me=this.transform.elevation,Le=Me?Me.getAtTileOffsetFunc(xe,this.transform.center.lat,this.transform.worldSize,i.getProjection()):en=>[0,0,0],Ne=new h.pointGeometry(v.tileAnchorX,v.tileAnchorY),et=i.getProjection().projectTilePoint(v.tileAnchorX,v.tileAnchorY,xe.canonical),je=Le(Ne),Ke=[et.x+je[0],et.y+je[1],et.z+je[2]],_t="globe"===i.projection.name,Vt=this.projectAndGetPerspectiveRatio(P,[Ke[0],Ke[1],Ke[2]],xe,_t||!!Me||this.transform.pitch>0,i.getProjection()),{perspectiveRatio:Xt}=Vt,jt=(ae?k/Xt:k*Xt)/h.ONE_EM,Nt=Be(new h.pointGeometry(Ke[0],Ke[1]),B,Ke[2]).point,tt=Vt.signedDistanceFromCamera>0?xn(jt,M,v.lineOffsetX*jt,v.lineOffsetY*jt,!1,Nt,Ne,v,E,B,{},Me&&!ae?Le:null,ae&&!!Me,i.getProjection(),xe,ae):null;let un=!1,gn=!1,qn=!0;if(tt&&!Vt.occluded){const en=.5*Ce*Xt+Se,Ci=new h.pointGeometry(-100,-100),Zn=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Xn=new ya,Tn=tt.first,jn=tt.last;let Fi=[];for(let xi=Tn.path.length-1;xi>=1;xi--)Fi.push(Tn.path[xi]);for(let xi=1;xi<jn.path.length;xi++)Fi.push(jn.path[xi]);const Si=2.5*en;if(Z){const xi=Fi.map(Me&&!_t?($i,Ur)=>{const Qr=Le(Ur<Tn.path.length-1?Tn.tilePath[Tn.path.length-1-Ur]:jn.tilePath[Ur-Tn.path.length+2]);return $i[2]=Qr[2],ot($i,Z)}:$i=>ot($i,Z));Fi=xi.some($i=>$i.signedDistanceFromCamera<=0)?[]:xi.map($i=>$i.point)}let cr=[];if(Fi.length>0){const xi=Fi.map(Jr=>new h.pointGeometry(Jr[0],Jr[1]));let $i=1/0,Ur=-1/0,Qr=1/0,Qo=-1/0;for(let Jr=0;Jr<xi.length;Jr++)$i=Math.min($i,xi[Jr].x),Qr=Math.min(Qr,xi[Jr].y),Ur=Math.max(Ur,xi[Jr].x),Qo=Math.max(Qo,xi[Jr].y);cr=$i>=Ci.x&&Ur<=Zn.x&&Qr>=Ci.y&&Qo<=Zn.y?[xi]:Ur<Ci.x||$i>Zn.x||Qo<Ci.y||Qr>Zn.y?[]:h.clipLine([xi],Ci.x,Ci.y,Zn.x,Zn.y)}for(const xi of cr){Xn.reset(xi,.25*en);let $i=0;$i=Xn.length<=.5*en?1:Math.ceil(Xn.paddedLength/Si)+1;for(let Ur=0;Ur<$i;Ur++){const Qr=Ur/Math.max($i-1,1),Qo=Xn.lerp(Qr),Jr=Qo.x+er,Ua=Qo.y+er;We.push(Jr,Ua,en,0);const jr=Jr-en,kl=Ua-en,eo=Jr+en,ko=Ua+en;if(qn=qn&&this.isOffscreen(jr,kl,eo,ko),gn=gn||this.isInsideGrid(jr,kl,eo,ko),!d&&this.grid.hitTestCircle(Jr,Ua,en,pe)&&(un=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:un,occluded:!1}}}}return{circles:!Q&&un||!gn?[]:We,offscreen:qn,collisionDetected:un,occluded:Vt.occluded}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let v=1/0,E=1/0,M=-1/0,k=-1/0;for(const Q of i){const ae=new h.pointGeometry(Q.x+er,Q.y+er);v=Math.min(v,ae.x),E=Math.min(E,ae.y),M=Math.max(M,ae.x),k=Math.max(k,ae.y),d.push(ae)}const P=this.grid.query(v,E,M,k).concat(this.ignoredGrid.query(v,E,M,k)),B={},Z={};for(const Q of P){const ae=Q.key;if(void 0===B[ae.bucketInstanceId]&&(B[ae.bucketInstanceId]={}),B[ae.bucketInstanceId][ae.featureIndex])continue;const pe=[new h.pointGeometry(Q.x1,Q.y1),new h.pointGeometry(Q.x2,Q.y1),new h.pointGeometry(Q.x2,Q.y2),new h.pointGeometry(Q.x1,Q.y2)];h.polygonIntersectsPolygon(d,pe)&&(B[ae.bucketInstanceId][ae.featureIndex]=!0,void 0===Z[ae.bucketInstanceId]&&(Z[ae.bucketInstanceId]=[]),Z[ae.bucketInstanceId].push(ae.featureIndex))}return Z}insertCollisionBox(i,d,v,E,M){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:E,collisionGroupID:M},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,d,v,E,M){const k=d?this.ignoredGrid:this.grid,P={bucketInstanceId:v,featureIndex:E,collisionGroupID:M};for(let B=0;B<i.length;B+=4)k.insertCircle(P,i[B],i[B+1],i[B+2])}projectAndGetPerspectiveRatio(i,d,v,E,M){const k=[d[0],d[1],d[2],1];let P=!1;return d[2]||this.transform.pitch>0?(h.transformMat4$1(k,k,i),this.fogState&&v&&"globe"!==M.name&&(P=function(Z,Q,ae,pe,Ce,Se){const xe=Se.calculateFogTileMatrix(Ce),We=[Q,ae,pe];return h.transformMat4(We,We,xe),on(Z,We,Se.pitch,Se._fov)}(this.fogState,d[0],d[1],d[2],v.toUnwrapped(),this.transform)>.9)):ar(k,k,i),{point:new h.pointGeometry((k[0]/k[3]+1)/2*this.transform.width+er,(-k[1]/k[3]+1)/2*this.transform.height+er),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/k[3]*.5,1.5),signedDistanceFromCamera:k[3],occluded:E&&k[2]>k[3]||P}}isOffscreen(i,d,v,E){return v<er||i>=this.screenRightBoundary||E<er||d>this.screenBottomBoundary}isInsideGrid(i,d,v,E){return v>=0&&i<this.gridRightBoundary&&E>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const i=h.identity([]);return h.translate(i,i,[-100,-100,0]),i}}function Dr(f,i,d){const v=i.createTileMatrix(f,f.worldSize,d.toUnwrapped());return h.multiply(new Float32Array(16),f.projMatrix,v)}function Co(f,i,d){if(i.projection.name===d.projection.name)return f.projMatrix;const v=d.clone();return v.setProjection(i.projection),Dr(v,i.getProjection(),f)}function dr(f,i,d){return i.name===d.projection.name?f.projMatrix:Dr(d,i,f)}class Rs{constructor(i,d,v,E){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?d:-d))):E&&v?1:0,this.placed=v}isHidden(){return 0===this.opacity&&!this.placed}}class Or{constructor(i,d,v,E,M,k=!1){this.text=new Rs(i?i.text:null,d,v,M),this.icon=new Rs(i?i.icon:null,d,E,M),this.clipped=k}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yo{constructor(i,d,v,E=!1){this.text=i,this.icon=d,this.skipFade=v,this.clipped=E}}class Ws{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class Xs{constructor(i,d,v,E,M){this.bucketInstanceId=i,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=E,this.tileID=M}}class Go{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const d=++this.maxGroupID;this.collisionGroups[i]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[i]}}function $l(f,i,d,v,E){const{horizontalAlign:M,verticalAlign:k}=h.getAnchorAlignment(f),P=-(M-.5)*i,B=-(k-.5)*d,Z=h.evaluateVariableOffset(f,v);return new h.pointGeometry(P+Z[0]*E,B+Z[1]*E)}function _l(f,i,d,v,E){const M=new h.pointGeometry(f,i);return d&&M._rotate(v?E:-E),M}class La{constructor(i,d,v,E,M){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new Vr(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Go(v),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,d,v,E){const M=v.getBucket(d),k=v.latestFeatureIndex;if(!M||!k||d.id!==M.layerIds[0])return;const P=M.layers[0].layout,B=v.collisionBoxArray,Z=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Q=v.tileSize/h.EXTENT,ae=v.tileID.toUnwrapped();this.transform.setProjection(M.projection);const pe=(Ce=v.tileID,Se=M.getProjection(),xe=this.transform,Se.name===this.projection?xe.calculateProjMatrix(Ce.toUnwrapped()):Dr(xe,Se,Ce));var Ce,Se,xe;const We="map"===P.get("text-pitch-alignment"),Me="map"===P.get("text-rotation-alignment");d.compileFilter();const Le=d.dynamicFilter(),Ne=d.dynamicFilterNeedsFeature(),et=this.transform.calculatePixelsToTileUnitsMatrix(v),je=Xo(pe,v.tileID.canonical,We,Me,this.transform,M.getProjection(),et);let Ke=null;if(We){const Xt=Oe(pe,v.tileID.canonical,We,Me,this.transform,M.getProjection(),et);Ke=h.multiply([],this.transform.labelPlaneMatrix,Xt)}let _t=null;Le&&v.latestFeatureIndex&&(_t={unwrappedTileID:ae,dynamicFilter:Le,dynamicFilterNeedsFeature:Ne,featureIndex:v.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new Xs(M.bucketInstanceId,k,M.sourceLayerIndex,M.index,v.tileID);const Vt={bucket:M,layout:P,posMatrix:pe,textLabelPlaneMatrix:je,labelToScreenMatrix:Ke,clippingData:_t,scale:Z,textPixelRatio:Q,holdingForFade:v.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:h.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(E)for(const Xt of M.sortKeyRanges){const{sortKey:jt,symbolInstanceStart:Nt,symbolInstanceEnd:tt}=Xt;i.push({sortKey:jt,symbolInstanceStart:Nt,symbolInstanceEnd:tt,parameters:Vt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:Vt})}attemptAnchorPlacement(i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe,We,Me,Le){const Ne=[pe.textOffset0,pe.textOffset1],et=$l(i,v,E,Ne,M),je=this.collisionIndex.placeCollisionBox(Se,M,d,_l(et.x,et.y,k,P,this.transform.angle),ae,B,Z,Q.predicate);if((!We||0!==this.collisionIndex.placeCollisionBox(Se,Se.getSymbolInstanceIconSize(Le,this.transform.zoom,Ce),We,_l(et.x,et.y,k,P,this.transform.angle),ae,B,Z,Q.predicate).box.length)&&je.box.length>0){let Ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[pe.crossTileID].anchor),this.variableOffsets[pe.crossTileID]={textOffset:Ne,width:v,height:E,anchor:i,textScale:M,prevAnchor:Ke},this.markUsedJustification(Se,i,pe,xe),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,xe,pe),this.placedOrientations[pe.crossTileID]=xe),{shift:et,placedGlyphBoxes:je}}}placeLayerBucketPart(i,d,v,E){const{bucket:M,layout:k,posMatrix:P,textLabelPlaneMatrix:B,labelToScreenMatrix:Z,clippingData:Q,textPixelRatio:ae,holdingForFade:pe,collisionBoxArray:Ce,partiallyEvaluatedTextSize:Se,partiallyEvaluatedIconSize:xe,collisionGroup:We}=i.parameters,Me=k.get("text-optional"),Le=k.get("icon-optional"),Ne=k.get("text-allow-overlap"),et=k.get("icon-allow-overlap"),je="map"===k.get("text-rotation-alignment"),Ke="map"===k.get("text-pitch-alignment"),_t="none"!==k.get("icon-text-fit"),Vt="viewport-y"===k.get("symbol-z-order");this.transform.setProjection(M.projection);let Xt=Ne&&(et||!M.hasIconData()||Le),jt=et&&(Ne||!M.hasTextData()||Me);!M.collisionArrays&&Ce&&M.deserializeCollisionBoxes(Ce),v&&E&&M.updateCollisionDebugBuffers(this.transform.zoom,Ce);const Nt=(tt,un,gn)=>{if(Q){const eo={zoom:this.transform.zoom,pitch:this.transform.pitch};let ko=null;if(Q.dynamicFilterNeedsFeature){const Br=this.retainedQueryData[M.bucketInstanceId];ko=Q.featureIndex.loadFeature({featureIndex:tt.featureIndex,bucketIndex:Br.bucketIndex,sourceLayerIndex:Br.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Q.dynamicFilter)(eo,ko,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new h.pointGeometry(tt.tileAnchorX,tt.tileAnchorY),this.transform.calculateDistanceTileData(Q.unwrappedTileID)))return this.placements[tt.crossTileID]=new Yo(!1,!1,!1,!0),void(d[tt.crossTileID]=!0)}if(d[tt.crossTileID])return;if(pe)return void(this.placements[tt.crossTileID]=new Yo(!1,!1,!1));let qn=!1,en=!1,Ci=!0,Zn=!1,Xn=!1,Tn=null,jn={box:null,offscreen:null,occluded:null},Fi={box:null,offscreen:null,occluded:null},Si=null,cr=null,xi=null,$i=0,Ur=0,Qr=0;gn.textFeatureIndex?$i=gn.textFeatureIndex:tt.useRuntimeCollisionCircles&&($i=tt.featureIndex),gn.verticalTextFeatureIndex&&(Ur=gn.verticalTextFeatureIndex);const Qo=eo=>{eo.tileID=this.retainedQueryData[M.bucketInstanceId].tileID,(this.transform.elevation||eo.elevation)&&(eo.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[M.bucketInstanceId].tileID,eo.tileAnchorX,eo.tileAnchorY):0)},Jr=gn.textBox;if(Jr){Qo(Jr);const eo=Br=>{let Mr=h.WritingMode.horizontal;if(M.allowVerticalPlacement&&!Br&&this.prevPlacement){const Jo=this.prevPlacement.placedOrientations[tt.crossTileID];Jo&&(this.placedOrientations[tt.crossTileID]=Jo,Mr=Jo,this.markUsedOrientation(M,Mr,tt))}return Mr},ko=(Br,Mr)=>{if(M.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&gn.verticalTextBox){for(const Jo of M.writingModes)if(Jo===h.WritingMode.vertical?(jn=Mr(),Fi=jn):jn=Br(),jn&&jn.box&&jn.box.length)break}else jn=Br()};if(k.get("text-variable-anchor")){let Br=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[tt.crossTileID]){const kr=this.prevPlacement.variableOffsets[tt.crossTileID];Br.indexOf(kr.anchor)>0&&(Br=Br.filter(gs=>gs!==kr.anchor),Br.unshift(kr.anchor))}const Mr=(kr,gs,Gu)=>{const da=M.getSymbolInstanceTextSize(Se,tt,this.transform.zoom,un),$u=(kr.x2-kr.x1)*da+2*kr.padding,fd=(kr.y2-kr.y1)*da+2*kr.padding,$c=_t&&!et?gs:null;$c&&Qo($c);let as={box:[],offscreen:!1,occluded:!1};const Ol=Ne?2*Br.length:Br.length;for(let Rl=0;Rl<Ol;++Rl){const po=this.attemptAnchorPlacement(Br[Rl%Br.length],kr,$u,fd,da,je,Ke,ae,P,We,Rl>=Br.length,tt,un,M,Gu,$c,Se,xe);if(po&&(as=po.placedGlyphBoxes,as&&as.box&&as.box.length)){qn=!0,Tn=po.shift;break}}return as};ko(()=>Mr(Jr,gn.iconBox,h.WritingMode.horizontal),()=>{const kr=gn.verticalTextBox;return kr&&Qo(kr),M.allowVerticalPlacement&&!(jn&&jn.box&&jn.box.length)&&tt.numVerticalGlyphVertices>0&&kr?Mr(kr,gn.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),jn&&(qn=jn.box,Ci=jn.offscreen,Zn=jn.occluded);const Jo=eo(jn&&jn.box);if(!qn&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[tt.crossTileID];kr&&(this.variableOffsets[tt.crossTileID]=kr,this.markUsedJustification(M,kr.anchor,tt,Jo))}}else{const Br=(Mr,Jo)=>{const kr=M.getSymbolInstanceTextSize(Se,tt,this.transform.zoom,un),gs=this.collisionIndex.placeCollisionBox(M,kr,Mr,new h.pointGeometry(0,0),Ne,ae,P,We.predicate);return gs&&gs.box&&gs.box.length&&(this.markUsedOrientation(M,Jo,tt),this.placedOrientations[tt.crossTileID]=Jo),gs};ko(()=>Br(Jr,h.WritingMode.horizontal),()=>{const Mr=gn.verticalTextBox;return M.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&Mr?(Qo(Mr),Br(Mr,h.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),eo(jn&&jn.box&&jn.box.length)}}if(Si=jn,qn=Si&&Si.box&&Si.box.length>0,Ci=Si&&Si.offscreen,Zn=Si&&Si.occluded,tt.useRuntimeCollisionCircles){const eo=M.text.placedSymbolArray.get(tt.centerJustifiedTextSymbolIndex>=0?tt.centerJustifiedTextSymbolIndex:tt.verticalPlacedTextSymbolIndex),ko=h.evaluateSizeForFeature(M.textSizeData,Se,eo),Br=k.get("text-padding");cr=this.collisionIndex.placeCollisionCircles(M,Ne,eo,M.lineVertexArray,M.glyphOffsetArray,ko,P,B,Z,v,Ke,We.predicate,tt.collisionCircleDiameter*ko/h.ONE_EM,Br,this.retainedQueryData[M.bucketInstanceId].tileID),qn=Ne||cr.circles.length>0&&!cr.collisionDetected,Ci=Ci&&cr.offscreen,Zn=cr.occluded}if(gn.iconFeatureIndex&&(Qr=gn.iconFeatureIndex),gn.iconBox){const eo=ko=>{Qo(ko);const Br=_t&&Tn?_l(Tn.x,Tn.y,je,Ke,this.transform.angle):new h.pointGeometry(0,0),Mr=M.getSymbolInstanceIconSize(xe,this.transform.zoom,un);return this.collisionIndex.placeCollisionBox(M,Mr,ko,Br,et,ae,P,We.predicate)};Fi&&Fi.box&&Fi.box.length&&gn.verticalIconBox?(xi=eo(gn.verticalIconBox),en=xi.box.length>0):(xi=eo(gn.iconBox),en=xi.box.length>0),Ci=Ci&&xi.offscreen,Xn=xi.occluded}const Ua=Me||0===tt.numHorizontalGlyphVertices&&0===tt.numVerticalGlyphVertices,jr=Le||0===tt.numIconVertices;if(Ua||jr?jr?Ua||(en=en&&qn):qn=en&&qn:en=qn=en&&qn,qn&&Si&&Si.box&&this.collisionIndex.insertCollisionBox(Si.box,k.get("text-ignore-placement"),M.bucketInstanceId,Fi&&Fi.box&&Ur?Ur:$i,We.ID),en&&xi&&this.collisionIndex.insertCollisionBox(xi.box,k.get("icon-ignore-placement"),M.bucketInstanceId,Qr,We.ID),cr&&(qn&&this.collisionIndex.insertCollisionCircles(cr.circles,k.get("text-ignore-placement"),M.bucketInstanceId,$i,We.ID),v)){const eo=M.bucketInstanceId;let ko=this.collisionCircleArrays[eo];void 0===ko&&(ko=this.collisionCircleArrays[eo]=new Ws);for(let Br=0;Br<cr.circles.length;Br+=4)ko.circles.push(cr.circles[Br+0]),ko.circles.push(cr.circles[Br+1]),ko.circles.push(cr.circles[Br+2]),ko.circles.push(cr.collisionDetected?1:0)}const kl="globe"!==M.projection.name;Xt=Xt&&(kl||!Zn),jt=jt&&(kl||!Xn),this.placements[tt.crossTileID]=new Yo(qn||Xt,en||jt,Ci||M.justReloaded),d[tt.crossTileID]=!0};if(Vt){const tt=M.getSortedSymbolIndexes(this.transform.angle);for(let un=tt.length-1;un>=0;--un){const gn=tt[un];Nt(M.symbolInstances.get(gn),gn,M.collisionArrays[gn])}}else for(let tt=i.symbolInstanceStart;tt<i.symbolInstanceEnd;tt++)Nt(M.symbolInstances.get(tt),tt,M.collisionArrays[tt]);if(v&&M.bucketInstanceId in this.collisionCircleArrays){const tt=this.collisionCircleArrays[M.bucketInstanceId];h.invert(tt.invProjMatrix,P),tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(i,d,v,E){let M;M=E===h.WritingMode.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(d)];const k=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const P of k)P>=0&&(i.text.placedSymbolArray.get(P).crossTileID=M>=0&&P!==M?0:v.crossTileID)}markUsedOrientation(i,d,v){const E=d===h.WritingMode.horizontal||d===h.WritingMode.horizontalOnly?d:0,M=d===h.WritingMode.vertical?d:0,k=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const P of k)i.text.placedSymbolArray.get(P).placedOrientation=E;v.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const E=d?d.symbolFadeChange(i):1,M=d?d.opacities:{},k=d?d.variableOffsets:{},P=d?d.placedOrientations:{};for(const B in this.placements){const Z=this.placements[B],Q=M[B];Q?(this.opacities[B]=new Or(Q,E,Z.text,Z.icon,null,Z.clipped),v=v||Z.text!==Q.text.placed||Z.icon!==Q.icon.placed):(this.opacities[B]=new Or(null,E,Z.text,Z.icon,Z.skipFade,Z.clipped),v=v||Z.text||Z.icon)}for(const B in M){const Z=M[B];if(!this.opacities[B]){const Q=new Or(Z,E,!1,!1);Q.isHidden()||(this.opacities[B]=Q,v=v||Z.text.placed||Z.icon.placed)}}for(const B in k)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=k[B]);for(const B in P)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=P[B]);v?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:i)}updateLayerOpacities(i,d){const v={};for(const E of d){const M=E.getBucket(i);M&&E.latestFeatureIndex&&i.id===M.layerIds[0]&&this.updateBucketOpacities(M,v,E.collisionBoxArray)}}updateBucketOpacities(i,d,v){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const E=i.layers[0].layout,M=!!i.layers[0].dynamicFilter(),k=new Or(null,0,!1,!1,!0),P=E.get("text-allow-overlap"),B=E.get("icon-allow-overlap"),Z=E.get("text-variable-anchor"),Q="map"===E.get("text-rotation-alignment"),ae="map"===E.get("text-pitch-alignment"),pe="none"!==E.get("icon-text-fit"),Ce=new Or(null,0,P&&(B||!i.hasIconData()||E.get("icon-optional")),B&&(P||!i.hasTextData()||E.get("text-optional")),!0);!i.collisionArrays&&v&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(v);const Se=(We,Me,Le)=>{for(let Ne=0;Ne<Me/4;Ne++)We.opacityVertexArray.emplaceBack(Le)};let xe=0;for(let We=0;We<i.symbolInstances.length;We++){const Me=i.symbolInstances.get(We),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Ne,crossTileID:et}=Me;let je=this.opacities[et];d[et]?je=k:je||(je=Ce,this.opacities[et]=je),d[et]=!0;const Ke=Le>0||Ne>0,_t=Me.numIconVertices>0,Vt=this.placedOrientations[Me.crossTileID],Xt=Vt===h.WritingMode.vertical,jt=Vt===h.WritingMode.horizontal||Vt===h.WritingMode.horizontalOnly;if(!Ke&&!_t||je.isHidden()||xe++,Ke){const Nt=va(je.text);Se(i.text,Le,Xt?Cs:Nt),Se(i.text,Ne,jt?Cs:Nt);const tt=je.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(qn=>{qn>=0&&(i.text.placedSymbolArray.get(qn).hidden=tt||Xt?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=tt||jt?1:0);const un=this.variableOffsets[Me.crossTileID];un&&this.markUsedJustification(i,un.anchor,Me,Vt);const gn=this.placedOrientations[Me.crossTileID];gn&&(this.markUsedJustification(i,"left",Me,gn),this.markUsedOrientation(i,gn,Me))}if(_t){const Nt=va(je.icon);Me.placedIconSymbolIndex>=0&&(Se(i.icon,Me.numIconVertices,Xt?Cs:Nt),i.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=je.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(Se(i.icon,Me.numVerticalIconVertices,jt?Cs:Nt),i.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Nt=i.collisionArrays[We];if(Nt){let tt=new h.pointGeometry(0,0),un=!0;if(Nt.textBox||Nt.verticalTextBox){if(Z){const qn=this.variableOffsets[et];qn?(tt=$l(qn.anchor,qn.width,qn.height,qn.textOffset,qn.textScale),Q&&tt._rotate(ae?this.transform.angle:-this.transform.angle)):un=!1}M&&(un=!je.clipped),Nt.textBox&&qa(i.textCollisionBox.collisionVertexArray,je.text.placed,!un||Xt,tt.x,tt.y),Nt.verticalTextBox&&qa(i.textCollisionBox.collisionVertexArray,je.text.placed,!un||jt,tt.x,tt.y)}const gn=un&&!(jt||!Nt.verticalIconBox);Nt.iconBox&&qa(i.iconCollisionBox.collisionVertexArray,je.icon.placed,gn,pe?tt.x:0,pe?tt.y:0),Nt.verticalIconBox&&qa(i.iconCollisionBox.collisionVertexArray,je.icon.placed,!gn,pe?tt.x:0,pe?tt.y:0)}}}if(i.fullyClipped=0===xe,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const We=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=We.invProjMatrix,i.placementViewportMatrix=We.viewportMatrix,i.collisionCircleArray=We.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>i}setStale(){this.stale=!0}}function qa(f,i,d,v,E){f.emplaceBack(i?1:0,d?1:0,v||0,E||0),f.emplaceBack(i?1:0,d?1:0,v||0,E||0),f.emplaceBack(i?1:0,d?1:0,v||0,E||0),f.emplaceBack(i?1:0,d?1:0,v||0,E||0)}const uc=Math.pow(2,25),Ru=Math.pow(2,24),ou=Math.pow(2,17),yl=Math.pow(2,16),Ps=Math.pow(2,9),Pu=Math.pow(2,8),Ls=Math.pow(2,1);function va(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;const i=f.placed?1:0,d=Math.floor(127*f.opacity);return d*uc+i*Ru+d*ou+i*yl+d*Ps+i*Pu+d*Ls+i}const Cs=0;class Ks{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,d,v,E,M){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(d.getBucketParts(k,E,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((P,B)=>P.sortKey-B.sortKey));this._currentPartIndex<k.length;){const P=k[this._currentPartIndex];if(d.placeLayerBucketPart(P,this._seenCrossTileIDs,v,0===P.symbolInstanceStart),this._currentPartIndex++,M())return!0}return!1}}class Hl{constructor(i,d,v,E,M,k,P,B){this.placement=new La(i,M,k,P,B),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(i,d,v){const E=h.exported.now(),M=()=>{const k=h.exported.now()-E;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=d[i[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if("symbol"===k.type&&(!k.minzoom||k.minzoom<=P)&&(!k.maxzoom||k.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Ks(k)),this._inProgressLayer.continuePlacement(v[k.source],this.placement,this._showCollisionBoxes,k,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ba=512/h.EXTENT/2;class Ko{constructor(i,d,v){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=v;for(let E=0;E<d.length;E++){const M=d.get(E),k=M.key;this.indexedSymbolInstances[k]||(this.indexedSymbolInstances[k]=[]),this.indexedSymbolInstances[k].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,i)})}}getScaledCoordinates(i,d){const v=ba/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*h.EXTENT+i.tileAnchorX)*v),y:Math.floor((d.canonical.y*h.EXTENT+i.tileAnchorY)*v)}}findMatches(i,d,v){const E=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let M=0;M<i.length;M++){const k=i.get(M);if(k.crossTileID)continue;const P=this.indexedSymbolInstances[k.key];if(!P)continue;const B=this.getScaledCoordinates(k,d);for(const Z of P)if(Math.abs(Z.coord.x-B.x)<=E&&Math.abs(Z.coord.y-B.y)<=E&&!v[Z.crossTileID]){v[Z.crossTileID]=!0,k.crossTileID=Z.crossTileID;break}}}}class ta{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const d=Math.round((i-this.lng)/360);if(0!==d)for(const v in this.indexes){const E=this.indexes[v],M={};for(const k in E){const P=E[k];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+d),M[P.tileID.key]=P}this.indexes[v]=M}this.lng=i}addBucket(i,d,v){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let M=0;M<d.symbolInstances.length;M++)d.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const E=this.usedCrossTileIDs[i.overscaledZ];for(const M in this.indexes){const k=this.indexes[M];if(Number(M)>i.overscaledZ)for(const P in k){const B=k[P];B.tileID.isChildOf(i)&&B.findMatches(d.symbolInstances,i,E)}else{const P=k[i.scaledTo(Number(M)).key];P&&P.findMatches(d.symbolInstances,i,E)}}for(let M=0;M<d.symbolInstances.length;M++){const k=d.symbolInstances.get(M);k.crossTileID||(k.crossTileID=v.generate(),E[k.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ko(i,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(i,d){for(const v in d.indexedSymbolInstances)for(const E of d.indexedSymbolInstances[v])delete this.usedCrossTileIDs[i][E.crossTileID]}removeStaleBuckets(i){let d=!1;for(const v in this.indexes){const E=this.indexes[v];for(const M in E)i[E[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,E[M]),delete E[M],d=!0)}return d}}class rs{constructor(){this.layerIndexes={},this.crossTileIDs=new ta,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,d,v,E){let M=this.layerIndexes[i.id];void 0===M&&(M=this.layerIndexes[i.id]=new Wl);let k=!1;const P={};"globe"!==E.name&&M.handleWrapJump(v);for(const B of d){const Z=B.getBucket(i);Z&&i.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(B.tileID,Z,this.crossTileIDs)&&(k=!0),P[Z.bucketInstanceId]=!0)}return M.removeStaleBuckets(P)&&(k=!0),k}pruneUnusedLayers(i){const d={};i.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const xa=(f,i)=>h.emitValidationErrors(f,i&&i.filter(d=>"source.canvas"!==d.identifier)),Zs=h.pick(xt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),wa=h.pick(xt,["setCenter","setZoom","setBearing","setPitch"]),dc={version:8,layers:[],sources:{}},Ya={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ds extends h.Evented{constructor(i,d={}){super(),this.map=i,this.dispatcher=new Nn(hi(),this),this.imageManager=new sn,this.imageManager.setEventedParent(this),this.glyphManager=new h.GlyphManager(i._requestManager,d.localFontFamily?h.LocalGlyphMode.all:d.localIdeographFontFamily?h.LocalGlyphMode.ideographs:h.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.lineAtlas=new h.LineAtlas(256,512),this.crossTileSymbolIndex=new rs,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const v=this;this._rtlTextPluginCallback=ds.registerForPluginStateChange(E=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(M,k)=>{if(h.triggerPluginCompletionEvent(M),k&&k.every(P=>P))for(const P in v._sourceCaches){const B=v._sourceCaches[P],Z=B.getSource().type;"vector"!==Z&&"geojson"!==Z||B.reload()}})}),this.on("data",E=>{if("source"!==E.dataType||"metadata"!==E.sourceDataType)return;const M=this.getSource(E.sourceId);if(M&&M.vectorLayerIds)for(const k in this._layers){const P=this._layers[k];P.source===M.id&&this._validateLayer(P)}})}loadURL(i,d={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const v="boolean"==typeof d.validate?d.validate:!h.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,d.accessToken);const E=this.map._requestManager.transformRequest(i,h.ResourceType.Style);this._request=h.getJSON(E,(M,k)=>{this._request=null,M?this.fire(new h.ErrorEvent(M)):k&&this._load(k,v)})}loadJSON(i,d={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(i,!1!==d.validate)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(dc,!1)}_updateLayerCount(i,d){const v=d?1:-1;i.is3D()&&(this._num3DLayers+=v),"circle"===i.type&&(this._numCircleLayers+=v),"symbol"===i.type&&(this._numSymbolLayers+=v)}_load(i,d){if(d&&xa(this,h.validateStyle(i)))return;this._loaded=!0,this.stylesheet=h.clone$1(i),this._updateMapProjection();for(const E in i.sources)this.addSource(E,i.sources[E],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const v=Ri(this.stylesheet.layers);this._order=v.map(E=>E.id),this._layers={},this._serializedLayers={};for(let E of v)E=h.createStyleLayer(E),E.setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=E,this._serializedLayers[E.id]=E.serialize(),this._updateLayerCount(E,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Wt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(i){this._spriteRequest=function(d,v,E){let M,k,P;const B=h.exported.devicePixelRatio>1?"@2x":"";let Z=h.getJSON(v.transformRequest(v.normalizeSpriteURL(d,B,".json"),h.ResourceType.SpriteJSON),(pe,Ce)=>{Z=null,P||(P=pe,M=Ce,ae())}),Q=h.getImage(v.transformRequest(v.normalizeSpriteURL(d,B,".png"),h.ResourceType.SpriteImage),(pe,Ce)=>{Q=null,P||(P=pe,k=Ce,ae())});function ae(){if(P)E(P);else if(M&&k){const pe=h.exported.getImageData(k),Ce={};for(const Se in M){const{width:xe,height:We,x:Me,y:Le,sdf:Ne,pixelRatio:et,stretchX:je,stretchY:Ke,content:_t}=M[Se],Vt=new h.RGBAImage({width:xe,height:We});h.RGBAImage.copy(pe,Vt,{x:Me,y:Le},{x:0,y:0},{width:xe,height:We}),Ce[Se]={data:Vt,pixelRatio:et,sdf:Ne,stretchX:je,stretchY:Ke,content:_t}}E(null,Ce)}}return{cancel(){Z&&(Z.cancel(),Z=null),Q&&(Q.cancel(),Q=null)}}}(i,this.map._requestManager,(d,v)=>{if(this._spriteRequest=null,d)this.fire(new h.ErrorEvent(d));else if(v)for(const E in v)this.imageManager.addImage(E,v[E]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(i){const d=this.getSource(i.source);if(!d)return;const v=i.sourceLayer;v&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(v))&&this.fire(new h.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${d.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const d=[];for(const v of i){const E=this._layers[v];"custom"!==E.type&&d.push(E.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&Ya[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const d=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(E.length||M.length)&&this._updateWorkerLayers(E,M);for(const k in this._updatedSources){const P=this._updatedSources[k];"reload"===P?this._reloadSource(k):"clear"===P&&this._clearSource(k)}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const v={};for(const E in this._sourceCaches){const M=this._sourceCaches[E];v[E]=M.used,M.used=!1}for(const E of this._order){const M=this._layers[E];if(M.recalculate(i,this._availableImages),!M.isHidden(i.zoom)){const P=this._getLayerSourceCache(M);P&&(P.used=!0)}const k=this.map.painter;if(k){const P=M.getProgramIds();if(!P)continue;const B=M.getProgramConfiguration(i.zoom);for(const Z of P)k.useProgram(Z,B)}}for(const E in v){const M=this._sourceCaches[E];v[E]!==M.used&&M.getSource().fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),xa(this,h.validateStyle(i)))return!1;(i=h.clone$1(i)).layers=Ri(i.layers);const d=function(E,M){if(!E)return[{command:xt.setStyle,args:[M]}];let k=[];try{if(!ge(E.version,M.version))return[{command:xt.setStyle,args:[M]}];ge(E.center,M.center)||k.push({command:xt.setCenter,args:[M.center]}),ge(E.zoom,M.zoom)||k.push({command:xt.setZoom,args:[M.zoom]}),ge(E.bearing,M.bearing)||k.push({command:xt.setBearing,args:[M.bearing]}),ge(E.pitch,M.pitch)||k.push({command:xt.setPitch,args:[M.pitch]}),ge(E.sprite,M.sprite)||k.push({command:xt.setSprite,args:[M.sprite]}),ge(E.glyphs,M.glyphs)||k.push({command:xt.setGlyphs,args:[M.glyphs]}),ge(E.transition,M.transition)||k.push({command:xt.setTransition,args:[M.transition]}),ge(E.light,M.light)||k.push({command:xt.setLight,args:[M.light]}),ge(E.fog,M.fog)||k.push({command:xt.setFog,args:[M.fog]}),ge(E.projection,M.projection)||k.push({command:xt.setProjection,args:[M.projection]});const P={},B=[];!function(ae,pe,Ce,Se){let xe;for(xe in pe=pe||{},ae=ae||{})ae.hasOwnProperty(xe)&&(pe.hasOwnProperty(xe)||or(xe,Ce,Se));for(xe in pe)pe.hasOwnProperty(xe)&&(ae.hasOwnProperty(xe)?ge(ae[xe],pe[xe])||("geojson"===ae[xe].type&&"geojson"===pe[xe].type&&Gs(ae,pe,xe)?Ce.push({command:xt.setGeoJSONSourceData,args:[xe,pe[xe].data]}):Eo(xe,pe,Ce,Se)):Yr(xe,pe,Ce))}(E.sources,M.sources,B,P);const Z=[];E.layers&&E.layers.forEach(ae=>{ae.source&&P[ae.source]?k.push({command:xt.removeLayer,args:[ae.id]}):Z.push(ae)});let Q=E.terrain;Q&&P[Q.source]&&(k.push({command:xt.setTerrain,args:[void 0]}),Q=void 0),k=k.concat(B),ge(Q,M.terrain)||k.push({command:xt.setTerrain,args:[M.terrain]}),function(ae,pe,Ce){pe=pe||[];const Se=(ae=ae||[]).map($s),xe=pe.map($s),We=ae.reduce(Hs,{}),Me=pe.reduce(Hs,{}),Le=Se.slice(),Ne=Object.create(null);let et,je,Ke,_t,Vt,Xt,jt;for(et=0,je=0;et<Se.length;et++)Ke=Se[et],Me.hasOwnProperty(Ke)?je++:(Ce.push({command:xt.removeLayer,args:[Ke]}),Le.splice(Le.indexOf(Ke,je),1));for(et=0,je=0;et<xe.length;et++)Ke=xe[xe.length-1-et],Le[Le.length-1-et]!==Ke&&(We.hasOwnProperty(Ke)?(Ce.push({command:xt.removeLayer,args:[Ke]}),Le.splice(Le.lastIndexOf(Ke,Le.length-je),1)):je++,Xt=Le[Le.length-et],Ce.push({command:xt.addLayer,args:[Me[Ke],Xt]}),Le.splice(Le.length-et,0,Ke),Ne[Ke]=!0);for(et=0;et<xe.length;et++)if(Ke=xe[et],_t=We[Ke],Vt=Me[Ke],!Ne[Ke]&&!ge(_t,Vt))if(ge(_t.source,Vt.source)&&ge(_t["source-layer"],Vt["source-layer"])&&ge(_t.type,Vt.type)){for(jt in Io(_t.layout,Vt.layout,Ce,Ke,null,xt.setLayoutProperty),Io(_t.paint,Vt.paint,Ce,Ke,null,xt.setPaintProperty),ge(_t.filter,Vt.filter)||Ce.push({command:xt.setFilter,args:[Ke,Vt.filter]}),ge(_t.minzoom,Vt.minzoom)&&ge(_t.maxzoom,Vt.maxzoom)||Ce.push({command:xt.setLayerZoomRange,args:[Ke,Vt.minzoom,Vt.maxzoom]}),_t)_t.hasOwnProperty(jt)&&"layout"!==jt&&"paint"!==jt&&"filter"!==jt&&"metadata"!==jt&&"minzoom"!==jt&&"maxzoom"!==jt&&(0===jt.indexOf("paint.")?Io(_t[jt],Vt[jt],Ce,Ke,jt.slice(6),xt.setPaintProperty):ge(_t[jt],Vt[jt])||Ce.push({command:xt.setLayerProperty,args:[Ke,jt,Vt[jt]]}));for(jt in Vt)Vt.hasOwnProperty(jt)&&!_t.hasOwnProperty(jt)&&"layout"!==jt&&"paint"!==jt&&"filter"!==jt&&"metadata"!==jt&&"minzoom"!==jt&&"maxzoom"!==jt&&(0===jt.indexOf("paint.")?Io(_t[jt],Vt[jt],Ce,Ke,jt.slice(6),xt.setPaintProperty):ge(_t[jt],Vt[jt])||Ce.push({command:xt.setLayerProperty,args:[Ke,jt,Vt[jt]]}))}else Ce.push({command:xt.removeLayer,args:[Ke]}),Xt=Le[Le.lastIndexOf(Ke)+1],Ce.push({command:xt.addLayer,args:[Vt,Xt]})}(Z,M.layers,k)}catch(P){console.warn("Unable to compute style diff:",P),k=[{command:xt.setStyle,args:[M]}]}return k}(this.serialize(),i).filter(E=>!(E.command in wa));if(0===d.length)return!1;const v=d.filter(E=>!(E.command in Zs));if(v.length>0)throw new Error(`Unimplemented: ${v.map(E=>E.command).join(", ")}.`);return d.forEach(E=>{"setTransition"!==E.command&&this[E.command].apply(this,E.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,d){return this.getImage(i)?this.fire(new h.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,d),this._afterImageUpdated(i),this)}updateImage(i,d){this.imageManager.updateImage(i,d)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new h.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,d,v={}){if(this._checkLoaded(),void 0!==this.getSource(i))throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(h.validateSource,`sources.${i}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const E=be(i,d,this.dispatcher,this);E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:E.serialize(),sourceId:i}));const M=k=>{const P=(k?"symbol:":"other:")+i,B=this._sourceCaches[P]=new h.SourceCache(P,E,k);(k?this._symbolSourceCaches:this._otherSourceCaches)[i]=B,B.style=this,B.onAdd(this.map)};M(!1),"vector"!==d.type&&"geojson"!==d.type||M(!0),E.onAdd&&E.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const d=this.getSource(i);if(!d)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===i)return this.fire(new h.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new h.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const v=this._getSourceCaches(i);for(const E of v)delete this._sourceCaches[E.id],delete this._updatedSources[E.id],E.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,d){this._checkLoaded(),this.getSource(i).setData(d),this._changed=!0}getSource(i){const d=this._getSourceCache(i);return d&&d.getSource()}addLayer(i,d,v={}){this._checkLoaded();const E=i.id;if(this.getLayer(E))return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${E}" already exists on this map`)));let M;if("custom"===i.type){if(xa(this,h.validateCustomStyleLayer(i)))return;M=h.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(E,i.source),i=h.clone$1(i),i=h.extend(i,{source:E})),this._validate(h.validateLayer,`layers.${E}`,i,{arrayIndex:-1},v))return;M=h.createStyleLayer(i),this._validateLayer(M),M.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const k=d?this._order.indexOf(d):this._order.length;if(d&&-1===k)return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(k,0,E),this._layerOrderChanged=!0,this._layers[E]=M;const P=this._getLayerSourceCache(M);if(this._removedLayers[E]&&M.source&&P&&"custom"!==M.type){const B=this._removedLayers[E];delete this._removedLayers[E],B.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",P.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,d){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===d)return;const v=this._order.indexOf(i);this._order.splice(v,1);const E=d?this._order.indexOf(d):this._order.length;d&&-1===E?this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(E,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const d=this._layers[i];if(!d)return void this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const v=this._order.indexOf(i);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=d,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const d in this._layers)if(this._layers[d].type===i)return!0;return!1}setLayerZoomRange(i,d,v){this._checkLoaded();const E=this.getLayer(i);E?E.minzoom===d&&E.maxzoom===v||(null!=d&&(E.minzoom=d),null!=v&&(E.maxzoom=v),this._updateLayer(E)):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,d,v={}){this._checkLoaded();const E=this.getLayer(i);if(E){if(!ge(E.filter,d))return null==d?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(h.validateFilter,`layers.${E.id}.filter`,d,{layerType:E.type},v)||(E.filter=h.clone$1(d),this._updateLayer(E)))}else this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const d=this.getLayer(i);return d&&h.clone$1(d.filter)}setLayoutProperty(i,d,v,E={}){this._checkLoaded();const M=this.getLayer(i);M?ge(M.getLayoutProperty(d),v)||(M.setLayoutProperty(d,v,E),this._updateLayer(M)):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,d){const v=this.getLayer(i);if(v)return v.getLayoutProperty(d);this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,d,v,E={}){this._checkLoaded();const M=this.getLayer(i);M?ge(M.getPaintProperty(d),v)||(M.setPaintProperty(d,v,E)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,d){const v=this.getLayer(i);return v&&v.getPaintProperty(d)}setFeatureState(i,d){this._checkLoaded();const v=i.source,E=i.sourceLayer,M=this.getSource(v);if(!M)return void this.fire(new h.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const k=M.type;if("geojson"===k&&E)return void this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===k&&!E)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===i.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided.")));const P=this._getSourceCaches(v);for(const B of P)B.setFeatureState(E,i.id,d)}removeFeatureState(i,d){this._checkLoaded();const v=i.source,E=this.getSource(v);if(!E)return void this.fire(new h.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const M=E.type,k="vector"===M?i.sourceLayer:void 0;if("vector"===M&&!k)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof i.id&&"number"!=typeof i.id)return void this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const P=this._getSourceCaches(v);for(const B of P)B.removeFeatureState(k,i.id,d)}getFeatureState(i){this._checkLoaded();const d=i.source,v=i.sourceLayer,E=this.getSource(d);if(E){if("vector"!==E.type||v)return void 0===i.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(v,i.id);this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const d in this._sourceCaches){const v=this._sourceCaches[d].getSource();i[v.id]||(i[v.id]=v.serialize())}return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},d=>void 0!==d)}_updateLayer(i){this._updatedLayers[i.id]=!0;const d=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&d&&"raster"!==d.getSource().type&&(this._updatedSources[i.source]="reload",d.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const d=k=>"fill-extrusion"===this._layers[k].type,v={},E=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(d(P)){v[P]=k;for(const B of i){const Z=B[P];if(Z)for(const Q of Z)E.push(Q)}}}E.sort((k,P)=>P.intersectionZ-k.intersectionZ);const M=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(d(P))for(let B=E.length-1;B>=0;B--){const Z=E[B].feature;if(v[Z.layer.id]<k)break;M.push(Z),E.pop()}else for(const B of i){const Z=B[P];if(Z)for(const Q of Z)M.push(Q.feature)}}return M}queryRenderedFeatures(i,d,v){d&&d.filter&&this._validate(h.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const E={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const B of d.layers){const Z=this._layers[B];if(!Z)return this.fire(new h.ErrorEvent(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];E[Z.source]=!0}}const M=[];d.availableImages=this._availableImages;const k=d&&d.layers?d.layers.some(B=>{const Z=this.getLayer(B);return Z&&Z.is3D()}):this.has3DLayers(),P=an.createFromScreenPoints(i,v);for(const B in this._sourceCaches){const Z=this._sourceCaches[B].getSource().id;d.layers&&!E[Z]||M.push(Ge(this._sourceCaches[B],this._layers,this._serializedLayers,P,d,v,k,!!this.map._showQueryGeometry))}return this.placement&&M.push(function(B,Z,Q,ae,pe,Ce,Se){const xe={},We=Ce.queryRenderedSymbols(ae),Me=[];for(const Le of Object.keys(We).map(Number))Me.push(Se[Le]);Me.sort(ye);for(const Le of Me){const Ne=Le.featureIndex.lookupSymbolFeatures(We[Le.bucketInstanceId],Z,Le.bucketIndex,Le.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,B);for(const et in Ne){const je=xe[et]=xe[et]||[],Ke=Ne[et];Ke.sort((_t,Vt)=>{const Xt=Le.featureSortOrder;if(Xt){const jt=Xt.indexOf(_t.featureIndex);return Xt.indexOf(Vt.featureIndex)-jt}return Vt.featureIndex-_t.featureIndex});for(const _t of Ke)je.push(_t)}}for(const Le in xe)xe[Le].forEach(Ne=>{const et=Ne.feature,je=Q(B[Le]).getFeatureState(et.layer["source-layer"],et.id);et.source=et.layer.source,et.layer["source-layer"]&&(et.sourceLayer=et.layer["source-layer"]),et.state=je});return xe}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),P.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(i,d){d&&d.filter&&this._validate(h.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const v=this._getSourceCaches(i);let E=[];for(const M of v)E=E.concat(Fe(M,d));return E}addSourceType(i,d,v){return ds.getSourceType(i)?v(new Error(`A source type called "${i}" already exists.`)):(ds.setSourceType(i,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:d.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(i,d={}){this._checkLoaded();const v=this.light.getLight();let E=!1;for(const k in i)if(!ge(i[k],v[k])){E=!0;break}if(!E)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,d),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,d=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===d){if("object"==typeof i.source){const v="terrain-dem-src";this.addSource(v,i.source),i=h.clone$1(i),i=h.extend(i,{source:v})}if(this._validate(h.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode)this._createTerrain(i,d);else{const v=this.terrain,E=v.get();for(const M of Object.keys(h.spec.terrain))!i.hasOwnProperty(M)&&h.spec.terrain[M].default&&(i[M]=h.spec.terrain[M].default);for(const M in i)if(!ge(i[M],E[M])){v.set(i),this.stylesheet.terrain=i;const k=this._setTransitionParameters({duration:0});v.updateTransitions(k);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const d=this.fog=new ai(i,this.map.transform);this.stylesheet.fog=i;const v=this._setTransitionParameters({duration:0});d.updateTransitions(v)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,v=d.get();0===Object.keys(i).length&&d.set(i);for(const E in i)if(!ge(i[E],v[E])){d.set(i),this.stylesheet.fog=i;const M=this._setTransitionParameters({duration:0});d.updateTransitions(M);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:h.exported.now(),transition:h.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(v=>this.isLayerDraped(this._layers[v])),d=this._order.filter(v=>!this.isLayerDraped(this._layers[v]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...d)}_createTerrain(i,d){const v=this.terrain=new Ut(i,d);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const E=this._setTransitionParameters({duration:0});v.updateTransitions(E)}_force3DLayerUpdate(){for(const i in this._layers){const d=this._layers[i];"fill-extrusion"===d.type&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const d=this._layers[i];"symbol"===d.type&&this._updateLayer(d)}}_validate(i,d,v,E,M={}){return(!M||!1!==M.validate)&&xa(this,i.call(h.validateStyle,h.extend({key:d,style:this.serialize(),value:v,styleSpec:h.spec},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const d=this._getSourceCaches(i);for(const v of d)v.clearTiles()}_reloadSource(i){const d=this._getSourceCaches(i);for(const v of d)v.resume(),v.reload()}_updateSources(i){for(const d in this._sourceCaches)this._sourceCaches[d].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const d=this._sourceCaches[i];d.resume(),d.reload()}}_updatePlacement(i,d,v,E,M=!1){let k=!1,P=!1;const B={};for(const Z of this._order){const Q=this._layers[Z];if("symbol"!==Q.type)continue;if(!B[Q.source]){const pe=this._getLayerSourceCache(Q);if(!pe)continue;B[Q.source]=pe.getRenderableIds(!0).map(Ce=>pe.getTileByID(Ce)).sort((Ce,Se)=>Se.tileID.overscaledZ-Ce.tileID.overscaledZ||(Ce.tileID.isLessThan(Se.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer(Q,B[Q.source],i.center.lng,i.projection);k=k||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||0===v,this._layerOrderChanged&&this.fire(new h.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),i.zoom))&&(this.pauseablePlacement=new Hl(i,this._order,M,d,v,E,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),P=!0),k&&this.pauseablePlacement.placement.setStale()),P||k)for(const Z of this._order){const Q=this._layers[Z];"symbol"===Q.type&&this.placement.updateLayerOpacities(Q,B[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,d,v){this.imageManager.getImages(d.icons,v),this._updateTilesForChangedImages();const E=M=>{M&&M.setDependencies(d.tileID.key,d.type,d.icons)};E(this._otherSourceCaches[d.source]),E(this._symbolSourceCaches[d.source])}getGlyphs(i,d,v){this.glyphManager.getGlyphs(d.stacks,v)}getResource(i,d,v){return h.makeRequest(d,v)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return"symbol"===i.type?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const d=[];return this._otherSourceCaches[i]&&d.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&d.push(this._symbolSourceCaches[i]),d}_isSourceCacheLoaded(i){const d=this._getSourceCaches(i);return 0===d.length?(this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):d.every(v=>v.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ds.getSourceType=function(f){return ne[f]},ds.setSourceType=function(f,i){ne[f]=i},ds.registerForPluginStateChange=h.registerForPluginStateChange;var hc="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",pc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Ea={},na={};Ea=wn("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),na=wn("#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const vl=wn("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Qa=hc,hs="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Zo={background:wn("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:wn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:wn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:wn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:wn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:wn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:wn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:wn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:wn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:wn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:wn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:wn("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:wn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:wn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:wn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:wn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:wn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:wn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:wn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:wn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:wn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:wn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:wn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pc),skyboxGradient:wn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",pc),skyboxCapture:wn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:wn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector.xyz*height;vec4 globe=u_globe_matrix*vec4(globe_pos,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:wn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function wn(f,i,d){const v=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,E=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,M=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),k=f.match(E),P=i.match(E),B=hc.match(E);let Z=P?P.concat(k):k;d||(Ea.staticUniforms&&(Z=Ea.staticUniforms.concat(Z)),na.staticUniforms&&(Z=na.staticUniforms.concat(Z))),Z&&(Z=Z.concat(B));const Q={};return{fragmentSource:f=f.replace(v,(ae,pe,Ce,Se,xe)=>(Q[xe]=!0,"define"===pe?`\n#ifndef HAS_UNIFORM_u_${xe}\nvarying ${Ce} ${Se} ${xe};\n#else\nuniform ${Ce} ${Se} u_${xe};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${xe}\n    ${Ce} ${Se} ${xe} = u_${xe};\n#endif\n`)),vertexSource:i=i.replace(v,(ae,pe,Ce,Se,xe)=>{const We="float"===Se?"vec2":"vec4",Me=xe.match(/color/)?"color":We;return Q[xe]?"define"===pe?`\n#ifndef HAS_UNIFORM_u_${xe}\nuniform lowp float u_${xe}_t;\nattribute ${Ce} ${We} a_${xe};\nvarying ${Ce} ${Se} ${xe};\n#else\nuniform ${Ce} ${Se} u_${xe};\n#endif\n`:"vec4"===Me?`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${xe} = a_${xe};\n#else\n    ${Ce} ${Se} ${xe} = u_${xe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${xe} = unpack_mix_${Me}(a_${xe}, u_${xe}_t);\n#else\n    ${Ce} ${Se} ${xe} = u_${xe};\n#endif\n`:"define"===pe?`\n#ifndef HAS_UNIFORM_u_${xe}\nuniform lowp float u_${xe}_t;\nattribute ${Ce} ${We} a_${xe};\n#else\nuniform ${Ce} ${Se} u_${xe};\n#endif\n`:"vec4"===Me?`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${Ce} ${Se} ${xe} = a_${xe};\n#else\n    ${Ce} ${Se} ${xe} = u_${xe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${Ce} ${Se} ${xe} = unpack_mix_${Me}(a_${xe}, u_${xe}_t);\n#else\n    ${Ce} ${Se} ${xe} = u_${xe};\n#endif\n`}),staticAttributes:M,staticUniforms:Z}}class Fs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,d,v,E,M,k,P,B,Z){this.context=i;let Q=this.boundPaintVertexBuffers.length!==E.length;for(let ae=0;!Q&&ae<E.length;ae++)this.boundPaintVertexBuffers[ae]!==E[ae]&&(Q=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===v&&!Q&&this.boundIndexBuffer===M&&this.boundVertexOffset===k&&this.boundDynamicVertexBuffer===P&&this.boundDynamicVertexBuffer2===B&&this.boundDynamicVertexBuffer3===Z?(i.bindVertexArrayOES.set(this.vao),P&&P.bind(),M&&M.dynamicDraw&&M.bind(),B&&B.bind(),Z&&Z.bind()):this.freshBind(d,v,E,M,k,P,B,Z)}freshBind(i,d,v,E,M,k,P,B){let Z;const Q=i.numAttributes,ae=this.context,pe=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),Z=0,this.boundProgram=i,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=E,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=B;else{Z=ae.currentNumAttributes||0;for(let Ce=Q;Ce<Z;Ce++)pe.disableVertexAttribArray(Ce)}d.enableAttributes(pe,i);for(const Ce of v)Ce.enableAttributes(pe,i);k&&k.enableAttributes(pe,i),P&&P.enableAttributes(pe,i),B&&B.enableAttributes(pe,i),d.bind(),d.setVertexAttribPointers(pe,i,M);for(const Ce of v)Ce.bind(),Ce.setVertexAttribPointers(pe,i,M);k&&(k.bind(),k.setVertexAttribPointers(pe,i,M)),E&&E.bind(),P&&(P.bind(),P.setVertexAttribPointers(pe,i,M)),B&&(B.bind(),B.setVertexAttribPointers(pe,i,M)),ae.currentNumAttributes=Q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ts(f,i){const d=Math.pow(2,i.canonical.z),v=i.canonical.y;return[new h.MercatorCoordinate(0,v/d).toLngLat().lat,new h.MercatorCoordinate(0,(v+1)/d).toLngLat().lat]}function fc(f,i,d,v,E,M,k){const P=f.context,B=P.gl,Z=d.fbo;if(!Z)return;f.prepareDrawTile();const Q=f.useProgram("hillshade");P.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,Z.colorAttachment.get());const ae=((xe,We,Me,Le)=>{const Ne=Me.paint.get("hillshade-shadow-color"),et=Me.paint.get("hillshade-highlight-color"),je=Me.paint.get("hillshade-accent-color");let Ke=Me.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Me.paint.get("hillshade-illumination-anchor")&&(Ke-=xe.transform.angle);const _t=!xe.options.moving;return{u_matrix:Le||xe.transform.calculateProjMatrix(We.tileID.toUnwrapped(),_t),u_image:0,u_latrange:Ts(0,We.tileID),u_light:[Me.paint.get("hillshade-exaggeration"),Ke],u_shadow:Ne,u_highlight:et,u_accent:je}})(f,d,v,f.terrain?i.projMatrix:null);f.prepareDrawProgram(P,Q,i.toUnwrapped());const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:Ce,tileBoundsSegments:Se}=f.getTileBoundsBuffers(d);Q.draw(P,B.TRIANGLES,E,M,k,h.CullFaceMode.disabled,ae,v.id,pe,Ce,Se)}function bl(f,i,d){if(!i.needsDEMTextureUpload)return;const v=f.context,E=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(d.stride);const M=d.getPixels();i.demTexture?i.demTexture.update(M,{premultiply:!1}):i.demTexture=new h.Texture(v,M,E.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Ca(f,i,d,v,E,M){const k=f.context,P=k.gl;if(!i.dem)return;const B=i.dem;if(k.activeTexture.set(P.TEXTURE1),bl(f,i,B),!i.demTexture)return;i.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);const Z=B.dim;k.activeTexture.set(P.TEXTURE0);let Q=i.fbo;if(!Q){const Se=new h.Texture(k,{width:Z,height:Z,data:null},P.RGBA);Se.bind(P.LINEAR,P.CLAMP_TO_EDGE),Q=i.fbo=k.createFramebuffer(Z,Z,!0),Q.colorAttachment.set(Se.texture)}k.bindFramebuffer.set(Q.framebuffer),k.viewport.set([0,0,Z,Z]);const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:pe,tileBoundsSegments:Ce}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(k,P.TRIANGLES,v,E,M,h.CullFaceMode.disabled,((Se,xe)=>{const We=xe.stride,Me=h.create();return h.ortho(Me,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(Me,Me,[0,-h.EXTENT,0]),{u_matrix:Me,u_image:1,u_dimension:[We,We],u_zoom:Se.overscaledZ,u_unpack:xe.unpackVector}})(i.tileID,B),d.id,ae,pe,Ce),i.needsHillshadePrepare=!1}const ps=(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_image0:new h.Uniform1i(f,i.u_image0),u_skirt_height:new h.Uniform1f(f,i.u_skirt_height)}),Ns=(f,i)=>({u_matrix:f,u_image0:0,u_skirt_height:i}),Xi=(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:d,u_zoom_transition:E,u_merc_center:M,u_image0:0,u_frustum_tl:k,u_frustum_tr:P,u_frustum_br:B,u_frustum_bl:Z,u_globe_pos:Q,u_globe_radius:ae,u_viewport:pe,u_grid_matrix:Ce?Float32Array.from(Ce):new Float32Array(9)});function os(f,i){return null!=f&&null!=i&&!(!f.hasData()||!i.hasData())&&null!=f.demTexture&&null!=i.demTexture&&f.tileID.key!==i.tileID.key}const Bs=new class{constructor(){this.operations={}}newMorphing(f,i,d,v,E){if(f in this.operations){const M=this.operations[f];M.to.tileID.key!==d.tileID.key&&(M.queued=d)}else this.operations[f]={startTime:v,phase:0,duration:E,from:i,to:d,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const d=this.operations[i];for(d.phase=(f-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},xl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function wl(f,i){const d=1<<f.z;return!i&&(0===f.x||f.x===d-1)||0===f.y||f.y===d-1}const ia=f=>({u_matrix:f});function Xl(f,i,d,v,E){if(E>0){const M=h.exported.now(),k=(M-f.timeAdded)/E,P=i?(M-i.timeAdded)/E:-1,B=d.getSource(),Z=v.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),Q=!i||Math.abs(i.tileID.overscaledZ-Z)>Math.abs(f.tileID.overscaledZ-Z),ae=Q&&f.refreshedUponExpiration?1:h.clamp(Q?k:1-P,0,1);return f.refreshedUponExpiration&&k>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class ho extends h.SourceCache{constructor(i){const d={type:"raster-dem",maxzoom:i.transform.maxZoom},v=new Nn(hi(),null),E=be("mock-dem",d,v,i.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,d){i.state="loaded",d(null)}}class Lu extends h.SourceCache{constructor(i){const d=be("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new Nn(hi(),null),i.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,d,v){if(i.freezeTileCoverage)return;this.transform=i;const E=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((M,k)=>{if(M[k.key]="",!this._tiles[k.key]){const P=new h.Tile(k,this._source.tileSize*k.overscaleFactor(),i.tileZoom);P.state="loaded",this._tiles[k.key]=P}return M},{});for(const M in this._tiles)M in E||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(i){const d=this.proxyCachedFBO[i];if(void 0!==d){const v=Object.values(d);this.renderCachePool.push(...v),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ta extends h.OverscaledTileID{constructor(i,d,v){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=d,this.projMatrix=v}}class vr extends h.Elevation{constructor(i,d){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,E,M]=function(B){const Z=new h.StructArrayLayout4i8,Q=new h.StructArrayLayout3ui6;Z.reserve(17161),Q.reserve(33800);const pe=h.EXTENT/128,Ce=h.EXTENT+pe/2,Se=Ce+pe;for(let We=-pe;We<Se;We+=pe)for(let Me=-pe;Me<Se;Me+=pe){const Le=Me<0||Me>Ce||We<0||We>Ce?24575:0,Ne=h.clamp(Math.round(Me),0,h.EXTENT),et=h.clamp(Math.round(We),0,h.EXTENT);Z.emplaceBack(Ne+Le,et,Ne,et)}const xe=(We,Me)=>{const Le=131*Me+We;Q.emplaceBack(Le+1,Le,Le+131),Q.emplaceBack(Le+131,Le+131+1,Le+1)};for(let We=1;We<129;We++)for(let Me=1;Me<129;Me++)xe(Me,We);return[0,129].forEach(We=>{for(let Me=0;Me<130;Me++)xe(Me,We),xe(We,Me)}),[Z,Q,32768]}(),k=i.context;this.gridBuffer=k.createVertexBuffer(v,h.boundsAttributes.members),this.gridIndexBuffer=k.createIndexBuffer(E),this.gridSegments=h.SegmentVector.simpleSegment(0,0,v.length,E.length),this.gridNoSkirtSegments=h.SegmentVector.simpleSegment(0,0,v.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lu(d.map),this.orthoMatrix=h.create(),h.ortho(this.orthoMatrix,0,h.EXTENT,0,h.EXTENT,0,1);const P=k.gl;this._overlapStencilMode=new h.StencilMode({func:P.GEQUAL,mask:255},0,255,P.KEEP,P.KEEP,P.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ho(d.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,d,v){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const E=i.terrain.properties;this.sourceCache=0===i.terrain.drapeRenderMode?this._mockSourceCache:i._getSourceCache(E.get("source")),this._exaggeration=E.get("exaggeration");const M=()=>{this.sourceCache.used&&h.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const k=this.getScaledDemTileSize();this.sourceCache.update(d,k,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),d.updateElevation(!v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==i.efficiency&&h.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&"source"===i.dataType?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):"style"===i.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=0===v._centerAltitude&&-1===this.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(v.center),-1),this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=d.getIds().map(B=>{const Z=d.getTileByID(B).tileID;return Z.projMatrix=v.calculateProjMatrix(Z.toUnwrapped()),Z});(function(B,Z){const Q=Z.transform.pointCoordinate(Z.transform.getCameraPoint()),ae=new h.pointGeometry(Q.x,Q.y);B.sort((pe,Ce)=>{if(Ce.overscaledZ-pe.overscaledZ)return Ce.overscaledZ-pe.overscaledZ;const Se=new h.pointGeometry(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),xe=new h.pointGeometry(Ce.canonical.x+(1<<Ce.canonical.z)*Ce.wrap,Ce.canonical.y),We=ae.mult(1<<pe.canonical.z);return We.x-=.5,We.y-=.5,We.distSqr(Se)-We.distSqr(xe)})})(E,this.painter),this._previousZoom=v.zoom;const M=this.proxyToSource||{};this.proxyToSource={},E.forEach(B=>{this.proxyToSource[B.key]={}}),this.terrainTileForTile={};const k=this._style._sourceCaches;for(const B in k){const Z=k[B];if(!Z.used||(Z!==this.sourceCache&&this.resetTileLookupCache(Z.id),this._setupProxiedCoordsForOrtho(Z,i[B],M),Z.usedForTerrain))continue;const Q=i[B];Z.getSource().reparseOverscaled&&this._assignTerrainTiles(Q)}this.proxiedCoords[d.id]=E.map(B=>new Ta(B,B.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=h.exported.now();const P={};this._visibleDemTiles=[];for(const B of this.proxyCoords){const Z=this.terrainTileForTile[B.key];if(!Z)continue;const Q=Z.tileID.key;Q in P||(this._visibleDemTiles.push(Z),P[Q]=Q)}}_assignTerrainTiles(i){this._initializing||i.forEach(d=>{if(this.terrainTileForTile[d.key])return;const v=this._findTileCoveringTileID(d,this.sourceCache);v&&(this.terrainTileForTile[d.key]=v)})}_prepareDEMTextures(){const i=this.painter.context,d=i.gl;for(const v in this.terrainTileForTile){const E=this.terrainTileForTile[v],M=E.dem;!M||E.demTexture&&!E.needsDEMTextureUpload||(i.activeTexture.set(d.TEXTURE1),bl(this.painter,E,M))}}_prepareDemTileUniforms(i,d,v,E){if(!d||null==d.demTexture)return!1;const M=i.tileID.canonical,k=Math.pow(2,d.tileID.canonical.z-M.z),P=E||"";return v[`u_dem_tl${P}`]=[M.x*k%1,M.y*k%1],v[`u_dem_scale${P}`]=k,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,d=i.gl;if(!this._emptyDepthBufferTexture){const v=new h.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new h.Texture(i,v,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const d=this._visibleDemTiles.reduce((v,E)=>{if(!E.dem)return v;const M=E.dem.tree.minimums[0];return M>0&&i++,v+M},0);return i?d/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,d=i.gl;i.activeTexture.set(d.TEXTURE2);const v=this._getLoadedAreaMinimum(),E=new h.RGBAImage({width:1,height:1},new Uint8Array(h.DEMData.pack(v,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(E,{premultiply:!1}):M=this._emptyDEMTexture=new h.Texture(i,E,d.RGBA,{premultiply:!1}),M}setupElevationDraw(i,d,v){const E=this.painter.context,M=E.gl,k=(P=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:h.DEMData.getUnpackVector(P),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var P;k.u_dem_size=this.sourceCache.getSource().tileSize,k.u_exaggeration=this.exaggeration();const B=this.painter.transform,Z=B.projection,Q=i.tileID.canonical;k.u_tile_tl_up=Z.upVector(Q,0,0),k.u_tile_tr_up=Z.upVector(Q,h.EXTENT,0),k.u_tile_br_up=Z.upVector(Q,h.EXTENT,h.EXTENT),k.u_tile_bl_up=Z.upVector(Q,0,h.EXTENT),k.u_tile_up_scale=v&&v.useDenormalizedUpVectorScale?h.GLOBE_METERS_TO_ECEF:Z.upVectorScale(Q,B.center.lat,B.worldSize).metersToTile;let ae=null,pe=null,Ce=1;if(v&&v.morphing&&this._useVertexMorphing){const Se=v.morphing.srcDemTile,xe=v.morphing.dstDemTile;Ce=v.morphing.phase,Se&&xe&&(this._prepareDemTileUniforms(i,Se,k,"_prev")&&(pe=Se),this._prepareDemTileUniforms(i,xe,k)&&(ae=xe))}if(pe&&ae?(E.activeTexture.set(M.TEXTURE2),ae.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),E.activeTexture.set(M.TEXTURE4),pe.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),k.u_dem_lerp=Ce):(ae=this.terrainTileForTile[i.tileID.key],E.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(i,ae,k)?ae.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),E.activeTexture.set(M.TEXTURE3),v&&v.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(k.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),k.u_depth_size_inv=[1,1]),v&&v.useMeterToDem&&ae){const Se=(1<<ae.tileID.canonical.z)*h.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;k.u_meter_to_dem=Se}v&&v.labelPlaneMatrixInv&&(k.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),d.setTerrainUniformValues(E,k)}renderToBackBuffer(i){const d=this.painter,v=this.painter.context;0!==i.length&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,M,k,P,B){if("globe"===E.transform.projection.name)!function(Z,Q,ae,pe,Ce){const Se=Z.context,xe=Se.gl;let We,Me;const Le=Z.options.showTerrainWireframe?2:0,Ne=Z.transform,et=h.globeUseCustomAntiAliasing(Z,Se,Ne),je=(tt,un)=>{if(Me===tt)return;const gn=[xl[tt],"PROJECTION_GLOBE_VIEW"];et&&gn.push("CUSTOM_ANTIALIASING"),un&&gn.push(xl[Le]),We=Z.useProgram("globeRaster",null,gn),Me=tt},Ke=Z.colorModeForRenderPass(),_t=new h.DepthMode(xe.LEQUAL,h.DepthMode.ReadWrite,Z.depthRangeFor3D);Bs.update(Ce);const Vt=h.calculateGlobeMercatorMatrix(Ne),Xt=[h.mercatorXfromLng(Ne.center.lng),h.mercatorYfromLat(Ne.center.lat)],jt=Z.globeSharedBuffers,Nt=[Ne.width*h.exported.devicePixelRatio,Ne.height*h.exported.devicePixelRatio];if((Le?[!1,!0]:[!1]).forEach(tt=>{Me=-1;const un=tt?xe.LINES:xe.TRIANGLES;for(const gn of pe){const qn=ae.getTile(gn),en=h.StencilMode.disabled,Ci=Q.prevTerrainTileForTile[gn.key],Zn=Q.terrainTileForTile[gn.key];os(Ci,Zn)&&Bs.newMorphing(gn.key,Ci,Zn,Ce,250),Se.activeTexture.set(xe.TEXTURE0),qn.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const Xn=Bs.getMorphValuesForProxy(gn.key),Tn=Xn?1:0,jn={useDenormalizedUpVectorScale:!0};Xn&&h.extend$1(jn,{morphing:{srcDemTile:Xn.from,dstDemTile:Xn.to,phase:h.easeCubicInOut(Xn.phase)}});const Fi=Float32Array.from(Ne.globeMatrix),Si=h.globeTileLatLngCorners(gn.canonical),cr=h.getLatitudinalLod((Si[0][0]+Si[1][0])/2),xi=h.getGridMatrix(gn.canonical,Si,cr),$i=h.globeNormalizeECEF(h.globeTileBounds(gn.canonical)),Ur=Xi(Ne.projMatrix,Fi,Vt,$i,h.globeToMercatorTransition(Ne.zoom),Xt,Ne.frustumCorners.TL,Ne.frustumCorners.TR,Ne.frustumCorners.BR,Ne.frustumCorners.BL,Ne.globeCenterInViewSpace,Ne.globeRadius,Nt,xi);if(je(Tn,tt),Q.setupElevationDraw(qn,We,jn),Z.prepareDrawProgram(Se,We,gn.toUnwrapped()),jt){const[Qr,Qo,Jr]=tt?jt.getWirefameBuffers(Z.context,cr):jt.getGridBuffers(cr);We.draw(Se,un,_t,en,Ke,h.CullFaceMode.backCCW,Ur,"globe_raster",Qr,Qo,Jr)}}}),jt){const tt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];et&&tt.push("CUSTOM_ANTIALIASING"),We=Z.useProgram("globeRaster",null,tt);for(const un of pe){const{x:gn,y:qn,z:en}=un.canonical,Ci=0===qn,Zn=qn===(1<<en)-1,[Xn,Tn,jn,Fi]=jt.getPoleBuffers(en);if(Fi&&(Ci||Zn)){const Si=ae.getTile(un);Se.activeTexture.set(xe.TEXTURE0),Si.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);let cr=h.globePoleMatrixForTile(en,gn,Ne);const xi=h.globeNormalizeECEF(h.globeTileBounds(un.canonical)),$i=(Ur,Qr)=>Ur.draw(Se,xe.TRIANGLES,_t,h.StencilMode.disabled,Ke,h.CullFaceMode.disabled,Xi(Ne.projMatrix,cr,cr,xi,0,Xt,Ne.frustumCorners.TL,Ne.frustumCorners.TR,Ne.frustumCorners.BR,Ne.frustumCorners.BL,Ne.globeCenterInViewSpace,Ne.globeRadius,Nt),"globe_pole_raster",Qr,jn,Fi);Q.setupElevationDraw(Si,We,{}),Z.prepareDrawProgram(Se,We,un.toUnwrapped()),Ci&&$i(We,Xn),Zn&&(cr=h.scale(h.create(),cr,[1,-1,1]),$i(We,Tn))}}}}(E,M,k,P,B);else{const Z=E.context,Q=Z.gl;let ae,pe;const Ce=E.options.showTerrainWireframe?2:0,Se=(Ne,et)=>{if(pe===Ne)return;const je=[xl[Ne]];et&&je.push(xl[Ce]),ae=E.useProgram("terrainRaster",null,je),pe=Ne},xe=E.colorModeForRenderPass(),We=new h.DepthMode(Q.LEQUAL,h.DepthMode.ReadWrite,E.depthRangeFor3D);Bs.update(B);const Me=E.transform,Le=6*Math.pow(1.5,22-Me.zoom)*M.exaggeration();(Ce?[!1,!0]:[!1]).forEach(Ne=>{pe=-1;const et=Ne?Q.LINES:Q.TRIANGLES,[je,Ke]=Ne?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const _t of P){const Vt=k.getTile(_t),Xt=h.StencilMode.disabled,jt=M.prevTerrainTileForTile[_t.key],Nt=M.terrainTileForTile[_t.key];os(jt,Nt)&&Bs.newMorphing(_t.key,jt,Nt,B,250),Z.activeTexture.set(Q.TEXTURE0),Vt.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);const tt=Bs.getMorphValuesForProxy(_t.key),un=tt?1:0;let gn;tt&&(gn={morphing:{srcDemTile:tt.from,dstDemTile:tt.to,phase:h.easeCubicInOut(tt.phase)}});const qn=Ns(_t.projMatrix,wl(_t.canonical,Me.renderWorldCopies)?Le/10:Le);Se(un,Ne),M.setupElevationDraw(Vt,ae,gn),E.prepareDrawProgram(Z,ae,_t.toUnwrapped()),ae.draw(Z,et,We,Xt,xe,h.CullFaceMode.backCCW,qn,"terrain_raster",M.gridBuffer,je,Ke)}})}}(d,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(0===this._drapedRenderBatches.length)return i+1;this.renderingToTexture=!0;const d=this.painter,v=this.painter.context,E=this.proxySourceCache,M=this.proxiedCoords[E.id],k=this._drapedRenderBatches.shift(),P=[],B=d.style.order;let Z=0;for(const Q of M){const ae=E.getTileByID(Q.proxyTileKey),pe=E.proxyCachedFBO[Q.key]?E.proxyCachedFBO[Q.key][i]:void 0,Ce=void 0!==pe?E.renderCache[pe]:this.pool[Z++],Se=void 0!==pe;if(ae.texture=Ce.tex,Se&&!Ce.dirty){P.push(ae.tileID);continue}let xe;v.bindFramebuffer.set(Ce.fb.framebuffer),this.renderedToTile=!1,Ce.dirty&&(v.clear({color:h.Color.transparent,stencil:0}),Ce.dirty=!1);for(let We=k.start;We<=k.end;++We){const Me=d.style._layers[B[We]];if(Me.isHidden(d.transform.zoom))continue;const Le=d.style._getLayerSourceCache(Me),Ne=Le?this.proxyToSource[Q.key][Le.id]:[Q];if(!Ne)continue;const et=Ne;v.viewport.set([0,0,Ce.fb.width,Ce.fb.height]),xe!==(Le?Le.id:null)&&(this._setupStencil(Ce,Ne,Me,Le),xe=Le?Le.id:null),d.renderLayer(d,Le,Me,et)}this.renderedToTile?(Ce.dirty=!0,P.push(ae.tileID)):Se||--Z,5===Z&&(Z=0,this.renderToBackBuffer(P))}return this.renderToBackBuffer(P),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),k.end+1}postRender(){}renderCacheEfficiency(i){const d=i.order.length;if(0===d)return{efficiency:100};let v,E=0,M=0,k=!1;for(let P=0;P<d;++P){const B=i._layers[i.order[P]];this._style.isLayerDraped(B)?(k&&++E,++M):k||(k=!0,v=B.id)}return 0===M?{efficiency:100}:{efficiency:100*(1-E/M),firstUndrapedLayer:v}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{i=Math.min(i,d.dem.tree.minimums[0])}),0===i?i:(i-30)*this._exaggeration}raycast(i,d,v){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(M=>M.dem).map(M=>{const k=M.tileID,P=Math.pow(2,k.overscaledZ),{x:B,y:Z}=k.canonical,Q=B/P,ae=(B+1)/P,pe=Z/P,Ce=(Z+1)/P;return{minx:Q,miny:pe,maxx:ae,maxy:Ce,t:M.dem.tree.raycastRoot(Q,pe,ae,Ce,i,d,v),tile:M}});E.sort((M,k)=>(null!==M.t?M.t:Number.MAX_VALUE)-(null!==k.t?k.t:Number.MAX_VALUE));for(const M of E){if(null==M.t)return null;const k=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,i,d,v);if(null!=k)return k}return null}_createFBO(){const i=this.painter.context,d=i.gl,v=this.drapeBufferSize;i.activeTexture.set(d.TEXTURE0);const E=new h.Texture(i,{width:v[0],height:v[1],data:null},d.RGBA);E.bind(d.LINEAR,d.CLAMP_TO_EDGE);const M=i.createFramebuffer(v[0],v[1],!1);return M.colorAttachment.set(E.texture),M.depthAttachment=new U(i,M.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:M,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const d=this._style._layers[i],v=d.isHidden(this.painter.transform.zoom),E=d.getCrossfadeParameters(),M=!!E&&1!==E.t,k=d.hasTransition();return"custom"!==d.type&&!v&&(M||k)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d]._source instanceof Ee){i=!0;break}if(i)for(let d=0;d<this._style.order.length;++d){const v=this._style._layers[this._style.order[d]],E=v.isHidden(this.painter.transform.zoom),M=this._style._getLayerSourceCache(v);if("raster"!==v.type||E||!M)continue;const k=v.paint.get("raster-fade-duration");for(const P of this.proxyCoords){const B=this.proxyToSource[P.key][M.id];if(B)for(const Z of B){const Q=Xl(M.getTile(Z),M.findLoadedParent(Z,0),M,this.painter.transform,k);(1!==Q.opacity||0!==Q.mix)&&this._clearRenderCacheForTile(M.id,Z)}}}}_setupDrapedRenderBatches(){const i=this._style.order,d=i.length;if(0===d)return;const v=[];let E,M=0,k=this._style._layers[i[M]];for(;!this._style.isLayerDraped(k)&&k.isHidden(this.painter.transform.zoom)&&++M<d;)k=this._style._layers[i[M]];for(;M<d;++M){const P=this._style._layers[i[M]];P.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(P)?void 0===E&&(E=M):void 0!==E&&(v.push({start:E,end:M-1}),E=void 0))}void 0!==E&&v.push({start:E,end:M-1}),this._drapedRenderBatches=v}_setupRenderCache(i){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const k=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let P=0;P<k.length;++P){const B=Object.values(k[P]);d.renderCachePool.push(...B)}}return}this._clearRasterFadeFromRenderCache();const v=this.proxyCoords,E=this._tilesDirty;for(let k=v.length-1;k>=0;k--){const P=v[k];if(d.getTileByID(P.key),void 0!==d.proxyCachedFBO[P.key]){const B=i[P.key],Z=this.proxyToSource[P.key];let Q=0;for(const ae in Z){const pe=Z[ae],Ce=B[ae];if(!Ce||Ce.length!==pe.length||pe.some((Se,xe)=>Se!==Ce[xe]||E[ae]&&E[ae].hasOwnProperty(Se.key))){Q=-1;break}++Q}for(const ae in d.proxyCachedFBO[P.key])d.renderCache[d.proxyCachedFBO[P.key][ae]].dirty=Q<0||Q!==Object.values(B).length}}const M=[...this._drapedRenderBatches];M.sort((k,P)=>P.end-P.start-(k.end-k.start));for(const k of M)for(const P of v){if(d.proxyCachedFBO[P.key])continue;let B=d.renderCachePool.pop();void 0===B&&d.renderCache.length<50&&(B=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==B&&(d.proxyCachedFBO[P.key]={},d.proxyCachedFBO[P.key][k.start]=B,d.renderCache[B].dirty=!0)}this._tilesDirty={}}_setupStencil(i,d,v,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,k=M.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let P;if(v.isTileClipped())P=d.length,this._overlapStencilMode.test={func:k.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);P=1,this._overlapStencilMode.test={func:k.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+P>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=P,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):h.StencilMode.disabled}_renderTileClippingMasks(i,d){const v=this.painter,E=this.painter.context,M=E.gl;v._tileClippingMaskIDs={},E.setColorMode(h.ColorMode.disabled),E.setDepthMode(h.DepthMode.disabled);const k=v.useProgram("clippingMask");for(const P of i){const B=v._tileClippingMaskIDs[P.key]=--d;k.draw(E,M.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:M.ALWAYS,mask:0},B,255,M.KEEP,M.KEEP,M.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,ia(P.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(i){const d=this.painter.transform;if(i.x<0||i.x>d.width||i.y<0||i.y>d.height)return null;const v=[i.x,i.y,1,1];h.transformMat4$1(v,v,d.pixelMatrixInverse),h.scale$1(v,v,1/v[3]),v[0]/=d.worldSize,v[1]/=d.worldSize;const E=d._camera.position,M=h.mercatorZfromAltitude(1,d.center.lat),k=[E[0],E[1],E[2]/M,0],P=h.subtract([],v.slice(0,3),k);h.normalize(P,P);const B=this.raycast(k,P,this._exaggeration);return null!==B&&B?(h.scaleAndAdd(k,k,P,B),k[3]=k[2],k[2]*=M,k):null}drawDepth(){const i=this.painter,d=i.context,v=this.proxySourceCache,E=Math.ceil(i.width),M=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===E&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const k=d.gl,P=d.createFramebuffer(E,M,!0);d.activeTexture.set(k.TEXTURE0);const B=new h.Texture(d,{width:E,height:M,data:null},k.RGBA);B.bind(k.NEAREST,k.CLAMP_TO_EDGE),P.colorAttachment.set(B.texture);const Z=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,E,M);P.depthAttachment.set(Z),this._depthFBO=P,this._depthTexture=B}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,E,M]),function(k,P,B,Z){if("globe"===k.transform.projection.name)return;const Q=k.context,ae=Q.gl;Q.clear({depth:1});const pe=k.useProgram("terrainDepth"),Ce=new h.DepthMode(ae.LESS,h.DepthMode.ReadWrite,k.depthRangeFor3D);for(const Se of Z){const xe=B.getTile(Se),We=Ns(Se.projMatrix,0);P.setupElevationDraw(xe,pe),pe.draw(Q,ae.TRIANGLES,Ce,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.backCCW,We,"terrain_depth",P.gridBuffer,P.gridIndexBuffer,P.gridNoSkirtSegments)}}(i,this,v,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,d,v){if(i.getSource()instanceof me)return this._setupProxiedCoordsForImageSource(i,d,v);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const E=this.proxiedCoords[i.id]=[],M=this.proxyCoords;for(let P=0;P<M.length;P++){const B=M[P],Z=this._findTileCoveringTileID(B,i);if(Z){const Q=this._createProxiedId(B,Z,v[B.key]&&v[B.key][i.id]);E.push(Q),this.proxyToSource[B.key][i.id]=[Q]}}let k=!1;for(let P=0;P<d.length;P++){const B=i.getTile(d[P]);if(!B||!B.hasData())continue;const Z=this._findTileCoveringTileID(B.tileID,this.proxySourceCache);if(Z&&Z.tileID.canonical.z!==B.tileID.canonical.z){const Q=this.proxyToSource[Z.tileID.key][i.id],ae=this._createProxiedId(Z.tileID,B,v[Z.tileID.key]&&v[Z.tileID.key][i.id]);Q?Q.splice(Q.length-1,0,ae):this.proxyToSource[Z.tileID.key][i.id]=[ae],E.push(ae),k=!0}}this._sourceTilesOverlap[i.id]=k}_setupProxiedCoordsForImageSource(i,d,v){if(!i.getSource().loaded())return;const E=this.proxiedCoords[i.id]=[],M=this.proxyCoords,k=i.getSource(),P=new h.pointGeometry(k.tileID.x,k.tileID.y)._div(1<<k.tileID.z),B=k.coordinates.map(h.MercatorCoordinate.fromLngLat).reduce((Q,ae)=>(Q.min.x=Math.min(Q.min.x,ae.x-P.x),Q.min.y=Math.min(Q.min.y,ae.y-P.y),Q.max.x=Math.max(Q.max.x,ae.x-P.x),Q.max.y=Math.max(Q.max.y,ae.y-P.y),Q),{min:new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new h.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Z=(Q,ae)=>{const pe=Q.wrap+Q.canonical.x/(1<<Q.canonical.z),Ce=Q.canonical.y/(1<<Q.canonical.z),Se=h.EXTENT/(1<<Q.canonical.z),xe=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),We=ae.canonical.y/(1<<ae.canonical.z);return pe+Se<xe+B.min.x||pe>xe+B.max.x||Ce+Se<We+B.min.y||Ce>We+B.max.y};for(let Q=0;Q<M.length;Q++){const ae=M[Q];for(let pe=0;pe<d.length;pe++){const Ce=i.getTile(d[pe]);if(!Ce||!Ce.hasData()||Z(ae,Ce.tileID))continue;const Se=this._createProxiedId(ae,Ce,v[ae.key]&&v[ae.key][i.id]),xe=this.proxyToSource[ae.key][i.id];xe?xe.push(Se):this.proxyToSource[ae.key][i.id]=[Se],E.push(Se)}}}_createProxiedId(i,d,v){let E=this.orthoMatrix;if(v){const M=v.find(k=>k.key===d.tileID.key);if(M)return M}if(d.tileID.key!==i.key){const M=i.canonical.z-d.tileID.canonical.z;let k,P,B;E=h.create();const Z=d.tileID.wrap-i.wrap<<i.overscaledZ;M>0?(k=h.EXTENT>>M,P=k*((d.tileID.canonical.x<<M)-i.canonical.x+Z),B=k*((d.tileID.canonical.y<<M)-i.canonical.y)):(k=h.EXTENT<<-M,P=h.EXTENT*(d.tileID.canonical.x-(i.canonical.x+Z<<-M)),B=h.EXTENT*(d.tileID.canonical.y-(i.canonical.y<<-M))),h.ortho(E,0,k,0,k,0,1),h.translate(E,E,[P,B,0])}return new Ta(d.tileID,i.key,E)}_findTileCoveringTileID(i,d){let v=d.getTile(i);if(v&&v.hasData())return v;const E=this._findCoveringTileCache[d.id],M=E[i.key];if(v=M?d.getTileByID(M):null,v&&v.hasData()||null===M)return v;let k=v?v.tileID:i,P=k.overscaledZ;const B=d.getSource().minzoom,Z=[];if(!M){const ae=d.getSource().maxzoom;if(i.canonical.z>=ae){const pe=i.canonical.z-ae;d.getSource().reparseOverscaled?(P=Math.max(i.canonical.z+2,d.transform.tileZoom),k=new h.OverscaledTileID(P,i.wrap,ae,i.canonical.x>>pe,i.canonical.y>>pe)):0!==pe&&(P=ae,k=new h.OverscaledTileID(P,i.wrap,ae,i.canonical.x>>pe,i.canonical.y>>pe))}k.key!==i.key&&(Z.push(k.key),v=d.getTile(k))}const Q=ae=>{Z.forEach(pe=>{E[pe]=ae}),Z.length=0};for(P-=1;P>=B&&(!v||!v.hasData());P--){v&&Q(v.tileID.key);const ae=k.calculateScaledKey(P);if(v=d.getTileByID(ae),v&&v.hasData())break;const pe=E[ae];if(null===pe)break;void 0===pe?Z.push(ae):v=d.getTileByID(pe)}return Q(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,d){let v=this._tilesDirty[i];v||(v=this._tilesDirty[i]={}),v[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(d){let v=0;const E=new h.StructArrayLayout2ui4,M=131;for(let k=1;k<129;k++){for(let P=1;P<129;P++)v=k*M+P,E.emplaceBack(v,v+1),E.emplaceBack(v,v+M),E.emplaceBack(v+1,v+M),128===k&&E.emplaceBack(v+M,v+M+1);E.emplaceBack(v+1,v+1+M)}return E}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=h.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Nc(f){const i=[];for(let d=0;d<f.length;d++){if(null===f[d])continue;const v=f[d].split(" ");i.push(v.pop())}return i}class Ao{static cacheKey(i,d,v){let E=`${i}${v?v.cacheKey:""}`;for(const M of d)E+=`/${M}`;return E}constructor(i,d,v,E,M,k){const P=i.gl;this.program=P.createProgram();const B=Nc(v.staticAttributes),Z=E?E.getBinderAttributes():[],Q=B.concat(Z),ae=v.staticUniforms?Nc(v.staticUniforms):[],pe=E?E.getBinderUniforms():[],Ce=ae.concat(pe),Se=[];for(const je of Ce)Se.indexOf(je)<0&&Se.push(je);let xe=E?E.defines():[];xe=xe.concat(k.map(je=>`#define ${je}`));const We=xe.concat(i.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(hs):hs,hs,Qa,vl.fragmentSource,na.fragmentSource,v.fragmentSource).join("\n"),Me=xe.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Qa,vl.vertexSource,na.vertexSource,Ea.vertexSource,v.vertexSource).join("\n"),Le=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(Le,We),P.compileShader(Le),P.attachShader(this.program,Le);const Ne=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(Ne,Me),P.compileShader(Ne),P.attachShader(this.program,Ne),this.attributes={};const et={};this.numAttributes=Q.length;for(let je=0;je<this.numAttributes;je++)Q[je]&&(P.bindAttribLocation(this.program,je,Q[je]),this.attributes[Q[je]]=je);P.linkProgram(this.program),P.deleteShader(Ne),P.deleteShader(Le);for(let je=0;je<Se.length;je++){const Ke=Se[je];if(Ke&&!et[Ke]){const _t=P.getUniformLocation(this.program,Ke);_t&&(et[Ke]=_t)}}var je,Ke;this.fixedUniforms=M(i,et),this.binderUniforms=E?E.getUniforms(i,et):[],-1!==k.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new h.Uniform1i(je=i,(Ke=et).u_dem),u_dem_prev:new h.Uniform1i(je,Ke.u_dem_prev),u_dem_unpack:new h.Uniform4f(je,Ke.u_dem_unpack),u_dem_tl:new h.Uniform2f(je,Ke.u_dem_tl),u_dem_scale:new h.Uniform1f(je,Ke.u_dem_scale),u_dem_tl_prev:new h.Uniform2f(je,Ke.u_dem_tl_prev),u_dem_scale_prev:new h.Uniform1f(je,Ke.u_dem_scale_prev),u_dem_size:new h.Uniform1f(je,Ke.u_dem_size),u_dem_lerp:new h.Uniform1f(je,Ke.u_dem_lerp),u_exaggeration:new h.Uniform1f(je,Ke.u_exaggeration),u_depth:new h.Uniform1i(je,Ke.u_depth),u_depth_size_inv:new h.Uniform2f(je,Ke.u_depth_size_inv),u_meter_to_dem:new h.Uniform1f(je,Ke.u_meter_to_dem),u_label_plane_matrix_inv:new h.UniformMatrix4f(je,Ke.u_label_plane_matrix_inv),u_tile_tl_up:new h.Uniform3f(je,Ke.u_tile_tl_up),u_tile_tr_up:new h.Uniform3f(je,Ke.u_tile_tr_up),u_tile_br_up:new h.Uniform3f(je,Ke.u_tile_br_up),u_tile_bl_up:new h.Uniform3f(je,Ke.u_tile_bl_up),u_tile_up_scale:new h.Uniform1f(je,Ke.u_tile_up_scale)}),-1!==k.indexOf("FOG")&&(this.fogUniforms=((je,Ke)=>({u_fog_matrix:new h.UniformMatrix4f(je,Ke.u_fog_matrix),u_fog_range:new h.Uniform2f(je,Ke.u_fog_range),u_fog_color:new h.Uniform4f(je,Ke.u_fog_color),u_fog_horizon_blend:new h.Uniform1f(je,Ke.u_fog_horizon_blend),u_fog_temporal_offset:new h.Uniform1f(je,Ke.u_fog_temporal_offset),u_frustum_tl:new h.Uniform3f(je,Ke.u_frustum_tl),u_frustum_tr:new h.Uniform3f(je,Ke.u_frustum_tr),u_frustum_br:new h.Uniform3f(je,Ke.u_frustum_br),u_frustum_bl:new h.Uniform3f(je,Ke.u_frustum_bl),u_globe_pos:new h.Uniform3f(je,Ke.u_globe_pos),u_globe_radius:new h.Uniform1f(je,Ke.u_globe_radius),u_globe_transition:new h.Uniform1f(je,Ke.u_globe_transition),u_is_globe:new h.Uniform1i(je,Ke.u_is_globe),u_viewport:new h.Uniform2f(je,Ke.u_viewport)}))(i,et))}setTerrainUniformValues(i,d){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const E in d)v[E].set(d[E])}}setFogUniformValues(i,d){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const E in d)v[E].location&&v[E].set(d[E])}}draw(i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe,We,Me){const Le=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(v),i.setStencilMode(E),i.setColorMode(M),i.setCullFace(k);for(const et of Object.keys(this.fixedUniforms))this.fixedUniforms[et].set(P[et]);Se&&Se.setUniforms(i,this.binderUniforms,pe,{zoom:Ce});const Ne={[Le.LINES]:2,[Le.TRIANGLES]:3,[Le.LINE_STRIP]:1}[d];for(const et of ae.get()){const je=et.vaos||(et.vaos={});(je[B]||(je[B]=new Fs)).bind(i,this,Z,Se?Se.getPaintVertexBuffers():[],Q,et.vertexOffset,xe,We,Me),Le.drawElements(d,et.primitiveLength*Ne,Le.UNSIGNED_SHORT,et.primitiveOffset*Ne*2)}}}function Ja(f,i,d){const v=1/tn(d,1,i.transform.tileZoom),E=Math.pow(2,d.tileID.overscaledZ),M=d.tileSize*Math.pow(2,i.transform.tileZoom)/E,k=M*(d.tileID.canonical.x+d.tileID.wrap*E),P=M*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[k>>16,P>>16],u_pixel_coord_lower:[65535&k,65535&P]}}const lr=h.create(),su=(f,i,d,v,E,M,k,P,B)=>{const Z=i.style.light,Q=Z.properties.get("position"),ae=[Q.x,Q.y,Q.z],pe=h.create$1();"viewport"===Z.properties.get("anchor")&&(h.fromRotation(pe,-i.transform.angle),h.transformMat3(ae,ae,pe));const Ce=Z.properties.get("color"),Se=i.transform,xe={u_matrix:f,u_lightpos:ae,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[Ce.r,Ce.g,Ce.b],u_vertical_gradient:+d,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return"globe"===Se.projection.name&&(xe.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],xe.u_zoom_transition=k,xe.u_inv_rot_matrix=B,xe.u_merc_center=P,xe.u_up_dir=Se.projection.upVector(new h.CanonicalTileID(0,0,0),P[0]*h.EXTENT,P[1]*h.EXTENT),xe.u_height_lift=M),xe},el=(f,i,d,v,E,M,k,P,B,Z,Q)=>{const ae=su(f,i,d,v,E,P,B,Z,Q),pe={u_height_factor:-Math.pow(2,E.overscaledZ)/k.tileSize/8};return h.extend(ae,Ja(M,i,k),pe)},Ni=f=>({u_matrix:f}),Kl=(f,i,d,v)=>h.extend(Ni(f),Ja(d,i,v)),qo=(f,i)=>({u_matrix:f,u_world:i}),au=(f,i,d,v,E)=>h.extend(Kl(f,i,d,v),{u_world:E}),ra=h.create(),lu=(f,i,d,v,E,M)=>{const k=f.transform,P="globe"===k.projection.name;let B;if("map"===M.paint.get("circle-pitch-alignment"))if(P){const Q=h.globePixelsToTileUnits(k.zoom,i.canonical)*k._projectionScaler;B=Float32Array.from([Q,0,0,Q])}else B=k.calculatePixelsToTileUnitsMatrix(d);else B=new Float32Array([k.pixelsToGLUnits[0],0,0,k.pixelsToGLUnits[1]]);const Z={u_camera_to_center_distance:k.cameraToCenterDistance,u_matrix:f.translatePosMatrix(i.projMatrix,d,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:h.exported.devicePixelRatio,u_extrude_scale:B,u_inv_rot_matrix:ra,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){Z.u_inv_rot_matrix=v,Z.u_merc_center=E,Z.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],Z.u_zoom_transition=h.globeToMercatorTransition(k.zoom);const Q=E[0]*h.EXTENT,ae=E[1]*h.EXTENT;Z.u_up_dir=k.projection.upVector(new h.CanonicalTileID(0,0,0),Q,ae)}return Z},fs=f=>{const i=[];return"map"===f.paint.get("circle-pitch-alignment")&&i.push("PITCH_WITH_MAP"),"map"===f.paint.get("circle-pitch-scale")&&i.push("SCALE_WITH_MAP"),i},od=(f,i,d,v)=>{const E=h.EXTENT/d.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.getCameraToCenterDistance(v),u_extrude_scale:[i.pixelsToGLUnits[0]/E,i.pixelsToGLUnits[1]/E]}},te=(f,i,d=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:d}),re=h.create(),X=(f,i,d,v,E,M,k)=>{const P=f.transform,B="globe"===P.projection.name,Z=B?h.globePixelsToTileUnits(P.zoom,i.canonical)*P._projectionScaler:tn(d,1,M),Q={u_matrix:i.projMatrix,u_extrude_scale:Z,u_intensity:k,u_inv_rot_matrix:re,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){Q.u_inv_rot_matrix=v,Q.u_merc_center=E,Q.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],Q.u_zoom_transition=h.globeToMercatorTransition(P.zoom);const ae=E[0]*h.EXTENT,pe=E[1]*h.EXTENT;Q.u_up_dir=P.projection.upVector(new h.CanonicalTileID(0,0,0),ae,pe)}return Q},_e=(f,i,d,v,E,M,k,P)=>{const B=f.transform,Z=B.calculatePixelsToTileUnitsMatrix(i),Q={u_matrix:mr(f,i,d,E),u_pixels_to_tile_units:Z,u_device_pixel_ratio:k,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:M,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:P};if(io(d)){const ae=Ei(i,f.transform);Q.u_texsize=i.lineAtlasTexture.size,Q.u_scale=[ae,v.fromScale,v.toScale],Q.u_mix=v.t}return Q},gt=(f,i,d,v,E,M)=>{const k=f.transform,P=Ei(i,k);return{u_matrix:mr(f,i,d,E),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:M,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ei(f,i){return 1/tn(f,1,i.tileZoom)}function mr(f,i,d,v){return f.translatePosMatrix(v||i.tileID.projMatrix,i,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function io(f){const i=f.paint.get("line-dasharray").value;return i.value||"constant"!==i.kind}const mi=(f,i,d,v,E,M)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:d,u_fade_t:v.mix,u_opacity:v.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(P=E.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(k=E.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:mc(E.paint.get("raster-hue-rotate")),u_perspective_transform:M};var k,P};function mc(f){f*=Math.PI/180;const i=Math.sin(f),d=Math.cos(f);return[(2*d+1)/3,(-Math.sqrt(3)*i-d+1)/3,(Math.sqrt(3)*i-d+1)/3]}const Bh=h.create(),Bc=(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe)=>{const We=E.transform,Me={u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:We.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:We.width/We.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+B,u_pitch_with_map:+v,u_texsize:Z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Bh,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Bh,u_up_vector:[0,-1,0]};return"globe"===xe.name&&(Me.u_tile_id=[Q.canonical.x,Q.canonical.y,1<<Q.canonical.z],Me.u_zoom_transition=ae,Me.u_inv_rot_matrix=Ce,Me.u_merc_center=pe,Me.u_camera_forward=We._camera.forward(),Me.u_ecef_origin=h.globeECEFOrigin(We.globeMatrix,Q.toUnwrapped()),Me.u_tile_matrix=Float32Array.from(We.globeMatrix),Me.u_up_vector=Se),Me},Lo=(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe,We)=>h.extend(Bc(f,i,d,v,E,M,k,P,B,Z,ae,pe,Ce,Se,xe,We),{u_gamma_scale:v?E.transform.cameraToCenterDistance*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:h.exported.devicePixelRatio,u_is_halo:+Q}),El=(f,i,d,v,E,M,k,P,B,Z,Q,ae,pe,Ce,Se,xe)=>h.extend(Lo(f,i,d,v,E,M,k,P,!0,B,!0,Q,ae,pe,Ce,Se,xe),{u_texsize_icon:Z,u_texture_icon:1}),Xr=(f,i,d)=>({u_matrix:f,u_opacity:i,u_color:d}),tl=(f,i,d,v,E,M)=>h.extend(function(k,P,B,Z){const Q=B.imageManager.getPattern(k.from.toString()),ae=B.imageManager.getPattern(k.to.toString()),{width:pe,height:Ce}=B.imageManager.getPixelSize(),Se=Math.pow(2,Z.tileID.overscaledZ),xe=Z.tileSize*Math.pow(2,B.transform.tileZoom)/Se,We=xe*(Z.tileID.canonical.x+Z.tileID.wrap*Se),Me=xe*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[pe,Ce],u_mix:P.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/tn(Z,1,B.transform.tileZoom),u_pixel_coord_upper:[We>>16,Me>>16],u_pixel_coord_lower:[65535&We,65535&Me]}}(v,M,d,E),{u_matrix:f,u_opacity:i}),Fa={fillExtrusion:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_lightpos:new h.Uniform3f(f,i.u_lightpos),u_lightintensity:new h.Uniform1f(f,i.u_lightintensity),u_lightcolor:new h.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new h.Uniform1f(f,i.u_vertical_gradient),u_opacity:new h.Uniform1f(f,i.u_opacity),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_up_dir:new h.Uniform3f(f,i.u_up_dir),u_height_lift:new h.Uniform1f(f,i.u_height_lift)}),fillExtrusionPattern:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_lightpos:new h.Uniform3f(f,i.u_lightpos),u_lightintensity:new h.Uniform1f(f,i.u_lightintensity),u_lightcolor:new h.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new h.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new h.Uniform1f(f,i.u_height_factor),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_up_dir:new h.Uniform3f(f,i.u_up_dir),u_height_lift:new h.Uniform1f(f,i.u_height_lift),u_image:new h.Uniform1i(f,i.u_image),u_texsize:new h.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(f,i.u_scale),u_fade:new h.Uniform1f(f,i.u_fade),u_opacity:new h.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_image:new h.Uniform1i(f,i.u_image),u_texsize:new h.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(f,i.u_scale),u_fade:new h.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_world:new h.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_world:new h.Uniform2f(f,i.u_world),u_image:new h.Uniform1i(f,i.u_image),u_texsize:new h.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(f,i.u_scale),u_fade:new h.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new h.UniformMatrix2f(f,i.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_up_dir:new h.Uniform3f(f,i.u_up_dir)}),collisionBox:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_extrude_scale:new h.Uniform2f(f,i.u_extrude_scale)}),collisionCircle:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new h.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new h.UniformColor(f,i.u_color),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_overlay:new h.Uniform1i(f,i.u_overlay),u_overlay_scale:new h.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new h.Uniform1f(f,i.u_extrude_scale),u_intensity:new h.Uniform1f(f,i.u_intensity),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_up_dir:new h.Uniform3f(f,i.u_up_dir)}),heatmapTexture:(f,i)=>({u_image:new h.Uniform1i(f,i.u_image),u_color_ramp:new h.Uniform1i(f,i.u_color_ramp),u_opacity:new h.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_image:new h.Uniform1i(f,i.u_image),u_latrange:new h.Uniform2f(f,i.u_latrange),u_light:new h.Uniform2f(f,i.u_light),u_shadow:new h.UniformColor(f,i.u_shadow),u_highlight:new h.UniformColor(f,i.u_highlight),u_accent:new h.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_image:new h.Uniform1i(f,i.u_image),u_dimension:new h.Uniform2f(f,i.u_dimension),u_zoom:new h.Uniform1f(f,i.u_zoom),u_unpack:new h.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_pixels_to_tile_units:new h.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new h.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(f,i.u_units_to_pixels),u_dash_image:new h.Uniform1i(f,i.u_dash_image),u_gradient_image:new h.Uniform1i(f,i.u_gradient_image),u_image_height:new h.Uniform1f(f,i.u_image_height),u_texsize:new h.Uniform2f(f,i.u_texsize),u_scale:new h.Uniform3f(f,i.u_scale),u_mix:new h.Uniform1f(f,i.u_mix),u_alpha_discard_threshold:new h.Uniform1f(f,i.u_alpha_discard_threshold),u_trim_offset:new h.Uniform2f(f,i.u_trim_offset)}),linePattern:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_texsize:new h.Uniform2f(f,i.u_texsize),u_pixels_to_tile_units:new h.UniformMatrix2f(f,i.u_pixels_to_tile_units),u_device_pixel_ratio:new h.Uniform1f(f,i.u_device_pixel_ratio),u_image:new h.Uniform1i(f,i.u_image),u_units_to_pixels:new h.Uniform2f(f,i.u_units_to_pixels),u_scale:new h.Uniform3f(f,i.u_scale),u_fade:new h.Uniform1f(f,i.u_fade),u_alpha_discard_threshold:new h.Uniform1f(f,i.u_alpha_discard_threshold)}),raster:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new h.Uniform2f(f,i.u_tl_parent),u_scale_parent:new h.Uniform1f(f,i.u_scale_parent),u_fade_t:new h.Uniform1f(f,i.u_fade_t),u_opacity:new h.Uniform1f(f,i.u_opacity),u_image0:new h.Uniform1i(f,i.u_image0),u_image1:new h.Uniform1i(f,i.u_image1),u_brightness_low:new h.Uniform1f(f,i.u_brightness_low),u_brightness_high:new h.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new h.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new h.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new h.Uniform3f(f,i.u_spin_weights),u_perspective_transform:new h.Uniform2f(f,i.u_perspective_transform)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new h.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(f,i.u_size_t),u_size:new h.Uniform1f(f,i.u_size),u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(f,i.u_fade_change),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new h.Uniform1i(f,i.u_is_text),u_pitch_with_map:new h.Uniform1i(f,i.u_pitch_with_map),u_texsize:new h.Uniform2f(f,i.u_texsize),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_camera_forward:new h.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new h.UniformMatrix4f(f,i.u_tile_matrix),u_up_vector:new h.Uniform3f(f,i.u_up_vector),u_ecef_origin:new h.Uniform3f(f,i.u_ecef_origin),u_texture:new h.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new h.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(f,i.u_size_t),u_size:new h.Uniform1f(f,i.u_size),u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(f,i.u_fade_change),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new h.Uniform1i(f,i.u_is_text),u_pitch_with_map:new h.Uniform1i(f,i.u_pitch_with_map),u_texsize:new h.Uniform2f(f,i.u_texsize),u_texture:new h.Uniform1i(f,i.u_texture),u_gamma_scale:new h.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(f,i.u_device_pixel_ratio),u_tile_id:new h.Uniform3f(f,i.u_tile_id),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(f,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_camera_forward:new h.Uniform3f(f,i.u_camera_forward),u_tile_matrix:new h.UniformMatrix4f(f,i.u_tile_matrix),u_up_vector:new h.Uniform3f(f,i.u_up_vector),u_ecef_origin:new h.Uniform3f(f,i.u_ecef_origin),u_is_halo:new h.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new h.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(f,i.u_size_t),u_size:new h.Uniform1f(f,i.u_size),u_camera_to_center_distance:new h.Uniform1f(f,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(f,i.u_fade_change),u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new h.Uniform1i(f,i.u_is_text),u_pitch_with_map:new h.Uniform1i(f,i.u_pitch_with_map),u_texsize:new h.Uniform2f(f,i.u_texsize),u_texsize_icon:new h.Uniform2f(f,i.u_texsize_icon),u_texture:new h.Uniform1i(f,i.u_texture),u_texture_icon:new h.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new h.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_opacity:new h.Uniform1f(f,i.u_opacity),u_color:new h.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_opacity:new h.Uniform1f(f,i.u_opacity),u_image:new h.Uniform1i(f,i.u_image),u_pattern_tl_a:new h.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(f,i.u_pattern_br_b),u_texsize:new h.Uniform2f(f,i.u_texsize),u_mix:new h.Uniform1f(f,i.u_mix),u_pattern_size_a:new h.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new h.Uniform1f(f,i.u_scale_a),u_scale_b:new h.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(f,i.u_tile_units_to_pixels)}),terrainRaster:ps,terrainDepth:ps,skybox:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_sun_direction:new h.Uniform3f(f,i.u_sun_direction),u_cubemap:new h.Uniform1i(f,i.u_cubemap),u_opacity:new h.Uniform1f(f,i.u_opacity),u_temporal_offset:new h.Uniform1f(f,i.u_temporal_offset)}),skyboxGradient:(f,i)=>({u_matrix:new h.UniformMatrix4f(f,i.u_matrix),u_color_ramp:new h.Uniform1i(f,i.u_color_ramp),u_center_direction:new h.Uniform3f(f,i.u_center_direction),u_radius:new h.Uniform1f(f,i.u_radius),u_opacity:new h.Uniform1f(f,i.u_opacity),u_temporal_offset:new h.Uniform1f(f,i.u_temporal_offset)}),skyboxCapture:(f,i)=>({u_matrix_3f:new h.UniformMatrix3f(f,i.u_matrix_3f),u_sun_direction:new h.Uniform3f(f,i.u_sun_direction),u_sun_intensity:new h.Uniform1f(f,i.u_sun_intensity),u_color_tint_r:new h.Uniform4f(f,i.u_color_tint_r),u_color_tint_m:new h.Uniform4f(f,i.u_color_tint_m),u_luminance:new h.Uniform1f(f,i.u_luminance)}),globeRaster:(f,i)=>({u_proj_matrix:new h.UniformMatrix4f(f,i.u_proj_matrix),u_globe_matrix:new h.UniformMatrix4f(f,i.u_globe_matrix),u_normalize_matrix:new h.UniformMatrix4f(f,i.u_normalize_matrix),u_merc_matrix:new h.UniformMatrix4f(f,i.u_merc_matrix),u_zoom_transition:new h.Uniform1f(f,i.u_zoom_transition),u_merc_center:new h.Uniform2f(f,i.u_merc_center),u_image0:new h.Uniform1i(f,i.u_image0),u_grid_matrix:new h.UniformMatrix3f(f,i.u_grid_matrix),u_frustum_tl:new h.Uniform3f(f,i.u_frustum_tl),u_frustum_tr:new h.Uniform3f(f,i.u_frustum_tr),u_frustum_br:new h.Uniform3f(f,i.u_frustum_br),u_frustum_bl:new h.Uniform3f(f,i.u_frustum_bl),u_globe_pos:new h.Uniform3f(f,i.u_globe_pos),u_globe_radius:new h.Uniform1f(f,i.u_globe_radius),u_viewport:new h.Uniform2f(f,i.u_viewport)}),globeAtmosphere:(f,i)=>({u_frustum_tl:new h.Uniform3f(f,i.u_frustum_tl),u_frustum_tr:new h.Uniform3f(f,i.u_frustum_tr),u_frustum_br:new h.Uniform3f(f,i.u_frustum_br),u_frustum_bl:new h.Uniform3f(f,i.u_frustum_bl),u_horizon:new h.Uniform1f(f,i.u_horizon),u_transition:new h.Uniform1f(f,i.u_transition),u_fadeout_range:new h.Uniform1f(f,i.u_fadeout_range),u_color:new h.Uniform4f(f,i.u_color),u_high_color:new h.Uniform4f(f,i.u_high_color),u_space_color:new h.Uniform4f(f,i.u_space_color),u_star_intensity:new h.Uniform1f(f,i.u_star_intensity),u_star_density:new h.Uniform1f(f,i.u_star_density),u_star_size:new h.Uniform1f(f,i.u_star_size),u_temporal_offset:new h.Uniform1f(f,i.u_temporal_offset),u_horizon_angle:new h.Uniform1f(f,i.u_horizon_angle),u_rotation_matrix:new h.UniformMatrix4f(f,i.u_rotation_matrix)})};let Cl;function qs(f,i,d,v,E,M,k){const P=f.context,B=P.gl,Z=f.transform,Q=f.useProgram("collisionBox"),ae=[];let pe=0,Ce=0;for(let et=0;et<v.length;et++){const je=v[et],Ke=i.getTile(je),_t=Ke.getBucket(d);if(!_t)continue;const Vt=Co(je,_t,Z);let Xt=Vt;0===E[0]&&0===E[1]||(Xt=f.translatePosMatrix(Vt,Ke,E,M));const jt=k?_t.textCollisionBox:_t.iconCollisionBox,Nt=_t.collisionCircleArray;if(Nt.length>0){const tt=h.create(),un=Xt;h.mul(tt,_t.placementInvProjMatrix,Z.glCoordMatrix),h.mul(tt,tt,_t.placementViewportMatrix),ae.push({circleArray:Nt,circleOffset:Ce,transform:un,invTransform:tt,projection:_t.getProjection()}),pe+=Nt.length/4,Ce=pe}jt&&(f.terrain&&f.terrain.setupElevationDraw(Ke,Q),Q.draw(P,B.LINES,h.DepthMode.disabled,h.StencilMode.disabled,f.colorModeForRenderPass(),h.CullFaceMode.disabled,od(Xt,Z,Ke,_t.getProjection()),d.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,null,Z.zoom,null,jt.collisionVertexBuffer,jt.collisionVertexBufferExt))}if(!k||!ae.length)return;const Se=f.useProgram("collisionCircle"),xe=new h.StructArrayLayout2f1f2i16;xe.resize(4*pe),xe._trim();let We=0;for(const et of ae)for(let je=0;je<et.circleArray.length/4;je++){const Ke=4*je,_t=et.circleArray[Ke+0],Vt=et.circleArray[Ke+1],Xt=et.circleArray[Ke+2],jt=et.circleArray[Ke+3];xe.emplace(We++,_t,Vt,Xt,jt,0),xe.emplace(We++,_t,Vt,Xt,jt,1),xe.emplace(We++,_t,Vt,Xt,jt,2),xe.emplace(We++,_t,Vt,Xt,jt,3)}(!Cl||Cl.length<2*pe)&&(Cl=function(et){const je=2*et,Ke=new h.StructArrayLayout3ui6;Ke.resize(je),Ke._trim();for(let _t=0;_t<je;_t++){const Vt=6*_t;Ke.uint16[Vt+0]=4*_t+0,Ke.uint16[Vt+1]=4*_t+1,Ke.uint16[Vt+2]=4*_t+2,Ke.uint16[Vt+3]=4*_t+2,Ke.uint16[Vt+4]=4*_t+3,Ke.uint16[Vt+5]=4*_t+0}return Ke}(pe));const Me=P.createIndexBuffer(Cl,!0),Le=P.createVertexBuffer(xe,h.collisionCircleLayout.members,!0);for(const et of ae){const je={u_matrix:et.transform,u_inv_matrix:et.invTransform,u_camera_to_center_distance:(Ne=Z).getCameraToCenterDistance(et.projection),u_viewport_size:[Ne.width,Ne.height]};Se.draw(P,B.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,f.colorModeForRenderPass(),h.CullFaceMode.disabled,je,d.id,Le,Me,h.SegmentVector.simpleSegment(0,2*et.circleOffset,et.circleArray.length,et.circleArray.length/2),null,Z.zoom)}var Ne;Le.destroy(),Me.destroy()}const ss=h.create();function gc(f,i,d,v,E,M){const{horizontalAlign:k,verticalAlign:P}=h.getAnchorAlignment(f),B=-(k-.5)*i,Z=-(P-.5)*d,Q=h.evaluateVariableOffset(f,v);return new h.pointGeometry((B/E+Q[0])*M,(Z/E+Q[1])*M)}function oa(f,i,d,v,E,M,k,P,B,Z,Q){const ae=f.text.placedSymbolArray,pe=f.text.dynamicLayoutVertexArray,Ce=f.icon.dynamicLayoutVertexArray,Se={},xe=dr(P,f.getProjection(),M),We=M.elevation,Me=f.getProjection().upVectorScale(P.canonical,M.center.lat,M.worldSize);pe.clear();for(let Le=0;Le<ae.length;Le++){const Ne=ae.get(Le),je=Ne.hidden||!Ne.crossTileID||f.allowVerticalPlacement&&!Ne.placedOrientation?null:v[Ne.crossTileID];if(je){const Ke=new h.pointGeometry(Ne.tileAnchorX,Ne.tileAnchorY),_t=f.getProjection().upVector(P.canonical,Ke.x,Ke.y),Vt=We?We.getAtTileOffset(P,Ke.x,Ke.y):0,Xt=ot([Ne.projectedAnchorX+Vt*_t[0]*Me.metersToTile,Ne.projectedAnchorY+Vt*_t[1]*Me.metersToTile,Ne.projectedAnchorZ+Vt*_t[2]*Me.metersToTile],d?xe:k),jt=Yt(M.getCameraToCenterDistance(f.getProjection()),Xt.signedDistanceFromCamera);let Nt=E.evaluateSizeForFeature(f.textSizeData,Z,Ne)*jt/h.ONE_EM;d&&(Nt*=f.tilePixelRatio/B);const{width:tt,height:un,anchor:gn,textOffset:qn,textScale:en}=je,Ci=gc(gn,tt,un,qn,en,Nt);let Zn;if(d){const Tn=Ke.add(Ci),{x:jn,y:Fi,z:Si}=f.getProjection().projectTilePoint(Tn.x,Tn.y,P.canonical);Zn=ot([jn+Vt*_t[0]*Me.metersToTile,Fi+Vt*_t[1]*Me.metersToTile,Si+Vt*_t[2]*Me.metersToTile],k).point}else{const Tn=i?Ci.rotate(-M.angle):Ci;Zn=[Xt.point[0]+Tn.x,Xt.point[1]+Tn.y,0]}const Xn=f.allowVerticalPlacement&&Ne.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let Tn=0;Tn<Ne.numGlyphs;Tn++)h.addDynamicAttributes(pe,Zn[0],Zn[1],Zn[2],Xn);Q&&Ne.associatedIconIndex>=0&&(Se[Ne.associatedIconIndex]={shiftedAnchor:Zn,angle:Xn})}else sr(Ne.numGlyphs,pe)}if(Q){Ce.clear();const Le=f.icon.placedSymbolArray;for(let Ne=0;Ne<Le.length;Ne++){const et=Le.get(Ne);if(et.hidden)sr(et.numGlyphs,Ce);else{const je=Se[Ne];if(je)for(let Ke=0;Ke<et.numGlyphs;Ke++)h.addDynamicAttributes(Ce,je.shiftedAnchor[0],je.shiftedAnchor[1],je.shiftedAnchor[2],je.angle);else sr(et.numGlyphs,Ce)}}f.icon.dynamicLayoutVertexBuffer.updateData(Ce)}f.text.dynamicLayoutVertexBuffer.updateData(pe)}function ro(f,i,d){return d.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function _c(f,i,d,v,E,M,k,P,B,Z,Q,ae){const pe=f.context,Ce=pe.gl,Se=f.transform,xe="map"===P,We="map"===B,Me=xe&&"point"!==d.layout.get("symbol-placement"),Le=xe&&!We&&!Me,Ne=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let et=!1;const je=f.depthModeForSublayer(0,h.DepthMode.ReadOnly),Ke=[h.mercatorXfromLng(Se.center.lng),h.mercatorYfromLat(Se.center.lat)],_t=d.layout.get("text-variable-anchor"),Vt="globe"===Se.projection.name,Xt=[],jt=[0,-1,0];let Nt=jt;!Vt&&!Se.mercatorFromTransition||xe||(Nt=function(tt){const un=tt._camera.getWorldToCamera(tt.worldSize,1),gn=h.multiply([],un,tt.globeMatrix);h.invert(gn,gn);const qn=[0,0,0],en=[0,1,0,0];return h.transformMat4$1(en,en,gn),qn[0]=en[0],qn[1]=en[1],qn[2]=en[2],h.normalize(qn,qn),qn}(Se));for(const tt of v){const un=i.getTile(tt),gn=un.getBucket(d);if(!gn||"mercator"===gn.projection.name&&Vt)continue;const qn=E?gn.text:gn.icon;if(!qn||gn.fullyClipped||!qn.segments.get().length)continue;const en=qn.programConfigurations.get(d.id),Ci=E||gn.sdfIcons,Zn=E?gn.textSizeData:gn.iconSizeData,Xn=We||0!==Se.pitch,Tn=h.evaluateSizeForZoom(Zn,Se.zoom);let jn,Fi,Si,cr,xi=[0,0],$i=null;if(E)Fi=un.glyphAtlasTexture,Si=Ce.LINEAR,jn=un.glyphAtlasTexture.size,gn.iconsInText&&(xi=un.imageAtlasTexture.size,$i=un.imageAtlasTexture,cr=Xn||f.options.rotating||f.options.zooming||"composite"===Zn.kind||"camera"===Zn.kind?Ce.LINEAR:Ce.NEAREST);else{const as=1!==d.layout.get("icon-size").constantOr(0)||gn.iconsNeedLinear;Fi=un.imageAtlasTexture,Si=Ci||f.options.rotating||f.options.zooming||as||Xn?Ce.LINEAR:Ce.NEAREST,jn=un.imageAtlasTexture.size}const Ur="globe"===gn.projection.name,Qr=Ur?Nt:jt,Qo=Ur?h.globeToMercatorTransition(Se.zoom):0,Jr=dr(tt,gn.getProjection(),Se),Ua=Se.calculatePixelsToTileUnitsMatrix(un),jr=Li(Jr,un.tileID.canonical,We,xe,Se,gn.getProjection(),Ua),kl=f.terrain&&We&&Me?h.invert(h.create(),jr):ss,eo=Oe(Jr,un.tileID.canonical,We,xe,Se,gn.getProjection(),Ua),ko=_t&&gn.hasTextData(),Br="none"!==d.layout.get("icon-text-fit")&&ko&&gn.hasIconData();if(Me){const as=Se.elevation,Ol=as?as.getAtTileOffsetFunc(tt,Se.center.lat,Se.worldSize,gn.getProjection()):po=>[0,0,0],Rl=Xo(Jr,un.tileID.canonical,We,xe,Se,gn.getProjection(),Ua);Dn(gn,Jr,f,E,Rl,eo,We,Z,Ol,tt)}const Mr=Me||E&&_t||Br,Jo=f.translatePosMatrix(Jr,un,M,k),kr=Mr?ss:jr,gs=f.translatePosMatrix(eo,un,M,k,!0),Gu=gn.getProjection().createInversionMatrix(Se,tt.canonical),da=[];f.terrain&&We&&da.push("PITCH_WITH_MAP_TERRAIN"),Ur&&da.push("PROJECTION_GLOBE_VIEW"),Mr&&da.push("PROJECTED_POS_ON_VIEWPORT");const $u=Ci&&0!==d.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1);let fd;fd=Ci?gn.iconsInText?El(Zn.kind,Tn,Le,We,f,Jo,kr,gs,jn,xi,tt,Qo,Ke,Gu,Qr,gn.getProjection()):Lo(Zn.kind,Tn,Le,We,f,Jo,kr,gs,E,jn,!0,tt,Qo,Ke,Gu,Qr,gn.getProjection()):Bc(Zn.kind,Tn,Le,We,f,Jo,kr,gs,E,jn,tt,Qo,Ke,Gu,Qr,gn.getProjection());const $c={program:f.useProgram(ro(Ci,E,gn),en,da),buffers:qn,uniformValues:fd,atlasTexture:Fi,atlasTextureIcon:$i,atlasInterpolation:Si,atlasInterpolationIcon:cr,isSDF:Ci,hasHalo:$u,tile:un,labelPlaneMatrixInv:kl};if(Ne&&gn.canOverlap){et=!0;const as=qn.segments.get();for(const Ol of as)Xt.push({segments:new h.SegmentVector([Ol]),sortKey:Ol.sortKey,state:$c})}else Xt.push({segments:qn.segments,sortKey:0,state:$c})}et&&Xt.sort((tt,un)=>tt.sortKey-un.sortKey);for(const tt of Xt){const un=tt.state;if(f.terrain&&f.terrain.setupElevationDraw(un.tile,un.program,{useDepthForOcclusion:!Vt,labelPlaneMatrixInv:un.labelPlaneMatrixInv}),pe.activeTexture.set(Ce.TEXTURE0),un.atlasTexture.bind(un.atlasInterpolation,Ce.CLAMP_TO_EDGE),un.atlasTextureIcon&&(pe.activeTexture.set(Ce.TEXTURE1),un.atlasTextureIcon&&un.atlasTextureIcon.bind(un.atlasInterpolationIcon,Ce.CLAMP_TO_EDGE)),un.isSDF){const gn=un.uniformValues;un.hasHalo&&(gn.u_is_halo=1,Tl(un.buffers,tt.segments,d,f,un.program,je,Q,ae,gn)),gn.u_is_halo=0}Tl(un.buffers,tt.segments,d,f,un.program,je,Q,ae,un.uniformValues)}}function Tl(f,i,d,v,E,M,k,P,B){const Z=v.context;E.draw(Z,Z.gl.TRIANGLES,M,k,P,h.CullFaceMode.disabled,B,d.id,f.layoutVertexBuffer,f.indexBuffer,i,d.paint,v.transform.zoom,f.programConfigurations.get(d.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer)}function Dl(f,i,d,v,E,M,k){const P=f.context.gl,B=d.paint.get("fill-pattern"),Z=B&&B.constantOr(1),Q=d.getCrossfadeParameters();let ae,pe,Ce,Se,xe;k?(pe=Z&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=P.LINES):(pe=Z?"fillPattern":"fill",ae=P.TRIANGLES);for(const We of v){const Me=i.getTile(We);if(Z&&!Me.patternsLoaded())continue;const Le=Me.getBucket(d);if(!Le)continue;f.prepareDrawTile();const Ne=Le.programConfigurations.get(d.id),et=f.useProgram(pe,Ne);Z&&(f.context.activeTexture.set(P.TEXTURE0),Me.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Ne.updatePaintBuffers(Q));const je=B.constantOr(null);if(je&&Me.imageAtlas){const _t=Me.imageAtlas,Vt=_t.patternPositions[je.to.toString()],Xt=_t.patternPositions[je.from.toString()];Vt&&Xt&&Ne.setConstantPatternPositions(Vt,Xt)}const Ke=f.translatePosMatrix(We.projMatrix,Me,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(k){Se=Le.indexBuffer2,xe=Le.segments2;const _t=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[P.drawingBufferWidth,P.drawingBufferHeight];Ce="fillOutlinePattern"===pe&&Z?au(Ke,f,Q,Me,_t):qo(Ke,_t)}else Se=Le.indexBuffer,xe=Le.segments,Ce=Z?Kl(Ke,f,Q,Me):Ni(Ke);f.prepareDrawProgram(f.context,et,We.toUnwrapped()),et.draw(f.context,ae,E,f.stencilModeForClipping(We),M,h.CullFaceMode.disabled,Ce,d.id,Le.layoutVertexBuffer,Se,xe,d.paint,f.transform.zoom,Ne)}}function zi(f,i,d,v,E,M,k){const P=f.context,B=P.gl,Z=f.transform,Q=d.paint.get("fill-extrusion-pattern"),ae=Q.constantOr(1),pe=d.getCrossfadeParameters(),Ce=d.paint.get("fill-extrusion-opacity"),Se="globe"===Z.projection.name?h.fillExtrusionHeightLift():0,xe="globe"===Z.projection.name,We=xe?h.globeToMercatorTransition(Z.zoom):0,Me=[h.mercatorXfromLng(Z.center.lng),h.mercatorYfromLat(Z.center.lat)],Le=[];xe&&Le.push("PROJECTION_GLOBE_VIEW");for(const Ne of v){const et=i.getTile(Ne),je=et.getBucket(d);if(!je||je.projection.name!==Z.projection.name)continue;const Ke=je.programConfigurations.get(d.id),_t=f.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",Ke,Le);if(f.terrain){const un=f.terrain;if(f.style.terrainSetForDrapingOnly())un.setupElevationDraw(et,_t,{useMeterToDem:!0});else{if(!je.enableTerrain)continue;if(un.setupElevationDraw(et,_t,{useMeterToDem:!0}),oo(P,i,Ne,je,d,un),!je.centroidVertexBuffer){const gn=_t.attributes.a_centroid_pos;void 0!==gn&&B.vertexAttrib2f(gn,0,0)}}}ae&&(f.context.activeTexture.set(B.TEXTURE0),et.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ke.updatePaintBuffers(pe));const Vt=Q.constantOr(null);if(Vt&&et.imageAtlas){const un=et.imageAtlas,gn=un.patternPositions[Vt.to.toString()],qn=un.patternPositions[Vt.from.toString()];gn&&qn&&Ke.setConstantPatternPositions(gn,qn)}const Xt=f.translatePosMatrix(Ne.projMatrix,et,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),jt=Z.projection.createInversionMatrix(Z,Ne.canonical),Nt=d.paint.get("fill-extrusion-vertical-gradient"),tt=ae?el(Xt,f,Nt,Ce,Ne,pe,et,Se,We,Me,jt):su(Xt,f,Nt,Ce,Ne,Se,We,Me,jt);f.prepareDrawProgram(P,_t,Ne.toUnwrapped()),_t.draw(P,P.gl.TRIANGLES,E,M,k,h.CullFaceMode.backCCW,tt,d.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,d.paint,f.transform.zoom,Ke,f.terrain?je.centroidVertexBuffer:null,xe?je.layoutVertexExtBuffer:null)}}function oo(f,i,d,v,E,M){const k=[Me=>{let Le=Me.canonical.x-1,Ne=Me.wrap;return Le<0&&(Le=(1<<Me.canonical.z)-1,Ne--),new h.OverscaledTileID(Me.overscaledZ,Ne,Me.canonical.z,Le,Me.canonical.y)},Me=>{let Le=Me.canonical.x+1,Ne=Me.wrap;return Le===1<<Me.canonical.z&&(Le=0,Ne++),new h.OverscaledTileID(Me.overscaledZ,Ne,Me.canonical.z,Le,Me.canonical.y)},Me=>new h.OverscaledTileID(Me.overscaledZ,Me.wrap,Me.canonical.z,Me.canonical.x,(0===Me.canonical.y?1<<Me.canonical.z:Me.canonical.y)-1),Me=>new h.OverscaledTileID(Me.overscaledZ,Me.wrap,Me.canonical.z,Me.canonical.x,Me.canonical.y===(1<<Me.canonical.z)-1?0:Me.canonical.y+1)],P=Me=>{const Le=i.getSource().minzoom,Ne=je=>{const Ke=i.getTileByID(je);if(Ke&&Ke.hasData())return Ke.getBucket(E)},et=[0,-1,1];for(const je of et){if(Me.overscaledZ+je<Le)continue;const Ke=Ne(Me.calculateScaledKey(Me.overscaledZ+je));if(Ke)return Ke}},B=[0,0,0],Z=(Me,Le)=>(B[0]=Math.min(Me.min.y,Le.min.y),B[1]=Math.max(Me.max.y,Le.max.y),B[2]=h.EXTENT-Le.min.x>Me.max.x?Le.min.x-h.EXTENT:Me.max.x,B),Q=(Me,Le)=>(B[0]=Math.min(Me.min.x,Le.min.x),B[1]=Math.max(Me.max.x,Le.max.x),B[2]=h.EXTENT-Le.min.y>Me.max.y?Le.min.y-h.EXTENT:Me.max.y,B),ae=[(Me,Le)=>Z(Me,Le),(Me,Le)=>Z(Le,Me),(Me,Le)=>Q(Me,Le),(Me,Le)=>Q(Le,Me)],pe=new h.pointGeometry(0,0);let Ce,Se,xe;const We=(Me,Le,Ne,et,je)=>{const Ke=[[et?Ne:Me,et?Me:Ne,0],[et?Ne:Le,et?Le:Ne,0]],_t=je<0?h.EXTENT+je:je,Vt=[et?_t:(Me+Le)/2,et?(Me+Le)/2:_t,0];return 0===Ne&&je<0||0!==Ne&&je>0?M.getForTilePoints(xe,[Vt],!0,Se):Ke.push(Vt),M.getForTilePoints(d,Ke,!0,Ce),Math.max(Ke[0][2],Ke[1][2],Vt[2])/M.exaggeration()};for(let Me=0;Me<4;Me++){const Le=(Me<2?1:5)-Me,Ne=v.borders[Me];if(0===Ne.length)continue;const et=xe=k[Me](d),je=P(et);if(!(je&&je instanceof h.FillExtrusionBucket&&je.enableTerrain)||v.borderDoneWithNeighborZ[Me]===je.canonical.z&&je.borderDoneWithNeighborZ[Le]===v.canonical.z||(Se=M.findDEMTileFor(et),!Se||!Se.dem))continue;if(!Ce){const Xt=M.findDEMTileFor(d);if(!Xt||!Xt.dem)return;Ce=Xt}const Ke=je.borders[Le];let _t=0;const Vt=je.borderDoneWithNeighborZ[Le]!==v.canonical.z;if(v.canonical.z===je.canonical.z){for(let Xt=0;Xt<Ne.length;Xt++){const jt=v.featuresOnBorder[Ne[Xt]],Nt=jt.borders[Me];let tt;for(;_t<Ke.length&&(tt=je.featuresOnBorder[Ke[_t]],!(tt.borders[Le][1]>Nt[0]+3));)Vt&&je.encodeCentroid(void 0,tt,!1),_t++;if(tt&&_t<Ke.length){const un=_t;let gn=0;for(;!(tt.borders[Le][0]>Nt[1]-3)&&(gn++,++_t!==Ke.length);)tt=je.featuresOnBorder[Ke[_t]];if(tt=je.featuresOnBorder[Ke[un]],jt.intersectsCount()>1||tt.intersectsCount()>1||1!==gn){1!==gn&&(_t=un),v.encodeCentroid(void 0,jt,!1),Vt&&je.encodeCentroid(void 0,tt,!1);continue}const qn=ae[Me](jt,tt),en=Me%2?h.EXTENT-1:0;pe.x=We(qn[0],Math.min(h.EXTENT-1,qn[1]),en,Me<2,qn[2]),pe.y=0,v.encodeCentroid(pe,jt,!1),Vt&&je.encodeCentroid(pe,tt,!1)}else v.encodeCentroid(void 0,jt,!1)}v.borderDoneWithNeighborZ[Me]=je.canonical.z,v.needsCentroidUpdate=!0,Vt&&(je.borderDoneWithNeighborZ[Le]=v.canonical.z,je.needsCentroidUpdate=!0)}else{for(const Xt of Ne)v.encodeCentroid(void 0,v.featuresOnBorder[Xt],!1);if(Vt){for(const Xt of Ke)je.encodeCentroid(void 0,je.featuresOnBorder[Xt],!1);je.borderDoneWithNeighborZ[Le]=v.canonical.z,je.needsCentroidUpdate=!0}v.borderDoneWithNeighborZ[Me]=je.canonical.z,v.needsCentroidUpdate=!0}}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&0!==v.centroidVertexArray.length)&&v.uploadCentroid(f)}const Da=new h.Color(1,0,0,1),Fo=new h.Color(0,1,0,1),yc=new h.Color(0,0,1,1),zc=new h.Color(1,0,1,1),nl=new h.Color(0,1,1,1);function jd(f,i,d,v){Ir(f,0,i+d/2,f.transform.width,d,v)}function sd(f,i,d,v){Ir(f,i-d/2,0,d,f.transform.height,v)}function Ir(f,i,d,v,E,M){const k=f.context,P=k.gl;P.enable(P.SCISSOR_TEST),P.scissor(i*h.exported.devicePixelRatio,d*h.exported.devicePixelRatio,v*h.exported.devicePixelRatio,E*h.exported.devicePixelRatio),k.clear({color:M}),P.disable(P.SCISSOR_TEST)}function tr(f,i,d){const v=f.context,E=v.gl,M="globe"===f.transform.projection.name,k=d.projMatrix,P=f.useProgram("debug",null,M?["PROJECTION_GLOBE_VIEW"]:null),B=i.getTileByID(d.key);f.terrain&&f.terrain.setupElevationDraw(B,P);const Z=h.DepthMode.disabled,Q=h.StencilMode.disabled,ae=f.colorModeForRenderPass();v.activeTexture.set(E.TEXTURE0),f.emptyTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),M?B._makeGlobeTileDebugBuffers(f.context,f.transform.projection):B._makeDebugTileBoundsBuffers(f.context,f.transform.projection);const Ce=B._tileDebugBuffer||f.debugBuffer,Se=B._tileDebugIndexBuffer||f.debugIndexBuffer,xe=B._tileDebugSegments||f.debugSegments;P.draw(v,E.LINE_STRIP,Z,Q,ae,h.CullFaceMode.disabled,te(k,h.Color.red),"$debug",Ce,Se,xe,null,null,null,B._globeTileDebugBorderBuffer);const We=B.latestRawTileData,Me=Math.floor((We&&We.byteLength||0)/1024),Le=i.getTile(d).tileSize,Ne=512/Math.min(Le,512)*(d.overscaledZ/f.transform.zoom)*.5;let et=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(et+=` => ${d.overscaledZ}`),function(Vt,Xt){Vt.initDebugOverlayCanvas();const jt=Vt.debugOverlayCanvas,Nt=Vt.context.gl,tt=Vt.debugOverlayCanvas.getContext("2d");tt.clearRect(0,0,jt.width,jt.height),tt.shadowColor="white",tt.shadowBlur=2,tt.lineWidth=1.5,tt.strokeStyle="white",tt.textBaseline="top",tt.font="bold 36px Open Sans, sans-serif",tt.fillText(Xt,5,5),tt.strokeText(Xt,5,5),Vt.debugOverlayTexture.update(jt),Vt.debugOverlayTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}(f,`${et} ${Me}kb`);const je=B._tileDebugTextBuffer||f.debugBuffer,Ke=B._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,_t=B._tileDebugTextSegments||f.debugSegments;P.draw(v,E.TRIANGLES,Z,Q,h.ColorMode.alphaBlended,h.CullFaceMode.disabled,te(k,h.Color.transparent,Ne),"$debug",je,Ke,_t,null,null,null,B._globeTileDebugTextBuffer)}const Gd=h.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Zl}=Gd;function $o(f,i,d,v){f.emplaceBack(i,d,v)}class vc{constructor(i){this.vertexArray=new h.StructArrayLayout3f12,this.indices=new h.StructArrayLayout3ui6,$o(this.vertexArray,-1,-1,1),$o(this.vertexArray,1,-1,1),$o(this.vertexArray,-1,1,1),$o(this.vertexArray,1,1,1),$o(this.vertexArray,-1,-1,-1),$o(this.vertexArray,1,-1,-1),$o(this.vertexArray,-1,1,-1),$o(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Zl),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=h.SegmentVector.simpleSegment(0,0,36,12)}}function bc(f,i,d,v,E,M){const k=f.gl,P=i.paint.get("sky-atmosphere-color"),B=i.paint.get("sky-atmosphere-halo-color"),Z=i.paint.get("sky-atmosphere-sun-intensity"),Q={u_matrix_3f:h.fromMat4(h.create$1(),v),u_sun_direction:E,u_sun_intensity:Z,u_color_tint_r:[(Se=P).r,Se.g,Se.b,Se.a],u_color_tint_m:[(xe=B).r,xe.g,xe.b,xe.a],u_luminance:5e-5};var Se,xe;k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+M,i.skyboxTexture,0),d.draw(f,k.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.frontCW,Q,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const sa=h.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class cu{constructor(i){const d=new h.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const v=new h.StructArrayLayout3ui6;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(d,sa.members),this.indexBuffer=i.createIndexBuffer(v),this.segments=h.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Vc={symbol:function(f,i,d,v,E){if("translucent"!==f.renderPass)return;const M=h.StencilMode.disabled,k=f.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(P,B,Z,Q,ae,pe,Ce){const Se=B.transform,xe="map"===ae,We="map"===pe;for(const Me of P){const Le=Q.getTile(Me),Ne=Le.getBucket(Z);if(!Ne||!Ne.text||!Ne.text.segments.get().length)continue;const et=h.evaluateSizeForZoom(Ne.textSizeData,Se.zoom),je=dr(Me,Ne.getProjection(),Se),Ke=Se.calculatePixelsToTileUnitsMatrix(Le),_t=Li(je,Le.tileID.canonical,We,xe,Se,Ne.getProjection(),Ke),Vt="none"!==Z.layout.get("icon-text-fit")&&Ne.hasIconData();if(et){const Xt=Math.pow(2,Se.zoom-Le.tileID.overscaledZ);oa(Ne,xe,We,Ce,h.symbolSize,Se,_t,Me,Xt,et,Vt)}}}(v,f,d,i,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),E),0!==d.paint.get("icon-opacity").constantOr(1)&&_c(f,i,d,v,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),M,k),0!==d.paint.get("text-opacity").constantOr(1)&&_c(f,i,d,v,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),M,k),i.map.showCollisionBoxes&&(qs(f,i,d,v,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),qs(f,i,d,v,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,d,v){if("translucent"!==f.renderPass)return;const E=d.paint.get("circle-opacity"),M=d.paint.get("circle-stroke-width"),k=d.paint.get("circle-stroke-opacity"),P=void 0!==d.layout.get("circle-sort-key").constantOr(1);if(0===E.constantOr(1)&&(0===M.constantOr(1)||0===k.constantOr(1)))return;const B=f.context,Z=B.gl,Q=f.transform,ae=f.depthModeForSublayer(0,h.DepthMode.ReadOnly),pe=h.StencilMode.disabled,Ce=f.colorModeForRenderPass(),Se="globe"===Q.projection.name,xe=[h.mercatorXfromLng(Q.center.lng),h.mercatorYfromLat(Q.center.lat)],We=[];for(let Le=0;Le<v.length;Le++){const Ne=v[Le],et=i.getTile(Ne),je=et.getBucket(d);if(!je||je.projection.name!==Q.projection.name)continue;const Ke=je.programConfigurations.get(d.id),_t=fs(d);Se&&_t.push("PROJECTION_GLOBE_VIEW");const Vt=f.useProgram("circle",Ke,_t),Xt=je.layoutVertexBuffer,jt=je.globeExtVertexBuffer,Nt=je.indexBuffer,tt=Q.projection.createInversionMatrix(Q,Ne.canonical),un={programConfiguration:Ke,program:Vt,layoutVertexBuffer:Xt,globeExtVertexBuffer:jt,indexBuffer:Nt,uniformValues:lu(f,Ne,et,tt,xe,d),tile:et};if(P){const gn=je.segments.get();for(const qn of gn)We.push({segments:new h.SegmentVector([qn]),sortKey:qn.sortKey,state:un})}else We.push({segments:je.segments,sortKey:0,state:un})}P&&We.sort((Le,Ne)=>Le.sortKey-Ne.sortKey);const Me={useDepthForOcclusion:!Se};for(const Le of We){const{programConfiguration:Ne,program:et,layoutVertexBuffer:je,globeExtVertexBuffer:Ke,indexBuffer:_t,uniformValues:Vt,tile:Xt}=Le.state,jt=Le.segments;f.terrain&&f.terrain.setupElevationDraw(Xt,et,Me),f.prepareDrawProgram(B,et,Xt.tileID.toUnwrapped()),et.draw(B,Z.TRIANGLES,ae,pe,Ce,h.CullFaceMode.disabled,Vt,d.id,je,_t,jt,d.paint,Q.zoom,Ne,Se?Ke:null)}},heatmap:function(f,i,d,v){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){const E=f.context,M=E.gl,k=h.StencilMode.disabled,P=new h.ColorMode([M.ONE,M.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(Ce,Se,xe,We){const Me=Ce.gl,Le=Se.width*We,Ne=Se.height*We;Ce.activeTexture.set(Me.TEXTURE1),Ce.viewport.set([0,0,Le,Ne]);let et=xe.heatmapFbo;if(!et||et&&(et.width!==Le||et.height!==Ne)){et&&et.destroy();const je=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,je),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.LINEAR),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.LINEAR),et=xe.heatmapFbo=Ce.createFramebuffer(Le,Ne,!1),function(Ke,_t,Vt,Xt,jt,Nt){const tt=Ke.gl;tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,jt,Nt,0,tt.RGBA,Ke.extRenderToTextureHalfFloat?Ke.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),Xt.colorAttachment.set(Vt)}(Ce,0,je,et,Le,Ne)}else Me.bindTexture(Me.TEXTURE_2D,et.colorAttachment.get()),Ce.bindFramebuffer.set(et.framebuffer)})(E,f,d,"globe"===f.transform.projection.name?.5:.25),E.clear({color:h.Color.transparent});const B=f.transform,Z="globe"===B.projection.name,Q=Z?["PROJECTION_GLOBE_VIEW"]:null,ae=Z?h.CullFaceMode.frontCCW:h.CullFaceMode.disabled,pe=[h.mercatorXfromLng(B.center.lng),h.mercatorYfromLat(B.center.lat)];for(let Ce=0;Ce<v.length;Ce++){const Se=v[Ce];if(i.hasRenderableParent(Se))continue;const xe=i.getTile(Se),We=xe.getBucket(d);if(!We||We.projection.name!==B.projection.name)continue;const Me=We.programConfigurations.get(d.id),Le=f.useProgram("heatmap",Me,Q),{zoom:Ne}=f.transform;f.terrain&&f.terrain.setupElevationDraw(xe,Le),f.prepareDrawProgram(E,Le,Se.toUnwrapped());const et=B.projection.createInversionMatrix(B,Se.canonical);Le.draw(E,M.TRIANGLES,h.DepthMode.disabled,k,P,ae,X(f,Se,xe,et,pe,Ne,d.paint.get("heatmap-intensity")),d.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,d.paint,f.transform.zoom,Me,Z?We.globeExtVertexBuffer:null)}E.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(E,M){const k=E.context,P=k.gl,B=M.heatmapFbo;if(!B)return;k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,B.colorAttachment.get()),k.activeTexture.set(P.TEXTURE1);let Z=M.colorRampTexture;Z||(Z=M.colorRampTexture=new h.Texture(k,M.colorRamp,P.RGBA)),Z.bind(P.LINEAR,P.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(k,P.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,E.colorModeForRenderPass(),h.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:M.paint.get("heatmap-opacity")},M.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,M.paint,E.transform.zoom)}(f,d))},line:function(f,i,d,v){if("translucent"!==f.renderPass)return;const E=d.paint.get("line-opacity"),M=d.paint.get("line-width");if(0===E.constantOr(1)||0===M.constantOr(1))return;const k=f.depthModeForSublayer(0,h.DepthMode.ReadOnly),P=f.colorModeForRenderPass(),B=f.terrain&&f.terrain.renderingToTexture?1:h.exported.devicePixelRatio,Z=d.paint.get("line-dasharray"),Q=Z.constantOr(1),ae=d.layout.get("line-cap"),pe=d.paint.get("line-pattern"),Ce=pe.constantOr(1),Se=d.paint.get("line-gradient"),xe=d.getCrossfadeParameters(),We=Ce?"linePattern":"line",Me=f.context,Le=Me.gl,Ne=(je=>{const Ke=[];io(je)&&Ke.push("RENDER_LINE_DASH"),je.paint.get("line-gradient")&&Ke.push("RENDER_LINE_GRADIENT");const _t=je.paint.get("line-trim-offset");0===_t[0]&&0===_t[1]||Ke.push("RENDER_LINE_TRIM_OFFSET");const Vt=je.paint.get("line-pattern").constantOr(1),Xt=1!==je.paint.get("line-opacity").constantOr(1);return!Vt&&Xt&&Ke.push("RENDER_LINE_ALPHA_DISCARD"),Ke})(d);let et=Ne.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(et=!1);for(const je of v){const Ke=i.getTile(je);if(Ce&&!Ke.patternsLoaded())continue;const _t=Ke.getBucket(d);if(!_t)continue;f.prepareDrawTile();const Vt=_t.programConfigurations.get(d.id),Xt=f.useProgram(We,Vt,Ne),jt=pe.constantOr(null);if(jt&&Ke.imageAtlas){const Zn=Ke.imageAtlas,Xn=Zn.patternPositions[jt.to.toString()],Tn=Zn.patternPositions[jt.from.toString()];Xn&&Tn&&Vt.setConstantPatternPositions(Xn,Tn)}const Nt=Z.constantOr(null),tt=ae.constantOr(null);if(!Ce&&Nt&&tt&&Ke.lineAtlas){const Zn=Ke.lineAtlas,Xn=Zn.getDash(Nt.to,tt),Tn=Zn.getDash(Nt.from,tt);Xn&&Tn&&Vt.setConstantPatternPositions(Xn,Tn)}let[un,gn]=d.paint.get("line-trim-offset");("round"===tt||"square"===tt)&&un!==gn&&(0===un&&(un-=1),1===gn&&(gn+=1));const qn=f.terrain?je.projMatrix:null,en=Ce?gt(f,Ke,d,xe,qn,B):_e(f,Ke,d,xe,qn,_t.lineClipsArray.length,B,[un,gn]);if(Se){const Zn=_t.gradients[d.id];let Xn=Zn.texture;if(d.gradientVersion!==Zn.version){let Tn=256;if(d.stepInterpolant){const jn=i.getSource().maxzoom,Fi=je.canonical.z===jn?Math.ceil(1<<f.transform.maxZoom-je.canonical.z):1;Tn=h.clamp(h.nextPowerOfTwo(_t.maxLineLength/h.EXTENT*1024*Fi),256,Me.maxTextureSize)}Zn.gradient=h.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Tn,image:Zn.gradient||void 0,clips:_t.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new h.Texture(Me,Zn.gradient,Le.RGBA),Zn.version=d.gradientVersion,Xn=Zn.texture}Me.activeTexture.set(Le.TEXTURE1),Xn.bind(d.stepInterpolant?Le.NEAREST:Le.LINEAR,Le.CLAMP_TO_EDGE)}Q&&(Me.activeTexture.set(Le.TEXTURE0),Ke.lineAtlasTexture.bind(Le.LINEAR,Le.REPEAT),Vt.updatePaintBuffers(xe)),Ce&&(Me.activeTexture.set(Le.TEXTURE0),Ke.imageAtlasTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Vt.updatePaintBuffers(xe)),f.prepareDrawProgram(Me,Xt,je.toUnwrapped());const Ci=Zn=>{Xt.draw(Me,Le.TRIANGLES,k,Zn,P,h.CullFaceMode.disabled,en,d.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,d.paint,f.transform.zoom,Vt,_t.layoutVertexBuffer2)};if(et){const Zn=f.stencilModeForClipping(je).ref;0===Zn&&f.terrain&&Me.clear({stencil:0});const Xn={func:Le.EQUAL,mask:255};en.u_alpha_discard_threshold=.8,Ci(new h.StencilMode(Xn,Zn,255,Le.KEEP,Le.KEEP,Le.INVERT)),en.u_alpha_discard_threshold=0,Ci(new h.StencilMode(Xn,Zn,255,Le.KEEP,Le.KEEP,Le.KEEP))}else Ci(f.stencilModeForClipping(je))}et&&(f.resetStencilClippingMasks(),f.terrain&&Me.clear({stencil:0}))},fill:function(f,i,d,v){const E=d.paint.get("fill-color"),M=d.paint.get("fill-opacity");if(0===M.constantOr(1))return;const k=f.colorModeForRenderPass(),P=d.paint.get("fill-pattern"),B=f.opaquePassEnabledForLayer()&&!P.constantOr(1)&&1===E.constantOr(h.Color.transparent).a&&1===M.constantOr(0)?"opaque":"translucent";if(f.renderPass===B){const Z=f.depthModeForSublayer(1,"opaque"===f.renderPass?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly);Dl(f,i,d,v,Z,k,!1)}if("translucent"===f.renderPass&&d.paint.get("fill-antialias")){const Z=f.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,h.DepthMode.ReadOnly);Dl(f,i,d,v,Z,k,!0)}},"fill-extrusion":function(f,i,d,v){const E=d.paint.get("fill-extrusion-opacity");if(0!==E&&"translucent"===f.renderPass){const M=new h.DepthMode(f.context.gl.LEQUAL,h.DepthMode.ReadWrite,f.depthRangeFor3D);if(1!==E||d.paint.get("fill-extrusion-pattern").constantOr(1))zi(f,i,d,v,M,h.StencilMode.disabled,h.ColorMode.disabled),zi(f,i,d,v,M,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const k=f.colorModeForRenderPass();zi(f,i,d,v,M,h.StencilMode.disabled,k)}}},hillshade:function(f,i,d,v){if("offscreen"!==f.renderPass&&"translucent"!==f.renderPass)return;const E=f.context,M=f.depthModeForSublayer(0,h.DepthMode.ReadOnly),k=f.colorModeForRenderPass(),P=f.terrain&&f.terrain.renderingToTexture,[B,Z]="translucent"!==f.renderPass||P?[{},v]:f.stencilConfigForOverlap(v);for(const Q of Z){const ae=i.getTile(Q);if(ae.needsHillshadePrepare&&"offscreen"===f.renderPass)Ca(f,ae,d,M,h.StencilMode.disabled,k);else if("translucent"===f.renderPass){const pe=P&&f.terrain?f.terrain.stencilModeForRTTOverlap(Q):B[Q.overscaledZ];fc(f,Q,ae,d,M,pe,k)}}E.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,i,d,v,E,M){if("translucent"!==f.renderPass||0===d.paint.get("raster-opacity")||!v.length)return;const k=f.context,P=k.gl,B=i.getSource(),Z=f.useProgram("raster"),Q=f.colorModeForRenderPass(),ae=f.terrain&&f.terrain.renderingToTexture,[pe,Ce]=B instanceof me||ae?[{},v]:f.stencilConfigForOverlap(v),Se=Ce[Ce.length-1].overscaledZ,xe=!f.options.moving;for(const We of Ce){const Me=ae?h.DepthMode.disabled:f.depthModeForSublayer(We.overscaledZ-Se,1===d.paint.get("raster-opacity")?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly,P.LESS),Le=We.toUnwrapped(),Ne=i.getTile(We);if(ae&&(!Ne||!Ne.hasData()))continue;const et=ae?We.projMatrix:f.transform.calculateProjMatrix(Le,xe),je=f.terrain&&ae?f.terrain.stencilModeForRTTOverlap(We):pe[We.overscaledZ],Ke=M?0:d.paint.get("raster-fade-duration");Ne.registerFadeDuration(Ke);const _t=i.findLoadedParent(We,0),Vt=Xl(Ne,_t,i,f.transform,Ke);let Xt,jt;f.terrain&&f.terrain.prepareDrawTile();const Nt="nearest"===d.paint.get("raster-resampling")?P.NEAREST:P.LINEAR;k.activeTexture.set(P.TEXTURE0),Ne.texture.bind(Nt,P.CLAMP_TO_EDGE),k.activeTexture.set(P.TEXTURE1),_t?(_t.texture.bind(Nt,P.CLAMP_TO_EDGE),Xt=Math.pow(2,_t.tileID.overscaledZ-Ne.tileID.overscaledZ),jt=[Ne.tileID.canonical.x*Xt%1,Ne.tileID.canonical.y*Xt%1]):Ne.texture.bind(Nt,P.CLAMP_TO_EDGE);const tt=mi(et,jt||[0,0],Xt||1,Vt,d,B instanceof me?B.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(k,Z,Le),B instanceof me)B.boundsBuffer&&B.boundsSegments&&Z.draw(k,P.TRIANGLES,Me,h.StencilMode.disabled,Q,h.CullFaceMode.disabled,tt,d.id,B.boundsBuffer,f.quadTriangleIndexBuffer,B.boundsSegments);else{const{tileBoundsBuffer:un,tileBoundsIndexBuffer:gn,tileBoundsSegments:qn}=f.getTileBoundsBuffers(Ne);Z.draw(k,P.TRIANGLES,Me,je,Q,h.CullFaceMode.disabled,tt,d.id,un,gn,qn)}}f.resetStencilClippingMasks()},background:function(f,i,d,v){const E=d.paint.get("background-color"),M=d.paint.get("background-opacity");if(0===M)return;const k=f.context,P=k.gl,B=f.transform,Z=B.tileSize,Q=d.paint.get("background-pattern");if(f.isPatternMissing(Q))return;const ae=!Q&&1===E.a&&1===M&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==ae)return;const pe=h.StencilMode.disabled,Ce=f.depthModeForSublayer(0,"opaque"===ae?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly),Se=f.colorModeForRenderPass(),xe=f.useProgram(Q?"backgroundPattern":"background");let We,Me=v;Me||(We=f.getBackgroundTiles(),Me=Object.values(We).map(Ne=>Ne.tileID)),Q&&(k.activeTexture.set(P.TEXTURE0),f.imageManager.bind(f.context));const Le=d.getCrossfadeParameters();for(const Ne of Me){const et=Ne.toUnwrapped(),je=v?Ne.projMatrix:f.transform.calculateProjMatrix(et);f.prepareDrawTile();const Ke=i?i.getTile(Ne):We?We[Ne.key]:new h.Tile(Ne,Z,B.zoom,f),_t=Q?tl(je,M,f,Q,{tileID:Ne,tileSize:Z},Le):Xr(je,M,E);f.prepareDrawProgram(k,xe,et);const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:Xt,tileBoundsSegments:jt}=f.getTileBoundsBuffers(Ke);xe.draw(k,P.TRIANGLES,Ce,pe,Se,h.CullFaceMode.disabled,_t,d.id,Vt,Xt,jt)}},sky:function(f,i,d){const v=f.transform,E="mercator"===v.projection.name||"globe"===v.projection.name?1:h.smoothstep(7,8,v.zoom),M=d.paint.get("sky-opacity")*E;if(0===M)return;const k=f.context,P=d.paint.get("sky-type"),B=new h.DepthMode(k.gl.LEQUAL,h.DepthMode.ReadOnly,[0,1]),Z=f.frameCounter/1e3%1;"atmosphere"===P?"offscreen"===f.renderPass?d.needsSkyboxCapture(f)&&(function(Q,ae,pe,Ce){const Se=Q.context,xe=Se.gl;let We=ae.skyboxFbo;if(!We){We=ae.skyboxFbo=Se.createFramebuffer(32,32,!1),ae.skyboxGeometry=new vc(Se),ae.skyboxTexture=Se.gl.createTexture(),xe.bindTexture(xe.TEXTURE_CUBE_MAP,ae.skyboxTexture),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MAG_FILTER,xe.LINEAR);for(let et=0;et<6;++et)xe.texImage2D(xe.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,xe.RGBA,32,32,0,xe.RGBA,xe.UNSIGNED_BYTE,null)}Se.bindFramebuffer.set(We.framebuffer),Se.viewport.set([0,0,32,32]);const Me=ae.getCenter(Q,!0),Le=Q.useProgram("skyboxCapture"),Ne=new Float64Array(16);h.identity(Ne),h.rotateY(Ne,Ne,.5*-Math.PI),bc(Se,ae,Le,Ne,Me,0),h.identity(Ne),h.rotateY(Ne,Ne,.5*Math.PI),bc(Se,ae,Le,Ne,Me,1),h.identity(Ne),h.rotateX(Ne,Ne,.5*-Math.PI),bc(Se,ae,Le,Ne,Me,2),h.identity(Ne),h.rotateX(Ne,Ne,.5*Math.PI),bc(Se,ae,Le,Ne,Me,3),h.identity(Ne),bc(Se,ae,Le,Ne,Me,4),h.identity(Ne),h.rotateY(Ne,Ne,Math.PI),bc(Se,ae,Le,Ne,Me,5),Se.viewport.set([0,0,Q.width,Q.height])}(f,d),d.markSkyboxValid(f)):"sky"===f.renderPass&&function(Q,ae,pe,Ce,Se){const xe=Q.context,We=xe.gl,Me=Q.transform,Le=Q.useProgram("skybox");xe.activeTexture.set(We.TEXTURE0),We.bindTexture(We.TEXTURE_CUBE_MAP,ae.skyboxTexture);const Ne=((et,je,Ke,_t,Vt)=>({u_matrix:et,u_sun_direction:je,u_cubemap:0,u_opacity:_t,u_temporal_offset:Vt}))(Me.skyboxMatrix,ae.getCenter(Q,!1),0,Ce,Se);Q.prepareDrawProgram(xe,Le),Le.draw(xe,We.TRIANGLES,pe,h.StencilMode.disabled,Q.colorModeForRenderPass(),h.CullFaceMode.backCW,Ne,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(f,d,B,M,Z):"gradient"===P&&"sky"===f.renderPass&&function(Q,ae,pe,Ce,Se){const xe=Q.context,We=xe.gl,Me=Q.transform,Le=Q.useProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new vc(xe)),xe.activeTexture.set(We.TEXTURE0);let Ne=ae.colorRampTexture;Ne||(Ne=ae.colorRampTexture=new h.Texture(xe,ae.colorRamp,We.RGBA)),Ne.bind(We.LINEAR,We.CLAMP_TO_EDGE);const et=(je=Me.skyboxMatrix,Ke=ae.getCenter(Q,!1),_t=ae.paint.get("sky-gradient-radius"),Vt=Ce,Xt=Se,{u_matrix:je,u_color_ramp:0,u_center_direction:Ke,u_radius:h.degToRad(_t),u_opacity:Vt,u_temporal_offset:Xt});var je,Ke,_t,Vt,Xt;Q.prepareDrawProgram(xe,Le),Le.draw(xe,We.TRIANGLES,pe,h.StencilMode.disabled,Q.colorModeForRenderPass(),h.CullFaceMode.backCW,et,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(f,d,B,M,Z)},debug:function(f,i,d){for(let v=0;v<d.length;v++)tr(f,i,d[v])},custom:function(f,i,d){const v=f.context,E=d.implementation;if(f.transform.projection.unsupportedLayers&&f.transform.projection.unsupportedLayers.includes("custom"))h.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===f.renderPass){const M=E.prerender;M&&(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),M.call(E,v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(h.StencilMode.disabled);const M="3d"===E.renderingMode?new h.DepthMode(f.context.gl.LEQUAL,h.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,h.DepthMode.ReadOnly);v.setDepthMode(M),E.render(v.gl,f.transform.customLayerMatrix()),v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}};class Ki{constructor(i,d){this.context=new de(i),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=h.SourceCache.maxUnderzooming+h.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rs,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,d){const v=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new vr(this,i));const E=this._terrain;this.transform.elevation=v?E:null,E.update(i,this.transform,d)}_updateFog(i){const d=i.fog;if(!d||"globe"===this.transform.projection.name||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,E]=d.getFovAdjustedRange(this.transform._fov);if(v>E)return void(this.transform.fogCullDistSq=null);const M=v+.78*(E-v);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,d){if(this.width=i*h.exported.devicePixelRatio,this.height=d*h.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._layers[v].resize()}setup(){const i=this.context,d=new h.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(h.EXTENT,0),d.emplaceBack(0,h.EXTENT),d.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(d,h.posAttributes.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const v=new h.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(h.EXTENT,0),v.emplaceBack(0,h.EXTENT),v.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=i.createVertexBuffer(v,h.posAttributes.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const E=new h.StructArrayLayout2i4;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(E,h.posAttributes.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const M=new h.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(h.EXTENT,0,h.EXTENT,0),M.emplaceBack(0,h.EXTENT,0,h.EXTENT),M.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(M,h.boundsAttributes.members),this.mercatorBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const k=new h.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const P=new h.StructArrayLayout1ui2;for(const Z of[0,1,3,2,0])P.emplaceBack(Z);this.debugIndexBuffer=i.createIndexBuffer(P),this.emptyTexture=new h.Texture(i,new h.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=h.create();const B=this.context.gl;this.stencilClearMode=new h.StencilMode({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.loadTimeStamps.push(h.window.performance.now()),this.atmosphereBuffer=new cu(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,d=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,d.TRIANGLES,h.DepthMode.disabled,this.stencilClearMode,h.ColorMode.disabled,h.CullFaceMode.disabled,ia(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,d,v){if(!d||this.currentStencilSource===d.id||!i.isTileClipped()||!v||0===v.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let P=!1;for(const B of v)if(void 0===this._tileClippingMaskIDs[B.key]){P=!0;break}if(!P)return}this.currentStencilSource=d.id;const E=this.context,M=E.gl;this.nextStencilID+v.length>256&&this.clearStencil(),E.setColorMode(h.ColorMode.disabled),E.setDepthMode(h.DepthMode.disabled);const k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of v){const B=d.getTile(P),Z=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,{tileBoundsBuffer:Q,tileBoundsIndexBuffer:ae,tileBoundsSegments:pe}=this.getTileBoundsBuffers(B);k.draw(E,M.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:M.ALWAYS,mask:0},Z,255,M.KEEP,M.KEEP,M.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,ia(P.projMatrix),"$clipping",Q,ae,pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,d=this.context.gl;return new h.StencilMode({func:d.NOTEQUAL,mask:255},i,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const d=this.context.gl;return new h.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(i){const d=this.context.gl,v=i.sort((k,P)=>P.overscaledZ-k.overscaledZ),E=v[v.length-1].overscaledZ,M=v[0].overscaledZ-E+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const k={};for(let P=0;P<M;P++)k[P+E]=new h.StencilMode({func:d.GEQUAL,mask:255},P+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=M,[k,v]}return[{[E]:h.StencilMode.disabled},v]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new h.ColorMode([i.CONSTANT_COLOR,i.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?h.ColorMode.unblended:h.ColorMode.alphaBlended}depthModeForSublayer(i,d,v){if(!this.opaquePassEnabledForLayer())return h.DepthMode.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new h.DepthMode(v||this.context.gl.LEQUAL,d,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,d){this.style=i,this.options=d,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const v=this.style.order,E=this.style._sourceCaches;for(const B in E){const Z=E[B];Z.used&&Z.prepare(this.context)}const M={},k={},P={};for(const B in E){const Z=E[B];M[B]=Z.getVisibleCoordinates(),k[B]=M[B].slice().reverse(),P[B]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<v.length;B++)if(this.style._layers[v[B]].is3D()){this.opaquePassCutoff=B;break}if(this.terrain&&(this.terrain.updateTileBinding(P),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new h.GlobeSharedBuffers(this.context)),h.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const B of v){const Z=this.style._layers[B],Q=i._getLayerSourceCache(Z);if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const ae=Q?k[Q.id]:void 0;("custom"===Z.type||Z.isSky()||ae&&ae.length)&&this.renderLayer(this,Q,Z,ae)}if(this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[v[this.currentLayer]],Z=i._getLayerSourceCache(B);if(B.isSky())continue;const Q=Z?k[Z.id]:void 0;this._renderTileClippingMasks(B,Z,Q),this.renderLayer(this,Z,B,Q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(B,Z){const Q=B.context,ae=Q.gl,pe=B.transform,Ce=new h.DepthMode(ae.LEQUAL,h.DepthMode.ReadOnly,[0,1]),Se=B.useProgram("globeAtmosphere",null,"globe"===pe.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),xe=h.globeToMercatorTransition(pe.zoom),We=Z.properties.get("color").toArray01(),Me=Z.properties.get("high-color").toArray01(),Le=Z.properties.get("space-color").toArray01PremultipliedAlpha(),Ne=h.identity$1([]);h.rotateY$1(Ne,Ne,-h.degToRad(pe._center.lng)),h.rotateX$1(Ne,Ne,h.degToRad(pe._center.lat)),h.rotateZ$1(Ne,Ne,pe.angle),h.rotateX$1(Ne,Ne,-pe._pitch);const et=h.fromQuat(new Float32Array(16),Ne),je=h.mapValue(Z.properties.get("star-intensity"),0,1,0,.25),_t=h.mapValue(Z.properties.get("horizon-blend"),0,1,5e-4,.25),Vt=h.globeUseCustomAntiAliasing(B,Q,pe)&&5e-4===_t?pe.worldSize/(2*Math.PI*1.025)-1:pe.globeRadius,Xt=B.frameCounter/1e3%1,jt=h.length(pe.globeCenterInViewSpace),Nt=Math.sqrt(Math.pow(jt,2)-Math.pow(Vt,2)),tt=Math.acos(Nt/jt),un={u_frustum_tl:pe.frustumCorners.TL,u_frustum_tr:pe.frustumCorners.TR,u_frustum_br:pe.frustumCorners.BR,u_frustum_bl:pe.frustumCorners.BL,u_horizon:pe.frustumCorners.horizon,u_transition:xe,u_fadeout_range:_t,u_color:We,u_high_color:Me,u_space_color:Le,u_star_intensity:je,u_star_size:5*h.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Xt,u_horizon_angle:tt,u_rotation_matrix:et};B.prepareDrawProgram(Q,Se);const gn=B.atmosphereBuffer;gn&&Se.draw(Q,ae.TRIANGLES,Ce,h.StencilMode.disabled,h.ColorMode.alphaBlended,h.CullFaceMode.backCW,un,"skybox",gn.vertexBuffer,gn.indexBuffer,gn.segments)}(this,this.style.fog),this.renderPass="sky",(h.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const B=this.style._layers[v[this.currentLayer]],Z=i._getLayerSourceCache(B);B.isSky()&&this.renderLayer(this,Z,B,Z?k[Z.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;){const B=this.style._layers[v[this.currentLayer]],Z=i._getLayerSourceCache(B);if(B.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(B)){if(B.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Q=Z?("symbol"===B.type?P:k)[Z.id]:void 0;this._renderTileClippingMasks(B,Z,Z?M[Z.id]:void 0),this.renderLayer(this,Z,B,Q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let B=null;h.values(this.style._layers).forEach(Z=>{const Q=i._getLayerSourceCache(Z);Q&&!Z.isHidden(this.transform.zoom)&&(!B||B.getSource().maxzoom<Q.getSource().maxzoom)&&(B=Q)}),B&&this.options.showTileBoundaries&&Vc.debug(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const Z=B.transform.padding;jd(B,B.transform.height-(Z.top||0),3,Da),jd(B,Z.bottom||0,3,Fo),sd(B,Z.left||0,3,yc),sd(B,B.transform.width-(Z.right||0),3,zc);const Q=B.transform.centerPoint;var ae,pe,Ce,Se;Ir(ae=B,(pe=Q.x)-1,(Ce=B.transform.height-Q.y)-10,2,20,Se=nl),Ir(ae,pe-10,Ce-1,20,2,Se)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(h.window.performance.now()),this.saveCanvasCopy())}}renderLayer(i,d,v,E){v.isHidden(this.transform.zoom)||("background"===v.type||"sky"===v.type||"custom"===v.type||E&&E.length)&&(this.id=v.id,this.gpuTimingStart(v),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(v.type)||Vc[v.type](i,d,v,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let v=this.gpuTimers[i.id];v||(v=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),v.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,d=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),i.beginQueryEXT(i.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const d={};for(const v in i){const E=i[v],M=this.context.extTimerQuery,k=M.getQueryObjectEXT(E.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(E.query),d[v]=k}return d}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let v=0;for(const E of i)v+=d.getQueryObjectEXT(E,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(E);return v}translatePosMatrix(i,d,v,E,M){if(!v[0]&&!v[1])return i;const k=M?"map"===E?this.transform.angle:0:"viewport"===E?-this.transform.angle:0;if(k){const Z=Math.sin(k),Q=Math.cos(k);v=[v[0]*Q-v[1]*Z,v[0]*Z+v[1]*Q]}const P=[M?v[0]:tn(d,v[0],this.transform.zoom),M?v[1]:tn(d,v[1],this.transform.zoom),0],B=new Float32Array(16);return h.translate(B,i,P),B}saveTileTexture(i){const d=this._tileTextures[i.size[0]];d?d.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const d=this._tileTextures[i];return d&&d.length>0?d.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const d=this.imageManager.getPattern(i.from.toString()),v=this.imageManager.getPattern(i.to.toString());return!d||!v}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,d=this.style&&this.style.fog,v=[];return this.terrain&&!this.terrain.renderingToTexture&&v.push("TERRAIN"),d&&!i&&0!==d.getOpacity(this.transform.pitch)&&v.push("FOG"),i&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(i,d,v){this.cache=this.cache||{};const E=v||[],M=this.currentGlobalDefines().concat(E),k=Ao.cacheKey(i,M,d);return this.cache[k]||(this.cache[k]=new Ao(this.context,i,Zo[i],d,Fa[i],M)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=h.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new h.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,d,v){if(this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const M=E.getOpacity(this.transform.pitch),k=((P,B,Z,Q,ae,pe,Ce,Se,xe,We,Me)=>{const Le=P.transform,Ne=B.properties.get("color").toArray01();Ne[3]=Q;const et=P.frameCounter/1e3%1;return{u_fog_matrix:Z?Le.calculateFogTileMatrix(Z):P.identityMat,u_fog_range:B.getFovAdjustedRange(Le._fov),u_fog_color:Ne,u_fog_horizon_blend:B.properties.get("horizon-blend"),u_fog_temporal_offset:et,u_frustum_tl:ae,u_frustum_tr:pe,u_frustum_br:Ce,u_frustum_bl:Se,u_globe_pos:xe,u_globe_radius:We,u_viewport:Me,u_globe_transition:h.globeToMercatorTransition(Le.zoom),u_is_globe:+("globe"===Le.projection.name)}})(this,E,v,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*h.exported.devicePixelRatio,this.transform.height*h.exported.devicePixelRatio]);d.setFogUniformValues(i,k)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,d=i.createTexture();return i.bindTexture(i.TEXTURE_2D,d),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&0!==i.getOpacity(this.transform.pitch)}getBackgroundTiles(){const i=this._backgroundTiles,d=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const E of v)d[E.key]=i[E.key]||new h.Tile(E,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class br{constructor(i=0,d=0,v=0,E=0){if(isNaN(i)||i<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=d,this.left=v,this.right=E}interpolate(i,d,v){return null!=d.top&&null!=i.top&&(this.top=h.number(i.top,d.top,v)),null!=d.bottom&&null!=i.bottom&&(this.bottom=h.number(i.bottom,d.bottom,v)),null!=d.left&&null!=i.left&&(this.left=h.number(i.left,d.left,v)),null!=d.right&&null!=i.right&&(this.right=h.number(i.right,d.right,v)),this}getCenter(i,d){const v=h.clamp((this.left+i-this.right)/2,0,i),E=h.clamp((this.top+d-this.bottom)/2,0,d);return new h.pointGeometry(v,E)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new br(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fu(f,i){const d=h.getColumn(f,3);h.fromQuat(f,i),h.setColumn(f,3,d)}function Uc(f,i){const d=h.identity$1([]);return h.rotateZ$1(d,d,-i),h.rotateX$1(d,d,-f),d}function Na(f,i){const d=[f[0],f[1],0],v=[i[0],i[1],0];if(h.length(d)>=1e-15){const k=h.normalize([],d);h.scale$2(v,k,h.dot(v,k)),i[0]=v[0],i[1]=v[1]}const E=h.cross([],i,f);if(h.len(E)<1e-15)return null;const M=Math.atan2(-E[1],E[0]);return Uc(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),M)}class uu{constructor(i,d){this.position=i,this.orientation=d}get position(){return this._position}set position(i){if(i){const d=i instanceof h.MercatorCoordinate?i:new h.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(d.x=h.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(i,d){if(this.orientation=null,!this.position)return;const v=this._elevation?this._elevation.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(i)):0,E=this.position,M=h.MercatorCoordinate.fromLngLat(i,v),k=[M.x-E.x,M.y-E.y,M.z-E.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Na(k,d)}setPitchBearing(i,d){this.orientation=Uc(h.degToRad(i),h.degToRad(-d))}}class Ml{constructor(i,d){this._transform=h.identity([]),this.orientation=d,this.position=i}get mercatorPosition(){const i=this.position;return new h.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=h.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var d;i&&h.setColumn(this._transform,3,[(d=i)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||h.identity$1([]),i&&Fu(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,d){this._orientation=Uc(i,d),Fu(this._transform,this._orientation)}forward(){const i=h.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=h.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=h.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,d){const v=new Float64Array(16);return h.invert(v,this.getWorldToCamera(i,d)),v}getWorldToCameraPosition(i,d,v){const E=this.position;h.scale$2(E,E,-i);const M=new Float64Array(16);return h.fromScaling(M,[v,v,v]),h.translate(M,M,E),M[10]*=d,M}getWorldToCamera(i,d){const v=new Float64Array(16),E=new Float64Array(4),M=this.position;return h.conjugate(E,this._orientation),h.scale$2(M,M,-i),h.fromQuat(v,E),h.translate(v,v,M),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=d,v[9]*=d,v[10]*=d,v[11]*=d,v}getCameraToClipPerspective(i,d,v,E){const M=new Float64Array(16);return h.perspective(M,i,d,v,E),M}getDistanceToElevation(i){const d=0===i?0:h.mercatorZfromAltitude(i,this.position[1]),v=this.forward();return(d-this.position[2])/v[2]}clone(){return new Ml([...this.position],[...this.orientation])}}function Kn(f,i){const d=xc(f.projection,f.zoom,f.width,f.height),v=function(M,k,P,B,Z){const Q=new h.LngLat(P.lng-180*Ma,P.lat),ae=new h.LngLat(P.lng+180*Ma,P.lat),pe=M.project(Q.lng,Q.lat),Ce=M.project(ae.lng,ae.lat),Se=-Math.atan2(Ce.y-pe.y,Ce.x-pe.x),xe=h.MercatorCoordinate.fromLngLat(P);xe.y=h.clamp(xe.y,-.999975,.999975);const We=xe.toLngLat(),Me=M.project(We.lng,We.lat),Le=h.MercatorCoordinate.fromLngLat(We);Le.x+=Ma;const Ne=Le.toLngLat(),et=M.project(Ne.lng,Ne.lat),je=aa(et.x-Me.x,et.y-Me.y,Se),Ke=h.MercatorCoordinate.fromLngLat(We);Ke.y+=Ma;const _t=Ke.toLngLat(),Vt=M.project(_t.lng,_t.lat),Xt=aa(Vt.x-Me.x,Vt.y-Me.y,Se),jt=Math.abs(je.x)/Math.abs(Xt.y),Nt=h.identity([]);h.rotateZ(Nt,Nt,-Se*(1-(Z?0:B)));const tt=h.identity([]);return h.scale(tt,tt,[1,1-(1-jt)*B,1]),tt[4]=-Xt.x/Xt.y*B,h.rotateZ(tt,tt,Se),h.multiply(tt,Nt,tt),tt}(f.projection,0,f.center,d,i),E=Wi(f);return h.scale(v,v,[E,E,1]),v}function Wi(f){const i=f.projection,d=xc(f.projection,f.zoom,f.width,f.height),v=Ds(i,f.center),E=Ds(i,h.LngLat.convert(i.center));return Math.pow(2,v*d+(1-d)*E)}function xc(f,i,d,v,E=1/0){const M=f.range;if(!M)return 0;const k=Math.min(E,Math.max(d,v)),P=Math.log(k/1024)/Math.LN2;return h.smoothstep(M[0]+P,M[1]+P,i)}const Ma=1/4e4;function Ds(f,i){const d=h.clamp(i.lat,-h.MAX_MERCATOR_LATITUDE,h.MAX_MERCATOR_LATITUDE),v=new h.LngLat(i.lng-180*Ma,d),E=new h.LngLat(i.lng+180*Ma,d),M=f.project(v.lng,d),k=f.project(E.lng,d),P=h.MercatorCoordinate.fromLngLat(v),B=h.MercatorCoordinate.fromLngLat(E),Z=k.x-M.x,Q=k.y-M.y,ae=B.x-P.x,pe=B.y-P.y,Ce=Math.sqrt((ae*ae+pe*pe)/(Z*Z+Q*Q));return Math.log(Ce)/Math.LN2}function aa(f,i,d){const v=Math.cos(d),E=Math.sin(d);return{x:f*v-i*E,y:f*E+i*v}}class $d{constructor(i,d,v,E,M,k,P){this.tileSize=512,this._renderWorldCopies=void 0===M||M,this._minZoom=i||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=E??60,this.setProjection(k),this.setMaxBounds(P),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new br,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ml,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new $d(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i){const d=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||d)&&this._updateCameraOnTerrain(),(i||d)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return h.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=h.getProjection(this.projectionOptions);const v=!ge(d,this.getProjection());return v&&this._calcMatrices(),v}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return h.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return h.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const d=-i*Math.PI/180;var v,E,M,k,P,B,Z,Q,ae,pe;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(v=new h.ARRAY_TYPE(4),h.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v),E=this.rotationMatrix,k=this.angle,P=(M=this.rotationMatrix)[0],B=M[1],Z=M[2],Q=M[3],ae=Math.sin(k),pe=Math.cos(k),E[0]=P*pe+Z*ae,E[1]=B*pe+Q*ae,E[2]=P*-ae+Z*pe,E[3]=B*-ae+Q*pe)}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const d=h.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const d=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let E=0,M=0;for(let k=0;k<d.length;k++){const P=new h.pointGeometry(d[k][0]*this.width,v+d[k][1]*(this.height-v)),B=i.pointCoordinate(P);if(!B)continue;const Z=1/Math.hypot(B[0]-this._camera.position[0],B[1]-this._camera.position[1]);E+=B[3]*Z,M+=Z}return 0===M?NaN:E/M}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const i=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*d,E=this._mercatorZfromZoom(i),M=this._mercatorZfromZoom(this._maxZoom),k=Math.max(E-v,M);this._setZoom(this._zoomFromMercatorZ(k))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let v;v=i.z<this._camera.position[2]?[d.x,d.y,d.z]:[i.x,i.y,i.z];const E=h.length(h.sub([],this._camera.position,v));return h.clamp(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let d=!1;if(i.orientation&&!h.exactEquals(i.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(i.orientation)),i.position){const v=[i.position.x,i.position.y,i.position.z];h.exactEquals$1(v,this._camera.position)||(this._setCameraPosition(v),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,d=new uu;return d.position=new h.MercatorCoordinate(i[0],i[1],i[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(i){if(!h.length$1(i))return!1;h.normalize$1(i,i);const d=h.transformQuat([],[0,0,-1],i),v=h.transformQuat([],[0,-1,0],i);if(v[2]<0)return!1;const E=Na(d,v);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(i){const d=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;i[2]=h.clamp(i[2],E/v,E/d),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,d,v){this._unmodified=!1,this._edgeInsets.interpolate(i,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const d=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(i){const d=[new h.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const v=this.pointCoordinate(new h.pointGeometry(0,0)),E=this.pointCoordinate(new h.pointGeometry(this.width,0)),M=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),k=this.pointCoordinate(new h.pointGeometry(0,this.height)),P=Math.floor(Math.min(v.x,E.x,M.x,k.x)),B=Math.floor(Math.max(v.x,E.x,M.x,k.x)),Z=1;for(let Q=P-Z;Q<=B+Z;Q++)0!==Q&&d.push(new h.UnwrappedTileID(Q,i))}return d}coveringTiles(i){let d=this.coveringZoomLevel(i);const v=d,E=this.elevation&&!i.isTerrainDEM,M="mercator"===this.projection.name;if(void 0!==i.minzoom&&d<i.minzoom)return[];void 0!==i.maxzoom&&d>i.maxzoom&&(d=i.maxzoom);const k=this.locationCoordinate(this.center),P=this.center.lat,B=1<<d,Z=[B*k.x,B*k.y,0],Q="globe"===this.projection.name,ae=!Q,pe=h.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,ae),Ce=Q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=B*h.mercatorZfromAltitude(1,this.center.lat),xe=this._camera.position[2]/h.mercatorZfromAltitude(1,this.center.lat),We=[B*Ce.x,B*Ce.y,xe*(ae?1:Se)],Me=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),Le=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,Ne=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,et=i.isTerrainDEM?-Ne:this._elevation?this._elevation.getMinElevationBelowMSL():0,je=this.projection.isReprojectedInTileSpace?Wi(this):1,Ke=en=>{const Zn=new h.MercatorCoordinate(en.x+25e-6,en.y,en.z),Xn=new h.MercatorCoordinate(en.x,en.y+25e-6,en.z),Tn=en.toLngLat(),jn=Zn.toLngLat(),Fi=Xn.toLngLat(),Si=this.locationCoordinate(Tn),cr=this.locationCoordinate(jn),xi=this.locationCoordinate(Fi),$i=Math.hypot(cr.x-Si.x,cr.y-Si.y),Ur=Math.hypot(xi.x-Si.x,xi.y-Si.y);return Math.sqrt($i*Ur)*je/25e-6},_t=en=>{const Ci=Ne,Zn=et;return{aabb:h.tileAABB(this,B,0,0,0,en,Zn,Ci,this.projection),zoom:0,x:0,y:0,minZ:Zn,maxZ:Ci,wrap:en,fullyVisible:!1}},Vt=[];let Xt=[];const jt=d,Nt=i.reparseOverscaled?v:d,tt=en=>en*en,un=tt((xe-this._centerAltitude)*Se),gn=en=>{if(!this._elevation||!en.tileID||!M)return;const Ci=this._elevation.getMinMaxForTile(en.tileID),Zn=en.aabb;Ci?(Zn.min[2]=Ci.min,Zn.max[2]=Ci.max,Zn.center[2]=(Zn.min[2]+Zn.max[2])/2):(en.shouldSplit=qn(en),en.shouldSplit||(Zn.min[2]=Zn.max[2]=Zn.center[2]=this._centerAltitude))},qn=en=>{if(en.zoom<Le)return!0;if(en.zoom===jt)return!1;if(null!=en.shouldSplit)return en.shouldSplit;const Ci=en.aabb.distanceX(We),Zn=en.aabb.distanceY(We);let Xn=un,Tn=1;if(Q){Xn=tt(en.aabb.distanceZ(We));const Fi=Math.pow(2,en.zoom),Si=h.latFromMercatorY((en.y+1)/Fi),cr=h.latFromMercatorY(en.y/Fi),xi=Math.min(Math.max(P,Si),cr),$i=h.circumferenceAtLatitude(xi)/h.circumferenceAtLatitude(P);if(Tn=xi===P?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,$i/this._mercatorScaleRatio),this.zoom<=h.GLOBE_ZOOM_THRESHOLD_MIN&&en.zoom===jt-1&&$i>=.9)return!0}else if(E&&(Xn=tt(en.aabb.distanceZ(We)*Se)),this.projection.isReprojectedInTileSpace&&v<=5){const Fi=Math.pow(2,en.zoom),Si=Ke(new h.MercatorCoordinate((en.x+.5)/Fi,(en.y+.5)/Fi));Tn=Si>.85?1:Si}const jn=Ci*Ci+Zn*Zn+Xn;return jn<tt((1<<jt-en.zoom)*Me*Tn*((Fi,Si)=>{if(Si*tt(.707)<Fi)return 1;const cr=Math.sqrt(Si/Fi);return cr/(1.4144271570014144+(Math.pow(1.1,cr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Xn,un),jn))};if(this.renderWorldCopies)for(let en=1;en<=3;en++)Vt.push(_t(-en)),Vt.push(_t(en));for(Vt.push(_t(0));Vt.length>0;){const en=Vt.pop(),Ci=en.x,Zn=en.y;let Xn=en.fullyVisible;if(!Xn){const Tn=en.aabb.intersects(pe);if(0===Tn)continue;Xn=2===Tn}if(en.zoom!==jt&&qn(en))for(let Tn=0;Tn<4;Tn++){const jn=(Ci<<1)+Tn%2,Fi=(Zn<<1)+(Tn>>1),Si={aabb:M?en.aabb.quadrant(Tn):h.tileAABB(this,B,en.zoom+1,jn,Fi,en.wrap,en.minZ,en.maxZ,this.projection),zoom:en.zoom+1,x:jn,y:Fi,wrap:en.wrap,fullyVisible:Xn,tileID:void 0,shouldSplit:void 0,minZ:en.minZ,maxZ:en.maxZ};E&&!Q&&(Si.tileID=new h.OverscaledTileID(en.zoom+1===jt?Nt:en.zoom+1,en.wrap,en.zoom+1,jn,Fi),gn(Si)),Vt.push(Si)}else{const Tn=en.zoom===jt?Nt:en.zoom;if(i.minzoom&&i.minzoom>Tn)continue;const jn=Z[0]-(.5+Ci+(en.wrap<<en.zoom))*(1<<d-en.zoom),Fi=Z[1]-.5-Zn,Si=en.tileID?en.tileID:new h.OverscaledTileID(Tn,en.wrap,en.zoom,Ci,Zn);Xt.push({tileID:Si,distanceSq:jn*jn+Fi*Fi})}}if(this.fogCullDistSq){const en=this.fogCullDistSq,Ci=this.horizonLineFromTop();Xt=Xt.filter(Zn=>{const Xn=[0,0,0,1],Tn=[h.EXTENT,h.EXTENT,0,1],jn=this.calculateFogTileMatrix(Zn.tileID.toUnwrapped());h.transformMat4$1(Xn,Xn,jn),h.transformMat4$1(Tn,Tn,jn);const Fi=h.getAABBPointSquareDist(Xn,Tn);if(0===Fi)return!0;let Si=!1;const cr=this._elevation;if(cr&&Fi>en&&0!==Ci){const xi=this.calculateProjMatrix(Zn.tileID.toUnwrapped());let $i;i.isTerrainDEM||($i=cr.getMinMaxForTile(Zn.tileID)),$i||($i={min:et,max:Ne});const Ur=h.furthestTileCorner(this.rotation),Qr=[Ur[0]*h.EXTENT,Ur[1]*h.EXTENT,$i.max];h.transformMat4(Qr,Qr,xi),Si=(1-Qr[1])*this.height*.5<Ci}return Fi<en||Si})}return Xt.sort((en,Ci)=>en.distanceSq-Ci.distanceSq).map(en=>en.tileID)}resize(i,d){this.width=i,this.height=d,this.pixelsToGLUnits=[2/i,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const d=h.clamp(i.lat,-h.MAX_MERCATOR_LATITUDE,h.MAX_MERCATOR_LATITUDE),v=this.projection.project(i.lng,d);return new h.pointGeometry(v.x*this.worldSize,v.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,d){let v,E;const M=this.centerPoint;if("globe"===this.projection.name){const P=this.worldSize;v=(d.x-M.x)/P,E=(d.y-M.y)/P}else{const P=this.pointCoordinate(d),B=this.pointCoordinate(M);v=P.x-B.x,E=P.y-B.y}const k=this.locationCoordinate(i);this.setLocation(new h.MercatorCoordinate(k.x-v,k.y-E))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,d){const v=d?h.mercatorZfromAltitude(d,i.lat):void 0,E=this.projection.project(i.lng,i.lat);return new h.MercatorCoordinate(E.x,E.y,v)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,d){const v=d??this._centerAltitude,E=[i.x,i.y,0,1],M=[i.x,i.y,1,1];h.transformMat4$1(E,E,this.pixelMatrixInverse),h.transformMat4$1(M,M,this.pixelMatrixInverse);const k=M[3];h.scale$1(E,E,1/E[3]),h.scale$1(M,M,1/k);const P=E[2],B=M[2];return{p0:E,p1:M,t:P===B?0:(v-P)/(B-P)}}screenPointToMercatorRay(i){const d=[i.x,i.y,0,1],v=[i.x,i.y,1,1];return h.transformMat4$1(d,d,this.pixelMatrixInverse),h.transformMat4$1(v,v,this.pixelMatrixInverse),h.scale$1(d,d,1/d[3]),h.scale$1(v,v,1/v[3]),d[2]=h.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,v[2]=h.mercatorZfromAltitude(v[2],this._center.lat)*this.worldSize,h.scale$1(d,d,1/this.worldSize),h.scale$1(v,v,1/this.worldSize),new h.Ray([d[0],d[1],d[2]],h.normalize([],h.sub([],v,d)))}rayIntersectionCoordinate(i){const{p0:d,p1:v,t:E}=i,M=h.mercatorZfromAltitude(d[2],this._center.lat),k=h.mercatorZfromAltitude(v[2],this._center.lat);return new h.MercatorCoordinate(h.number(d[0],v[0],E)/this.worldSize,h.number(d[1],v[1],E)/this.worldSize,h.number(M,k,E))}pointCoordinate(i,d=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,d)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let d=this.projection.pointCoordinate3D(this,i.x,i.y);if(d)return new h.MercatorCoordinate(d[0],d[1],d[2]);let v=0,E=this.horizonLineFromTop();if(i.y>E)return this.pointCoordinate(i);const M=.02*E,k=i.clone();for(let P=0;P<10&&E-v>M;P++){k.y=h.number(v,E,.66);const B=this.projection.pointCoordinate3D(this,k.x,k.y);B?(E=k.y,d=B):v=k.y}return d?new h.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}_coordinatePoint(i,d){const v=d&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,E=[i.x*this.worldSize,i.y*this.worldSize,v+i.toAltitude(),1];return h.transformMat4$1(E,E,this.pixelMatrix),E[3]>0?new h.pointGeometry(E[0]/E[3],E[1]/E[3]):new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(i,d){const v=new h.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),E=new h.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),M=new h.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),k=new h.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let P=this.pointCoordinate(v,i),B=this.pointCoordinate(E,i);const Z=this.pointCoordinate(M,d),Q=this.pointCoordinate(k,d),ae=(pe,Ce)=>(Ce.y-pe.y)/(Ce.x-pe.x);return P.y>1&&B.y>=0?P=new h.MercatorCoordinate((1-Q.y)/ae(Q,P)+Q.x,1):P.y<0&&B.y<=1&&(P=new h.MercatorCoordinate(-Q.y/ae(Q,P)+Q.x,0)),B.y>1&&P.y>=0?B=new h.MercatorCoordinate((1-Z.y)/ae(Z,B)+Z.x,1):B.y<0&&P.y<=1&&(B=new h.MercatorCoordinate(-Z.y/ae(Z,B)+Z.x,0)),(new h.LngLatBounds).extend(this.coordinateLocation(P)).extend(this.coordinateLocation(B)).extend(this.coordinateLocation(Q)).extend(this.coordinateLocation(Z))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length)return this._getBounds(0,0);const d=i.visibleDemTiles.reduce((v,E)=>{if(E.dem){const M=E.dem.tree;v.min=Math.min(v.min,M.minimums[0]),v.max=Math.max(v.max,M.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBounds(d.min*i.exaggeration(),d.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,v=this.height/2-d*(1-this._horizonShift);return i?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-h.MAX_MERCATOR_LATITUDE,this.maxLat=h.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=h.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=h.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=h.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=h.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,d){return this.projection.createTileMatrix(this,d,i)}calculateDistanceTileData(i){const d=i.key,v=this._distanceTileDataCache;if(v[d])return v[d];const E=i.canonical,M=1/this.height,k=this.cameraWorldSize/this.zoomScale(E.z),P=(E.x+Math.pow(2,E.z)*i.wrap)*k,B=E.y*k,Z=this.point,Q=this.angle,ae=Math.sin(-Q),pe=-Math.cos(-Q);return v[d]={bearing:[ae,pe],center:[(Z.x-P)*M,(Z.y-B)*M],scale:k/h.EXTENT*M},v[d]}calculateFogTileMatrix(i){const d=i.key,v=this._fogTileMatrixCache;if(v[d])return v[d];const E=this.projection.createTileMatrix(this,this.cameraWorldSize,i);return h.multiply(E,this.worldToFogMatrix,E),v[d]=new Float32Array(E),v[d]}calculateProjMatrix(i,d=!1){const v=i.key,E=d?this._alignedProjMatrixCache:this._projMatrixCache;if(E[v])return E[v];const M=this.calculatePosMatrix(i,this.worldSize);return h.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,M),E[v]=new Float32Array(M),E[v]}calculatePixelsToTileUnitsMatrix(i){const d=i.tileID.key,v=this._pixelsToTileUnitsCache;if(v[d])return v[d];const E=function(M,k){const{scale:P}=M.tileTransform,B=P*h.EXTENT/(M.tileSize*Math.pow(2,k.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return Z=new Float32Array(4),pe=(Q=k.inverseAdjustmentMatrix)[1],Ce=Q[2],Se=Q[3],We=(ae=[B,B])[1],Z[0]=Q[0]*(xe=ae[0]),Z[1]=pe*xe,Z[2]=Ce*We,Z[3]=Se*We,Z;var Z,Q,ae,pe,Ce,Se,xe,We}(i,this);return v[d]=E,v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const i=this._elevation;this._updateCameraState();const d=h.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),E=this._camera.forward(),M=h.mercatorZfromAltitude(1,this._center.lat);v[2]/=M,E[2]/=M,h.normalize(E,E);const k=i.raycast(v,E,i.exaggeration());if(k){const P=h.scaleAndAdd([],v,E,k),B=new h.MercatorCoordinate(P[0],P[1],h.mercatorZfromAltitude(P[2],h.latFromMercatorY(P[1]))),Z=(B.z+h.length([B.x-v[0],B.y-v[1],B.z-v[2]*M]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(Z),this._centerAltitude=B.toAltitude(),this._center=this.coordinateLocation(B),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const d=h.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),E=i.getAtPointOrZero(new h.MercatorCoordinate(...v)),M=this._minimumHeightOverTerrain()*Math.cos(h.degToRad(this._maxPitch)),k=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*E;if(k<M){const P=this.locationCoordinate(this._center,this._centerAltitude),B=[P.x-v[0],P.y-v[1],P.z-v[2]],Z=h.length(B);B[2]-=(M-k)/this._projectionScaler;const Q=h.length(B);if(0===Q)return;h.scale$2(B,B,Z/Q*this._projectionScaler),this._camera.position=[P.x-B[0],P.y-B[1],P.z*this._projectionScaler-B[2]],this._camera.orientation=Na(B,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const ae=this.center;return ae.lat=h.clamp(ae.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(ae.lng=h.clamp(ae.lng,this.minLng,this.maxLng)),this.center=ae,void(this._constraining=!1)}const i=this._unmodified,{x:d,y:v}=this.point;let E=0,M=d,k=v;const P=this.width/2,B=this.height/2,Z=this.worldMinY*this.scale,Q=this.worldMaxY*this.scale;if(v-B<Z&&(k=Z+B),v+B>Q&&(k=Q-B),Q-Z<this.height&&(E=Math.max(E,this.height/(Q-Z)),k=(Q+Z)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ae=this.worldMinX*this.scale,pe=this.worldMaxX*this.scale,Ce=this.worldSize/2-(ae+pe)/2;M=(d+Ce+this.worldSize)%this.worldSize-Ce,M-P<ae&&(M=ae+P),M+P>pe&&(M=pe-P),pe-ae<this.width&&(E=Math.max(E,this.width/(pe-ae)),M=(pe+ae)/2)}M===d&&k===v||(this.center=this.unproject(new h.pointGeometry(M,k))),E&&(this.zoom+=this.scaleZoom(E)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,d=this.pixelsPerMeter;if("globe"===this.projection.name){const je=h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,Ke=h.mercatorZfromAltitude(1,h.GLOBE_SCALE_MATCH_LATITUDE)*this.worldSize;this._mercatorScaleRatio=je/Ke}const v=xc(this.projection,this.zoom,this.width,this.height,1024);this._projectionScaler=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=this.getCameraToCenterDistance(this.projection),this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?d:1),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-i.x/this.width,M[9]=2*i.y/this.height;let k=h.mul([],M,E);if(this.projection.isReprojectedInTileSpace){const je=this.locationCoordinate(this.center),Ke=h.identity([]);h.translate(Ke,Ke,[je.x*this.worldSize,je.y*this.worldSize,0]),h.multiply(Ke,Ke,Kn(this)),h.translate(Ke,Ke,[-je.x*this.worldSize,-je.y*this.worldSize,0]),h.multiply(k,k,Ke),this.inverseAdjustmentMatrix=function(_t){const Vt=Kn(_t,!0);return At([],[Vt[0],Vt[1],Vt[4],Vt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=h.scale([],k,[this.worldSize,this.worldSize,this.worldSize/d,1]),this.projMatrix=k,this.invProjMatrix=h.invert(new Float64Array(16),this.projMatrix);const P=h.invert([],M);this.frustumCorners=h.FrustumCorners.fromInvProjectionMatrix(P,this.horizonLineFromTop(),this.height);const B=new Float32Array(16);h.identity(B),h.scale(B,B,[1,-1,1]),h.rotateX(B,B,this._pitch),h.rotateZ(B,B,this.angle);const Z=h.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Z[8]=2*-i.x/this.width,Z[9]=2*(i.y+Q)/this.height,this.skyboxMatrix=h.multiply(B,Z,B);const ae=this.point,pe=ae.x,Ce=ae.y,Se=this.width%2/2,xe=this.height%2/2,We=Math.cos(this.angle),Me=Math.sin(this.angle),Le=pe-Math.round(pe)+We*Se+Me*xe,Ne=Ce-Math.round(Ce)+We*xe+Me*Se,et=new Float64Array(k);if(h.translate(et,et,[Le>.5?Le-1:Le,Ne>.5?Ne-1:Ne,0]),this.alignedProjMatrix=et,k=h.create(),h.scale(k,k,[this.width/2,-this.height/2,1]),h.translate(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=h.create(),h.scale(k,k,[1,-1,1]),h.translate(k,k,[-1,-1,0]),h.scale(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},k=h.invert(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=k,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=h.calculateGlobeMatrix(this);const je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=h.transformMat4(je,je,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=k;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,d=this.cameraPixelsPerMeter,v=this._camera.position,E=1/this.height/this._projectionScaler,M=[i,i,d];h.scale$2(M,M,E),h.scale$2(v,v,-1),h.multiply$2(v,v,M);const k=h.create();h.translate(k,k,v),h.scale(k,k,M),this.mercatorFogMatrix=k,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,d,E)}_computeCameraPosition(i){const d=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),E=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-i/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-v[0]*M,E.y/this.worldSize-v[1]*M,i/this.worldSize*this._centerAltitude-v[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=i[2];let E=1;v>0&&(E=Math.min((d-this._camera.position[2])/v,1)),this._camera.position=h.scaleAndAdd([],this._camera.position,i,E),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const i=this._camera.position,d=this._camera.forward(),{pitch:v,bearing:E}=this._camera.getPitchBearing(),M=h.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,k=this._mercatorZfromZoom(this._maxZoom)*Math.cos(h.degToRad(this._maxPitch)),P=Math.max((i[2]-M)/Math.cos(v),k),B=this._zoomFromMercatorZ(P);h.scaleAndAdd(i,i,d,P),this._pitch=h.clamp(v,h.degToRad(this.minPitch),h.degToRad(this.maxPitch)),this.angle=h.wrap(E,-Math.PI,Math.PI),this._setZoom(h.clamp(B,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new h.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(h.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,d){const v=Math.min(i.x,d.x),E=Math.max(i.x,d.x),M=Math.min(i.y,d.y),k=Math.max(i.y,d.y);if(M<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const P=[new h.pointGeometry(v,M),new h.pointGeometry(E,k),new h.pointGeometry(v,k),new h.pointGeometry(E,M)],B=this.renderWorldCopies?-3:0,Z=this.renderWorldCopies?4:1;for(const Q of P){const ae=this.pointRayIntersection(Q);if(ae.t<0)return!0;const pe=this.rayIntersectionCoordinate(ae);if(pe.x<B||pe.y<0||pe.x>Z||pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+h.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new h.pointGeometry(0,0),new h.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,d){const v=h.length(h.sub([],this._camera.position,i)),E=this._zoomFromMercatorZ(v)+d;return v-this._mercatorZfromZoom(E)}getCameraPoint(){if("globe"===this.projection.name){const i=function(d,v){const E=[d[0],d[1],d[2],1];h.transformMat4$1(E,E,v);const M=Math.max(E[3],1e-6);return[E[0]/M,E[1]/M,E[2]/M,M]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new h.pointGeometry(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,i))}}getCameraToCenterDistance(i){const d=xc(i,this.zoom,this.width,this.height,1024),v=i.pixelSpaceConversion(this.center.lat,this.worldSize,d);return.5/Math.tan(.5*this._fov)*this.height*v}}function ql(f,i){let d=!1,v=null;const E=()=>{v=null,d&&(f(),v=setTimeout(E,i),d=!1)};return()=>(d=!0,v||E(),v)}class Yl{constructor(i){this._hashName=i&&encodeURIComponent(i),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ql(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,h.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),h.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(i){const d=this._map;if(!d)return"";const v=d.getCenter(),E=Math.round(100*d.getZoom())/100,M=Math.ceil((E*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,M),P=Math.round(v.lng*k)/k,B=Math.round(v.lat*k)/k,Z=d.getBearing(),Q=d.getPitch();let ae="";if(ae+=i?`/${P}/${B}/${E}`:`${E}/${B}/${P}`,(Z||Q)&&(ae+="/"+Math.round(10*Z)/10),Q&&(ae+=`/${Math.round(Q)}`),this._hashName){const pe=this._hashName;let Ce=!1;const Se=h.window.location.hash.slice(1).split("&").map(xe=>{const We=xe.split("=")[0];return We===pe?(Ce=!0,`${We}=${ae}`):xe}).filter(xe=>xe);return Ce||Se.push(`${pe}=${ae}`),`#${Se.join("&")}`}return`#${ae}`}_getCurrentHash(){const i=h.window.location.hash.replace("#","");if(this._hashName){let d;return i.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){const v=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(d[3]||0):i.getBearing();return i.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=h.window.location.href.replace(/(#.+)?$/,this.getHashString());h.window.history.replaceState(h.window.history.state,null,i)}}const Ql={linearity:.3,easing:h.bezier(0,0,.3,1)},V=h.extend({deceleration:2500,maxSpeed:1400},Ql),he=h.extend({deceleration:20,maxSpeed:1400},Ql),q=h.extend({deceleration:1e3,maxSpeed:360},Ql),ce=h.extend({deceleration:1e3,maxSpeed:90},Ql);class Ye{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,d=h.exported.now();for(;i.length>0&&d-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)d.zoom+=M.zoomDelta||0,d.bearing+=M.bearingDelta||0,d.pitch+=M.pitchDelta||0,M.panDelta&&d.pan._add(M.panDelta),M.around&&(d.around=M.around),M.pinchAround&&(d.pinchAround=M.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(d.pan.mag()){const M=En(d.pan.mag(),v,h.extend({},V,i||{}));E.offset=d.pan.mult(M.amount/d.pan.mag()),E.center=this._map.transform.center,Bt(E,M)}if(d.zoom){const M=En(d.zoom,v,he);E.zoom=this._map.transform.zoom+M.amount,Bt(E,M)}if(d.bearing){const M=En(d.bearing,v,q);E.bearing=this._map.transform.bearing+h.clamp(M.amount,-179,179),Bt(E,M)}if(d.pitch){const M=En(d.pitch,v,ce);E.pitch=this._map.transform.pitch+M.amount,Bt(E,M)}if(E.zoom||E.bearing){const M=void 0===d.pinchAround?d.around:d.pinchAround;E.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function Bt(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function En(f,i,d){const{maxSpeed:v,linearity:E,deceleration:M}=d,k=h.clamp(f*E/(i/1e3),-v,v),P=Math.abs(k)/(M*E);return{easing:d.easing,duration:1e3*P,amount:k*(P/2)}}class Un extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,v,E={}){const M=Rt(d.getCanvasContainer(),v),k=d.unproject(M);super(i,h.extend({point:M,lngLat:k,originalEvent:v},E)),this._defaultPrevented=!1,this.target=d}}class Hr extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,v){const E="touchend"===i?v.changedTouches:v.touches,M=On(d.getCanvasContainer(),E),k=M.map(B=>d.unproject(B)),P=M.reduce((B,Z,Q,ae)=>B.add(Z.div(ae.length)),new h.pointGeometry(0,0));super(i,{points:M,point:P,lngLats:k,lngLat:d.unproject(P),originalEvent:v}),this._defaultPrevented=!1}}class qi extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,v){super(i,{originalEvent:v}),this._defaultPrevented=!1}}class Fr{constructor(i,d){this._map=i,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new qi(i.type,this._map,i))}mousedown(i,d){return this._mousedownPos=d,this._firePreventable(new Un(i.type,this._map,i))}mouseup(i){this._map.fire(new Un(i.type,this._map,i))}preclick(i){const d=h.extend({},i);d.type="preclick",this._map.fire(new Un(d.type,this._map,d))}click(i,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Un(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Un(i.type,this._map,i))}mouseover(i){this._map.fire(new Un(i.type,this._map,i))}mouseout(i){this._map.fire(new Un(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Hr(i.type,this._map,i))}touchmove(i){this._map.fire(new Hr(i.type,this._map,i))}touchend(i){this._map.fire(new Hr(i.type,this._map,i))}touchcancel(i){this._map.fire(new Hr(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Un(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Un(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class so{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,d){this.isEnabled()&&i.shiftKey&&0===i.button&&(Mt(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(i,d){if(!this._active)return;const v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=v,this._box||(this._box=Ve("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const M=Math.min(E.x,v.x),k=Math.max(E.x,v.x),P=Math.min(E.y,v.y),B=Math.max(E.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${P}px)`,this._box.style.width=k-M+"px",this._box.style.height=B-P+"px")})}mouseupWindow(i,d){if(!this._active||0!==i.button)return;const v=this._startPos,E=d;if(this.reset(),zt(),v.x!==E.x||v.y!==E.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:M=>M.fitScreenCoordinates(v,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),bt(),delete this._startPos,delete this._lastPos}_fireEvent(i,d){return this._map.fire(new h.Event(i,{originalEvent:d}))}}function Rr(f,i){const d={};for(let v=0;v<f.length;v++)d[f[v].identifier]=i[v];return d}class Pr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=i.timeStamp),v.length===this.numTouches&&(this.centroid=function(E){const M=new h.pointGeometry(0,0);for(const k of E)M._add(k);return M.div(E.length)}(d),this.touches=Rr(v,d)))}touchmove(i,d,v){if(this.aborted||!this.centroid)return;const E=Rr(v,d);for(const M in this.touches){const P=E[M];(!P||P.dist(this.touches[M])>30)&&(this.aborted=!0)}}touchend(i,d,v){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===v.length){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Sa{constructor(i){this.singleTap=new Pr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,d,v){this.singleTap.touchstart(i,d,v)}touchmove(i,d,v){this.singleTap.touchmove(i,d,v)}touchend(i,d,v){const E=this.singleTap.touchend(i,d,v);if(E){const M=i.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(E)<30;if(M&&k||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Ia{constructor(){this._zoomIn=new Sa({numTouches:1,numTaps:2}),this._zoomOut=new Sa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,d,v){this._zoomIn.touchstart(i,d,v),this._zoomOut.touchstart(i,d,v)}touchmove(i,d,v){this._zoomIn.touchmove(i,d,v),this._zoomOut.touchmove(i,d,v)}touchend(i,d,v){const E=this._zoomIn.touchend(i,d,v),M=this._zoomOut.touchend(i,d,v);return E?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(E)},{originalEvent:i})}):M?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(M)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const zs={0:1,2:2};class la{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,d){return!1}_move(i,d){return{}}mousedown(i,d){if(this._lastPoint)return;const v=An(i);this._correctButton(i,v)&&(this._lastPoint=d,this._eventButton=v)}mousemoveWindow(i,d){const v=this._lastPoint;if(v)if(i.preventDefault(),null!=this._eventButton&&function(E,M){const k=zs[M];return void 0===E.buttons||(E.buttons&k)!==k}(i,this._eventButton))this.reset();else if(this._moved||!(d.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(v,d)}mouseupWindow(i){this._lastPoint&&An(i)===this._eventButton&&(this._moved&&zt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Aa extends la{mousedown(i,d){super.mousedown(i,d),this._lastPoint&&(this._active=!0)}_correctButton(i,d){return 0===d&&!i.ctrlKey}_move(i,d){return{around:d,panDelta:d.sub(i)}}}class ca extends la{_correctButton(i,d){return 0===d&&i.ctrlKey||2===d}_move(i,d){const v=.8*(d.x-i.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(i){i.preventDefault()}}class Ba extends la{_correctButton(i,d){return 0===d&&i.ctrlKey||2===d}_move(i,d){const v=-.5*(d.y-i.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(i){i.preventDefault()}}class Sl{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),h.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0)}touchstart(i,d,v){return this._calculateTransform(i,d,v)}touchmove(i,d,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===v.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.preventDefault(),this._calculateTransform(i,d,v)}}touchend(i,d,v){this._calculateTransform(i,d,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,d,v){v.length>0&&(this._active=!0);const E=Rr(v,d),M=new h.pointGeometry(0,0),k=new h.pointGeometry(0,0);let P=0;for(const Z in E){const Q=E[Z],ae=this._touches[Z];ae&&(M._add(Q),k._add(Q.sub(ae)),P++,E[Z]=Q)}if(this._touches=E,P<this._minTouches||!k.mag())return;const B=k.div(P);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(P),panDelta:B}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ve("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Il{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,d,v){return{}}touchstart(i,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(i,d,v){const E=this._firstTwoTouches;if(!E)return;i.preventDefault();const[M,k]=E,P=_o(v,d,M),B=_o(v,d,k);if(!P||!B)return;const Z=this._aroundCenter?null:P.add(B).div(2);return this._move([P,B],Z,i)}touchend(i,d,v){if(!this._firstTwoTouches)return;const[E,M]=this._firstTwoTouches,k=_o(v,d,E),P=_o(v,d,M);k&&P||(this._active&&zt(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _o(f,i,d){for(let v=0;v<f.length;v++)if(f[v].identifier===d)return i[v]}function Vs(f,i){return Math.log(f/i)/Math.LN2}class du extends Il{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,d){const v=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Vs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vs(this._distance,v),pinchAround:d}}}function ad(f,i){return 180*f.angleWith(i)/Math.PI}class ka extends Il{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,d){const v=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ad(this._vector,v),pinchAround:d}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const d=25/(Math.PI*this._minDiameter)*360,v=ad(i,this._startVector);return Math.abs(v)<d}}function ua(f){return Math.abs(f.y)>Math.abs(f.x)}class ld extends Il{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,ua(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,d,v){const E=this._lastPoints;if(!E)return;const M=i[0].sub(E[0]),k=i[1].sub(E[1]);return this._map._cooperativeGestures&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(M,k,v.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(M.y+k.y)/2*-.5})}gestureBeginsVertically(i,d,v){if(void 0!==this._valid)return this._valid;const E=i.mag()>=2,M=d.mag()>=2;if(!E&&!M)return;if(!E||!M)return null==this._firstMove&&(this._firstMove=v),v-this._firstMove<100&&void 0;const k=i.y>0==d.y>0;return ua(i)&&ua(d)&&k}}const cd={panStep:100,bearingStep:15,pitchStep:10};class za{constructor(){const i=cd;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let d=0,v=0,E=0,M=0,k=0;switch(i.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:i.shiftKey?v=-1:(i.preventDefault(),M=-1);break;case 39:i.shiftKey?v=1:(i.preventDefault(),M=1);break;case 38:i.shiftKey?E=1:(i.preventDefault(),k=-1);break;case 40:i.shiftKey?E=-1:(i.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(v=0,E=0),{cameraAnimation:P=>{const B=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:Nu,zoom:d?Math.round(B)+d*(i.shiftKey?2:1):B,bearing:P.getBearing()+v*this._bearingStep,pitch:P.getPitch()+E*this._pitchStep,offset:[-M*this._panStep,-k*this._panStep],center:P.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nu(f){return f*(2-f)}const Wn=4.000244140625;class hu{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=i.deltaMode===h.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const v=h.exported.now(),E=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,0!==d&&d%Wn==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(E*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),i.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=i,this._delta-=d,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=Rt(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,d=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(0!==this._delta){const B="wheel"===this._type&&Math.abs(this._delta)>Wn?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==Z&&(Z=1/Z);const Q=d(),ae=Math.pow(2,Q),pe="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(pe*Z))),"wheel"===this._type&&(this._startZoom=d(),this._easing=this._smoothOutEasing(200)),this._delta=0}const v="number"==typeof this._targetZoom?this._targetZoom:d(),E=this._startZoom,M=this._easing;let k,P=!1;if("wheel"===this._type&&E&&M){const B=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),Z=M(B);k=h.number(E,v,Z),B<1?this._frameId||(this._frameId=!0):P=!0}else k=v,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:k-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let d=h.ease;if(this._prevEase){const v=this._prevEase,E=(h.exported.now()-v.start)/v.duration,M=v.easing(E+.01)-v.easing(E),k=.27/Math.sqrt(M*M+1e-4)*.01,P=Math.sqrt(.0729-k*k);d=h.bezier(k,P,.25,1)}return this._prevEase={start:h.exported.now(),duration:i,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ve("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(h.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!h.window.document.fullscreenElement||!!h.window.document.webkitFullscreenElement}_showBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class jc{constructor(i,d){this._clickZoom=i,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ud{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,d){return i.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(i.shiftKey?-1:1),around:v.unproject(d)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bu{constructor(){this._tap=new Sa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,d,v){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=d[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(i,d,v))}touchmove(i,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const E=d[0],M=E.y-this._swipePoint.y;return this._swipePoint=E,i.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(i,d,v)}touchend(i,d,v){this._tapTime?this._swipePoint&&0===v.length&&this.reset():this._tap.touchend(i,d,v)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ms{constructor(i,d,v){this._el=i,this._mousePan=d,this._touchPan=v}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nr{constructor(i,d,v){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class il{constructor(i,d,v,E){this._el=i,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const zu=f=>f.zoom||f.drag||f.pitch||f.rotate;class Hd extends h.Event{}class Vu{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,d){const v=h.sub([],d,i);this.radius=h.length(v[2]<0?h.div([],v,this.constants):[v[0],v[1],0])}projectRay(i){h.div(i,i,this.constants),h.normalize(i,i),h.mul$1(i,i,this.constants);const d=h.scale$2([],i,this.radius);if(d[2]>0){const v=h.scale$2([],[0,0,1],h.dot(d,[0,0,1])),E=h.scale$2([],h.normalize([],[d[0],d[1],0]),this.radius),M=h.add([],d,h.scale$2([],h.sub([],h.add([],E,v),d),2));d[0]=M[0],d[1]=M[1]}return d}}function wc(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Al{constructor(i,d){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ye(i),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vu,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),h.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[h.window.document,"mousemove",{capture:!0}],[h.window.document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[h.window,"blur",void 0]];for(const[E,M,k]of this._listeners)E.addEventListener(M,E===h.window.document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[i,d,v]of this._listeners)i.removeEventListener(d,i===h.window.document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(i){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new Fr(d,i));const E=d.boxZoom=new so(d,i);this._add("boxZoom",E);const M=new Ia,k=new ud;d.doubleClickZoom=new jc(k,M),this._add("tapZoom",M),this._add("clickZoom",k);const P=new Bu;this._add("tapDragZoom",P);const B=d.touchPitch=new ld(d);this._add("touchPitch",B);const Z=new ca(i),Q=new Ba(i);d.dragRotate=new Nr(i,Z,Q),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]);const ae=new Aa(i),pe=new Sl(d,i);d.dragPan=new ms(v,ae,pe),this._add("mousePan",ae),this._add("touchPan",pe,["touchZoom","touchRotate"]);const Ce=new ka,Se=new du;d.touchZoomRotate=new il(v,Se,Ce,P),this._add("touchRotate",Ce,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Vn(d));const xe=d.scrollZoom=new hu(d,this);this._add("scrollZoom",xe,["mousePan"]);const We=d.keyboard=new za;this._add("keyboard",We);for(const Me of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[Me]&&d[Me].enable(i[Me])}_add(i,d,v){this._handlers.push({handlerName:i,handler:d,allowed:v}),this._handlersById[i]=d}stop(i){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!zu(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,d,v){for(const E in i)if(E!==v&&(!d||d.indexOf(E)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const d=[];for(const v of i)this._el.contains(v.target)&&d.push(v);return d}handleEvent(i,d){this._updatingCamera=!0;const v="renderFrame"===i.type,E=v?void 0:i,M={needsRenderFrame:!1},k={},P={},B=i.touches?this._getMapTouches(i.touches):void 0,Z=B?On(this._el,B):v?void 0:Rt(this._el,i);for(const{handlerName:pe,handler:Ce,allowed:Se}of this._handlers){if(!Ce.isEnabled())continue;let xe;this._blockedByActive(P,Se,pe)?Ce.reset():Ce[d||i.type]&&(xe=Ce[d||i.type](i,Z,B),this.mergeHandlerResult(M,k,xe,pe,E),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||Ce.isActive())&&(P[pe]=Ce)}const Q={};for(const pe in this._previousActiveHandlers)P[pe]||(Q[pe]=E);this._previousActiveHandlers=P,(Object.keys(Q).length||wc(M))&&(this._changes.push([M,k,Q]),this._triggerRenderFrame()),(Object.keys(P).length||wc(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=M;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(i,d,v,E,M){if(!v)return;h.extend(i,v);const k={handlerName:E,originalEvent:v.originalEvent||M};void 0!==v.zoomDelta&&(d.zoom=k),void 0!==v.panDelta&&(d.drag=k),void 0!==v.pitchDelta&&(d.pitch=k),void 0!==v.bearingDelta&&(d.rotate=k)}_applyChanges(){const i={},d={},v={};for(const[E,M,k]of this._changes)E.panDelta&&(i.panDelta=(i.panDelta||new h.pointGeometry(0,0))._add(E.panDelta)),E.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+E.pitchDelta),void 0!==E.around&&(i.around=E.around),void 0!==E.aroundCoord&&(i.aroundCoord=E.aroundCoord),void 0!==E.pinchAround&&(i.pinchAround=E.pinchAround),E.noInertia&&(i.noInertia=E.noInertia),h.extend(d,M),h.extend(v,k);this._updateMapTransform(i,d,v),this._changes=[]}_updateMapTransform(i,d,v){const E=this._map,M=E.transform,k=Le=>[Le.x,Le.y,Le.z];if((Le=>{const Ne=this._eventsInProgress.drag;return Ne&&!this._handlersById[Ne.handlerName].isActive()})()&&!wc(i)){const Le=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",Le!==M.zoom&&this._map._update(!0)}if(!wc(i))return void this._fireEvents(d,v,!0);let{panDelta:P,zoomDelta:B,bearingDelta:Z,pitchDelta:Q,around:ae,aroundCoord:pe,pinchAround:Ce}=i;void 0!==Ce&&(ae=Ce),(Le=>d.drag&&!this._eventsInProgress.drag)()&&ae&&(this._dragOrigin=k(M.pointCoordinate3D(ae)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",E._stop(!0),ae=ae||E.transform.centerPoint,Z&&(M.bearing+=Z),Q&&(M.pitch+=Q),M._updateCameraState();const Se=[0,0,0];if(P){const Le=M.pointCoordinate(ae);if("globe"===M.projection.name){const Ne=h.latFromMercatorY(Le.y),et=M.center.lat,je=Math.min(h.mercatorZfromAltitude(1,Ne)/h.mercatorZfromAltitude(1,et),2);P=P.rotate(-M.angle),Se[0]=-P.x/M.worldSize*je,Se[1]=-P.y/M.worldSize*je}else{const Ne=M.pointCoordinate(ae.sub(P));Le&&Ne&&(Se[0]=Ne.x-Le.x,Se[1]=Ne.y-Le.y)}}const xe=M.zoom,We=[0,0,0];if(B){const Le=k(pe||M.pointCoordinate3D(ae)),Ne={dir:h.normalize([],h.sub([],Le,M._camera.position))};if(Ne.dir[2]<0){const et=M.zoomDeltaToMovement(Le,B);h.scale$2(We,Ne.dir,et)}}const Me=h.add(Se,Se,We);M._translateCameraConstrained(Me),B&&Math.abs(M.zoom-xe)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(d,v,!0)}_fireEvents(i,d,v){const E=zu(this._eventsInProgress),M=zu(i),k={};for(const Q in i){const{originalEvent:ae}=i[Q];this._eventsInProgress[Q]||(k[`${Q}start`]=ae),this._eventsInProgress[Q]=i[Q]}!E&&M&&this._fireEvent("movestart",M.originalEvent);for(const Q in k)this._fireEvent(Q,k[Q]);M&&this._fireEvent("move",M.originalEvent);for(const Q in i){const{originalEvent:ae}=i[Q];this._fireEvent(Q,ae)}const P={};let B;for(const Q in this._eventsInProgress){const{handlerName:ae,originalEvent:pe}=this._eventsInProgress[Q];this._handlersById[ae].isActive()||(delete this._eventsInProgress[Q],B=d[ae]||pe,P[`${Q}end`]=B)}for(const Q in P)this._fireEvent(Q,P[Q]);const Z=zu(this._eventsInProgress);if(v&&(E||M)&&!Z){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=pe=>0!==pe&&-this._bearingSnap<pe&&pe<this._bearingSnap;Q?(ae(Q.bearing||this._map.getBearing())&&(Q.bearing=0),this._map.easeTo(Q,{originalEvent:B})):(this._map.fire(new h.Event("moveend",{originalEvent:B})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,d){this._map.fire(new h.Event(i,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new Hd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Va="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class dd extends h.Evented{constructor(i,d){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=d.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,d){return this.jumpTo({center:i},d)}panBy(i,d,v){return i=h.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,h.extend({offset:i},d),v)}panTo(i,d,v){return this.easeTo(h.extend({center:i},d),v)}getZoom(){return this.transform.zoom}setZoom(i,d){return this.jumpTo({zoom:i},d),this}zoomTo(i,d,v){return this.easeTo(h.extend({zoom:i},d),v)}zoomIn(i,d){return this.zoomTo(this.getZoom()+1,i,d),this}zoomOut(i,d){return this.zoomTo(this.getZoom()-1,i,d),this}getBearing(){return this.transform.bearing}setBearing(i,d){return this.jumpTo({bearing:i},d),this}getPadding(){return this.transform.padding}setPadding(i,d){return this.jumpTo({padding:i},d),this}rotateTo(i,d,v){return this.easeTo(h.extend({bearing:i},d),v)}resetNorth(i,d){return this.rotateTo(0,h.extend({duration:1e3},i),d),this}resetNorthPitch(i,d){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},i),d),this}snapToNorth(i,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,d):this}getPitch(){return this.transform.pitch}setPitch(i,d){return this.jumpTo({pitch:i},d),this}cameraForBounds(i,d){"globe"===this.transform.projection.name&&h.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),i=h.LngLatBounds.convert(i);const v=d&&d.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),v,d)}_extendCameraOptions(i){const d={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=h.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const v=i.padding;i.padding={top:v,bottom:v,right:v,left:v}}return i.padding=h.extend(d,i.padding),i}_cameraForBoxAndBearing(i,d,v,E){const M=this._extendCameraOptions(E),k=this.transform,P=k.padding,B=k.project(h.LngLat.convert(i)),Z=k.project(h.LngLat.convert(d)),Q=new h.pointGeometry(B.x,Z.y),ae=new h.pointGeometry(Z.x,B.y),pe=-h.degToRad(v),Ce=B.rotate(pe),Se=Z.rotate(pe),xe=Q.rotate(pe),We=ae.rotate(pe),Me=new h.pointGeometry(Math.max(Ce.x,Se.x,xe.x,We.x),Math.max(Ce.y,Se.y,xe.y,We.y)),Le=new h.pointGeometry(Math.min(Ce.x,Se.x,xe.x,We.x),Math.min(Ce.y,Se.y,xe.y,We.y)),Ne=Me.sub(Le),et=(k.width-((P.left||0)+(P.right||0)+M.padding.left+M.padding.right))/Ne.x,je=(k.height-((P.top||0)+(P.bottom||0)+M.padding.top+M.padding.bottom))/Ne.y;if(je<0||et<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(k.scaleZoom(k.scale*Math.min(et,je)),M.maxZoom),_t="number"==typeof M.offset.x&&"number"==typeof M.offset.y?new h.pointGeometry(M.offset.x,M.offset.y):h.pointGeometry.convert(M.offset),Vt=new h.pointGeometry((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(v*Math.PI/180),Xt=_t.add(Vt).mult(k.scale/k.zoomScale(Ke));return{center:k.unproject(B.add(Z).div(2).sub(Xt)),zoom:Ke,bearing:v}}_cameraForBox(i,d,v,E,M){const k=this._extendCameraOptions(M);v=v||0,E=E||0,i=h.LngLat.convert(i),d=h.LngLat.convert(d);const P=this.transform.clone();P.padding=k.padding;const B=this.getFreeCameraOptions(),Z=new h.LngLat(.5*(i.lng+d.lng),.5*(i.lat+d.lat)),Q=.5*(v+E);if(P._camera.position[2]<h.mercatorZfromAltitude(Q,Z.lat))return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");B.lookAtPoint(Z),P.setFreeCameraOptions(B);const ae=h.MercatorCoordinate.fromLngLat(i),pe=h.MercatorCoordinate.fromLngLat(d),Ce=P.pointRayIntersection(P.centerPoint,Q),Se=[(xe=P.rayIntersectionCoordinate(Ce)).x,xe.y,xe.z];var xe;const We=P.screenPointToMercatorRay(P.centerPoint),Me="globe"!==P.projection.name;let Le,Ne=0;do{const et=Math.floor(P.zoom),je=1<<et,Ke=Math.min(je*ae.x,je*pe.x),_t=Math.min(je*ae.y,je*pe.y),Vt=Math.max(je*ae.x,je*pe.x),Xt=Math.max(je*ae.y,je*pe.y),jt=new h.Aabb([Ke,_t,v],[Vt,Xt,E]),Nt=h.Frustum.fromInvProjectionMatrix(P.invProjMatrix,P.worldSize,et,Me);if(2!==jt.intersects(Nt)){Le&&(P._camera.position=h.scaleAndAdd([],P._camera.position,We.dir,-Le),P._updateStateFromCamera());break}const tt=h.sub([],P._camera.position,Se);Le=.5*h.length(tt),P._camera.position=h.scaleAndAdd([],P._camera.position,We.dir,Le);try{P._updateStateFromCamera()}catch{return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ne<10);return{center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch}}fitBounds(i,d,v){return"globe"===this.transform.projection.name&&h.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(i,d),d,v)}_raycastElevationBox(i,d){const v=this.transform.elevation;if(!v)return;const E=new h.pointGeometry(i.x,d.y),M=new h.pointGeometry(d.x,i.y),k=v.pointCoordinate(i);if(!k)return;const P=v.pointCoordinate(d);if(!P)return;const B=v.pointCoordinate(E);if(!B)return;const Z=v.pointCoordinate(M);if(!Z)return;const Q=new h.MercatorCoordinate(k[0],k[1]).toLngLat(),ae=new h.MercatorCoordinate(P[0],P[1]).toLngLat(),pe=new h.MercatorCoordinate(B[0],B[1]).toLngLat(),Ce=new h.MercatorCoordinate(Z[0],Z[1]).toLngLat(),Se=Math.min(Q.lng,Math.min(ae.lng,Math.min(pe.lng,Ce.lng))),xe=Math.min(Q.lat,Math.min(ae.lat,Math.min(pe.lat,Ce.lat))),We=Math.max(Q.lng,Math.max(ae.lng,Math.max(pe.lng,Ce.lng))),Me=Math.max(Q.lat,Math.max(ae.lat,Math.max(pe.lat,Ce.lat))),Le=Math.min(k[3],Math.min(P[3],Math.min(B[3],Z[3]))),Ne=Math.max(k[3],Math.max(P[3],Math.max(B[3],Z[3])));return{minLngLat:new h.LngLat(Se,xe),maxLngLat:new h.LngLat(We,Me),minAltitude:Le,maxAltitude:Ne}}fitScreenCoordinates(i,d,v,E,M){let k,P,B,Z;"globe"===this.transform.projection.name&&h.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const Q=h.pointGeometry.convert(i),ae=h.pointGeometry.convert(d),pe=this._raycastElevationBox(Q,ae);if(pe)k=pe.minLngLat,P=pe.maxLngLat,B=pe.minAltitude,Z=pe.maxAltitude;else{if(this.transform.anyCornerOffEdge(Q,ae))return this;k=this.transform.pointLocation(Q),P=this.transform.pointLocation(ae)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(i)),this.transform.pointLocation(h.pointGeometry.convert(d)),v,E):this._cameraForBox(k,P,B,Z,E),E,M)}_fitInternal(i,d,v){return i?(delete(d=h.extend(i,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(i,d){this.stop();const v=i.preloadOnly?this.transform.clone():this.transform;let E=!1,M=!1,k=!1;return"zoom"in i&&v.zoom!==+i.zoom&&(E=!0,v.zoom=+i.zoom),void 0!==i.center&&(v.center=h.LngLat.convert(i.center)),"bearing"in i&&v.bearing!==+i.bearing&&(M=!0,v.bearing=+i.bearing),"pitch"in i&&v.pitch!==+i.pitch&&(k=!0,v.pitch=+i.pitch),null==i.padding||v.isPaddingEqual(i.padding)||(v.padding=i.padding),i.preloadOnly?(this._preloadTiles(v),this):(this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),E&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),M&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),k&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||h.warnOnce(Va),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,d){const v=this.transform;if(!v.projection.supportsFreeCamera)return h.warnOnce(Va),this;this.stop();const E=v.zoom,M=v.pitch,k=v.bearing;v.setFreeCameraOptions(i);const P=E!==v.zoom,B=M!==v.pitch,Z=k!==v.bearing;return this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),P&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),Z&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),B&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d)),this}easeTo(i,d){this._stop(!1,i.easeId),(!1===(i=h.extend({offset:[0,0],duration:500,easing:h.ease},i)).animate||!i.essential&&h.exported.prefersReducedMotion)&&(i.duration=0);const v=this.transform,E=this.getZoom(),M=this.getBearing(),k=this.getPitch(),P=this.getPadding(),B="zoom"in i?+i.zoom:E,Z="bearing"in i?this._normalizeBearing(i.bearing,M):M,Q="pitch"in i?+i.pitch:k,ae="padding"in i?i.padding:v.padding,pe=h.pointGeometry.convert(i.offset);let Ce,Se,xe;if("globe"===v.projection.name){const Xt=h.MercatorCoordinate.fromLngLat(v.center),jt=pe.rotate(-v.angle);Xt.x+=jt.x/v.worldSize,Xt.y+=jt.y/v.worldSize;const Nt=Xt.toLngLat(),tt=h.LngLat.convert(i.center||Nt);this._normalizeCenter(tt),Ce=v.centerPoint.add(jt),Se=new h.pointGeometry(Xt.x,Xt.y).mult(v.worldSize),xe=new h.pointGeometry(h.mercatorXfromLng(tt.lng),h.mercatorYfromLat(tt.lat)).mult(v.worldSize).sub(Se)}else{Ce=v.centerPoint.add(pe);const Xt=v.pointLocation(Ce),jt=h.LngLat.convert(i.center||Xt);this._normalizeCenter(jt),Se=v.project(Xt),xe=v.project(jt).sub(Se)}const We=v.zoomScale(B-E);let Me,Le;i.around&&(Me=h.LngLat.convert(i.around),Le=v.locationPoint(Me));const Ne=this._zooming||B!==E,et=this._rotating||M!==Z,je=this._pitching||Q!==k,Ke=!v.isPaddingEqual(ae),_t=Xt=>jt=>{if(Ne&&(Xt.zoom=h.number(E,B,jt)),et&&(Xt.bearing=h.number(M,Z,jt)),je&&(Xt.pitch=h.number(k,Q,jt)),Ke&&(Xt.interpolatePadding(P,ae,jt),Ce=Xt.centerPoint.add(pe)),Me)Xt.setLocationAtPoint(Me,Le);else{const Nt=Xt.zoomScale(Xt.zoom-E),tt=B>E?Math.min(2,We):Math.max(.5,We),un=Math.pow(tt,1-jt),gn=Xt.unproject(Se.add(xe.mult(jt*un)).mult(Nt));Xt.setLocationAtPoint(Xt.renderWorldCopies?gn.wrap():gn,Ce)}return i.preloadOnly||this._fireMoveEvents(d),Xt};if(i.preloadOnly){const Xt=this._emulate(_t,i.duration,v);return this._preloadTiles(Xt),this}const Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ne,this._rotating=et,this._pitching=je,this._padding=Ke,this._easeId=i.easeId,this._prepareEase(d,i.noMoveStart,Vt),this._ease(_t(v),Xt=>{v.recenterOnTerrain(),this._afterEase(d,Xt)},i),this}_prepareEase(i,d,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||v.moving||this.fire(new h.Event("movestart",i)),this._zooming&&!v.zooming&&this.fire(new h.Event("zoomstart",i)),this._rotating&&!v.rotating&&this.fire(new h.Event("rotatestart",i)),this._pitching&&!v.pitching&&this.fire(new h.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new h.Event("move",i)),this._zooming&&this.fire(new h.Event("zoom",i)),this._rotating&&this.fire(new h.Event("rotate",i)),this._pitching&&this.fire(new h.Event("pitch",i))}_afterEase(i,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,E=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new h.Event("zoomend",i)),E&&this.fire(new h.Event("rotateend",i)),M&&this.fire(new h.Event("pitchend",i)),this.fire(new h.Event("moveend",i))}flyTo(i,d){if(!i.essential&&h.exported.prefersReducedMotion){const Xn=h.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xn,d)}this.stop(),i=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},i);const v=this.transform,E=this.getZoom(),M=this.getBearing(),k=this.getPitch(),P=this.getPadding(),B="zoom"in i?h.clamp(+i.zoom,v.minZoom,v.maxZoom):E,Z="bearing"in i?this._normalizeBearing(i.bearing,M):M,Q="pitch"in i?+i.pitch:k,ae="padding"in i?i.padding:v.padding,pe=v.zoomScale(B-E),Ce=h.pointGeometry.convert(i.offset);let Se=v.centerPoint.add(Ce);const xe=v.pointLocation(Se),We=h.LngLat.convert(i.center||xe);this._normalizeCenter(We);const Me=v.project(xe),Le=v.project(We).sub(Me);let Ne=i.curve;const et=Math.max(v.width,v.height),je=et/pe,Ke=Le.mag();if("minZoom"in i){const Xn=h.clamp(Math.min(i.minZoom,E,B),v.minZoom,v.maxZoom),Tn=et/v.zoomScale(Xn-E);Ne=Math.sqrt(Tn/Ke*2)}const _t=Ne*Ne;function Vt(Xn){const Tn=(je*je-et*et+(Xn?-1:1)*_t*_t*Ke*Ke)/(2*(Xn?je:et)*_t*Ke);return Math.log(Math.sqrt(Tn*Tn+1)-Tn)}function Xt(Xn){return(Math.exp(Xn)-Math.exp(-Xn))/2}function jt(Xn){return(Math.exp(Xn)+Math.exp(-Xn))/2}const Nt=Vt(0);let tt=function(Xn){return jt(Nt)/jt(Nt+Ne*Xn)},un=function(Xn){return et*((jt(Nt)*(Xt(Tn=Nt+Ne*Xn)/jt(Tn))-Xt(Nt))/_t)/Ke;var Tn},gn=(Vt(1)-Nt)/Ne;if(Math.abs(Ke)<1e-6||!isFinite(gn)){if(Math.abs(et-je)<1e-6)return this.easeTo(i,d);const Xn=je<et?-1:1;gn=Math.abs(Math.log(je/et))/Ne,un=function(){return 0},tt=function(Tn){return Math.exp(Xn*Ne*Tn)}}i.duration="duration"in i?+i.duration:1e3*gn/("screenSpeed"in i?+i.screenSpeed/Ne:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const qn=M!==Z,en=Q!==k,Ci=!v.isPaddingEqual(ae),Zn=Xn=>Tn=>{const jn=Tn*gn,Fi=1/tt(jn);Xn.zoom=1===Tn?B:E+Xn.scaleZoom(Fi),qn&&(Xn.bearing=h.number(M,Z,Tn)),en&&(Xn.pitch=h.number(k,Q,Tn)),Ci&&(Xn.interpolatePadding(P,ae,Tn),Se=Xn.centerPoint.add(Ce));const Si=1===Tn?We:Xn.unproject(Me.add(Le.mult(un(jn))).mult(Fi));return Xn.setLocationAtPoint(Xn.renderWorldCopies?Si.wrap():Si,Se),Xn._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(d),Xn};if(i.preloadOnly){const Xn=this._emulate(Zn,i.duration,v);return this._preloadTiles(Xn),this}return this._zooming=!0,this._rotating=qn,this._pitching=en,this._padding=Ci,this._prepareEase(d,!1),this._ease(Zn(v),()=>this._afterEase(d),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,d)}if(!i){const v=this.handlers;v&&v.stop(!1)}return this}_ease(i,d,v){!1===v.animate||0===v.duration?(i(1),d()):(this._easeStart=h.exported.now(),this._easeOptions=v,this._onEaseFrame=i,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,d){i=h.wrap(i,-180,180);const v=Math.abs(i-d);return Math.abs(i-360-d)<v&&(i-=360),Math.abs(i+360-d)<v&&(i+=360),i}_normalizeCenter(i){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const v=i.lng-d.center.lng;i.lng+=v>180?-360:v<-180?360:0}_emulate(i,d,v){const E=Math.ceil(15*d/1e3),M=[],k=i(v.clone());for(let P=0;P<=E;P++){const B=k(P/E);M.push(B.clone())}return M}}class Uu{constructor(i={}){this.options=i,h.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const d=this.options&&this.options.compact;return this._map=i,this._container=Ve("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ve("button","mapboxgl-ctrl-attrib-button",this._container),Ve("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ve("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,d){const v=this._map._getUIString(`AttributionControl.${d}`);i.setAttribute("aria-label",v),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",v)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||h.config.ACCESS_TOKEN}];if(i){const v=d.reduce((E,M,k)=>(M.value&&(E+=`${M.key}=${M.value}${k<d.length-1?"&":""}`),E),"?");i.href=`${h.config.FEEDBACK_URL}/${v}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const d=this._map.style._sourceCaches;for(const E in d){const M=d[E];if(M.used){const k=M.getSource();k.attribution&&i.indexOf(k.attribution)<0&&i.push(k.attribution)}}i.sort((E,M)=>E.length-M.length),i=i.filter((E,M)=>{for(let k=M+1;k<i.length;k++)if(i[k].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const v=i.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,i.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class hd{constructor(){h.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=Ve("div","mapboxgl-ctrl");const d=Ve("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(0===Object.entries(i).length)return!0;for(const d in i){const v=i[d].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const d=i[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class pd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const d=++this._id;return this._queue.push({callback:i,id:d,cancelled:!1}),d}remove(i){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const E of v)if(E.id===i)return void(E.cancelled=!0)}run(i=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Oa(f,i,d){if(f=new h.LngLat(f.lng,f.lat),i){const v=new h.LngLat(f.lng-360,f.lat),E=new h.LngLat(f.lng+360,f.lat),M=360*Math.ceil(Math.abs(f.lng-d.center.lng)/360),k=d.locationPoint(f).distSqr(i),P=i.x<0||i.y<0||i.x>d.width||i.y>d.height;d.locationPoint(v).distSqr(i)<k&&(P||Math.abs(v.lng-d.center.lng)<M)?f=v:d.locationPoint(E).distSqr(i)<k&&(P||Math.abs(E.lng-d.center.lng)<M)&&(f=E)}for(;Math.abs(f.lng-d.center.lng)>180;){const v=d.locationPoint(f);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;f.lng>d.center.lng?f.lng-=360:f.lng+=360}return f}const ju={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class pu extends h.Evented{constructor(i,d){if(super(),(i instanceof h.window.HTMLElement||d)&&(i=h.extend({element:i},d)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),i&&i.element)this._element=i.element,this._offset=h.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ve("div");const E=41,M=27,k=st("svg",{display:"block",height:E*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${E}`},this._element),P=st("radialGradient",{id:"shadowGradient"},st("defs",{},k));st("stop",{offset:"10%","stop-opacity":.4},P),st("stop",{offset:"100%","stop-opacity":.05},P),st("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),st("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),st("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),st("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=h.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",E=>{E.preventDefault()}),this._element.addEventListener("mousedown",E=>{E.preventDefault()});const v=this._element.classList;for(const E in ju)v.remove(`mapboxgl-marker-anchor-${E}`);v.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=h.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(24.6+E)],"bottom-right":[-E,-1*(24.6+E)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const d=i.code,v=i.charCode||i.keyCode;"Space"!==d&&"Enter"!==d&&32!==v&&13!==v||this.togglePopup()}_onMapClick(i){const d=i.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map;if(!i)return!1;const d=i.unproject(this._pos),v=i.getFreeCameraOptions();if(!v.position)return!1;const E=v.position.toLngLat();return E.distanceTo(d)<.9*E.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const d=this._pos;if(!d||d.x<0||d.x>i.transform.width||d.y<0||d.y>i.transform.height)return void this._clearFadeTimer();const v=i.unproject(d);let E;i._usingGlobe()&&h.isLngLatBehindGlobe(i.transform,this._lngLat)?E=0:(E=1-i._queryFogOpacity(v),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(E*=.2)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const d=this._calculateXYTransform()+this._calculateZTransform(),v=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${i.x}px,${i.y}px) ${ju[this._anchor]}\n            ${d}\n            translate(${v.x}px,${v.y}px)\n        `}_calculateXYTransform(){const i=this._pos,d=this._map;if("map"!==this.getPitchAlignment()||!d||!i)return"";if(!d._usingGlobe()){const B=d.getPitch();return B?`rotateX(${B}deg)`:""}const v=h.radToDeg(h.globeTiltAtLngLat(d.transform,this._lngLat)),E=i.sub(h.globeCenterToScreenPoint(d.transform)),M=v/(Math.abs(E.x)+Math.abs(E.y)),k=E.x*M,P=-E.y*M;return P||k?`rotateX(${P}deg) rotateY(${k}deg)`:""}_calculateZTransform(){const i=this._calculateRotation();return i?`rotateZ(${i}deg)`:""}_calculateRotation(){if("viewport"===this._rotationAlignment||"auto"===this._rotationAlignment)return this._rotation;if(this._map&&"map"===this._rotationAlignment){const i=this._map;if(this._pos&&i&&i._usingGlobe()){const d=i.project(new h.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),v=i.project(new h.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(d);return this._rotation+h.radToDeg(Math.atan2(v.y,v.x))-90}return this._rotation-this._map.getBearing()}return 0}_update(i){h.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Oa(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),!0===i?this._updateFrameId=h.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._usingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=h.pointGeometry.convert(i),this._update(),this}_onMove(i){const d=this._map;if(d){if(!this._isDragging){const v=this._clickTolerance||d._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(i){const d=this._map;d&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos),this._pointerdownPos=i.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const d=this._map;return d&&(i?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}class Wd{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const d=h.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,d,v){this._start=this.getValue(d),this._end=i,this._startTime=d,this._endTime=d+v}}const Gc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},_p={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Xd(f){f.parentNode&&f.parentNode.removeChild(f)}const rl={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ef{constructor(i,d,v=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new ca({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,v&&(this.mousePitch=new Ba({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(i,d){this.mouseRotate.mousedown(i,d),this.mousePitch&&this.mousePitch.mousedown(i,d),Mt()}move(i,d){const v=this.map,E=this.mouseRotate.mousemoveWindow(i,d),M=E&&E.bearingDelta;if(M&&v.setBearing(v.getBearing()+M),this.mousePitch){const k=this.mousePitch.mousemoveWindow(i,d),P=k&&k.pitchDelta;P&&v.setPitch(v.getPitch()+P)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){bt(),h.window.removeEventListener("mousemove",this.mousemove),h.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(h.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Rt(this.element,i)),h.window.addEventListener("mousemove",this.mousemove),h.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Rt(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=On(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=On(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Kd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},yp={maxWidth:100,unit:"metric"};function R(f,i,d){const v=G(i),E=v/i,M={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[d];this._map._requestDomTask(()=>{this._container.style.width=f*E+"px",this._container.innerHTML=`${v}&nbsp;${M}`})}function G(f){const i=Math.pow(10,`${Math.floor(f)}`.length-1);let d=f/i;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:d>=1?1:function(v){const E=Math.pow(10,Math.ceil(-Math.log(v)/Math.LN10));return Math.round(v*E)/E}(d),i*d}const L={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},$=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oe(f=new h.pointGeometry(0,0),i="bottom"){if("number"==typeof f){const d=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(i){case"top":return new h.pointGeometry(0,f);case"top-left":return new h.pointGeometry(d,d);case"top-right":return new h.pointGeometry(-d,d);case"bottom":return new h.pointGeometry(0,-f);case"bottom-left":return new h.pointGeometry(d,-d);case"bottom-right":return new h.pointGeometry(-d,-d);case"left":return new h.pointGeometry(f,0);case"right":return new h.pointGeometry(-f,0)}return new h.pointGeometry(0,0)}return f instanceof h.pointGeometry||Array.isArray(f)?h.pointGeometry.convert(f):h.pointGeometry.convert(f[i]||[0,0])}const we={version:h.version,supported:Te,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends dd{constructor(f){if(null!=(f=h.extend({},_p,f)).minZoom&&null!=f.maxZoom&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=f.minPitch&&null!=f.maxPitch&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=f.minPitch&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=f.maxPitch&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&h.isSafariWithAntialiasingBug(h.window)&&(f.antialias=!1,h.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new $d(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language="auto"===f.language?h.window.navigator.language:f.language,this._worldview=f.worldview,this._renderTaskQueue=new pd,this._domRenderTaskQueue=new pd,this._controls=[],this._markers=[],this._mapId=h.uniqueId(),this._locale=h.extend({},Gc,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Wd(0),this._explicitProjection=null,this._requestManager=new h.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,"string"==typeof f.container){if(this._container=h.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof h.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&h.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==h.window&&(h.window.addEventListener("online",this._onWindowOnline,!1),h.window.addEventListener("resize",this._onWindowResize,!1),h.window.addEventListener("orientationchange",this._onWindowResize,!1),h.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Al(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new Yl("string"==typeof f.hash&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,h.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new Uu({customAttribution:f.customAttribution})),this._logoControl=new hd,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new h.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new h.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(void 0===i&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=f.onAdd(this);this._controls.push(f);const v=this._controlPositions[i];return-1!==i.indexOf("bottom")?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new h.Event("movestart",f)).fire(new h.Event("move",f)),this.fire(new h.Event("resize",f)),i&&this.fire(new h.Event("moveend",f)),this}getBounds(){return"globe"===this.transform.projection.name&&h.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(h.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new h.Event("zoomstart")).fire(new h.Event("zoom")).fire(new h.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new h.Event("zoomstart")).fire(new h.Event("zoom")).fire(new h.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new h.Event("pitchstart")).fire(new h.Event("pitch")).fire(new h.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new h.Event("pitchstart")).fire(new h.Event("pitch")).fire(new h.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}getLanguage(){return this._language}setLanguage(f){if(this._language="auto"===f?h.window.navigator.language:f,this.style)for(const i in this.style._sourceCaches){const d=this.style._sourceCaches[i]._source;d._setLanguage&&d._setLanguage(this._language)}for(const i of this._controls)i._setLanguage&&i._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){if(this._worldview=f,this.style)for(const i in this.style._sourceCaches){const d=this.style._sourceCaches[i]._source;d._setWorldview&&d._setWorldview(f)}return this}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}_usingGlobe(){return"globe"===this.transform.projection.name}setProjection(f){return this._lazyInitEmptyStyle(),f?"string"==typeof f&&(f={name:f}):f=null,this._updateProjection(f)}_updateProjection(f){const i=this.getProjection();null===f&&(this._explicitProjection=null);const d=f||this.getProjection();let v;if(d&&"globe"===d.name&&this.transform.zoom>=h.GLOBE_ZOOM_THRESHOLD_MAX?(v=this.transform.setProjection({name:"mercator"}),this.transform.mercatorFromTransition=!0):(v=this.transform.setProjection(d),this.transform.mercatorFromTransition=!1),f&&(this._explicitProjection="globe"===f.name?{name:"globe",center:[0,0]}:this.transform.getProjection()),this.style.applyProjectionUpdate(),v){if("globe"===i.name&&"globe"===this.getProjection().name)this.style._forceSymbolLayerUpdate();else{this.painter.clearBackgroundTiles();for(const E in this.style._sourceCaches)this.style._sourceCaches[E].clearTiles()}this._update(!0)}return this}project(f){return this.transform.locationPoint3D(h.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(h.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(f,i,d){if("mouseenter"===f||"mouseover"===f){let v=!1;const E=k=>{const P=i.filter(Z=>this.getLayer(Z)),B=P.length?this.queryRenderedFeatures(k.point,{layers:P}):[];B.length?v||(v=!0,d.call(this,new Un(f,this,k.originalEvent,{features:B}))):v=!1},M=()=>{v=!1};return{layers:new Set(i),listener:d,delegates:{mousemove:E,mouseout:M}}}if("mouseleave"===f||"mouseout"===f){let v=!1;const E=k=>{const P=i.filter(B=>this.getLayer(B));(P.length?this.queryRenderedFeatures(k.point,{layers:P}):[]).length?v=!0:v&&(v=!1,d.call(this,new Un(f,this,k.originalEvent)))},M=k=>{v&&(v=!1,d.call(this,new Un(f,this,k.originalEvent)))};return{layers:new Set(i),listener:d,delegates:{mousemove:E,mouseout:M}}}{const v=E=>{const M=i.filter(P=>this.getLayer(P)),k=M.length?this.queryRenderedFeatures(E.point,{layers:M}):[];k.length&&(E.features=k,d.call(this,E),delete E.features)};return{layers:new Set(i),listener:d,delegates:{[f]:v}}}}on(f,i,d){if(void 0===d)return super.on(f,i);Array.isArray(i)||(i=[i]);const v=this._createDelegatedListener(f,i,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(v);for(const E in v.delegates)this.on(E,v.delegates[E]);return this}once(f,i,d){if(void 0===d)return super.once(f,i);Array.isArray(i)||(i=[i]);const v=this._createDelegatedListener(f,i,d);for(const E in v.delegates)this.once(E,v.delegates[E]);return this}off(f,i,d){if(void 0===d)return super.off(f,i);i=new Set(Array.isArray(i)?i:[i]);const v=(M,k)=>{if(M.size!==k.size)return!1;for(const P of M)if(!k.has(P))return!1;return!0},E=this._delegatedListeners?this._delegatedListeners[f]:void 0;return E&&(M=>{for(let k=0;k<M.length;k++){const P=M[k];if(P.listener===d&&v(P.layers,i)){for(const B in P.delegates)this.off(B,P.delegates[B]);return M.splice(k,1),this}}})(E),this}queryRenderedFeatures(f,i){return this.style?(void 0!==i||void 0===f||f instanceof h.pointGeometry||Array.isArray(f)||(i=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}queryTerrainElevation(f,i){const d=this.transform.elevation;return d?(i=h.extend({},{exaggerated:!0},i),d.getAtPoint(h.MercatorCoordinate.fromLngLat(f),null,i.exaggerated)):null}setStyle(f,i){return!1!==(i=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(null==i)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new ds(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof f?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ds(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if("string"==typeof f){const d=this._requestManager.normalizeStyleURL(f),v=this._requestManager.transformRequest(d,h.ResourceType.Style);h.getJSON(v,(E,M)=>{E?this.fire(new h.ErrorEvent(E)):M&&this._updateDiff(M,i)})}else"object"==typeof f&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(d){h.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(h.warnOnce("There is no style added to the map."),!1)}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const i in f){const d=f[i]._tiles;for(const v in d){const E=d[v];if("loaded"!==E.state&&"errored"!==E.state)return!1}}return!0}addSourceType(f,i,d){this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,d)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:d=1,sdf:v=!1,stretchX:E,stretchY:M,content:k}={}){if(this._lazyInitEmptyStyle(),i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap){const{width:P,height:B,data:Z}=h.exported.getImageData(i);this.style.addImage(f,{data:new h.RGBAImage({width:P,height:B},Z),pixelRatio:d,stretchX:E,stretchY:M,content:k,sdf:v,version:0})}else if(void 0===i.width||void 0===i.height)this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:P,height:B}=i,Z=i;this.style.addImage(f,{data:new h.RGBAImage({width:P,height:B},new Uint8Array(Z.data)),pixelRatio:d,stretchX:E,stretchY:M,content:k,sdf:v,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,f)}}updateImage(f,i){const d=this.style.getImage(f);if(!d)return void this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap?h.exported.getImageData(i):i,{width:E,height:M}=v;void 0!==E&&void 0!==M?E===d.data.width&&M===d.data.height?(d.data.replace(v.data,!(i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap)),this.style.updateImage(f,d)):this.fire(new h.ErrorEvent(new Error(`The width and height of the updated image (${E}, ${M})\n                must be that same as the previous version of the image\n                (${d.data.width}, ${d.data.height})`))):this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){h.getImage(this._requestManager.transformRequest(f,h.ResourceType.Image),(d,v)=>{i(d,v instanceof h.window.HTMLImageElement?h.exported.getImageData(v):v)})}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,d){return this.style.setLayerZoomRange(f,i,d),this._update(!0)}setFilter(f,i,d={}){return this.style.setFilter(f,i,d),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,d,v={}){return this.style.setPaintProperty(f,i,d,v),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,d,v={}){return this.style.setLayoutProperty(f,i,d,v),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(h.LngLat.convert(f),this.transform):0}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let d,v,E,M=this._container;for(;M&&(!v||!E);){const k=h.window.getComputedStyle(M).transform;k&&"none"!==k&&(d=k.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&"0"!==d[0]&&"1"!==d[0]&&(v=d[0]),d[3]&&"0"!==d[3]&&"1"!==d[3]&&(E=d[3])),M=M.parentElement}this._containerWidth=v?Math.abs(f/v):f,this._containerHeight=E?Math.abs(i/E):i}_detectMissingCSS(){"rgb(250, 128, 114)"!==h.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&h.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ve("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=Ve("div","mapboxgl-canvas-container",f);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=Ve("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=Ve("div","mapboxgl-control-container",f),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{v[E]=Ve("div",`mapboxgl-ctrl-${E}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const d=h.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(f),this._canvas.height=d*Math.ceil(i),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);-1!==i&&this._markers.splice(i,1)}_setupPainter(){const f=h.extend({},Te.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(h.storeAuthState(i,!0),this.painter=new Ki(i,this.transform),this.on("data",d=>{"source"===d.dataType&&this.painter.setTileLoadedFlag(!0)}),h.exported$1.testSupport(i)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;const d=this.painter.context.extTimerQuery,v=h.exported.now();if(this.listens("gpu-timing-frame")&&(i=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;"globe"===this.getProjection().name&&(this.transform.zoom>=h.GLOBE_ZOOM_THRESHOLD_MAX?"globe"===this.transform.projection.name&&this._updateProjection():"mercator"===this.transform.projection.name&&this._updateProjection());let E=!1;const M=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const B=this.transform.zoom,Z=this.transform.pitch,Q=h.exported.now();this.style.zoomHistory.update(B,Q);const ae=new h.EvaluationParameters(B,{now:Q,fadeDuration:M,pitch:Z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),pe=ae.crossFadingFactor();1===pe&&pe===this._crossFadingFactor||(E=!0,this._crossFadingFactor=pe),this.style.update(ae)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(v),this.style._updateSources(this.transform),this._forceMarkerUpdate()):k=this._updateAverageElevation(v),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,M,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const B=h.exported.now()-v;d.endQueryEXT(d.TIME_ELAPSED_EXT,i),setTimeout(()=>{const Z=d.getQueryObjectEXT(i,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(i),this.fire(new h.Event("gpu-timing-frame",{cpuTime:B,gpuTime:Z})),h.window.performance.mark("frame-gpu",{startTime:v,detail:{gpuTime:Z}})},50)}if(this.listens("gpu-timing-layer")){const B=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers(B);this.fire(new h.Event("gpu-timing-layer",{layerTimes:Z}))},50)}if(this.listens("gpu-timing-deferred-render")){const B=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Z=this.painter.queryGpuTimeDeferredRender(B);this.fire(new h.Event("gpu-timing-deferred-render",{gpuTime:Z}))},50)}const P=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(P||this._repaint)this.triggerRepaint();else{const B=!this.isMoving()&&this.loaded();if(B&&(k=this._updateAverageElevation(v,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),B&&(this.fire(new h.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Z=this._calculateSpeedIndex();this.fire(new h.Event("speedindexcompleted",{speedIndex:Z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||P||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const f of this._markers)f._update()}_updateAverageElevation(f,i=!1){const d=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);if((i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const v=this.transform.averageElevation;let E=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=f;const k=Math.abs(v-E);if(k>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(E),d(E);this._averageElevation.easeTo(E,f,300)}else if(k>1e-4)return this._averageElevation.jumpTo(E),d(E)}return!!this._averageElevation.isEasing(f)&&d(this._averageElevation.getValue(f))}_authenticate(){h.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===h.AUTH_ERR_MSG||401===f.status)){const i=this.painter.context.gl;h.storeAuthState(i,!1),this._logoControl instanceof hd&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new h.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),h.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const d=this.painter.context.gl,v=d.createFramebuffer();function E(M){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,M,0);const k=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,k),k}return d.bindFramebuffer(d.FRAMEBUFFER,v),this._canvasPixelComparison(E(f),i.canvasCopies.map(E),i.timeStamps)}_canvasPixelComparison(f,i,d){let v=d[1]-d[0];const E=f.length/4;for(let M=0;M<i.length;M++){const k=i[M];let P=0;for(let B=0;B<k.length;B+=4)k[B]===f[B]&&k[B+1]===f[B+1]&&k[B+2]===f[B+2]&&k[B+3]===f[B+3]&&(P+=1);v+=(d[M+2]-d[M+1])*(1-P/E)}return v}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==h.window&&(h.window.removeEventListener("resize",this._onWindowResize,!1),h.window.removeEventListener("orientationchange",this._onWindowResize,!1),h.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),h.window.removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),Xd(this._canvasContainer),Xd(this._controlContainer),Xd(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),h.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=h.exported.frame(i=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(i)}))}_preloadTiles(f){const i=this.style?Object.values(this.style._sourceCaches):[];return h.asyncAll(i,(d,v)=>d._preloadTiles(f,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){h.setCacheLimits(f,i)}get version(){return h.version}},NavigationControl:class{constructor(f){this.options=h.extend({},rl,f),this._container=Ve("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),Ve("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),Ve("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:i}):d.resetNorth({},{originalEvent:i}))}),this._compassIcon=Ve("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const i=f.getZoom(),d=i===f.getMaxZoom(),v=i===f.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ef(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,i){const d=Ve("button",f,this._container);return d.type="button",d.addEventListener("click",i),d}_setButtonTitle(f,i){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${i}`);f.setAttribute("aria-label",d),f.firstElementChild&&f.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends h.Evented{constructor(f){super(),this.options=h.extend({geolocation:h.window.navigator.geolocation},Kd,f),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ql(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=Ve("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){void 0!==this._supportsGeolocation?f(this._supportsGeolocation):void 0!==h.window.navigator.permissions?h.window.navigator.permissions.query({name:"geolocation"}).then(i=>{this._supportsGeolocation="denied"!==i.state,f(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,f(this._supportsGeolocation))}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),d=f.coords;return!!i&&(d.longitude<i.getWest()||d.longitude>i.getEast()||d.latitude<i.getSouth()||d.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new h.LngLat(f.coords.longitude,f.coords.latitude),d=f.coords.accuracy,v=this._map.getBearing(),E=h.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(d),E,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new h.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,i=h.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,d=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=Ve("button","mapboxgl-ctrl-geolocate",this._container),Ve("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===f){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ve("div","mapboxgl-user-location"),this._dotElement.appendChild(Ve("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ve("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pu({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ve("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:!0===f.absolute&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{h.window.addEventListener("ondeviceorientationabsolute"in h.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==h.window.DeviceMotionEvent&&"function"==typeof h.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(i=>{"granted"===i&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),h.window.removeEventListener("deviceorientation",this._onDeviceOrientation),h.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Uu,ScaleControl:class{constructor(f){this.options=h.extend({},yp,f),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=R.bind(this)),h.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,i=this._map,d=i._containerHeight/2,v=i._containerWidth/2-f/2,E=i.unproject([v,d]),M=i.unproject([v+f,d]),k=E.distanceTo(M);if("imperial"===this.options.unit){const P=3.2808*k;P>5280?this._setScale(f,P/5280,"mile"):this._setScale(f,P,"foot")}else"nautical"===this.options.unit?this._setScale(f,k/1852,"nautical-mile"):k>=1e3?this._setScale(f,k/1e3,"kilometer"):this._setScale(f,k,"meter")}_setScale(f,i,d){const v=G(i),E=v/i;this._map._requestDomTask(()=>{this._container.style.width=f*E+"px",this._container.innerHTML="nautical-mile"!==d?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:d}).format(v):`${v}&nbsp;nm`})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=Ve("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof h.window.HTMLElement?this._container=f.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in h.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in h.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ve("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,h.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!h.window.document.fullscreenEnabled&&!h.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=Ve("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ve("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),h.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(h.window.document.fullscreenElement||h.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?h.window.document.exitFullscreen?h.window.document.exitFullscreen():h.window.document.webkitCancelFullScreen&&h.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends h.Evented{constructor(f){super(),this.options=h.extend(Object.create(L),f),h.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=h.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(h.window.document.createTextNode(f))}setHTML(f){const i=h.window.document.createDocumentFragment(),d=h.window.document.createElement("body");let v;for(d.innerHTML=f;v=d.firstChild,v;)i.appendChild(v);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=Ve("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(f),this.options.closeButton){const d=this._closeButton=Ve("button","mapboxgl-popup-close-button",i);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let i;return this._classList.delete(f)?i=!1:(this._classList.add(f),i=!0),this._updateClassList(),i}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const i=this._map,d=this._container,v=this._pos;if(!i||!d||!v)return"bottom";const E=d.offsetWidth,M=d.offsetHeight,k=v.x<E/2,P=v.x>i.transform.width-E/2;if(v.y+f<M)return k?"top-left":P?"top-right":"top";if(v.y>i.transform.height-M){if(k)return"bottom-left";if(P)return"bottom-right"}return k?"left":P?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),f.className=i.join(" ")}_update(f){const i=this._map,d=this._content;if(!i||!this._lngLat&&!this._trackPointer||!d)return;let v=this._container;if(v||(v=this._container=Ve("div","mapboxgl-popup",i.getContainer()),this._tip=Ve("div","mapboxgl-popup-tip",v),v.appendChild(d)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oa(this._lngLat,this._pos,i.transform)),!this._trackPointer||f){const E=this._pos=this._trackPointer&&f?f:i.project(this._lngLat),M=oe(this.options.offset),k=this._anchor=this._getAnchor(M.y),P=oe(this.options.offset,k),B=E.add(P).round();i._requestDomTask(()=>{this._container&&k&&(this._container.style.transform=`${ju[k]} translate(${B.x}px,${B.y}px)`)})}if(!this._marker&&i._usingGlobe()){const E=h.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector($);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:pu,Style:ds,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,FreeCameraOptions:uu,Evented:h.Evented,config:h.config,prewarm:function(){hi().acquire(mt)},clearPrewarmedResources:function(){const f=kn;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(mt),kn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return h.config.ACCESS_TOKEN},set accessToken(f){h.config.ACCESS_TOKEN=f},get baseApiUrl(){return h.config.API_URL},set baseApiUrl(f){h.config.API_URL=f},get workerCount(){return Lt.workerCount},set workerCount(f){Lt.workerCount=f},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){h.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){h.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:h.exported.setNow,restoreNow:h.exported.restoreNow};return we}),D}()},4412:($n,Tt,H)=>{"use strict";H.d(Tt,{t:()=>l});var D=H(1413);class l extends D.B{constructor(h){super(),this._value=h}get value(){return this.getValue()}_subscribe(h){const ge=super._subscribe(h);return!ge.closed&&h.next(this._value),ge}getValue(){const{hasError:h,thrownError:ge,_value:Te}=this;if(h)throw ge;return this._throwIfClosed(),Te}next(h){super.next(this._value=h)}}},1985:($n,Tt,H)=>{"use strict";H.d(Tt,{c:()=>ke});var D=H(7707),l=H(8359),ue=H(3494),h=H(1203),ge=H(1026),Te=H(8071),nt=H(9786);let ke=(()=>{class ut{constructor(Mt){Mt&&(this._subscribe=Mt)}lift(Mt){const bt=new ut;return bt.source=this,bt.operator=Mt,bt}subscribe(Mt,bt,St){const zt=function rt(ut){return ut&&ut instanceof D.vU||function st(ut){return ut&&(0,Te.T)(ut.next)&&(0,Te.T)(ut.error)&&(0,Te.T)(ut.complete)}(ut)&&(0,l.Uv)(ut)}(Mt)?Mt:new D.Ms(Mt,bt,St);return(0,nt.Y)(()=>{const{operator:Rt,source:On}=this;zt.add(Rt?Rt.call(zt,On):On?this._subscribe(zt):this._trySubscribe(zt))}),zt}_trySubscribe(Mt){try{return this._subscribe(Mt)}catch(bt){Mt.error(bt)}}forEach(Mt,bt){return new(bt=Ve(bt))((St,zt)=>{const Rt=new D.Ms({next:On=>{try{Mt(On)}catch(An){zt(An),Rt.unsubscribe()}},error:zt,complete:St});this.subscribe(Rt)})}_subscribe(Mt){var bt;return null===(bt=this.source)||void 0===bt?void 0:bt.subscribe(Mt)}[ue.s](){return this}pipe(...Mt){return(0,h.m)(Mt)(this)}toPromise(Mt){return new(Mt=Ve(Mt))((bt,St)=>{let zt;this.subscribe(Rt=>zt=Rt,Rt=>St(Rt),()=>bt(zt))})}}return ut.create=Ot=>new ut(Ot),ut})();function Ve(ut){var Ot;return null!==(Ot=ut??ge.$.Promise)&&void 0!==Ot?Ot:Promise}},2771:($n,Tt,H)=>{"use strict";H.d(Tt,{m:()=>ue});var D=H(1413),l=H(6129);class ue extends D.B{constructor(ge=1/0,Te=1/0,nt=l.U){super(),this._bufferSize=ge,this._windowTime=Te,this._timestampProvider=nt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Te===1/0,this._bufferSize=Math.max(1,ge),this._windowTime=Math.max(1,Te)}next(ge){const{isStopped:Te,_buffer:nt,_infiniteTimeWindow:ke,_timestampProvider:Ve,_windowTime:st}=this;Te||(nt.push(ge),!ke&&nt.push(Ve.now()+st)),this._trimBuffer(),super.next(ge)}_subscribe(ge){this._throwIfClosed(),this._trimBuffer();const Te=this._innerSubscribe(ge),{_infiniteTimeWindow:nt,_buffer:ke}=this,Ve=ke.slice();for(let st=0;st<Ve.length&&!ge.closed;st+=nt?1:2)ge.next(Ve[st]);return this._checkFinalizedStatuses(ge),Te}_trimBuffer(){const{_bufferSize:ge,_timestampProvider:Te,_buffer:nt,_infiniteTimeWindow:ke}=this,Ve=(ke?1:2)*ge;if(ge<1/0&&Ve<nt.length&&nt.splice(0,nt.length-Ve),!ke){const st=Te.now();let rt=0;for(let ut=1;ut<nt.length&&nt[ut]<=st;ut+=2)rt=ut;rt&&nt.splice(0,rt+1)}}}},1413:($n,Tt,H)=>{"use strict";H.d(Tt,{B:()=>nt});var D=H(1985),l=H(8359);const h=(0,H(1853).L)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=H(7908),Te=H(9786);let nt=(()=>{class Ve extends D.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(rt){const ut=new ke(this,this);return ut.operator=rt,ut}_throwIfClosed(){if(this.closed)throw new h}next(rt){(0,Te.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ut of this.currentObservers)ut.next(rt)}})}error(rt){(0,Te.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=rt;const{observers:ut}=this;for(;ut.length;)ut.shift().error(rt)}})}complete(){(0,Te.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:rt}=this;for(;rt.length;)rt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var rt;return(null===(rt=this.observers)||void 0===rt?void 0:rt.length)>0}_trySubscribe(rt){return this._throwIfClosed(),super._trySubscribe(rt)}_subscribe(rt){return this._throwIfClosed(),this._checkFinalizedStatuses(rt),this._innerSubscribe(rt)}_innerSubscribe(rt){const{hasError:ut,isStopped:Ot,observers:Mt}=this;return ut||Ot?l.Kn:(this.currentObservers=null,Mt.push(rt),new l.yU(()=>{this.currentObservers=null,(0,ge.o)(Mt,rt)}))}_checkFinalizedStatuses(rt){const{hasError:ut,thrownError:Ot,isStopped:Mt}=this;ut?rt.error(Ot):Mt&&rt.complete()}asObservable(){const rt=new D.c;return rt.source=this,rt}}return Ve.create=(st,rt)=>new ke(st,rt),Ve})();class ke extends nt{constructor(st,rt){super(),this.destination=st,this.source=rt}next(st){var rt,ut;null===(ut=null===(rt=this.destination)||void 0===rt?void 0:rt.next)||void 0===ut||ut.call(rt,st)}error(st){var rt,ut;null===(ut=null===(rt=this.destination)||void 0===rt?void 0:rt.error)||void 0===ut||ut.call(rt,st)}complete(){var st,rt;null===(rt=null===(st=this.destination)||void 0===st?void 0:st.complete)||void 0===rt||rt.call(st)}_subscribe(st){var rt,ut;return null!==(ut=null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(st))&&void 0!==ut?ut:l.Kn}}},7707:($n,Tt,H)=>{"use strict";H.d(Tt,{Ms:()=>St,vU:()=>ut});var D=H(8071),l=H(8359),ue=H(1026),h=H(5334),ge=H(5343);const Te=Ve("C",void 0,void 0);function Ve(Zt,At,dt){return{kind:Zt,value:At,error:dt}}var st=H(9270),rt=H(9786);class ut extends l.yU{constructor(At){super(),this.isStopped=!1,At?(this.destination=At,(0,l.Uv)(At)&&At.add(this)):this.destination=An}static create(At,dt,sn){return new St(At,dt,sn)}next(At){this.isStopped?On(function ke(Zt){return Ve("N",Zt,void 0)}(At),this):this._next(At)}error(At){this.isStopped?On(function nt(Zt){return Ve("E",void 0,Zt)}(At),this):(this.isStopped=!0,this._error(At))}complete(){this.isStopped?On(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(At){this.destination.next(At)}_error(At){try{this.destination.error(At)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ot=Function.prototype.bind;function Mt(Zt,At){return Ot.call(Zt,At)}class bt{constructor(At){this.partialObserver=At}next(At){const{partialObserver:dt}=this;if(dt.next)try{dt.next(At)}catch(sn){zt(sn)}}error(At){const{partialObserver:dt}=this;if(dt.error)try{dt.error(At)}catch(sn){zt(sn)}else zt(At)}complete(){const{partialObserver:At}=this;if(At.complete)try{At.complete()}catch(dt){zt(dt)}}}class St extends ut{constructor(At,dt,sn){let Gt;if(super(),(0,D.T)(At)||!At)Gt={next:At??void 0,error:dt??void 0,complete:sn??void 0};else{let Qt;this&&ue.$.useDeprecatedNextContext?(Qt=Object.create(At),Qt.unsubscribe=()=>this.unsubscribe(),Gt={next:At.next&&Mt(At.next,Qt),error:At.error&&Mt(At.error,Qt),complete:At.complete&&Mt(At.complete,Qt)}):Gt=At}this.destination=new bt(Gt)}}function zt(Zt){ue.$.useDeprecatedSynchronousErrorHandling?(0,rt.l)(Zt):(0,h.m)(Zt)}function On(Zt,At){const{onStoppedNotification:dt}=ue.$;dt&&st.f.setTimeout(()=>dt(Zt,At))}const An={closed:!0,next:ge.l,error:function Rt(Zt){throw Zt},complete:ge.l}},8359:($n,Tt,H)=>{"use strict";H.d(Tt,{Kn:()=>Te,yU:()=>ge,Uv:()=>nt});var D=H(8071);const ue=(0,H(1853).L)(Ve=>function(rt){Ve(this),this.message=rt?`${rt.length} errors occurred during unsubscription:\n${rt.map((ut,Ot)=>`${Ot+1}) ${ut.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=rt});var h=H(7908);class ge{constructor(st){this.initialTeardown=st,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let st;if(!this.closed){this.closed=!0;const{_parentage:rt}=this;if(rt)if(this._parentage=null,Array.isArray(rt))for(const Mt of rt)Mt.remove(this);else rt.remove(this);const{initialTeardown:ut}=this;if((0,D.T)(ut))try{ut()}catch(Mt){st=Mt instanceof ue?Mt.errors:[Mt]}const{_finalizers:Ot}=this;if(Ot){this._finalizers=null;for(const Mt of Ot)try{ke(Mt)}catch(bt){st=st??[],bt instanceof ue?st=[...st,...bt.errors]:st.push(bt)}}if(st)throw new ue(st)}}add(st){var rt;if(st&&st!==this)if(this.closed)ke(st);else{if(st instanceof ge){if(st.closed||st._hasParent(this))return;st._addParent(this)}(this._finalizers=null!==(rt=this._finalizers)&&void 0!==rt?rt:[]).push(st)}}_hasParent(st){const{_parentage:rt}=this;return rt===st||Array.isArray(rt)&&rt.includes(st)}_addParent(st){const{_parentage:rt}=this;this._parentage=Array.isArray(rt)?(rt.push(st),rt):rt?[rt,st]:st}_removeParent(st){const{_parentage:rt}=this;rt===st?this._parentage=null:Array.isArray(rt)&&(0,h.o)(rt,st)}remove(st){const{_finalizers:rt}=this;rt&&(0,h.o)(rt,st),st instanceof ge&&st._removeParent(this)}}ge.EMPTY=(()=>{const Ve=new ge;return Ve.closed=!0,Ve})();const Te=ge.EMPTY;function nt(Ve){return Ve instanceof ge||Ve&&"closed"in Ve&&(0,D.T)(Ve.remove)&&(0,D.T)(Ve.add)&&(0,D.T)(Ve.unsubscribe)}function ke(Ve){(0,D.T)(Ve)?Ve():Ve.unsubscribe()}},1026:($n,Tt,H)=>{"use strict";H.d(Tt,{$:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:($n,Tt,H)=>{"use strict";H.d(Tt,{z:()=>st});var D=H(1985),l=H(3073),ue=H(6648),h=H(3669),ge=H(6450),Te=H(9326),nt=H(8496),ke=H(4360),Ve=H(5225);function st(...Ot){const Mt=(0,Te.lI)(Ot),bt=(0,Te.ms)(Ot),{args:St,keys:zt}=(0,l.D)(Ot);if(0===St.length)return(0,ue.H)([],Mt);const Rt=new D.c(function rt(Ot,Mt,bt=h.D){return St=>{ut(Mt,()=>{const{length:zt}=Ot,Rt=new Array(zt);let On=zt,An=zt;for(let Zt=0;Zt<zt;Zt++)ut(Mt,()=>{const At=(0,ue.H)(Ot[Zt],Mt);let dt=!1;At.subscribe((0,ke._)(St,sn=>{Rt[Zt]=sn,dt||(dt=!0,An--),An||St.next(bt(Rt.slice()))},()=>{--On||St.complete()}))},St)},St)}}(St,Mt,zt?On=>(0,nt.e)(zt,On):h.D));return bt?Rt.pipe((0,ge.I)(bt)):Rt}function ut(Ot,Mt,bt){Ot?(0,Ve.N)(bt,Ot,Mt):Mt()}},8793:($n,Tt,H)=>{"use strict";H.d(Tt,{x:()=>ge});var D=H(6365),ue=H(9326),h=H(6648);function ge(...Te){return function l(){return(0,D.U)(1)}()((0,h.H)(Te,(0,ue.lI)(Te)))}},9030:($n,Tt,H)=>{"use strict";H.d(Tt,{v:()=>ue});var D=H(1985),l=H(8750);function ue(h){return new D.c(ge=>{(0,l.Tg)(h()).subscribe(ge)})}},983:($n,Tt,H)=>{"use strict";H.d(Tt,{w:()=>l});const l=new(H(1985).c)(ge=>ge.complete())},7468:($n,Tt,H)=>{"use strict";H.d(Tt,{p:()=>ke});var D=H(1985),l=H(3073),ue=H(8750),h=H(9326),ge=H(4360),Te=H(6450),nt=H(8496);function ke(...Ve){const st=(0,h.ms)(Ve),{args:rt,keys:ut}=(0,l.D)(Ve),Ot=new D.c(Mt=>{const{length:bt}=rt;if(!bt)return void Mt.complete();const St=new Array(bt);let zt=bt,Rt=bt;for(let On=0;On<bt;On++){let An=!1;(0,ue.Tg)(rt[On]).subscribe((0,ge._)(Mt,Zt=>{An||(An=!0,Rt--),St[On]=Zt},()=>zt--,void 0,()=>{(!zt||!An)&&(Rt||Mt.next(ut?(0,nt.e)(ut,St):St),Mt.complete())}))}});return st?Ot.pipe((0,Te.I)(st)):Ot}},6648:($n,Tt,H)=>{"use strict";H.d(Tt,{H:()=>sn});var D=H(8750),l=H(5225),ue=H(9974),h=H(4360);function ge(Gt,Qt=0){return(0,ue.N)((Wt,He)=>{Wt.subscribe((0,h._)(He,ft=>(0,l.N)(He,Gt,()=>He.next(ft),Qt),()=>(0,l.N)(He,Gt,()=>He.complete(),Qt),ft=>(0,l.N)(He,Gt,()=>He.error(ft),Qt)))})}function Te(Gt,Qt=0){return(0,ue.N)((Wt,He)=>{He.add(Gt.schedule(()=>Wt.subscribe(He),Qt))})}var Ve=H(1985),rt=H(4761),ut=H(8071);function Mt(Gt,Qt){if(!Gt)throw new Error("Iterable cannot be null");return new Ve.c(Wt=>{(0,l.N)(Wt,Qt,()=>{const He=Gt[Symbol.asyncIterator]();(0,l.N)(Wt,Qt,()=>{He.next().then(ft=>{ft.done?Wt.complete():Wt.next(ft.value)})},0,!0)})})}var bt=H(5055),St=H(9858),zt=H(7441),Rt=H(5397),On=H(7953),An=H(591),Zt=H(5196);function sn(Gt,Qt){return Qt?function dt(Gt,Qt){if(null!=Gt){if((0,bt.l)(Gt))return function nt(Gt,Qt){return(0,D.Tg)(Gt).pipe(Te(Qt),ge(Qt))}(Gt,Qt);if((0,zt.X)(Gt))return function st(Gt,Qt){return new Ve.c(Wt=>{let He=0;return Qt.schedule(function(){He===Gt.length?Wt.complete():(Wt.next(Gt[He++]),Wt.closed||this.schedule())})})}(Gt,Qt);if((0,St.y)(Gt))return function ke(Gt,Qt){return(0,D.Tg)(Gt).pipe(Te(Qt),ge(Qt))}(Gt,Qt);if((0,On.T)(Gt))return Mt(Gt,Qt);if((0,Rt.x)(Gt))return function Ot(Gt,Qt){return new Ve.c(Wt=>{let He;return(0,l.N)(Wt,Qt,()=>{He=Gt[rt.l](),(0,l.N)(Wt,Qt,()=>{let ft,Ut;try{({value:ft,done:Ut}=He.next())}catch(on){return void Wt.error(on)}Ut?Wt.complete():Wt.next(ft)},0,!0)}),()=>(0,ut.T)(He?.return)&&He.return()})}(Gt,Qt);if((0,Zt.U)(Gt))return function At(Gt,Qt){return Mt((0,Zt.C)(Gt),Qt)}(Gt,Qt)}throw(0,An.L)(Gt)}(Gt,Qt):(0,D.Tg)(Gt)}},3726:($n,Tt,H)=>{"use strict";H.d(Tt,{R:()=>st});var D=H(8750),l=H(1985),ue=H(1397),h=H(7441),ge=H(8071),Te=H(6450);const nt=["addListener","removeListener"],ke=["addEventListener","removeEventListener"],Ve=["on","off"];function st(bt,St,zt,Rt){if((0,ge.T)(zt)&&(Rt=zt,zt=void 0),Rt)return st(bt,St,zt).pipe((0,Te.I)(Rt));const[On,An]=function Mt(bt){return(0,ge.T)(bt.addEventListener)&&(0,ge.T)(bt.removeEventListener)}(bt)?ke.map(Zt=>At=>bt[Zt](St,At,zt)):function ut(bt){return(0,ge.T)(bt.addListener)&&(0,ge.T)(bt.removeListener)}(bt)?nt.map(rt(bt,St)):function Ot(bt){return(0,ge.T)(bt.on)&&(0,ge.T)(bt.off)}(bt)?Ve.map(rt(bt,St)):[];if(!On&&(0,h.X)(bt))return(0,ue.Z)(Zt=>st(Zt,St,zt))((0,D.Tg)(bt));if(!On)throw new TypeError("Invalid event target");return new l.c(Zt=>{const At=(...dt)=>Zt.next(1<dt.length?dt:dt[0]);return On(At),()=>An(At)})}function rt(bt,St){return zt=>Rt=>bt[zt](St,Rt)}},8750:($n,Tt,H)=>{"use strict";H.d(Tt,{Tg:()=>Ot});var D=H(7272),l=H(7441),ue=H(9858),h=H(1985),ge=H(5055),Te=H(7953),nt=H(591),ke=H(5397),Ve=H(5196),st=H(8071),rt=H(5334),ut=H(3494);function Ot(Zt){if(Zt instanceof h.c)return Zt;if(null!=Zt){if((0,ge.l)(Zt))return function Mt(Zt){return new h.c(At=>{const dt=Zt[ut.s]();if((0,st.T)(dt.subscribe))return dt.subscribe(At);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Zt);if((0,l.X)(Zt))return function bt(Zt){return new h.c(At=>{for(let dt=0;dt<Zt.length&&!At.closed;dt++)At.next(Zt[dt]);At.complete()})}(Zt);if((0,ue.y)(Zt))return function St(Zt){return new h.c(At=>{Zt.then(dt=>{At.closed||(At.next(dt),At.complete())},dt=>At.error(dt)).then(null,rt.m)})}(Zt);if((0,Te.T)(Zt))return Rt(Zt);if((0,ke.x)(Zt))return function zt(Zt){return new h.c(At=>{for(const dt of Zt)if(At.next(dt),At.closed)return;At.complete()})}(Zt);if((0,Ve.U)(Zt))return function On(Zt){return Rt((0,Ve.C)(Zt))}(Zt)}throw(0,nt.L)(Zt)}function Rt(Zt){return new h.c(At=>{(function An(Zt,At){var dt,sn,Gt,Qt;return(0,D.sH)(this,void 0,void 0,function*(){try{for(dt=(0,D.xN)(Zt);!(sn=yield dt.next()).done;)if(At.next(sn.value),At.closed)return}catch(Wt){Gt={error:Wt}}finally{try{sn&&!sn.done&&(Qt=dt.return)&&(yield Qt.call(dt))}finally{if(Gt)throw Gt.error}}At.complete()})})(Zt,At).catch(dt=>At.error(dt))})}},7786:($n,Tt,H)=>{"use strict";H.d(Tt,{h:()=>Te});var D=H(6365),l=H(8750),ue=H(983),h=H(9326),ge=H(6648);function Te(...nt){const ke=(0,h.lI)(nt),Ve=(0,h.R0)(nt,1/0),st=nt;return st.length?1===st.length?(0,l.Tg)(st[0]):(0,D.U)(Ve)((0,ge.H)(st,ke)):ue.w}},7673:($n,Tt,H)=>{"use strict";H.d(Tt,{of:()=>ue});var D=H(9326),l=H(6648);function ue(...h){const ge=(0,D.lI)(h);return(0,l.H)(h,ge)}},8810:($n,Tt,H)=>{"use strict";H.d(Tt,{$:()=>ue});var D=H(1985),l=H(8071);function ue(h,ge){const Te=(0,l.T)(h)?h:()=>h,nt=ke=>ke.error(Te());return new D.c(ge?ke=>ge.schedule(nt,0,ke):nt)}},1584:($n,Tt,H)=>{"use strict";H.d(Tt,{O:()=>ge});var D=H(1985),l=H(3236),ue=H(9470);function ge(Te=0,nt,ke=l.b){let Ve=-1;return null!=nt&&((0,ue.m)(nt)?ke=nt:Ve=nt),new D.c(st=>{let rt=function h(Te){return Te instanceof Date&&!isNaN(Te)}(Te)?+Te-ke.now():Te;rt<0&&(rt=0);let ut=0;return ke.schedule(function(){st.closed||(st.next(ut++),0<=Ve?this.schedule(void 0,Ve):st.complete())},rt)})}},4360:($n,Tt,H)=>{"use strict";H.d(Tt,{_:()=>l});var D=H(7707);function l(h,ge,Te,nt,ke){return new ue(h,ge,Te,nt,ke)}class ue extends D.vU{constructor(ge,Te,nt,ke,Ve,st){super(ge),this.onFinalize=Ve,this.shouldUnsubscribe=st,this._next=Te?function(rt){try{Te(rt)}catch(ut){ge.error(ut)}}:super._next,this._error=ke?function(rt){try{ke(rt)}catch(ut){ge.error(ut)}finally{this.unsubscribe()}}:super._error,this._complete=nt?function(){try{nt()}catch(rt){ge.error(rt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},9437:($n,Tt,H)=>{"use strict";H.d(Tt,{W:()=>h});var D=H(8750),l=H(4360),ue=H(9974);function h(ge){return(0,ue.N)((Te,nt)=>{let st,ke=null,Ve=!1;ke=Te.subscribe((0,l._)(nt,void 0,void 0,rt=>{st=(0,D.Tg)(ge(rt,h(ge)(Te))),ke?(ke.unsubscribe(),ke=null,st.subscribe(nt)):Ve=!0})),Ve&&(ke.unsubscribe(),ke=null,st.subscribe(nt))})}},274:($n,Tt,H)=>{"use strict";H.d(Tt,{H:()=>ue});var D=H(1397),l=H(8071);function ue(h,ge){return(0,l.T)(ge)?(0,D.Z)(h,ge,1):(0,D.Z)(h,1)}},152:($n,Tt,H)=>{"use strict";H.d(Tt,{B:()=>h});var D=H(3236),l=H(9974),ue=H(4360);function h(ge,Te=D.E){return(0,l.N)((nt,ke)=>{let Ve=null,st=null,rt=null;const ut=()=>{if(Ve){Ve.unsubscribe(),Ve=null;const Mt=st;st=null,ke.next(Mt)}};function Ot(){const Mt=rt+ge,bt=Te.now();if(bt<Mt)return Ve=this.schedule(void 0,Mt-bt),void ke.add(Ve);ut()}nt.subscribe((0,ue._)(ke,Mt=>{st=Mt,rt=Te.now(),Ve||(Ve=Te.schedule(Ot,ge),ke.add(Ve))},()=>{ut(),ke.complete()},void 0,()=>{st=Ve=null}))})}},9901:($n,Tt,H)=>{"use strict";H.d(Tt,{U:()=>ue});var D=H(9974),l=H(4360);function ue(h){return(0,D.N)((ge,Te)=>{let nt=!1;ge.subscribe((0,l._)(Te,ke=>{nt=!0,Te.next(ke)},()=>{nt||Te.next(h),Te.complete()}))})}},3294:($n,Tt,H)=>{"use strict";H.d(Tt,{F:()=>h});var D=H(3669),l=H(9974),ue=H(4360);function h(Te,nt=D.D){return Te=Te??ge,(0,l.N)((ke,Ve)=>{let st,rt=!0;ke.subscribe((0,ue._)(Ve,ut=>{const Ot=nt(ut);(rt||!Te(st,Ot))&&(rt=!1,st=Ot,Ve.next(ut))}))})}function ge(Te,nt){return Te===nt}},5964:($n,Tt,H)=>{"use strict";H.d(Tt,{p:()=>ue});var D=H(9974),l=H(4360);function ue(h,ge){return(0,D.N)((Te,nt)=>{let ke=0;Te.subscribe((0,l._)(nt,Ve=>h.call(ge,Ve,ke++)&&nt.next(Ve)))})}},980:($n,Tt,H)=>{"use strict";H.d(Tt,{j:()=>l});var D=H(9974);function l(ue){return(0,D.N)((h,ge)=>{try{h.subscribe(ge)}finally{ge.add(ue)}})}},1594:($n,Tt,H)=>{"use strict";H.d(Tt,{$:()=>nt});var D=H(9350),l=H(5964),ue=H(6697),h=H(9901),ge=H(3774),Te=H(3669);function nt(ke,Ve){const st=arguments.length>=2;return rt=>rt.pipe(ke?(0,l.p)((ut,Ot)=>ke(ut,Ot,rt)):Te.D,(0,ue.s)(1),st?(0,h.U)(Ve):(0,ge.v)(()=>new D.G))}},6354:($n,Tt,H)=>{"use strict";H.d(Tt,{T:()=>ue});var D=H(9974),l=H(4360);function ue(h,ge){return(0,D.N)((Te,nt)=>{let ke=0;Te.subscribe((0,l._)(nt,Ve=>{nt.next(h.call(ge,Ve,ke++))}))})}},3703:($n,Tt,H)=>{"use strict";H.d(Tt,{u:()=>l});var D=H(6354);function l(ue){return(0,D.T)(()=>ue)}},6365:($n,Tt,H)=>{"use strict";H.d(Tt,{U:()=>ue});var D=H(1397),l=H(3669);function ue(h=1/0){return(0,D.Z)(l.D,h)}},1397:($n,Tt,H)=>{"use strict";H.d(Tt,{Z:()=>ke});var D=H(6354),l=H(8750),ue=H(9974),h=H(5225),ge=H(4360),nt=H(8071);function ke(Ve,st,rt=1/0){return(0,nt.T)(st)?ke((ut,Ot)=>(0,D.T)((Mt,bt)=>st(ut,Mt,Ot,bt))((0,l.Tg)(Ve(ut,Ot))),rt):("number"==typeof st&&(rt=st),(0,ue.N)((ut,Ot)=>function Te(Ve,st,rt,ut,Ot,Mt,bt,St){const zt=[];let Rt=0,On=0,An=!1;const Zt=()=>{An&&!zt.length&&!Rt&&st.complete()},At=sn=>Rt<ut?dt(sn):zt.push(sn),dt=sn=>{Mt&&st.next(sn),Rt++;let Gt=!1;(0,l.Tg)(rt(sn,On++)).subscribe((0,ge._)(st,Qt=>{Ot?.(Qt),Mt?At(Qt):st.next(Qt)},()=>{Gt=!0},void 0,()=>{if(Gt)try{for(Rt--;zt.length&&Rt<ut;){const Qt=zt.shift();bt?(0,h.N)(st,bt,()=>dt(Qt)):dt(Qt)}Zt()}catch(Qt){st.error(Qt)}}))};return Ve.subscribe((0,ge._)(st,At,()=>{An=!0,Zt()})),()=>{St?.()}}(ut,Ot,Ve,rt)))}},2816:($n,Tt,H)=>{"use strict";H.d(Tt,{S:()=>h});var D=H(9974),l=H(4360);function h(ge,Te){return(0,D.N)(function ue(ge,Te,nt,ke,Ve){return(st,rt)=>{let ut=nt,Ot=Te,Mt=0;st.subscribe((0,l._)(rt,bt=>{const St=Mt++;Ot=ut?ge(Ot,bt,St):(ut=!0,bt),ke&&rt.next(Ot)},Ve&&(()=>{ut&&rt.next(Ot),rt.complete()})))}}(ge,Te,arguments.length>=2,!0))}},7647:($n,Tt,H)=>{"use strict";H.d(Tt,{u:()=>ge});var D=H(8750),l=H(1413),ue=H(7707),h=H(9974);function ge(nt={}){const{connector:ke=(()=>new l.B),resetOnError:Ve=!0,resetOnComplete:st=!0,resetOnRefCountZero:rt=!0}=nt;return ut=>{let Ot,Mt,bt,St=0,zt=!1,Rt=!1;const On=()=>{Mt?.unsubscribe(),Mt=void 0},An=()=>{On(),Ot=bt=void 0,zt=Rt=!1},Zt=()=>{const At=Ot;An(),At?.unsubscribe()};return(0,h.N)((At,dt)=>{St++,!Rt&&!zt&&On();const sn=bt=bt??ke();dt.add(()=>{St--,0===St&&!Rt&&!zt&&(Mt=Te(Zt,rt))}),sn.subscribe(dt),!Ot&&St>0&&(Ot=new ue.Ms({next:Gt=>sn.next(Gt),error:Gt=>{Rt=!0,On(),Mt=Te(An,Ve,Gt),sn.error(Gt)},complete:()=>{zt=!0,On(),Mt=Te(An,st),sn.complete()}}),(0,D.Tg)(At).subscribe(Ot))})(ut)}}function Te(nt,ke,...Ve){if(!0===ke)return void nt();if(!1===ke)return;const st=new ue.Ms({next:()=>{st.unsubscribe(),nt()}});return(0,D.Tg)(ke(...Ve)).subscribe(st)}},4668:($n,Tt,H)=>{"use strict";H.d(Tt,{t:()=>ue});var D=H(2771),l=H(7647);function ue(h,ge,Te){let nt,ke=!1;return h&&"object"==typeof h?({bufferSize:nt=1/0,windowTime:ge=1/0,refCount:ke=!1,scheduler:Te}=h):nt=h??1/0,(0,l.u)({connector:()=>new D.m(nt,ge,Te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ke})}},9172:($n,Tt,H)=>{"use strict";H.d(Tt,{Z:()=>h});var D=H(8793),l=H(9326),ue=H(9974);function h(...ge){const Te=(0,l.lI)(ge);return(0,ue.N)((nt,ke)=>{(Te?(0,D.x)(ge,nt,Te):(0,D.x)(ge,nt)).subscribe(ke)})}},5558:($n,Tt,H)=>{"use strict";H.d(Tt,{n:()=>h});var D=H(8750),l=H(9974),ue=H(4360);function h(ge,Te){return(0,l.N)((nt,ke)=>{let Ve=null,st=0,rt=!1;const ut=()=>rt&&!Ve&&ke.complete();nt.subscribe((0,ue._)(ke,Ot=>{Ve?.unsubscribe();let Mt=0;const bt=st++;(0,D.Tg)(ge(Ot,bt)).subscribe(Ve=(0,ue._)(ke,St=>ke.next(Te?Te(Ot,St,bt,Mt++):St),()=>{Ve=null,ut()}))},()=>{rt=!0,ut()}))})}},6697:($n,Tt,H)=>{"use strict";H.d(Tt,{s:()=>h});var D=H(983),l=H(9974),ue=H(4360);function h(ge){return ge<=0?()=>D.w:(0,l.N)((Te,nt)=>{let ke=0;Te.subscribe((0,ue._)(nt,Ve=>{++ke<=ge&&(nt.next(Ve),ge<=ke&&nt.complete())}))})}},6977:($n,Tt,H)=>{"use strict";H.d(Tt,{Q:()=>ge});var D=H(9974),l=H(4360),ue=H(8750),h=H(5343);function ge(Te){return(0,D.N)((nt,ke)=>{(0,ue.Tg)(Te).subscribe((0,l._)(ke,()=>ke.complete(),h.l)),!ke.closed&&nt.subscribe(ke)})}},7048:($n,Tt,H)=>{"use strict";H.d(Tt,{v:()=>ue});var D=H(9974),l=H(4360);function ue(h,ge=!1){return(0,D.N)((Te,nt)=>{let ke=0;Te.subscribe((0,l._)(nt,Ve=>{const st=h(Ve,ke++);(st||ge)&&nt.next(Ve),!st&&nt.complete()}))})}},8141:($n,Tt,H)=>{"use strict";H.d(Tt,{M:()=>ge});var D=H(8071),l=H(9974),ue=H(4360),h=H(3669);function ge(Te,nt,ke){const Ve=(0,D.T)(Te)||nt||ke?{next:Te,error:nt,complete:ke}:Te;return Ve?(0,l.N)((st,rt)=>{var ut;null===(ut=Ve.subscribe)||void 0===ut||ut.call(Ve);let Ot=!0;st.subscribe((0,ue._)(rt,Mt=>{var bt;null===(bt=Ve.next)||void 0===bt||bt.call(Ve,Mt),rt.next(Mt)},()=>{var Mt;Ot=!1,null===(Mt=Ve.complete)||void 0===Mt||Mt.call(Ve),rt.complete()},Mt=>{var bt;Ot=!1,null===(bt=Ve.error)||void 0===bt||bt.call(Ve,Mt),rt.error(Mt)},()=>{var Mt,bt;Ot&&(null===(Mt=Ve.unsubscribe)||void 0===Mt||Mt.call(Ve)),null===(bt=Ve.finalize)||void 0===bt||bt.call(Ve)}))}):h.D}},3774:($n,Tt,H)=>{"use strict";H.d(Tt,{v:()=>h});var D=H(9350),l=H(9974),ue=H(4360);function h(Te=ge){return(0,l.N)((nt,ke)=>{let Ve=!1;nt.subscribe((0,ue._)(ke,st=>{Ve=!0,ke.next(st)},()=>Ve?ke.complete():ke.error(Te())))})}function ge(){return new D.G}},6780:($n,Tt,H)=>{"use strict";H.d(Tt,{R:()=>ge});var D=H(8359);class l extends D.yU{constructor(nt,ke){super()}schedule(nt,ke=0){return this}}const ue={setInterval(Te,nt,...ke){const{delegate:Ve}=ue;return Ve?.setInterval?Ve.setInterval(Te,nt,...ke):setInterval(Te,nt,...ke)},clearInterval(Te){const{delegate:nt}=ue;return(nt?.clearInterval||clearInterval)(Te)},delegate:void 0};var h=H(7908);class ge extends l{constructor(nt,ke){super(nt,ke),this.scheduler=nt,this.work=ke,this.pending=!1}schedule(nt,ke=0){var Ve;if(this.closed)return this;this.state=nt;const st=this.id,rt=this.scheduler;return null!=st&&(this.id=this.recycleAsyncId(rt,st,ke)),this.pending=!0,this.delay=ke,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(rt,this.id,ke),this}requestAsyncId(nt,ke,Ve=0){return ue.setInterval(nt.flush.bind(nt,this),Ve)}recycleAsyncId(nt,ke,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return ke;null!=ke&&ue.clearInterval(ke)}execute(nt,ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(nt,ke);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(nt,ke){let st,Ve=!1;try{this.work(nt)}catch(rt){Ve=!0,st=rt||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),st}unsubscribe(){if(!this.closed){const{id:nt,scheduler:ke}=this,{actions:Ve}=ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,h.o)(Ve,this),null!=nt&&(this.id=this.recycleAsyncId(ke,nt,null)),this.delay=null,super.unsubscribe()}}}},9687:($n,Tt,H)=>{"use strict";H.d(Tt,{q:()=>ue});var D=H(6129);class l{constructor(ge,Te=l.now){this.schedulerActionCtor=ge,this.now=Te}schedule(ge,Te=0,nt){return new this.schedulerActionCtor(this,ge).schedule(nt,Te)}}l.now=D.U.now;class ue extends l{constructor(ge,Te=l.now){super(ge,Te),this.actions=[],this._active=!1}flush(ge){const{actions:Te}=this;if(this._active)return void Te.push(ge);let nt;this._active=!0;do{if(nt=ge.execute(ge.state,ge.delay))break}while(ge=Te.shift());if(this._active=!1,nt){for(;ge=Te.shift();)ge.unsubscribe();throw nt}}}},3236:($n,Tt,H)=>{"use strict";H.d(Tt,{E:()=>ue,b:()=>h});var D=H(6780);const ue=new(H(9687).q)(D.R),h=ue},6129:($n,Tt,H)=>{"use strict";H.d(Tt,{U:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},9270:($n,Tt,H)=>{"use strict";H.d(Tt,{f:()=>D});const D={setTimeout(l,ue,...h){const{delegate:ge}=D;return ge?.setTimeout?ge.setTimeout(l,ue,...h):setTimeout(l,ue,...h)},clearTimeout(l){const{delegate:ue}=D;return(ue?.clearTimeout||clearTimeout)(l)},delegate:void 0}},4761:($n,Tt,H)=>{"use strict";H.d(Tt,{l:()=>l});const l=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:($n,Tt,H)=>{"use strict";H.d(Tt,{s:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:($n,Tt,H)=>{"use strict";H.d(Tt,{G:()=>l});const l=(0,H(1853).L)(ue=>function(){ue(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:($n,Tt,H)=>{"use strict";H.d(Tt,{R0:()=>Te,lI:()=>ge,ms:()=>h});var D=H(8071),l=H(9470);function ue(nt){return nt[nt.length-1]}function h(nt){return(0,D.T)(ue(nt))?nt.pop():void 0}function ge(nt){return(0,l.m)(ue(nt))?nt.pop():void 0}function Te(nt,ke){return"number"==typeof ue(nt)?nt.pop():ke}},3073:($n,Tt,H)=>{"use strict";H.d(Tt,{D:()=>ge});const{isArray:D}=Array,{getPrototypeOf:l,prototype:ue,keys:h}=Object;function ge(nt){if(1===nt.length){const ke=nt[0];if(D(ke))return{args:ke,keys:null};if(function Te(nt){return nt&&"object"==typeof nt&&l(nt)===ue}(ke)){const Ve=h(ke);return{args:Ve.map(st=>ke[st]),keys:Ve}}}return{args:nt,keys:null}}},7908:($n,Tt,H)=>{"use strict";function D(l,ue){if(l){const h=l.indexOf(ue);0<=h&&l.splice(h,1)}}H.d(Tt,{o:()=>D})},1853:($n,Tt,H)=>{"use strict";function D(l){const h=l(ge=>{Error.call(ge),ge.stack=(new Error).stack});return h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h}H.d(Tt,{L:()=>D})},8496:($n,Tt,H)=>{"use strict";function D(l,ue){return l.reduce((h,ge,Te)=>(h[ge]=ue[Te],h),{})}H.d(Tt,{e:()=>D})},9786:($n,Tt,H)=>{"use strict";H.d(Tt,{Y:()=>ue,l:()=>h});var D=H(1026);let l=null;function ue(ge){if(D.$.useDeprecatedSynchronousErrorHandling){const Te=!l;if(Te&&(l={errorThrown:!1,error:null}),ge(),Te){const{errorThrown:nt,error:ke}=l;if(l=null,nt)throw ke}}else ge()}function h(ge){D.$.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=ge)}},5225:($n,Tt,H)=>{"use strict";function D(l,ue,h,ge=0,Te=!1){const nt=ue.schedule(function(){h(),Te?l.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(l.add(nt),!Te)return nt}H.d(Tt,{N:()=>D})},3669:($n,Tt,H)=>{"use strict";function D(l){return l}H.d(Tt,{D:()=>D})},7441:($n,Tt,H)=>{"use strict";H.d(Tt,{X:()=>D});const D=l=>l&&"number"==typeof l.length&&"function"!=typeof l},7953:($n,Tt,H)=>{"use strict";H.d(Tt,{T:()=>l});var D=H(8071);function l(ue){return Symbol.asyncIterator&&(0,D.T)(ue?.[Symbol.asyncIterator])}},8071:($n,Tt,H)=>{"use strict";function D(l){return"function"==typeof l}H.d(Tt,{T:()=>D})},5055:($n,Tt,H)=>{"use strict";H.d(Tt,{l:()=>ue});var D=H(3494),l=H(8071);function ue(h){return(0,l.T)(h[D.s])}},5397:($n,Tt,H)=>{"use strict";H.d(Tt,{x:()=>ue});var D=H(4761),l=H(8071);function ue(h){return(0,l.T)(h?.[D.l])}},4402:($n,Tt,H)=>{"use strict";H.d(Tt,{A:()=>ue});var D=H(1985),l=H(8071);function ue(h){return!!h&&(h instanceof D.c||(0,l.T)(h.lift)&&(0,l.T)(h.subscribe))}},9858:($n,Tt,H)=>{"use strict";H.d(Tt,{y:()=>l});var D=H(8071);function l(ue){return(0,D.T)(ue?.then)}},5196:($n,Tt,H)=>{"use strict";H.d(Tt,{C:()=>ue,U:()=>h});var D=H(7272),l=H(8071);function ue(ge){return(0,D.AQ)(this,arguments,function*(){const nt=ge.getReader();try{for(;;){const{value:ke,done:Ve}=yield(0,D.N3)(nt.read());if(Ve)return yield(0,D.N3)(void 0);yield yield(0,D.N3)(ke)}}finally{nt.releaseLock()}})}function h(ge){return(0,l.T)(ge?.getReader)}},9470:($n,Tt,H)=>{"use strict";H.d(Tt,{m:()=>l});var D=H(8071);function l(ue){return ue&&(0,D.T)(ue.schedule)}},9974:($n,Tt,H)=>{"use strict";H.d(Tt,{N:()=>ue,S:()=>l});var D=H(8071);function l(h){return(0,D.T)(h?.lift)}function ue(h){return ge=>{if(l(ge))return ge.lift(function(Te){try{return h(Te,this)}catch(nt){this.error(nt)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:($n,Tt,H)=>{"use strict";H.d(Tt,{I:()=>h});var D=H(6354);const{isArray:l}=Array;function h(ge){return(0,D.T)(Te=>function ue(ge,Te){return l(Te)?ge(...Te):ge(Te)}(ge,Te))}},5343:($n,Tt,H)=>{"use strict";function D(){}H.d(Tt,{l:()=>D})},1203:($n,Tt,H)=>{"use strict";H.d(Tt,{F:()=>l,m:()=>ue});var D=H(3669);function l(...h){return ue(h)}function ue(h){return 0===h.length?D.D:1===h.length?h[0]:function(Te){return h.reduce((nt,ke)=>ke(nt),Te)}}},5334:($n,Tt,H)=>{"use strict";H.d(Tt,{m:()=>ue});var D=H(1026),l=H(9270);function ue(h){l.f.setTimeout(()=>{const{onUnhandledError:ge}=D.$;if(!ge)throw h;ge(h)})}},591:($n,Tt,H)=>{"use strict";function D(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Tt,{L:()=>D})},7272:($n,Tt,H)=>{"use strict";function ke(He,ft,Ut,on){return new(Ut||(Ut=Promise))(function(mn,Sn){function ai(an){try{tn(on.next(an))}catch(Pn){Sn(Pn)}}function Nn(an){try{tn(on.throw(an))}catch(Pn){Sn(Pn)}}function tn(an){an.done?mn(an.value):function Fn(mn){return mn instanceof Ut?mn:new Ut(function(Sn){Sn(mn)})}(an.value).then(ai,Nn)}tn((on=on.apply(He,ft||[])).next())})}function zt(He){return this instanceof zt?(this.v=He,this):new zt(He)}function Rt(He,ft,Ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fn,on=Ut.apply(He,ft||[]),mn=[];return Fn={},Sn("next"),Sn("throw"),Sn("return"),Fn[Symbol.asyncIterator]=function(){return this},Fn;function Sn(ui){on[ui]&&(Fn[ui]=function(kt){return new Promise(function(It,_n){mn.push([ui,kt,It,_n])>1||ai(ui,kt)})})}function ai(ui,kt){try{!function Nn(ui){ui.value instanceof zt?Promise.resolve(ui.value.v).then(tn,an):Pn(mn[0][2],ui)}(on[ui](kt))}catch(It){Pn(mn[0][3],It)}}function tn(ui){ai("next",ui)}function an(ui){ai("throw",ui)}function Pn(ui,kt){ui(kt),mn.shift(),mn.length&&ai(mn[0][0],mn[0][1])}}function An(He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut,ft=He[Symbol.asyncIterator];return ft?ft.call(He):(He=function ut(He){var ft="function"==typeof Symbol&&Symbol.iterator,Ut=ft&&He[ft],on=0;if(Ut)return Ut.call(He);if(He&&"number"==typeof He.length)return{next:function(){return He&&on>=He.length&&(He=void 0),{value:He&&He[on++],done:!He}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(He),Ut={},on("next"),on("throw"),on("return"),Ut[Symbol.asyncIterator]=function(){return this},Ut);function on(mn){Ut[mn]=He[mn]&&function(Sn){return new Promise(function(ai,Nn){!function Fn(mn,Sn,ai,Nn){Promise.resolve(Nn).then(function(tn){mn({value:tn,done:ai})},Sn)}(ai,Nn,(Sn=He[mn](Sn)).done,Sn.value)})}}}H.d(Tt,{AQ:()=>Rt,N3:()=>zt,sH:()=>ke,xN:()=>An})},4523:($n,Tt,H)=>{"use strict";function D(ue,h,ge,Te,nt,ke,Ve){try{var st=ue[ke](Ve),rt=st.value}catch(ut){return void ge(ut)}st.done?h(rt):Promise.resolve(rt).then(Te,nt)}function l(ue){return function(){var h=this,ge=arguments;return new Promise(function(Te,nt){var ke=ue.apply(h,ge);function Ve(rt){D(ke,Te,nt,Ve,st,"next",rt)}function st(rt){D(ke,Te,nt,Ve,st,"throw",rt)}Ve(void 0)})}}H.d(Tt,{A:()=>l})},9969:($n,Tt,H)=>{"use strict";H.d(Tt,{FX:()=>Qt,If:()=>D,K2:()=>Te,MA:()=>ut,P:()=>Mt,hZ:()=>ue,i0:()=>h,iF:()=>nt,kY:()=>st,kp:()=>l,sf:()=>sn,ui:()=>Gt,wk:()=>ke});var D=function(Wt){return Wt[Wt.State=0]="State",Wt[Wt.Transition=1]="Transition",Wt[Wt.Sequence=2]="Sequence",Wt[Wt.Group=3]="Group",Wt[Wt.Animate=4]="Animate",Wt[Wt.Keyframes=5]="Keyframes",Wt[Wt.Style=6]="Style",Wt[Wt.Trigger=7]="Trigger",Wt[Wt.Reference=8]="Reference",Wt[Wt.AnimateChild=9]="AnimateChild",Wt[Wt.AnimateRef=10]="AnimateRef",Wt[Wt.Query=11]="Query",Wt[Wt.Stagger=12]="Stagger",Wt}(D||{});const l="*";function ue(Wt,He){return{type:D.Trigger,name:Wt,definitions:He,options:{}}}function h(Wt,He=null){return{type:D.Animate,styles:He,timings:Wt}}function Te(Wt,He=null){return{type:D.Sequence,steps:Wt,options:He}}function nt(Wt){return{type:D.Style,styles:Wt,offset:null}}function ke(Wt,He,ft){return{type:D.State,name:Wt,styles:He,options:ft}}function st(Wt,He,ft=null){return{type:D.Transition,expr:Wt,animation:He,options:ft}}function ut(Wt=null){return{type:D.AnimateChild,options:Wt}}function Mt(Wt,He,ft=null){return{type:D.Query,selector:Wt,animation:He,options:ft}}class sn{constructor(He=0,ft=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=He+ft}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}onStart(He){this._originalOnStartFns.push(He),this._onStartFns.push(He)}onDone(He){this._originalOnDoneFns.push(He),this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(He=>He()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(He){this._position=this.totalTime?He*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(He){const ft="start"==He?this._onStartFns:this._onDoneFns;ft.forEach(Ut=>Ut()),ft.length=0}}class Gt{constructor(He){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=He;let ft=0,Ut=0,on=0;const Fn=this.players.length;0==Fn?queueMicrotask(()=>this._onFinish()):this.players.forEach(mn=>{mn.onDone(()=>{++ft==Fn&&this._onFinish()}),mn.onDestroy(()=>{++Ut==Fn&&this._onDestroy()}),mn.onStart(()=>{++on==Fn&&this._onStart()})}),this.totalTime=this.players.reduce((mn,Sn)=>Math.max(mn,Sn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}init(){this.players.forEach(He=>He.init())}onStart(He){this._onStartFns.push(He)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(He=>He()),this._onStartFns=[])}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(He=>He.play())}pause(){this.players.forEach(He=>He.pause())}restart(){this.players.forEach(He=>He.restart())}finish(){this._onFinish(),this.players.forEach(He=>He.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(He=>He.destroy()),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this.players.forEach(He=>He.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(He){const ft=He*this.totalTime;this.players.forEach(Ut=>{const on=Ut.totalTime?Math.min(1,ft/Ut.totalTime):1;Ut.setPosition(on)})}getPosition(){const He=this.players.reduce((ft,Ut)=>null===ft||Ut.totalTime>ft.totalTime?Ut:ft,null);return null!=He?He.getPosition():0}beforeDestroy(){this.players.forEach(He=>{He.beforeDestroy&&He.beforeDestroy()})}triggerCallback(He){const ft="start"==He?this._onStartFns:this._onDoneFns;ft.forEach(Ut=>Ut()),ft.length=0}}const Qt="!"},7645:($n,Tt,H)=>{"use strict";H.d(Tt,{Pd:()=>at,Au:()=>ni,vr:()=>ui,Bu:()=>ri,FN:()=>de,GX:()=>Ze,Q_:()=>be,Z7:()=>fi,Ai:()=>Cn,px:()=>mn,_G:()=>Gn,w6:()=>si,Ae:()=>Sn});var D=H(177),l=H(3953),ue=H(6860),h=H(1413),ge=H(8359),Te=H(4412),nt=H(7673),ke=H(7336),Ve=H(8141),st=H(152),rt=H(5964),ut=H(6354);function Ot(Ge){return(0,rt.p)((Fe,ye)=>Ge<=ye)}var Mt=H(3294),bt=H(6977),St=H(2318),zt=H(4085),Rt=H(4572),On=H(8793),An=H(1985),Zt=H(6697),At=H(9172);const sn=new Set;let Gt,Qt=(()=>{class Ge{constructor(ye,$e){this._platform=ye,this._nonce=$e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):He}matchMedia(ye){return(this._platform.WEBKIT||this._platform.BLINK)&&function Wt(Ge,Fe){if(!sn.has(Ge))try{Gt||(Gt=document.createElement("style"),Fe&&Gt.setAttribute("nonce",Fe),Gt.setAttribute("type","text/css"),document.head.appendChild(Gt)),Gt.sheet&&(Gt.sheet.insertRule(`@media ${Ge} {body{ }}`,0),sn.add(Ge))}catch(ye){console.error(ye)}}(ye,this._nonce),this._matchMedia(ye)}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(ue.OD),l.KVO(l.BIS,8))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();function He(Ge){return{matches:"all"===Ge||""===Ge,media:Ge,addListener:()=>{},removeListener:()=>{}}}let ft=(()=>{class Ge{constructor(ye,$e){this._mediaMatcher=ye,this._zone=$e,this._queries=new Map,this._destroySubject=new h.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ye){return Ut((0,zt.FG)(ye)).some(mt=>this._registerQuery(mt).mql.matches)}observe(ye){const mt=Ut((0,zt.FG)(ye)).map(kn=>this._registerQuery(kn).observable);let Lt=(0,Rt.z)(mt);return Lt=(0,On.x)(Lt.pipe((0,Zt.s)(1)),Lt.pipe(Ot(1),(0,st.B)(0))),Lt.pipe((0,ut.T)(kn=>{const hi={matches:!1,breakpoints:{}};return kn.forEach(({matches:Bi,query:Ri})=>{hi.matches=hi.matches||Bi,hi.breakpoints[Ri]=Bi}),hi}))}_registerQuery(ye){if(this._queries.has(ye))return this._queries.get(ye);const $e=this._mediaMatcher.matchMedia(ye),Lt={observable:new An.c(kn=>{const hi=Bi=>this._zone.run(()=>kn.next(Bi));return $e.addListener(hi),()=>{$e.removeListener(hi)}}).pipe((0,At.Z)($e),(0,ut.T)(({matches:kn})=>({query:ye,matches:kn})),(0,bt.Q)(this._destroySubject)),mql:$e};return this._queries.set(ye,Lt),Lt}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(Qt),l.KVO(l.SKi))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();function Ut(Ge){return Ge.map(Fe=>Fe.split(",")).reduce((Fe,ye)=>Fe.concat(ye)).map(Fe=>Fe.trim())}const Fn=" ";function mn(Ge,Fe,ye){const $e=ai(Ge,Fe);ye=ye.trim(),!$e.some(mt=>mt.trim()===ye)&&($e.push(ye),Ge.setAttribute(Fe,$e.join(Fn)))}function Sn(Ge,Fe,ye){const $e=ai(Ge,Fe);ye=ye.trim();const mt=$e.filter(Lt=>Lt!==ye);mt.length?Ge.setAttribute(Fe,mt.join(Fn)):Ge.removeAttribute(Fe)}function ai(Ge,Fe){return Ge.getAttribute(Fe)?.match(/\S+/g)??[]}const tn="cdk-describedby-message",an="cdk-describedby-host";let Pn=0,ui=(()=>{class Ge{constructor(ye,$e){this._platform=$e,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Pn++,this._document=ye,this._id=(0,l.WQX)(l.sZ2)+"-"+Pn++}describe(ye,$e,mt){if(!this._canBeDescribed(ye,$e))return;const Lt=kt($e,mt);"string"!=typeof $e?(It($e,this._id),this._messageRegistry.set(Lt,{messageElement:$e,referenceCount:0})):this._messageRegistry.has(Lt)||this._createMessageElement($e,mt),this._isElementDescribedByMessage(ye,Lt)||this._addMessageReference(ye,Lt)}removeDescription(ye,$e,mt){if(!$e||!this._isElementNode(ye))return;const Lt=kt($e,mt);if(this._isElementDescribedByMessage(ye,Lt)&&this._removeMessageReference(ye,Lt),"string"==typeof $e){const kn=this._messageRegistry.get(Lt);kn&&0===kn.referenceCount&&this._deleteMessageElement(Lt)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const ye=this._document.querySelectorAll(`[${an}="${this._id}"]`);for(let $e=0;$e<ye.length;$e++)this._removeCdkDescribedByReferenceIds(ye[$e]),ye[$e].removeAttribute(an);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(ye,$e){const mt=this._document.createElement("div");It(mt,this._id),mt.textContent=ye,$e&&mt.setAttribute("role",$e),this._createMessagesContainer(),this._messagesContainer.appendChild(mt),this._messageRegistry.set(kt(ye,$e),{messageElement:mt,referenceCount:0})}_deleteMessageElement(ye){this._messageRegistry.get(ye)?.messageElement?.remove(),this._messageRegistry.delete(ye)}_createMessagesContainer(){if(this._messagesContainer)return;const ye="cdk-describedby-message-container",$e=this._document.querySelectorAll(`.${ye}[platform="server"]`);for(let Lt=0;Lt<$e.length;Lt++)$e[Lt].remove();const mt=this._document.createElement("div");mt.style.visibility="hidden",mt.classList.add(ye),mt.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&mt.setAttribute("platform","server"),this._document.body.appendChild(mt),this._messagesContainer=mt}_removeCdkDescribedByReferenceIds(ye){const $e=ai(ye,"aria-describedby").filter(mt=>0!=mt.indexOf(tn));ye.setAttribute("aria-describedby",$e.join(" "))}_addMessageReference(ye,$e){const mt=this._messageRegistry.get($e);mn(ye,"aria-describedby",mt.messageElement.id),ye.setAttribute(an,this._id),mt.referenceCount++}_removeMessageReference(ye,$e){const mt=this._messageRegistry.get($e);mt.referenceCount--,Sn(ye,"aria-describedby",mt.messageElement.id),ye.removeAttribute(an)}_isElementDescribedByMessage(ye,$e){const mt=ai(ye,"aria-describedby"),Lt=this._messageRegistry.get($e),kn=Lt&&Lt.messageElement.id;return!!kn&&-1!=mt.indexOf(kn)}_canBeDescribed(ye,$e){if(!this._isElementNode(ye))return!1;if($e&&"object"==typeof $e)return!0;const mt=null==$e?"":`${$e}`.trim(),Lt=ye.getAttribute("aria-label");return!(!mt||Lt&&Lt.trim()===mt)}_isElementNode(ye){return ye.nodeType===this._document.ELEMENT_NODE}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(D.qQ),l.KVO(ue.OD))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();function kt(Ge,Fe){return"string"==typeof Ge?`${Fe||""}/${Ge}`:Ge}function It(Ge,Fe){Ge.id||(Ge.id=`${tn}-${Fe}-${Pn++}`)}class _n{constructor(Fe,ye){this._items=Fe,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new h.B,this._typeaheadSubscription=ge.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=$e=>$e.disabled,this._pressedLetters=[],this.tabOut=new h.B,this.change=new h.B,Fe instanceof l.rOR?this._itemChangesSubscription=Fe.changes.subscribe($e=>this._itemsChanged($e.toArray())):(0,l.Hps)(Fe)&&(this._effectRef=(0,l.QZP)(()=>this._itemsChanged(Fe()),{injector:ye}))}skipPredicate(Fe){return this._skipPredicateFn=Fe,this}withWrap(Fe=!0){return this._wrap=Fe,this}withVerticalOrientation(Fe=!0){return this._vertical=Fe,this}withHorizontalOrientation(Fe){return this._horizontal=Fe,this}withAllowedModifierKeys(Fe){return this._allowedModifierKeys=Fe,this}withTypeAhead(Fe=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ve.M)(ye=>this._pressedLetters.push(ye)),(0,st.B)(Fe),(0,rt.p)(()=>this._pressedLetters.length>0),(0,ut.T)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const $e=this._getItemsArray();for(let mt=1;mt<$e.length+1;mt++){const Lt=(this._activeItemIndex+mt)%$e.length,kn=$e[Lt];if(!this._skipPredicateFn(kn)&&0===kn.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(Lt);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(Fe=!0){return this._homeAndEnd=Fe,this}withPageUpDown(Fe=!0,ye=10){return this._pageUpAndDown={enabled:Fe,delta:ye},this}setActiveItem(Fe){const ye=this._activeItem;this.updateActiveItem(Fe),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(Fe){const ye=Fe.keyCode,mt=["altKey","ctrlKey","metaKey","shiftKey"].every(Lt=>!Fe[Lt]||this._allowedModifierKeys.indexOf(Lt)>-1);switch(ye){case ke.wn:return void this.tabOut.next();case ke.n6:if(this._vertical&&mt){this.setNextItemActive();break}return;case ke.i7:if(this._vertical&&mt){this.setPreviousItemActive();break}return;case ke.LE:if(this._horizontal&&mt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case ke.UQ:if(this._horizontal&&mt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case ke.yZ:if(this._homeAndEnd&&mt){this.setFirstItemActive();break}return;case ke.Kp:if(this._homeAndEnd&&mt){this.setLastItemActive();break}return;case ke.w_:if(this._pageUpAndDown.enabled&&mt){const Lt=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(Lt>0?Lt:0,1);break}return;case ke.dB:if(this._pageUpAndDown.enabled&&mt){const Lt=this._activeItemIndex+this._pageUpAndDown.delta,kn=this._getItemsArray().length;this._setActiveItemByIndex(Lt<kn?Lt:kn-1,-1);break}return;default:return void((mt||(0,ke.rp)(Fe,"shiftKey"))&&(Fe.key&&1===Fe.key.length?this._letterKeyStream.next(Fe.key.toLocaleUpperCase()):(ye>=ke.A&&ye<=ke.Z||ye>=ke.f2&&ye<=ke.bn)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],Fe.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Fe){const ye=this._getItemsArray(),$e="number"==typeof Fe?Fe:ye.indexOf(Fe);this._activeItem=ye[$e]??null,this._activeItemIndex=$e}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(Fe){this._wrap?this._setActiveInWrapMode(Fe):this._setActiveInDefaultMode(Fe)}_setActiveInWrapMode(Fe){const ye=this._getItemsArray();for(let $e=1;$e<=ye.length;$e++){const mt=(this._activeItemIndex+Fe*$e+ye.length)%ye.length;if(!this._skipPredicateFn(ye[mt]))return void this.setActiveItem(mt)}}_setActiveInDefaultMode(Fe){this._setActiveItemByIndex(this._activeItemIndex+Fe,Fe)}_setActiveItemByIndex(Fe,ye){const $e=this._getItemsArray();if($e[Fe]){for(;this._skipPredicateFn($e[Fe]);)if(!$e[Fe+=ye])return;this.setActiveItem(Fe)}}_getItemsArray(){return(0,l.Hps)(this._items)?this._items():this._items instanceof l.rOR?this._items.toArray():this._items}_itemsChanged(Fe){if(this._activeItem){const ye=Fe.indexOf(this._activeItem);ye>-1&&ye!==this._activeItemIndex&&(this._activeItemIndex=ye)}}}class ni extends _n{setActiveItem(Fe){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Fe),this.activeItem&&this.activeItem.setActiveStyles()}}class ri extends _n{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Fe){return this._origin=Fe,this}setActiveItem(Fe){super.setActiveItem(Fe),this.activeItem&&this.activeItem.focus(this._origin)}}let fi=(()=>{class Ge{constructor(ye){this._platform=ye}isDisabled(ye){return ye.hasAttribute("disabled")}isVisible(ye){return function qt(Ge){return!!(Ge.offsetWidth||Ge.offsetHeight||"function"==typeof Ge.getClientRects&&Ge.getClientRects().length)}(ye)&&"visible"===getComputedStyle(ye).visibility}isTabbable(ye){if(!this._platform.isBrowser)return!1;const $e=function wt(Ge){try{return Ge.frameElement}catch{return null}}(function Ae(Ge){return Ge.ownerDocument&&Ge.ownerDocument.defaultView||window}(ye));if($e&&(-1===Lr($e)||!this.isVisible($e)))return!1;let mt=ye.nodeName.toLowerCase(),Lt=Lr(ye);return ye.hasAttribute("contenteditable")?-1!==Lt:!("iframe"===mt||"object"===mt||this._platform.WEBKIT&&this._platform.IOS&&!function zr(Ge){let Fe=Ge.nodeName.toLowerCase(),ye="input"===Fe&&Ge.type;return"text"===ye||"password"===ye||"select"===Fe||"textarea"===Fe}(ye))&&("audio"===mt?!!ye.hasAttribute("controls")&&-1!==Lt:"video"===mt?-1!==Lt&&(null!==Lt||this._platform.FIREFOX||ye.hasAttribute("controls")):ye.tabIndex>=0)}isFocusable(ye,$e){return function rn(Ge){return!function gi(Ge){return function di(Ge){return"input"==Ge.nodeName.toLowerCase()}(Ge)&&"hidden"==Ge.type}(Ge)&&(function yn(Ge){let Fe=Ge.nodeName.toLowerCase();return"input"===Fe||"select"===Fe||"button"===Fe||"textarea"===Fe}(Ge)||function yi(Ge){return function Yi(Ge){return"a"==Ge.nodeName.toLowerCase()}(Ge)&&Ge.hasAttribute("href")}(Ge)||Ge.hasAttribute("contenteditable")||_r(Ge))}(ye)&&!this.isDisabled(ye)&&($e?.ignoreVisibility||this.isVisible(ye))}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(ue.OD))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();function _r(Ge){if(!Ge.hasAttribute("tabindex")||void 0===Ge.tabIndex)return!1;let Fe=Ge.getAttribute("tabindex");return!(!Fe||isNaN(parseInt(Fe,10)))}function Lr(Ge){if(!_r(Ge))return null;const Fe=parseInt(Ge.getAttribute("tabindex")||"",10);return isNaN(Fe)?-1:Fe}class qe{get enabled(){return this._enabled}set enabled(Fe){this._enabled=Fe,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Fe,this._startAnchor),this._toggleAnchorTabIndex(Fe,this._endAnchor))}constructor(Fe,ye,$e,mt,Lt=!1,kn){this._element=Fe,this._checker=ye,this._ngZone=$e,this._document=mt,this._injector=kn,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Lt||this.attachAnchors()}destroy(){const Fe=this._startAnchor,ye=this._endAnchor;Fe&&(Fe.removeEventListener("focus",this.startAnchorListener),Fe.remove()),ye&&(ye.removeEventListener("focus",this.endAnchorListener),ye.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Fe){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusInitialElement(Fe)))})}focusFirstTabbableElementWhenReady(Fe){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusFirstTabbableElement(Fe)))})}focusLastTabbableElementWhenReady(Fe){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusLastTabbableElement(Fe)))})}_getRegionBoundary(Fe){const ye=this._element.querySelectorAll(`[cdk-focus-region-${Fe}], [cdkFocusRegion${Fe}], [cdk-focus-${Fe}]`);return"start"==Fe?ye.length?ye[0]:this._getFirstTabbableElement(this._element):ye.length?ye[ye.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Fe){const ye=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ye){if(!this._checker.isFocusable(ye)){const $e=this._getFirstTabbableElement(ye);return $e?.focus(Fe),!!$e}return ye.focus(Fe),!0}return this.focusFirstTabbableElement(Fe)}focusFirstTabbableElement(Fe){const ye=this._getRegionBoundary("start");return ye&&ye.focus(Fe),!!ye}focusLastTabbableElement(Fe){const ye=this._getRegionBoundary("end");return ye&&ye.focus(Fe),!!ye}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Fe){if(this._checker.isFocusable(Fe)&&this._checker.isTabbable(Fe))return Fe;const ye=Fe.children;for(let $e=0;$e<ye.length;$e++){const mt=ye[$e].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ye[$e]):null;if(mt)return mt}return null}_getLastTabbableElement(Fe){if(this._checker.isFocusable(Fe)&&this._checker.isTabbable(Fe))return Fe;const ye=Fe.children;for(let $e=ye.length-1;$e>=0;$e--){const mt=ye[$e].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ye[$e]):null;if(mt)return mt}return null}_createAnchor(){const Fe=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Fe),Fe.classList.add("cdk-visually-hidden"),Fe.classList.add("cdk-focus-trap-anchor"),Fe.setAttribute("aria-hidden","true"),Fe}_toggleAnchorTabIndex(Fe,ye){Fe?ye.setAttribute("tabindex","0"):ye.removeAttribute("tabindex")}toggleAnchors(Fe){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Fe,this._startAnchor),this._toggleAnchorTabIndex(Fe,this._endAnchor))}_executeOnStable(Fe){this._injector?(0,l.mal)(Fe,{injector:this._injector}):setTimeout(Fe)}}let Ze=(()=>{class Ge{constructor(ye,$e,mt){this._checker=ye,this._ngZone=$e,this._injector=(0,l.WQX)(l.zZn),this._document=mt}create(ye,$e=!1){return new qe(ye,this._checker,this._ngZone,this._document,$e,this._injector)}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(fi),l.KVO(l.SKi),l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();function Gn(Ge){return 0===Ge.buttons||0===Ge.detail}function si(Ge){const Fe=Ge.touches&&Ge.touches[0]||Ge.changedTouches&&Ge.changedTouches[0];return!(!Fe||-1!==Fe.identifier||null!=Fe.radiusX&&1!==Fe.radiusX||null!=Fe.radiusY&&1!==Fe.radiusY)}const ji=new l.nKC("cdk-input-modality-detector-options"),ei={ignoreKeys:[ke.A$,ke.W3,ke.eg,ke.Ge,ke.FX]},fr=(0,ue.BQ)({passive:!0,capture:!0});let no=(()=>{class Ge{get mostRecentModality(){return this._modality.value}constructor(ye,$e,mt,Lt){this._platform=ye,this._mostRecentTarget=null,this._modality=new Te.t(null),this._lastTouchMs=0,this._onKeydown=kn=>{this._options?.ignoreKeys?.some(hi=>hi===kn.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ue.Fb)(kn))},this._onMousedown=kn=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Gn(kn)?"keyboard":"mouse"),this._mostRecentTarget=(0,ue.Fb)(kn))},this._onTouchstart=kn=>{si(kn)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ue.Fb)(kn))},this._options={...ei,...Lt},this.modalityDetected=this._modality.pipe(Ot(1)),this.modalityChanged=this.modalityDetected.pipe((0,Mt.F)()),ye.isBrowser&&$e.runOutsideAngular(()=>{mt.addEventListener("keydown",this._onKeydown,fr),mt.addEventListener("mousedown",this._onMousedown,fr),mt.addEventListener("touchstart",this._onTouchstart,fr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fr),document.removeEventListener("mousedown",this._onMousedown,fr),document.removeEventListener("touchstart",this._onTouchstart,fr))}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(ue.OD),l.KVO(l.SKi),l.KVO(D.qQ),l.KVO(ji,8))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();const ln=new l.nKC("liveAnnouncerElement",{providedIn:"root",factory:function bi(){return null}}),$t=new l.nKC("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let zn=0,Cn=(()=>{class Ge{constructor(ye,$e,mt,Lt){this._ngZone=$e,this._defaultOptions=Lt,this._document=mt,this._liveElement=ye||this._createLiveElement()}announce(ye,...$e){const mt=this._defaultOptions;let Lt,kn;return 1===$e.length&&"number"==typeof $e[0]?kn=$e[0]:[Lt,kn]=$e,this.clear(),clearTimeout(this._previousTimeout),Lt||(Lt=mt&&mt.politeness?mt.politeness:"polite"),null==kn&&mt&&(kn=mt.duration),this._liveElement.setAttribute("aria-live",Lt),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(hi=>this._currentResolve=hi)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ye,"number"==typeof kn&&(this._previousTimeout=setTimeout(()=>this.clear(),kn)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const ye="cdk-live-announcer-element",$e=this._document.getElementsByClassName(ye),mt=this._document.createElement("div");for(let Lt=0;Lt<$e.length;Lt++)$e[Lt].remove();return mt.classList.add(ye),mt.classList.add("cdk-visually-hidden"),mt.setAttribute("aria-atomic","true"),mt.setAttribute("aria-live","polite"),mt.id="cdk-live-announcer-"+zn++,this._document.body.appendChild(mt),mt}_exposeAnnouncerToModals(ye){const $e=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let mt=0;mt<$e.length;mt++){const Lt=$e[mt],kn=Lt.getAttribute("aria-owns");kn?-1===kn.indexOf(ye)&&Lt.setAttribute("aria-owns",kn+" "+ye):Lt.setAttribute("aria-owns",ye)}}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(ln,8),l.KVO(l.SKi),l.KVO(D.qQ),l.KVO($t,8))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();var ie=function(Ge){return Ge[Ge.IMMEDIATE=0]="IMMEDIATE",Ge[Ge.EVENTUAL=1]="EVENTUAL",Ge}(ie||{});const U=new l.nKC("cdk-focus-monitor-default-options"),K=(0,ue.BQ)({passive:!0,capture:!0});let de=(()=>{class Ge{constructor(ye,$e,mt,Lt,kn){this._ngZone=ye,this._platform=$e,this._inputModalityDetector=mt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new h.B,this._rootNodeFocusAndBlurListener=hi=>{for(let Ri=(0,ue.Fb)(hi);Ri;Ri=Ri.parentElement)"focus"===hi.type?this._onFocus(hi,Ri):this._onBlur(hi,Ri)},this._document=Lt,this._detectionMode=kn?.detectionMode||ie.IMMEDIATE}monitor(ye,$e=!1){const mt=(0,zt.i8)(ye);if(!this._platform.isBrowser||1!==mt.nodeType)return(0,nt.of)();const Lt=(0,ue.KT)(mt)||this._getDocument(),kn=this._elementInfo.get(mt);if(kn)return $e&&(kn.checkChildren=!0),kn.subject;const hi={checkChildren:$e,subject:new h.B,rootNode:Lt};return this._elementInfo.set(mt,hi),this._registerGlobalListeners(hi),hi.subject}stopMonitoring(ye){const $e=(0,zt.i8)(ye),mt=this._elementInfo.get($e);mt&&(mt.subject.complete(),this._setClasses($e),this._elementInfo.delete($e),this._removeGlobalListeners(mt))}focusVia(ye,$e,mt){const Lt=(0,zt.i8)(ye);Lt===this._getDocument().activeElement?this._getClosestElementsInfo(Lt).forEach(([hi,Bi])=>this._originChanged(hi,$e,Bi)):(this._setOrigin($e),"function"==typeof Lt.focus&&Lt.focus(mt))}ngOnDestroy(){this._elementInfo.forEach((ye,$e)=>this.stopMonitoring($e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ye){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ye)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:ye&&this._isLastInteractionFromInputLabel(ye)?"mouse":"program"}_shouldBeAttributedToTouch(ye){return this._detectionMode===ie.EVENTUAL||!!ye?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(ye,$e){ye.classList.toggle("cdk-focused",!!$e),ye.classList.toggle("cdk-touch-focused","touch"===$e),ye.classList.toggle("cdk-keyboard-focused","keyboard"===$e),ye.classList.toggle("cdk-mouse-focused","mouse"===$e),ye.classList.toggle("cdk-program-focused","program"===$e)}_setOrigin(ye,$e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ye,this._originFromTouchInteraction="touch"===ye&&$e,this._detectionMode===ie.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ye,$e){const mt=this._elementInfo.get($e),Lt=(0,ue.Fb)(ye);!mt||!mt.checkChildren&&$e!==Lt||this._originChanged($e,this._getFocusOrigin(Lt),mt)}_onBlur(ye,$e){const mt=this._elementInfo.get($e);!mt||mt.checkChildren&&ye.relatedTarget instanceof Node&&$e.contains(ye.relatedTarget)||(this._setClasses($e),this._emitOrigin(mt,null))}_emitOrigin(ye,$e){ye.subject.observers.length&&this._ngZone.run(()=>ye.subject.next($e))}_registerGlobalListeners(ye){if(!this._platform.isBrowser)return;const $e=ye.rootNode,mt=this._rootNodeFocusListenerCount.get($e)||0;mt||this._ngZone.runOutsideAngular(()=>{$e.addEventListener("focus",this._rootNodeFocusAndBlurListener,K),$e.addEventListener("blur",this._rootNodeFocusAndBlurListener,K)}),this._rootNodeFocusListenerCount.set($e,mt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,bt.Q)(this._stopInputModalityDetector)).subscribe(Lt=>{this._setOrigin(Lt,!0)}))}_removeGlobalListeners(ye){const $e=ye.rootNode;if(this._rootNodeFocusListenerCount.has($e)){const mt=this._rootNodeFocusListenerCount.get($e);mt>1?this._rootNodeFocusListenerCount.set($e,mt-1):($e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,K),$e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,K),this._rootNodeFocusListenerCount.delete($e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ye,$e,mt){this._setClasses(ye,$e),this._emitOrigin(mt,$e),this._lastFocusOrigin=$e}_getClosestElementsInfo(ye){const $e=[];return this._elementInfo.forEach((mt,Lt)=>{(Lt===ye||mt.checkChildren&&Lt.contains(ye))&&$e.push([Lt,mt])}),$e}_isLastInteractionFromInputLabel(ye){const{_mostRecentTarget:$e,mostRecentModality:mt}=this._inputModalityDetector;if("mouse"!==mt||!$e||$e===ye||"INPUT"!==ye.nodeName&&"TEXTAREA"!==ye.nodeName||ye.disabled)return!1;const Lt=ye.labels;if(Lt)for(let kn=0;kn<Lt.length;kn++)if(Lt[kn].contains($e))return!0;return!1}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(l.SKi),l.KVO(ue.OD),l.KVO(no),l.KVO(D.qQ,8),l.KVO(U,8))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})();var Xe=function(Ge){return Ge[Ge.NONE=0]="NONE",Ge[Ge.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",Ge[Ge.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",Ge}(Xe||{});const De="cdk-high-contrast-black-on-white",me="cdk-high-contrast-white-on-black",ne="cdk-high-contrast-active";let be=(()=>{class Ge{constructor(ye,$e){this._platform=ye,this._document=$e,this._breakpointSubscription=(0,l.WQX)(ft).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Xe.NONE;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const $e=this._document.defaultView||window,mt=$e&&$e.getComputedStyle?$e.getComputedStyle(ye):null,Lt=(mt&&mt.backgroundColor||"").replace(/ /g,"");switch(ye.remove(),Lt){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Xe.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Xe.BLACK_ON_WHITE}return Xe.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(ne,De,me),this._hasCheckedHighContrastMode=!0;const $e=this.getHighContrastMode();$e===Xe.BLACK_ON_WHITE?ye.add(ne,De):$e===Xe.WHITE_ON_BLACK&&ye.add(ne,me)}}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(ue.OD),l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})(),at=(()=>{class Ge{constructor(ye){ye._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function($e){return new($e||Ge)(l.KVO(be))};static#t=this.\u0275mod=l.$C({type:Ge});static#n=this.\u0275inj=l.G2t({imports:[St.w5]})}return Ge})()},8203:($n,Tt,H)=>{"use strict";H.d(Tt,{dS:()=>nt,jI:()=>Ve});var D=H(3953),l=H(177);const ue=new D.nKC("cdk-dir-doc",{providedIn:"root",factory:function h(){return(0,D.WQX)(l.qQ)}}),ge=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let nt=(()=>{class st{constructor(ut){this.value="ltr",this.change=new D.bkB,ut&&(this.value=function Te(st){const rt=st?.toLowerCase()||"";return"auto"===rt&&typeof navigator<"u"&&navigator?.language?ge.test(navigator.language)?"rtl":"ltr":"rtl"===rt?"rtl":"ltr"}((ut.body?ut.body.dir:null)||(ut.documentElement?ut.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(Ot){return new(Ot||st)(D.KVO(ue,8))};static#t=this.\u0275prov=D.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}return st})(),Ve=(()=>{class st{static#e=this.\u0275fac=function(Ot){return new(Ot||st)};static#t=this.\u0275mod=D.$C({type:st});static#n=this.\u0275inj=D.G2t({})}return st})()},4085:($n,Tt,H)=>{"use strict";H.d(Tt,{FG:()=>ge,OE:()=>ue,a1:()=>Te,he:()=>l,i8:()=>nt});var D=H(3953);function l(Ve){return null!=Ve&&"false"!=`${Ve}`}function ue(Ve,st=0){return function h(Ve){return!isNaN(parseFloat(Ve))&&!isNaN(Number(Ve))}(Ve)?Number(Ve):st}function ge(Ve){return Array.isArray(Ve)?Ve:[Ve]}function Te(Ve){return null==Ve?"":"string"==typeof Ve?Ve:`${Ve}px`}function nt(Ve){return Ve instanceof D.aKT?Ve.nativeElement:Ve}},5024:($n,Tt,H)=>{"use strict";H.d(Tt,{CB:()=>ut,zP:()=>Mt}),H(4402),H(7673);var ue=H(1413),h=H(3953);class ut{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(St=!1,zt,Rt=!0,On){this._multiple=St,this._emitChanges=Rt,this.compareWith=On,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ue.B,zt&&zt.length&&(St?zt.forEach(An=>this._markSelected(An)):this._markSelected(zt[0]),this._selectedToEmit.length=0)}select(...St){this._verifyValueAssignment(St),St.forEach(Rt=>this._markSelected(Rt));const zt=this._hasQueuedChanges();return this._emitChangeEvent(),zt}deselect(...St){this._verifyValueAssignment(St),St.forEach(Rt=>this._unmarkSelected(Rt));const zt=this._hasQueuedChanges();return this._emitChangeEvent(),zt}setSelection(...St){this._verifyValueAssignment(St);const zt=this.selected,Rt=new Set(St);St.forEach(An=>this._markSelected(An)),zt.filter(An=>!Rt.has(this._getConcreteValue(An,Rt))).forEach(An=>this._unmarkSelected(An));const On=this._hasQueuedChanges();return this._emitChangeEvent(),On}toggle(St){return this.isSelected(St)?this.deselect(St):this.select(St)}clear(St=!0){this._unmarkAll();const zt=this._hasQueuedChanges();return St&&this._emitChangeEvent(),zt}isSelected(St){return this._selection.has(this._getConcreteValue(St))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(St){this._multiple&&this.selected&&this._selected.sort(St)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(St){St=this._getConcreteValue(St),this.isSelected(St)||(this._multiple||this._unmarkAll(),this.isSelected(St)||this._selection.add(St),this._emitChanges&&this._selectedToEmit.push(St))}_unmarkSelected(St){St=this._getConcreteValue(St),this.isSelected(St)&&(this._selection.delete(St),this._emitChanges&&this._deselectedToEmit.push(St))}_unmarkAll(){this.isEmpty()||this._selection.forEach(St=>this._unmarkSelected(St))}_verifyValueAssignment(St){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(St,zt){if(this.compareWith){zt=zt??this._selection;for(let Rt of zt)if(this.compareWith(St,Rt))return Rt;return St}return St}}let Mt=(()=>{class bt{constructor(){this._listeners=[]}notify(zt,Rt){for(let On of this._listeners)On(zt,Rt)}listen(zt){return this._listeners.push(zt),()=>{this._listeners=this._listeners.filter(Rt=>zt!==Rt)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(Rt){return new(Rt||bt)};static#t=this.\u0275prov=h.jDH({token:bt,factory:bt.\u0275fac,providedIn:"root"})}return bt})()},7336:($n,Tt,H)=>{"use strict";H.d(Tt,{A:()=>Pn,A$:()=>ke,FX:()=>Te,Fm:()=>ge,Ge:()=>vt,Kp:()=>bt,LE:()=>On,UQ:()=>zt,W3:()=>nt,Z:()=>Ue,_f:()=>rt,bn:()=>Sn,dB:()=>Mt,eg:()=>bn,f2:()=>Gt,i7:()=>Rt,n6:()=>An,rp:()=>Dn,t6:()=>ut,w_:()=>Ot,wn:()=>ue,yZ:()=>St});const ue=9,ge=13,Te=16,nt=17,ke=18,rt=27,ut=32,Ot=33,Mt=34,bt=35,St=36,zt=37,Rt=38,On=39,An=40,Gt=48,Sn=57,Pn=65,Ue=90,vt=91,bn=224;function Dn(xn,...Ti){return Ti.length?Ti.some(_i=>xn[_i]):xn.altKey||xn.shiftKey||xn.ctrlKey||xn.metaKey}},2318:($n,Tt,H)=>{"use strict";H.d(Tt,{Wv:()=>rt,w5:()=>ut});var D=H(4085),l=H(3953),ue=H(1985),h=H(1413),ge=H(6354),Te=H(5964),nt=H(152);let Ve=(()=>{class Ot{create(bt){return typeof MutationObserver>"u"?null:new MutationObserver(bt)}static#e=this.\u0275fac=function(St){return new(St||Ot)};static#t=this.\u0275prov=l.jDH({token:Ot,factory:Ot.\u0275fac,providedIn:"root"})}return Ot})(),st=(()=>{class Ot{constructor(bt){this._mutationObserverFactory=bt,this._observedElements=new Map,this._ngZone=(0,l.WQX)(l.SKi)}ngOnDestroy(){this._observedElements.forEach((bt,St)=>this._cleanupObserver(St))}observe(bt){const St=(0,D.i8)(bt);return new ue.c(zt=>{const On=this._observeElement(St).pipe((0,ge.T)(An=>An.filter(Zt=>!function ke(Ot){if("characterData"===Ot.type&&Ot.target instanceof Comment)return!0;if("childList"===Ot.type){for(let Mt=0;Mt<Ot.addedNodes.length;Mt++)if(!(Ot.addedNodes[Mt]instanceof Comment))return!1;for(let Mt=0;Mt<Ot.removedNodes.length;Mt++)if(!(Ot.removedNodes[Mt]instanceof Comment))return!1;return!0}return!1}(Zt))),(0,Te.p)(An=>!!An.length)).subscribe(An=>{this._ngZone.run(()=>{zt.next(An)})});return()=>{On.unsubscribe(),this._unobserveElement(St)}})}_observeElement(bt){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(bt))this._observedElements.get(bt).count++;else{const St=new h.B,zt=this._mutationObserverFactory.create(Rt=>St.next(Rt));zt&&zt.observe(bt,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(bt,{observer:zt,stream:St,count:1})}return this._observedElements.get(bt).stream})}_unobserveElement(bt){this._observedElements.has(bt)&&(this._observedElements.get(bt).count--,this._observedElements.get(bt).count||this._cleanupObserver(bt))}_cleanupObserver(bt){if(this._observedElements.has(bt)){const{observer:St,stream:zt}=this._observedElements.get(bt);St&&St.disconnect(),zt.complete(),this._observedElements.delete(bt)}}static#e=this.\u0275fac=function(St){return new(St||Ot)(l.KVO(Ve))};static#t=this.\u0275prov=l.jDH({token:Ot,factory:Ot.\u0275fac,providedIn:"root"})}return Ot})(),rt=(()=>{class Ot{get disabled(){return this._disabled}set disabled(bt){this._disabled=bt,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(bt){this._debounce=(0,D.OE)(bt),this._subscribe()}constructor(bt,St){this._contentObserver=bt,this._elementRef=St,this.event=new l.bkB,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const bt=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?bt.pipe((0,nt.B)(this.debounce)):bt).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(St){return new(St||Ot)(l.rXU(st),l.rXU(l.aKT))};static#t=this.\u0275dir=l.FsC({type:Ot,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",l.L39],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[l.GFd]})}return Ot})(),ut=(()=>{class Ot{static#e=this.\u0275fac=function(St){return new(St||Ot)};static#t=this.\u0275mod=l.$C({type:Ot});static#n=this.\u0275inj=l.G2t({providers:[Ve]})}return Ot})()},7987:($n,Tt,H)=>{"use strict";H.d(Tt,{$Q:()=>yi,WB:()=>di,hJ:()=>qt,z_:()=>Lr});var D=H(3980),l=H(177),ue=H(3953),h=H(4085),ge=H(6860),Te=H(5964),nt=H(6977),ke=H(7048),Ve=H(8203),st=H(6939),rt=H(1413),ut=H(8359),Ot=H(7786),Mt=H(7336);const bt=(0,ge.CZ)();class St{constructor(Ae,qe){this._viewportRuler=Ae,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=qe}attach(){}enable(){if(this._canBeEnabled()){const Ae=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Ae.style.left||"",this._previousHTMLStyles.top=Ae.style.top||"",Ae.style.left=(0,h.a1)(-this._previousScrollPosition.left),Ae.style.top=(0,h.a1)(-this._previousScrollPosition.top),Ae.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Ae=this._document.documentElement,Ze=Ae.style,Pe=this._document.body.style,Je=Ze.scrollBehavior||"",Ue=Pe.scrollBehavior||"";this._isEnabled=!1,Ze.left=this._previousHTMLStyles.left,Ze.top=this._previousHTMLStyles.top,Ae.classList.remove("cdk-global-scrollblock"),bt&&(Ze.scrollBehavior=Pe.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bt&&(Ze.scrollBehavior=Je,Pe.scrollBehavior=Ue)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const qe=this._document.body,Ze=this._viewportRuler.getViewportSize();return qe.scrollHeight>Ze.height||qe.scrollWidth>Ze.width}}class Rt{constructor(Ae,qe,Ze,Pe){this._scrollDispatcher=Ae,this._ngZone=qe,this._viewportRuler=Ze,this._config=Pe,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Ae){this._overlayRef=Ae}enable(){if(this._scrollSubscription)return;const Ae=this._scrollDispatcher.scrolled(0).pipe((0,Te.p)(qe=>!qe||!this._overlayRef.overlayElement.contains(qe.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Ae.subscribe(()=>{const qe=this._viewportRuler.getViewportScrollPosition().top;Math.abs(qe-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Ae.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class On{enable(){}disable(){}attach(){}}function An(rn,Ae){return Ae.some(qe=>rn.bottom<qe.top||rn.top>qe.bottom||rn.right<qe.left||rn.left>qe.right)}function Zt(rn,Ae){return Ae.some(qe=>rn.top<qe.top||rn.bottom>qe.bottom||rn.left<qe.left||rn.right>qe.right)}class At{constructor(Ae,qe,Ze,Pe){this._scrollDispatcher=Ae,this._viewportRuler=qe,this._ngZone=Ze,this._config=Pe,this._scrollSubscription=null}attach(Ae){this._overlayRef=Ae}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const qe=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Ze,height:Pe}=this._viewportRuler.getViewportSize();An(qe,[{width:Ze,height:Pe,bottom:Pe,right:Ze,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let dt=(()=>{class rn{constructor(qe,Ze,Pe,Je){this._scrollDispatcher=qe,this._viewportRuler=Ze,this._ngZone=Pe,this.noop=()=>new On,this.close=Ue=>new Rt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Ue),this.block=()=>new St(this._viewportRuler,this._document),this.reposition=Ue=>new At(this._scrollDispatcher,this._viewportRuler,this._ngZone,Ue),this._document=Je}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(D.R),ue.KVO(D.Xj),ue.KVO(ue.SKi),ue.KVO(l.qQ))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})();class sn{constructor(Ae){if(this.scrollStrategy=new On,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Ae){const qe=Object.keys(Ae);for(const Ze of qe)void 0!==Ae[Ze]&&(this[Ze]=Ae[Ze])}}}class Wt{constructor(Ae,qe){this.connectionPair=Ae,this.scrollableViewProperties=qe}}let Ut=(()=>{class rn{constructor(qe){this._attachedOverlays=[],this._document=qe}ngOnDestroy(){this.detach()}add(qe){this.remove(qe),this._attachedOverlays.push(qe)}remove(qe){const Ze=this._attachedOverlays.indexOf(qe);Ze>-1&&this._attachedOverlays.splice(Ze,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(l.qQ))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})(),on=(()=>{class rn extends Ut{constructor(qe,Ze){super(qe),this._ngZone=Ze,this._keydownListener=Pe=>{const Je=this._attachedOverlays;for(let Ue=Je.length-1;Ue>-1;Ue--)if(Je[Ue]._keydownEvents.observers.length>0){const vt=Je[Ue]._keydownEvents;this._ngZone?this._ngZone.run(()=>vt.next(Pe)):vt.next(Pe);break}}}add(qe){super.add(qe),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(l.qQ),ue.KVO(ue.SKi,8))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})(),Fn=(()=>{class rn extends Ut{constructor(qe,Ze,Pe){super(qe),this._platform=Ze,this._ngZone=Pe,this._cursorStyleIsSet=!1,this._pointerDownListener=Je=>{this._pointerDownEventTarget=(0,ge.Fb)(Je)},this._clickListener=Je=>{const Ue=(0,ge.Fb)(Je),vt="click"===Je.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Ue;this._pointerDownEventTarget=null;const nn=this._attachedOverlays.slice();for(let hn=nn.length-1;hn>-1;hn--){const Gn=nn[hn];if(Gn._outsidePointerEvents.observers.length<1||!Gn.hasAttached())continue;if(mn(Gn.overlayElement,Ue)||mn(Gn.overlayElement,vt))break;const si=Gn._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>si.next(Je)):si.next(Je)}}}add(qe){if(super.add(qe),!this._isAttached){const Ze=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Ze)):this._addEventListeners(Ze),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Ze.style.cursor,Ze.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const qe=this._document.body;qe.removeEventListener("pointerdown",this._pointerDownListener,!0),qe.removeEventListener("click",this._clickListener,!0),qe.removeEventListener("auxclick",this._clickListener,!0),qe.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(qe.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(qe){qe.addEventListener("pointerdown",this._pointerDownListener,!0),qe.addEventListener("click",this._clickListener,!0),qe.addEventListener("auxclick",this._clickListener,!0),qe.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(l.qQ),ue.KVO(ge.OD),ue.KVO(ue.SKi,8))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})();function mn(rn,Ae){const qe=typeof ShadowRoot<"u"&&ShadowRoot;let Ze=Ae;for(;Ze;){if(Ze===rn)return!0;Ze=qe&&Ze instanceof ShadowRoot?Ze.host:Ze.parentNode}return!1}let Sn=(()=>{class rn{constructor(qe,Ze){this._platform=Ze,this._document=qe}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const qe="cdk-overlay-container";if(this._platform.isBrowser||(0,ge.v8)()){const Pe=this._document.querySelectorAll(`.${qe}[platform="server"], .${qe}[platform="test"]`);for(let Je=0;Je<Pe.length;Je++)Pe[Je].remove()}const Ze=this._document.createElement("div");Ze.classList.add(qe),(0,ge.v8)()?Ze.setAttribute("platform","test"):this._platform.isBrowser||Ze.setAttribute("platform","server"),this._document.body.appendChild(Ze),this._containerElement=Ze}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(l.qQ),ue.KVO(ge.OD))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})();class ai{constructor(Ae,qe,Ze,Pe,Je,Ue,vt,nn,hn,Gn=!1,si){this._portalOutlet=Ae,this._host=qe,this._pane=Ze,this._config=Pe,this._ngZone=Je,this._keyboardDispatcher=Ue,this._document=vt,this._location=nn,this._outsideClickDispatcher=hn,this._animationsDisabled=Gn,this._injector=si,this._backdropElement=null,this._backdropClick=new rt.B,this._attachments=new rt.B,this._detachments=new rt.B,this._locationChanges=ut.yU.EMPTY,this._backdropClickHandler=ji=>this._backdropClick.next(ji),this._backdropTransitionendHandler=ji=>{this._disposeBackdrop(ji.target)},this._keydownEvents=new rt.B,this._outsidePointerEvents=new rt.B,this._renders=new rt.B,Pe.scrollStrategy&&(this._scrollStrategy=Pe.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Pe.positionStrategy,this._afterRenderRef=(0,ue.O8t)(()=>(0,ue.Tzd)(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Ae){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const qe=this._portalOutlet.attach(Ae);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),(0,ue.mal)(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof qe?.onDestroy&&qe.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),qe}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Ae=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Ae}dispose(){const Ae=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Ae&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Ae){Ae!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Ae,this.hasAttached()&&(Ae.attach(this),this.updatePosition()))}updateSize(Ae){this._config={...this._config,...Ae},this._updateElementSize()}setDirection(Ae){this._config={...this._config,direction:Ae},this._updateElementDirection()}addPanelClass(Ae){this._pane&&this._toggleClasses(this._pane,Ae,!0)}removePanelClass(Ae){this._pane&&this._toggleClasses(this._pane,Ae,!1)}getDirection(){const Ae=this._config.direction;return Ae?"string"==typeof Ae?Ae:Ae.value:"ltr"}updateScrollStrategy(Ae){Ae!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Ae,this.hasAttached()&&(Ae.attach(this),Ae.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Ae=this._pane.style;Ae.width=(0,h.a1)(this._config.width),Ae.height=(0,h.a1)(this._config.height),Ae.minWidth=(0,h.a1)(this._config.minWidth),Ae.minHeight=(0,h.a1)(this._config.minHeight),Ae.maxWidth=(0,h.a1)(this._config.maxWidth),Ae.maxHeight=(0,h.a1)(this._config.maxHeight)}_togglePointerEvents(Ae){this._pane.style.pointerEvents=Ae?"":"none"}_attachBackdrop(){const Ae="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Ae)})}):this._backdropElement.classList.add(Ae)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Ae=this._backdropElement;if(Ae){if(this._animationsDisabled)return void this._disposeBackdrop(Ae);Ae.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Ae.addEventListener("transitionend",this._backdropTransitionendHandler)}),Ae.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Ae)},500))}}_toggleClasses(Ae,qe,Ze){const Pe=(0,h.FG)(qe||[]).filter(Je=>!!Je);Pe.length&&(Ze?Ae.classList.add(...Pe):Ae.classList.remove(...Pe))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const Ae=this._renders.pipe((0,nt.Q)((0,Ot.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Ae.unsubscribe())})})}_disposeScrollStrategy(){const Ae=this._scrollStrategy;Ae&&(Ae.disable(),Ae.detach&&Ae.detach())}_disposeBackdrop(Ae){Ae&&(Ae.removeEventListener("click",this._backdropClickHandler),Ae.removeEventListener("transitionend",this._backdropTransitionendHandler),Ae.remove(),this._backdropElement===Ae&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Nn="cdk-overlay-connected-position-bounding-box",tn=/([A-Za-z%]+)$/;class an{get positions(){return this._preferredPositions}constructor(Ae,qe,Ze,Pe,Je){this._viewportRuler=qe,this._document=Ze,this._platform=Pe,this._overlayContainer=Je,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new rt.B,this._resizeSubscription=ut.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Ae)}attach(Ae){this._validatePositions(),Ae.hostElement.classList.add(Nn),this._overlayRef=Ae,this._boundingBox=Ae.hostElement,this._pane=Ae.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Ae=this._originRect,qe=this._overlayRect,Ze=this._viewportRect,Pe=this._containerRect,Je=[];let Ue;for(let vt of this._preferredPositions){let nn=this._getOriginPoint(Ae,Pe,vt),hn=this._getOverlayPoint(nn,qe,vt),Gn=this._getOverlayFit(hn,qe,Ze,vt);if(Gn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(vt,nn);this._canFitWithFlexibleDimensions(Gn,hn,Ze)?Je.push({position:vt,origin:nn,overlayRect:qe,boundingBoxRect:this._calculateBoundingBoxRect(nn,vt)}):(!Ue||Ue.overlayFit.visibleArea<Gn.visibleArea)&&(Ue={overlayFit:Gn,overlayPoint:hn,originPoint:nn,position:vt,overlayRect:qe})}if(Je.length){let vt=null,nn=-1;for(const hn of Je){const Gn=hn.boundingBoxRect.width*hn.boundingBoxRect.height*(hn.position.weight||1);Gn>nn&&(nn=Gn,vt=hn)}return this._isPushed=!1,void this._applyPosition(vt.position,vt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Ue.position,Ue.originPoint);this._applyPosition(Ue.position,Ue.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Pn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Nn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Ae=this._lastPosition;if(Ae){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const qe=this._getOriginPoint(this._originRect,this._containerRect,Ae);this._applyPosition(Ae,qe)}else this.apply()}withScrollableContainers(Ae){return this._scrollables=Ae,this}withPositions(Ae){return this._preferredPositions=Ae,-1===Ae.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Ae){return this._viewportMargin=Ae,this}withFlexibleDimensions(Ae=!0){return this._hasFlexibleDimensions=Ae,this}withGrowAfterOpen(Ae=!0){return this._growAfterOpen=Ae,this}withPush(Ae=!0){return this._canPush=Ae,this}withLockedPosition(Ae=!0){return this._positionLocked=Ae,this}setOrigin(Ae){return this._origin=Ae,this}withDefaultOffsetX(Ae){return this._offsetX=Ae,this}withDefaultOffsetY(Ae){return this._offsetY=Ae,this}withTransformOriginOn(Ae){return this._transformOriginSelector=Ae,this}_getOriginPoint(Ae,qe,Ze){let Pe,Je;if("center"==Ze.originX)Pe=Ae.left+Ae.width/2;else{const Ue=this._isRtl()?Ae.right:Ae.left,vt=this._isRtl()?Ae.left:Ae.right;Pe="start"==Ze.originX?Ue:vt}return qe.left<0&&(Pe-=qe.left),Je="center"==Ze.originY?Ae.top+Ae.height/2:"top"==Ze.originY?Ae.top:Ae.bottom,qe.top<0&&(Je-=qe.top),{x:Pe,y:Je}}_getOverlayPoint(Ae,qe,Ze){let Pe,Je;return Pe="center"==Ze.overlayX?-qe.width/2:"start"===Ze.overlayX?this._isRtl()?-qe.width:0:this._isRtl()?0:-qe.width,Je="center"==Ze.overlayY?-qe.height/2:"top"==Ze.overlayY?0:-qe.height,{x:Ae.x+Pe,y:Ae.y+Je}}_getOverlayFit(Ae,qe,Ze,Pe){const Je=kt(qe);let{x:Ue,y:vt}=Ae,nn=this._getOffset(Pe,"x"),hn=this._getOffset(Pe,"y");nn&&(Ue+=nn),hn&&(vt+=hn);let ji=0-vt,ei=vt+Je.height-Ze.height,Mi=this._subtractOverflows(Je.width,0-Ue,Ue+Je.width-Ze.width),fr=this._subtractOverflows(Je.height,ji,ei),no=Mi*fr;return{visibleArea:no,isCompletelyWithinViewport:Je.width*Je.height===no,fitsInViewportVertically:fr===Je.height,fitsInViewportHorizontally:Mi==Je.width}}_canFitWithFlexibleDimensions(Ae,qe,Ze){if(this._hasFlexibleDimensions){const Pe=Ze.bottom-qe.y,Je=Ze.right-qe.x,Ue=ui(this._overlayRef.getConfig().minHeight),vt=ui(this._overlayRef.getConfig().minWidth);return(Ae.fitsInViewportVertically||null!=Ue&&Ue<=Pe)&&(Ae.fitsInViewportHorizontally||null!=vt&&vt<=Je)}return!1}_pushOverlayOnScreen(Ae,qe,Ze){if(this._previousPushAmount&&this._positionLocked)return{x:Ae.x+this._previousPushAmount.x,y:Ae.y+this._previousPushAmount.y};const Pe=kt(qe),Je=this._viewportRect,Ue=Math.max(Ae.x+Pe.width-Je.width,0),vt=Math.max(Ae.y+Pe.height-Je.height,0),nn=Math.max(Je.top-Ze.top-Ae.y,0),hn=Math.max(Je.left-Ze.left-Ae.x,0);let Gn=0,si=0;return Gn=Pe.width<=Je.width?hn||-Ue:Ae.x<this._viewportMargin?Je.left-Ze.left-Ae.x:0,si=Pe.height<=Je.height?nn||-vt:Ae.y<this._viewportMargin?Je.top-Ze.top-Ae.y:0,this._previousPushAmount={x:Gn,y:si},{x:Ae.x+Gn,y:Ae.y+si}}_applyPosition(Ae,qe){if(this._setTransformOrigin(Ae),this._setOverlayElementStyles(qe,Ae),this._setBoundingBoxStyles(qe,Ae),Ae.panelClass&&this._addPanelClasses(Ae.panelClass),this._positionChanges.observers.length){const Ze=this._getScrollVisibility();if(Ae!==this._lastPosition||!this._lastScrollVisibility||!function It(rn,Ae){return rn===Ae||rn.isOriginClipped===Ae.isOriginClipped&&rn.isOriginOutsideView===Ae.isOriginOutsideView&&rn.isOverlayClipped===Ae.isOverlayClipped&&rn.isOverlayOutsideView===Ae.isOverlayOutsideView}(this._lastScrollVisibility,Ze)){const Pe=new Wt(Ae,Ze);this._positionChanges.next(Pe)}this._lastScrollVisibility=Ze}this._lastPosition=Ae,this._isInitialRender=!1}_setTransformOrigin(Ae){if(!this._transformOriginSelector)return;const qe=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Ze,Pe=Ae.overlayY;Ze="center"===Ae.overlayX?"center":this._isRtl()?"start"===Ae.overlayX?"right":"left":"start"===Ae.overlayX?"left":"right";for(let Je=0;Je<qe.length;Je++)qe[Je].style.transformOrigin=`${Ze} ${Pe}`}_calculateBoundingBoxRect(Ae,qe){const Ze=this._viewportRect,Pe=this._isRtl();let Je,Ue,vt,Gn,si,ji;if("top"===qe.overlayY)Ue=Ae.y,Je=Ze.height-Ue+this._viewportMargin;else if("bottom"===qe.overlayY)vt=Ze.height-Ae.y+2*this._viewportMargin,Je=Ze.height-vt+this._viewportMargin;else{const ei=Math.min(Ze.bottom-Ae.y+Ze.top,Ae.y),Mi=this._lastBoundingBoxSize.height;Je=2*ei,Ue=Ae.y-ei,Je>Mi&&!this._isInitialRender&&!this._growAfterOpen&&(Ue=Ae.y-Mi/2)}if("end"===qe.overlayX&&!Pe||"start"===qe.overlayX&&Pe)ji=Ze.width-Ae.x+2*this._viewportMargin,Gn=Ae.x-this._viewportMargin;else if("start"===qe.overlayX&&!Pe||"end"===qe.overlayX&&Pe)si=Ae.x,Gn=Ze.right-Ae.x;else{const ei=Math.min(Ze.right-Ae.x+Ze.left,Ae.x),Mi=this._lastBoundingBoxSize.width;Gn=2*ei,si=Ae.x-ei,Gn>Mi&&!this._isInitialRender&&!this._growAfterOpen&&(si=Ae.x-Mi/2)}return{top:Ue,left:si,bottom:vt,right:ji,width:Gn,height:Je}}_setBoundingBoxStyles(Ae,qe){const Ze=this._calculateBoundingBoxRect(Ae,qe);!this._isInitialRender&&!this._growAfterOpen&&(Ze.height=Math.min(Ze.height,this._lastBoundingBoxSize.height),Ze.width=Math.min(Ze.width,this._lastBoundingBoxSize.width));const Pe={};if(this._hasExactPosition())Pe.top=Pe.left="0",Pe.bottom=Pe.right=Pe.maxHeight=Pe.maxWidth="",Pe.width=Pe.height="100%";else{const Je=this._overlayRef.getConfig().maxHeight,Ue=this._overlayRef.getConfig().maxWidth;Pe.height=(0,h.a1)(Ze.height),Pe.top=(0,h.a1)(Ze.top),Pe.bottom=(0,h.a1)(Ze.bottom),Pe.width=(0,h.a1)(Ze.width),Pe.left=(0,h.a1)(Ze.left),Pe.right=(0,h.a1)(Ze.right),Pe.alignItems="center"===qe.overlayX?"center":"end"===qe.overlayX?"flex-end":"flex-start",Pe.justifyContent="center"===qe.overlayY?"center":"bottom"===qe.overlayY?"flex-end":"flex-start",Je&&(Pe.maxHeight=(0,h.a1)(Je)),Ue&&(Pe.maxWidth=(0,h.a1)(Ue))}this._lastBoundingBoxSize=Ze,Pn(this._boundingBox.style,Pe)}_resetBoundingBoxStyles(){Pn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Pn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Ae,qe){const Ze={},Pe=this._hasExactPosition(),Je=this._hasFlexibleDimensions,Ue=this._overlayRef.getConfig();if(Pe){const Gn=this._viewportRuler.getViewportScrollPosition();Pn(Ze,this._getExactOverlayY(qe,Ae,Gn)),Pn(Ze,this._getExactOverlayX(qe,Ae,Gn))}else Ze.position="static";let vt="",nn=this._getOffset(qe,"x"),hn=this._getOffset(qe,"y");nn&&(vt+=`translateX(${nn}px) `),hn&&(vt+=`translateY(${hn}px)`),Ze.transform=vt.trim(),Ue.maxHeight&&(Pe?Ze.maxHeight=(0,h.a1)(Ue.maxHeight):Je&&(Ze.maxHeight="")),Ue.maxWidth&&(Pe?Ze.maxWidth=(0,h.a1)(Ue.maxWidth):Je&&(Ze.maxWidth="")),Pn(this._pane.style,Ze)}_getExactOverlayY(Ae,qe,Ze){let Pe={top:"",bottom:""},Je=this._getOverlayPoint(qe,this._overlayRect,Ae);return this._isPushed&&(Je=this._pushOverlayOnScreen(Je,this._overlayRect,Ze)),"bottom"===Ae.overlayY?Pe.bottom=this._document.documentElement.clientHeight-(Je.y+this._overlayRect.height)+"px":Pe.top=(0,h.a1)(Je.y),Pe}_getExactOverlayX(Ae,qe,Ze){let Ue,Pe={left:"",right:""},Je=this._getOverlayPoint(qe,this._overlayRect,Ae);return this._isPushed&&(Je=this._pushOverlayOnScreen(Je,this._overlayRect,Ze)),Ue=this._isRtl()?"end"===Ae.overlayX?"left":"right":"end"===Ae.overlayX?"right":"left","right"===Ue?Pe.right=this._document.documentElement.clientWidth-(Je.x+this._overlayRect.width)+"px":Pe.left=(0,h.a1)(Je.x),Pe}_getScrollVisibility(){const Ae=this._getOriginRect(),qe=this._pane.getBoundingClientRect(),Ze=this._scrollables.map(Pe=>Pe.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zt(Ae,Ze),isOriginOutsideView:An(Ae,Ze),isOverlayClipped:Zt(qe,Ze),isOverlayOutsideView:An(qe,Ze)}}_subtractOverflows(Ae,...qe){return qe.reduce((Ze,Pe)=>Ze-Math.max(Pe,0),Ae)}_getNarrowedViewportRect(){const Ae=this._document.documentElement.clientWidth,qe=this._document.documentElement.clientHeight,Ze=this._viewportRuler.getViewportScrollPosition();return{top:Ze.top+this._viewportMargin,left:Ze.left+this._viewportMargin,right:Ze.left+Ae-this._viewportMargin,bottom:Ze.top+qe-this._viewportMargin,width:Ae-2*this._viewportMargin,height:qe-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Ae,qe){return"x"===qe?null==Ae.offsetX?this._offsetX:Ae.offsetX:null==Ae.offsetY?this._offsetY:Ae.offsetY}_validatePositions(){}_addPanelClasses(Ae){this._pane&&(0,h.FG)(Ae).forEach(qe=>{""!==qe&&-1===this._appliedPanelClasses.indexOf(qe)&&(this._appliedPanelClasses.push(qe),this._pane.classList.add(qe))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Ae=>{this._pane.classList.remove(Ae)}),this._appliedPanelClasses=[])}_getOriginRect(){const Ae=this._origin;if(Ae instanceof ue.aKT)return Ae.nativeElement.getBoundingClientRect();if(Ae instanceof Element)return Ae.getBoundingClientRect();const qe=Ae.width||0,Ze=Ae.height||0;return{top:Ae.y,bottom:Ae.y+Ze,left:Ae.x,right:Ae.x+qe,height:Ze,width:qe}}}function Pn(rn,Ae){for(let qe in Ae)Ae.hasOwnProperty(qe)&&(rn[qe]=Ae[qe]);return rn}function ui(rn){if("number"!=typeof rn&&null!=rn){const[Ae,qe]=rn.split(tn);return qe&&"px"!==qe?null:parseFloat(Ae)}return rn||null}function kt(rn){return{top:Math.floor(rn.top),right:Math.floor(rn.right),bottom:Math.floor(rn.bottom),left:Math.floor(rn.left),width:Math.floor(rn.width),height:Math.floor(rn.height)}}const ri="cdk-global-overlay-wrapper";class Jn{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Ae){const qe=Ae.getConfig();this._overlayRef=Ae,this._width&&!qe.width&&Ae.updateSize({width:this._width}),this._height&&!qe.height&&Ae.updateSize({height:this._height}),Ae.hostElement.classList.add(ri),this._isDisposed=!1}top(Ae=""){return this._bottomOffset="",this._topOffset=Ae,this._alignItems="flex-start",this}left(Ae=""){return this._xOffset=Ae,this._xPosition="left",this}bottom(Ae=""){return this._topOffset="",this._bottomOffset=Ae,this._alignItems="flex-end",this}right(Ae=""){return this._xOffset=Ae,this._xPosition="right",this}start(Ae=""){return this._xOffset=Ae,this._xPosition="start",this}end(Ae=""){return this._xOffset=Ae,this._xPosition="end",this}width(Ae=""){return this._overlayRef?this._overlayRef.updateSize({width:Ae}):this._width=Ae,this}height(Ae=""){return this._overlayRef?this._overlayRef.updateSize({height:Ae}):this._height=Ae,this}centerHorizontally(Ae=""){return this.left(Ae),this._xPosition="center",this}centerVertically(Ae=""){return this.top(Ae),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Ae=this._overlayRef.overlayElement.style,qe=this._overlayRef.hostElement.style,Ze=this._overlayRef.getConfig(),{width:Pe,height:Je,maxWidth:Ue,maxHeight:vt}=Ze,nn=!("100%"!==Pe&&"100vw"!==Pe||Ue&&"100%"!==Ue&&"100vw"!==Ue),hn=!("100%"!==Je&&"100vh"!==Je||vt&&"100%"!==vt&&"100vh"!==vt),Gn=this._xPosition,si=this._xOffset,ji="rtl"===this._overlayRef.getConfig().direction;let ei="",Mi="",fr="";nn?fr="flex-start":"center"===Gn?(fr="center",ji?Mi=si:ei=si):ji?"left"===Gn||"end"===Gn?(fr="flex-end",ei=si):("right"===Gn||"start"===Gn)&&(fr="flex-start",Mi=si):"left"===Gn||"start"===Gn?(fr="flex-start",ei=si):("right"===Gn||"end"===Gn)&&(fr="flex-end",Mi=si),Ae.position=this._cssPosition,Ae.marginLeft=nn?"0":ei,Ae.marginTop=hn?"0":this._topOffset,Ae.marginBottom=this._bottomOffset,Ae.marginRight=nn?"0":Mi,qe.justifyContent=fr,qe.alignItems=hn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Ae=this._overlayRef.overlayElement.style,qe=this._overlayRef.hostElement,Ze=qe.style;qe.classList.remove(ri),Ze.justifyContent=Ze.alignItems=Ae.marginTop=Ae.marginBottom=Ae.marginLeft=Ae.marginRight=Ae.position="",this._overlayRef=null,this._isDisposed=!0}}let fi=(()=>{class rn{constructor(qe,Ze,Pe,Je){this._viewportRuler=qe,this._document=Ze,this._platform=Pe,this._overlayContainer=Je}global(){return new Jn}flexibleConnectedTo(qe){return new an(qe,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(D.Xj),ue.KVO(l.qQ),ue.KVO(ge.OD),ue.KVO(Sn))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})(),wt=0,qt=(()=>{class rn{constructor(qe,Ze,Pe,Je,Ue,vt,nn,hn,Gn,si,ji,ei){this.scrollStrategies=qe,this._overlayContainer=Ze,this._componentFactoryResolver=Pe,this._positionBuilder=Je,this._keyboardDispatcher=Ue,this._injector=vt,this._ngZone=nn,this._document=hn,this._directionality=Gn,this._location=si,this._outsideClickDispatcher=ji,this._animationsModuleType=ei}create(qe){const Ze=this._createHostElement(),Pe=this._createPaneElement(Ze),Je=this._createPortalOutlet(Pe),Ue=new sn(qe);return Ue.direction=Ue.direction||this._directionality.value,new ai(Je,Ze,Pe,Ue,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(ue.uvJ))}position(){return this._positionBuilder}_createPaneElement(qe){const Ze=this._document.createElement("div");return Ze.id="cdk-overlay-"+wt++,Ze.classList.add("cdk-overlay-pane"),qe.appendChild(Ze),Ze}_createHostElement(){const qe=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(qe),qe}_createPortalOutlet(qe){return this._appRef||(this._appRef=this._injector.get(ue.o8S)),new st.aI(qe,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.KVO(dt),ue.KVO(Sn),ue.KVO(ue.OM3),ue.KVO(fi),ue.KVO(on),ue.KVO(ue.zZn),ue.KVO(ue.SKi),ue.KVO(l.qQ),ue.KVO(Ve.dS),ue.KVO(l.aZ),ue.KVO(Fn),ue.KVO(ue.bc$,8))};static#t=this.\u0275prov=ue.jDH({token:rn,factory:rn.\u0275fac,providedIn:"root"})}return rn})();const yn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],gi=new ue.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const rn=(0,ue.WQX)(qt);return()=>rn.scrollStrategies.reposition()}});let yi=(()=>{class rn{constructor(qe){this.elementRef=qe}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.rXU(ue.aKT))};static#t=this.\u0275dir=ue.FsC({type:rn,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}return rn})(),di=(()=>{class rn{get offsetX(){return this._offsetX}set offsetX(qe){this._offsetX=qe,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(qe){this._offsetY=qe,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(qe){this._disposeOnNavigation=qe}constructor(qe,Ze,Pe,Je,Ue){this._overlay=qe,this._dir=Ue,this._backdropSubscription=ut.yU.EMPTY,this._attachSubscription=ut.yU.EMPTY,this._detachSubscription=ut.yU.EMPTY,this._positionSubscription=ut.yU.EMPTY,this._disposeOnNavigation=!1,this._ngZone=(0,ue.WQX)(ue.SKi),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new ue.bkB,this.positionChange=new ue.bkB,this.attach=new ue.bkB,this.detach=new ue.bkB,this.overlayKeydown=new ue.bkB,this.overlayOutsideClick=new ue.bkB,this._templatePortal=new st.VA(Ze,Pe),this._scrollStrategyFactory=Je,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(qe){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),qe.origin&&this.open&&this._position.apply()),qe.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=yn);const qe=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=qe.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=qe.detachments().subscribe(()=>this.detach.emit()),qe.keydownEvents().subscribe(Ze=>{this.overlayKeydown.next(Ze),Ze.keyCode===Mt._f&&!this.disableClose&&!(0,Mt.rp)(Ze)&&(Ze.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Ze=>{const Pe=this._getOriginElement(),Je=(0,ge.Fb)(Ze);(!Pe||Pe!==Je&&!Pe.contains(Je))&&this.overlayOutsideClick.next(Ze)})}_buildConfig(){const qe=this._position=this.positionStrategy||this._createPositionStrategy(),Ze=new sn({direction:this._dir,positionStrategy:qe,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(Ze.width=this.width),(this.height||0===this.height)&&(Ze.height=this.height),(this.minWidth||0===this.minWidth)&&(Ze.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Ze.minHeight=this.minHeight),this.backdropClass&&(Ze.backdropClass=this.backdropClass),this.panelClass&&(Ze.panelClass=this.panelClass),Ze}_updatePositionStrategy(qe){const Ze=this.positions.map(Pe=>({originX:Pe.originX,originY:Pe.originY,overlayX:Pe.overlayX,overlayY:Pe.overlayY,offsetX:Pe.offsetX||this.offsetX,offsetY:Pe.offsetY||this.offsetY,panelClass:Pe.panelClass||void 0}));return qe.setOrigin(this._getOrigin()).withPositions(Ze).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const qe=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(qe),qe}_getOrigin(){return this.origin instanceof yi?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof yi?this.origin.elementRef.nativeElement:this.origin instanceof ue.aKT?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(qe=>{this.backdropClick.emit(qe)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,ke.v)(()=>this.positionChange.observers.length>0)).subscribe(qe=>{this._ngZone.run(()=>this.positionChange.emit(qe)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static#e=this.\u0275fac=function(Ze){return new(Ze||rn)(ue.rXU(qt),ue.rXU(ue.C4Q),ue.rXU(ue.c1b),ue.rXU(gi),ue.rXU(Ve.dS,8))};static#t=this.\u0275dir=ue.FsC({type:rn,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ue.L39],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ue.L39],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ue.L39],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ue.L39],push:[2,"cdkConnectedOverlayPush","push",ue.L39],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ue.L39]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[ue.GFd,ue.OA$]})}return rn})();const _r={provide:gi,deps:[qt],useFactory:function Yi(rn){return()=>rn.scrollStrategies.reposition()}};let Lr=(()=>{class rn{static#e=this.\u0275fac=function(Ze){return new(Ze||rn)};static#t=this.\u0275mod=ue.$C({type:rn});static#n=this.\u0275inj=ue.G2t({providers:[qt,_r],imports:[Ve.jI,st.jc,D.E9,D.E9]})}return rn})()},6860:($n,Tt,H)=>{"use strict";H.d(Tt,{BD:()=>St,BQ:()=>rt,CZ:()=>bt,Fb:()=>Zt,KT:()=>On,MU:()=>ke,OD:()=>h,r5:()=>ut,v8:()=>At,vc:()=>An});var D=H(3953),l=H(177);let ue;try{ue=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ue=!1}let Te,h=(()=>{class dt{constructor(Gt){this._platformId=Gt,this.isBrowser=this._platformId?(0,l.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ue)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(Qt){return new(Qt||dt)(D.KVO(D.Agw))};static#t=this.\u0275prov=D.jDH({token:dt,factory:dt.\u0275fac,providedIn:"root"})}return dt})();const nt=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ke(){if(Te)return Te;if("object"!=typeof document||!document)return Te=new Set(nt),Te;let dt=document.createElement("input");return Te=new Set(nt.filter(sn=>(dt.setAttribute("type",sn),dt.type===sn))),Te}let Ve;function rt(dt){return function st(){if(null==Ve&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ve=!0}))}finally{Ve=Ve||!1}return Ve}()?dt:!!dt.capture}var ut=function(dt){return dt[dt.NORMAL=0]="NORMAL",dt[dt.NEGATED=1]="NEGATED",dt[dt.INVERTED=2]="INVERTED",dt}(ut||{});let Ot,Mt,zt;function bt(){if(null==Mt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Mt=!1,Mt;if("scrollBehavior"in document.documentElement.style)Mt=!0;else{const dt=Element.prototype.scrollTo;Mt=!!dt&&!/\{\s*\[native code\]\s*\}/.test(dt.toString())}}return Mt}function St(){if("object"!=typeof document||!document)return ut.NORMAL;if(null==Ot){const dt=document.createElement("div"),sn=dt.style;dt.dir="rtl",sn.width="1px",sn.overflow="auto",sn.visibility="hidden",sn.pointerEvents="none",sn.position="absolute";const Gt=document.createElement("div"),Qt=Gt.style;Qt.width="2px",Qt.height="1px",dt.appendChild(Gt),document.body.appendChild(dt),Ot=ut.NORMAL,0===dt.scrollLeft&&(dt.scrollLeft=1,Ot=0===dt.scrollLeft?ut.NEGATED:ut.INVERTED),dt.remove()}return Ot}function On(dt){if(function Rt(){if(null==zt){const dt=typeof document<"u"?document.head:null;zt=!(!dt||!dt.createShadowRoot&&!dt.attachShadow)}return zt}()){const sn=dt.getRootNode?dt.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&sn instanceof ShadowRoot)return sn}return null}function An(){let dt=typeof document<"u"&&document?document.activeElement:null;for(;dt&&dt.shadowRoot;){const sn=dt.shadowRoot.activeElement;if(sn===dt)break;dt=sn}return dt}function Zt(dt){return dt.composedPath?dt.composedPath()[0]:dt.target}function At(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6939:($n,Tt,H)=>{"use strict";H.d(Tt,{A8:()=>Ve,Qq:()=>zt,VA:()=>st,aI:()=>Mt,bV:()=>St,jc:()=>An});var D=H(3953);class ke{attach(dt){return this._attachedHost=dt,dt.attach(this)}detach(){let dt=this._attachedHost;null!=dt&&(this._attachedHost=null,dt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(dt){this._attachedHost=dt}}class Ve extends ke{constructor(dt,sn,Gt,Qt,Wt){super(),this.component=dt,this.viewContainerRef=sn,this.injector=Gt,this.componentFactoryResolver=Qt,this.projectableNodes=Wt}}class st extends ke{constructor(dt,sn,Gt,Qt){super(),this.templateRef=dt,this.viewContainerRef=sn,this.context=Gt,this.injector=Qt}get origin(){return this.templateRef.elementRef}attach(dt,sn=this.context){return this.context=sn,super.attach(dt)}detach(){return this.context=void 0,super.detach()}}class rt extends ke{constructor(dt){super(),this.element=dt instanceof D.aKT?dt.nativeElement:dt}}class ut{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(dt){return dt instanceof Ve?(this._attachedPortal=dt,this.attachComponentPortal(dt)):dt instanceof st?(this._attachedPortal=dt,this.attachTemplatePortal(dt)):this.attachDomPortal&&dt instanceof rt?(this._attachedPortal=dt,this.attachDomPortal(dt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(dt){this._disposeFn=dt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Mt extends ut{constructor(dt,sn,Gt,Qt,Wt){super(),this.outletElement=dt,this._componentFactoryResolver=sn,this._appRef=Gt,this._defaultInjector=Qt,this.attachDomPortal=He=>{const ft=He.element,Ut=this._document.createComment("dom-portal");ft.parentNode.insertBefore(Ut,ft),this.outletElement.appendChild(ft),this._attachedPortal=He,super.setDisposeFn(()=>{Ut.parentNode&&Ut.parentNode.replaceChild(ft,Ut)})},this._document=Wt}attachComponentPortal(dt){const Gt=(dt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(dt.component);let Qt;return dt.viewContainerRef?(Qt=dt.viewContainerRef.createComponent(Gt,dt.viewContainerRef.length,dt.injector||dt.viewContainerRef.injector,dt.projectableNodes||void 0),this.setDisposeFn(()=>Qt.destroy())):(Qt=Gt.create(dt.injector||this._defaultInjector||D.zZn.NULL),this._appRef.attachView(Qt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Qt.hostView),Qt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Qt)),this._attachedPortal=dt,Qt}attachTemplatePortal(dt){let sn=dt.viewContainerRef,Gt=sn.createEmbeddedView(dt.templateRef,dt.context,{injector:dt.injector});return Gt.rootNodes.forEach(Qt=>this.outletElement.appendChild(Qt)),Gt.detectChanges(),this.setDisposeFn(()=>{let Qt=sn.indexOf(Gt);-1!==Qt&&sn.remove(Qt)}),this._attachedPortal=dt,Gt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(dt){return dt.hostView.rootNodes[0]}}let St=(()=>{class At extends st{constructor(sn,Gt){super(sn,Gt)}static#e=this.\u0275fac=function(Gt){return new(Gt||At)(D.rXU(D.C4Q),D.rXU(D.c1b))};static#t=this.\u0275dir=D.FsC({type:At,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[D.Vt3]})}return At})(),zt=(()=>{class At extends St{static#e=this.\u0275fac=(()=>{let sn;return function(Qt){return(sn||(sn=D.xGo(At)))(Qt||At)}})();static#t=this.\u0275dir=D.FsC({type:At,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],standalone:!0,features:[D.Jv_([{provide:St,useExisting:At}]),D.Vt3]})}return At})(),An=(()=>{class At{static#e=this.\u0275fac=function(Gt){return new(Gt||At)};static#t=this.\u0275mod=D.$C({type:At});static#n=this.\u0275inj=D.G2t({})}return At})()},3980:($n,Tt,H)=>{"use strict";H.d(Tt,{uv:()=>wt,Gj:()=>qe,R:()=>fi,E9:()=>Ze,Xj:()=>yn});var D=H(4085),l=H(3953),ue=H(1413),h=H(7673),ge=H(1985),Te=H(3726),nt=H(6780),ke=H(8359);const Ve={schedule(Pe){let Je=requestAnimationFrame,Ue=cancelAnimationFrame;const{delegate:vt}=Ve;vt&&(Je=vt.requestAnimationFrame,Ue=vt.cancelAnimationFrame);const nn=Je(hn=>{Ue=void 0,Pe(hn)});return new ke.yU(()=>Ue?.(nn))},requestAnimationFrame(...Pe){const{delegate:Je}=Ve;return(Je?.requestAnimationFrame||requestAnimationFrame)(...Pe)},cancelAnimationFrame(...Pe){const{delegate:Je}=Ve;return(Je?.cancelAnimationFrame||cancelAnimationFrame)(...Pe)},delegate:void 0};var rt=H(9687);new class ut extends rt.q{flush(Je){this._active=!0;const Ue=this._scheduled;this._scheduled=void 0;const{actions:vt}=this;let nn;Je=Je||vt.shift();do{if(nn=Je.execute(Je.state,Je.delay))break}while((Je=vt[0])&&Je.id===Ue&&vt.shift());if(this._active=!1,nn){for(;(Je=vt[0])&&Je.id===Ue&&vt.shift();)Je.unsubscribe();throw nn}}}(class st extends nt.R{constructor(Je,Ue){super(Je,Ue),this.scheduler=Je,this.work=Ue}requestAsyncId(Je,Ue,vt=0){return null!==vt&&vt>0?super.requestAsyncId(Je,Ue,vt):(Je.actions.push(this),Je._scheduled||(Je._scheduled=Ve.requestAnimationFrame(()=>Je.flush(void 0))))}recycleAsyncId(Je,Ue,vt=0){var nn;if(null!=vt?vt>0:this.delay>0)return super.recycleAsyncId(Je,Ue,vt);const{actions:hn}=Je;null!=Ue&&(null===(nn=hn[hn.length-1])||void 0===nn?void 0:nn.id)!==Ue&&(Ve.cancelAnimationFrame(Ue),Je._scheduled=void 0)}});let St,bt=1;const zt={};function Rt(Pe){return Pe in zt&&(delete zt[Pe],!0)}const On={setImmediate(Pe){const Je=bt++;return zt[Je]=!0,St||(St=Promise.resolve()),St.then(()=>Rt(Je)&&Pe()),Je},clearImmediate(Pe){Rt(Pe)}},{setImmediate:Zt,clearImmediate:At}=On,dt={setImmediate(...Pe){const{delegate:Je}=dt;return(Je?.setImmediate||Zt)(...Pe)},clearImmediate(Pe){const{delegate:Je}=dt;return(Je?.clearImmediate||At)(Pe)},delegate:void 0};new class Gt extends rt.q{flush(Je){this._active=!0;const Ue=this._scheduled;this._scheduled=void 0;const{actions:vt}=this;let nn;Je=Je||vt.shift();do{if(nn=Je.execute(Je.state,Je.delay))break}while((Je=vt[0])&&Je.id===Ue&&vt.shift());if(this._active=!1,nn){for(;(Je=vt[0])&&Je.id===Ue&&vt.shift();)Je.unsubscribe();throw nn}}}(class sn extends nt.R{constructor(Je,Ue){super(Je,Ue),this.scheduler=Je,this.work=Ue}requestAsyncId(Je,Ue,vt=0){return null!==vt&&vt>0?super.requestAsyncId(Je,Ue,vt):(Je.actions.push(this),Je._scheduled||(Je._scheduled=dt.setImmediate(Je.flush.bind(Je,void 0))))}recycleAsyncId(Je,Ue,vt=0){var nn;if(null!=vt?vt>0:this.delay>0)return super.recycleAsyncId(Je,Ue,vt);const{actions:hn}=Je;null!=Ue&&(null===(nn=hn[hn.length-1])||void 0===nn?void 0:nn.id)!==Ue&&(dt.clearImmediate(Ue),Je._scheduled===Ue&&(Je._scheduled=void 0))}});var He=H(3236),ft=H(9974),Ut=H(8750),on=H(4360),mn=H(1584);function Sn(Pe,Je=He.E){return function Fn(Pe){return(0,ft.N)((Je,Ue)=>{let vt=!1,nn=null,hn=null,Gn=!1;const si=()=>{if(hn?.unsubscribe(),hn=null,vt){vt=!1;const ei=nn;nn=null,Ue.next(ei)}Gn&&Ue.complete()},ji=()=>{hn=null,Gn&&Ue.complete()};Je.subscribe((0,on._)(Ue,ei=>{vt=!0,nn=ei,hn||(0,Ut.Tg)(Pe(ei)).subscribe(hn=(0,on._)(Ue,si,ji))},()=>{Gn=!0,(!vt||!hn||hn.closed)&&Ue.complete()}))})}(()=>(0,mn.O)(Pe,Je))}var ai=H(5964),Nn=H(6977),tn=H(6860),an=H(177),Pn=H(8203);let fi=(()=>{class Pe{constructor(Ue,vt,nn){this._ngZone=Ue,this._platform=vt,this._scrolled=new ue.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=nn}register(Ue){this.scrollContainers.has(Ue)||this.scrollContainers.set(Ue,Ue.elementScrolled().subscribe(()=>this._scrolled.next(Ue)))}deregister(Ue){const vt=this.scrollContainers.get(Ue);vt&&(vt.unsubscribe(),this.scrollContainers.delete(Ue))}scrolled(Ue=20){return this._platform.isBrowser?new ge.c(vt=>{this._globalSubscription||this._addGlobalListener();const nn=Ue>0?this._scrolled.pipe(Sn(Ue)).subscribe(vt):this._scrolled.subscribe(vt);return this._scrolledCount++,()=>{nn.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,h.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Ue,vt)=>this.deregister(vt)),this._scrolled.complete()}ancestorScrolled(Ue,vt){const nn=this.getAncestorScrollContainers(Ue);return this.scrolled(vt).pipe((0,ai.p)(hn=>!hn||nn.indexOf(hn)>-1))}getAncestorScrollContainers(Ue){const vt=[];return this.scrollContainers.forEach((nn,hn)=>{this._scrollableContainsElement(hn,Ue)&&vt.push(hn)}),vt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Ue,vt){let nn=(0,D.i8)(vt),hn=Ue.getElementRef().nativeElement;do{if(nn==hn)return!0}while(nn=nn.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Ue=this._getWindow();return(0,Te.R)(Ue.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(vt){return new(vt||Pe)(l.KVO(l.SKi),l.KVO(tn.OD),l.KVO(an.qQ,8))};static#t=this.\u0275prov=l.jDH({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}return Pe})(),wt=(()=>{class Pe{constructor(Ue,vt,nn,hn){this.elementRef=Ue,this.scrollDispatcher=vt,this.ngZone=nn,this.dir=hn,this._destroyed=new ue.B,this._elementScrolled=new ge.c(Gn=>this.ngZone.runOutsideAngular(()=>(0,Te.R)(this.elementRef.nativeElement,"scroll").pipe((0,Nn.Q)(this._destroyed)).subscribe(Gn)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Ue){const vt=this.elementRef.nativeElement,nn=this.dir&&"rtl"==this.dir.value;null==Ue.left&&(Ue.left=nn?Ue.end:Ue.start),null==Ue.right&&(Ue.right=nn?Ue.start:Ue.end),null!=Ue.bottom&&(Ue.top=vt.scrollHeight-vt.clientHeight-Ue.bottom),nn&&(0,tn.BD)()!=tn.r5.NORMAL?(null!=Ue.left&&(Ue.right=vt.scrollWidth-vt.clientWidth-Ue.left),(0,tn.BD)()==tn.r5.INVERTED?Ue.left=Ue.right:(0,tn.BD)()==tn.r5.NEGATED&&(Ue.left=Ue.right?-Ue.right:Ue.right)):null!=Ue.right&&(Ue.left=vt.scrollWidth-vt.clientWidth-Ue.right),this._applyScrollToOptions(Ue)}_applyScrollToOptions(Ue){const vt=this.elementRef.nativeElement;(0,tn.CZ)()?vt.scrollTo(Ue):(null!=Ue.top&&(vt.scrollTop=Ue.top),null!=Ue.left&&(vt.scrollLeft=Ue.left))}measureScrollOffset(Ue){const vt="left",hn=this.elementRef.nativeElement;if("top"==Ue)return hn.scrollTop;if("bottom"==Ue)return hn.scrollHeight-hn.clientHeight-hn.scrollTop;const Gn=this.dir&&"rtl"==this.dir.value;return"start"==Ue?Ue=Gn?"right":vt:"end"==Ue&&(Ue=Gn?vt:"right"),Gn&&(0,tn.BD)()==tn.r5.INVERTED?Ue==vt?hn.scrollWidth-hn.clientWidth-hn.scrollLeft:hn.scrollLeft:Gn&&(0,tn.BD)()==tn.r5.NEGATED?Ue==vt?hn.scrollLeft+hn.scrollWidth-hn.clientWidth:-hn.scrollLeft:Ue==vt?hn.scrollLeft:hn.scrollWidth-hn.clientWidth-hn.scrollLeft}static#e=this.\u0275fac=function(vt){return new(vt||Pe)(l.rXU(l.aKT),l.rXU(fi),l.rXU(l.SKi),l.rXU(Pn.dS,8))};static#t=this.\u0275dir=l.FsC({type:Pe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return Pe})(),yn=(()=>{class Pe{constructor(Ue,vt,nn){this._platform=Ue,this._change=new ue.B,this._changeListener=hn=>{this._change.next(hn)},this._document=nn,vt.runOutsideAngular(()=>{if(Ue.isBrowser){const hn=this._getWindow();hn.addEventListener("resize",this._changeListener),hn.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Ue=this._getWindow();Ue.removeEventListener("resize",this._changeListener),Ue.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Ue={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Ue}getViewportRect(){const Ue=this.getViewportScrollPosition(),{width:vt,height:nn}=this.getViewportSize();return{top:Ue.top,left:Ue.left,bottom:Ue.top+nn,right:Ue.left+vt,height:nn,width:vt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Ue=this._document,vt=this._getWindow(),nn=Ue.documentElement,hn=nn.getBoundingClientRect();return{top:-hn.top||Ue.body.scrollTop||vt.scrollY||nn.scrollTop||0,left:-hn.left||Ue.body.scrollLeft||vt.scrollX||nn.scrollLeft||0}}change(Ue=20){return Ue>0?this._change.pipe(Sn(Ue)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Ue=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Ue.innerWidth,height:Ue.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(vt){return new(vt||Pe)(l.KVO(tn.OD),l.KVO(l.SKi),l.KVO(an.qQ,8))};static#t=this.\u0275prov=l.jDH({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}return Pe})(),qe=(()=>{class Pe{static#e=this.\u0275fac=function(vt){return new(vt||Pe)};static#t=this.\u0275mod=l.$C({type:Pe});static#n=this.\u0275inj=l.G2t({})}return Pe})(),Ze=(()=>{class Pe{static#e=this.\u0275fac=function(vt){return new(vt||Pe)};static#t=this.\u0275mod=l.$C({type:Pe});static#n=this.\u0275inj=l.G2t({imports:[Pn.jI,qe,Pn.jI,qe]})}return Pe})()},177:($n,Tt,H)=>{"use strict";H.d(Tt,{AJ:()=>wa,B3:()=>Vr,Jj:()=>Xs,MD:()=>Zs,N0:()=>Qa,QT:()=>ue,Sm:()=>St,Sq:()=>ot,T3:()=>Dr,UE:()=>Ya,VF:()=>ge,Vy:()=>ds,Xr:()=>pc,YU:()=>Li,ZD:()=>h,_b:()=>ya,aZ:()=>Rt,bT:()=>Dn,fw:()=>zt,hb:()=>Mt,hj:()=>Ve,qQ:()=>nt});var D=H(3953);let l=null;function ue(){return l}function h(V){l??=V}class ge{}const nt=new D.nKC("");let ke=(()=>{class V{historyGo(q){throw new Error("")}static#e=this.\u0275fac=function(ce){return new(ce||V)};static#t=this.\u0275prov=D.jDH({token:V,factory:()=>(0,D.WQX)(st),providedIn:"platform"})}return V})();const Ve=new D.nKC("");let st=(()=>{class V extends ke{constructor(){super(),this._doc=(0,D.WQX)(nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ue().getBaseHref(this._doc)}onPopState(q){const ce=ue().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",q,!1),()=>ce.removeEventListener("popstate",q)}onHashChange(q){const ce=ue().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",q,!1),()=>ce.removeEventListener("hashchange",q)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(q){this._location.pathname=q}pushState(q,ce,Ye){this._history.pushState(q,ce,Ye)}replaceState(q,ce,Ye){this._history.replaceState(q,ce,Ye)}forward(){this._history.forward()}back(){this._history.back()}historyGo(q=0){this._history.go(q)}getState(){return this._history.state}static#e=this.\u0275fac=function(ce){return new(ce||V)};static#t=this.\u0275prov=D.jDH({token:V,factory:()=>new V,providedIn:"platform"})}return V})();function rt(V,he){if(0==V.length)return he;if(0==he.length)return V;let q=0;return V.endsWith("/")&&q++,he.startsWith("/")&&q++,2==q?V+he.substring(1):1==q?V+he:V+"/"+he}function ut(V){const he=V.match(/#|\?|$/),q=he&&he.index||V.length;return V.slice(0,q-("/"===V[q-1]?1:0))+V.slice(q)}function Ot(V){return V&&"?"!==V[0]?"?"+V:V}let Mt=(()=>{class V{historyGo(q){throw new Error("")}static#e=this.\u0275fac=function(ce){return new(ce||V)};static#t=this.\u0275prov=D.jDH({token:V,factory:()=>(0,D.WQX)(St),providedIn:"root"})}return V})();const bt=new D.nKC("");let St=(()=>{class V extends Mt{constructor(q,ce){super(),this._platformLocation=q,this._removeListenerFns=[],this._baseHref=ce??this._platformLocation.getBaseHrefFromDOM()??(0,D.WQX)(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}prepareExternalUrl(q){return rt(this._baseHref,q)}path(q=!1){const ce=this._platformLocation.pathname+Ot(this._platformLocation.search),Ye=this._platformLocation.hash;return Ye&&q?`${ce}${Ye}`:ce}pushState(q,ce,Ye,Bt){const En=this.prepareExternalUrl(Ye+Ot(Bt));this._platformLocation.pushState(q,ce,En)}replaceState(q,ce,Ye,Bt){const En=this.prepareExternalUrl(Ye+Ot(Bt));this._platformLocation.replaceState(q,ce,En)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(q=0){this._platformLocation.historyGo?.(q)}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.KVO(ke),D.KVO(bt,8))};static#t=this.\u0275prov=D.jDH({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})(),zt=(()=>{class V extends Mt{constructor(q,ce){super(),this._platformLocation=q,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}path(q=!1){const ce=this._platformLocation.hash??"#";return ce.length>0?ce.substring(1):ce}prepareExternalUrl(q){const ce=rt(this._baseHref,q);return ce.length>0?"#"+ce:ce}pushState(q,ce,Ye,Bt){let En=this.prepareExternalUrl(Ye+Ot(Bt));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.pushState(q,ce,En)}replaceState(q,ce,Ye,Bt){let En=this.prepareExternalUrl(Ye+Ot(Bt));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.replaceState(q,ce,En)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(q=0){this._platformLocation.historyGo?.(q)}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.KVO(ke),D.KVO(bt,8))};static#t=this.\u0275prov=D.jDH({token:V,factory:V.\u0275fac})}return V})(),Rt=(()=>{class V{constructor(q){this._subject=new D.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=q;const ce=this._locationStrategy.getBaseHref();this._basePath=function At(V){if(new RegExp("^(https?:)?//").test(V)){const[,q]=V.split(/\/\/[^\/]+/);return q}return V}(ut(Zt(ce))),this._locationStrategy.onPopState(Ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ye.state,type:Ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(q=!1){return this.normalize(this._locationStrategy.path(q))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(q,ce=""){return this.path()==this.normalize(q+Ot(ce))}normalize(q){return V.stripTrailingSlash(function An(V,he){if(!V||!he.startsWith(V))return he;const q=he.substring(V.length);return""===q||["/",";","?","#"].includes(q[0])?q:he}(this._basePath,Zt(q)))}prepareExternalUrl(q){return q&&"/"!==q[0]&&(q="/"+q),this._locationStrategy.prepareExternalUrl(q)}go(q,ce="",Ye=null){this._locationStrategy.pushState(Ye,"",q,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Ot(ce)),Ye)}replaceState(q,ce="",Ye=null){this._locationStrategy.replaceState(Ye,"",q,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Ot(ce)),Ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(q=0){this._locationStrategy.historyGo?.(q)}onUrlChange(q){return this._urlChangeListeners.push(q),this._urlChangeSubscription??=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)}),()=>{const ce=this._urlChangeListeners.indexOf(q);this._urlChangeListeners.splice(ce,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(q="",ce){this._urlChangeListeners.forEach(Ye=>Ye(q,ce))}subscribe(q,ce,Ye){return this._subject.subscribe({next:q,error:ce,complete:Ye})}static#e=this.normalizeQueryParams=Ot;static#t=this.joinWithSlash=rt;static#n=this.stripTrailingSlash=ut;static#i=this.\u0275fac=function(ce){return new(ce||V)(D.KVO(Mt))};static#r=this.\u0275prov=D.jDH({token:V,factory:()=>function On(){return new Rt((0,D.KVO)(Mt))}(),providedIn:"root"})}return V})();function Zt(V){return V.replace(/\/index.html$/,"")}function ya(V,he){he=encodeURIComponent(he);for(const q of V.split(";")){const ce=q.indexOf("="),[Ye,Bt]=-1==ce?[q,""]:[q.slice(0,ce),q.slice(ce+1)];if(Ye.trim()===he)return decodeURIComponent(Bt)}return null}const Hn=/\s+/,Ui=[];let Li=(()=>{class V{constructor(q,ce){this._ngEl=q,this._renderer=ce,this.initialClasses=Ui,this.stateMap=new Map}set klass(q){this.initialClasses=null!=q?q.trim().split(Hn):Ui}set ngClass(q){this.rawClass="string"==typeof q?q.trim().split(Hn):q}ngDoCheck(){for(const ce of this.initialClasses)this._updateState(ce,!0);const q=this.rawClass;if(Array.isArray(q)||q instanceof Set)for(const ce of q)this._updateState(ce,!0);else if(null!=q)for(const ce of Object.keys(q))this._updateState(ce,!!q[ce]);this._applyStateDiff()}_updateState(q,ce){const Ye=this.stateMap.get(q);void 0!==Ye?(Ye.enabled!==ce&&(Ye.changed=!0,Ye.enabled=ce),Ye.touched=!0):this.stateMap.set(q,{enabled:ce,changed:!0,touched:!0})}_applyStateDiff(){for(const q of this.stateMap){const ce=q[0],Ye=q[1];Ye.changed?(this._toggleClass(ce,Ye.enabled),Ye.changed=!1):Ye.touched||(Ye.enabled&&this._toggleClass(ce,!1),this.stateMap.delete(ce)),Ye.touched=!1}}_toggleClass(q,ce){(q=q.trim()).length>0&&q.split(Hn).forEach(Ye=>{ce?this._renderer.addClass(this._ngEl.nativeElement,Ye):this._renderer.removeClass(this._ngEl.nativeElement,Ye)})}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.aKT),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:V,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return V})();class Be{constructor(he,q,ce,Ye){this.$implicit=he,this.ngForOf=q,this.index=ce,this.count=Ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ot=(()=>{class V{set ngForOf(q){this._ngForOf=q,this._ngForOfDirty=!0}set ngForTrackBy(q){this._trackByFn=q}get ngForTrackBy(){return this._trackByFn}constructor(q,ce,Ye){this._viewContainer=q,this._template=ce,this._differs=Ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(q){q&&(this._template=q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const q=this._ngForOf;!this._differ&&q&&(this._differ=this._differs.find(q).create(this.ngForTrackBy))}if(this._differ){const q=this._differ.diff(this._ngForOf);q&&this._applyChanges(q)}}_applyChanges(q){const ce=this._viewContainer;q.forEachOperation((Ye,Bt,En)=>{if(null==Ye.previousIndex)ce.createEmbeddedView(this._template,new Be(Ye.item,this._ngForOf,-1,-1),null===En?void 0:En);else if(null==En)ce.remove(null===Bt?void 0:Bt);else if(null!==Bt){const Un=ce.get(Bt);ce.move(Un,En),Yt(Un,Ye)}});for(let Ye=0,Bt=ce.length;Ye<Bt;Ye++){const Un=ce.get(Ye).context;Un.index=Ye,Un.count=Bt,Un.ngForOf=this._ngForOf}q.forEachIdentityChange(Ye=>{Yt(ce.get(Ye.currentIndex),Ye)})}static ngTemplateContextGuard(q,ce){return!0}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.c1b),D.rXU(D.C4Q),D.rXU(D._q3))};static#t=this.\u0275dir=D.FsC({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return V})();function Yt(V,he){V.context.$implicit=he.item}let Dn=(()=>{class V{constructor(q,ce){this._viewContainer=q,this._context=new xn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf(q){this._context.$implicit=this._context.ngIf=q,this._updateView()}set ngIfThen(q){Ti("ngIfThen",q),this._thenTemplateRef=q,this._thenViewRef=null,this._updateView()}set ngIfElse(q){Ti("ngIfElse",q),this._elseTemplateRef=q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(q,ce){return!0}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.c1b),D.rXU(D.C4Q))};static#t=this.\u0275dir=D.FsC({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return V})();class xn{constructor(){this.$implicit=null,this.ngIf=null}}function Ti(V,he){if(he&&!he.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,D.Tbb)(he)}'.`)}let Vr=(()=>{class V{constructor(q,ce,Ye){this._ngEl=q,this._differs=ce,this._renderer=Ye,this._ngStyle=null,this._differ=null}set ngStyle(q){this._ngStyle=q,!this._differ&&q&&(this._differ=this._differs.find(q).create())}ngDoCheck(){if(this._differ){const q=this._differ.diff(this._ngStyle);q&&this._applyChanges(q)}}_setStyle(q,ce){const[Ye,Bt]=q.split("."),En=-1===Ye.indexOf("-")?void 0:D.czy.DashCase;null!=ce?this._renderer.setStyle(this._ngEl.nativeElement,Ye,Bt?`${ce}${Bt}`:ce,En):this._renderer.removeStyle(this._ngEl.nativeElement,Ye,En)}_applyChanges(q){q.forEachRemovedItem(ce=>this._setStyle(ce.key,null)),q.forEachAddedItem(ce=>this._setStyle(ce.key,ce.currentValue)),q.forEachChangedItem(ce=>this._setStyle(ce.key,ce.currentValue))}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.aKT),D.rXU(D.MKu),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:V,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return V})(),Dr=(()=>{class V{constructor(q){this._viewContainerRef=q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(q){if(this._shouldRecreateView(q)){const ce=this._viewContainerRef;if(this._viewRef&&ce.remove(ce.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const Ye=this._createContextForwardProxy();this._viewRef=ce.createEmbeddedView(this.ngTemplateOutlet,Ye,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(q){return!!q.ngTemplateOutlet||!!q.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(q,ce,Ye)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,ce,Ye),get:(q,ce,Ye)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,ce,Ye)}})}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.c1b))};static#t=this.\u0275dir=D.FsC({type:V,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[D.OA$]})}return V})();class Rs{createSubscription(he,q){return(0,D.O8t)(()=>he.subscribe({next:q,error:ce=>{throw ce}}))}dispose(he){(0,D.O8t)(()=>he.unsubscribe())}}class Or{createSubscription(he,q){return he.then(q,ce=>{throw ce})}dispose(he){}}const Yo=new Or,Ws=new Rs;let Xs=(()=>{class V{constructor(q){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=q}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(q){if(!this._obj){if(q)try{this.markForCheckOnValueUpdate=!1,this._subscribe(q)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return q!==this._obj?(this._dispose(),this.transform(q)):this._latestValue}_subscribe(q){this._obj=q,this._strategy=this._selectStrategy(q),this._subscription=this._strategy.createSubscription(q,ce=>this._updateLatestValue(q,ce))}_selectStrategy(q){if((0,D.jNT)(q))return Yo;if((0,D.zjR)(q))return Ws;throw function dr(V,he){return new D.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(q,ce){q===this._obj&&(this._latestValue=ce,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(ce){return new(ce||V)(D.rXU(D.gRc,16))};static#t=this.\u0275pipe=D.EJ8({name:"async",type:V,pure:!1,standalone:!0})}return V})(),Zs=(()=>{class V{static#e=this.\u0275fac=function(ce){return new(ce||V)};static#t=this.\u0275mod=D.$C({type:V});static#n=this.\u0275inj=D.G2t({})}return V})();const wa="browser",dc="server";function Ya(V){return V===wa}function ds(V){return V===dc}let pc=(()=>{class V{static#e=this.\u0275prov=(0,D.jDH)({token:V,providedIn:"root",factory:()=>Ya((0,D.WQX)(D.Agw))?new Ea((0,D.WQX)(nt),window):new vl})}return V})();class Ea{constructor(he,q){this.document=he,this.window=q,this.offset=()=>[0,0]}setOffset(he){this.offset=Array.isArray(he)?()=>he:he}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(he){this.window.scrollTo(he[0],he[1])}scrollToAnchor(he){const q=function na(V,he){const q=V.getElementById(he)||V.getElementsByName(he)[0];if(q)return q;if("function"==typeof V.createTreeWalker&&V.body&&"function"==typeof V.body.attachShadow){const ce=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Ye=ce.currentNode;for(;Ye;){const Bt=Ye.shadowRoot;if(Bt){const En=Bt.getElementById(he)||Bt.querySelector(`[name="${he}"]`);if(En)return En}Ye=ce.nextNode()}}return null}(this.document,he);q&&(this.scrollToElement(q),q.focus())}setHistoryScrollRestoration(he){this.window.history.scrollRestoration=he}scrollToElement(he){const q=he.getBoundingClientRect(),ce=q.left+this.window.pageXOffset,Ye=q.top+this.window.pageYOffset,Bt=this.offset();this.window.scrollTo(ce-Bt[0],Ye-Bt[1])}}class vl{setOffset(he){}getScrollPosition(){return[0,0]}scrollToPosition(he){}scrollToAnchor(he){}setHistoryScrollRestoration(he){}}class Qa{}},1626:($n,Tt,H)=>{"use strict";H.d(Tt,{$R:()=>de,Qq:()=>ui,Sx:()=>De});var D=H(4523),l=H(3953),ue=H(7673),h=H(1985),ge=H(6648),Te=H(274),nt=H(5964),ke=H(6354),Ve=H(980),st=H(5558),rt=H(177);class ut{}class Ot{}class Mt{constructor(Be){this.normalizedNames=new Map,this.lazyUpdate=null,Be?"string"==typeof Be?this.lazyInit=()=>{this.headers=new Map,Be.split("\n").forEach(ot=>{const Yt=ot.indexOf(":");if(Yt>0){const bn=ot.slice(0,Yt),Dn=bn.toLowerCase(),xn=ot.slice(Yt+1).trim();this.maybeSetNormalizedName(bn,Dn),this.headers.has(Dn)?this.headers.get(Dn).push(xn):this.headers.set(Dn,[xn])}})}:typeof Headers<"u"&&Be instanceof Headers?(this.headers=new Map,Be.forEach((ot,Yt)=>{this.setHeaderEntries(Yt,ot)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Be).forEach(([ot,Yt])=>{this.setHeaderEntries(ot,Yt)})}:this.headers=new Map}has(Be){return this.init(),this.headers.has(Be.toLowerCase())}get(Be){this.init();const ot=this.headers.get(Be.toLowerCase());return ot&&ot.length>0?ot[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Be){return this.init(),this.headers.get(Be.toLowerCase())||null}append(Be,ot){return this.clone({name:Be,value:ot,op:"a"})}set(Be,ot){return this.clone({name:Be,value:ot,op:"s"})}delete(Be,ot){return this.clone({name:Be,value:ot,op:"d"})}maybeSetNormalizedName(Be,ot){this.normalizedNames.has(ot)||this.normalizedNames.set(ot,Be)}init(){this.lazyInit&&(this.lazyInit instanceof Mt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Be=>this.applyUpdate(Be)),this.lazyUpdate=null))}copyFrom(Be){Be.init(),Array.from(Be.headers.keys()).forEach(ot=>{this.headers.set(ot,Be.headers.get(ot)),this.normalizedNames.set(ot,Be.normalizedNames.get(ot))})}clone(Be){const ot=new Mt;return ot.lazyInit=this.lazyInit&&this.lazyInit instanceof Mt?this.lazyInit:this,ot.lazyUpdate=(this.lazyUpdate||[]).concat([Be]),ot}applyUpdate(Be){const ot=Be.name.toLowerCase();switch(Be.op){case"a":case"s":let Yt=Be.value;if("string"==typeof Yt&&(Yt=[Yt]),0===Yt.length)return;this.maybeSetNormalizedName(Be.name,ot);const bn=("a"===Be.op?this.headers.get(ot):void 0)||[];bn.push(...Yt),this.headers.set(ot,bn);break;case"d":const Dn=Be.value;if(Dn){let xn=this.headers.get(ot);if(!xn)return;xn=xn.filter(Ti=>-1===Dn.indexOf(Ti)),0===xn.length?(this.headers.delete(ot),this.normalizedNames.delete(ot)):this.headers.set(ot,xn)}else this.headers.delete(ot),this.normalizedNames.delete(ot)}}setHeaderEntries(Be,ot){const Yt=(Array.isArray(ot)?ot:[ot]).map(Dn=>Dn.toString()),bn=Be.toLowerCase();this.headers.set(bn,Yt),this.maybeSetNormalizedName(Be,bn)}forEach(Be){this.init(),Array.from(this.normalizedNames.keys()).forEach(ot=>Be(this.normalizedNames.get(ot),this.headers.get(ot)))}}class St{encodeKey(Be){return An(Be)}encodeValue(Be){return An(Be)}decodeKey(Be){return decodeURIComponent(Be)}decodeValue(Be){return decodeURIComponent(Be)}}const Rt=/%(\d[a-f0-9])/gi,On={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function An(Oe){return encodeURIComponent(Oe).replace(Rt,(Be,ot)=>On[ot]??Be)}function Zt(Oe){return`${Oe}`}class At{constructor(Be={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Be.encoder||new St,Be.fromString){if(Be.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function zt(Oe,Be){const ot=new Map;return Oe.length>0&&Oe.replace(/^\?/,"").split("&").forEach(bn=>{const Dn=bn.indexOf("="),[xn,Ti]=-1==Dn?[Be.decodeKey(bn),""]:[Be.decodeKey(bn.slice(0,Dn)),Be.decodeValue(bn.slice(Dn+1))],_i=ot.get(xn)||[];_i.push(Ti),ot.set(xn,_i)}),ot}(Be.fromString,this.encoder)}else Be.fromObject?(this.map=new Map,Object.keys(Be.fromObject).forEach(ot=>{const Yt=Be.fromObject[ot],bn=Array.isArray(Yt)?Yt.map(Zt):[Zt(Yt)];this.map.set(ot,bn)})):this.map=null}has(Be){return this.init(),this.map.has(Be)}get(Be){this.init();const ot=this.map.get(Be);return ot?ot[0]:null}getAll(Be){return this.init(),this.map.get(Be)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Be,ot){return this.clone({param:Be,value:ot,op:"a"})}appendAll(Be){const ot=[];return Object.keys(Be).forEach(Yt=>{const bn=Be[Yt];Array.isArray(bn)?bn.forEach(Dn=>{ot.push({param:Yt,value:Dn,op:"a"})}):ot.push({param:Yt,value:bn,op:"a"})}),this.clone(ot)}set(Be,ot){return this.clone({param:Be,value:ot,op:"s"})}delete(Be,ot){return this.clone({param:Be,value:ot,op:"d"})}toString(){return this.init(),this.keys().map(Be=>{const ot=this.encoder.encodeKey(Be);return this.map.get(Be).map(Yt=>ot+"="+this.encoder.encodeValue(Yt)).join("&")}).filter(Be=>""!==Be).join("&")}clone(Be){const ot=new At({encoder:this.encoder});return ot.cloneFrom=this.cloneFrom||this,ot.updates=(this.updates||[]).concat(Be),ot}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Be=>this.map.set(Be,this.cloneFrom.map.get(Be))),this.updates.forEach(Be=>{switch(Be.op){case"a":case"s":const ot=("a"===Be.op?this.map.get(Be.param):void 0)||[];ot.push(Zt(Be.value)),this.map.set(Be.param,ot);break;case"d":if(void 0===Be.value){this.map.delete(Be.param);break}{let Yt=this.map.get(Be.param)||[];const bn=Yt.indexOf(Zt(Be.value));-1!==bn&&Yt.splice(bn,1),Yt.length>0?this.map.set(Be.param,Yt):this.map.delete(Be.param)}}}),this.cloneFrom=this.updates=null)}}class sn{constructor(){this.map=new Map}set(Be,ot){return this.map.set(Be,ot),this}get(Be){return this.map.has(Be)||this.map.set(Be,Be.defaultValue()),this.map.get(Be)}delete(Be){return this.map.delete(Be),this}has(Be){return this.map.has(Be)}keys(){return this.map.keys()}}function Qt(Oe){return typeof ArrayBuffer<"u"&&Oe instanceof ArrayBuffer}function Wt(Oe){return typeof Blob<"u"&&Oe instanceof Blob}function He(Oe){return typeof FormData<"u"&&Oe instanceof FormData}class Ut{constructor(Be,ot,Yt,bn){let Dn;if(this.url=ot,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Be.toUpperCase(),function Gt(Oe){switch(Oe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||bn?(this.body=void 0!==Yt?Yt:null,Dn=bn):Dn=Yt,Dn&&(this.reportProgress=!!Dn.reportProgress,this.withCredentials=!!Dn.withCredentials,Dn.responseType&&(this.responseType=Dn.responseType),Dn.headers&&(this.headers=Dn.headers),Dn.context&&(this.context=Dn.context),Dn.params&&(this.params=Dn.params),this.transferCache=Dn.transferCache),this.headers??=new Mt,this.context??=new sn,this.params){const xn=this.params.toString();if(0===xn.length)this.urlWithParams=ot;else{const Ti=ot.indexOf("?");this.urlWithParams=ot+(-1===Ti?"?":Ti<ot.length-1?"&":"")+xn}}else this.params=new At,this.urlWithParams=ot}serializeBody(){return null===this.body?null:"string"==typeof this.body||Qt(this.body)||Wt(this.body)||He(this.body)||function ft(Oe){return typeof URLSearchParams<"u"&&Oe instanceof URLSearchParams}(this.body)?this.body:this.body instanceof At?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||He(this.body)?null:Wt(this.body)?this.body.type||null:Qt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof At?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Be={}){const ot=Be.method||this.method,Yt=Be.url||this.url,bn=Be.responseType||this.responseType,Dn=Be.transferCache??this.transferCache,xn=void 0!==Be.body?Be.body:this.body,Ti=Be.withCredentials??this.withCredentials,_i=Be.reportProgress??this.reportProgress;let wr=Be.headers||this.headers,uo=Be.params||this.params;const Tr=Be.context??this.context;return void 0!==Be.setHeaders&&(wr=Object.keys(Be.setHeaders).reduce((go,sr)=>go.set(sr,Be.setHeaders[sr]),wr)),Be.setParams&&(uo=Object.keys(Be.setParams).reduce((go,sr)=>go.set(sr,Be.setParams[sr]),uo)),new Ut(ot,Yt,xn,{params:uo,headers:wr,context:Tr,reportProgress:_i,responseType:bn,withCredentials:Ti,transferCache:Dn})}}var on=function(Oe){return Oe[Oe.Sent=0]="Sent",Oe[Oe.UploadProgress=1]="UploadProgress",Oe[Oe.ResponseHeader=2]="ResponseHeader",Oe[Oe.DownloadProgress=3]="DownloadProgress",Oe[Oe.Response=4]="Response",Oe[Oe.User=5]="User",Oe}(on||{});class Fn{constructor(Be,ot=200,Yt="OK"){this.headers=Be.headers||new Mt,this.status=void 0!==Be.status?Be.status:ot,this.statusText=Be.statusText||Yt,this.url=Be.url||null,this.ok=this.status>=200&&this.status<300}}class mn extends Fn{constructor(Be={}){super(Be),this.type=on.ResponseHeader}clone(Be={}){return new mn({headers:Be.headers||this.headers,status:void 0!==Be.status?Be.status:this.status,statusText:Be.statusText||this.statusText,url:Be.url||this.url||void 0})}}class Sn extends Fn{constructor(Be={}){super(Be),this.type=on.Response,this.body=void 0!==Be.body?Be.body:null}clone(Be={}){return new Sn({body:void 0!==Be.body?Be.body:this.body,headers:Be.headers||this.headers,status:void 0!==Be.status?Be.status:this.status,statusText:Be.statusText||this.statusText,url:Be.url||this.url||void 0})}}class ai extends Fn{constructor(Be){super(Be,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Be.url||"(unknown url)"}`:`Http failure response for ${Be.url||"(unknown url)"}: ${Be.status} ${Be.statusText}`,this.error=Be.error||null}}function Pn(Oe,Be){return{body:Be,headers:Oe.headers,context:Oe.context,observe:Oe.observe,params:Oe.params,reportProgress:Oe.reportProgress,responseType:Oe.responseType,withCredentials:Oe.withCredentials,transferCache:Oe.transferCache}}let ui=(()=>{class Oe{constructor(ot){this.handler=ot}request(ot,Yt,bn={}){let Dn;if(ot instanceof Ut)Dn=ot;else{let _i,wr;_i=bn.headers instanceof Mt?bn.headers:new Mt(bn.headers),bn.params&&(wr=bn.params instanceof At?bn.params:new At({fromObject:bn.params})),Dn=new Ut(ot,Yt,void 0!==bn.body?bn.body:null,{headers:_i,context:bn.context,params:wr,reportProgress:bn.reportProgress,responseType:bn.responseType||"json",withCredentials:bn.withCredentials,transferCache:bn.transferCache})}const xn=(0,ue.of)(Dn).pipe((0,Te.H)(_i=>this.handler.handle(_i)));if(ot instanceof Ut||"events"===bn.observe)return xn;const Ti=xn.pipe((0,nt.p)(_i=>_i instanceof Sn));switch(bn.observe||"body"){case"body":switch(Dn.responseType){case"arraybuffer":return Ti.pipe((0,ke.T)(_i=>{if(null!==_i.body&&!(_i.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _i.body}));case"blob":return Ti.pipe((0,ke.T)(_i=>{if(null!==_i.body&&!(_i.body instanceof Blob))throw new Error("Response is not a Blob.");return _i.body}));case"text":return Ti.pipe((0,ke.T)(_i=>{if(null!==_i.body&&"string"!=typeof _i.body)throw new Error("Response is not a string.");return _i.body}));default:return Ti.pipe((0,ke.T)(_i=>_i.body))}case"response":return Ti;default:throw new Error(`Unreachable: unhandled observe type ${bn.observe}}`)}}delete(ot,Yt={}){return this.request("DELETE",ot,Yt)}get(ot,Yt={}){return this.request("GET",ot,Yt)}head(ot,Yt={}){return this.request("HEAD",ot,Yt)}jsonp(ot,Yt){return this.request("JSONP",ot,{params:(new At).append(Yt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ot,Yt={}){return this.request("OPTIONS",ot,Yt)}patch(ot,Yt,bn={}){return this.request("PATCH",ot,Pn(bn,Yt))}post(ot,Yt,bn={}){return this.request("POST",ot,Pn(bn,Yt))}put(ot,Yt,bn={}){return this.request("PUT",ot,Pn(bn,Yt))}static#e=this.\u0275fac=function(Yt){return new(Yt||Oe)(l.KVO(ut))};static#t=this.\u0275prov=l.jDH({token:Oe,factory:Oe.\u0275fac})}return Oe})();const kt=/^\)\]\}',?\n/;function _n(Oe){if(Oe.url)return Oe.url;const Be="X-Request-URL".toLocaleLowerCase();return Oe.headers.get(Be)}let ni=(()=>{class Oe{constructor(){this.fetchImpl=(0,l.WQX)(ri,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=(0,l.WQX)(l.SKi)}handle(ot){return new h.c(Yt=>{const bn=new AbortController;return this.doRequest(ot,bn.signal,Yt).then(Jn,Dn=>Yt.error(new ai({error:Dn}))),()=>bn.abort()})}doRequest(ot,Yt,bn){var Dn=this;return(0,D.A)(function*(){const xn=Dn.createRequestInit(ot);let Ti;try{const ar=Dn.ngZone.runOutsideAngular(()=>Dn.fetchImpl(ot.urlWithParams,{signal:Yt,...xn}));(function fi(Oe){Oe.then(Jn,Jn)})(ar),bn.next({type:on.Sent}),Ti=yield ar}catch(ar){return void bn.error(new ai({error:ar,status:ar.status??0,statusText:ar.statusText,url:ot.urlWithParams,headers:ar.headers}))}const _i=new Mt(Ti.headers),wr=Ti.statusText,uo=_n(Ti)??ot.urlWithParams;let Tr=Ti.status,go=null;if(ot.reportProgress&&bn.next(new mn({headers:_i,status:Tr,statusText:wr,url:uo})),Ti.body){const ar=Ti.headers.get("content-length"),er=[],Vr=Ti.body.getReader();let Co,dr,Dr=0;const Rs=typeof Zone<"u"&&Zone.current;yield Dn.ngZone.runOutsideAngular((0,D.A)(function*(){for(;;){const{done:Yo,value:Ws}=yield Vr.read();if(Yo)break;if(er.push(Ws),Dr+=Ws.length,ot.reportProgress){dr="text"===ot.responseType?(dr??"")+(Co??=new TextDecoder).decode(Ws,{stream:!0}):void 0;const Xs=()=>bn.next({type:on.DownloadProgress,total:ar?+ar:void 0,loaded:Dr,partialText:dr});Rs?Rs.run(Xs):Xs()}}}));const Or=Dn.concatChunks(er,Dr);try{const Yo=Ti.headers.get("Content-Type")??"";go=Dn.parseBody(ot,Or,Yo)}catch(Yo){return void bn.error(new ai({error:Yo,headers:new Mt(Ti.headers),status:Ti.status,statusText:Ti.statusText,url:_n(Ti)??ot.urlWithParams}))}}0===Tr&&(Tr=go?200:0),Tr>=200&&Tr<300?(bn.next(new Sn({body:go,headers:_i,status:Tr,statusText:wr,url:uo})),bn.complete()):bn.error(new ai({error:go,headers:_i,status:Tr,statusText:wr,url:uo}))})()}parseBody(ot,Yt,bn){switch(ot.responseType){case"json":const Dn=(new TextDecoder).decode(Yt).replace(kt,"");return""===Dn?null:JSON.parse(Dn);case"text":return(new TextDecoder).decode(Yt);case"blob":return new Blob([Yt],{type:bn});case"arraybuffer":return Yt.buffer}}createRequestInit(ot){const Yt={},bn=ot.withCredentials?"include":void 0;if(ot.headers.forEach((Dn,xn)=>Yt[Dn]=xn.join(",")),ot.headers.has("Accept")||(Yt.Accept="application/json, text/plain, */*"),!ot.headers.has("Content-Type")){const Dn=ot.detectContentTypeHeader();null!==Dn&&(Yt["Content-Type"]=Dn)}return{body:ot.serializeBody(),method:ot.method,headers:Yt,credentials:bn}}concatChunks(ot,Yt){const bn=new Uint8Array(Yt);let Dn=0;for(const xn of ot)bn.set(xn,Dn),Dn+=xn.length;return bn}static#e=this.\u0275fac=function(Yt){return new(Yt||Oe)};static#t=this.\u0275prov=l.jDH({token:Oe,factory:Oe.\u0275fac})}return Oe})();class ri{}function Jn(){}function wt(Oe,Be){return Be(Oe)}function qt(Oe,Be){return(ot,Yt)=>Be.intercept(ot,{handle:bn=>Oe(bn,Yt)})}const gi=new l.nKC(""),yi=new l.nKC(""),di=new l.nKC(""),Yi=new l.nKC("",{providedIn:"root",factory:()=>!0});function _r(){let Oe=null;return(Be,ot)=>{null===Oe&&(Oe=((0,l.WQX)(gi,{optional:!0})??[]).reduceRight(qt,wt));const Yt=(0,l.WQX)(l.TgB);if((0,l.WQX)(Yi)){const Dn=Yt.add();return Oe(Be,ot).pipe((0,Ve.j)(()=>Yt.remove(Dn)))}return Oe(Be,ot)}}let rn=(()=>{class Oe extends ut{constructor(ot,Yt){super(),this.backend=ot,this.injector=Yt,this.chain=null,this.pendingTasks=(0,l.WQX)(l.TgB),this.contributeToStability=(0,l.WQX)(Yi)}handle(ot){if(null===this.chain){const Yt=Array.from(new Set([...this.injector.get(yi),...this.injector.get(di,[])]));this.chain=Yt.reduceRight((bn,Dn)=>function yn(Oe,Be,ot){return(Yt,bn)=>(0,l.N4e)(ot,()=>Be(Yt,Dn=>Oe(Dn,bn)))}(bn,Dn,this.injector),wt)}if(this.contributeToStability){const Yt=this.pendingTasks.add();return this.chain(ot,bn=>this.backend.handle(bn)).pipe((0,Ve.j)(()=>this.pendingTasks.remove(Yt)))}return this.chain(ot,Yt=>this.backend.handle(Yt))}static#e=this.\u0275fac=function(Yt){return new(Yt||Oe)(l.KVO(Ot),l.KVO(l.uvJ))};static#t=this.\u0275prov=l.jDH({token:Oe,factory:Oe.\u0275fac})}return Oe})();const ji=/^\)\]\}',?\n/;let Mi=(()=>{class Oe{constructor(ot){this.xhrFactory=ot}handle(ot){if("JSONP"===ot.method)throw new l.wOt(-2800,!1);const Yt=this.xhrFactory;return(Yt.\u0275loadImpl?(0,ge.H)(Yt.\u0275loadImpl()):(0,ue.of)(null)).pipe((0,st.n)(()=>new h.c(Dn=>{const xn=Yt.build();if(xn.open(ot.method,ot.urlWithParams),ot.withCredentials&&(xn.withCredentials=!0),ot.headers.forEach((er,Vr)=>xn.setRequestHeader(er,Vr.join(","))),ot.headers.has("Accept")||xn.setRequestHeader("Accept","application/json, text/plain, */*"),!ot.headers.has("Content-Type")){const er=ot.detectContentTypeHeader();null!==er&&xn.setRequestHeader("Content-Type",er)}if(ot.responseType){const er=ot.responseType.toLowerCase();xn.responseType="json"!==er?er:"text"}const Ti=ot.serializeBody();let _i=null;const wr=()=>{if(null!==_i)return _i;const er=xn.statusText||"OK",Vr=new Mt(xn.getAllResponseHeaders()),Dr=function ei(Oe){return"responseURL"in Oe&&Oe.responseURL?Oe.responseURL:/^X-Request-URL:/m.test(Oe.getAllResponseHeaders())?Oe.getResponseHeader("X-Request-URL"):null}(xn)||ot.url;return _i=new mn({headers:Vr,status:xn.status,statusText:er,url:Dr}),_i},uo=()=>{let{headers:er,status:Vr,statusText:Dr,url:Co}=wr(),dr=null;204!==Vr&&(dr=typeof xn.response>"u"?xn.responseText:xn.response),0===Vr&&(Vr=dr?200:0);let Rs=Vr>=200&&Vr<300;if("json"===ot.responseType&&"string"==typeof dr){const Or=dr;dr=dr.replace(ji,"");try{dr=""!==dr?JSON.parse(dr):null}catch(Yo){dr=Or,Rs&&(Rs=!1,dr={error:Yo,text:dr})}}Rs?(Dn.next(new Sn({body:dr,headers:er,status:Vr,statusText:Dr,url:Co||void 0})),Dn.complete()):Dn.error(new ai({error:dr,headers:er,status:Vr,statusText:Dr,url:Co||void 0}))},Tr=er=>{const{url:Vr}=wr(),Dr=new ai({error:er,status:xn.status||0,statusText:xn.statusText||"Unknown Error",url:Vr||void 0});Dn.error(Dr)};let go=!1;const sr=er=>{go||(Dn.next(wr()),go=!0);let Vr={type:on.DownloadProgress,loaded:er.loaded};er.lengthComputable&&(Vr.total=er.total),"text"===ot.responseType&&xn.responseText&&(Vr.partialText=xn.responseText),Dn.next(Vr)},ar=er=>{let Vr={type:on.UploadProgress,loaded:er.loaded};er.lengthComputable&&(Vr.total=er.total),Dn.next(Vr)};return xn.addEventListener("load",uo),xn.addEventListener("error",Tr),xn.addEventListener("timeout",Tr),xn.addEventListener("abort",Tr),ot.reportProgress&&(xn.addEventListener("progress",sr),null!==Ti&&xn.upload&&xn.upload.addEventListener("progress",ar)),xn.send(Ti),Dn.next({type:on.Sent}),()=>{xn.removeEventListener("error",Tr),xn.removeEventListener("abort",Tr),xn.removeEventListener("load",uo),xn.removeEventListener("timeout",Tr),ot.reportProgress&&(xn.removeEventListener("progress",sr),null!==Ti&&xn.upload&&xn.upload.removeEventListener("progress",ar)),xn.readyState!==xn.DONE&&xn.abort()}})))}static#e=this.\u0275fac=function(Yt){return new(Yt||Oe)(l.KVO(rt.N0))};static#t=this.\u0275prov=l.jDH({token:Oe,factory:Oe.\u0275fac})}return Oe})();const fr=new l.nKC(""),ln=new l.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),$t=new l.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class zn{}let Cn=(()=>{class Oe{constructor(ot,Yt,bn){this.doc=ot,this.platform=Yt,this.cookieName=bn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ot=this.doc.cookie||"";return ot!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,rt._b)(ot,this.cookieName),this.lastCookieString=ot),this.lastToken}static#e=this.\u0275fac=function(Yt){return new(Yt||Oe)(l.KVO(rt.qQ),l.KVO(l.Agw),l.KVO(ln))};static#t=this.\u0275prov=l.jDH({token:Oe,factory:Oe.\u0275fac})}return Oe})();function Ct(Oe,Be){const ot=Oe.url.toLowerCase();if(!(0,l.WQX)(fr)||"GET"===Oe.method||"HEAD"===Oe.method||ot.startsWith("http://")||ot.startsWith("https://"))return Be(Oe);const Yt=(0,l.WQX)(zn).getToken(),bn=(0,l.WQX)($t);return null!=Yt&&!Oe.headers.has(bn)&&(Oe=Oe.clone({headers:Oe.headers.set(bn,Yt)})),Be(Oe)}var U=function(Oe){return Oe[Oe.Interceptors=0]="Interceptors",Oe[Oe.LegacyInterceptors=1]="LegacyInterceptors",Oe[Oe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Oe[Oe.NoXsrfProtection=3]="NoXsrfProtection",Oe[Oe.JsonpSupport=4]="JsonpSupport",Oe[Oe.RequestsMadeViaParent=5]="RequestsMadeViaParent",Oe[Oe.Fetch=6]="Fetch",Oe}(U||{});function de(...Oe){const Be=[ui,Mi,rn,{provide:ut,useExisting:rn},{provide:Ot,useFactory:()=>(0,l.WQX)(ni,{optional:!0})??(0,l.WQX)(Mi)},{provide:yi,useValue:Ct,multi:!0},{provide:fr,useValue:!0},{provide:zn,useClass:Cn}];for(const ot of Oe)Be.push(...ot.\u0275providers);return(0,l.EmA)(Be)}const Xe=new l.nKC("");function De(){return function K(Oe,Be){return{\u0275kind:Oe,\u0275providers:Be}}(U.LegacyInterceptors,[{provide:Xe,useFactory:_r},{provide:yi,useExisting:Xe,multi:!0}])}},3953:($n,Tt,H)=>{"use strict";function D(e,n){return Object.is(e,n)}H.d(Tt,{bc$:()=>yv,iLQ:()=>Jx,sZ2:()=>tm,hnV:()=>_S,wjH:()=>Gl,Hbi:()=>R2,o8S:()=>Nh,BIS:()=>yg,gRc:()=>kS,Ql9:()=>o2,OM3:()=>py,Ocv:()=>p2,Z63:()=>il,aKT:()=>Kr,uvJ:()=>Tn,zcH:()=>Ro,bkB:()=>Ha,$GK:()=>Wi,nKC:()=>zi,zZn:()=>Js,_q3:()=>LC,MKu:()=>FC,xe9:()=>nw,Co$:()=>dn,Vns:()=>Dt,SKi:()=>xs,Xx1:()=>Aa,Agw:()=>_g,PLl:()=>nm,rOR:()=>gh,sFG:()=>V1,_9s:()=>ob,czy:()=>ti,WPN:()=>nd,kdw:()=>Ba,C4Q:()=>ry,NYb:()=>QO,giA:()=>mS,RxE:()=>aS,c1b:()=>_y,gXe:()=>Al,mal:()=>sx,Tzd:()=>zg,L39:()=>fR,EWP:()=>_R,sbv:()=>Mx,Ol2:()=>Cr,w6W:()=>cn,oH4:()=>MS,QZP:()=>pI,SmG:()=>y2,Rfq:()=>el,WQX:()=>Vn,Hps:()=>Cb,QuC:()=>ae,EmA:()=>Le,Udg:()=>mR,fpN:()=>O2,HJs:()=>ER,N4e:()=>Ua,vPA:()=>Cx,O8t:()=>yR,H3F:()=>lS,zAP:()=>iI,H8p:()=>qn,KH2:()=>Uy,TgB:()=>Cd,wOt:()=>wn,WHO:()=>pS,e01:()=>fS,lNU:()=>Zo,h9k:()=>ff,$MX:()=>Dh,ZF7:()=>_s,Kcf:()=>Od,e5t:()=>Th,UyX:()=>zl,cWb:()=>Do,osQ:()=>Zr,H5H:()=>iC,Zy3:()=>Fs,mq5:()=>gD,JZv:()=>ho,LfX:()=>qs,plB:()=>pp,jNT:()=>CC,zjR:()=>gS,TL$:()=>gv,Tbb:()=>Ao,rcV:()=>rc,Vt3:()=>Pb,GFd:()=>ct,OA$:()=>wp,Jv_:()=>IM,aNF:()=>AM,R7$:()=>Nd,BMQ:()=>UE,HbH:()=>QT,ZvI:()=>oD,AVh:()=>KE,vxM:()=>cD,wni:()=>JD,C6U:()=>iM,VBU:()=>i,FsC:()=>k,jDH:()=>Xr,G2t:()=>Fa,$C:()=>E,EJ8:()=>P,rXU:()=>wm,nrm:()=>JE,eu8:()=>eC,bVm:()=>$x,qex:()=>Gx,k0s:()=>jx,j41:()=>Ux,RV6:()=>mD,xGo:()=>Qm,Mr5:()=>tC,KVO:()=>qi,kS0:()=>Qs,QTQ:()=>h0,bIt:()=>sC,lsd:()=>nM,joV:()=>Qc,qSk:()=>ah,XpG:()=>UD,nI1:()=>GM,bMT:()=>$M,SdG:()=>GD,NAR:()=>jD,Y8G:()=>HE,lJ4:()=>RM,eq3:()=>PM,l_i:()=>LM,sMw:()=>FM,zJS:()=>NM,NyB:()=>rM,mGM:()=>tM,sdS:()=>oM,Dyx:()=>hD,Z7z:()=>dD,fX1:()=>uD,Njj:()=>Sp,tSv:()=>Ht,eBV:()=>qc,npT:()=>Rc,n$t:()=>Mg,Aen:()=>Ph,xc7:()=>XE,Kam:()=>aC,zvX:()=>nC,DNE:()=>Zi,C5r:()=>HM,EFF:()=>mM,JRh:()=>dC,SpI:()=>Kx,DH7:()=>TM,mxI:()=>pC,R50:()=>hC,GBs:()=>eM});let l=null,ue=!1,h=1;const ge=Symbol("SIGNAL");function Te(e){const n=l;return l=e,n}const st={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rt(e){if(ue)throw new Error("");if(null===l)return;l.consumerOnSignalRead(e);const n=l.nextProducerIndex++;sn(l),n<l.producerNode.length&&l.producerNode[n]!==e&&dt(l)&&At(l.producerNode[n],l.producerIndexOfThis[n]),l.producerNode[n]!==e&&(l.producerNode[n]=e,l.producerIndexOfThis[n]=dt(l)?Zt(e,l,n):0),l.producerLastReadVersion[n]=e.version}function Ot(e){if((!dt(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==h)){if(!e.producerMustRecompute(e)&&!On(e))return e.dirty=!1,void(e.lastCleanEpoch=h);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=h}}function Mt(e){if(void 0===e.liveConsumerNode)return;const n=ue;ue=!0;try{for(const o of e.liveConsumerNode)o.dirty||St(o)}finally{ue=n}}function bt(){return!1!==l?.consumerAllowSignalWrites}function St(e){e.dirty=!0,Mt(e),e.consumerMarkedDirty?.(e)}function zt(e){return e&&(e.nextProducerIndex=0),Te(e)}function Rt(e,n){if(Te(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(dt(e))for(let o=e.nextProducerIndex;o<e.producerNode.length;o++)At(e.producerNode[o],e.producerIndexOfThis[o]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function On(e){sn(e);for(let n=0;n<e.producerNode.length;n++){const o=e.producerNode[n],u=e.producerLastReadVersion[n];if(u!==o.version||(Ot(o),u!==o.version))return!0}return!1}function An(e){if(sn(e),dt(e))for(let n=0;n<e.producerNode.length;n++)At(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Zt(e,n,o){if(Gt(e),0===e.liveConsumerNode.length&&Qt(e))for(let u=0;u<e.producerNode.length;u++)e.producerIndexOfThis[u]=Zt(e.producerNode[u],e,u);return e.liveConsumerIndexOfThis.push(o),e.liveConsumerNode.push(n)-1}function At(e,n){if(Gt(e),1===e.liveConsumerNode.length&&Qt(e))for(let u=0;u<e.producerNode.length;u++)At(e.producerNode[u],e.producerIndexOfThis[u]);const o=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[o],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[o],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const u=e.liveConsumerIndexOfThis[n],g=e.liveConsumerNode[n];sn(g),g.producerIndexOfThis[u]=n}}function dt(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function sn(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Gt(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Qt(e){return void 0!==e.producerNode}function Wt(e){const n=Object.create(on);n.computation=e;const o=()=>{if(Ot(n),rt(n),n.value===Ut)throw n.error;return n.value};return o[ge]=n,o}const He=Symbol("UNSET"),ft=Symbol("COMPUTING"),Ut=Symbol("ERRORED"),on={...st,value:He,dirty:!0,error:null,equal:D,producerMustRecompute:e=>e.value===He||e.value===ft,producerRecomputeValue(e){if(e.value===ft)throw new Error("Detected cycle in computations.");const n=e.value;e.value=ft;const o=zt(e);let u;try{u=e.computation()}catch(g){u=Ut,e.error=g}finally{Rt(e,o)}n!==He&&n!==Ut&&u!==Ut&&e.equal(n,u)?e.value=n:(e.value=u,e.version++)}};let mn=function Fn(){throw new Error};function Sn(){mn()}let Nn=null;function ui(e,n){bt()||Sn(),e.equal(e.value,n)||(e.value=n,function ni(e){e.version++,function ut(){h++}(),Mt(e),Nn?.()}(e))}const _n={...st,equal:D,value:void 0};const Jn=()=>{},fi={...st,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{null!==e.schedule&&e.schedule(e.ref)},hasRun:!1,cleanupFn:Jn};var qt=H(4412),yn=H(1413),gi=H(8359),yi=H(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Zo="https://g.co/ng/security#xss";class wn extends Error{constructor(n,o){super(Fs(n,o)),this.code=n}}function Fs(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function Ns(e){return{toString:e}.toString()}const os="__parameters__";function ia(e,n,o){return Ns(()=>{const u=function wl(e){return function(...o){if(e){const u=e(...o);for(const g in u)this[g]=u[g]}}}(n);function g(...x){if(this instanceof g)return u.apply(this,x),this;const S=new g(...x);return O.annotation=S,O;function O(z,Y,se){const Ie=z.hasOwnProperty(os)?z[os]:Object.defineProperty(z,os,{value:[]})[os];for(;Ie.length<=se;)Ie.push(null);return(Ie[se]=Ie[se]||[]).push(S),z}}return o&&(g.prototype=Object.create(o.prototype)),g.prototype.ngMetadataName=e,g.annotationCls=g,g})}const ho=globalThis;function vr(e){for(let n in e)if(e[n]===vr)return n;throw Error("Could not find renamed property on target object.")}function Nc(e,n){for(const o in n)n.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(e[o]=n[o])}function Ao(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ao).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const o=n.indexOf("\n");return-1===o?n:n.substring(0,o)}function Ja(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const su=vr({__forward_ref__:vr});function el(e){return e.__forward_ref__=el,e.toString=function(){return Ao(this())},e}function Ni(e){return Kl(e)?e():e}function Kl(e){return"function"==typeof e&&e.hasOwnProperty(su)&&e.__forward_ref__===el}function Xr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fa(e){return{providers:e.providers||[],imports:e.imports||[]}}function Cl(e){return ss(e,ro)||ss(e,Tl)}function qs(e){return null!==Cl(e)}function ss(e,n){return e.hasOwnProperty(n)?e[n]:null}function oa(e){return e&&(e.hasOwnProperty(_c)||e.hasOwnProperty(Dl))?e[_c]:null}const ro=vr({\u0275prov:vr}),_c=vr({\u0275inj:vr}),Tl=vr({ngInjectableDef:vr}),Dl=vr({ngInjectorDef:vr});class zi{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Xr({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Gd(e){return e&&!!e.\u0275providers}const Zl=vr({\u0275cmp:vr}),$o=vr({\u0275dir:vr}),vc=vr({\u0275pipe:vr}),bc=vr({\u0275mod:vr}),sa=vr({\u0275fac:vr}),cu=vr({__NG_ELEMENT_ID__:vr}),Vc=vr({__NG_ENV_ID__:vr});function Ki(e){return"string"==typeof e?e:null==e?"":String(e)}function Kn(e,n){throw new wn(-201,!1)}var Wi=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Wi||{});let xc;function Ma(){return xc}function Ds(e){const n=xc;return xc=e,n}function aa(e,n,o){const u=Cl(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Wi.Optional?null:void 0!==n?n:void Kn()}const Yl={},Ql="__NG_DI_FLAG__",V="ngTempTokenPath",q=/\n/gm,Ye="__source";let Bt;function Un(e){const n=Bt;return Bt=e,n}function Hr(e,n=Wi.Default){if(void 0===Bt)throw new wn(-203,!1);return null===Bt?aa(e,void 0,n):Bt.get(e,n&Wi.Optional?null:void 0,n)}function qi(e,n=Wi.Default){return(Ma()||Hr)(Ni(e),n)}function Vn(e,n=Wi.Default){return qi(e,so(n))}function so(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Rr(e){const n=[];for(let o=0;o<e.length;o++){const u=Ni(e[o]);if(Array.isArray(u)){if(0===u.length)throw new wn(900,!1);let g,x=Wi.Default;for(let S=0;S<u.length;S++){const O=u[S],z=Sa(O);"number"==typeof z?-1===z?g=O.token:x|=z:g=O}n.push(qi(g,x))}else n.push(qi(u))}return n}function Pr(e,n){return e[Ql]=n,e.prototype[Ql]=n,e}function Sa(e){return e[Ql]}const Aa=Pr(ia("Optional"),8),Ba=Pr(ia("SkipSelf"),4);function Il(e,n){return e.hasOwnProperty(sa)?e[sa]:null}function du(e,n){e.forEach(o=>Array.isArray(o)?du(o,n):n(o))}function ad(e,n,o){n>=e.length?e.push(o):e.splice(n,0,o)}function ka(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Wn(e,n,o){let u=jc(e,n);return u>=0?e[1|u]=o:(u=~u,function za(e,n,o,u){let g=e.length;if(g==n)e.push(o,u);else if(1===g)e.push(u,e[0]),e[0]=o;else{for(g--,e.push(e[g-1],e[g]);g>n;)e[g]=e[g-2],g--;e[n]=o,e[n+1]=u}}(e,u,n,o)),u}function hu(e,n){const o=jc(e,n);if(o>=0)return e[1|o]}function jc(e,n){return function Bu(e,n,o){let u=0,g=e.length>>o;for(;g!==u;){const x=u+(g-u>>1),S=e[x<<o];if(n===S)return x<<o;S>n?g=x:u=x+1}return~(g<<o)}(e,n,1)}const ms={},Nr=[],il=new zi(""),zu=new zi("",-1),Hd=new zi("");class Vu{get(n,o=Yl){if(o===Yl){const u=new Error(`NullInjectorError: No provider for ${Ao(n)}!`);throw u.name="NullInjectorError",u}return o}}var wc=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(wc||{}),Al=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Al||{}),Va=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Va||{});function dd(e,n,o){let u=e.length;for(;;){const g=e.indexOf(n,o);if(-1===g)return g;if(0===g||e.charCodeAt(g-1)<=32){const x=n.length;if(g+x===u||e.charCodeAt(g+x)<=32)return g}o=g+1}}function Uu(e,n,o){let u=0;for(;u<o.length;){const g=o[u];if("number"==typeof g){if(0!==g)break;u++;const x=o[u++],S=o[u++],O=o[u++];e.setAttribute(n,S,O,x)}else{const x=g,S=o[++u];pd(x)?e.setProperty(n,x,S):e.setAttribute(n,x,S),u++}}return u}function hd(e){return 3===e||4===e||6===e}function pd(e){return 64===e.charCodeAt(0)}function Oa(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let o=-1;for(let u=0;u<n.length;u++){const g=n[u];"number"==typeof g?o=g:0===o||ju(e,o,g,null,-1===o||2===o?n[++u]:null)}}return e}function ju(e,n,o,u,g){let x=0,S=e.length;if(-1===n)S=-1;else for(;x<e.length;){const O=e[x++];if("number"==typeof O){if(O===n){S=-1;break}if(O>n){S=x-1;break}}}for(;x<e.length;){const O=e[x];if("number"==typeof O)break;if(O===o){if(null===u)return void(null!==g&&(e[x+1]=g));if(u===e[x+1])return void(e[x+2]=g)}x++,null!==u&&x++,null!==g&&x++}-1!==S&&(e.splice(S,0,n),x=S+1),e.splice(x++,0,o),null!==u&&e.splice(x++,0,u),null!==g&&e.splice(x++,0,g)}const pu="ng-template";function Wd(e,n,o,u){let g=0;if(u){for(;g<n.length&&"string"==typeof n[g];g+=2)if("class"===n[g]&&-1!==dd(n[g+1].toLowerCase(),o,0))return!0}else if(Gc(e))return!1;if(g=n.indexOf(1,g),g>-1){let x;for(;++g<n.length&&"string"==typeof(x=n[g]);)if(x.toLowerCase()===o)return!0}return!1}function Gc(e){return 4===e.type&&e.value!==pu}function _p(e,n,o){return n===(4!==e.type||o?e.value:pu)}function Xd(e,n,o){let u=4;const g=e.attrs,x=null!==g?function R(e){for(let n=0;n<e.length;n++)if(hd(e[n]))return n;return e.length}(g):0;let S=!1;for(let O=0;O<n.length;O++){const z=n[O];if("number"!=typeof z){if(!S)if(4&u){if(u=2|1&u,""!==z&&!_p(e,z,o)||""===z&&1===n.length){if(rl(u))return!1;S=!0}}else if(8&u){if(null===g||!Wd(e,g,z,o)){if(rl(u))return!1;S=!0}}else{const Y=n[++O],se=Ef(z,g,Gc(e),o);if(-1===se){if(rl(u))return!1;S=!0;continue}if(""!==Y){let Ie;if(Ie=se>x?"":g[se+1].toLowerCase(),2&u&&Y!==Ie){if(rl(u))return!1;S=!0}}}}else{if(!S&&!rl(u)&&!rl(z))return!1;if(S&&rl(z))continue;S=!1,u=z|1&u}}return rl(u)||S}function rl(e){return!(1&e)}function Ef(e,n,o,u){if(null===n)return-1;let g=0;if(u||!o){let x=!1;for(;g<n.length;){const S=n[g];if(S===e)return g;if(3===S||6===S)x=!0;else{if(1===S||2===S){let O=n[++g];for(;"string"==typeof O;)O=n[++g];continue}if(4===S)break;if(0===S){g+=4;continue}}g+=x?1:2}return-1}return function G(e,n){let o=e.indexOf(4);if(o>-1)for(o++;o<e.length;){const u=e[o];if("number"==typeof u)return-1;if(u===n)return o;o++}return-1}(n,e)}function Kd(e,n,o=!1){for(let u=0;u<n.length;u++)if(Xd(e,n[u],o))return!0;return!1}function L(e,n){e:for(let o=0;o<n.length;o++){const u=n[o];if(e.length===u.length){for(let g=0;g<e.length;g++)if(e[g]!==u[g])continue e;return!0}}return!1}function $(e,n){return e?":not("+n.trim()+")":n}function oe(e){let n=e[0],o=1,u=2,g="",x=!1;for(;o<e.length;){let S=e[o];if("string"==typeof S)if(2&u){const O=e[++o];g+="["+S+(O.length>0?'="'+O+'"':"")+"]"}else 8&u?g+="."+S:4&u&&(g+=" "+S);else""!==g&&!rl(S)&&(n+=$(x,g),g=""),u=S,x=x||!rl(u);o++}return""!==g&&(n+=$(x,g)),n}function i(e){return Ns(()=>{const n=Ce(e),o={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===wc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Al.Emulated,styles:e.styles||Nr,_:null,schemas:e.schemas||null,tView:null,id:""};Se(o);const u=e.dependencies;return o.directiveDefs=xe(u,!1),o.pipeDefs=xe(u,!0),o.id=function Me(e){let n=0;const o=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const g of o)n=Math.imul(31,n)+g.charCodeAt(0)|0;return n+=2147483648,"c"+n}(o),o})}function d(e){return B(e)||Z(e)}function v(e){return null!==e}function E(e){return Ns(()=>({type:e.type,bootstrap:e.bootstrap||Nr,declarations:e.declarations||Nr,imports:e.imports||Nr,exports:e.exports||Nr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function M(e,n){if(null==e)return ms;const o={};for(const u in e)if(e.hasOwnProperty(u)){const g=e[u];let x,S,O=Va.None;Array.isArray(g)?(O=g[0],x=g[1],S=g[2]??x):(x=g,S=g),n?(o[x]=O!==Va.None?[u,O]:u,n[x]=S):o[x]=u}return o}function k(e){return Ns(()=>{const n=Ce(e);return Se(n),n})}function P(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function B(e){return e[Zl]||null}function Z(e){return e[$o]||null}function Q(e){return e[vc]||null}function ae(e){const n=B(e)||Z(e)||Q(e);return null!==n&&n.standalone}function pe(e,n){const o=e[bc]||null;if(!o&&!0===n)throw new Error(`Type ${Ao(e)} does not have '\u0275mod' property.`);return o}function Ce(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||ms,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Nr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:M(e.inputs,n),outputs:M(e.outputs),debugInfo:null}}function Se(e){e.features?.forEach(n=>n(e))}function xe(e,n){if(!e)return null;const o=n?Q:d;return()=>("function"==typeof e?e():e).map(u=>o(u)).filter(v)}function Le(e){return{\u0275providers:e}}function Ne(...e){return{\u0275providers:et(0,e),\u0275fromNgModule:!0}}function et(e,...n){const o=[],u=new Set;let g;const x=S=>{o.push(S)};return du(n,S=>{const O=S;Ke(O,x,[],u)&&(g||=[],g.push(O))}),void 0!==g&&je(g,x),o}function je(e,n){for(let o=0;o<e.length;o++){const{ngModule:u,providers:g}=e[o];Vt(g,x=>{n(x,u)})}}function Ke(e,n,o,u){if(!(e=Ni(e)))return!1;let g=null,x=oa(e);const S=!x&&B(e);if(x||S){if(S&&!S.standalone)return!1;g=e}else{const z=e.ngModule;if(x=oa(z),!x)return!1;g=z}const O=u.has(g);if(S){if(O)return!1;if(u.add(g),S.dependencies){const z="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const Y of z)Ke(Y,n,o,u)}}else{if(!x)return!1;{if(null!=x.imports&&!O){let Y;u.add(g);try{du(x.imports,se=>{Ke(se,n,o,u)&&(Y||=[],Y.push(se))})}finally{}void 0!==Y&&je(Y,n)}if(!O){const Y=Il(g)||(()=>new g);n({provide:g,useFactory:Y,deps:Nr},g),n({provide:Hd,useValue:g,multi:!0},g),n({provide:il,useValue:()=>qi(g),multi:!0},g)}const z=x.providers;if(null!=z&&!O){const Y=e;Vt(z,se=>{n(se,Y)})}}}return g!==e&&void 0!==e.providers}function Vt(e,n){for(let o of e)Gd(o)&&(o=o.\u0275providers),Array.isArray(o)?Vt(o,n):n(o)}const Xt=vr({provide:String,useValue:vr});function jt(e){return null!==e&&"object"==typeof e&&Xt in e}function un(e){return"function"==typeof e}const qn=new zi(""),en={},Ci={};let Zn;function Xn(){return void 0===Zn&&(Zn=new Vu),Zn}class Tn{}class jn extends Tn{get destroyed(){return this._destroyed}constructor(n,o,u,g){super(),this.parent=o,this.source=u,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jr(n,S=>this.processProvider(S)),this.records.set(zu,$i(void 0,this)),g.has("environment")&&this.records.set(Tn,$i(void 0,this));const x=this.records.get(qn);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(Hd,Nr,Wi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=Te(null);try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const o=Un(this),u=Ds(void 0);try{return n()}finally{Un(o),Ds(u)}}get(n,o=Yl,u=Wi.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Vc))return n[Vc](this);u=so(u);const x=Un(this),S=Ds(void 0);try{if(!(u&Wi.SkipSelf)){let z=this.records.get(n);if(void 0===z){const Y=function Qo(e){return"function"==typeof e||"object"==typeof e&&e instanceof zi}(n)&&Cl(n);z=Y&&this.injectableDefInScope(Y)?$i(Fi(n),en):null,this.records.set(n,z)}if(null!=z)return this.hydrate(n,z)}return(u&Wi.Self?Xn():this.parent).get(n,o=u&Wi.Optional&&o===Yl?null:o)}catch(O){if("NullInjectorError"===O.name){if((O[V]=O[V]||[]).unshift(Ao(n)),x)throw O;return function Ia(e,n,o,u){const g=e[V];throw n[Ye]&&g.unshift(n[Ye]),e.message=function zs(e,n,o,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let g=Ao(n);if(Array.isArray(n))g=n.map(Ao).join(" -> ");else if("object"==typeof n){let x=[];for(let S in n)if(n.hasOwnProperty(S)){let O=n[S];x.push(S+":"+("string"==typeof O?JSON.stringify(O):Ao(O)))}g=`{${x.join(", ")}}`}return`${o}${u?"("+u+")":""}[${g}]: ${e.replace(q,"\n  ")}`}("\n"+e.message,g,o,u),e.ngTokenPath=g,e[V]=null,e}(O,n,"R3InjectorError",this.source)}throw O}finally{Ds(S),Un(x)}}resolveInjectorInitializers(){const n=Te(null),o=Un(this),u=Ds(void 0);try{const x=this.get(il,Nr,Wi.Self);for(const S of x)S()}finally{Un(o),Ds(u),Te(n)}}toString(){const n=[],o=this.records;for(const u of o.keys())n.push(Ao(u));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new wn(205,!1)}processProvider(n){let o=un(n=Ni(n))?n:Ni(n&&n.provide);const u=function cr(e){return jt(e)?$i(void 0,e.useValue):$i(xi(e),en)}(n);if(!un(n)&&!0===n.multi){let g=this.records.get(o);g||(g=$i(void 0,en,!0),g.factory=()=>Rr(g.multi),this.records.set(o,g)),o=n,g.multi.push(n)}this.records.set(o,u)}hydrate(n,o){const u=Te(null);try{return o.value===en&&(o.value=Ci,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Qr(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{Te(u)}}injectableDefInScope(n){if(!n.providedIn)return!1;const o=Ni(n.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(n){const o=this._onDestroyHooks.indexOf(n);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Fi(e){const n=Cl(e),o=null!==n?n.factory:Il(e);if(null!==o)return o;if(e instanceof zi)throw new wn(204,!1);if(e instanceof Function)return function Si(e){if(e.length>0)throw new wn(204,!1);const o=function gc(e){return e&&(e[ro]||e[Tl])||null}(e);return null!==o?()=>o.factory(e):()=>new e}(e);throw new wn(204,!1)}function xi(e,n,o){let u;if(un(e)){const g=Ni(e);return Il(g)||Fi(g)}if(jt(e))u=()=>Ni(e.useValue);else if(function tt(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...Rr(e.deps||[]));else if(function Nt(e){return!(!e||!e.useExisting)}(e))u=()=>qi(Ni(e.useExisting));else{const g=Ni(e&&(e.useClass||e.provide));if(!function Ur(e){return!!e.deps}(e))return Il(g)||Fi(g);u=()=>new g(...Rr(e.deps))}return u}function $i(e,n,o=!1){return{factory:e,value:n,multi:o?[]:void 0}}function Jr(e,n){for(const o of e)Array.isArray(o)?Jr(o,n):o&&Gd(o)?Jr(o.\u0275providers,n):n(o)}function Ua(e,n){e instanceof jn&&e.assertNotDestroyed();const u=Un(e),g=Ds(void 0);try{return n()}finally{Un(u),Ds(g)}}function jr(){return void 0!==Ma()||null!=function En(){return Bt}()}function kl(e){if(!jr())throw new wn(-203,!1)}const po=0,Yn=1,Hi=2,es=3,Ec=4,Ys=5,ja=6,Zd=7,No=8,Ms=9,Hc=10,rr=11,zh=12,vp=13,qd=14,To=15,Yd=16,Vh=17,fu=18,bp=19,Uh=20,md=21,Qd=22,Jl=23,Pi=25,jh=1,ol=7,mu=9,Ss=10;var Cf=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Cf||{});function ha(e){return Array.isArray(e)&&"object"==typeof e[jh]}function pa(e){return Array.isArray(e)&&!0===e[jh]}function Jd(e){return!!(4&e.flags)}function Cc(e){return e.componentOffset>-1}function Tc(e){return!(1&~e.flags)}function Is(e){return!!e.template}function Dc(e){return!!(512&e[Hi])}class _u{constructor(n,o,u){this.previousValue=n,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function th(e,n,o,u){null!==n?n.applyValueToInputSignal(n,u):e[o]=u}function wp(){return Lm}function Lm(e){return e.type.prototype.ngOnChanges&&(e.setInput=qy),Fm}function Fm(){const e=vd(this),n=e?.current;if(n){const o=e.previous;if(o===ms)e.previous=n;else for(let u in n)o[u]=n[u];e.current=null,this.ngOnChanges(n)}}function qy(e,n,o,u,g){const x=this.declaredInputs[u],S=vd(e)||function Zg(e,n){return e[Tf]=n}(e,{previous:ms,current:null}),O=S.current||(S.current={}),z=S.previous,Y=z[x];O[x]=new _u(Y&&Y.currentValue,o,z===ms),th(e,n,g,o)}wp.ngInherit=!0;const Tf="__ngSimpleChanges__";function vd(e){return e[Tf]||null}const tc=function(e,n,o){},Ep="svg";function Gr(e){for(;Array.isArray(e);)e=e[po];return e}function Hh(e,n){return Gr(n[e])}function al(e,n){return Gr(n[e.index])}function Cp(e,n){return e.data[n]}function Hu(e,n){return e[n]}function Pl(e,n){const o=n[e];return ha(o)?o:o[po]}function Ll(e){return!(128&~e[Hi])}function Sc(e,n){return null==n?null:e[n]}function ih(e){e[Vh]=0}function Dp(e){1024&e[Hi]||(e[Hi]|=1024,Ll(e)&&Mf(e))}function yu(e){return!!(9216&e[Hi]||e[Jl]?.dirty)}function zm(e){e[Hc].changeDetectionScheduler?.notify(7),64&e[Hi]&&(e[Hi]|=1024),yu(e)&&Mf(e)}function Mf(e){e[Hc].changeDetectionScheduler?.notify(0);let n=vu(e);for(;null!==n&&!(8192&n[Hi])&&(n[Hi]|=8192,Ll(n));)n=vu(n)}function rh(e,n){if(!(256&~e[Hi]))throw new wn(911,!1);null===e[md]&&(e[md]=[]),e[md].push(n)}function vu(e){const n=e[es];return pa(n)?n[es]:n}const ki={lFrame:ll(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Zc=!1;function If(){return ki.bindingsEnabled}function Xu(){return null!==ki.skipHydrationRootTNode}function pn(){return ki.lFrame.lView}function Er(){return ki.lFrame.tView}function qc(e){return ki.lFrame.contextLView=e,e[No]}function Sp(e){return ki.lFrame.contextLView=null,e}function xr(){let e=nc();for(;null!==e&&64===e.type;)e=e.parent;return e}function nc(){return ki.lFrame.currentTNode}function Oo(e,n){const o=ki.lFrame;o.currentTNode=e,o.isParent=n}function Af(){return ki.lFrame.isParent}function sh(){ki.lFrame.isParent=!1}function Zu(){return Zc}function Ip(e){Zc=e}function $a(){const e=ki.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Fl(){return ki.lFrame.bindingIndex++}function Yc(e){const n=ki.lFrame,o=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,o}function Jg(e,n){const o=ki.lFrame;o.bindingIndex=o.bindingRootIndex=e,Ap(n)}function Ap(e){ki.lFrame.currentDirectiveIndex=e}function $m(e){const n=ki.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function Hm(){return ki.lFrame.currentQueryIndex}function Wh(e){ki.lFrame.currentQueryIndex=e}function e_(e){const n=e[Yn];return 2===n.type?n.declTNode:1===n.type?e[Ys]:null}function kp(e,n,o){if(o&Wi.SkipSelf){let g=n,x=e;for(;!(g=g.parent,null!==g||o&Wi.Host||(g=e_(x),null===g||(x=x[qd],10&g.type))););if(null===g)return!1;n=g,e=x}const u=ki.lFrame=Ic();return u.currentTNode=n,u.lView=e,!0}function Op(e){const n=Ic(),o=e[Yn];ki.lFrame=n,n.currentTNode=o.firstChild,n.lView=e,n.tView=o,n.contextLView=e,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function Ic(){const e=ki.lFrame,n=null===e?null:e.child;return null===n?ll(e):n}function ll(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function t_(){const e=ki.lFrame;return ki.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Of=t_;function Wm(){const e=t_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ra(){return ki.lFrame.selectedIndex}function Ac(e){ki.lFrame.selectedIndex=e}function Ho(){const e=ki.lFrame;return Cp(e.tView,e.selectedIndex)}function ah(){ki.lFrame.currentNamespace=Ep}function Qc(){!function Rp(){ki.lFrame.currentNamespace=null}()}let Xm=!0;function Pp(){return Xm}function Jc(e){Xm=e}function Lp(e,n){for(let o=n.directiveStart,u=n.directiveEnd;o<u;o++){const x=e.data[o].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:O,ngAfterViewInit:z,ngAfterViewChecked:Y,ngOnDestroy:se}=x;S&&(e.contentHooks??=[]).push(-o,S),O&&((e.contentHooks??=[]).push(o,O),(e.contentCheckHooks??=[]).push(o,O)),z&&(e.viewHooks??=[]).push(-o,z),Y&&((e.viewHooks??=[]).push(o,Y),(e.viewCheckHooks??=[]).push(o,Y)),null!=se&&(e.destroyHooks??=[]).push(o,se)}}function Fp(e,n,o){lh(e,n,3,o)}function Xh(e,n,o,u){(3&e[Hi])===o&&lh(e,n,o,u)}function Km(e,n){let o=e[Hi];(3&o)===n&&(o&=16383,o+=1,e[Hi]=o)}function lh(e,n,o,u){const x=u??-1,S=n.length-1;let O=0;for(let z=void 0!==u?65535&e[Vh]:0;z<S;z++)if("number"==typeof n[z+1]){if(O=n[z],null!=u&&O>=u)break}else n[z]<0&&(e[Vh]+=65536),(O<x||-1==x)&&(cs(e,o,n,z),e[Vh]=(4294901760&e[Vh])+z+2),z++}function r_(e,n){tc(4,e,n);const o=Te(null);try{n.call(e)}finally{Te(o),tc(5,e,n)}}function cs(e,n,o,u){const g=o[u]<0,x=o[u+1],O=e[g?-o[u]:o[u]];g?e[Hi]>>14<e[Vh]>>16&&(3&e[Hi])===n&&(e[Hi]+=16384,r_(O,x)):r_(O,x)}const cl=-1;class xu{constructor(n,o,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}const zp={};class wd{constructor(n,o){this.injector=n,this.parentInjector=o}get(n,o,u){u=so(u);const g=this.injector.get(n,zp,u);return g!==zp||o===zp?g:this.parentInjector.get(n,o,u)}}function Vp(e){return e!==cl}function qu(e){return 32767&e}function dh(e,n){let o=function ev(e){return e>>16}(e),u=n;for(;o>0;)u=u[qd],o--;return u}let Up=!0;function hh(e){const n=Up;return Up=e,n}const a_=255,l_=5;let c_=0;const wu={};function Lf(e,n){const o=Yu(e,n);if(-1!==o)return o;const u=n[Yn];u.firstCreatePass&&(e.injectorIndex=n.length,Ff(u.data,e),Ff(n,null),Ff(u.blueprint,null));const g=Nf(e,n),x=e.injectorIndex;if(Vp(g)){const S=qu(g),O=dh(g,n),z=O[Yn].data;for(let Y=0;Y<8;Y++)n[x+Y]=O[S+Y]|z[S+Y]}return n[x+8]=g,x}function Ff(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Yu(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Nf(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let o=0,u=null,g=n;for(;null!==g;){if(u=Jm(g),null===u)return cl;if(o++,g=g[qd],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return cl}function qm(e,n,o){!function nv(e,n,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(cu)&&(u=o[cu]),null==u&&(u=o[cu]=c_++);const g=u&a_;n.data[e+(g>>l_)]|=1<<g}(e,n,o)}function jp(e,n,o){if(o&Wi.Optional||void 0!==e)return e;Kn()}function d_(e,n,o,u){if(o&Wi.Optional&&void 0===u&&(u=null),!(o&(Wi.Self|Wi.Host))){const g=e[Ms],x=Ds(void 0);try{return g?g.get(n,u,o&Wi.Optional):aa(n,u,o&Wi.Optional)}finally{Ds(x)}}return jp(u,0,o)}function Bf(e,n,o,u=Wi.Default,g){if(null!==e){if(2048&n[Hi]&&!(u&Wi.Self)){const S=function Hp(e,n,o,u,g){let x=e,S=n;for(;null!==x&&null!==S&&2048&S[Hi]&&!(512&S[Hi]);){const O=Ed(x,S,o,u|Wi.Self,wu);if(O!==wu)return O;let z=x.parent;if(!z){const Y=S[Uh];if(Y){const se=Y.get(o,wu,u);if(se!==wu)return se}z=Jm(S),S=S[qd]}x=z}return g}(e,n,o,u,wu);if(S!==wu)return S}const x=Ed(e,n,o,u,wu);if(x!==wu)return x}return d_(n,o,u,g)}function Ed(e,n,o,u,g){const x=function Gp(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(cu)?e[cu]:void 0;return"number"==typeof n?n>=0?n&a_:h_:n}(o);if("function"==typeof x){if(!kp(n,e,u))return u&Wi.Host?jp(g,0,u):d_(n,o,u,g);try{let S;if(S=x(u),null!=S||u&Wi.Optional)return S;Kn()}finally{Of()}}else if("number"==typeof x){let S=null,O=Yu(e,n),z=cl,Y=u&Wi.Host?n[To][Ys]:null;for((-1===O||u&Wi.SkipSelf)&&(z=-1===O?Nf(e,n):n[O+8],z!==cl&&Ym(u,!1)?(S=n[Yn],O=qu(z),n=dh(z,n)):O=-1);-1!==O;){const se=n[Yn];if(Kh(x,O,se.data)){const Ie=zf(O,n,o,S,u,Y);if(Ie!==wu)return Ie}z=n[O+8],z!==cl&&Ym(u,n[Yn].data[O+8]===Y)&&Kh(x,O,n)?(S=se,O=qu(z),n=dh(z,n)):O=-1}}return g}function zf(e,n,o,u,g,x){const S=n[Yn],O=S.data[e+8],se=Vf(O,S,o,null==u?Cc(O)&&Up:u!=S&&!!(3&O.type),g&Wi.Host&&x===O);return null!==se?ph(n,S,se,O):wu}function Vf(e,n,o,u,g){const x=e.providerIndexes,S=n.data,O=1048575&x,z=e.directiveStart,se=x>>20,lt=g?O+se:e.directiveEnd;for(let ht=u?O:O+se;ht<lt;ht++){const Ft=S[ht];if(ht<z&&o===Ft||ht>=z&&Ft.type===o)return ht}if(g){const ht=S[z];if(ht&&Is(ht)&&ht.type===o)return z}return null}function ph(e,n,o,u){let g=e[o];const x=n.data;if(function Pf(e){return e instanceof xu}(g)){const S=g;S.resolving&&function Na(e,n){throw n&&n.join(" > "),new wn(-200,e)}(function br(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ki(e)}(x[o]));const O=hh(S.canSeeViewProviders);S.resolving=!0;const Y=S.injectImpl?Ds(S.injectImpl):null;kp(e,u,Wi.Default);try{g=e[o]=S.factory(void 0,x,e,u),n.firstCreatePass&&o>=u.directiveStart&&function i_(e,n,o){const{ngOnChanges:u,ngOnInit:g,ngDoCheck:x}=n.type.prototype;if(u){const S=Lm(n);(o.preOrderHooks??=[]).push(e,S),(o.preOrderCheckHooks??=[]).push(e,S)}g&&(o.preOrderHooks??=[]).push(0-e,g),x&&((o.preOrderHooks??=[]).push(e,x),(o.preOrderCheckHooks??=[]).push(e,x))}(o,x[o],n)}finally{null!==Y&&Ds(Y),hh(O),S.resolving=!1,Of()}}return g}function Kh(e,n,o){return!!(o[n+(e>>l_)]&1<<e)}function Ym(e,n){return!(e&Wi.Self||e&Wi.Host&&n)}class Us{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,u){return Bf(this._tNode,this._lView,n,so(u),o)}}function h_(){return new Us(xr(),pn())}function Qm(e){return Ns(()=>{const n=e.prototype.constructor,o=n[sa]||$p(n),u=Object.prototype;let g=Object.getPrototypeOf(e.prototype).constructor;for(;g&&g!==u;){const x=g[sa]||$p(g);if(x&&x!==o)return x;g=Object.getPrototypeOf(g)}return x=>new x})}function $p(e){return Kl(e)?()=>{const n=$p(Ni(e));return n&&n()}:Il(e)}function Jm(e){const n=e[Yn],o=n.type;return 2===o?n.declTNode:1===o?e[Ys]:null}function Qs(e){return function u_(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const o=e.attrs;if(o){const u=o.length;let g=0;for(;g<u;){const x=o[g];if(hd(x))break;if(0===x)g+=2;else if("number"==typeof x)for(g++;g<u&&"string"==typeof o[g];)g++;else{if(x===n)return o[g+1];g+=2}}}return null}(xr(),e)}function tg(e,n=null,o=null,u){const g=ng(e,n,o,u);return g.resolveInjectorInitializers(),g}function ng(e,n=null,o=null,u,g=new Set){const x=[o||Nr,Ne(e)];return u=u||("object"==typeof e?void 0:Ao(e)),new jn(x,n||Xn(),u||null,g)}class Js{static#e=this.THROW_IF_NOT_FOUND=Yl;static#t=this.NULL=new Vu;static create(n,o){if(Array.isArray(n))return tg({name:""},o,n,"");{const u=n.name??"";return tg({name:u},n.parent,n.providers,u)}}static#n=this.\u0275prov=Xr({token:Js,providedIn:"any",factory:()=>qi(zu)});static#i=this.__NG_ELEMENT_ID__=-1}new zi("").__NG_ELEMENT_ID__=e=>{const n=xr();if(null===n)throw new wn(204,!1);if(2&n.type)return n.value;if(e&Wi.Optional)return null;throw new wn(204,!1)};function ig(e){return e.ngOriginalError}class Ro{constructor(){this._console=console}handleError(n){const o=this._findOriginalError(n);this._console.error("ERROR",n),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&ig(n);for(;o&&ig(o);)o=ig(o);return o||null}}const eu=new zi("",{providedIn:"root",factory:()=>Vn(Ro).handleError.bind(void 0)});let mh=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Yh;static#t=this.__NG_ENV_ID__=o=>o}return e})();class Gf extends mh{constructor(n){super(),this._lView=n}onDestroy(n){return rh(this._lView,n),()=>function Ga(e,n){if(null===e[md])return;const o=e[md].indexOf(n);-1!==o&&e[md].splice(o,1)}(this._lView,n)}}function Yh(){return new Gf(pn())}function y_(){return Cu(xr(),pn())}function Cu(e,n){return new Kr(al(e,n))}let Kr=(()=>{class e{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=y_}return e})();function Hf(e){return e instanceof Kr?e.nativeElement:e}let Cd=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:()=>new e})}return e})();const Ha=class Qu extends yn.B{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,jr()&&(this.destroyRef=Vn(mh,{optional:!0})??void 0,this.pendingTasks=Vn(Cd,{optional:!0})??void 0)}emit(n){const o=Te(null);try{super.next(n)}finally{Te(o)}}subscribe(n,o,u){let g=n,x=o||(()=>null),S=u;if(n&&"object"==typeof n){const z=n;g=z.next?.bind(z),x=z.error?.bind(z),S=z.complete?.bind(z)}this.__isAsync&&(x=this.wrapInTimeout(x),g&&(g=this.wrapInTimeout(g)),S&&(S=this.wrapInTimeout(S)));const O=super.subscribe({next:g,error:x,complete:S});return n instanceof gi.yU&&n.add(O),O}wrapInTimeout(n){return o=>{const u=this.pendingTasks?.add();setTimeout(()=>{n(o),void 0!==u&&this.pendingTasks?.remove(u)})}}};function v_(){return this._results[Symbol.iterator]()}class gh{static#e=Symbol.iterator;get changes(){return this._changes??=new Ha}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=gh.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=v_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){this.dirty=!1;const u=function Vs(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function _o(e,n,o){if(e.length!==n.length)return!1;for(let u=0;u<e.length;u++){let g=e[u],x=n[u];if(o&&(g=o(g),x=o(x)),x!==g)return!1}return!0}(this._results,u,o))&&(this._results=u,this.length=u.length,this.last=u[this.length-1],this.first=u[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Wf(e){return!(128&~e.flags)}const rg=new Map;let hv=0;const Qh="__ngContext__";function ks(e,n){ha(n)?(e[Qh]=n[bp],function Td(e){rg.set(e[bp],e)}(n)):e[Qh]=n}function Tu(e){return ug(e[zh])}function cg(e){return ug(e[Ec])}function ug(e){for(;null!==e&&!pa(e);)e=e[Ec];return e}let gg;function gv(e){gg=e}function Md(){if(void 0!==gg)return gg;if(typeof document<"u")return document;throw new wn(210,!1)}const tm=new zi("",{providedIn:"root",factory:()=>Jh}),Jh="ng",nm=new zi(""),_g=new zi("",{providedIn:"platform",factory:()=>"unknown"}),yv=new zi(""),yg=new zi("",{providedIn:"root",factory:()=>Md().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let om=()=>null;function sm(e,n,o=!1){return om(e,n,o)}const cf=new zi("",{providedIn:"root",factory:()=>!1});let yo,hm;function wh(e){return function sp(){if(void 0===yo&&(yo=null,ho.trustedTypes))try{yo=ho.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return yo}()?.createHTML(e)||e}function Eh(){if(void 0===hm&&(hm=null,ho.trustedTypes))try{hm=ho.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return hm}function ap(e){return Eh()?.createHTML(e)||e}function df(e){return Eh()?.createScriptURL(e)||e}class Mu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zo})`}}class pm extends Mu{getTypeName(){return"HTML"}}class kd extends Mu{getTypeName(){return"Style"}}class Ev extends Mu{getTypeName(){return"Script"}}class wg extends Mu{getTypeName(){return"URL"}}class V_ extends Mu{getTypeName(){return"ResourceURL"}}function rc(e){return e instanceof Mu?e.changingThisBreaksApplicationSecurity:e}function _s(e,n){const o=function Cv(e){return e instanceof Mu&&e.getTypeName()||null}(e);if(null!=o&&o!==n){if("ResourceURL"===o&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${o} (see ${Zo})`)}return o===n}function Od(e){return new pm(e)}function Do(e){return new kd(e)}function zl(e){return new Ev(e)}function Zr(e){return new wg(e)}function Th(e){return new V_(e)}class Tv{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const o=(new window.DOMParser).parseFromString(wh(n),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(n):(o.removeChild(o.firstChild),o)}catch{return null}}}class Su{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const o=this.inertDocument.createElement("template");return o.innerHTML=wh(n),o}}const Vl=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dh(e){return(e=String(e)).match(Vl)?e:"unsafe:"+e}function ys(e){const n={};for(const o of e.split(","))n[o]=!0;return n}function dl(...e){const n={};for(const o of e)for(const u in o)o.hasOwnProperty(u)&&(n[u]=!0);return n}const Ju=ys("area,br,col,hr,img,wbr"),iu=ys("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ed=ys("rp,rt"),mm=dl(Ju,dl(iu,ys("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dl(ed,ys("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dl(ed,iu)),pf=ys("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cg=dl(pf,ys("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ys("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),U_=ys("script,style,template");class j_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let o=n.firstChild,u=!0,g=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)g.push(o),o=H_(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let x=$_(o);if(x){o=x;break}o=g.pop()}return this.buf.join("")}startElement(n){const o=td(n).toLowerCase();if(!mm.hasOwnProperty(o))return this.sanitizedSomething=!0,!U_.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=n.attributes;for(let g=0;g<u.length;g++){const x=u.item(g),S=x.name,O=S.toLowerCase();if(!Cg.hasOwnProperty(O)){this.sanitizedSomething=!0;continue}let z=x.value;pf[O]&&(z=Dh(z)),this.buf.push(" ",S,'="',Rd(z),'"')}return this.buf.push(">"),!0}endElement(n){const o=td(n).toLowerCase();mm.hasOwnProperty(o)&&!Ju.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(n){this.buf.push(Rd(n))}}function $_(e){const n=e.nextSibling;if(n&&e!==n.previousSibling)throw Tg(n);return n}function H_(e){const n=e.firstChild;if(n&&function G_(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,n))throw Tg(n);return n}function td(e){const n=e.nodeName;return"string"==typeof n?n:"FORM"}function Tg(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const gm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Iv=/([^\#-~ |!])/g;function Rd(e){return e.replace(/&/g,"&amp;").replace(gm,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Iv,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mh;function ff(e,n){let o=null;try{Mh=Mh||function fm(e){const n=new Su(e);return function hf(){try{return!!(new window.DOMParser).parseFromString(wh(""),"text/html")}catch{return!1}}()?new Tv(n):n}(e);let u=n?String(n):"";o=Mh.getInertBodyElement(u);let g=5,x=u;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,u=x,x=o.innerHTML,o=Mh.getInertBodyElement(u)}while(u!==x);return wh((new j_).sanitizeChildren(Oc(o)||o))}finally{if(o){const u=Oc(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Oc(e){return"content"in e&&function _m(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var nd=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(nd||{});function Rc(e){const n=Ih();return n?ap(n.sanitize(nd.HTML,e)||""):_s(e,"HTML")?ap(rc(e)):ff(Md(),Ki(e))}function Iu(e){const n=Ih();return n?n.sanitize(nd.URL,e)||"":_s(e,"URL")?rc(e):Dh(Ki(e))}function mf(e){const n=Ih();if(n)return df(n.sanitize(nd.RESOURCE_URL,e)||"");if(_s(e,"ResourceURL"))return df(rc(e));throw new wn(904,!1)}function Mg(e,n,o){return function W_(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?mf:Iu}(n,o)(e)}function Ih(){const e=pn();return e&&e[Hc].sanitizer}const kv=/^>|^->|<!--|-->|--!>|<!-$/g,K_=/(<|>)/g,r="\u200b$1\u200b";function Ht(e){return e.ownerDocument.defaultView}function Pt(e){return e instanceof Function?e():e}function Jt(e){return"browser"===(e??Vn(Js)).get(_g)}var ti=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ti||{});let hr;function Ji(e,n){return hr(e,n)}function Po(e,n,o,u,g){if(null!=u){let x,S=!1;pa(u)?x=u:ha(u)&&(S=!0,u=u[po]);const O=Gr(u);0===e&&null!==o?null==g?js(n,o,O):bo(n,o,O,g||null,!0):1===e&&null!==o?bo(n,o,O,g||null,!0):2===e?function up(e,n,o){const u=bs(e,n);u&&function Gi(e,n,o,u){e.removeChild(n,o,u)}(e,u,n,o)}(n,O,S):3===e&&n.destroyNode(O),null!=x&&function Ov(e,n,o,u,g){const x=o[ol];x!==Gr(o)&&Po(n,e,u,x,g);for(let O=Ss;O<o.length;O++){const z=o[O];dp(z[Yn],z,e,n,u,x)}}(n,e,x,o,g)}}function gr(e,n){return e.createComment(function t(e){return e.replace(kv,n=>n.replace(K_,r))}(n))}function Sr(e,n,o){return e.createElement(n,o)}function to(e,n){n[Hc].changeDetectionScheduler?.notify(8),dp(e,n,n[rr],2,null,null)}function vs(e,n){const o=e[mu],u=n[es];(ha(u)||n[To]!==u[es][To])&&(e[Hi]|=Cf.HasTransplantedViews),null===o?e[mu]=[n]:o.push(n)}function Pa(e,n){const o=e[mu],u=o.indexOf(n);o.splice(u,1)}function yr(e,n){if(e.length<=Ss)return;const o=Ss+n,u=e[o];if(u){const g=u[Yd];null!==g&&g!==e&&Pa(g,u),n>0&&(e[o-1][Ec]=u[Ec]);const x=ka(e,Ss+n);!function fo(e,n){to(e,n),n[po]=null,n[Ys]=null}(u[Yn],u);const S=x[fu];null!==S&&S.detachView(x[Yn]),u[es]=null,u[Ec]=null,u[Hi]&=-129}return u}function Vo(e,n){if(!(256&n[Hi])){const o=n[rr];o.destroyNode&&dp(e,n,o,3,null,null),function vo(e){let n=e[zh];if(!n)return ea(e[Yn],e);for(;n;){let o=null;if(ha(n))o=n[zh];else{const u=n[Ss];u&&(o=u)}if(!o){for(;n&&!n[Ec]&&n!==e;)ha(n)&&ea(n[Yn],n),n=n[es];null===n&&(n=e),ha(n)&&ea(n[Yn],n),o=n&&n[Ec]}n=o}}(n)}}function ea(e,n){if(256&n[Hi])return;const o=Te(null);try{n[Hi]&=-129,n[Hi]|=256,n[Jl]&&An(n[Jl]),function Uo(e,n){let o;if(null!=e&&null!=(o=e.destroyHooks))for(let u=0;u<o.length;u+=2){const g=n[o[u]];if(!(g instanceof xu)){const x=o[u+1];if(Array.isArray(x))for(let S=0;S<x.length;S+=2){const O=g[x[S]],z=x[S+1];tc(4,O,z);try{z.call(O)}finally{tc(5,O,z)}}else{tc(4,g,x);try{x.call(g)}finally{tc(5,g,x)}}}}}(e,n),function Wr(e,n){const o=e.cleanup,u=n[Zd];if(null!==o)for(let x=0;x<o.length-1;x+=2)if("string"==typeof o[x]){const S=o[x+3];S>=0?u[S]():u[-S].unsubscribe(),x+=2}else o[x].call(u[o[x+1]]);null!==u&&(n[Zd]=null);const g=n[md];if(null!==g){n[md]=null;for(let x=0;x<g.length;x++)(0,g[x])()}}(e,n),1===n[Yn].type&&n[rr].destroy();const u=n[Yd];if(null!==u&&pa(n[es])){u!==n[es]&&Pa(u,n);const g=n[fu];null!==g&&g.detachView(e)}!function pv(e){rg.delete(e[bp])}(n)}finally{Te(o)}}function ma(e,n,o){return function Mo(e,n,o){let u=n;for(;null!==u&&168&u.type;)u=(n=u).parent;if(null===u)return o[po];{const{componentOffset:g}=u;if(g>-1){const{encapsulation:x}=e.data[u.directiveStart+g];if(x===Al.None||x===Al.Emulated)return null}return al(u,o)}}(e,n.parent,o)}function bo(e,n,o,u,g){e.insertBefore(n,o,u,g)}function js(e,n,o){e.appendChild(n,o)}function Os(e,n,o,u,g){null!==u?bo(e,n,o,u,g):js(e,n,o)}function bs(e,n){return e.parentNode(n)}function Ah(e,n,o){return kh(e,n,o)}let gf,kh=function lp(e,n,o){return 40&e.type?al(e,o):null};function cp(e,n,o,u){const g=ma(e,u,n),x=n[rr],O=Ah(u.parent||n[Ys],u,n);if(null!=g)if(Array.isArray(o))for(let z=0;z<o.length;z++)Os(x,g,o[z],O,!1);else Os(x,g,o,O,!1);void 0!==gf&&gf(x,u,n,o,g)}function Pd(e,n){if(null!==n){const o=n.type;if(3&o)return al(n,e);if(4&o)return Pc(-1,e[n.index]);if(8&o){const u=n.child;if(null!==u)return Pd(e,u);{const g=e[n.index];return pa(g)?Pc(-1,g):Gr(g)}}if(32&o)return Ji(n,e)()||Gr(e[n.index]);{const u=vm(e,n);return null!==u?Array.isArray(u)?u[0]:Pd(vu(e[To]),u):Pd(e,n.next)}}return null}function vm(e,n){return null!==n?e[To][Ys].projection[n.projection]:null}function Pc(e,n){const o=Ss+e+1;if(o<n.length){const u=n[o],g=u[Yn].firstChild;if(null!==g)return Pd(u,g)}return n[ol]}function _f(e,n,o,u,g,x,S){for(;null!=o;){if(128===o.type){o=o.next;continue}const O=u[o.index],z=o.type;if(S&&0===n&&(O&&ks(Gr(O),u),o.flags|=2),32&~o.flags)if(8&z)_f(e,n,o.child,u,g,x,!1),Po(n,e,g,O,x);else if(32&z){const Y=Ji(o,u);let se;for(;se=Y();)Po(n,e,g,se,x);Po(n,e,g,O,x)}else 16&z?bm(e,n,u,o,g,x):Po(n,e,g,O,x);o=S?o.projectionNext:o.next}}function dp(e,n,o,u,g,x){_f(o,u,e.firstChild,n,g,x,!1)}function bm(e,n,o,u,g,x){const S=o[To],z=S[Ys].projection[u.projection];if(Array.isArray(z))for(let Y=0;Y<z.length;Y++)Po(n,e,g,z[Y],x);else{let Y=z;const se=S[es];Wf(u)&&(Y.flags|=128),_f(e,n,Y,se,g,x,!0)}}function hp(e,n,o){""===o?e.removeAttribute(n,"class"):e.setAttribute(n,"class",o)}function xm(e,n,o){const{mergedAttrs:u,classes:g,styles:x}=o;null!==u&&Uu(e,n,u),null!==g&&hp(e,n,g),null!==x&&function jl(e,n,o){e.setAttribute(n,"style",o)}(e,n,x)}const ur={};function Nd(e=1){Z_(Er(),pn(),Ra()+e,!1)}function Z_(e,n,o,u){if(!u)if(3&~n[Hi]){const x=e.preOrderHooks;null!==x&&Xh(n,x,0,o)}else{const x=e.preOrderCheckHooks;null!==x&&Fp(n,x,o)}Ac(o)}function wm(e,n=Wi.Default){const o=pn();return null===o?qi(e,n):Bf(xr(),o,Ni(e),n)}function h0(){throw new Error("invalid")}function p0(e,n,o,u,g,x){const S=Te(null);try{let O=null;g&Va.SignalBased&&(O=n[u][ge]),null!==O&&void 0!==O.transformFn&&(x=O.transformFn(x)),g&Va.HasDecoratorInputTransform&&(x=e.inputTransforms[u].call(n,x)),null!==e.setInput?e.setInput(n,O,x,o,u):th(n,O,u,x)}finally{Te(S)}}function q_(e,n,o,u,g,x,S,O,z,Y,se){const Ie=n.blueprint.slice();return Ie[po]=g,Ie[Hi]=204|u,(null!==Y||e&&2048&e[Hi])&&(Ie[Hi]|=2048),ih(Ie),Ie[es]=Ie[qd]=e,Ie[No]=o,Ie[Hc]=S||e&&e[Hc],Ie[rr]=O||e&&e[rr],Ie[Ms]=z||e&&e[Ms]||null,Ie[Ys]=x,Ie[bp]=function Kf(){return hv++}(),Ie[ja]=se,Ie[Uh]=Y,Ie[To]=2==n.type?e[To]:Ie,Ie}function yf(e,n,o,u,g){let x=e.data[n];if(null===x)x=function Rv(e,n,o,u,g){const x=nc(),S=Af(),z=e.data[n]=function yw(e,n,o,u,g,x){let S=n?n.injectorIndex:-1,O=0;return Xu()&&(O|=128),{type:o,index:u,insertBeforeIndex:null,injectorIndex:S,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:O,providerIndexes:0,value:g,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?x:x&&x.parent,o,n,u,g);return null===e.firstChild&&(e.firstChild=z),null!==x&&(S?null==x.child&&null!==z.parent&&(x.child=z):null===x.next&&(x.next=z,z.prev=x)),z}(e,n,o,u,g),function kf(){return ki.lFrame.inI18n}()&&(x.flags|=32);else if(64&x.type){x.type=o,x.value=u,x.attrs=g;const S=function oh(){const e=ki.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();x.injectorIndex=null===S?-1:S.injectorIndex}return Oo(x,!0),x}function Ig(e,n,o,u){if(0===o)return-1;const g=n.length;for(let x=0;x<o;x++)n.push(u),e.blueprint.push(u),e.data.push(null);return g}function f0(e,n,o,u,g){const x=Ra(),S=2&u;try{Ac(-1),S&&n.length>Pi&&Z_(e,n,Pi,!1),tc(S?2:0,g),o(u,g)}finally{Ac(x),tc(S?3:1,g)}}function Pv(e,n,o){if(Jd(n)){const u=Te(null);try{const x=n.directiveEnd;for(let S=n.directiveStart;S<x;S++){const O=e.data[S];O.contentQueries&&O.contentQueries(1,o[S],S)}}finally{Te(u)}}}function Lv(e,n,o){If()&&(function Tw(e,n,o,u){const g=o.directiveStart,x=o.directiveEnd;Cc(o)&&function Aw(e,n,o){const u=al(n,e),g=m0(o);let S=16;o.signals?S=4096:o.onPush&&(S=64);const O=Q_(e,q_(e,g,null,S,u,n,null,e[Hc].rendererFactory.createRenderer(u,o),null,null,null));e[n.index]=O}(n,o,e.data[g+o.componentOffset]),e.firstCreatePass||Lf(o,n),ks(u,n);const S=o.initialInputs;for(let O=g;O<x;O++){const z=e.data[O],Y=ph(n,e,O,o);ks(Y,n),null!==S&&x0(0,O-g,Y,z,0,S),Is(z)&&(Pl(o.index,n)[No]=ph(n,e,O,o))}}(e,n,o,al(o,n)),!(64&~o.flags)&&v0(e,n,o))}function Fv(e,n,o=al){const u=n.localNames;if(null!==u){let g=n.index+1;for(let x=0;x<u.length;x+=2){const S=u[x+1],O=-1===S?o(n,e):e[S];e[g++]=O}}}function m0(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Nv(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Nv(e,n,o,u,g,x,S,O,z,Y,se){const Ie=Pi+u,lt=Ie+g,ht=function hw(e,n){const o=[];for(let u=0;u<n;u++)o.push(u<e?null:ur);return o}(Ie,lt),Ft="function"==typeof Y?Y():Y;return ht[Yn]={type:e,blueprint:ht,template:o,queries:null,viewQuery:O,declTNode:n,data:ht.slice().fill(null,Ie),bindingStartIndex:Ie,expandoStartIndex:lt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:z,consts:Ft,incompleteFirstPass:!1,ssrId:se}}let g0=()=>null;function _0(e,n,o,u,g){for(let x in n){if(!n.hasOwnProperty(x))continue;const S=n[x];if(void 0===S)continue;u??={};let O,z=Va.None;Array.isArray(S)?(O=S[0],z=S[1]):O=S;let Y=x;if(null!==g){if(!g.hasOwnProperty(x))continue;Y=g[x]}0===e?y0(u,o,Y,O,z):y0(u,o,Y,O)}return u}function y0(e,n,o,u,g){let x;e.hasOwnProperty(o)?(x=e[o]).push(n,u):x=e[o]=[n,u],void 0!==g&&x.push(g)}function Lc(e,n,o,u,g,x,S,O){const z=al(n,o);let se,Y=n.inputs;!O&&null!=Y&&(se=Y[u])?(jv(e,o,se,u,g),Cc(n)&&function xw(e,n){const o=Pl(n,e);16&o[Hi]||(o[Hi]|=64)}(o,n.index)):3&n.type&&(u=function bw(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),g=null!=S?S(g,n.value||"",u):g,x.setProperty(z,u,g))}function Bv(e,n,o,u){if(If()){const g=null===u?null:{"":-1},x=function Dw(e,n){const o=e.directiveRegistry;let u=null,g=null;if(o)for(let x=0;x<o.length;x++){const S=o[x];if(Kd(n,S.selectors,!1))if(u||(u=[]),Is(S))if(null!==S.findHostDirectiveDefs){const O=[];g=g||new Map,S.findHostDirectiveDefs(S,O,g),u.unshift(...O,S),Vv(e,n,O.length)}else u.unshift(S),Vv(e,n,0);else g=g||new Map,S.findHostDirectiveDefs?.(S,u,g),u.push(S)}return null===u?null:[u,g]}(e,o);let S,O;null===x?S=O=null:[S,O]=x,null!==S&&zv(e,n,o,S,g,O),g&&function Mw(e,n,o){if(n){const u=e.localNames=[];for(let g=0;g<n.length;g+=2){const x=o[n[g+1]];if(null==x)throw new wn(-301,!1);u.push(n[g],x)}}}(o,u,g)}o.mergedAttrs=Oa(o.mergedAttrs,o.attrs)}function zv(e,n,o,u,g,x){for(let Y=0;Y<u.length;Y++)qm(Lf(o,n),e,u[Y].type);!function b0(e,n,o){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+o,e.providerIndexes=n}(o,e.data.length,u.length);for(let Y=0;Y<u.length;Y++){const se=u[Y];se.providersResolver&&se.providersResolver(se)}let S=!1,O=!1,z=Ig(e,n,u.length,null);for(let Y=0;Y<u.length;Y++){const se=u[Y];o.mergedAttrs=Oa(o.mergedAttrs,se.hostAttrs),Iw(e,o,n,z,se),Sw(z,se,g),null!==se.contentQueries&&(o.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=64);const Ie=se.type.prototype;!S&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((e.preOrderHooks??=[]).push(o.index),S=!0),!O&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(o.index),O=!0),z++}!function vw(e,n,o){const g=n.directiveEnd,x=e.data,S=n.attrs,O=[];let z=null,Y=null;for(let se=n.directiveStart;se<g;se++){const Ie=x[se],lt=o?o.get(Ie):null,Ft=lt?lt.outputs:null;z=_0(0,Ie.inputs,se,z,lt?lt.inputs:null),Y=_0(1,Ie.outputs,se,Y,Ft);const vn=null===z||null===S||Gc(n)?null:kw(z,se,S);O.push(vn)}null!==z&&(z.hasOwnProperty("class")&&(n.flags|=8),z.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=O,n.inputs=z,n.outputs=Y}(e,o,x)}function v0(e,n,o){const u=o.directiveStart,g=o.directiveEnd,x=o.index,S=function Qy(){return ki.lFrame.currentDirectiveIndex}();try{Ac(x);for(let O=u;O<g;O++){const z=e.data[O],Y=n[O];Ap(O),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&Em(z,Y)}}finally{Ac(-1),Ap(S)}}function Em(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Vv(e,n,o){n.componentOffset=o,(e.components??=[]).push(n.index)}function Sw(e,n,o){if(o){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)o[n.exportAs[u]]=e;Is(n)&&(o[""]=e)}}function Iw(e,n,o,u,g){e.data[u]=g;const x=g.factory||(g.factory=Il(g.type)),S=new xu(x,Is(g),wm);e.blueprint[u]=S,o[u]=S,function Ew(e,n,o,u,g){const x=g.hostBindings;if(x){let S=e.hostBindingOpCodes;null===S&&(S=e.hostBindingOpCodes=[]);const O=~n.index;(function Cw(e){let n=e.length;for(;n>0;){const o=e[--n];if("number"==typeof o&&o<0)return o}return 0})(S)!=O&&S.push(O),S.push(o,u,x)}}(e,n,u,Ig(e,o,g.hostVars,ur),g)}function Bd(e,n,o,u,g,x){const S=al(e,n);!function Y_(e,n,o,u,g,x,S){if(null==x)e.removeAttribute(n,g,o);else{const O=null==S?Ki(x):S(x,u||"",g);e.setAttribute(n,g,O,o)}}(n[rr],S,x,e.value,o,u,g)}function x0(e,n,o,u,g,x){const S=x[n];if(null!==S)for(let O=0;O<S.length;)p0(u,o,S[O++],S[O++],S[O++],S[O++])}function kw(e,n,o){let u=null,g=0;for(;g<o.length;){const x=o[g];if(0!==x)if(5!==x){if("number"==typeof x)break;if(e.hasOwnProperty(x)){null===u&&(u=[]);const S=e[x];for(let O=0;O<S.length;O+=3)if(S[O]===n){u.push(x,S[O+1],S[O+2],o[g+1]);break}}g+=2}else g+=2;else g+=4}return u}function w0(e,n,o,u){return[e,!0,0,n,null,u,null,o,null,null]}function E0(e,n){const o=e.contentQueries;if(null!==o){const u=Te(null);try{for(let g=0;g<o.length;g+=2){const S=o[g+1];if(-1!==S){const O=e.data[S];Wh(o[g]),O.contentQueries(2,n[S],S)}}}finally{Te(u)}}}function Q_(e,n){return e[zh]?e[vp][Ec]=n:e[zh]=n,e[vp]=n,n}function Uv(e,n,o){Wh(0);const u=Te(null);try{n(e,o)}finally{Te(u)}}function C0(e){return e[Zd]??=[]}function T0(e){return e.cleanup??=[]}function D0(e,n,o){return(null===e||Is(e))&&(o=function Nm(e){for(;Array.isArray(e);){if("object"==typeof e[jh])return e;e=e[po]}return null}(o[n.index])),o[rr]}function J_(e,n){const o=e[Ms],u=o?o.get(Ro,null):null;u&&u.handleError(n)}function jv(e,n,o,u,g){for(let x=0;x<o.length;){const S=o[x++],O=o[x++],z=o[x++];p0(e.data[S],n[S],u,O,z,g)}}function Ow(e,n){const o=Pl(n,e),u=o[Yn];!function Rw(e,n){for(let o=n.length;o<e.blueprint.length;o++)n.push(e.blueprint[o])}(u,o);const g=o[po];null!==g&&null===o[ja]&&(o[ja]=sm(g,o[Ms])),Gv(u,o,o[No])}function Gv(e,n,o){Op(n);try{const u=e.viewQuery;null!==u&&Uv(1,u,o);const g=e.template;null!==g&&f0(e,n,g,1,o),e.firstCreatePass&&(e.firstCreatePass=!1),n[fu]?.finishViewCreation(e),e.staticContentQueries&&E0(e,n),e.staticViewQueries&&Uv(2,e.viewQuery,o);const x=e.components;null!==x&&function Pw(e,n){for(let o=0;o<n.length;o++)Ow(e,n[o])}(n,x)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{n[Hi]&=-5,Wm()}}function Cm(e,n,o,u){const g=Te(null);try{const x=n.tView,z=q_(e,x,o,4096&e[Hi]?4096:16,null,n,null,null,u?.injector??null,u?.embeddedViewInjector??null,u?.dehydratedView??null);z[Yd]=e[n.index];const se=e[fu];return null!==se&&(z[fu]=se.createEmbeddedView(x)),Gv(x,z,o),z}finally{Te(g)}}function M0(e,n){const o=Ss+n;if(o<e.length)return e[o]}function vf(e,n){return!n||null===n.firstChild||Wf(e)}function Tm(e,n,o,u=!0){const g=n[Yn];if(function zo(e,n,o,u){const g=Ss+u,x=o.length;u>0&&(o[g-1][Ec]=n),u<x-Ss?(n[Ec]=o[g],ad(o,Ss+u,n)):(o.push(n),n[Ec]=null),n[es]=o;const S=n[Yd];null!==S&&o!==S&&vs(S,n);const O=n[fu];null!==O&&O.insertView(e),zm(n),n[Hi]|=128}(g,n,e,o),u){const S=Pc(o,e),O=n[rr],z=bs(O,e[ol]);null!==z&&function lo(e,n,o,u,g,x){u[po]=g,u[Ys]=n,dp(e,u,o,1,g,x)}(g,e[Ys],O,n,z,S)}const x=n[ja];null!==x&&null!==x.firstChild&&(x.firstChild=null)}function $v(e,n){const o=yr(e,n);return void 0!==o&&Vo(o[Yn],o),o}function Ag(e,n,o,u,g=!1){for(;null!==o;){if(128===o.type){o=g?o.projectionNext:o.next;continue}const x=n[o.index];null!==x&&u.push(Gr(x)),pa(x)&&S0(x,u);const S=o.type;if(8&S)Ag(e,n,o.child,u);else if(32&S){const O=Ji(o,n);let z;for(;z=O();)u.push(z)}else if(16&S){const O=vm(n,o);if(Array.isArray(O))u.push(...O);else{const z=vu(n[To]);Ag(z[Yn],z,O,u,!0)}}o=g?o.projectionNext:o.next}return u}function S0(e,n){for(let o=Ss;o<e.length;o++){const u=e[o],g=u[Yn].firstChild;null!==g&&Ag(u[Yn],u,g,n)}e[ol]!==e[po]&&n.push(e[ol])}let I0=[];const Bw={...st,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Mf(e.lView)},consumerOnSignalRead(){this.lView[Jl]=this}},Vw={...st,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=vu(e.lView);for(;n&&!A0(n[Yn]);)n=vu(n);n&&Dp(n)},consumerOnSignalRead(){this.lView[Jl]=this}};function A0(e){return 2!==e.type}const Uw=100;function ey(e,n=!0,o=0){const u=e[Hc],g=u.rendererFactory;g.begin?.();try{!function jw(e,n){const o=Zu();try{Ip(!0),k0(e,n);let u=0;for(;yu(e);){if(u===Uw)throw new wn(103,!1);u++,k0(e,1)}}finally{Ip(o)}}(e,o)}catch(S){throw n&&J_(e,S),S}finally{g.end?.(),u.inlineEffectRunner?.flush()}}function jC(e,n,o,u){const g=n[Hi];if(!(256&~g))return;n[Hc].inlineEffectRunner?.flush(),Op(n);let O=!0,z=null,Y=null;A0(e)?(Y=function Lw(e){return e[Jl]??function Fw(e){const n=I0.pop()??Object.create(Bw);return n.lView=e,n}(e)}(n),z=zt(Y)):null===function nt(){return l}()?(O=!1,Y=function zw(e){const n=e[Jl]??Object.create(Vw);return n.lView=e,n}(n),z=zt(Y)):n[Jl]&&(An(n[Jl]),n[Jl]=null);try{ih(n),function Gm(e){return ki.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==o&&f0(e,n,o,2,u);const se=!(3&~g);if(se){const ht=e.preOrderCheckHooks;null!==ht&&Fp(n,ht,null)}else{const ht=e.preOrderHooks;null!==ht&&Xh(n,ht,0,null),Km(n,0)}if(function GC(e){for(let n=Tu(e);null!==n;n=cg(n)){if(!(n[Hi]&Cf.HasTransplantedViews))continue;const o=n[mu];for(let u=0;u<o.length;u++)Dp(o[u])}}(n),Gw(n,0),null!==e.contentQueries&&E0(e,n),se){const ht=e.contentCheckHooks;null!==ht&&Fp(n,ht)}else{const ht=e.contentHooks;null!==ht&&Xh(n,ht,1),Km(n,1)}!function dw(e,n){const o=e.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const g=o[u];if(g<0)Ac(~g);else{const x=g,S=o[++u],O=o[++u];Jg(S,x),O(2,n[x])}}}finally{Ac(-1)}}(e,n);const Ie=e.components;null!==Ie&&Hw(n,Ie,0);const lt=e.viewQuery;if(null!==lt&&Uv(2,lt,u),se){const ht=e.viewCheckHooks;null!==ht&&Fp(n,ht)}else{const ht=e.viewHooks;null!==ht&&Xh(n,ht,2),Km(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[Qd]){for(const ht of n[Qd])ht();n[Qd]=null}n[Hi]&=-73}catch(se){throw Mf(n),se}finally{null!==Y&&(Rt(Y,z),O&&function Nw(e){e.lView[Jl]!==e&&(e.lView=null,I0.push(e))}(Y)),Wm()}}function Gw(e,n){for(let o=Tu(e);null!==o;o=cg(o))for(let u=Ss;u<o.length;u++)$w(o[u],n)}function $C(e,n,o){$w(Pl(n,e),o)}function $w(e,n){Ll(e)&&k0(e,n)}function k0(e,n){const u=e[Yn],g=e[Hi],x=e[Jl];let S=!!(0===n&&16&g);if(S||=!!(64&g&&0===n),S||=!!(1024&g),S||=!(!x?.dirty||!On(x)),S||=!1,x&&(x.dirty=!1),e[Hi]&=-9217,S)jC(u,e,u.template,e[No]);else if(8192&g){Gw(e,1);const O=u.components;null!==O&&Hw(e,O,1)}}function Hw(e,n,o){for(let u=0;u<n.length;u++)$C(e,n[u],o)}function ny(e,n){const o=Zu()?64:1088;for(e[Hc].changeDetectionScheduler?.notify(n);e;){e[Hi]|=o;const u=vu(e);if(Dc(e)&&!u)return e;e=u}return null}class iy{get rootNodes(){const n=this._lView,o=n[Yn];return Ag(o,n,o.firstChild,[])}constructor(n,o,u=!0){this._lView=n,this._cdRefInjectingView=o,this.notifyErrorHandler=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[No]}set context(n){this._lView[No]=n}get destroyed(){return!(256&~this._lView[Hi])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[es];if(pa(n)){const o=n[8],u=o?o.indexOf(this):-1;u>-1&&(yr(n,u),ka(o,u))}this._attachedToViewContainer=!1}Vo(this._lView[Yn],this._lView)}onDestroy(n){rh(this._lView,n)}markForCheck(){ny(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Hi]&=-129}reattach(){zm(this._lView),this._lView[Hi]|=128}detectChanges(){this._lView[Hi]|=1024,ey(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=Dc(this._lView),o=this._lView[Yd];null!==o&&!n&&Pa(o,this._lView),to(this._lView[Yn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new wn(902,!1);this._appRef=n;const o=Dc(this._lView),u=this._lView[Yd];null!==u&&!o&&vs(u,this._lView),zm(this._lView)}}let ry=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=XC}return e})();const HC=ry,WC=class extends HC{constructor(n,o,u){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,u){const g=Cm(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:o,dehydratedView:u});return new iy(g)}};function XC(){return Hv(xr(),pn())}function Hv(e,n){return 4&e.type?new WC(n,e,Cu(e,n)):null}let ib=()=>null;function xf(e,n){return ib(e,n)}class Mm{}const hy=new zi("",{providedIn:"root",factory:()=>!1}),rb=new zi("");class N1{}class Y0{}class z1{resolveComponentFactory(n){throw function B1(e){const n=Error(`No component factory found for ${Ao(e)}.`);return n.ngComponent=e,n}(n)}}class py{static#e=this.NULL=new z1}class ob{}let V1=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function U1(){const e=pn(),o=Pl(xr().index,e);return(ha(o)?o:e)[rr]}()}return e})(),j1=(()=>{class e{static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:()=>null})}return e})();const J0=new Set;function oc(e){J0.has(e)||(J0.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Bg(e){let n=!0;return setTimeout(()=>{n&&(n=!1,e())}),"function"==typeof ho.requestAnimationFrame&&ho.requestAnimationFrame(()=>{n&&(n=!1,e())}),()=>{n=!1}}function ex(e){let n=!0;return queueMicrotask(()=>{n&&e()}),()=>{n=!1}}function tx(...e){}class xs{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ha(!1),this.onMicrotaskEmpty=new Ha(!1),this.onStable=new Ha(!1),this.onError=new Ha(!1),typeof Zone>"u")throw new wn(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!u&&o,g.shouldCoalesceRunChangeDetection=u,g.callbackScheduled=!1,function $1(e){const n=()=>{!function ab(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{Bg(()=>{e.callbackScheduled=!1,lb(e),e.isCheckStableRunning=!0,sb(e),e.isCheckStableRunning=!1})}),lb(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,g,x,S,O)=>{if(function H1(e){return rx(e,"__ignore_ng_zone__")}(O))return o.invokeTask(g,x,S,O);try{return nx(e),o.invokeTask(g,x,S,O)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||e.shouldCoalesceRunChangeDetection)&&n(),ix(e)}},onInvoke:(o,u,g,x,S,O,z)=>{try{return nx(e),o.invoke(g,x,S,O,z)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function W1(e){return rx(e,"__scheduler_tick__")}(O)&&n(),ix(e)}},onHasTask:(o,u,g,x)=>{o.hasTask(g,x),u===g&&("microTask"==x.change?(e._hasPendingMicrotasks=x.microTask,lb(e),sb(e)):"macroTask"==x.change&&(e.hasPendingMacrotasks=x.macroTask))},onHandleError:(o,u,g,x)=>(o.handleError(g,x),e.runOutsideAngular(()=>e.onError.emit(x)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new wn(909,!1)}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new wn(909,!1)}run(n,o,u){return this._inner.run(n,o,u)}runTask(n,o,u,g){const x=this._inner,S=x.scheduleEventTask("NgZoneEvent: "+g,n,G1,tx,tx);try{return x.runTask(S,o,u)}finally{x.cancelTask(S)}}runGuarded(n,o,u){return this._inner.runGuarded(n,o,u)}runOutsideAngular(n){return this._outer.run(n)}}const G1={};function sb(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lb(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function nx(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ix(e){e._nesting--,sb(e)}class cb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ha,this.onMicrotaskEmpty=new Ha,this.onStable=new Ha,this.onError=new Ha}run(n,o,u){return n.apply(o,u)}runGuarded(n,o,u){return n.apply(o,u)}runOutsideAngular(n){return n()}runTask(n,o,u,g){return n.apply(o,u)}}function rx(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}var Gl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Gl||{});const ox={destroy(){}};function zg(e,n){!n&&kl();const o=n?.injector??Vn(Js);return Jt(o)?(oc("NgAfterRender"),db(e,o,!1,n?.phase??Gl.MixedReadWrite)):ox}function sx(e,n){!n&&kl();const o=n?.injector??Vn(Js);return Jt(o)?(oc("NgAfterNextRender"),db(e,o,!0,n?.phase??Gl.MixedReadWrite)):ox}function db(e,n,o,u){const g=function K1(e,n){if(e instanceof Function)switch(n){case Gl.EarlyRead:return{earlyRead:e};case Gl.Write:return{write:e};case Gl.MixedReadWrite:return{mixedReadWrite:e};case Gl.Read:return{read:e}}return e}(e,u),x=n.get(fy),S=x.handler??=new q1,O=[],z=[],Y=()=>{for(const ht of z)S.unregister(ht);se()},se=n.get(mh).onDestroy(Y);let Ie=0;const lt=(ht,Ft)=>{if(!Ft)return;const vn=o?(...li)=>(Ie--,Ie<1&&Y(),Ft(...li)):Ft,Qn=Ua(n,()=>new Z1(ht,O,vn));S.register(Qn),z.push(Qn),Ie++};return lt(Gl.EarlyRead,g.earlyRead),lt(Gl.Write,g.write),lt(Gl.MixedReadWrite,g.mixedReadWrite),lt(Gl.Read,g.read),{destroy:Y}}class Z1{constructor(n,o,u){this.phase=n,this.pipelinedArgs=o,this.callbackFn=u,this.zone=Vn(xs),this.errorHandler=Vn(Ro,{optional:!0}),Vn(Mm,{optional:!0})?.notify(6)}invoke(){try{const n=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,n)}catch(n){this.errorHandler?.handleError(n)}}}class q1{constructor(){this.executingCallbacks=!1,this.buckets={[Gl.EarlyRead]:new Set,[Gl.Write]:new Set,[Gl.MixedReadWrite]:new Set,[Gl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const o of n)o.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let fy=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const o=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const u of o)u()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:()=>new e})}return e})();function pp(e){return!!pe(e)}function gy(e,n,o){let u=o?e.styles:null,g=o?e.classes:null,x=0;if(null!==n)for(let S=0;S<n.length;S++){const O=n[S];"number"==typeof O?x=O:1==x?g=Ja(g,O):2==x&&(u=Ja(u,O+": "+n[++S]+";"))}o?e.styles=u:e.stylesWithoutHost=u,o?e.classes=g:e.classesWithoutHost=g}class cx extends py{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const o=B(n);return new jg(o,this.ngModule)}}function ux(e,n){const o=[];for(const u in e){if(!e.hasOwnProperty(u))continue;const g=e[u];if(void 0===g)continue;const x=Array.isArray(g),S=x?g[0]:g;o.push(n?{propName:S,templateName:u,isSignal:!!((x?g[1]:Va.None)&Va.SignalBased)}:{propName:S,templateName:u})}return o}class jg extends Y0{get inputs(){const n=this.componentDef,o=n.inputTransforms,u=ux(n.inputs,!0);if(null!==o)for(const g of u)o.hasOwnProperty(g.propName)&&(g.transform=o[g.propName]);return u}get outputs(){return ux(this.componentDef.outputs,!1)}constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=function we(e){return e.map(oe).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}create(n,o,u,g){const x=Te(null);try{let S=(g=g||this.ngModule)instanceof Tn?g:g?.injector;S&&null!==this.componentDef.getStandaloneInjector&&(S=this.componentDef.getStandaloneInjector(S)||S);const O=S?new wd(n,S):n,z=O.get(ob,null);if(null===z)throw new wn(407,!1);const Y=O.get(j1,null),lt={rendererFactory:z,sanitizer:Y,inlineEffectRunner:null,afterRenderEventManager:O.get(fy,null),changeDetectionScheduler:O.get(Mm,null)},ht=z.createRenderer(null,this.componentDef),Ft=this.componentDef.selectors[0][0]||"div",vn=u?function pw(e,n,o,u){const x=u.get(cf,!1)||o===Al.ShadowDom,S=e.selectRootElement(n,x);return function fw(e){g0(e)}(S),S}(ht,u,this.componentDef.encapsulation,O):Sr(ht,Ft,function J1(e){const n=e.toLowerCase();return"svg"===n?Ep:"math"===n?"math":null}(Ft));let Qn=512;this.componentDef.signals?Qn|=4096:this.componentDef.onPush||(Qn|=16);let li=null;null!==vn&&(li=sm(vn,O,!0));const Rn=Nv(0,null,null,1,0,null,null,null,null,null,null),pr=q_(null,Rn,null,Qn,null,null,lt,ht,O,null,li);let wo,is;Op(pr);try{const gl=this.componentDef;let Ou,Hy=null;gl.findHostDirectiveDefs?(Ou=[],Hy=new Map,gl.findHostDirectiveDefs(gl,Ou,Hy),Ou.push(gl)):Ou=[gl];const fI=function eE(e,n){const o=e[Yn],u=Pi;return e[u]=n,yf(o,u,2,"#host",null)}(pr,vn),CR=function tE(e,n,o,u,g,x,S){const O=g[Yn];!function nE(e,n,o,u){for(const g of e)n.mergedAttrs=Oa(n.mergedAttrs,g.hostAttrs);null!==n.mergedAttrs&&(gy(n,n.mergedAttrs,!0),null!==o&&xm(u,o,n))}(u,e,n,S);let z=null;null!==n&&(z=sm(n,g[Ms]));const Y=x.rendererFactory.createRenderer(n,o);let se=16;o.signals?se=4096:o.onPush&&(se=64);const Ie=q_(g,m0(o),null,se,g[e.index],e,x,Y,null,null,z);return O.firstCreatePass&&Vv(O,e,u.length-1),Q_(g,Ie),g[e.index]=Ie}(fI,vn,gl,Ou,pr,lt,ht);is=Cp(Rn,Pi),vn&&function rE(e,n,o,u){if(u)Uu(e,o,["ng-version","18.1.2"]);else{const{attrs:g,classes:x}=function f(e){const n=[],o=[];let u=1,g=2;for(;u<e.length;){let x=e[u];if("string"==typeof x)2===g?""!==x&&n.push(x,e[++u]):8===g&&o.push(x);else{if(!rl(g))break;g=x}u++}return{attrs:n,classes:o}}(n.selectors[0]);g&&Uu(e,o,g),x&&x.length>0&&hp(e,o,x.join(" "))}}(ht,gl,vn,u),void 0!==o&&function hx(e,n,o){const u=e.projection=[];for(let g=0;g<n.length;g++){const x=o[g];u.push(null!=x?Array.from(x):null)}}(is,this.ngContentSelectors,o),wo=function iE(e,n,o,u,g,x){const S=xr(),O=g[Yn],z=al(S,g);zv(O,g,S,o,null,u);for(let se=0;se<o.length;se++)ks(ph(g,O,S.directiveStart+se,S),g);v0(O,g,S),z&&ks(z,g);const Y=ph(g,O,S.directiveStart+S.componentOffset,S);if(e[No]=g[No]=Y,null!==x)for(const se of x)se(Y,n);return Pv(O,S,g),Y}(CR,gl,Ou,Hy,pr,[oE]),Gv(Rn,pr,null)}finally{Wm()}return new dx(this.componentType,wo,Cu(is,pr),pr,is)}finally{Te(x)}}}class dx extends N1{constructor(n,o,u,g,x){super(),this.location=u,this._rootLView=g,this._tNode=x,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new iy(g,void 0,!1),this.componentType=n}setInput(n,o){const u=this._tNode.inputs;let g;if(null!==u&&(g=u[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),o))return;const x=this._rootLView;jv(x[Yn],x,g,n,o),this.previousInputValues.set(n,o),ny(Pl(this._tNode.index,x),1)}}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function oE(){const e=xr();Lp(pn()[Yn],e)}let _y=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=sE}return e})();function sE(){return fx(xr(),pn())}const aE=_y,px=class extends aE{constructor(n,o,u){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=u}get element(){return Cu(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){const n=Nf(this._hostTNode,this._hostLView);if(Vp(n)){const o=dh(n,this._hostLView),u=qu(n);return new Us(o[Yn].data[u+8],o)}return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const o=fb(this._lContainer);return null!==o&&o[n]||null}get length(){return this._lContainer.length-Ss}createEmbeddedView(n,o,u){let g,x;"number"==typeof u?g=u:null!=u&&(g=u.index,x=u.injector);const S=xf(this._lContainer,n.ssrId),O=n.createEmbeddedViewImpl(o||{},x,S);return this.insertImpl(O,g,vf(this._hostTNode,S)),O}createComponent(n,o,u,g,x){const S=n&&!function gs(e){return"function"==typeof e}(n);let O;if(S)O=o;else{const Ft=o||{};O=Ft.index,u=Ft.injector,g=Ft.projectableNodes,x=Ft.environmentInjector||Ft.ngModuleRef}const z=S?n:new jg(B(n)),Y=u||this.parentInjector;if(!x&&null==z.ngModule){const vn=(S?Y:this.parentInjector).get(Tn,null);vn&&(x=vn)}const se=B(z.componentType??{}),Ie=xf(this._lContainer,se?.id??null),ht=z.create(Y,g,Ie?.firstChild??null,x);return this.insertImpl(ht.hostView,O,vf(this._hostTNode,Ie)),ht}insert(n,o){return this.insertImpl(n,o,!0)}insertImpl(n,o,u){const g=n._lView;if(function Tp(e){return pa(e[es])}(g)){const O=this.indexOf(n);if(-1!==O)this.detach(O);else{const z=g[es],Y=new px(z,z[Ys],z[es]);Y.detach(Y.indexOf(n))}}const x=this._adjustIndex(o),S=this._lContainer;return Tm(S,g,x,u),n.attachToViewContainerRef(),ad(yy(S),x,n),n}move(n,o){return this.insert(n,o)}indexOf(n){const o=fb(this._lContainer);return null!==o?o.indexOf(n):-1}remove(n){const o=this._adjustIndex(n,-1),u=yr(this._lContainer,o);u&&(ka(yy(this._lContainer),o),Vo(u[Yn],u))}detach(n){const o=this._adjustIndex(n,-1),u=yr(this._lContainer,o);return u&&null!=ka(yy(this._lContainer),o)?new iy(u):null}_adjustIndex(n,o=0){return n??this.length+o}};function fb(e){return e[8]}function yy(e){return e[8]||(e[8]=[])}function fx(e,n){let o;const u=n[e.index];return pa(u)?o=u:(o=w0(u,n,null,e),n[e.index]=o,Q_(n,o)),gx(o,n,e,u),new px(o,e,n)}let gx=function vy(e,n,o,u){if(e[ol])return;let g;g=8&o.type?Gr(u):function mx(e,n){const o=e[rr],u=o.createComment(""),g=al(n,e);return bo(o,bs(o,g),u,function id(e,n){return e.nextSibling(n)}(o,g),!1),u}(n,o),e[ol]=g},mb=()=>!1;class _b{constructor(n){this.queryList=n,this.matches=null}clone(){return new _b(this.queryList)}setDirty(){this.queryList.setDirty()}}class yb{constructor(n=[]){this.queries=n}createEmbeddedView(n){const o=n.queries;if(null!==o){const u=null!==n.contentQueries?n.contentQueries[0]:o.length,g=[];for(let x=0;x<u;x++){const S=o.getByIndex(x);g.push(this.queries[S.indexInDeclarationView].clone())}return new yb(g)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)null!==Eb(n,o).matches&&this.queries[o].setDirty()}}class _x{constructor(n,o,u=null){this.flags=o,this.read=u,this.predicate="string"==typeof n?function pE(e){return e.split(",").map(n=>n.trim())}(n):n}}class vb{constructor(n=[]){this.queries=n}elementStart(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let u=0;u<this.length;u++){const g=null!==o?o.length:0,x=this.getByIndex(u).embeddedTView(n,g);x&&(x.indexInDeclarationView=u,null!==o?o.push(x):o=[x])}return null!==o?new vb(o):null}template(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class bb{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new bb(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let g=0;g<u.length;g++){const x=u[g];this.matchTNodeWithReadOption(n,o,yx(o,x)),this.matchTNodeWithReadOption(n,o,Vf(o,n,x,!1,!1))}else u===ry?4&o.type&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,Vf(o,n,u,!1,!1))}matchTNodeWithReadOption(n,o,u){if(null!==u){const g=this.metadata.read;if(null!==g)if(g===Kr||g===_y||g===ry&&4&o.type)this.addMatch(o.index,-2);else{const x=Vf(o,n,g,!1,!1);null!==x&&this.addMatch(o.index,x)}else this.addMatch(o.index,u)}}addMatch(n,o){null===this.matches?this.matches=[n,o]:this.matches.push(n,o)}}function yx(e,n){const o=e.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===n)return o[u+1];return null}function vx(e,n,o,u){return-1===o?function dE(e,n){return 11&e.type?Cu(e,n):4&e.type?Hv(e,n):null}(n,e):-2===o?function hE(e,n,o){return o===Kr?Cu(n,e):o===ry?Hv(n,e):o===_y?fx(n,e):void 0}(e,n,u):ph(e,e[Yn],o,n)}function xb(e,n,o,u){const g=n[fu].queries[u];if(null===g.matches){const x=e.data,S=o.matches,O=[];for(let z=0;null!==S&&z<S.length;z+=2){const Y=S[z];O.push(Y<0?null:vx(n,x[Y],S[z+1],o.metadata.read))}g.matches=O}return g.matches}function by(e,n,o,u){const g=e.queries.getByIndex(o),x=g.matches;if(null!==x){const S=xb(e,n,g,o);for(let O=0;O<x.length;O+=2){const z=x[O];if(z>0)u.push(S[O/2]);else{const Y=x[O+1],se=n[-z];for(let Ie=Ss;Ie<se.length;Ie++){const lt=se[Ie];lt[Yd]===lt[es]&&by(lt[Yn],lt,Y,u)}if(null!==se[mu]){const Ie=se[mu];for(let lt=0;lt<Ie.length;lt++){const ht=Ie[lt];by(ht[Yn],ht,Y,u)}}}}}return u}function wb(e,n){return e[fu].queries[n].queryList}function xy(e,n,o){const u=new gh(!(4&~o));return function _w(e,n,o,u){const g=C0(n);g.push(o),e.firstCreatePass&&T0(e).push(u,g.length-1)}(e,n,u,u.destroy),(n[fu]??=new yb).queries.push(new _b(u))-1}function xx(e,n,o,u){const g=Er();if(g.firstCreatePass){const x=xr();wx(g,new _x(n,o,u),x.index),function fE(e,n){const o=e.contentQueries||(e.contentQueries=[]);n!==(o.length?o[o.length-1]:-1)&&o.push(e.queries.length-1,n)}(g,e),!(2&~o)&&(g.staticContentQueries=!0)}return xy(g,pn(),o)}function wx(e,n,o){null===e.queries&&(e.queries=new vb),e.queries.track(new bb(n,o))}function Eb(e,n){return e.queries.getByIndex(n)}function Ex(e,n){const o=e[Yn],u=Eb(o,n);return u.crossesNgTemplate?by(o,e,n,[]):xb(o,e,u,n)}function Cb(e){return"function"==typeof e&&void 0!==e[ge]}function Cx(e,n){oc("NgSignals");const o=function tn(e){const n=Object.create(_n);n.value=e;const o=()=>(rt(n),n.value);return o[ge]=n,o}(e),u=o[ge];return n?.equal&&(u.equal=n.equal),o.set=g=>ui(u,g),o.update=g=>function kt(e,n){bt()||Sn(),ui(e,n(e.value))}(u,g),o.asReadonly=Tx.bind(o),o}function Tx(){const e=this[ge];if(void 0===e.readonlyFn){const n=()=>this();n[ge]=e,e.readonlyFn=n}return e.readonlyFn}function Tb(e){return Cb(e)&&"function"==typeof e.set}function Db(e,n){let o;const u=Wt(()=>{o._dirtyCounter();const g=function Sb(e,n){const o=e._lView,u=e._queryIndex;if(void 0===o||void 0===u||4&o[Hi])return n?void 0:Nr;const g=wb(o,u),x=Ex(o,u);return g.reset(x,Hf),n?g.first:g._changesDetected||void 0===e._flatValue?e._flatValue=g.toArray():e._flatValue}(o,e);if(n&&void 0===g)throw new wn(-951,!1);return g});return o=u[ge],o._dirtyCounter=Cx(0),o._flatValue=void 0,u}function Dx(e,n){return function Mb(){return Db(!0,!1)}()}const Mx=(Dx.required=function gE(e,n){return function wf(){return Db(!0,!0)}()},Dx);function Pb(e){let n=function TE(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),o=!0;const u=[e];for(;n;){let g;if(Is(e))g=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new wn(903,!1);g=n.\u0275dir}if(g){if(o){u.push(g);const S=e;S.inputs=Cy(e.inputs),S.inputTransforms=Cy(e.inputTransforms),S.declaredInputs=Cy(e.declaredInputs),S.outputs=Cy(e.outputs);const O=g.hostBindings;O&&AE(e,O);const z=g.viewQuery,Y=g.contentQueries;if(z&&SE(e,z),Y&&IE(e,Y),DE(e,g),Nc(e.outputs,g.outputs),Is(g)&&g.data.animation){const se=e.data;se.animation=(se.animation||[]).concat(g.data.animation)}}const x=g.features;if(x)for(let S=0;S<x.length;S++){const O=x[S];O&&O.ngInherit&&O(e),O===Pb&&(o=!1)}}n=Object.getPrototypeOf(n)}!function ME(e){let n=0,o=null;for(let u=e.length-1;u>=0;u--){const g=e[u];g.hostVars=n+=g.hostVars,g.hostAttrs=Oa(g.hostAttrs,o=Oa(o,g.hostAttrs))}}(u)}function DE(e,n){for(const o in n.inputs){if(!n.inputs.hasOwnProperty(o)||e.inputs.hasOwnProperty(o))continue;const u=n.inputs[o];if(void 0!==u&&(e.inputs[o]=u,e.declaredInputs[o]=n.declaredInputs[o],null!==n.inputTransforms)){const g=Array.isArray(u)?u[0]:u;if(!n.inputTransforms.hasOwnProperty(g))continue;e.inputTransforms??={},e.inputTransforms[g]=n.inputTransforms[g]}}}function Cy(e){return e===ms?{}:e===Nr?[]:e}function SE(e,n){const o=e.viewQuery;e.viewQuery=o?(u,g)=>{n(u,g),o(u,g)}:n}function IE(e,n){const o=e.contentQueries;e.contentQueries=o?(u,g,x)=>{n(u,g,x),o(u,g,x)}:n}function AE(e,n){const o=e.hostBindings;e.hostBindings=o?(u,g)=>{n(u,g),o(u,g)}:n}function ct(e){const n=e.inputConfig,o={};for(const u in n)if(n.hasOwnProperty(u)){const g=n[u];Array.isArray(g)&&g[3]&&(o[u]=g[3])}e.inputTransforms=o}class Dt{}class dn{}function cn(e,n){return new Di(e,n??null,[])}class Di extends Dt{constructor(n,o,u){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cx(this);const g=pe(n);this._bootstrapComponents=Pt(g.bootstrap),this._r3Injector=ng(n,o,[{provide:Dt,useValue:this},{provide:py,useValue:this.componentFactoryResolver},...u],Ao(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class pi extends dn{constructor(n){super(),this.moduleType=n}create(n){return new Di(this.moduleType,n,[])}}class ir extends Dt{constructor(n){super(),this.componentFactoryResolver=new cx(this),this.instance=null;const o=new jn([...n.providers,{provide:Dt,useValue:this},{provide:py,useValue:this.componentFactoryResolver}],n.parent||Xn(),n.debugName,new Set(["environment"]));this.injector=o,n.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Cr(e,n,o=null){return new ir({providers:e,parent:n,debugName:o,runEnvironmentInitializers:!0}).injector}function So(e){return!!jo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function jo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ga(e,n,o){return e[n]=o}function qr(e,n,o){return!Object.is(e[n],o)&&(e[n]=o,!0)}function _a(e,n,o,u){const g=qr(e,n,o);return qr(e,n+1,u)||g}function Vi(e,n,o,u,g,x,S,O,z,Y){const se=o+Pi,Ie=n.firstCreatePass?function Oi(e,n,o,u,g,x,S,O,z){const Y=n.consts,se=yf(n,e,4,S||null,O||null);Bv(n,o,se,Sc(Y,z)),Lp(n,se);const Ie=se.tView=Nv(2,se,u,g,x,n.directiveRegistry,n.pipeRegistry,null,n.schemas,Y,null);return null!==n.queries&&(n.queries.template(n,se),Ie.queries=n.queries.embeddedTView(se)),se}(se,n,e,u,g,x,S,O,z):n.data[se];Oo(Ie,!1);const lt=$r(n,e,Ie,o);Pp()&&cp(n,e,lt,Ie),ks(lt,e);const ht=w0(lt,e,lt,Ie);return e[se]=ht,Q_(e,ht),function gb(e,n,o){return mb(e,n,o)}(ht,Ie,e),Tc(Ie)&&Lv(n,e,Ie),null!=z&&Fv(e,Ie,Y),Ie}function Zi(e,n,o,u,g,x,S,O){const z=pn(),Y=Er();return Vi(z,Y,e,n,o,u,g,Sc(Y.consts,x),S,O),Zi}let $r=function Es(e,n,o,u){return Jc(!0),n[rr].createComment("")};function UE(e,n,o,u){const g=pn();return qr(g,Fl(),n)&&(Er(),Bd(Ho(),g,e,n,o,u)),UE}function ky(e,n,o,u){return qr(e,Fl(),o)?n+Ki(o)+u:ur}function Bx(e,n){return e<<17|n<<2}function km(e){return e>>17&32767}function jE(e){return 2|e}function $g(e){return(131068&e)>>2}function GE(e,n){return-131069&e|n<<2}function $E(e){return 1|e}function HT(e,n,o,u){const g=e[o+1],x=null===n;let S=u?km(g):$g(g),O=!1;for(;0!==S&&(!1===O||x);){const Y=e[S+1];YI(e[S],n)&&(O=!0,e[S+1]=u?$E(Y):jE(Y)),S=u?km(Y):$g(Y)}O&&(e[o+1]=u?jE(g):$E(g))}function YI(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&jc(e,n)>=0}const fl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WT(e){return e.substring(fl.key,fl.keyEnd)}function QI(e){return e.substring(fl.value,fl.valueEnd)}function XT(e,n){const o=fl.textEnd;return o===n?-1:(n=fl.keyEnd=function tA(e,n,o){for(;n<o&&e.charCodeAt(n)>32;)n++;return n}(e,fl.key=n,o),zy(e,n,o))}function KT(e,n){const o=fl.textEnd;let u=fl.key=zy(e,n,o);return o===u?-1:(u=fl.keyEnd=function nA(e,n,o){let u;for(;n<o&&(45===(u=e.charCodeAt(n))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)n++;return n}(e,u,o),u=qT(e,u,o),u=fl.value=zy(e,u,o),u=fl.valueEnd=function iA(e,n,o){let u=-1,g=-1,x=-1,S=n,O=S;for(;S<o;){const z=e.charCodeAt(S++);if(59===z)return O;34===z||39===z?O=S=YT(e,z,S,o):n===S-4&&85===x&&82===g&&76===u&&40===z?O=S=YT(e,41,S,o):z>32&&(O=S),x=g,g=u,u=-33&z}return O}(e,u,o),qT(e,u,o))}function ZT(e){fl.key=0,fl.keyEnd=0,fl.value=0,fl.valueEnd=0,fl.textEnd=e.length}function zy(e,n,o){for(;n<o&&e.charCodeAt(n)<=32;)n++;return n}function qT(e,n,o,u){return(n=zy(e,n,o))<o&&n++,n}function YT(e,n,o,u){let g=-1,x=o;for(;x<u;){const S=e.charCodeAt(x++);if(S==n&&92!==g)return x;g=92==S&&92===g?0:S}throw new Error}function HE(e,n,o){const u=pn();return qr(u,Fl(),n)&&Lc(Er(),Ho(),u,e,n,u[rr],o,!1),HE}function WE(e,n,o,u,g){const S=g?"class":"style";jv(e,o,n.inputs[S],S,u)}function XE(e,n,o){return Lh(e,n,o,!1),XE}function KE(e,n){return Lh(e,n,null,!0),KE}function Ph(e){Fh(tD,rA,e,!1)}function rA(e,n){for(let o=function eA(e){return ZT(e),KT(e,zy(e,0,fl.textEnd))}(n);o>=0;o=KT(n,o))tD(e,WT(n),QI(n))}function QT(e){Fh(uA,gp,e,!0)}function gp(e,n){for(let o=function JI(e){return ZT(e),XT(e,zy(e,0,fl.textEnd))}(n);o>=0;o=XT(n,o))Wn(e,WT(n),!0)}function Lh(e,n,o,u){const g=pn(),x=Er(),S=Yc(2);x.firstUpdatePass&&eD(x,e,S,u),n!==ur&&qr(g,S,n)&&nD(x,x.data[Ra()],g,g[rr],e,g[S+1]=function hA(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Ao(rc(e)))),e}(n,o),u,S)}function Fh(e,n,o,u){const g=Er(),x=Yc(2);g.firstUpdatePass&&eD(g,null,x,u);const S=pn();if(o!==ur&&qr(S,x,o)){const O=g.data[Ra()];if(rD(O,u)&&!JT(g,x)){let z=u?O.classesWithoutHost:O.stylesWithoutHost;null!==z&&(o=Ja(z,o||"")),WE(g,O,S,o,u)}else!function dA(e,n,o,u,g,x,S,O){g===ur&&(g=Nr);let z=0,Y=0,se=0<g.length?g[0]:null,Ie=0<x.length?x[0]:null;for(;null!==se||null!==Ie;){const lt=z<g.length?g[z+1]:void 0,ht=Y<x.length?x[Y+1]:void 0;let vn,Ft=null;se===Ie?(z+=2,Y+=2,lt!==ht&&(Ft=Ie,vn=ht)):null===Ie||null!==se&&se<Ie?(z+=2,Ft=se):(Y+=2,Ft=Ie,vn=ht),null!==Ft&&nD(e,n,o,u,Ft,vn,S,O),se=z<g.length?g[z]:null,Ie=Y<x.length?x[Y]:null}}(g,O,S,S[rr],S[x+1],S[x+1]=function cA(e,n,o){if(null==o||""===o)return Nr;const u=[],g=rc(o);if(Array.isArray(g))for(let x=0;x<g.length;x++)e(u,g[x],!0);else if("object"==typeof g)for(const x in g)g.hasOwnProperty(x)&&e(u,x,g[x]);else"string"==typeof g&&n(u,g);return u}(e,n,o),u,x)}}function JT(e,n){return n>=e.expandoStartIndex}function eD(e,n,o,u){const g=e.data;if(null===g[o+1]){const x=g[Ra()],S=JT(e,o);rD(x,u)&&null===n&&!S&&(n=!1),n=function oA(e,n,o,u){const g=$m(e);let x=u?n.residualClasses:n.residualStyles;if(null===g)0===(u?n.classBindings:n.styleBindings)&&(o=Fb(o=ZE(null,e,n,o,u),n.attrs,u),x=null);else{const S=n.directiveStylingLast;if(-1===S||e[S]!==g)if(o=ZE(g,e,n,o,u),null===x){let z=function sA(e,n,o){const u=o?n.classBindings:n.styleBindings;if(0!==$g(u))return e[km(u)]}(e,n,u);void 0!==z&&Array.isArray(z)&&(z=ZE(null,e,n,z[1],u),z=Fb(z,n.attrs,u),function aA(e,n,o,u){e[km(o?n.classBindings:n.styleBindings)]=u}(e,n,u,z))}else x=function lA(e,n,o){let u;const g=n.directiveEnd;for(let x=1+n.directiveStylingLast;x<g;x++)u=Fb(u,e[x].hostAttrs,o);return Fb(u,n.attrs,o)}(e,n,u)}return void 0!==x&&(u?n.residualClasses=x:n.residualStyles=x),o}(g,x,n,u),function ZI(e,n,o,u,g,x){let S=x?n.classBindings:n.styleBindings,O=km(S),z=$g(S);e[u]=o;let se,Y=!1;if(Array.isArray(o)?(se=o[1],(null===se||jc(o,se)>0)&&(Y=!0)):se=o,g)if(0!==z){const lt=km(e[O+1]);e[u+1]=Bx(lt,O),0!==lt&&(e[lt+1]=GE(e[lt+1],u)),e[O+1]=function XI(e,n){return 131071&e|n<<17}(e[O+1],u)}else e[u+1]=Bx(O,0),0!==O&&(e[O+1]=GE(e[O+1],u)),O=u;else e[u+1]=Bx(z,0),0===O?O=u:e[z+1]=GE(e[z+1],u),z=u;Y&&(e[u+1]=jE(e[u+1])),HT(e,se,u,!0),HT(e,se,u,!1),function qI(e,n,o,u,g){const x=g?e.residualClasses:e.residualStyles;null!=x&&"string"==typeof n&&jc(x,n)>=0&&(o[u+1]=$E(o[u+1]))}(n,se,e,u,x),S=Bx(O,z),x?n.classBindings=S:n.styleBindings=S}(g,x,n,o,S,u)}}function ZE(e,n,o,u,g){let x=null;const S=o.directiveEnd;let O=o.directiveStylingLast;for(-1===O?O=o.directiveStart:O++;O<S&&(x=n[O],u=Fb(u,x.hostAttrs,g),x!==e);)O++;return null!==e&&(o.directiveStylingLast=O),u}function Fb(e,n,o){const u=o?1:2;let g=-1;if(null!==n)for(let x=0;x<n.length;x++){const S=n[x];"number"==typeof S?g=S:g===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Wn(e,S,!!o||n[++x]))}return void 0===e?null:e}function tD(e,n,o){Wn(e,n,rc(o))}function uA(e,n,o){const u=String(n);""!==u&&!u.includes(" ")&&Wn(e,u,o)}function nD(e,n,o,u,g,x,S,O){if(!(3&n.type))return;const z=e.data,Y=z[O+1],se=function KI(e){return!(1&~e)}(Y)?iD(z,n,o,g,$g(Y),S):void 0;zx(se)||(zx(x)||function WI(e){return!(2&~e)}(Y)&&(x=iD(z,null,o,g,O,S)),function Ul(e,n,o,u,g){if(n)g?e.addClass(o,u):e.removeClass(o,u);else{let x=-1===u.indexOf("-")?void 0:ti.DashCase;null==g?e.removeStyle(o,u,x):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),x|=ti.Important),e.setStyle(o,u,g,x))}}(u,S,Hh(Ra(),o),g,x))}function iD(e,n,o,u,g,x){const S=null===n;let O;for(;g>0;){const z=e[g],Y=Array.isArray(z),se=Y?z[1]:z,Ie=null===se;let lt=o[g+1];lt===ur&&(lt=Ie?Nr:void 0);let ht=Ie?hu(lt,u):se===u?lt:void 0;if(Y&&!zx(ht)&&(ht=hu(z,u)),zx(ht)&&(O=ht,S))return O;const Ft=e[g+1];g=S?km(Ft):$g(Ft)}if(null!==n){let z=x?n.residualClasses:n.residualStyles;null!=z&&(O=hu(z,u))}return O}function zx(e){return void 0!==e}function rD(e,n){return!!(e.flags&(n?8:16))}function oD(e,n,o){Fh(Wn,gp,ky(pn(),e,n,o),!0)}class wA{destroy(n){}updateValue(n,o){}swap(n,o){const u=Math.min(n,o),g=Math.max(n,o),x=this.detach(g);if(g-u>1){const S=this.detach(u);this.attach(u,x),this.attach(g,S)}else this.attach(u,x)}move(n,o){this.attach(o,this.detach(n))}}function qE(e,n,o,u,g){return e===o&&Object.is(n,u)?1:Object.is(g(e,n),g(o,u))?-1:0}function YE(e,n,o,u){return!(void 0===n||!n.has(u)||(e.attach(o,n.get(u)),n.delete(u),0))}function sD(e,n,o,u,g){if(YE(e,n,u,o(u,g)))e.updateValue(u,g);else{const x=e.create(u,g);e.attach(u,x)}}function aD(e,n,o,u){const g=new Set;for(let x=n;x<=o;x++)g.add(u(x,e.at(x)));return g}class lD{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;const o=this.kvMap.get(n);return void 0!==this._vMap&&this._vMap.has(o)?(this.kvMap.set(n,this._vMap.get(o)),this._vMap.delete(o)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,o){if(this.kvMap.has(n)){let u=this.kvMap.get(n);void 0===this._vMap&&(this._vMap=new Map);const g=this._vMap;for(;g.has(u);)u=g.get(u);g.set(u,o)}else this.kvMap.set(n,o)}forEach(n){for(let[o,u]of this.kvMap)if(n(u,o),void 0!==this._vMap){const g=this._vMap;for(;g.has(u);)u=g.get(u),n(u,o)}}}function cD(e,n){oc("NgControlFlow");const o=pn(),u=Fl(),g=o[u]!==ur?o[u]:-1,x=-1!==g?Vx(o,Pi+g):void 0;if(qr(o,u,e)){const O=Te(null);try{if(void 0!==x&&$v(x,0),-1!==e){const z=Pi+e,Y=Vx(o,z),se=QE(o[Yn],z),Ie=xf(Y,se.tView.ssrId);Tm(Y,Cm(o,se,n,{dehydratedView:Ie}),0,vf(se,Ie))}}finally{Te(O)}}else if(void 0!==x){const O=M0(x,0);void 0!==O&&(O[No]=n)}}class CA{constructor(n,o,u){this.lContainer=n,this.$implicit=o,this.$index=u}get $count(){return this.lContainer.length-Ss}}function uD(e,n){return n}class DA{constructor(n,o,u){this.hasEmptyBlock=n,this.trackByFn=o,this.liveCollection=u}}function dD(e,n,o,u,g,x,S,O,z,Y,se,Ie,lt){oc("NgControlFlow");const ht=pn(),Ft=Er(),vn=void 0!==z,Qn=pn(),li=O?S.bind(Qn[To][No]):S,Rn=new DA(vn,li);Qn[Pi+e]=Rn,Vi(ht,Ft,e+1,n,o,u,g,Sc(Ft.consts,x)),vn&&Vi(ht,Ft,e+2,z,Y,se,Ie,Sc(Ft.consts,lt))}class MA extends wA{constructor(n,o,u){super(),this.lContainer=n,this.hostLView=o,this.templateTNode=u,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ss}at(n){return this.getLView(n)[No].$implicit}attach(n,o){const u=o[ja];this.needsIndexUpdate||=n!==this.length,Tm(this.lContainer,o,n,vf(this.templateTNode,u))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,function SA(e,n){return yr(e,n)}(this.lContainer,n)}create(n,o){const u=xf(this.lContainer,this.templateTNode.tView.ssrId),g=Cm(this.hostLView,this.templateTNode,new CA(this.lContainer,o,n),{dehydratedView:u});return this.operationsCounter?.recordCreate(),g}destroy(n){Vo(n[Yn],n),this.operationsCounter?.recordDestroy()}updateValue(n,o){this.getLView(n)[No].$implicit=o}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[No].$index=n}getLView(n){return function IA(e,n){return M0(e,n)}(this.lContainer,n)}}function hD(e){const n=Te(null),o=Ra();try{const u=pn(),g=u[Yn],x=u[o],S=o+1,O=Vx(u,S);if(void 0===x.liveCollection){const Y=QE(g,S);x.liveCollection=new MA(O,u,Y)}else x.liveCollection.reset();const z=x.liveCollection;if(function EA(e,n,o){let u,g,x=0,S=e.length-1;if(Array.isArray(n)){let z=n.length-1;for(;x<=S&&x<=z;){const Y=e.at(x),se=n[x],Ie=qE(x,Y,x,se,o);if(0!==Ie){Ie<0&&e.updateValue(x,se),x++;continue}const lt=e.at(S),ht=n[z],Ft=qE(S,lt,z,ht,o);if(0!==Ft){Ft<0&&e.updateValue(S,ht),S--,z--;continue}const vn=o(x,Y),Qn=o(S,lt),li=o(x,se);if(Object.is(li,Qn)){const Rn=o(z,ht);Object.is(Rn,vn)?(e.swap(x,S),e.updateValue(S,ht),z--,S--):e.move(S,x),e.updateValue(x,se),x++}else if(u??=new lD,g??=aD(e,x,S,o),YE(e,u,x,li))e.updateValue(x,se),x++,S++;else if(g.has(li))u.set(vn,e.detach(x)),S--;else{const Rn=e.create(x,n[x]);e.attach(x,Rn),x++,S++}}for(;x<=z;)sD(e,u,o,x,n[x]),x++}else if(null!=n){const z=n[Symbol.iterator]();let Y=z.next();for(;!Y.done&&x<=S;){const se=e.at(x),Ie=Y.value,lt=qE(x,se,x,Ie,o);if(0!==lt)lt<0&&e.updateValue(x,Ie),x++,Y=z.next();else{u??=new lD,g??=aD(e,x,S,o);const ht=o(x,Ie);if(YE(e,u,x,ht))e.updateValue(x,Ie),x++,S++,Y=z.next();else if(g.has(ht)){const Ft=o(x,se);u.set(Ft,e.detach(x)),S--}else e.attach(x,e.create(x,Ie)),x++,S++,Y=z.next()}}for(;!Y.done;)sD(e,u,o,e.length,Y.value),Y=z.next()}for(;x<=S;)e.destroy(e.detach(S--));u?.forEach(z=>{e.destroy(z)})}(z,e,x.trackByFn),z.updateIndexes(),x.hasEmptyBlock){const Y=Fl(),se=0===z.length;if(qr(u,Y,se)){const Ie=o+2,lt=Vx(u,Ie);if(se){const ht=QE(g,Ie),Ft=xf(lt,ht.tView.ssrId);Tm(lt,Cm(u,ht,void 0,{dehydratedView:Ft}),0,vf(ht,Ft))}else $v(lt,0)}}}finally{Te(n)}}function Vx(e,n){return e[n]}function QE(e,n){return Cp(e,n)}function Ux(e,n,o,u){const g=pn(),x=Er(),S=Pi+e,O=g[rr],z=x.firstCreatePass?function AA(e,n,o,u,g,x){const S=n.consts,z=yf(n,e,2,u,Sc(S,g));return Bv(n,o,z,Sc(S,x)),null!==z.attrs&&gy(z,z.attrs,!1),null!==z.mergedAttrs&&gy(z,z.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,z),z}(S,x,g,n,o,u):x.data[S],Y=pD(x,g,z,O,n,e);g[S]=Y;const se=Tc(z);return Oo(z,!0),xm(O,Y,z),!function Au(e){return!(32&~e.flags)}(z)&&Pp()&&cp(x,g,Y,z),0===function Sf(){return ki.lFrame.elementDepthCount}()&&ks(Y,g),function Yg(){ki.lFrame.elementDepthCount++}(),se&&(Lv(x,g,z),Pv(x,z,g)),null!==u&&Fv(g,z),Ux}function jx(){let e=xr();Af()?sh():(e=e.parent,Oo(e,!1));const n=e;(function Mp(e){return ki.skipHydrationRootTNode===e})(n)&&function Qg(){ki.skipHydrationRootTNode=null}(),function Yy(){ki.lFrame.elementDepthCount--}();const o=Er();return o.firstCreatePass&&(Lp(o,e),Jd(e)&&o.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Np(e){return!!(8&e.flags)}(n)&&WE(o,n,pn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function o_(e){return!!(16&e.flags)}(n)&&WE(o,n,pn(),n.stylesWithoutHost,!1),jx}function JE(e,n,o,u){return Ux(e,n,o,u),jx(),JE}let pD=(e,n,o,u,g,x)=>(Jc(!0),Sr(u,g,function Rf(){return ki.lFrame.currentNamespace}()));function Gx(e,n,o){const u=pn(),g=Er(),x=e+Pi,S=g.firstCreatePass?function RA(e,n,o,u,g){const x=n.consts,S=Sc(x,u),O=yf(n,e,8,"ng-container",S);return null!==S&&gy(O,S,!0),Bv(n,o,O,Sc(x,g)),null!==n.queries&&n.queries.elementStart(n,O),O}(x,g,u,n,o):g.data[x];Oo(S,!0);const O=fD(g,u,S,e);return u[x]=O,Pp()&&cp(g,u,O,S),ks(O,u),Tc(S)&&(Lv(g,u,S),Pv(g,S,u)),null!=o&&Fv(u,S),Gx}function $x(){let e=xr();const n=Er();return Af()?sh():(e=e.parent,Oo(e,!1)),n.firstCreatePass&&(Lp(n,e),Jd(e)&&n.queries.elementEnd(e)),$x}function eC(e,n,o){return Gx(e,n,o),$x(),eC}let fD=(e,n,o,u)=>(Jc(!0),gr(n[rr],""));function mD(){return pn()}function tC(e,n,o){const u=pn();return qr(u,Fl(),n)&&Lc(Er(),Ho(),u,e,n,u[rr],o,!0),tC}function nC(e,n,o){const u=pn();if(qr(u,Fl(),n)){const x=Er(),S=Ho();Lc(x,S,u,e,n,D0($m(x.data),S,u),o,!0)}return nC}const Hg=void 0;var NA=["en",[["a","p"],["AM","PM"],Hg],[["AM","PM"],Hg,Hg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hg,"{1} 'at' {0}",Hg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function FA(e){const o=Math.floor(Math.abs(e)),u=e.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Vy={};function iC(e){const n=function BA(e){return e.toLowerCase().replace(/_/g,"-")}(e);let o=_D(n);if(o)return o;const u=n.split("-")[0];if(o=_D(u),o)return o;if("en"===u)return NA;throw new wn(701,!1)}function gD(e){return iC(e)[Uy.PluralCase]}function _D(e){return e in Vy||(Vy[e]=ho.ng&&ho.ng.common&&ho.ng.common.locales&&ho.ng.common.locales[e]),Vy[e]}var Uy=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Uy||{});const jy="en-US";let yD=jy;let ND=(e,n,o)=>{};function sC(e,n,o,u){const g=pn(),x=Er(),S=xr();return lC(x,g,g[rr],S,e,n,u),sC}function aC(e,n){const o=xr(),u=pn(),g=Er();return lC(g,u,D0($m(g.data),o,u),o,e,n),aC}function lC(e,n,o,u,g,x,S){const O=Tc(u),Y=e.firstCreatePass&&T0(e),se=n[No],Ie=C0(n);let lt=!0;if(3&u.type||S){const vn=al(u,n),Qn=S?S(vn):vn,li=Ie.length,Rn=S?wo=>S(Gr(wo[u.index])):u.index;let pr=null;if(!S&&O&&(pr=function Tk(e,n,o,u){const g=e.cleanup;if(null!=g)for(let x=0;x<g.length-1;x+=2){const S=g[x];if(S===o&&g[x+1]===u){const O=n[Zd],z=g[x+2];return O.length>z?O[z]:null}"string"==typeof S&&(x+=2)}return null}(e,n,g,u.index)),null!==pr)(pr.__ngLastListenerFn__||pr).__ngNextListenerFn__=x,pr.__ngLastListenerFn__=x,lt=!1;else{x=VD(u,n,se,x),ND(vn,g,x);const wo=o.listen(Qn,g,x);Ie.push(x,wo),Y&&Y.push(g,Rn,li,li+1)}}else x=VD(u,n,se,x);const ht=u.outputs;let Ft;if(lt&&null!==ht&&(Ft=ht[g])){const vn=Ft.length;if(vn)for(let Qn=0;Qn<vn;Qn+=2){const is=n[Ft[Qn]][Ft[Qn+1]].subscribe(x),gl=Ie.length;Ie.push(x,is),Y&&Y.push(g,u.index,gl,-(gl+1))}}}function zD(e,n,o,u){const g=Te(null);try{return tc(6,n,o),!1!==o(u)}catch(x){return J_(e,x),!1}finally{tc(7,n,o),Te(g)}}function VD(e,n,o,u){return function g(x){if(x===Function)return u;ny(e.componentOffset>-1?Pl(e.index,n):n,5);let O=zD(n,o,u,x),z=g.__ngNextListenerFn__;for(;z;)O=zD(n,o,z,x)&&O,z=z.__ngNextListenerFn__;return O}}function UD(e=1){return function Jy(e){return(ki.lFrame.contextLView=function bd(e,n){for(;e>0;)n=n[qd],e--;return n}(e,ki.lFrame.contextLView))[No]}(e)}function Dk(e,n){let o=null;const u=function yp(e){const n=e.attrs;if(null!=n){const o=n.indexOf(5);if(!(1&o))return n[o+1]}return null}(e);for(let g=0;g<n.length;g++){const x=n[g];if("*"!==x){if(null===u?Kd(e,x,!0):L(u,x))return g}else o=g}return o}function jD(e){const n=pn()[To][Ys];if(!n.projection){const u=n.projection=function ua(e,n){const o=[];for(let u=0;u<e;u++)o.push(n);return o}(e?e.length:1,null),g=u.slice();let x=n.child;for(;null!==x;){if(128!==x.type){const S=e?Dk(x,e):0;null!==S&&(g[S]?g[S].projectionNext=x:u[S]=x,g[S]=x)}x=x.next}}}function GD(e,n=0,o,u,g,x){const S=pn(),O=Er(),z=u?e+1:null;null!==z&&Vi(S,O,z,u,g,x,null,o);const Y=yf(O,Pi+e,16,null,o||null);null===Y.projection&&(Y.projection=n),sh();const Ie=!S[ja]||Xu();null===S[To][Ys].projection[Y.projection]&&null!==z?function Mk(e,n,o){const u=Pi+o,g=n.data[u],x=e[u],S=xf(x,g.tView.ssrId);Tm(x,Cm(e,g,void 0,{dehydratedView:S}),0,vf(g,S))}(S,O,z):Ie&&32&~Y.flags&&function Fd(e,n,o){bm(n[rr],0,n,o,ma(e,o,n),Ah(o.parent||n[Ys],o,n))}(O,S,Y)}function JD(e,n,o,u){xx(e,n,o,u)}function eM(e,n,o){!function bx(e,n,o){const u=Er();return u.firstCreatePass&&(wx(u,new _x(e,n,o),-1),!(2&~n)&&(u.staticViewQueries=!0)),xy(u,pn(),n)}(e,n,o)}function tM(e){const n=pn(),o=Er(),u=Hm();Wh(u+1);const g=Eb(o,u);if(e.dirty&&function qg(e){return!(4&~e[Hi])}(n)===!(2&~g.metadata.flags)){if(null===g.matches)e.reset([]);else{const x=Ex(n,u);e.reset(x,Hf),e.notifyOnChanges()}return!0}return!1}function nM(){return wb(pn(),Hm())}function iM(e,n,o,u,g){!function Ey(e,n){const o=e[ge];o._lView=pn(),o._queryIndex=n,o._queryList=wb(o._lView,n),o._queryList.onDirty(()=>o._dirtyCounter.update(u=>u+1))}(n,xx(e,o,u,g))}function rM(e=1){Wh(Hm()+e)}function oM(e){return Hu(function ic(){return ki.lFrame.contextLView}(),Pi+e)}function mM(e,n=""){const o=pn(),u=Er(),g=e+Pi,x=u.firstCreatePass?yf(u,g,1,n,null):u.data[g],S=gM(u,o,x,n,e);o[g]=S,Pp()&&cp(u,o,S,x),Oo(x,!1)}let gM=(e,n,o,u,g)=>(Jc(!0),function Bo(e,n){return e.createText(n)}(n[rr],u));function dC(e){return Kx("",e,""),dC}function Kx(e,n,o){const u=pn(),g=ky(u,e,n,o);return g!==ur&&function Oh(e,n,o){const u=Hh(n,e);!function Wo(e,n,o){e.setValue(n,o)}(e[rr],u,o)}(u,Ra(),g),Kx}function hC(e,n,o){Tb(n)&&(n=n());const u=pn();return qr(u,Fl(),n)&&Lc(Er(),Ho(),u,e,n,u[rr],o,!1),hC}function TM(e,n){const o=Tb(e);return o&&e.set(n),o}function pC(e,n){const o=pn(),u=Er(),g=xr();return lC(u,o,o[rr],g,e,n),pC}function fC(e,n,o,u,g){if(e=Ni(e),Array.isArray(e))for(let x=0;x<e.length;x++)fC(e[x],n,o,u,g);else{const x=Er(),S=pn(),O=xr();let z=un(e)?e:Ni(e.provide);const Y=xi(e),se=1048575&O.providerIndexes,Ie=O.directiveStart,lt=O.providerIndexes>>20;if(un(e)||!e.multi){const ht=new xu(Y,g,wm),Ft=gC(z,n,g?se:se+lt,Ie);-1===Ft?(qm(Lf(O,S),x,z),mC(x,e,n.length),n.push(z),O.directiveStart++,O.directiveEnd++,g&&(O.providerIndexes+=1048576),o.push(ht),S.push(ht)):(o[Ft]=ht,S[Ft]=ht)}else{const ht=gC(z,n,se+lt,Ie),Ft=gC(z,n,se,se+lt),Qn=Ft>=0&&o[Ft];if(g&&!Qn||!g&&!(ht>=0&&o[ht])){qm(Lf(O,S),x,z);const li=function Hk(e,n,o,u,g){const x=new xu(e,o,wm);return x.multi=[],x.index=n,x.componentProviders=0,SM(x,g,u&&!o),x}(g?$k:Gk,o.length,g,u,Y);!g&&Qn&&(o[Ft].providerFactory=li),mC(x,e,n.length,0),n.push(z),O.directiveStart++,O.directiveEnd++,g&&(O.providerIndexes+=1048576),o.push(li),S.push(li)}else mC(x,e,ht>-1?ht:Ft,SM(o[g?Ft:ht],Y,!g&&u));!g&&u&&Qn&&o[Ft].componentProviders++}}}function mC(e,n,o,u){const g=un(n),x=function gn(e){return!!e.useClass}(n);if(g||x){const z=(x?Ni(n.useClass):n).prototype.ngOnDestroy;if(z){const Y=e.destroyHooks||(e.destroyHooks=[]);if(!g&&n.multi){const se=Y.indexOf(o);-1===se?Y.push(o,[u,z]):Y[se+1].push(u,z)}else Y.push(o,z)}}}function SM(e,n,o){return o&&e.componentProviders++,e.multi.push(n)-1}function gC(e,n,o,u){for(let g=o;g<u;g++)if(n[g]===e)return g;return-1}function Gk(e,n,o,u){return _C(this.multi,[])}function $k(e,n,o,u){const g=this.multi;let x;if(this.providerFactory){const S=this.providerFactory.componentProviders,O=ph(o,o[Yn],this.providerFactory.index,u);x=O.slice(0,S),_C(g,x);for(let z=S;z<O.length;z++)x.push(O[z])}else x=[],_C(g,x);return x}function _C(e,n){for(let o=0;o<e.length;o++)n.push((0,e[o])());return n}function IM(e,n=[]){return o=>{o.providersResolver=(u,g)=>function jk(e,n,o){const u=Er();if(u.firstCreatePass){const g=Is(e);fC(o,u.data,u.blueprint,g,!0),fC(n,u.data,u.blueprint,g,!1)}}(u,g?g(e):e,n)}}let Wk=(()=>{class e{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const u=et(0,o.type),g=u.length>0?Cr([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,g)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Xr({token:e,providedIn:"environment",factory:()=>new e(qi(Tn))})}return e})();function AM(e){oc("NgStandalone"),e.getStandaloneInjector=n=>n.get(Wk).getOrCreateStandaloneInjector(e)}function RM(e,n,o){const u=$a()+e,g=pn();return g[u]===ur?ga(g,u,o?n.call(o):n()):function Fc(e,n){return e[n]}(g,u)}function PM(e,n,o,u){return BM(pn(),$a(),e,n,o,u)}function LM(e,n,o,u,g){return function zM(e,n,o,u,g,x,S){const O=n+o;return _a(e,O,g,x)?ga(e,O+2,S?u.call(S,g,x):u(g,x)):jb(e,O+2)}(pn(),$a(),e,n,o,u,g)}function FM(e,n,o,u,g,x){return function VM(e,n,o,u,g,x,S,O){const z=n+o;return function zd(e,n,o,u,g){const x=_a(e,n,o,u);return qr(e,n+2,g)||x}(e,z,g,x,S)?ga(e,z+3,O?u.call(O,g,x,S):u(g,x,S)):jb(e,z+3)}(pn(),$a(),e,n,o,u,g,x)}function NM(e,n,o,u){return function jM(e,n,o,u,g,x){let S=n+o,O=!1;for(let z=0;z<g.length;z++)qr(e,S++,g[z])&&(O=!0);return O?ga(e,S,u.apply(x,g)):jb(e,S)}(pn(),$a(),e,n,o,u)}function jb(e,n){const o=e[n];return o===ur?void 0:o}function BM(e,n,o,u,g,x){const S=n+o;return qr(e,S,g)?ga(e,S+1,x?u.call(x,g):u(g)):jb(e,S+1)}function GM(e,n){const o=Er();let u;const g=e+Pi;o.firstCreatePass?(u=function tO(e,n){if(n)for(let o=n.length-1;o>=0;o--){const u=n[o];if(e===u.name)return u}}(n,o.pipeRegistry),o.data[g]=u,u.onDestroy&&(o.destroyHooks??=[]).push(g,u.onDestroy)):u=o.data[g];const x=u.factory||(u.factory=Il(u.type)),O=Ds(wm);try{const z=hh(!1),Y=x();return hh(z),function uC(e,n,o,u){o>=e.data.length&&(e.data[o]=null,e.blueprint[o]=null),n[o]=u}(o,pn(),g,Y),Y}finally{Ds(O)}}function $M(e,n,o){const u=e+Pi,g=pn(),x=Hu(g,u);return function Gb(e,n){return e[Yn].data[n].pure}(g,u)?BM(g,$a(),n,x.transform,o,x):x.transform(o)}function HM(e,n){return Hv(e,n)}class aS{constructor(n){this.full=n;const o=n.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}let lS=(()=>{class e{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pS=new zi(""),fS=new zi("");let EC,QO=(()=>{class e{constructor(o,u,g){this._ngZone=o,this.registry=u,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,EC||(function JO(e){EC=e}(g),g.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb()}});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,g){let x=-1;u&&u>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==x),o()},u)),this._callbacks.push({doneCb:o,timeoutId:x,updateCb:g})}whenStable(o,u,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,g),this._runCallbacksIfReady()}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,g){return[]}static#e=this.\u0275fac=function(u){return new(u||e)(qi(xs),qi(mS),qi(fS))};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac})}return e})(),mS=(()=>{class e{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return EC?.findTestabilityInTree(this,o,u)??null}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function CC(e){return!!e&&"function"==typeof e.then}function gS(e){return!!e&&"function"==typeof e.subscribe}const _S=new zi("");let TC=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u}),this.appInits=Vn(_S,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const g of this.appInits){const x=g();if(CC(x))o.push(x);else if(gS(x)){const S=new Promise((O,z)=>{x.subscribe({complete:O,error:z})});o.push(S)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{u()}).catch(g=>{this.reject(g)}),0===o.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Jx=new zi("");function bS(e,n){return Array.isArray(n)?n.reduce(bS,e):{...e,...n}}let Nh=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vn(eu),this.afterRenderEffectManager=Vn(fy),this.zonelessEnabled=Vn(hy),this.externalTestViews=new Set,this.beforeRender=new yn.B,this.afterTick=new yn.B,this.componentTypes=[],this.components=[],this.isStable=Vn(Cd).hasPendingTasks.pipe((0,yi.T)(o=>!o)),this._injector=Vn(Tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const g=o instanceof Y0;if(!this._injector.get(TC).done)throw!g&&ae(o),new wn(405,!1);let S;S=g?o:this._injector.get(py).resolveComponentFactory(o),this.componentTypes.push(S.componentType);const O=function e2(e){return e.isBoundToModule}(S)?void 0:this._injector.get(Dt),Y=S.create(Js.NULL,[],u||S.selector,O),se=Y.location.nativeElement,Ie=Y.injector.get(pS,null);return Ie?.registerApplication(se),Y.onDestroy(()=>{this.detachView(Y.hostView),ew(this.components,Y),Ie?.unregisterApplication(se)}),this._loadComponent(Y),Y}tick(){this._tick(!0)}_tick(o){if(this._runningTick)throw new wn(101,!1);const u=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(o)}catch(g){this.internalErrorHandler(g)}finally{this._runningTick=!1,Te(u),this.afterTick.next()}}detectChangesInAttachedViews(o){let u=null;this._injector.destroyed||(u=this._injector.get(ob,null,{optional:!0}));let g=0;const x=this.afterRenderEffectManager;for(;g<10;){const S=0===g;if(o||!S){this.beforeRender.next(S);for(let{_lView:O,notifyErrorHandler:z}of this._views)n2(O,z,S,this.zonelessEnabled)}else u?.begin?.(),u?.end?.();if(g++,x.executeInternalCallbacks(),!this.allViews.some(({_lView:O})=>yu(O))&&(x.execute(),!this.allViews.some(({_lView:O})=>yu(O))))break}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;ew(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Jx,[]);[...this._bootstrapListeners,...u].forEach(g=>g(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ew(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new wn(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ew(e,n){const o=e.indexOf(n);o>-1&&e.splice(o,1)}function n2(e,n,o,u){(o||yu(e))&&ey(e,n,o&&!u?0:1)}class r2{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}}let o2=(()=>{class e{compileModuleSync(o){return new pi(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),x=Pt(pe(o).declarations).reduce((S,O)=>{const z=B(O);return z&&S.push(new jg(z)),S},[]);return new r2(u,x)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),l2=(()=>{class e{constructor(){this.zone=Vn(xs),this.changeDetectionScheduler=Vn(Mm),this.applicationRef=Vn(Nh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function DC({ngZoneFactory:e,ignoreChangesOutsideZone:n}){return e??=()=>new xs(MC()),[{provide:xs,useFactory:e},{provide:il,multi:!0,useFactory:()=>{const o=Vn(l2,{optional:!0});return()=>o.initialize()}},{provide:il,multi:!0,useFactory:()=>{const o=Vn(d2);return()=>{o.initialize()}}},{provide:eu,useFactory:u2},!0===n?{provide:rb,useValue:!0}:[]]}function u2(){const e=Vn(xs),n=Vn(Ro);return o=>e.runOutsideAngular(()=>n.handleError(o))}function MC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let d2=(()=>{class e{constructor(){this.subscription=new gi.yU,this.initialized=!1,this.zone=Vn(xs),this.pendingTasks=Vn(Cd)}initialize(){if(this.initialized)return;this.initialized=!0;let o=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(o=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),queueMicrotask(()=>{null!==o&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(o),o=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),o??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Wb=(()=>{class e{constructor(){this.appRef=Vn(Nh),this.taskService=Vn(Cd),this.ngZone=Vn(xs),this.zonelessEnabled=Vn(hy),this.disableScheduling=Vn(rb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new gi.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cb||!this.zoneIsDefined)}notify(o){if(!this.zonelessEnabled&&5===o)return;switch(o){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const u=this.useMicrotaskScheduler?ex:Bg;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=u(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=u(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&xs.isInAngularZone())}tick(o){if(this.runningTick||this.appRef.destroyed)return;const u=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(o)},void 0,this.schedulerTickApplyArgs)}catch(g){throw this.taskService.remove(u),g}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ex(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(u)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const o=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(o)}}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const nw=new zi("",{providedIn:"root",factory:()=>Vn(nw,Wi.Optional|Wi.SkipSelf)||function h2(){return typeof $localize<"u"&&$localize.locale||jy}()}),p2=new zi("",{providedIn:"root",factory:()=>"USD"}),IC=new zi("");let TS=(()=>{class e{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const g=function X1(e="zone.js",n){return"noop"===e?new cb:"zone.js"===e?new xs(n):e}(u?.ngZone,MC({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return g.run(()=>{const x=u?.ignoreChangesOutsideZone,S=function wi(e,n,o){return new Di(e,n,o)}(o.moduleType,this.injector,[...DC({ngZoneFactory:()=>g,ignoreChangesOutsideZone:x}),{provide:Mm,useExisting:Wb}]),O=S.injector.get(Ro,null);return g.runOutsideAngular(()=>{const z=g.onError.subscribe({next:Y=>{O.handleError(Y)}});S.onDestroy(()=>{ew(this._modules,S),z.unsubscribe()})}),function vS(e,n,o){try{const u=o();return CC(u)?u.catch(g=>{throw n.runOutsideAngular(()=>e.handleError(g)),g}):u}catch(u){throw n.runOutsideAngular(()=>e.handleError(u)),u}}(O,g,()=>{const z=S.injector.get(TC);return z.runInitializers(),z.donePromise.then(()=>(function vD(e){"string"==typeof e&&(yD=e.toLowerCase().replace(/_/g,"-"))}(S.injector.get(nw,jy)||jy),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const g=bS({},u);return function a2(e,n,o){const u=new pi(o);return Promise.resolve(u)}(0,0,o).then(x=>this.bootstrapModuleFactory(x,g))}_moduleDoBootstrap(o){const u=o.injector.get(Nh);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(g=>u.bootstrap(g));else{if(!o.instance.ngDoBootstrap)throw new wn(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new wn(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(IC,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||e)(qi(Js))};static#t=this.\u0275prov=Xr({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Om=null;const DS=new zi("");function MS(e,n,o=[]){const u=`Platform: ${n}`,g=new zi(u);return(x=[])=>{let S=AC();if(!S||S.injector.get(DS,!1)){const O=[...o,...x,{provide:g,useValue:!0}];e?e(O):function m2(e){if(Om&&!Om.get(DS,!1))throw new wn(400,!1);(function yS(){!function ai(e){mn=e}(()=>{throw new wn(600,!1)})})(),Om=e;const n=e.get(TS);(function IS(e){e.get(nm,null)?.forEach(o=>o())})(e)}(function SS(e=[],n){return Js.create({name:n,providers:[{provide:qn,useValue:"platform"},{provide:IC,useValue:new Set([()=>Om=null])},...e]})}(O,u))}return function g2(e){const n=AC();if(!n)throw new wn(401,!1);return n}()}}function AC(){return Om?.get(TS)??null}function y2(){}let kS=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=v2}return e})();function v2(e){return function b2(e,n,o){if(Cc(e)&&!o){const u=Pl(e.index,n);return new iy(u,u)}return 175&e.type?new iy(n[To],n):null}(xr(),pn(),!(16&~e))}class LS{constructor(){}supports(n){return So(n)}create(n){return new T2(n)}}const C2=(e,n)=>n;class T2{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||C2}forEachItem(n){let o;for(o=this._itHead;null!==o;o=o._next)n(o)}forEachOperation(n){let o=this._itHead,u=this._removalsHead,g=0,x=null;for(;o||u;){const S=!u||o&&o.currentIndex<NS(u,g,x)?o:u,O=NS(S,g,x),z=S.currentIndex;if(S===u)g--,u=u._nextRemoved;else if(o=o._next,null==S.previousIndex)g++;else{x||(x=[]);const Y=O-g,se=z-g;if(Y!=se){for(let lt=0;lt<Y;lt++){const ht=lt<x.length?x[lt]:x[lt]=0,Ft=ht+lt;se<=Ft&&Ft<Y&&(x[lt]=ht+1)}x[S.previousIndex]=se-Y}}O!==z&&n(S,O,z)}}forEachPreviousItem(n){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachMovedItem(n){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}forEachIdentityChange(n){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)n(o)}diff(n){if(null==n&&(n=[]),!So(n))throw new wn(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let g,x,S,o=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let O=0;O<this.length;O++)x=n[O],S=this._trackByFn(O,x),null!==o&&Object.is(o.trackById,S)?(u&&(o=this._verifyReinsertion(o,x,S,O)),Object.is(o.item,x)||this._addIdentityChange(o,x)):(o=this._mismatch(o,x,S,O),u=!0),o=o._next}else g=0,function ac(e,n){if(Array.isArray(e))for(let o=0;o<e.length;o++)n(e[o]);else{const o=e[Symbol.iterator]();let u;for(;!(u=o.next()).done;)n(u.value)}}(n,O=>{S=this._trackByFn(g,O),null!==o&&Object.is(o.trackById,S)?(u&&(o=this._verifyReinsertion(o,O,S,g)),Object.is(o.item,O)||this._addIdentityChange(o,O)):(o=this._mismatch(o,O,S,g),u=!0),o=o._next,g++}),this.length=g;return this._truncate(o),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,o,u,g){let x;return null===n?x=this._itTail:(x=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._reinsertAfter(n,x,g)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,g))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._moveAfter(n,x,g)):n=this._addAfter(new D2(o,u),x,g),n}_verifyReinsertion(n,o,u,g){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==x?n=this._reinsertAfter(x,n._prev,g):n.currentIndex!=g&&(n.currentIndex=g,this._addToMoves(n,g)),n}_truncate(n){for(;null!==n;){const o=n._next;this._addToRemovals(this._unlink(n)),n=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const g=n._prevRemoved,x=n._nextRemoved;return null===g?this._removalsHead=x:g._nextRemoved=x,null===x?this._removalsTail=g:x._prevRemoved=g,this._insertAfter(n,o,u),this._addToMoves(n,u),n}_moveAfter(n,o,u){return this._unlink(n),this._insertAfter(n,o,u),this._addToMoves(n,u),n}_addAfter(n,o,u){return this._insertAfter(n,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,o,u){const g=null===o?this._itHead:o._next;return n._next=g,n._prev=o,null===g?this._itTail=n:g._prev=n,null===o?this._itHead=n:o._next=n,null===this._linkedRecords&&(this._linkedRecords=new FS),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const o=n._prev,u=n._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,n}_addToMoves(n,o){return n.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FS),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,o){return n.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class D2{constructor(n,o){this.item=n,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M2{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const o=n._prevDup,u=n._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class FS{constructor(){this.map=new Map}put(n){const o=n.trackById;let u=this.map.get(o);u||(u=new M2,this.map.set(o,u)),u.add(n)}get(n,o){const g=this.map.get(n);return g?g.get(n,o):null}remove(n){const o=n.trackById;return this.map.get(o).remove(n)&&this.map.delete(o),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NS(e,n,o){const u=e.previousIndex;if(null===u)return u;let g=0;return o&&u<o.length&&(g=o[u]),u+n+g}class BS{constructor(){}supports(n){return n instanceof Map||jo(n)}create(){return new S2}}class S2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let o;for(o=this._mapHead;null!==o;o=o._next)n(o)}forEachPreviousItem(n){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)n(o)}forEachChangedItem(n){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}diff(n){if(n){if(!(n instanceof Map||jo(n)))throw new wn(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,g)=>{if(o&&o.key===g)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const x=this._getOrCreateRecordForKey(g,u);o=this._insertBeforeOrAppend(o,x)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,o){if(n){const u=n._prev;return o._next=n,o._prev=u,n._prev=o,u&&(u._next=o),n===this._mapHead&&(this._mapHead=o),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(n,o){if(this._records.has(n)){const g=this._records.get(n);this._maybeAddToChanges(g,o);const x=g._prev,S=g._next;return x&&(x._next=S),S&&(S._prev=x),g._next=null,g._prev=null,g}const u=new I2(n);return this._records.set(n,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,o){Object.is(o,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=o,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,o){n instanceof Map?n.forEach(o):Object.keys(n).forEach(u=>o(n[u],u))}}class I2{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zS(){return new LC([new LS])}let LC=(()=>{class e{static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:zS});constructor(o){this.factories=o}static create(o,u){if(null!=u){const g=u.factories.slice();o=o.concat(g)}return new e(o)}static extend(o){return{provide:e,useFactory:u=>e.create(o,u||zS()),deps:[[e,new Ba,new Aa]]}}find(o){const u=this.factories.find(g=>g.supports(o));if(null!=u)return u;throw new wn(901,!1)}}return e})();function VS(){return new FC([new BS])}let FC=(()=>{class e{static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:VS});constructor(o){this.factories=o}static create(o,u){if(u){const g=u.factories.slice();o=o.concat(g)}return new e(o)}static extend(o){return{provide:e,useFactory:u=>e.create(o,u||VS()),deps:[[e,new Ba,new Aa]]}}find(o){const u=this.factories.find(g=>g.supports(o));if(u)return u;throw new wn(901,!1)}}return e})();const O2=MS(null,"core",[]);let R2=(()=>{class e{constructor(o){}static#e=this.\u0275fac=function(u){return new(u||e)(qi(Nh))};static#t=this.\u0275mod=E({type:e});static#n=this.\u0275inj=Fa({})}return e})();const iI=new zi("");function fR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function mR(e,n=NaN){return isNaN(parseFloat(e))||isNaN(Number(e))?n:Number(e)}function _R(e,n){oc("NgSignals");const o=Wt(e);return n?.equal&&(o[ge].equal=n.equal),o}function yR(e){const n=Te(null);try{return e()}finally{Te(n)}}const vR=new zi("",{providedIn:"root",factory:()=>Vn(bR)});let bR=(()=>{class e{static#e=this.\u0275prov=Xr({token:e,providedIn:"root",factory:()=>new xR})}return e})();class xR{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Vn(Cd),this.taskId=null}scheduleEffect(n){if(this.enqueue(n),null===this.taskId){const o=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(o),this.taskId=null})}}enqueue(n){const o=n.creationZone;this.queues.has(o)||this.queues.set(o,new Set);const u=this.queues.get(o);u.has(n)||(this.queuedEffectCount++,u.add(n))}flush(){for(;this.queuedEffectCount>0;)for(const[n,o]of this.queues)null===n?this.flushQueue(o):n.run(()=>this.flushQueue(o))}flushQueue(n){for(const o of n)n.delete(o),this.queuedEffectCount--,o.run()}}class wR{constructor(n,o,u,g,x,S){this.scheduler=n,this.effectFn=o,this.creationZone=u,this.injector=x,this.watcher=function ri(e,n,o){const u=Object.create(fi);o&&(u.consumerAllowSignalWrites=!0),u.fn=e,u.schedule=n;const g=z=>{u.cleanupFn=z};return u.ref={notify:()=>St(u),run:()=>{if(null===u.fn)return;if(function ke(){return ue}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(u.dirty=!1,u.hasRun&&!On(u))return;u.hasRun=!0;const z=zt(u);try{u.cleanupFn(),u.cleanupFn=Jn,u.fn(g)}finally{Rt(u,z)}},cleanup:()=>u.cleanupFn(),destroy:()=>function S(z){(function x(z){return null===z.fn&&null===z.schedule})(z)||(An(z),z.cleanupFn(),z.fn=null,z.schedule=null,z.cleanupFn=Jn)}(u),[ge]:u},u.ref}(O=>this.runEffect(O),()=>this.schedule(),S),this.unregisterOnDestroy=g?.onDestroy(()=>this.destroy())}runEffect(n){try{this.effectFn(n)}catch(o){this.injector.get(Ro,null,{optional:!0})?.handleError(o)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function pI(e,n){oc("NgSignals"),!n?.injector&&kl();const o=n?.injector??Vn(Js),u=!0!==n?.manualCleanup?o.get(mh):null,g=new wR(o.get(vR),e,typeof Zone>"u"?null:Zone.current,u,o,n?.allowSignalWrites??!1),x=o.get(kS,null,{optional:!0});return x&&8&x._lView[Hi]?(x._lView[Qd]??=[]).push(g.watcher.notify):g.watcher.notify(),g}function ER(e){const n=B(e);if(!n)return null;const o=new jg(n);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},9417:($n,Tt,H)=>{"use strict";H.d(Tt,{BC:()=>Yi,YN:()=>fs,cV:()=>go,cz:()=>Rt,j4:()=>ba,k0:()=>Zt,kq:()=>Ve,me:()=>bt,vO:()=>yn,vS:()=>_l,xq:()=>Bs});var D=H(3953),l=H(177),ue=H(6648),h=H(7468),ge=H(1413),Te=H(6354);let nt=(()=>{class te{constructor(X,_e){this._renderer=X,this._elementRef=_e,this.onChange=gt=>{},this.onTouched=()=>{}}setProperty(X,_e){this._renderer.setProperty(this._elementRef.nativeElement,X,_e)}registerOnTouched(X){this.onTouched=X}registerOnChange(X){this.onChange=X}setDisabledState(X){this.setProperty("disabled",X)}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(D.sFG),D.rXU(D.aKT))};static#t=this.\u0275dir=D.FsC({type:te})}return te})(),ke=(()=>{class te extends nt{static#e=this.\u0275fac=(()=>{let X;return function(gt){return(X||(X=D.xGo(te)))(gt||te)}})();static#t=this.\u0275dir=D.FsC({type:te,features:[D.Vt3]})}return te})();const Ve=new D.nKC(""),ut={provide:Ve,useExisting:(0,D.Rfq)(()=>bt),multi:!0},Mt=new D.nKC("");let bt=(()=>{class te extends nt{constructor(X,_e,gt){super(X,_e),this._compositionMode=gt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ot(){const te=(0,l.QT)()?(0,l.QT)().getUserAgent():"";return/android (\d+)/.test(te.toLowerCase())}())}writeValue(X){this.setProperty("value",X??"")}_handleInput(X){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(X)}_compositionStart(){this._composing=!0}_compositionEnd(X){this._composing=!1,this._compositionMode&&this.onChange(X)}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(D.sFG),D.rXU(D.aKT),D.rXU(Mt,8))};static#t=this.\u0275dir=D.FsC({type:te,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(_e,gt){1&_e&&D.bIt("input",function(mr){return gt._handleInput(mr.target.value)})("blur",function(){return gt.onTouched()})("compositionstart",function(){return gt._compositionStart()})("compositionend",function(mr){return gt._compositionEnd(mr.target.value)})},features:[D.Jv_([ut]),D.Vt3]})}return te})();function St(te){return null==te||("string"==typeof te||Array.isArray(te))&&0===te.length}function zt(te){return null!=te&&"number"==typeof te.length}const Rt=new D.nKC(""),On=new D.nKC(""),An=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zt{static min(re){return function At(te){return re=>{if(St(re.value)||St(te))return null;const X=parseFloat(re.value);return!isNaN(X)&&X<te?{min:{min:te,actual:re.value}}:null}}(re)}static max(re){return function dt(te){return re=>{if(St(re.value)||St(te))return null;const X=parseFloat(re.value);return!isNaN(X)&&X>te?{max:{max:te,actual:re.value}}:null}}(re)}static required(re){return sn(re)}static requiredTrue(re){return Gt(re)}static email(re){return function Qt(te){return St(te.value)||An.test(te.value)?null:{email:!0}}(re)}static minLength(re){return function Wt(te){return re=>St(re.value)||!zt(re.value)?null:re.value.length<te?{minlength:{requiredLength:te,actualLength:re.value.length}}:null}(re)}static maxLength(re){return function He(te){return re=>zt(re.value)&&re.value.length>te?{maxlength:{requiredLength:te,actualLength:re.value.length}}:null}(re)}static pattern(re){return function ft(te){if(!te)return Ut;let re,X;return"string"==typeof te?(X="","^"!==te.charAt(0)&&(X+="^"),X+=te,"$"!==te.charAt(te.length-1)&&(X+="$"),re=new RegExp(X)):(X=te.toString(),re=te),_e=>{if(St(_e.value))return null;const gt=_e.value;return re.test(gt)?null:{pattern:{requiredPattern:X,actualValue:gt}}}}(re)}static nullValidator(re){return null}static compose(re){return tn(re)}static composeAsync(re){return Pn(re)}}function sn(te){return St(te.value)?{required:!0}:null}function Gt(te){return!0===te.value?null:{required:!0}}function Ut(te){return null}function on(te){return null!=te}function Fn(te){return(0,D.jNT)(te)?(0,ue.H)(te):te}function mn(te){let re={};return te.forEach(X=>{re=null!=X?{...re,...X}:re}),0===Object.keys(re).length?null:re}function Sn(te,re){return re.map(X=>X(te))}function Nn(te){return te.map(re=>function ai(te){return!te.validate}(re)?re:X=>re.validate(X))}function tn(te){if(!te)return null;const re=te.filter(on);return 0==re.length?null:function(X){return mn(Sn(X,re))}}function an(te){return null!=te?tn(Nn(te)):null}function Pn(te){if(!te)return null;const re=te.filter(on);return 0==re.length?null:function(X){const _e=Sn(X,re).map(Fn);return(0,h.p)(_e).pipe((0,Te.T)(mn))}}function ui(te){return null!=te?Pn(Nn(te)):null}function kt(te,re){return null===te?[re]:Array.isArray(te)?[...te,re]:[te,re]}function It(te){return te._rawValidators}function _n(te){return te._rawAsyncValidators}function ni(te){return te?Array.isArray(te)?te:[te]:[]}function ri(te,re){return Array.isArray(te)?te.includes(re):te===re}function Jn(te,re){const X=ni(re);return ni(te).forEach(gt=>{ri(X,gt)||X.push(gt)}),X}function fi(te,re){return ni(re).filter(X=>!ri(te,X))}class wt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(re){this._rawValidators=re||[],this._composedValidatorFn=an(this._rawValidators)}_setAsyncValidators(re){this._rawAsyncValidators=re||[],this._composedAsyncValidatorFn=ui(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(re){this._onDestroyCallbacks.push(re)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(re=>re()),this._onDestroyCallbacks=[]}reset(re=void 0){this.control&&this.control.reset(re)}hasError(re,X){return!!this.control&&this.control.hasError(re,X)}getError(re,X){return this.control?this.control.getError(re,X):null}}class qt extends wt{get formDirective(){return null}get path(){return null}}class yn extends wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gi{constructor(re){this._cd=re}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Yi=(()=>{class te extends gi{constructor(X){super(X)}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(yn,2))};static#t=this.\u0275dir=D.FsC({type:te,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(_e,gt){2&_e&&D.AVh("ng-untouched",gt.isUntouched)("ng-touched",gt.isTouched)("ng-pristine",gt.isPristine)("ng-dirty",gt.isDirty)("ng-valid",gt.isValid)("ng-invalid",gt.isInvalid)("ng-pending",gt.isPending)},features:[D.Vt3]})}return te})();const no="VALID",ln="INVALID",bi="PENDING",$t="DISABLED";class zn{}class Cn extends zn{constructor(re,X){super(),this.value=re,this.source=X}}class Ct extends zn{constructor(re,X){super(),this.pristine=re,this.source=X}}class ie extends zn{constructor(re,X){super(),this.touched=re,this.source=X}}class U extends zn{constructor(re,X){super(),this.status=re,this.source=X}}class K extends zn{constructor(re){super(),this.source=re}}class de extends zn{constructor(re){super(),this.source=re}}function Ee(te){return(ne(te)?te.validators:te)||null}function De(te,re){return(ne(re)?re.asyncValidators:te)||null}function ne(te){return null!=te&&!Array.isArray(te)&&"object"==typeof te}class Ge{constructor(re,X){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,D.EWP)(()=>this.statusReactive()),this.statusReactive=(0,D.vPA)(void 0),this._pristine=(0,D.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,D.vPA)(!0),this._touched=(0,D.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,D.vPA)(!1),this._events=new ge.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(re),this._assignAsyncValidators(X)}get validator(){return this._composedValidatorFn}set validator(re){this._rawValidators=this._composedValidatorFn=re}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(re){this._rawAsyncValidators=this._composedAsyncValidatorFn=re}get parent(){return this._parent}get status(){return(0,D.O8t)(this.statusReactive)}set status(re){(0,D.O8t)(()=>this.statusReactive.set(re))}get valid(){return this.status===no}get invalid(){return this.status===ln}get pending(){return this.status==bi}get disabled(){return this.status===$t}get enabled(){return this.status!==$t}get pristine(){return(0,D.O8t)(this.pristineReactive)}set pristine(re){(0,D.O8t)(()=>this.pristineReactive.set(re))}get dirty(){return!this.pristine}get touched(){return(0,D.O8t)(this.touchedReactive)}set touched(re){(0,D.O8t)(()=>this.touchedReactive.set(re))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(re){this._assignValidators(re)}setAsyncValidators(re){this._assignAsyncValidators(re)}addValidators(re){this.setValidators(Jn(re,this._rawValidators))}addAsyncValidators(re){this.setAsyncValidators(Jn(re,this._rawAsyncValidators))}removeValidators(re){this.setValidators(fi(re,this._rawValidators))}removeAsyncValidators(re){this.setAsyncValidators(fi(re,this._rawAsyncValidators))}hasValidator(re){return ri(this._rawValidators,re)}hasAsyncValidator(re){return ri(this._rawAsyncValidators,re)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(re={}){const X=!1===this.touched;this.touched=!0;const _e=re.sourceControl??this;this._parent&&!re.onlySelf&&this._parent.markAsTouched({...re,sourceControl:_e}),X&&!1!==re.emitEvent&&this._events.next(new ie(!0,_e))}markAllAsTouched(re={}){this.markAsTouched({onlySelf:!0,emitEvent:re.emitEvent,sourceControl:this}),this._forEachChild(X=>X.markAllAsTouched(re))}markAsUntouched(re={}){const X=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const _e=re.sourceControl??this;this._forEachChild(gt=>{gt.markAsUntouched({onlySelf:!0,emitEvent:re.emitEvent,sourceControl:_e})}),this._parent&&!re.onlySelf&&this._parent._updateTouched(re,_e),X&&!1!==re.emitEvent&&this._events.next(new ie(!1,_e))}markAsDirty(re={}){const X=!0===this.pristine;this.pristine=!1;const _e=re.sourceControl??this;this._parent&&!re.onlySelf&&this._parent.markAsDirty({...re,sourceControl:_e}),X&&!1!==re.emitEvent&&this._events.next(new Ct(!1,_e))}markAsPristine(re={}){const X=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const _e=re.sourceControl??this;this._forEachChild(gt=>{gt.markAsPristine({onlySelf:!0,emitEvent:re.emitEvent})}),this._parent&&!re.onlySelf&&this._parent._updatePristine(re,_e),X&&!1!==re.emitEvent&&this._events.next(new Ct(!0,_e))}markAsPending(re={}){this.status=bi;const X=re.sourceControl??this;!1!==re.emitEvent&&(this._events.next(new U(this.status,X)),this.statusChanges.emit(this.status)),this._parent&&!re.onlySelf&&this._parent.markAsPending({...re,sourceControl:X})}disable(re={}){const X=this._parentMarkedDirty(re.onlySelf);this.status=$t,this.errors=null,this._forEachChild(gt=>{gt.disable({...re,onlySelf:!0})}),this._updateValue();const _e=re.sourceControl??this;!1!==re.emitEvent&&(this._events.next(new Cn(this.value,_e)),this._events.next(new U(this.status,_e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...re,skipPristineCheck:X},this),this._onDisabledChange.forEach(gt=>gt(!0))}enable(re={}){const X=this._parentMarkedDirty(re.onlySelf);this.status=no,this._forEachChild(_e=>{_e.enable({...re,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:re.emitEvent}),this._updateAncestors({...re,skipPristineCheck:X},this),this._onDisabledChange.forEach(_e=>_e(!1))}_updateAncestors(re,X){this._parent&&!re.onlySelf&&(this._parent.updateValueAndValidity(re),re.skipPristineCheck||this._parent._updatePristine({},X),this._parent._updateTouched({},X))}setParent(re){this._parent=re}getRawValue(){return this.value}updateValueAndValidity(re={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const _e=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===no||this.status===bi)&&this._runAsyncValidator(_e,re.emitEvent)}const X=re.sourceControl??this;!1!==re.emitEvent&&(this._events.next(new Cn(this.value,X)),this._events.next(new U(this.status,X)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!re.onlySelf&&this._parent.updateValueAndValidity({...re,sourceControl:X})}_updateTreeValidity(re={emitEvent:!0}){this._forEachChild(X=>X._updateTreeValidity(re)),this.updateValueAndValidity({onlySelf:!0,emitEvent:re.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$t:no}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(re,X){if(this.asyncValidator){this.status=bi,this._hasOwnPendingAsyncValidator={emitEvent:!1!==X};const _e=Fn(this.asyncValidator(this));this._asyncValidationSubscription=_e.subscribe(gt=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(gt,{emitEvent:X,shouldHaveEmitted:re})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const re=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,re}return!1}setErrors(re,X={}){this.errors=re,this._updateControlsErrors(!1!==X.emitEvent,this,X.shouldHaveEmitted)}get(re){let X=re;return null==X||(Array.isArray(X)||(X=X.split(".")),0===X.length)?null:X.reduce((_e,gt)=>_e&&_e._find(gt),this)}getError(re,X){const _e=X?this.get(X):this;return _e&&_e.errors?_e.errors[re]:null}hasError(re,X){return!!this.getError(re,X)}get root(){let re=this;for(;re._parent;)re=re._parent;return re}_updateControlsErrors(re,X,_e){this.status=this._calculateStatus(),re&&this.statusChanges.emit(this.status),(re||_e)&&this._events.next(new U(this.status,X)),this._parent&&this._parent._updateControlsErrors(re,X,_e)}_initObservables(){this.valueChanges=new D.bkB,this.statusChanges=new D.bkB}_calculateStatus(){return this._allControlsDisabled()?$t:this.errors?ln:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bi)?bi:this._anyControlsHaveStatus(ln)?ln:no}_anyControlsHaveStatus(re){return this._anyControls(X=>X.status===re)}_anyControlsDirty(){return this._anyControls(re=>re.dirty)}_anyControlsTouched(){return this._anyControls(re=>re.touched)}_updatePristine(re,X){const _e=!this._anyControlsDirty(),gt=this.pristine!==_e;this.pristine=_e,this._parent&&!re.onlySelf&&this._parent._updatePristine(re,X),gt&&this._events.next(new Ct(this.pristine,X))}_updateTouched(re={},X){this.touched=this._anyControlsTouched(),this._events.next(new ie(this.touched,X)),this._parent&&!re.onlySelf&&this._parent._updateTouched(re,X)}_registerOnCollectionChange(re){this._onCollectionChange=re}_setUpdateStrategy(re){ne(re)&&null!=re.updateOn&&(this._updateOn=re.updateOn)}_parentMarkedDirty(re){return!re&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(re){return null}_assignValidators(re){this._rawValidators=Array.isArray(re)?re.slice():re,this._composedValidatorFn=function Xe(te){return Array.isArray(te)?an(te):te||null}(this._rawValidators)}_assignAsyncValidators(re){this._rawAsyncValidators=Array.isArray(re)?re.slice():re,this._composedAsyncValidatorFn=function me(te){return Array.isArray(te)?ui(te):te||null}(this._rawAsyncValidators)}}class Fe extends Ge{constructor(re,X,_e){super(Ee(X),De(_e,X)),this.controls=re,this._initObservables(),this._setUpdateStrategy(X),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(re,X){return this.controls[re]?this.controls[re]:(this.controls[re]=X,X.setParent(this),X._registerOnCollectionChange(this._onCollectionChange),X)}addControl(re,X,_e={}){this.registerControl(re,X),this.updateValueAndValidity({emitEvent:_e.emitEvent}),this._onCollectionChange()}removeControl(re,X={}){this.controls[re]&&this.controls[re]._registerOnCollectionChange(()=>{}),delete this.controls[re],this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}setControl(re,X,_e={}){this.controls[re]&&this.controls[re]._registerOnCollectionChange(()=>{}),delete this.controls[re],X&&this.registerControl(re,X),this.updateValueAndValidity({emitEvent:_e.emitEvent}),this._onCollectionChange()}contains(re){return this.controls.hasOwnProperty(re)&&this.controls[re].enabled}setValue(re,X={}){(function at(te,re,X){te._forEachChild((_e,gt)=>{if(void 0===X[gt])throw new D.wOt(1002,"")})})(this,0,re),Object.keys(re).forEach(_e=>{(function be(te,re,X){const _e=te.controls;if(!(re?Object.keys(_e):_e).length)throw new D.wOt(1e3,"");if(!_e[X])throw new D.wOt(1001,"")})(this,!0,_e),this.controls[_e].setValue(re[_e],{onlySelf:!0,emitEvent:X.emitEvent})}),this.updateValueAndValidity(X)}patchValue(re,X={}){null!=re&&(Object.keys(re).forEach(_e=>{const gt=this.controls[_e];gt&&gt.patchValue(re[_e],{onlySelf:!0,emitEvent:X.emitEvent})}),this.updateValueAndValidity(X))}reset(re={},X={}){this._forEachChild((_e,gt)=>{_e.reset(re?re[gt]:null,{onlySelf:!0,emitEvent:X.emitEvent})}),this._updatePristine(X,this),this._updateTouched(X,this),this.updateValueAndValidity(X)}getRawValue(){return this._reduceChildren({},(re,X,_e)=>(re[_e]=X.getRawValue(),re))}_syncPendingControls(){let re=this._reduceChildren(!1,(X,_e)=>!!_e._syncPendingControls()||X);return re&&this.updateValueAndValidity({onlySelf:!0}),re}_forEachChild(re){Object.keys(this.controls).forEach(X=>{const _e=this.controls[X];_e&&re(_e,X)})}_setUpControls(){this._forEachChild(re=>{re.setParent(this),re._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(re){for(const[X,_e]of Object.entries(this.controls))if(this.contains(X)&&re(_e))return!0;return!1}_reduceValue(){return this._reduceChildren({},(X,_e,gt)=>((_e.enabled||this.disabled)&&(X[gt]=_e.value),X))}_reduceChildren(re,X){let _e=re;return this._forEachChild((gt,Ei)=>{_e=X(_e,gt,Ei)}),_e}_allControlsDisabled(){for(const re of Object.keys(this.controls))if(this.controls[re].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(re){return this.controls.hasOwnProperty(re)?this.controls[re]:null}}const hi=new D.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Bi}),Bi="always";function xt(te,re,X=Bi){Gs(te,re),re.valueAccessor.writeValue(te.value),(te.disabled||"always"===X)&&re.valueAccessor.setDisabledState?.(te.disabled),function $s(te,re){re.valueAccessor.registerOnChange(X=>{te._pendingValue=X,te._pendingChange=!0,te._pendingDirty=!0,"change"===te.updateOn&&ya(te,re)})}(te,re),function Hn(te,re){const X=(_e,gt)=>{re.valueAccessor.writeValue(_e),gt&&re.viewToModelUpdate(_e)};te.registerOnChange(X),re._registerOnDestroy(()=>{te._unregisterOnChange(X)})}(te,re),function Hs(te,re){re.valueAccessor.registerOnTouched(()=>{te._pendingTouched=!0,"blur"===te.updateOn&&te._pendingChange&&ya(te,re),"submit"!==te.updateOn&&te.markAsTouched()})}(te,re),function Eo(te,re){if(re.valueAccessor.setDisabledState){const X=_e=>{re.valueAccessor.setDisabledState(_e)};te.registerOnDisabledChange(X),re._registerOnDestroy(()=>{te._unregisterOnDisabledChange(X)})}}(te,re)}function Yr(te,re,X=!0){const _e=()=>{};re.valueAccessor&&(re.valueAccessor.registerOnChange(_e),re.valueAccessor.registerOnTouched(_e)),Io(te,re),te&&(re._invokeOnDestroyCallbacks(),te._registerOnCollectionChange(()=>{}))}function or(te,re){te.forEach(X=>{X.registerOnValidatorChange&&X.registerOnValidatorChange(re)})}function Gs(te,re){const X=It(te);null!==re.validator?te.setValidators(kt(X,re.validator)):"function"==typeof X&&te.setValidators([X]);const _e=_n(te);null!==re.asyncValidator?te.setAsyncValidators(kt(_e,re.asyncValidator)):"function"==typeof _e&&te.setAsyncValidators([_e]);const gt=()=>te.updateValueAndValidity();or(re._rawValidators,gt),or(re._rawAsyncValidators,gt)}function Io(te,re){let X=!1;if(null!==te){if(null!==re.validator){const gt=It(te);if(Array.isArray(gt)&&gt.length>0){const Ei=gt.filter(mr=>mr!==re.validator);Ei.length!==gt.length&&(X=!0,te.setValidators(Ei))}}if(null!==re.asyncValidator){const gt=_n(te);if(Array.isArray(gt)&&gt.length>0){const Ei=gt.filter(mr=>mr!==re.asyncValidator);Ei.length!==gt.length&&(X=!0,te.setAsyncValidators(Ei))}}}const _e=()=>{};return or(re._rawValidators,_e),or(re._rawAsyncValidators,_e),X}function ya(te,re){te._pendingDirty&&te.markAsDirty(),te.setValue(te._pendingValue,{emitModelToViewChange:!1}),re.viewToModelUpdate(te._pendingValue),te._pendingChange=!1}function Ui(te,re){Gs(te,re)}function xn(te,re){te._syncPendingControls(),re.forEach(X=>{const _e=X.control;"submit"===_e.updateOn&&_e._pendingChange&&(X.viewToModelUpdate(_e._pendingValue),_e._pendingChange=!1)})}const uo={provide:qt,useExisting:(0,D.Rfq)(()=>go)},Tr=Promise.resolve();let go=(()=>{class te extends qt{get submitted(){return(0,D.O8t)(this.submittedReactive)}constructor(X,_e,gt){super(),this.callSetDisabledState=gt,this._submitted=(0,D.EWP)(()=>this.submittedReactive()),this.submittedReactive=(0,D.vPA)(!1),this._directives=new Set,this.ngSubmit=new D.bkB,this.form=new Fe({},an(X),ui(_e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(X){Tr.then(()=>{const _e=this._findContainer(X.path);X.control=_e.registerControl(X.name,X.control),xt(X.control,X,this.callSetDisabledState),X.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(X)})}getControl(X){return this.form.get(X.path)}removeControl(X){Tr.then(()=>{const _e=this._findContainer(X.path);_e&&_e.removeControl(X.name),this._directives.delete(X)})}addFormGroup(X){Tr.then(()=>{const _e=this._findContainer(X.path),gt=new Fe({});Ui(gt,X),_e.registerControl(X.name,gt),gt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(X){Tr.then(()=>{const _e=this._findContainer(X.path);_e&&_e.removeControl(X.name)})}getFormGroup(X){return this.form.get(X.path)}updateModel(X,_e){Tr.then(()=>{this.form.get(X.path).setValue(_e)})}setValue(X){this.control.setValue(X)}onSubmit(X){return this.submittedReactive.set(!0),xn(this.form,this._directives),this.ngSubmit.emit(X),"dialog"===X?.target?.method}onReset(){this.resetForm()}resetForm(X=void 0){this.form.reset(X),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(X){return X.pop(),X.length?this.form.get(X):this.form}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(Rt,10),D.rXU(On,10),D.rXU(hi,8))};static#t=this.\u0275dir=D.FsC({type:te,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(_e,gt){1&_e&&D.bIt("submit",function(mr){return gt.onSubmit(mr)})("reset",function(){return gt.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D.Jv_([uo]),D.Vt3]})}return te})();function sr(te,re){const X=te.indexOf(re);X>-1&&te.splice(X,1)}function ar(te){return"object"==typeof te&&null!==te&&2===Object.keys(te).length&&"value"in te&&"disabled"in te}const er=class extends Ge{constructor(re=null,X,_e){super(Ee(X),De(_e,X)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(re),this._setUpdateStrategy(X),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ne(X)&&(X.nonNullable||X.initialValueIsDefault)&&(this.defaultValue=ar(re)?re.value:re)}setValue(re,X={}){this.value=this._pendingValue=re,this._onChange.length&&!1!==X.emitModelToViewChange&&this._onChange.forEach(_e=>_e(this.value,!1!==X.emitViewToModelChange)),this.updateValueAndValidity(X)}patchValue(re,X={}){this.setValue(re,X)}reset(re=this.defaultValue,X={}){this._applyFormState(re),this.markAsPristine(X),this.markAsUntouched(X),this.setValue(this.value,X),this._pendingChange=!1}_updateValue(){}_anyControls(re){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(re){this._onChange.push(re)}_unregisterOnChange(re){sr(this._onChange,re)}registerOnDisabledChange(re){this._onDisabledChange.push(re)}_unregisterOnDisabledChange(re){sr(this._onDisabledChange,re)}_forEachChild(re){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(re){ar(re)?(this.value=this._pendingValue=re.value,re.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=re}},Go={provide:yn,useExisting:(0,D.Rfq)(()=>_l)},$l=Promise.resolve();let _l=(()=>{class te extends yn{constructor(X,_e,gt,Ei,mr,io){super(),this._changeDetectorRef=mr,this.callSetDisabledState=io,this.control=new er,this._registered=!1,this.name="",this.update=new D.bkB,this._parent=X,this._setValidators(_e),this._setAsyncValidators(gt),this.valueAccessor=function Ti(te,re){if(!re)return null;let X,_e,gt;return Array.isArray(re),re.forEach(Ei=>{Ei.constructor===bt?X=Ei:function Dn(te){return Object.getPrototypeOf(te.constructor)===ke}(Ei)?_e=Ei:gt=Ei}),gt||_e||X||null}(0,Ei)}ngOnChanges(X){if(this._checkForErrors(),!this._registered||"name"in X){if(this._registered&&(this._checkName(),this.formDirective)){const _e=X.name.previousValue;this.formDirective.removeControl({name:_e,path:this._getPath(_e)})}this._setUpControl()}"isDisabled"in X&&this._updateDisabled(X),function bn(te,re){if(!te.hasOwnProperty("model"))return!1;const X=te.model;return!!X.isFirstChange()||!Object.is(re,X.currentValue)}(X,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(X){this.viewModel=X,this.update.emit(X)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(X){$l.then(()=>{this.control.setValue(X,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(X){const _e=X.isDisabled.currentValue,gt=0!==_e&&(0,D.L39)(_e);$l.then(()=>{gt&&!this.control.disabled?this.control.disable():!gt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(X){return this._parent?function Ri(te,re){return[...re.path,te]}(X,this._parent):[X]}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(qt,9),D.rXU(Rt,10),D.rXU(On,10),D.rXU(Ve,10),D.rXU(D.gRc,8),D.rXU(hi,8))};static#t=this.\u0275dir=D.FsC({type:te,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[D.Jv_([Go]),D.Vt3,D.OA$]})}return te})();const Hl={provide:qt,useExisting:(0,D.Rfq)(()=>ba)};let ba=(()=>{class te extends qt{get submitted(){return(0,D.O8t)(this._submittedReactive)}set submitted(X){this._submittedReactive.set(X)}constructor(X,_e,gt){super(),this.callSetDisabledState=gt,this._submitted=(0,D.EWP)(()=>this._submittedReactive()),this._submittedReactive=(0,D.vPA)(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.bkB,this._setValidators(X),this._setAsyncValidators(_e)}ngOnChanges(X){this._checkFormPresent(),X.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Io(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(X){const _e=this.form.get(X.path);return xt(_e,X,this.callSetDisabledState),_e.updateValueAndValidity({emitEvent:!1}),this.directives.push(X),_e}getControl(X){return this.form.get(X.path)}removeControl(X){Yr(X.control||null,X,!1),function _i(te,re){const X=te.indexOf(re);X>-1&&te.splice(X,1)}(this.directives,X)}addFormGroup(X){this._setUpFormContainer(X)}removeFormGroup(X){this._cleanUpFormContainer(X)}getFormGroup(X){return this.form.get(X.path)}addFormArray(X){this._setUpFormContainer(X)}removeFormArray(X){this._cleanUpFormContainer(X)}getFormArray(X){return this.form.get(X.path)}updateModel(X,_e){this.form.get(X.path).setValue(_e)}onSubmit(X){return this._submittedReactive.set(!0),xn(this.form,this.directives),this.ngSubmit.emit(X),this.form._events.next(new K(this.control)),"dialog"===X?.target?.method}onReset(){this.resetForm()}resetForm(X=void 0){this.form.reset(X),this._submittedReactive.set(!1),this.form._events.next(new de(this.form))}_updateDomValue(){this.directives.forEach(X=>{const _e=X.control,gt=this.form.get(X.path);_e!==gt&&(Yr(_e||null,X),(te=>te instanceof er)(gt)&&(xt(gt,X,this.callSetDisabledState),X.control=gt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(X){const _e=this.form.get(X.path);Ui(_e,X),_e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(X){if(this.form){const _e=this.form.get(X.path);_e&&function Li(te,re){return Io(te,re)}(_e,X)&&_e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gs(this.form,this),this._oldForm&&Io(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(_e){return new(_e||te)(D.rXU(Rt,10),D.rXU(On,10),D.rXU(hi,8))};static#t=this.\u0275dir=D.FsC({type:te,selectors:[["","formGroup",""]],hostBindings:function(_e,gt){1&_e&&D.bIt("submit",function(mr){return gt.onSubmit(mr)})("reset",function(){return gt.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D.Jv_([Hl]),D.Vt3,D.OA$]})}return te})(),Ts=(()=>{class te{constructor(){this._validator=Ut}ngOnChanges(X){if(this.inputName in X){const _e=this.normalizeInput(X[this.inputName].currentValue);this._enabled=this.enabled(_e),this._validator=this._enabled?this.createValidator(_e):Ut,this._onChange&&this._onChange()}}validate(X){return this._validator(X)}registerOnValidatorChange(X){this._onChange=X}enabled(X){return null!=X}static#e=this.\u0275fac=function(_e){return new(_e||te)};static#t=this.\u0275dir=D.FsC({type:te,features:[D.OA$]})}return te})();const Ns={provide:Rt,useExisting:(0,D.Rfq)(()=>os),multi:!0},Xi={provide:Rt,useExisting:(0,D.Rfq)(()=>Bs),multi:!0};let os=(()=>{class te extends Ts{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=D.L39,this.createValidator=X=>sn}enabled(X){return X}static#e=this.\u0275fac=(()=>{let X;return function(gt){return(X||(X=D.xGo(te)))(gt||te)}})();static#t=this.\u0275dir=D.FsC({type:te,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(_e,gt){2&_e&&D.BMQ("required",gt._enabled?"":null)},inputs:{required:"required"},features:[D.Jv_([Ns]),D.Vt3]})}return te})(),Bs=(()=>{class te extends os{constructor(){super(...arguments),this.createValidator=X=>Gt}static#e=this.\u0275fac=(()=>{let X;return function(gt){return(X||(X=D.xGo(te)))(gt||te)}})();static#t=this.\u0275dir=D.FsC({type:te,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(_e,gt){2&_e&&D.BMQ("required",gt._enabled?"":null)},features:[D.Jv_([Xi]),D.Vt3]})}return te})(),lr=(()=>{class te{static#e=this.\u0275fac=function(_e){return new(_e||te)};static#t=this.\u0275mod=D.$C({type:te});static#n=this.\u0275inj=D.G2t({})}return te})(),fs=(()=>{class te{static withConfig(X){return{ngModule:te,providers:[{provide:hi,useValue:X.callSetDisabledState??Bi}]}}static#e=this.\u0275fac=function(_e){return new(_e||te)};static#t=this.\u0275mod=D.$C({type:te});static#n=this.\u0275inj=D.G2t({imports:[lr]})}return te})()},8834:($n,Tt,H)=>{"use strict";H.d(Tt,{$z:()=>At,Hl:()=>mn,It:()=>dt,Sr:()=>Wt,iY:()=>on});var D=H(6860),l=H(3953),ue=H(7645),h=H(6600);const ge=["mat-button",""],Te=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],nt=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Ve=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",st=["mat-fab",""],Ot=["mat-icon-button",""],Mt=["*"],St=new l.nKC("MAT_BUTTON_CONFIG"),Rt=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let On=(()=>{class Sn{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(Nn){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,Nn)}get disableRipple(){return this._disableRipple}set disableRipple(Nn){this._disableRipple=Nn,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(Nn){this._disabled=Nn,this._updateRippleDisabled()}constructor(Nn,tn,an,Pn){this._elementRef=Nn,this._platform=tn,this._ngZone=an,this._animationMode=Pn,this._focusMonitor=(0,l.WQX)(ue.FN),this._rippleLoader=(0,l.WQX)(h.Ej),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const ui=(0,l.WQX)(St,{optional:!0}),kt=Nn.nativeElement,It=kt.classList;this.disabledInteractive=ui?.disabledInteractive??!1,this.color=ui?.color??null,this._rippleLoader?.configureRipple(kt,{className:"mat-mdc-button-ripple"});for(const{attribute:_n,mdcClasses:ni}of Rt)kt.hasAttribute(_n)&&It.add(...ni)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(Nn="program",tn){Nn?this._focusMonitor.focusVia(this._elementRef.nativeElement,Nn,tn):this._elementRef.nativeElement.focus(tn)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(tn){l.QTQ()};static#t=this.\u0275dir=l.FsC({type:Sn,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",l.L39],disabled:[2,"disabled","disabled",l.L39],ariaDisabled:[2,"aria-disabled","ariaDisabled",l.L39],disabledInteractive:[2,"disabledInteractive","disabledInteractive",l.L39]},features:[l.GFd]})}return Sn})(),Zt=(()=>{class Sn extends On{constructor(Nn,tn,an,Pn){super(Nn,tn,an,Pn),this._haltDisabledEvents=ui=>{this.disabled&&(ui.preventDefault(),ui.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_getAriaDisabled(){return null==this.ariaDisabled?this.disabled:this.ariaDisabled}static#e=this.\u0275fac=function(tn){l.QTQ()};static#t=this.\u0275dir=l.FsC({type:Sn,inputs:{tabIndex:[2,"tabIndex","tabIndex",Nn=>null==Nn?void 0:(0,l.Udg)(Nn)]},features:[l.GFd,l.Vt3]})}return Sn})(),At=(()=>{class Sn extends On{constructor(Nn,tn,an,Pn){super(Nn,tn,an,Pn)}static#e=this.\u0275fac=function(tn){return new(tn||Sn)(l.rXU(l.aKT),l.rXU(D.OD),l.rXU(l.SKi),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:Sn,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(tn,an){2&tn&&(l.BMQ("disabled",an._getDisabledAttribute())("aria-disabled",an._getAriaDisabled()),l.HbH(an.color?"mat-"+an.color:""),l.AVh("mat-mdc-button-disabled",an.disabled)("mat-mdc-button-disabled-interactive",an.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===an._animationMode)("mat-unthemed",!an.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[l.Vt3,l.aNF],attrs:ge,ngContentSelectors:nt,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(tn,an){1&tn&&(l.NAR(Te),l.nrm(0,"span",0),l.SdG(1),l.j41(2,"span",1),l.SdG(3,1),l.k0s(),l.SdG(4,2),l.nrm(5,"span",2)(6,"span",3)),2&tn&&l.AVh("mdc-button__ripple",!an._isFab)("mdc-fab__ripple",an._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color);background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow);height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color);background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight);border-radius:var(--mdc-outlined-button-container-shape);border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color);border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return Sn})(),dt=(()=>{class Sn extends Zt{constructor(Nn,tn,an,Pn){super(Nn,tn,an,Pn)}static#e=this.\u0275fac=function(tn){return new(tn||Sn)(l.rXU(l.aKT),l.rXU(D.OD),l.rXU(l.SKi),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:Sn,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(tn,an){2&tn&&(l.BMQ("disabled",an._getDisabledAttribute())("tabindex",an.disabled&&!an.disabledInteractive?-1:an.tabIndex)("aria-disabled",an._getDisabledAttribute()),l.HbH(an.color?"mat-"+an.color:""),l.AVh("mat-mdc-button-disabled",an.disabled)("mat-mdc-button-disabled-interactive",an.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===an._animationMode)("mat-unthemed",!an.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],standalone:!0,features:[l.Vt3,l.aNF],attrs:ge,ngContentSelectors:nt,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(tn,an){1&tn&&(l.NAR(Te),l.nrm(0,"span",0),l.SdG(1),l.j41(2,"span",1),l.SdG(3,1),l.k0s(),l.SdG(4,2),l.nrm(5,"span",2)(6,"span",3)),2&tn&&l.AVh("mdc-button__ripple",!an._isFab)("mdc-fab__ripple",an._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color);background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow);height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color);background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight);border-radius:var(--mdc-outlined-button-container-shape);border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color);border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',Ve],encapsulation:2,changeDetection:0})}return Sn})();const sn=new l.nKC("mat-mdc-fab-default-options",{providedIn:"root",factory:Gt});function Gt(){return{color:"accent"}}const Qt=Gt();let Wt=(()=>{class Sn extends On{constructor(Nn,tn,an,Pn,ui){super(Nn,tn,an,Pn),this._options=ui,this._isFab=!0,this._options=this._options||Qt,this.color=this._options.color||Qt.color}static#e=this.\u0275fac=function(tn){return new(tn||Sn)(l.rXU(l.aKT),l.rXU(D.OD),l.rXU(l.SKi),l.rXU(l.bc$,8),l.rXU(sn,8))};static#t=this.\u0275cmp=l.VBU({type:Sn,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(tn,an){2&tn&&(l.BMQ("disabled",an._getDisabledAttribute())("aria-disabled",an._getAriaDisabled()),l.HbH(an.color?"mat-"+an.color:""),l.AVh("mat-mdc-button-disabled",an.disabled)("mat-mdc-button-disabled-interactive",an.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===an._animationMode)("mat-unthemed",!an.color)("mat-mdc-button-base",!0)("mdc-fab--extended",an.extended)("mat-mdc-extended-fab",an.extended))},inputs:{extended:[2,"extended","extended",l.L39]},exportAs:["matButton"],standalone:!0,features:[l.GFd,l.Vt3,l.aNF],attrs:st,ngContentSelectors:nt,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(tn,an){1&tn&&(l.NAR(Te),l.nrm(0,"span",0),l.SdG(1),l.j41(2,"span",1),l.SdG(3,1),l.k0s(),l.SdG(4,2),l.nrm(5,"span",2)(6,"span",3)),2&tn&&l.AVh("mdc-button__ripple",!an._isFab)("mdc-fab__ripple",an._isFab)},styles:['.mat-mdc-fab-base{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color);border-radius:var(--mdc-fab-container-shape);color:var(--mat-fab-foreground-color, inherit);box-shadow:var(--mdc-fab-container-elevation-shadow)}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color)}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color)}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity)}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity)}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity)}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow)}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color);background-color:var(--mat-fab-disabled-state-container-color)}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color);border-radius:var(--mdc-fab-small-container-shape);color:var(--mat-fab-small-foreground-color, inherit);box-shadow:var(--mdc-fab-small-container-elevation-shadow)}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color)}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity)}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity)}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity)}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow)}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow)}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow)}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color);background-color:var(--mat-fab-small-disabled-state-container-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;box-shadow:var(--mdc-extended-fab-container-elevation-shadow);height:var(--mdc-extended-fab-container-height);border-radius:var(--mdc-extended-fab-container-shape);font-family:var(--mdc-extended-fab-label-text-font);font-size:var(--mdc-extended-fab-label-text-size);font-weight:var(--mdc-extended-fab-label-text-weight);letter-spacing:var(--mdc-extended-fab-label-text-tracking)}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow)}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow)}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow)}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0})}return Sn})(),on=(()=>{class Sn extends On{constructor(Nn,tn,an,Pn){super(Nn,tn,an,Pn),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(tn){return new(tn||Sn)(l.rXU(l.aKT),l.rXU(D.OD),l.rXU(l.SKi),l.rXU(l.bc$,8))};static#t=this.\u0275cmp=l.VBU({type:Sn,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(tn,an){2&tn&&(l.BMQ("disabled",an._getDisabledAttribute())("aria-disabled",an._getAriaDisabled()),l.HbH(an.color?"mat-"+an.color:""),l.AVh("mat-mdc-button-disabled",an.disabled)("mat-mdc-button-disabled-interactive",an.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===an._animationMode)("mat-unthemed",!an.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[l.Vt3,l.aNF],attrs:Ot,ngContentSelectors:Mt,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(tn,an){1&tn&&(l.NAR(),l.nrm(0,"span",0),l.SdG(1),l.nrm(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Ve],encapsulation:2,changeDetection:0})}return Sn})(),mn=(()=>{class Sn{static#e=this.\u0275fac=function(tn){return new(tn||Sn)};static#t=this.\u0275mod=l.$C({type:Sn});static#n=this.\u0275inj=l.G2t({imports:[h.yE,h.pZ,h.yE]})}return Sn})()},6600:($n,Tt,H)=>{"use strict";H.d(Tt,{es:()=>wt,QC:()=>ei,is:()=>si,$E:()=>Ue,yE:()=>Gt,wT:()=>ln,Sy:()=>zn,wg:()=>hn,O5:()=>Gn,r6:()=>vt,Ej:()=>Ee,pZ:()=>nn,ug:()=>Pe,X0:()=>mn,tO:()=>Xe,jb:()=>bi,TL:()=>$t});var D=H(3953),l=H(7645),ue=H(8203),ge=H(177),Te=H(6860),nt=H(4085),ke=H(1413),Ve=H(7336);const ut=["text"],Ot=[[["mat-icon"]],"*"],Mt=["mat-icon","*"];function bt(De,me){if(1&De&&D.nrm(0,"mat-pseudo-checkbox",1),2&De){const ne=D.XpG();D.Y8G("disabled",ne.disabled)("state",ne.selected?"checked":"unchecked")}}function St(De,me){if(1&De&&D.nrm(0,"mat-pseudo-checkbox",3),2&De){const ne=D.XpG();D.Y8G("disabled",ne.disabled)}}function zt(De,me){if(1&De&&(D.j41(0,"span",4),D.EFF(1),D.k0s()),2&De){const ne=D.XpG();D.R7$(),D.SpI("(",ne.group.label,")")}}const Rt=["mat-internal-form-field",""],On=["*"],sn=new D.nKC("mat-sanity-checks",{providedIn:"root",factory:function dt(){return!0}});let Gt=(()=>{class De{constructor(ne,be,at){this._sanityChecks=be,this._document=at,this._hasDoneGlobalChecks=!1,ne._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(ne){return!(0,Te.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[ne])}static#e=this.\u0275fac=function(be){return new(be||De)(D.KVO(l.Q_),D.KVO(sn,8),D.KVO(ge.qQ))};static#t=this.\u0275mod=D.$C({type:De});static#n=this.\u0275inj=D.G2t({imports:[ue.jI,ue.jI]})}return De})();class mn{constructor(me,ne,be,at,Ge){this._defaultMatcher=me,this.ngControl=ne,this._parentFormGroup=be,this._parentForm=at,this._stateChanges=Ge,this.errorState=!1}updateErrorState(){const me=this.errorState,ne=this._parentFormGroup||this._parentForm,be=this.matcher||this._defaultMatcher,at=this.ngControl?this.ngControl.control:null,Ge=be?.isErrorState(at,ne)??!1;Ge!==me&&(this.errorState=Ge,this._stateChanges.next())}}let wt=(()=>{class De{isErrorState(ne,be){return!!(ne&&ne.invalid&&(ne.touched||be&&be.submitted))}static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275prov=D.jDH({token:De,factory:De.\u0275fac,providedIn:"root"})}return De})();var di=function(De){return De[De.FADING_IN=0]="FADING_IN",De[De.VISIBLE=1]="VISIBLE",De[De.FADING_OUT=2]="FADING_OUT",De[De.HIDDEN=3]="HIDDEN",De}(di||{});class Yi{constructor(me,ne,be,at=!1){this._renderer=me,this.element=ne,this.config=be,this._animationForciblyDisabledThroughCss=at,this.state=di.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const _r=(0,Te.BQ)({passive:!0,capture:!0});class Lr{constructor(){this._events=new Map,this._delegateEventHandler=me=>{const ne=(0,Te.Fb)(me);ne&&this._events.get(me.type)?.forEach((be,at)=>{(at===ne||at.contains(ne))&&be.forEach(Ge=>Ge.handleEvent(me))})}}addHandler(me,ne,be,at){const Ge=this._events.get(ne);if(Ge){const Fe=Ge.get(be);Fe?Fe.add(at):Ge.set(be,new Set([at]))}else this._events.set(ne,new Map([[be,new Set([at])]])),me.runOutsideAngular(()=>{document.addEventListener(ne,this._delegateEventHandler,_r)})}removeHandler(me,ne,be){const at=this._events.get(me);if(!at)return;const Ge=at.get(ne);Ge&&(Ge.delete(be),0===Ge.size&&at.delete(ne),0===at.size&&(this._events.delete(me),document.removeEventListener(me,this._delegateEventHandler,_r)))}}const zr={enterDuration:225,exitDuration:150},Ae=(0,Te.BQ)({passive:!0,capture:!0}),qe=["mousedown","touchstart"],Ze=["mouseup","mouseleave","touchend","touchcancel"];class Pe{static#e=this._eventManager=new Lr;constructor(me,ne,be,at){this._target=me,this._ngZone=ne,this._platform=at,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,at.isBrowser&&(this._containerElement=(0,nt.i8)(be))}fadeInRipple(me,ne,be={}){const at=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Ge={...zr,...be.animation};be.centered&&(me=at.left+at.width/2,ne=at.top+at.height/2);const Fe=be.radius||function Je(De,me,ne){const be=Math.max(Math.abs(De-ne.left),Math.abs(De-ne.right)),at=Math.max(Math.abs(me-ne.top),Math.abs(me-ne.bottom));return Math.sqrt(be*be+at*at)}(me,ne,at),ye=me-at.left,$e=ne-at.top,mt=Ge.enterDuration,Lt=document.createElement("div");Lt.classList.add("mat-ripple-element"),Lt.style.left=ye-Fe+"px",Lt.style.top=$e-Fe+"px",Lt.style.height=2*Fe+"px",Lt.style.width=2*Fe+"px",null!=be.color&&(Lt.style.backgroundColor=be.color),Lt.style.transitionDuration=`${mt}ms`,this._containerElement.appendChild(Lt);const kn=window.getComputedStyle(Lt),Bi=kn.transitionDuration,Ri="none"===kn.transitionProperty||"0s"===Bi||"0s, 0s"===Bi||0===at.width&&0===at.height,xt=new Yi(this,Lt,be,Ri);Lt.style.transform="scale3d(1, 1, 1)",xt.state=di.FADING_IN,be.persistent||(this._mostRecentTransientRipple=xt);let Yr=null;return!Ri&&(mt||Ge.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const or=()=>{Yr&&(Yr.fallbackTimer=null),clearTimeout(Gs),this._finishRippleTransition(xt)},Eo=()=>this._destroyRipple(xt),Gs=setTimeout(Eo,mt+100);Lt.addEventListener("transitionend",or),Lt.addEventListener("transitioncancel",Eo),Yr={onTransitionEnd:or,onTransitionCancel:Eo,fallbackTimer:Gs}}),this._activeRipples.set(xt,Yr),(Ri||!mt)&&this._finishRippleTransition(xt),xt}fadeOutRipple(me){if(me.state===di.FADING_OUT||me.state===di.HIDDEN)return;const ne=me.element,be={...zr,...me.config.animation};ne.style.transitionDuration=`${be.exitDuration}ms`,ne.style.opacity="0",me.state=di.FADING_OUT,(me._animationForciblyDisabledThroughCss||!be.exitDuration)&&this._finishRippleTransition(me)}fadeOutAll(){this._getActiveRipples().forEach(me=>me.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(me=>{me.config.persistent||me.fadeOut()})}setupTriggerEvents(me){const ne=(0,nt.i8)(me);!this._platform.isBrowser||!ne||ne===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=ne,qe.forEach(be=>{Pe._eventManager.addHandler(this._ngZone,be,ne,this)}))}handleEvent(me){"mousedown"===me.type?this._onMousedown(me):"touchstart"===me.type?this._onTouchStart(me):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Ze.forEach(ne=>{this._triggerElement.addEventListener(ne,this,Ae)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(me){me.state===di.FADING_IN?this._startFadeOutTransition(me):me.state===di.FADING_OUT&&this._destroyRipple(me)}_startFadeOutTransition(me){const ne=me===this._mostRecentTransientRipple,{persistent:be}=me.config;me.state=di.VISIBLE,!be&&(!ne||!this._isPointerDown)&&me.fadeOut()}_destroyRipple(me){const ne=this._activeRipples.get(me)??null;this._activeRipples.delete(me),this._activeRipples.size||(this._containerRect=null),me===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),me.state=di.HIDDEN,null!==ne&&(me.element.removeEventListener("transitionend",ne.onTransitionEnd),me.element.removeEventListener("transitioncancel",ne.onTransitionCancel),null!==ne.fallbackTimer&&clearTimeout(ne.fallbackTimer)),me.element.remove()}_onMousedown(me){const ne=(0,l._G)(me),be=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!ne&&!be&&(this._isPointerDown=!0,this.fadeInRipple(me.clientX,me.clientY,this._target.rippleConfig))}_onTouchStart(me){if(!this._target.rippleDisabled&&!(0,l.w6)(me)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const ne=me.changedTouches;if(ne)for(let be=0;be<ne.length;be++)this.fadeInRipple(ne[be].clientX,ne[be].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(me=>{!me.config.persistent&&(me.state===di.VISIBLE||me.config.terminateOnPointerUp&&me.state===di.FADING_IN)&&me.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const me=this._triggerElement;me&&(qe.forEach(ne=>Pe._eventManager.removeHandler(ne,me,this)),this._pointerUpEventsRegistered&&(Ze.forEach(ne=>me.removeEventListener(ne,this,Ae)),this._pointerUpEventsRegistered=!1))}}const Ue=new D.nKC("mat-ripple-global-options");let vt=(()=>{class De{get disabled(){return this._disabled}set disabled(ne){ne&&this.fadeOutAllNonPersistent(),this._disabled=ne,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(ne){this._trigger=ne,this._setupTriggerEventsIfEnabled()}constructor(ne,be,at,Ge,Fe){this._elementRef=ne,this._animationMode=Fe,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Ge||{},this._rippleRenderer=new Pe(this,be,ne,at)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(ne,be=0,at){return"number"==typeof ne?this._rippleRenderer.fadeInRipple(ne,be,{...this.rippleConfig,...at}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...ne})}static#e=this.\u0275fac=function(be){return new(be||De)(D.rXU(D.aKT),D.rXU(D.SKi),D.rXU(Te.OD),D.rXU(Ue,8),D.rXU(D.bc$,8))};static#t=this.\u0275dir=D.FsC({type:De,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(be,at){2&be&&D.AVh("mat-ripple-unbounded",at.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return De})(),nn=(()=>{class De{static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275mod=D.$C({type:De});static#n=this.\u0275inj=D.G2t({imports:[Gt,Gt]})}return De})(),hn=(()=>{class De{constructor(ne){this._animationMode=ne,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(be){return new(be||De)(D.rXU(D.bc$,8))};static#t=this.\u0275cmp=D.VBU({type:De,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(be,at){2&be&&D.AVh("mat-pseudo-checkbox-indeterminate","indeterminate"===at.state)("mat-pseudo-checkbox-checked","checked"===at.state)("mat-pseudo-checkbox-disabled",at.disabled)("mat-pseudo-checkbox-minimal","minimal"===at.appearance)("mat-pseudo-checkbox-full","full"===at.appearance)("_mat-animation-noopable","NoopAnimations"===at._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[D.aNF],decls:0,vars:0,template:function(be,at){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return De})(),Gn=(()=>{class De{static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275mod=D.$C({type:De});static#n=this.\u0275inj=D.G2t({imports:[Gt]})}return De})();const si=new D.nKC("MAT_OPTION_PARENT_COMPONENT"),ei=new D.nKC("MatOptgroup");let fr=0;class no{constructor(me,ne=!1){this.source=me,this.isUserInput=ne}}let ln=(()=>{class De{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(ne){this._disabled=ne}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(ne,be,at,Ge){this._element=ne,this._changeDetectorRef=be,this._parent=at,this.group=Ge,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+fr++,this.onSelectionChange=new D.bkB,this._stateChanges=new ke.B}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(ne=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),ne&&this._emitSelectionChangeEvent())}deselect(ne=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),ne&&this._emitSelectionChangeEvent())}focus(ne,be){const at=this._getHostElement();"function"==typeof at.focus&&at.focus(be)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(ne){(ne.keyCode===Ve.Fm||ne.keyCode===Ve.t6)&&!(0,Ve.rp)(ne)&&(this._selectViaInteraction(),ne.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const ne=this.viewValue;ne!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=ne)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(ne=!1){this.onSelectionChange.emit(new no(this,ne))}static#e=this.\u0275fac=function(be){return new(be||De)(D.rXU(D.aKT),D.rXU(D.gRc),D.rXU(si,8),D.rXU(ei,8))};static#t=this.\u0275cmp=D.VBU({type:De,selectors:[["mat-option"]],viewQuery:function(be,at){if(1&be&&D.GBs(ut,7),2&be){let Ge;D.mGM(Ge=D.lsd())&&(at._text=Ge.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(be,at){1&be&&D.bIt("click",function(){return at._selectViaInteraction()})("keydown",function(Fe){return at._handleKeydown(Fe)}),2&be&&(D.Mr5("id",at.id),D.BMQ("aria-selected",at.selected)("aria-disabled",at.disabled.toString()),D.AVh("mdc-list-item--selected",at.selected)("mat-mdc-option-multiple",at.multiple)("mat-mdc-option-active",at.active)("mdc-list-item--disabled",at.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",D.L39]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[D.GFd,D.aNF],ngContentSelectors:Mt,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(be,at){1&be&&(D.NAR(Ot),D.DNE(0,bt,1,2,"mat-pseudo-checkbox",1),D.SdG(1),D.j41(2,"span",2,0),D.SdG(4,1),D.k0s(),D.DNE(5,St,1,1,"mat-pseudo-checkbox",3)(6,zt,2,1,"span",4),D.nrm(7,"div",5)),2&be&&(D.vxM(at.multiple?0:-1),D.R7$(5),D.vxM(at.multiple||!at.selected||at.hideSingleSelectionIndicator?-1:5),D.R7$(),D.vxM(at.group&&at.group._inert?6:-1),D.R7$(),D.Y8G("matRippleTrigger",at._getHostElement())("matRippleDisabled",at.disabled||at.disableRipple))},dependencies:[hn,vt],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight)}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return De})();function bi(De,me,ne){if(ne.length){let be=me.toArray(),at=ne.toArray(),Ge=0;for(let Fe=0;Fe<De+1;Fe++)be[Fe].group&&be[Fe].group===at[Ge]&&Ge++;return Ge}return 0}function $t(De,me,ne,be){return De<ne?De:De+me>ne+be?Math.max(0,De-be+me):ne}let zn=(()=>{class De{static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275mod=D.$C({type:De});static#n=this.\u0275inj=D.G2t({imports:[nn,Gt,Gn]})}return De})();const Cn={capture:!0},Ct=["focus","mousedown","mouseenter","touchstart"],ie="mat-ripple-loader-uninitialized",U="mat-ripple-loader-class-name",K="mat-ripple-loader-centered",de="mat-ripple-loader-disabled";let Ee=(()=>{class De{constructor(){this._document=(0,D.WQX)(ge.qQ,{optional:!0}),this._animationMode=(0,D.WQX)(D.bc$,{optional:!0}),this._globalRippleOptions=(0,D.WQX)(Ue,{optional:!0}),this._platform=(0,D.WQX)(Te.OD),this._ngZone=(0,D.WQX)(D.SKi),this._hosts=new Map,this._onInteraction=ne=>{const be=(0,Te.Fb)(ne);if(be instanceof HTMLElement){const at=be.closest(`[${ie}="${this._globalRippleOptions?.namespace??""}"]`);at&&this._createRipple(at)}},this._ngZone.runOutsideAngular(()=>{for(const ne of Ct)this._document?.addEventListener(ne,this._onInteraction,Cn)})}ngOnDestroy(){const ne=this._hosts.keys();for(const be of ne)this.destroyRipple(be);for(const be of Ct)this._document?.removeEventListener(be,this._onInteraction,Cn)}configureRipple(ne,be){ne.setAttribute(ie,this._globalRippleOptions?.namespace??""),(be.className||!ne.hasAttribute(U))&&ne.setAttribute(U,be.className||""),be.centered&&ne.setAttribute(K,""),be.disabled&&ne.setAttribute(de,"")}getRipple(ne){return this._hosts.get(ne)||this._createRipple(ne)}setDisabled(ne,be){const at=this._hosts.get(ne);at?at.disabled=be:be?ne.setAttribute(de,""):ne.removeAttribute(de)}_createRipple(ne){if(!this._document)return;const be=this._hosts.get(ne);if(be)return be;ne.querySelector(".mat-ripple")?.remove();const at=this._document.createElement("span");at.classList.add("mat-ripple",ne.getAttribute(U)),ne.append(at);const Ge=new vt(new D.aKT(at),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return Ge._isInitialized=!0,Ge.trigger=ne,Ge.centered=ne.hasAttribute(K),Ge.disabled=ne.hasAttribute(de),this.attachRipple(ne,Ge),Ge}attachRipple(ne,be){ne.removeAttribute(ie),this._hosts.set(ne,be)}destroyRipple(ne){const be=this._hosts.get(ne);be&&(be.ngOnDestroy(),this._hosts.delete(ne))}static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275prov=D.jDH({token:De,factory:De.\u0275fac,providedIn:"root"})}return De})(),Xe=(()=>{class De{static#e=this.\u0275fac=function(be){return new(be||De)};static#t=this.\u0275cmp=D.VBU({type:De,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(be,at){2&be&&D.AVh("mdc-form-field--align-end","before"===at.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[D.aNF],attrs:Rt,ngContentSelectors:On,decls:1,vars:0,template:function(be,at){1&be&&(D.NAR(),D.SdG(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return De})()},2102:($n,Tt,H)=>{"use strict";H.d(Tt,{xb:()=>nn,rl:()=>fr,qT:()=>Pe,RG:()=>no,yw:()=>di});var D=H(3953),l=H(8203),ue=H(4085),h=H(6860),ge=H(177),Te=H(8359),nt=H(1413),ke=H(7786),Ve=H(6977),st=H(1985),rt=H(5964),ut=H(4668);class Mt{constructor(bi){this._box=bi,this._destroyed=new nt.B,this._resizeSubject=new nt.B,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver($t=>this._resizeSubject.next($t)))}observe(bi){return this._elementObservables.has(bi)||this._elementObservables.set(bi,new st.c($t=>{const zn=this._resizeSubject.subscribe($t);return this._resizeObserver?.observe(bi,{box:this._box}),()=>{this._resizeObserver?.unobserve(bi),zn.unsubscribe(),this._elementObservables.delete(bi)}}).pipe((0,rt.p)($t=>$t.some(zn=>zn.target===bi)),(0,ut.t)({bufferSize:1,refCount:!0}),(0,Ve.Q)(this._destroyed))),this._elementObservables.get(bi)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let bt=(()=>{class ln{constructor(){this._observers=new Map,this._ngZone=(0,D.WQX)(D.SKi)}ngOnDestroy(){for(const[,$t]of this._observers)$t.destroy();this._observers.clear()}observe($t,zn){const Cn=zn?.box||"content-box";return this._observers.has(Cn)||this._observers.set(Cn,new Mt(Cn)),this._observers.get(Cn).observe($t)}static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275prov=D.jDH({token:ln,factory:ln.\u0275fac,providedIn:"root"})}return ln})();var St=H(9969),zt=H(2318),Rt=H(6600);const On=["notch"],An=["matFormFieldNotchedOutline",""],Zt=["*"],At=["textField"],dt=["iconPrefixContainer"],sn=["textPrefixContainer"],Gt=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Qt=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Wt(ln,bi){1&ln&&D.nrm(0,"span",19)}function He(ln,bi){if(1&ln&&(D.j41(0,"label",18),D.SdG(1,1),D.DNE(2,Wt,1,0,"span",19),D.k0s()),2&ln){const $t=D.XpG(2);D.Y8G("floating",$t._shouldLabelFloat())("monitorResize",$t._hasOutline())("id",$t._labelId),D.BMQ("for",$t._control.disableAutomaticLabeling?null:$t._control.id),D.R7$(2),D.vxM(!$t.hideRequiredMarker&&$t._control.required?2:-1)}}function ft(ln,bi){if(1&ln&&D.DNE(0,He,3,5,"label",18),2&ln){const $t=D.XpG();D.vxM($t._hasFloatingLabel()?0:-1)}}function Ut(ln,bi){1&ln&&D.nrm(0,"div",5)}function on(ln,bi){}function Fn(ln,bi){if(1&ln&&D.DNE(0,on,0,0,"ng-template",11),2&ln){D.XpG(2);const $t=D.sdS(1);D.Y8G("ngTemplateOutlet",$t)}}function mn(ln,bi){if(1&ln&&(D.j41(0,"div",7),D.DNE(1,Fn,1,1,null,11),D.k0s()),2&ln){const $t=D.XpG();D.Y8G("matFormFieldNotchedOutlineOpen",$t._shouldLabelFloat()),D.R7$(),D.vxM($t._forceDisplayInfixLabel()?-1:1)}}function Sn(ln,bi){1&ln&&(D.j41(0,"div",8,2),D.SdG(2,2),D.k0s())}function ai(ln,bi){1&ln&&(D.j41(0,"div",9,3),D.SdG(2,3),D.k0s())}function Nn(ln,bi){}function tn(ln,bi){if(1&ln&&D.DNE(0,Nn,0,0,"ng-template",11),2&ln){D.XpG();const $t=D.sdS(1);D.Y8G("ngTemplateOutlet",$t)}}function an(ln,bi){1&ln&&(D.j41(0,"div",12),D.SdG(1,4),D.k0s())}function Pn(ln,bi){1&ln&&(D.j41(0,"div",13),D.SdG(1,5),D.k0s())}function ui(ln,bi){1&ln&&D.nrm(0,"div",14)}function kt(ln,bi){if(1&ln&&(D.j41(0,"div",16),D.SdG(1,6),D.k0s()),2&ln){const $t=D.XpG();D.Y8G("@transitionMessages",$t._subscriptAnimationState)}}function It(ln,bi){if(1&ln&&(D.j41(0,"mat-hint",20),D.EFF(1),D.k0s()),2&ln){const $t=D.XpG(2);D.Y8G("id",$t._hintLabelId),D.R7$(),D.JRh($t.hintLabel)}}function _n(ln,bi){if(1&ln&&(D.j41(0,"div",17),D.DNE(1,It,2,2,"mat-hint",20),D.SdG(2,7),D.nrm(3,"div",21),D.SdG(4,8),D.k0s()),2&ln){const $t=D.XpG();D.Y8G("@transitionMessages",$t._subscriptAnimationState),D.R7$(),D.vxM($t.hintLabel?1:-1)}}let ni=(()=>{class ln{static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275dir=D.FsC({type:ln,selectors:[["mat-label"]],standalone:!0})}return ln})();const Jn=new D.nKC("MatError");let wt=0,qt=(()=>{class ln{constructor(){this.align="start",this.id="mat-mdc-hint-"+wt++}static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275dir=D.FsC({type:ln,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(zn,Cn){2&zn&&(D.Mr5("id",Cn.id),D.BMQ("align",null),D.AVh("mat-mdc-form-field-hint-end","end"===Cn.align))},inputs:{align:"align",id:"id"},standalone:!0})}return ln})();const yn=new D.nKC("MatPrefix"),yi=new D.nKC("MatSuffix");let di=(()=>{class ln{constructor(){this._isText=!1}set _isTextSelector($t){this._isText=!0}static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275dir=D.FsC({type:ln,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[D.Jv_([{provide:yi,useExisting:ln}])]})}return ln})();const Yi=new D.nKC("FloatingLabelParent");let _r=(()=>{class ln{get floating(){return this._floating}set floating($t){this._floating=$t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize($t){this._monitorResize=$t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor($t){this._elementRef=$t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,D.WQX)(bt),this._ngZone=(0,D.WQX)(D.SKi),this._parent=(0,D.WQX)(Yi),this._resizeSubscription=new Te.yU}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Lr(ln){if(null!==ln.offsetParent)return ln.scrollWidth;const $t=ln.cloneNode(!0);$t.style.setProperty("position","absolute"),$t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild($t);const zn=$t.scrollWidth;return $t.remove(),zn}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(zn){return new(zn||ln)(D.rXU(D.aKT))};static#t=this.\u0275dir=D.FsC({type:ln,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(zn,Cn){2&zn&&D.AVh("mdc-floating-label--float-above",Cn.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return ln})();const zr="mdc-line-ripple--active",rn="mdc-line-ripple--deactivating";let Ae=(()=>{class ln{constructor($t,zn){this._elementRef=$t,this._handleTransitionEnd=Cn=>{const Ct=this._elementRef.nativeElement.classList,ie=Ct.contains(rn);"opacity"===Cn.propertyName&&ie&&Ct.remove(zr,rn)},zn.runOutsideAngular(()=>{$t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const $t=this._elementRef.nativeElement.classList;$t.remove(rn),$t.add(zr)}deactivate(){this._elementRef.nativeElement.classList.add(rn)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(zn){return new(zn||ln)(D.rXU(D.aKT),D.rXU(D.SKi))};static#t=this.\u0275dir=D.FsC({type:ln,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return ln})(),qe=(()=>{class ln{constructor($t,zn){this._elementRef=$t,this._ngZone=zn,this.open=!1}ngAfterViewInit(){const $t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");$t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&($t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>$t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth($t){this._notch.nativeElement.style.width=this.open&&$t?`calc(${$t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(zn){return new(zn||ln)(D.rXU(D.aKT),D.rXU(D.SKi))};static#t=this.\u0275cmp=D.VBU({type:ln,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(zn,Cn){if(1&zn&&D.GBs(On,5),2&zn){let Ct;D.mGM(Ct=D.lsd())&&(Cn._notch=Ct.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(zn,Cn){2&zn&&D.AVh("mdc-notched-outline--notched",Cn.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[D.aNF],attrs:An,ngContentSelectors:Zt,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(zn,Cn){1&zn&&(D.NAR(),D.nrm(0,"div",1),D.j41(1,"div",2,0),D.SdG(3),D.k0s(),D.nrm(4,"div",3))},encapsulation:2,changeDetection:0})}return ln})();const Ze={transitionMessages:(0,St.hZ)("transitionMessages",[(0,St.wk)("enter",(0,St.iF)({opacity:1,transform:"translateY(0%)"})),(0,St.kY)("void => enter",[(0,St.iF)({opacity:0,transform:"translateY(-5px)"}),(0,St.i0)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Pe=(()=>{class ln{static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275dir=D.FsC({type:ln})}return ln})();const nn=new D.nKC("MatFormField"),hn=new D.nKC("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Gn=0,fr=(()=>{class ln{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker($t){this._hideRequiredMarker=(0,ue.he)($t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel($t){$t!==this._floatLabel&&(this._floatLabel=$t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance($t){const zn=this._appearance;this._appearance=$t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==zn&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing($t){this._subscriptSizing=$t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel($t){this._hintLabel=$t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control($t){this._explicitFormFieldControl=$t}constructor($t,zn,Cn,Ct,ie,U,K,de){this._elementRef=$t,this._changeDetectorRef=zn,this._dir=Ct,this._platform=ie,this._defaults=U,this._animationMode=K,this._labelChild=(0,D.sbv)(ni),this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Gn++,this._hintLabelId="mat-mdc-hint-"+Gn++,this._subscriptAnimationState="",this._destroyed=new nt.B,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._injector=(0,D.WQX)(D.zZn),this.getLabelId=(0,D.EWP)(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=(0,D.EWP)(()=>!!this._labelChild()),U&&(U.appearance&&(this.appearance=U.appearance),this._hideRequiredMarker=!!U?.hideRequiredMarker,U.color&&(this.color=U.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const $t=this._control;$t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${$t.controlType}`),$t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),$t.ngControl&&$t.ngControl.valueChanges&&$t.ngControl.valueChanges.pipe((0,Ve.Q)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find($t=>!$t._isText),this._hasTextPrefix=!!this._prefixChildren.find($t=>$t._isText),this._hasIconSuffix=!!this._suffixChildren.find($t=>!$t._isText),this._hasTextSuffix=!!this._suffixChildren.find($t=>$t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,ke.h)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),(0,D.Tzd)(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe((0,Ve.Q)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return!!this._hasFloatingLabel()&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_shouldForward($t){const zn=this._control?this._control.ngControl:null;return zn&&zn[$t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let $t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&$t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const zn=this._hintChildren?this._hintChildren.find(Ct=>"start"===Ct.align):null,Cn=this._hintChildren?this._hintChildren.find(Ct=>"end"===Ct.align):null;zn?$t.push(zn.id):this._hintLabel&&$t.push(this._hintLabelId),Cn&&$t.push(Cn.id)}else this._errorChildren&&$t.push(...this._errorChildren.map(zn=>zn.id));this._control.setDescribedByIds($t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;const $t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void($t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdate=!0);const zn=this._iconPrefixContainer?.nativeElement,Cn=this._textPrefixContainer?.nativeElement,Ct=zn?.getBoundingClientRect().width??0,ie=Cn?.getBoundingClientRect().width??0;$t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${Ct+ie}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const $t=this._elementRef.nativeElement;if($t.getRootNode){const zn=$t.getRootNode();return zn&&zn!==$t}return document.documentElement.contains($t)}static#e=this.\u0275fac=function(zn){return new(zn||ln)(D.rXU(D.aKT),D.rXU(D.gRc),D.rXU(D.SKi),D.rXU(l.dS),D.rXU(h.OD),D.rXU(hn,8),D.rXU(D.bc$,8),D.rXU(ge.qQ))};static#t=this.\u0275cmp=D.VBU({type:ln,selectors:[["mat-form-field"]],contentQueries:function(zn,Cn,Ct){if(1&zn&&(D.C6U(Ct,Cn._labelChild,ni,5),D.wni(Ct,Pe,5),D.wni(Ct,yn,5),D.wni(Ct,yi,5),D.wni(Ct,Jn,5),D.wni(Ct,qt,5)),2&zn){let ie;D.NyB(),D.mGM(ie=D.lsd())&&(Cn._formFieldControl=ie.first),D.mGM(ie=D.lsd())&&(Cn._prefixChildren=ie),D.mGM(ie=D.lsd())&&(Cn._suffixChildren=ie),D.mGM(ie=D.lsd())&&(Cn._errorChildren=ie),D.mGM(ie=D.lsd())&&(Cn._hintChildren=ie)}},viewQuery:function(zn,Cn){if(1&zn&&(D.GBs(At,5),D.GBs(dt,5),D.GBs(sn,5),D.GBs(_r,5),D.GBs(qe,5),D.GBs(Ae,5)),2&zn){let Ct;D.mGM(Ct=D.lsd())&&(Cn._textField=Ct.first),D.mGM(Ct=D.lsd())&&(Cn._iconPrefixContainer=Ct.first),D.mGM(Ct=D.lsd())&&(Cn._textPrefixContainer=Ct.first),D.mGM(Ct=D.lsd())&&(Cn._floatingLabel=Ct.first),D.mGM(Ct=D.lsd())&&(Cn._notchedOutline=Ct.first),D.mGM(Ct=D.lsd())&&(Cn._lineRipple=Ct.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(zn,Cn){2&zn&&D.AVh("mat-mdc-form-field-label-always-float",Cn._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",Cn._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",Cn._hasIconSuffix)("mat-form-field-invalid",Cn._control.errorState)("mat-form-field-disabled",Cn._control.disabled)("mat-form-field-autofilled",Cn._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===Cn._animationMode)("mat-form-field-appearance-fill","fill"==Cn.appearance)("mat-form-field-appearance-outline","outline"==Cn.appearance)("mat-form-field-hide-placeholder",Cn._hasFloatingLabel()&&!Cn._shouldLabelFloat())("mat-focused",Cn._control.focused)("mat-primary","accent"!==Cn.color&&"warn"!==Cn.color)("mat-accent","accent"===Cn.color)("mat-warn","warn"===Cn.color)("ng-untouched",Cn._shouldForward("untouched"))("ng-touched",Cn._shouldForward("touched"))("ng-pristine",Cn._shouldForward("pristine"))("ng-dirty",Cn._shouldForward("dirty"))("ng-valid",Cn._shouldForward("valid"))("ng-invalid",Cn._shouldForward("invalid"))("ng-pending",Cn._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[D.Jv_([{provide:nn,useExisting:ln},{provide:Yi,useExisting:ln}]),D.aNF],ngContentSelectors:Qt,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(zn,Cn){if(1&zn){const Ct=D.RV6();D.NAR(Gt),D.DNE(0,ft,1,1,"ng-template",null,0,D.C5r),D.j41(2,"div",4,1),D.bIt("click",function(U){return D.eBV(Ct),D.Njj(Cn._control.onContainerClick(U))}),D.DNE(4,Ut,1,0,"div",5),D.j41(5,"div",6),D.DNE(6,mn,2,2,"div",7)(7,Sn,3,0,"div",8)(8,ai,3,0,"div",9),D.j41(9,"div",10),D.DNE(10,tn,1,1,null,11),D.SdG(11),D.k0s(),D.DNE(12,an,2,0,"div",12)(13,Pn,2,0,"div",13),D.k0s(),D.DNE(14,ui,1,0,"div",14),D.k0s(),D.j41(15,"div",15),D.DNE(16,kt,2,1,"div",16)(17,_n,5,2,"div",17),D.k0s()}if(2&zn){let Ct;D.R7$(2),D.AVh("mdc-text-field--filled",!Cn._hasOutline())("mdc-text-field--outlined",Cn._hasOutline())("mdc-text-field--no-label",!Cn._hasFloatingLabel())("mdc-text-field--disabled",Cn._control.disabled)("mdc-text-field--invalid",Cn._control.errorState),D.R7$(2),D.vxM(Cn._hasOutline()||Cn._control.disabled?-1:4),D.R7$(2),D.vxM(Cn._hasOutline()?6:-1),D.R7$(),D.vxM(Cn._hasIconPrefix?7:-1),D.R7$(),D.vxM(Cn._hasTextPrefix?8:-1),D.R7$(2),D.vxM(!Cn._hasOutline()||Cn._forceDisplayInfixLabel()?10:-1),D.R7$(2),D.vxM(Cn._hasTextSuffix?12:-1),D.R7$(),D.vxM(Cn._hasIconSuffix?13:-1),D.R7$(),D.vxM(Cn._hasOutline()?-1:14),D.R7$(),D.AVh("mat-mdc-form-field-subscript-dynamic-size","dynamic"===Cn.subscriptSizing),D.R7$(),D.vxM("error"===(Ct=Cn._getDisplayedMessages())?16:"hint"===Ct?17:-1)}},dependencies:[_r,qe,ge.T3,Ae,qt],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color);caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color);caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape)}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color);border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Ze.transitionMessages]},changeDetection:0})}return ln})(),no=(()=>{class ln{static#e=this.\u0275fac=function(zn){return new(zn||ln)};static#t=this.\u0275mod=D.$C({type:ln});static#n=this.\u0275inj=D.G2t({imports:[Rt.yE,ge.MD,zt.w5,Rt.yE]})}return ln})()},9213:($n,Tt,H)=>{"use strict";H.d(Tt,{An:()=>tn,m_:()=>an,tp:()=>Gt});var D=H(3953),l=H(6600),ue=H(177),h=H(7673),ge=H(8810),Te=H(7468),nt=H(8359),ke=H(8141),Ve=H(6354),st=H(9437),rt=H(980),ut=H(7647),Ot=H(6697),Mt=H(1626),bt=H(345);const St=["*"];let zt;function On(Pn){return function Rt(){if(void 0===zt&&(zt=null,typeof window<"u")){const Pn=window;void 0!==Pn.trustedTypes&&(zt=Pn.trustedTypes.createPolicy("angular#components",{createHTML:ui=>ui}))}return zt}()?.createHTML(Pn)||Pn}function An(Pn){return Error(`Unable to find icon with the name "${Pn}"`)}function At(Pn){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Pn}".`)}function dt(Pn){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Pn}".`)}class sn{constructor(ui,kt,It){this.url=ui,this.svgText=kt,this.options=It}}let Gt=(()=>{class Pn{constructor(kt,It,_n,ni){this._httpClient=kt,this._sanitizer=It,this._errorHandler=ni,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=_n}addSvgIcon(kt,It,_n){return this.addSvgIconInNamespace("",kt,It,_n)}addSvgIconLiteral(kt,It,_n){return this.addSvgIconLiteralInNamespace("",kt,It,_n)}addSvgIconInNamespace(kt,It,_n,ni){return this._addSvgIconConfig(kt,It,new sn(_n,null,ni))}addSvgIconResolver(kt){return this._resolvers.push(kt),this}addSvgIconLiteralInNamespace(kt,It,_n,ni){const ri=this._sanitizer.sanitize(D.WPN.HTML,_n);if(!ri)throw dt(_n);const Jn=On(ri);return this._addSvgIconConfig(kt,It,new sn("",Jn,ni))}addSvgIconSet(kt,It){return this.addSvgIconSetInNamespace("",kt,It)}addSvgIconSetLiteral(kt,It){return this.addSvgIconSetLiteralInNamespace("",kt,It)}addSvgIconSetInNamespace(kt,It,_n){return this._addSvgIconSetConfig(kt,new sn(It,null,_n))}addSvgIconSetLiteralInNamespace(kt,It,_n){const ni=this._sanitizer.sanitize(D.WPN.HTML,It);if(!ni)throw dt(It);const ri=On(ni);return this._addSvgIconSetConfig(kt,new sn("",ri,_n))}registerFontClassAlias(kt,It=kt){return this._fontCssClassesByAlias.set(kt,It),this}classNameForFontAlias(kt){return this._fontCssClassesByAlias.get(kt)||kt}setDefaultFontSetClass(...kt){return this._defaultFontSetClass=kt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(kt){const It=this._sanitizer.sanitize(D.WPN.RESOURCE_URL,kt);if(!It)throw At(kt);const _n=this._cachedIconsByUrl.get(It);return _n?(0,h.of)(He(_n)):this._loadSvgIconFromConfig(new sn(kt,null)).pipe((0,ke.M)(ni=>this._cachedIconsByUrl.set(It,ni)),(0,Ve.T)(ni=>He(ni)))}getNamedSvgIcon(kt,It=""){const _n=ft(It,kt);let ni=this._svgIconConfigs.get(_n);if(ni)return this._getSvgFromConfig(ni);if(ni=this._getIconConfigFromResolvers(It,kt),ni)return this._svgIconConfigs.set(_n,ni),this._getSvgFromConfig(ni);const ri=this._iconSetConfigs.get(It);return ri?this._getSvgFromIconSetConfigs(kt,ri):(0,ge.$)(An(_n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(kt){return kt.svgText?(0,h.of)(He(this._svgElementFromConfig(kt))):this._loadSvgIconFromConfig(kt).pipe((0,Ve.T)(It=>He(It)))}_getSvgFromIconSetConfigs(kt,It){const _n=this._extractIconWithNameFromAnySet(kt,It);if(_n)return(0,h.of)(_n);const ni=It.filter(ri=>!ri.svgText).map(ri=>this._loadSvgIconSetFromConfig(ri).pipe((0,st.W)(Jn=>{const wt=`Loading icon set URL: ${this._sanitizer.sanitize(D.WPN.RESOURCE_URL,ri.url)} failed: ${Jn.message}`;return this._errorHandler.handleError(new Error(wt)),(0,h.of)(null)})));return(0,Te.p)(ni).pipe((0,Ve.T)(()=>{const ri=this._extractIconWithNameFromAnySet(kt,It);if(!ri)throw An(kt);return ri}))}_extractIconWithNameFromAnySet(kt,It){for(let _n=It.length-1;_n>=0;_n--){const ni=It[_n];if(ni.svgText&&ni.svgText.toString().indexOf(kt)>-1){const ri=this._svgElementFromConfig(ni),Jn=this._extractSvgIconFromSet(ri,kt,ni.options);if(Jn)return Jn}}return null}_loadSvgIconFromConfig(kt){return this._fetchIcon(kt).pipe((0,ke.M)(It=>kt.svgText=It),(0,Ve.T)(()=>this._svgElementFromConfig(kt)))}_loadSvgIconSetFromConfig(kt){return kt.svgText?(0,h.of)(null):this._fetchIcon(kt).pipe((0,ke.M)(It=>kt.svgText=It))}_extractSvgIconFromSet(kt,It,_n){const ni=kt.querySelector(`[id="${It}"]`);if(!ni)return null;const ri=ni.cloneNode(!0);if(ri.removeAttribute("id"),"svg"===ri.nodeName.toLowerCase())return this._setSvgAttributes(ri,_n);if("symbol"===ri.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(ri),_n);const Jn=this._svgElementFromString(On("<svg></svg>"));return Jn.appendChild(ri),this._setSvgAttributes(Jn,_n)}_svgElementFromString(kt){const It=this._document.createElement("DIV");It.innerHTML=kt;const _n=It.querySelector("svg");if(!_n)throw Error("<svg> tag not found");return _n}_toSvgElement(kt){const It=this._svgElementFromString(On("<svg></svg>")),_n=kt.attributes;for(let ni=0;ni<_n.length;ni++){const{name:ri,value:Jn}=_n[ni];"id"!==ri&&It.setAttribute(ri,Jn)}for(let ni=0;ni<kt.childNodes.length;ni++)kt.childNodes[ni].nodeType===this._document.ELEMENT_NODE&&It.appendChild(kt.childNodes[ni].cloneNode(!0));return It}_setSvgAttributes(kt,It){return kt.setAttribute("fit",""),kt.setAttribute("height","100%"),kt.setAttribute("width","100%"),kt.setAttribute("preserveAspectRatio","xMidYMid meet"),kt.setAttribute("focusable","false"),It&&It.viewBox&&kt.setAttribute("viewBox",It.viewBox),kt}_fetchIcon(kt){const{url:It,options:_n}=kt,ni=_n?.withCredentials??!1;if(!this._httpClient)throw function Zt(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==It)throw Error(`Cannot fetch icon from URL "${It}".`);const ri=this._sanitizer.sanitize(D.WPN.RESOURCE_URL,It);if(!ri)throw At(It);const Jn=this._inProgressUrlFetches.get(ri);if(Jn)return Jn;const fi=this._httpClient.get(ri,{responseType:"text",withCredentials:ni}).pipe((0,Ve.T)(wt=>On(wt)),(0,rt.j)(()=>this._inProgressUrlFetches.delete(ri)),(0,ut.u)());return this._inProgressUrlFetches.set(ri,fi),fi}_addSvgIconConfig(kt,It,_n){return this._svgIconConfigs.set(ft(kt,It),_n),this}_addSvgIconSetConfig(kt,It){const _n=this._iconSetConfigs.get(kt);return _n?_n.push(It):this._iconSetConfigs.set(kt,[It]),this}_svgElementFromConfig(kt){if(!kt.svgElement){const It=this._svgElementFromString(kt.svgText);this._setSvgAttributes(It,kt.options),kt.svgElement=It}return kt.svgElement}_getIconConfigFromResolvers(kt,It){for(let _n=0;_n<this._resolvers.length;_n++){const ni=this._resolvers[_n](It,kt);if(ni)return Ut(ni)?new sn(ni.url,null,ni.options):new sn(ni,null)}}static#e=this.\u0275fac=function(It){return new(It||Pn)(D.KVO(Mt.Qq,8),D.KVO(bt.up),D.KVO(ue.qQ,8),D.KVO(D.zcH))};static#t=this.\u0275prov=D.jDH({token:Pn,factory:Pn.\u0275fac,providedIn:"root"})}return Pn})();function He(Pn){return Pn.cloneNode(!0)}function ft(Pn,ui){return Pn+":"+ui}function Ut(Pn){return!(!Pn.url||!Pn.options)}const on=new D.nKC("MAT_ICON_DEFAULT_OPTIONS"),Fn=new D.nKC("mat-icon-location",{providedIn:"root",factory:function mn(){const Pn=(0,D.WQX)(ue.qQ),ui=Pn?Pn.location:null;return{getPathname:()=>ui?ui.pathname+ui.search:""}}}),Sn=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ai=Sn.map(Pn=>`[${Pn}]`).join(", "),Nn=/^url\(['"]?#(.*?)['"]?\)$/;let tn=(()=>{class Pn{get color(){return this._color||this._defaultColor}set color(kt){this._color=kt}get svgIcon(){return this._svgIcon}set svgIcon(kt){kt!==this._svgIcon&&(kt?this._updateSvgIcon(kt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=kt)}get fontSet(){return this._fontSet}set fontSet(kt){const It=this._cleanupFontValue(kt);It!==this._fontSet&&(this._fontSet=It,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(kt){const It=this._cleanupFontValue(kt);It!==this._fontIcon&&(this._fontIcon=It,this._updateFontIconClasses())}constructor(kt,It,_n,ni,ri,Jn){this._elementRef=kt,this._iconRegistry=It,this._location=ni,this._errorHandler=ri,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=nt.yU.EMPTY,Jn&&(Jn.color&&(this.color=this._defaultColor=Jn.color),Jn.fontSet&&(this.fontSet=Jn.fontSet)),_n||kt.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(kt){if(!kt)return["",""];const It=kt.split(":");switch(It.length){case 1:return["",It[0]];case 2:return It;default:throw Error(`Invalid icon name: "${kt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const kt=this._elementsWithExternalReferences;if(kt&&kt.size){const It=this._location.getPathname();It!==this._previousPath&&(this._previousPath=It,this._prependPathToReferences(It))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(kt){this._clearSvgElement();const It=this._location.getPathname();this._previousPath=It,this._cacheChildrenWithExternalReferences(kt),this._prependPathToReferences(It),this._elementRef.nativeElement.appendChild(kt)}_clearSvgElement(){const kt=this._elementRef.nativeElement;let It=kt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();It--;){const _n=kt.childNodes[It];(1!==_n.nodeType||"svg"===_n.nodeName.toLowerCase())&&_n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const kt=this._elementRef.nativeElement,It=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(_n=>_n.length>0);this._previousFontSetClass.forEach(_n=>kt.classList.remove(_n)),It.forEach(_n=>kt.classList.add(_n)),this._previousFontSetClass=It,this.fontIcon!==this._previousFontIconClass&&!It.includes("mat-ligature-font")&&(this._previousFontIconClass&&kt.classList.remove(this._previousFontIconClass),this.fontIcon&&kt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(kt){return"string"==typeof kt?kt.trim().split(" ")[0]:kt}_prependPathToReferences(kt){const It=this._elementsWithExternalReferences;It&&It.forEach((_n,ni)=>{_n.forEach(ri=>{ni.setAttribute(ri.name,`url('${kt}#${ri.value}')`)})})}_cacheChildrenWithExternalReferences(kt){const It=kt.querySelectorAll(ai),_n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let ni=0;ni<It.length;ni++)Sn.forEach(ri=>{const Jn=It[ni],fi=Jn.getAttribute(ri),wt=fi?fi.match(Nn):null;if(wt){let qt=_n.get(Jn);qt||(qt=[],_n.set(Jn,qt)),qt.push({name:ri,value:wt[1]})}})}_updateSvgIcon(kt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),kt){const[It,_n]=this._splitIconName(kt);It&&(this._svgNamespace=It),_n&&(this._svgName=_n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(_n,It).pipe((0,Ot.s)(1)).subscribe(ni=>this._setSvgElement(ni),ni=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${It}:${_n}! ${ni.message}`))})}}static#e=this.\u0275fac=function(It){return new(It||Pn)(D.rXU(D.aKT),D.rXU(Gt),D.kS0("aria-hidden"),D.rXU(Fn),D.rXU(D.zcH),D.rXU(on,8))};static#t=this.\u0275cmp=D.VBU({type:Pn,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(It,_n){2&It&&(D.BMQ("data-mat-icon-type",_n._usingFontIcon()?"font":"svg")("data-mat-icon-name",_n._svgName||_n.fontIcon)("data-mat-icon-namespace",_n._svgNamespace||_n.fontSet)("fontIcon",_n._usingFontIcon()?_n.fontIcon:null),D.HbH(_n.color?"mat-"+_n.color:""),D.AVh("mat-icon-inline",_n.inline)("mat-icon-no-color","primary"!==_n.color&&"accent"!==_n.color&&"warn"!==_n.color))},inputs:{color:"color",inline:[2,"inline","inline",D.L39],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[D.GFd,D.aNF],ngContentSelectors:St,decls:1,vars:0,template:function(It,_n){1&It&&(D.NAR(),D.SdG(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return Pn})(),an=(()=>{class Pn{static#e=this.\u0275fac=function(It){return new(It||Pn)};static#t=this.\u0275mod=D.$C({type:Pn});static#n=this.\u0275inj=D.G2t({imports:[l.yE,l.yE]})}return Pn})()},2798:($n,Tt,H)=>{"use strict";H.d(Tt,{VO:()=>_n,Ve:()=>ri});var D=H(7987),l=H(177),ue=H(3953),h=H(6600),ge=H(2102),Te=H(3980),nt=H(7645),ke=H(8203),Ve=H(5024),st=H(7336),rt=H(9417),ut=H(1413),Ot=H(9030),Mt=H(7786),bt=H(9172),St=H(5558),zt=H(5964),Rt=H(6354),On=H(3294),An=H(6977),Zt=H(6697),At=H(9969);const dt=["trigger"],sn=["panel"],Gt=[[["mat-select-trigger"]],"*"],Qt=["mat-select-trigger","*"];function Wt(Jn,fi){if(1&Jn&&(ue.j41(0,"span",4),ue.EFF(1),ue.k0s()),2&Jn){const wt=ue.XpG();ue.R7$(),ue.JRh(wt.placeholder)}}function He(Jn,fi){1&Jn&&ue.SdG(0)}function ft(Jn,fi){if(1&Jn&&(ue.j41(0,"span",11),ue.EFF(1),ue.k0s()),2&Jn){const wt=ue.XpG(2);ue.R7$(),ue.JRh(wt.triggerValue)}}function Ut(Jn,fi){if(1&Jn&&(ue.j41(0,"span",5),ue.DNE(1,He,1,0)(2,ft,2,1,"span",11),ue.k0s()),2&Jn){const wt=ue.XpG();ue.R7$(),ue.vxM(wt.customTrigger?1:2)}}function on(Jn,fi){if(1&Jn){const wt=ue.RV6();ue.j41(0,"div",12,1),ue.bIt("@transformPanel.done",function(yn){ue.eBV(wt);const gi=ue.XpG();return ue.Njj(gi._panelDoneAnimatingStream.next(yn.toState))})("keydown",function(yn){ue.eBV(wt);const gi=ue.XpG();return ue.Njj(gi._handleKeydown(yn))}),ue.SdG(2,1),ue.k0s()}if(2&Jn){const wt=ue.XpG();ue.ZvI("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",wt._getPanelTheme(),""),ue.Y8G("ngClass",wt.panelClass)("@transformPanel","showing"),ue.BMQ("id",wt.id+"-panel")("aria-multiselectable",wt.multiple)("aria-label",wt.ariaLabel||null)("aria-labelledby",wt._getPanelAriaLabelledby())}}const Fn={transformPanelWrap:(0,At.hZ)("transformPanelWrap",[(0,At.kY)("* => void",(0,At.P)("@transformPanel",[(0,At.MA)()],{optional:!0}))]),transformPanel:(0,At.hZ)("transformPanel",[(0,At.wk)("void",(0,At.iF)({opacity:0,transform:"scale(1, 0.8)"})),(0,At.kY)("void => showing",(0,At.i0)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,At.iF)({opacity:1,transform:"scale(1, 1)"}))),(0,At.kY)("* => void",(0,At.i0)("100ms linear",(0,At.iF)({opacity:0})))])};let Nn=0;const tn=new ue.nKC("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const Jn=(0,ue.WQX)(D.hJ);return()=>Jn.scrollStrategies.reposition()}}),Pn=new ue.nKC("MAT_SELECT_CONFIG"),ui={provide:tn,deps:[D.hJ],useFactory:function an(Jn){return()=>Jn.scrollStrategies.reposition()}},kt=new ue.nKC("MatSelectTrigger");class It{constructor(fi,wt){this.source=fi,this.value=wt}}let _n=(()=>{class Jn{_scrollOptionIntoView(wt){const qt=this.options.toArray()[wt];if(qt){const yn=this.panel.nativeElement,gi=(0,h.jb)(wt,this.options,this.optionGroups),yi=qt._getHostElement();yn.scrollTop=0===wt&&1===gi?0:(0,h.TL)(yi.offsetTop,yi.offsetHeight,yn.scrollTop,yn.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(wt){return new It(this,wt)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(wt){this._hideSingleSelectionIndicator=wt,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(wt){this._placeholder=wt,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(rt.k0.required)??!1}set required(wt){this._required=wt,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(wt){this._multiple=wt}get compareWith(){return this._compareWith}set compareWith(wt){this._compareWith=wt,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(wt){this._assignValue(wt)&&this._onChange(wt)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(wt){this._errorStateTracker.matcher=wt}get id(){return this._id}set id(wt){this._id=wt||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(wt){this._errorStateTracker.errorState=wt}constructor(wt,qt,yn,gi,yi,di,Yi,_r,Lr,zr,rn,Ae,qe,Ze){this._viewportRuler=wt,this._changeDetectorRef=qt,this._elementRef=yi,this._dir=di,this._parentFormField=Lr,this.ngControl=zr,this._liveAnnouncer=qe,this._defaultOptions=Ze,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(Pe,Je)=>Pe===Je,this._uid="mat-select-"+Nn++,this._triggerAriaLabelledBy=null,this._destroy=new ut.B,this.stateChanges=new ut.B,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Nn++,this._panelDoneAnimatingStream=new ut.B,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new ut.B,this.optionSelectionChanges=(0,Ot.v)(()=>{const Pe=this.options;return Pe?Pe.changes.pipe((0,bt.Z)(Pe),(0,St.n)(()=>(0,Mt.h)(...Pe.map(Je=>Je.onSelectionChange)))):this._initialized.pipe((0,St.n)(()=>this.optionSelectionChanges))}),this.openedChange=new ue.bkB,this._openedStream=this.openedChange.pipe((0,zt.p)(Pe=>Pe),(0,Rt.T)(()=>{})),this._closedStream=this.openedChange.pipe((0,zt.p)(Pe=>!Pe),(0,Rt.T)(()=>{})),this.selectionChange=new ue.bkB,this.valueChange=new ue.bkB,this._trackedModal=null,this._skipPredicate=Pe=>!this.panelOpen&&Pe.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Ze?.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=Ze.typeaheadDebounceInterval),this._errorStateTracker=new h.X0(gi,zr,_r,Yi,this.stateChanges),this._scrollStrategyFactory=Ae,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(rn)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Ve.CB(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,On.F)(),(0,An.Q)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe((0,An.Q)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe((0,An.Q)(this._destroy)).subscribe(wt=>{wt.added.forEach(qt=>qt.select()),wt.removed.forEach(qt=>qt.deselect())}),this.options.changes.pipe((0,bt.Z)(null),(0,An.Q)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const wt=this._getTriggerAriaLabelledby(),qt=this.ngControl;if(wt!==this._triggerAriaLabelledBy){const yn=this._elementRef.nativeElement;this._triggerAriaLabelledBy=wt,wt?yn.setAttribute("aria-labelledby",wt):yn.removeAttribute("aria-labelledby")}qt&&(this._previousControl!==qt.control&&(void 0!==this._previousControl&&null!==qt.disabled&&qt.disabled!==this.disabled&&(this.disabled=qt.disabled),this._previousControl=qt.control),this.updateErrorState())}ngOnChanges(wt){(wt.disabled||wt.userAriaDescribedBy)&&this.stateChanges.next(),wt.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){const wt=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!wt)return;const qt=`${this.id}-panel`;this._trackedModal&&(0,nt.Ae)(this._trackedModal,"aria-owns",qt),(0,nt.px)(wt,"aria-owns",qt),this._trackedModal=wt}_clearFromModal(){this._trackedModal&&((0,nt.Ae)(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(wt){this._assignValue(wt)}registerOnChange(wt){this._onChange=wt}registerOnTouched(wt){this._onTouched=wt}setDisabledState(wt){this.disabled=wt,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const wt=this._selectionModel.selected.map(qt=>qt.viewValue);return this._isRtl()&&wt.reverse(),wt.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(wt){this.disabled||(this.panelOpen?this._handleOpenKeydown(wt):this._handleClosedKeydown(wt))}_handleClosedKeydown(wt){const qt=wt.keyCode,yn=qt===st.n6||qt===st.i7||qt===st.UQ||qt===st.LE,gi=qt===st.Fm||qt===st.t6,yi=this._keyManager;if(!yi.isTyping()&&gi&&!(0,st.rp)(wt)||(this.multiple||wt.altKey)&&yn)wt.preventDefault(),this.open();else if(!this.multiple){const di=this.selected;yi.onKeydown(wt);const Yi=this.selected;Yi&&di!==Yi&&this._liveAnnouncer.announce(Yi.viewValue,1e4)}}_handleOpenKeydown(wt){const qt=this._keyManager,yn=wt.keyCode,gi=yn===st.n6||yn===st.i7,yi=qt.isTyping();if(gi&&wt.altKey)wt.preventDefault(),this.close();else if(yi||yn!==st.Fm&&yn!==st.t6||!qt.activeItem||(0,st.rp)(wt))if(!yi&&this._multiple&&yn===st.A&&wt.ctrlKey){wt.preventDefault();const di=this.options.some(Yi=>!Yi.disabled&&!Yi.selected);this.options.forEach(Yi=>{Yi.disabled||(di?Yi.select():Yi.deselect())})}else{const di=qt.activeItemIndex;qt.onKeydown(wt),this._multiple&&gi&&wt.shiftKey&&qt.activeItem&&qt.activeItemIndex!==di&&qt.activeItem._selectViaInteraction()}else wt.preventDefault(),qt.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Zt.s)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(wt){if(this.options.forEach(qt=>qt.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&wt)Array.isArray(wt),wt.forEach(qt=>this._selectOptionByValue(qt)),this._sortValues();else{const qt=this._selectOptionByValue(wt);qt?this._keyManager.updateActiveItem(qt):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(wt){const qt=this.options.find(yn=>{if(this._selectionModel.isSelected(yn))return!1;try{return null!=yn.value&&this._compareWith(yn.value,wt)}catch{return!1}});return qt&&this._selectionModel.select(qt),qt}_assignValue(wt){return!!(wt!==this._value||this._multiple&&Array.isArray(wt))&&(this.options&&this._setSelectionByValue(wt),this._value=wt,!0)}_getOverlayWidth(wt){return"auto"===this.panelWidth?(wt instanceof D.$Q?wt.elementRef:wt||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}_syncParentProperties(){if(this.options)for(const wt of this.options)wt._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new nt.Au(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const wt=(0,Mt.h)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,An.Q)(wt)).subscribe(qt=>{this._onSelect(qt.source,qt.isUserInput),qt.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Mt.h)(...this.options.map(qt=>qt._stateChanges)).pipe((0,An.Q)(wt)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(wt,qt){const yn=this._selectionModel.isSelected(wt);null!=wt.value||this._multiple?(yn!==wt.selected&&(wt.selected?this._selectionModel.select(wt):this._selectionModel.deselect(wt)),qt&&this._keyManager.setActiveItem(wt),this.multiple&&(this._sortValues(),qt&&this.focus())):(wt.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(wt.value)),yn!==this._selectionModel.isSelected(wt)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const wt=this.options.toArray();this._selectionModel.sort((qt,yn)=>this.sortComparator?this.sortComparator(qt,yn,wt):wt.indexOf(qt)-wt.indexOf(yn)),this.stateChanges.next()}}_propagateChanges(wt){let qt;qt=this.multiple?this.selected.map(yn=>yn.value):this.selected?this.selected.value:wt,this._value=qt,this.valueChange.emit(qt),this._onChange(qt),this.selectionChange.emit(this._getChangeEvent(qt)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let wt=-1;for(let qt=0;qt<this.options.length;qt++)if(!this.options.get(qt).disabled){wt=qt;break}this._keyManager.setActiveItem(wt)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(wt){this._elementRef.nativeElement.focus(wt)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const wt=this._parentFormField?.getLabelId();return this.ariaLabelledby?(wt?wt+" ":"")+this.ariaLabelledby:wt}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const wt=this._parentFormField?.getLabelId();let qt=(wt?wt+" ":"")+this._valueId;return this.ariaLabelledby&&(qt+=" "+this.ariaLabelledby),qt}_panelDoneAnimating(wt){this.openedChange.emit(wt)}setDescribedByIds(wt){wt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",wt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static#e=this.\u0275fac=function(qt){return new(qt||Jn)(ue.rXU(Te.Xj),ue.rXU(ue.gRc),ue.rXU(ue.SKi),ue.rXU(h.es),ue.rXU(ue.aKT),ue.rXU(ke.dS,8),ue.rXU(rt.cV,8),ue.rXU(rt.j4,8),ue.rXU(ge.xb,8),ue.rXU(rt.vO,10),ue.kS0("tabindex"),ue.rXU(tn),ue.rXU(nt.Ai),ue.rXU(Pn,8))};static#t=this.\u0275cmp=ue.VBU({type:Jn,selectors:[["mat-select"]],contentQueries:function(qt,yn,gi){if(1&qt&&(ue.wni(gi,kt,5),ue.wni(gi,h.wT,5),ue.wni(gi,h.QC,5)),2&qt){let yi;ue.mGM(yi=ue.lsd())&&(yn.customTrigger=yi.first),ue.mGM(yi=ue.lsd())&&(yn.options=yi),ue.mGM(yi=ue.lsd())&&(yn.optionGroups=yi)}},viewQuery:function(qt,yn){if(1&qt&&(ue.GBs(dt,5),ue.GBs(sn,5),ue.GBs(D.WB,5)),2&qt){let gi;ue.mGM(gi=ue.lsd())&&(yn.trigger=gi.first),ue.mGM(gi=ue.lsd())&&(yn.panel=gi.first),ue.mGM(gi=ue.lsd())&&(yn._overlayDir=gi.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(qt,yn){1&qt&&ue.bIt("keydown",function(yi){return yn._handleKeydown(yi)})("focus",function(){return yn._onFocus()})("blur",function(){return yn._onBlur()}),2&qt&&(ue.BMQ("id",yn.id)("tabindex",yn.disabled?-1:yn.tabIndex)("aria-controls",yn.panelOpen?yn.id+"-panel":null)("aria-expanded",yn.panelOpen)("aria-label",yn.ariaLabel||null)("aria-required",yn.required.toString())("aria-disabled",yn.disabled.toString())("aria-invalid",yn.errorState)("aria-activedescendant",yn._getAriaActiveDescendant()),ue.AVh("mat-mdc-select-disabled",yn.disabled)("mat-mdc-select-invalid",yn.errorState)("mat-mdc-select-required",yn.required)("mat-mdc-select-empty",yn.empty)("mat-mdc-select-multiple",yn.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",ue.L39],disableRipple:[2,"disableRipple","disableRipple",ue.L39],tabIndex:[2,"tabIndex","tabIndex",wt=>null==wt?0:(0,ue.Udg)(wt)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ue.L39],placeholder:"placeholder",required:[2,"required","required",ue.L39],multiple:[2,"multiple","multiple",ue.L39],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",ue.L39],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",ue.Udg],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[ue.Jv_([{provide:ge.qT,useExisting:Jn},{provide:h.is,useExisting:Jn}]),ue.GFd,ue.OA$,ue.aNF],ngContentSelectors:Qt,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(qt,yn){if(1&qt){const gi=ue.RV6();ue.NAR(Gt),ue.j41(0,"div",2,0),ue.bIt("click",function(){return ue.eBV(gi),ue.Njj(yn.open())}),ue.j41(3,"div",3),ue.DNE(4,Wt,2,1,"span",4)(5,Ut,3,1,"span",5),ue.k0s(),ue.j41(6,"div",6)(7,"div",7),ue.qSk(),ue.j41(8,"svg",8),ue.nrm(9,"path",9),ue.k0s()()()(),ue.DNE(10,on,3,9,"ng-template",10),ue.bIt("backdropClick",function(){return ue.eBV(gi),ue.Njj(yn.close())})("attach",function(){return ue.eBV(gi),ue.Njj(yn._onAttached())})("detach",function(){return ue.eBV(gi),ue.Njj(yn.close())})}if(2&qt){const gi=ue.sdS(1);ue.R7$(3),ue.BMQ("id",yn._valueId),ue.R7$(),ue.vxM(yn.empty?4:5),ue.R7$(6),ue.Y8G("cdkConnectedOverlayPanelClass",yn._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",yn._scrollStrategy)("cdkConnectedOverlayOrigin",yn._preferredOverlayOrigin||gi)("cdkConnectedOverlayOpen",yn.panelOpen)("cdkConnectedOverlayPositions",yn._positions)("cdkConnectedOverlayWidth",yn._overlayWidth)}},dependencies:[D.$Q,D.WB,l.YU],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[Fn.transformPanel]},changeDetection:0})}return Jn})(),ri=(()=>{class Jn{static#e=this.\u0275fac=function(qt){return new(qt||Jn)};static#t=this.\u0275mod=ue.$C({type:Jn});static#n=this.\u0275inj=ue.G2t({providers:[ui],imports:[l.MD,D.z_,h.Sy,h.yE,Te.Gj,ge.RG,h.Sy,h.yE]})}return Jn})()},5911:($n,Tt,H)=>{"use strict";H.d(Tt,{KQ:()=>ke,s5:()=>st});var D=H(3953),l=H(6600),ue=H(6860),h=H(177);const ge=["*",[["mat-toolbar-row"]]],Te=["*","mat-toolbar-row"];let nt=(()=>{class rt{static#e=this.\u0275fac=function(Mt){return new(Mt||rt)};static#t=this.\u0275dir=D.FsC({type:rt,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return rt})(),ke=(()=>{class rt{constructor(Ot,Mt,bt){this._elementRef=Ot,this._platform=Mt,this._document=bt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(Mt){return new(Mt||rt)(D.rXU(D.aKT),D.rXU(ue.OD),D.rXU(h.qQ))};static#t=this.\u0275cmp=D.VBU({type:rt,selectors:[["mat-toolbar"]],contentQueries:function(Mt,bt,St){if(1&Mt&&D.wni(St,nt,5),2&Mt){let zt;D.mGM(zt=D.lsd())&&(bt._toolbarRows=zt)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(Mt,bt){2&Mt&&(D.HbH(bt.color?"mat-"+bt.color:""),D.AVh("mat-toolbar-multiple-rows",bt._toolbarRows.length>0)("mat-toolbar-single-row",0===bt._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[D.aNF],ngContentSelectors:Te,decls:2,vars:0,template:function(Mt,bt){1&Mt&&(D.NAR(ge),D.SdG(0),D.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return rt})(),st=(()=>{class rt{static#e=this.\u0275fac=function(Mt){return new(Mt||rt)};static#t=this.\u0275mod=D.$C({type:rt});static#n=this.\u0275inj=D.G2t({imports:[l.yE,l.yE]})}return rt})()},345:($n,Tt,H)=>{"use strict";H.d(Tt,{B7:()=>Gt,Bb:()=>gi,hE:()=>Yi,sG:()=>fi,up:()=>si});var D=H(177),l=H(3953);class ue extends D.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class h extends ue{static makeCurrent(){(0,D.ZD)(new h)}onAndCancel(ie,U,K){return ie.addEventListener(U,K),()=>{ie.removeEventListener(U,K)}}dispatchEvent(ie,U){ie.dispatchEvent(U)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,U){return(U=U||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,U){return"window"===U?window:"document"===U?ie:"body"===U?ie.body:null}getBaseHref(ie){const U=function Te(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==U?null:function nt(Ct){return new URL(Ct,document.baseURI).pathname}(U)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,D._b)(document.cookie,ie)}}let ge=null,Ve=(()=>{class Ct{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(K){return new(K||Ct)};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();const st=new l.nKC("");let rt=(()=>{class Ct{constructor(U,K){this._zone=K,this._eventNameToPlugin=new Map,U.forEach(de=>{de.manager=this}),this._plugins=U.slice().reverse()}addEventListener(U,K,de){return this._findPluginFor(K).addEventListener(U,K,de)}getZone(){return this._zone}_findPluginFor(U){let K=this._eventNameToPlugin.get(U);if(K)return K;if(K=this._plugins.find(Ee=>Ee.supports(U)),!K)throw new l.wOt(5101,!1);return this._eventNameToPlugin.set(U,K),K}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(st),l.KVO(l.SKi))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();class ut{constructor(ie){this._doc=ie}}const Ot="ng-app-id";let Mt=(()=>{class Ct{constructor(U,K,de,Ee={}){this.doc=U,this.appId=K,this.nonce=de,this.platformId=Ee,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,D.Vy)(Ee),this.resetHostNodes()}addStyles(U){for(const K of U)1===this.changeUsageCount(K,1)&&this.onStyleAdded(K)}removeStyles(U){for(const K of U)this.changeUsageCount(K,-1)<=0&&this.onStyleRemoved(K)}ngOnDestroy(){const U=this.styleNodesInDOM;U&&(U.forEach(K=>K.remove()),U.clear());for(const K of this.getAllStyles())this.onStyleRemoved(K);this.resetHostNodes()}addHost(U){this.hostNodes.add(U);for(const K of this.getAllStyles())this.addStyleToHost(U,K)}removeHost(U){this.hostNodes.delete(U)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(U){for(const K of this.hostNodes)this.addStyleToHost(K,U)}onStyleRemoved(U){const K=this.styleRef;K.get(U)?.elements?.forEach(de=>de.remove()),K.delete(U)}collectServerRenderedStyles(){const U=this.doc.head?.querySelectorAll(`style[${Ot}="${this.appId}"]`);if(U?.length){const K=new Map;return U.forEach(de=>{null!=de.textContent&&K.set(de.textContent,de)}),K}return null}changeUsageCount(U,K){const de=this.styleRef;if(de.has(U)){const Ee=de.get(U);return Ee.usage+=K,Ee.usage}return de.set(U,{usage:K,elements:[]}),K}getStyleElement(U,K){const de=this.styleNodesInDOM,Ee=de?.get(K);if(Ee?.parentNode===U)return de.delete(K),Ee.removeAttribute(Ot),Ee;{const Xe=this.doc.createElement("style");return this.nonce&&Xe.setAttribute("nonce",this.nonce),Xe.textContent=K,this.platformIsServer&&Xe.setAttribute(Ot,this.appId),U.appendChild(Xe),Xe}}addStyleToHost(U,K){const de=this.getStyleElement(U,K),Ee=this.styleRef,Xe=Ee.get(K)?.elements;Xe?Xe.push(de):Ee.set(K,{elements:[de],usage:1})}resetHostNodes(){const U=this.hostNodes;U.clear(),U.add(this.doc.head)}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ),l.KVO(l.sZ2),l.KVO(l.BIS,8),l.KVO(l.Agw))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},St=/%COMP%/g,Zt=new l.nKC("",{providedIn:"root",factory:()=>!0});function sn(Ct,ie){return ie.map(U=>U.replace(St,Ct))}let Gt=(()=>{class Ct{constructor(U,K,de,Ee,Xe,De,me,ne=null){this.eventManager=U,this.sharedStylesHost=K,this.appId=de,this.removeStylesOnCompDestroy=Ee,this.doc=Xe,this.platformId=De,this.ngZone=me,this.nonce=ne,this.rendererByCompId=new Map,this.platformIsServer=(0,D.Vy)(De),this.defaultRenderer=new Qt(U,Xe,me,this.platformIsServer)}createRenderer(U,K){if(!U||!K)return this.defaultRenderer;this.platformIsServer&&K.encapsulation===l.gXe.ShadowDom&&(K={...K,encapsulation:l.gXe.Emulated});const de=this.getOrCreateRenderer(U,K);return de instanceof Fn?de.applyToHost(U):de instanceof on&&de.applyStyles(),de}getOrCreateRenderer(U,K){const de=this.rendererByCompId;let Ee=de.get(K.id);if(!Ee){const Xe=this.doc,De=this.ngZone,me=this.eventManager,ne=this.sharedStylesHost,be=this.removeStylesOnCompDestroy,at=this.platformIsServer;switch(K.encapsulation){case l.gXe.Emulated:Ee=new Fn(me,ne,K,this.appId,be,Xe,De,at);break;case l.gXe.ShadowDom:return new Ut(me,ne,U,K,Xe,De,this.nonce,at);default:Ee=new on(me,ne,K,be,Xe,De,at)}de.set(K.id,Ee)}return Ee}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(rt),l.KVO(Mt),l.KVO(l.sZ2),l.KVO(Zt),l.KVO(D.qQ),l.KVO(l.Agw),l.KVO(l.SKi),l.KVO(l.BIS))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();class Qt{constructor(ie,U,K,de){this.eventManager=ie,this.doc=U,this.ngZone=K,this.platformIsServer=de,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ie,U){return U?this.doc.createElementNS(bt[U]||U,ie):this.doc.createElement(ie)}createComment(ie){return this.doc.createComment(ie)}createText(ie){return this.doc.createTextNode(ie)}appendChild(ie,U){(ft(ie)?ie.content:ie).appendChild(U)}insertBefore(ie,U,K){ie&&(ft(ie)?ie.content:ie).insertBefore(U,K)}removeChild(ie,U){ie&&ie.removeChild(U)}selectRootElement(ie,U){let K="string"==typeof ie?this.doc.querySelector(ie):ie;if(!K)throw new l.wOt(-5104,!1);return U||(K.textContent=""),K}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,U,K,de){if(de){U=de+":"+U;const Ee=bt[de];Ee?ie.setAttributeNS(Ee,U,K):ie.setAttribute(U,K)}else ie.setAttribute(U,K)}removeAttribute(ie,U,K){if(K){const de=bt[K];de?ie.removeAttributeNS(de,U):ie.removeAttribute(`${K}:${U}`)}else ie.removeAttribute(U)}addClass(ie,U){ie.classList.add(U)}removeClass(ie,U){ie.classList.remove(U)}setStyle(ie,U,K,de){de&(l.czy.DashCase|l.czy.Important)?ie.style.setProperty(U,K,de&l.czy.Important?"important":""):ie.style[U]=K}removeStyle(ie,U,K){K&l.czy.DashCase?ie.style.removeProperty(U):ie.style[U]=""}setProperty(ie,U,K){null!=ie&&(ie[U]=K)}setValue(ie,U){ie.nodeValue=U}listen(ie,U,K){if("string"==typeof ie&&!(ie=(0,D.QT)().getGlobalEventTarget(this.doc,ie)))throw new Error(`Unsupported event target ${ie} for event ${U}`);return this.eventManager.addEventListener(ie,U,this.decoratePreventDefault(K))}decoratePreventDefault(ie){return U=>{if("__ngUnwrap__"===U)return ie;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ie(U)):ie(U))&&U.preventDefault()}}}function ft(Ct){return"TEMPLATE"===Ct.tagName&&void 0!==Ct.content}class Ut extends Qt{constructor(ie,U,K,de,Ee,Xe,De,me){super(ie,Ee,Xe,me),this.sharedStylesHost=U,this.hostEl=K,this.shadowRoot=K.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ne=sn(de.id,de.styles);for(const be of ne){const at=document.createElement("style");De&&at.setAttribute("nonce",De),at.textContent=be,this.shadowRoot.appendChild(at)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}appendChild(ie,U){return super.appendChild(this.nodeOrShadowRoot(ie),U)}insertBefore(ie,U,K){return super.insertBefore(this.nodeOrShadowRoot(ie),U,K)}removeChild(ie,U){return super.removeChild(this.nodeOrShadowRoot(ie),U)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class on extends Qt{constructor(ie,U,K,de,Ee,Xe,De,me){super(ie,Ee,Xe,De),this.sharedStylesHost=U,this.removeStylesOnCompDestroy=de,this.styles=me?sn(me,K.styles):K.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Fn extends on{constructor(ie,U,K,de,Ee,Xe,De,me){const ne=de+"-"+K.id;super(ie,U,K,Ee,Xe,De,me,ne),this.contentAttr=function At(Ct){return"_ngcontent-%COMP%".replace(St,Ct)}(ne),this.hostAttr=function dt(Ct){return"_nghost-%COMP%".replace(St,Ct)}(ne)}applyToHost(ie){this.applyStyles(),this.setAttribute(ie,this.hostAttr,"")}createElement(ie,U){const K=super.createElement(ie,U);return super.setAttribute(K,this.contentAttr,""),K}}let mn=(()=>{class Ct extends ut{constructor(U){super(U)}supports(U){return!0}addEventListener(U,K,de){return U.addEventListener(K,de,!1),()=>this.removeEventListener(U,K,de)}removeEventListener(U,K,de){return U.removeEventListener(K,de)}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})(),Sn=(()=>{class Ct extends ut{constructor(U){super(U),this.delegate=(0,l.WQX)(l.zAP,{optional:!0})}supports(U){return!!this.delegate&&this.delegate.supports(U)}addEventListener(U,K,de){return this.delegate.addEventListener(U,K,de)}removeEventListener(U,K,de){return this.delegate.removeEventListener(U,K,de)}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();const ai=["alt","control","meta","shift"],Nn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tn={alt:Ct=>Ct.altKey,control:Ct=>Ct.ctrlKey,meta:Ct=>Ct.metaKey,shift:Ct=>Ct.shiftKey};let an=(()=>{class Ct extends ut{constructor(U){super(U)}supports(U){return null!=Ct.parseEventName(U)}addEventListener(U,K,de){const Ee=Ct.parseEventName(K),Xe=Ct.eventCallback(Ee.fullKey,de,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.QT)().onAndCancel(U,Ee.domEventName,Xe))}static parseEventName(U){const K=U.toLowerCase().split("."),de=K.shift();if(0===K.length||"keydown"!==de&&"keyup"!==de)return null;const Ee=Ct._normalizeKey(K.pop());let Xe="",De=K.indexOf("code");if(De>-1&&(K.splice(De,1),Xe="code."),ai.forEach(ne=>{const be=K.indexOf(ne);be>-1&&(K.splice(be,1),Xe+=ne+".")}),Xe+=Ee,0!=K.length||0===Ee.length)return null;const me={};return me.domEventName=de,me.fullKey=Xe,me}static matchEventFullKeyCode(U,K){let de=Nn[U.key]||U.key,Ee="";return K.indexOf("code.")>-1&&(de=U.code,Ee="code."),!(null==de||!de)&&(de=de.toLowerCase()," "===de?de="space":"."===de&&(de="dot"),ai.forEach(Xe=>{Xe!==de&&(0,tn[Xe])(U)&&(Ee+=Xe+".")}),Ee+=de,Ee===K)}static eventCallback(U,K,de){return Ee=>{Ct.matchEventFullKeyCode(Ee,U)&&de.runGuarded(()=>K(Ee))}}static _normalizeKey(U){return"esc"===U?"escape":U}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac})}return Ct})();const fi=(0,l.oH4)(l.fpN,"browser",[{provide:l.Agw,useValue:D.AJ},{provide:l.PLl,useValue:function _n(){h.makeCurrent()},multi:!0},{provide:D.qQ,useFactory:function ri(){return(0,l.TL$)(document),document},deps:[]}]),wt=new l.nKC(""),qt=[{provide:l.e01,useClass:class ke{addToWindow(ie){l.JZv.getAngularTestability=(K,de=!0)=>{const Ee=ie.findTestabilityInTree(K,de);if(null==Ee)throw new l.wOt(5103,!1);return Ee},l.JZv.getAllAngularTestabilities=()=>ie.getAllTestabilities(),l.JZv.getAllAngularRootElements=()=>ie.getAllRootElements(),l.JZv.frameworkStabilizers||(l.JZv.frameworkStabilizers=[]),l.JZv.frameworkStabilizers.push(K=>{const de=l.JZv.getAllAngularTestabilities();let Ee=de.length;const Xe=function(){Ee--,0==Ee&&K()};de.forEach(De=>{De.whenStable(Xe)})})}findTestabilityInTree(ie,U,K){return null==U?null:ie.getTestability(U)??(K?(0,D.QT)().isShadowRoot(U)?this.findTestabilityInTree(ie,U.host,!0):this.findTestabilityInTree(ie,U.parentElement,!0):null)}},deps:[]},{provide:l.WHO,useClass:l.NYb,deps:[l.SKi,l.giA,l.e01]},{provide:l.NYb,useClass:l.NYb,deps:[l.SKi,l.giA,l.e01]}],yn=[{provide:l.H8p,useValue:"root"},{provide:l.zcH,useFactory:function ni(){return new l.zcH},deps:[]},{provide:st,useClass:mn,multi:!0,deps:[D.qQ,l.SKi,l.Agw]},{provide:st,useClass:an,multi:!0,deps:[D.qQ]},{provide:st,useClass:Sn,multi:!0},Gt,Mt,rt,{provide:l._9s,useExisting:Gt},{provide:D.N0,useClass:Ve,deps:[]},[]];let gi=(()=>{class Ct{constructor(U){}static withServerTransition(U){return{ngModule:Ct,providers:[{provide:l.sZ2,useValue:U.appId}]}}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(wt,12))};static#t=this.\u0275mod=l.$C({type:Ct});static#n=this.\u0275inj=l.G2t({providers:[...yn,...qt],imports:[D.MD,l.Hbi]})}return Ct})(),Yi=(()=>{class Ct{constructor(U){this._doc=U}getTitle(){return this._doc.title}setTitle(U){this._doc.title=U||""}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})(),si=(()=>{class Ct{static#e=this.\u0275fac=function(K){return new(K||Ct)};static#t=this.\u0275prov=l.jDH({token:Ct,factory:function(K){let de=null;return de=K?new(K||Ct):l.KVO(ji),de},providedIn:"root"})}return Ct})(),ji=(()=>{class Ct extends si{constructor(U){super(),this._doc=U}sanitize(U,K){if(null==K)return null;switch(U){case l.WPN.NONE:return K;case l.WPN.HTML:return(0,l.ZF7)(K,"HTML")?(0,l.rcV)(K):(0,l.h9k)(this._doc,String(K)).toString();case l.WPN.STYLE:return(0,l.ZF7)(K,"Style")?(0,l.rcV)(K):K;case l.WPN.SCRIPT:if((0,l.ZF7)(K,"Script"))return(0,l.rcV)(K);throw new l.wOt(5200,!1);case l.WPN.URL:return(0,l.ZF7)(K,"URL")?(0,l.rcV)(K):(0,l.$MX)(String(K));case l.WPN.RESOURCE_URL:if((0,l.ZF7)(K,"ResourceURL"))return(0,l.rcV)(K);throw new l.wOt(5201,!1);default:throw new l.wOt(5202,!1)}}bypassSecurityTrustHtml(U){return(0,l.Kcf)(U)}bypassSecurityTrustStyle(U){return(0,l.cWb)(U)}bypassSecurityTrustScript(U){return(0,l.UyX)(U)}bypassSecurityTrustUrl(U){return(0,l.osQ)(U)}bypassSecurityTrustResourceUrl(U){return(0,l.e5t)(U)}static#e=this.\u0275fac=function(K){return new(K||Ct)(l.KVO(D.qQ))};static#t=this.\u0275prov=l.jDH({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})()},803:($n,Tt,H)=>{"use strict";H.d(Tt,{nX:()=>Zs,Ix:()=>Pr,Wk:()=>zs,wQ:()=>la,iI:()=>Uu,n3:()=>vl});var D=H(3953),l=H(4402),ue=H(6648),h=H(7673),ge=H(4412),Te=H(4572),nt=H(9350),ke=H(8793),Ve=H(9030),st=H(1203),rt=H(8810),ut=H(983),Ot=H(1985),Mt=H(8359),bt=H(9974),St=H(4360);function zt(){return(0,bt.N)((R,G)=>{let L=null;R._refCount++;const $=(0,St._)(G,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(L=null);const oe=R._connection,we=L;L=null,oe&&(!we||oe===we)&&oe.unsubscribe(),G.unsubscribe()});R.subscribe($),$.closed||(L=R.connect())})}class Rt extends Ot.c{constructor(G,L){super(),this.source=G,this.subjectFactory=L,this._subject=null,this._refCount=0,this._connection=null,(0,bt.S)(G)&&(this.lift=G.lift)}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:G}=this;this._subject=this._connection=null,G?.unsubscribe()}connect(){let G=this._connection;if(!G){G=this._connection=new Mt.yU;const L=this.getSubject();G.add(this.source.subscribe((0,St._)(L,void 0,()=>{this._teardown(),L.complete()},$=>{this._teardown(),L.error($)},()=>this._teardown()))),G.closed&&(this._connection=null,G=Mt.yU.EMPTY)}return G}refCount(){return zt()(this)}}var On=H(1413),An=H(177),Zt=H(6354),At=H(5558),dt=H(6697),sn=H(9172),Gt=H(5964),Qt=H(1397),Wt=H(1594),He=H(274),ft=H(8141),Ut=H(9437),on=H(2816),Fn=H(9901);function mn(R){return R<=0?()=>ut.w:(0,bt.N)((G,L)=>{let $=[];G.subscribe((0,St._)(L,oe=>{$.push(oe),R<$.length&&$.shift()},()=>{for(const oe of $)L.next(oe);L.complete()},void 0,()=>{$=null}))})}var Sn=H(3774),ai=H(3669),tn=H(3703),an=H(980),Pn=H(6977),ui=H(6365),kt=H(345);const It="primary",_n=Symbol("RouteTitle");class ni{constructor(G){this.params=G||{}}has(G){return Object.prototype.hasOwnProperty.call(this.params,G)}get(G){if(this.has(G)){const L=this.params[G];return Array.isArray(L)?L[0]:L}return null}getAll(G){if(this.has(G)){const L=this.params[G];return Array.isArray(L)?L:[L]}return[]}get keys(){return Object.keys(this.params)}}function ri(R){return new ni(R)}function Jn(R,G,L){const $=L.path.split("/");if($.length>R.length||"full"===L.pathMatch&&(G.hasChildren()||$.length<R.length))return null;const oe={};for(let we=0;we<$.length;we++){const f=$[we],i=R[we];if(":"===f[0])oe[f.substring(1)]=i;else if(f!==i.path)return null}return{consumed:R.slice(0,$.length),posParams:oe}}function wt(R,G){const L=R?qt(R):void 0,$=G?qt(G):void 0;if(!L||!$||L.length!=$.length)return!1;let oe;for(let we=0;we<L.length;we++)if(oe=L[we],!yn(R[oe],G[oe]))return!1;return!0}function qt(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function yn(R,G){if(Array.isArray(R)&&Array.isArray(G)){if(R.length!==G.length)return!1;const L=[...R].sort(),$=[...G].sort();return L.every((oe,we)=>$[we]===oe)}return R===G}function gi(R){return R.length>0?R[R.length-1]:null}function yi(R){return(0,l.A)(R)?R:(0,D.jNT)(R)?(0,ue.H)(Promise.resolve(R)):(0,h.of)(R)}const di={exact:function zr(R,G,L){if(!nn(R.segments,G.segments)||!Ze(R.segments,G.segments,L)||R.numberOfChildren!==G.numberOfChildren)return!1;for(const $ in G.children)if(!R.children[$]||!zr(R.children[$],G.children[$],L))return!1;return!0},subset:Ae},Yi={exact:function Lr(R,G){return wt(R,G)},subset:function rn(R,G){return Object.keys(G).length<=Object.keys(R).length&&Object.keys(G).every(L=>yn(R[L],G[L]))},ignored:()=>!0};function _r(R,G,L){return di[L.paths](R.root,G.root,L.matrixParams)&&Yi[L.queryParams](R.queryParams,G.queryParams)&&!("exact"===L.fragment&&R.fragment!==G.fragment)}function Ae(R,G,L){return qe(R,G,G.segments,L)}function qe(R,G,L,$){if(R.segments.length>L.length){const oe=R.segments.slice(0,L.length);return!(!nn(oe,L)||G.hasChildren()||!Ze(oe,L,$))}if(R.segments.length===L.length){if(!nn(R.segments,L)||!Ze(R.segments,L,$))return!1;for(const oe in G.children)if(!R.children[oe]||!Ae(R.children[oe],G.children[oe],$))return!1;return!0}{const oe=L.slice(0,R.segments.length),we=L.slice(R.segments.length);return!!(nn(R.segments,oe)&&Ze(R.segments,oe,$)&&R.children[It])&&qe(R.children[It],G,we,$)}}function Ze(R,G,L){return G.every(($,oe)=>Yi[L](R[oe].parameters,$.parameters))}class Pe{constructor(G=new Je([],{}),L={},$=null){this.root=G,this.queryParams=L,this.fragment=$}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){return ji.serialize(this)}}class Je{constructor(G,L){this.segments=G,this.children=L,this.parent=null,Object.values(L).forEach($=>$.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ei(this)}}class Ue{constructor(G,L){this.path=G,this.parameters=L}get parameterMap(){return this._parameterMap??=ri(this.parameters),this._parameterMap}toString(){return Cn(this)}}function nn(R,G){return R.length===G.length&&R.every((L,$)=>L.path===G[$].path)}let Gn=(()=>{class R{static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:()=>new si,providedIn:"root"})}return R})();class si{parse(G){const L=new be(G);return new Pe(L.parseRootSegment(),L.parseQueryParams(),L.parseFragment())}serialize(G){const L=`/${Mi(G.root,!0)}`,$=function ie(R){const G=Object.entries(R).map(([L,$])=>Array.isArray($)?$.map(oe=>`${no(L)}=${no(oe)}`).join("&"):`${no(L)}=${no($)}`).filter(L=>L);return G.length?`?${G.join("&")}`:""}(G.queryParams);return`${L}${$}${"string"==typeof G.fragment?`#${function ln(R){return encodeURI(R)}(G.fragment)}`:""}`}}const ji=new si;function ei(R){return R.segments.map(G=>Cn(G)).join("/")}function Mi(R,G){if(!R.hasChildren())return ei(R);if(G){const L=R.children[It]?Mi(R.children[It],!1):"",$=[];return Object.entries(R.children).forEach(([oe,we])=>{oe!==It&&$.push(`${oe}:${Mi(we,!1)}`)}),$.length>0?`${L}(${$.join("//")})`:L}{const L=function hn(R,G){let L=[];return Object.entries(R.children).forEach(([$,oe])=>{$===It&&(L=L.concat(G(oe,$)))}),Object.entries(R.children).forEach(([$,oe])=>{$!==It&&(L=L.concat(G(oe,$)))}),L}(R,($,oe)=>oe===It?[Mi(R.children[It],!1)]:[`${oe}:${Mi($,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[It]?`${ei(R)}/${L[0]}`:`${ei(R)}/(${L.join("//")})`}}function fr(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function no(R){return fr(R).replace(/%3B/gi,";")}function bi(R){return fr(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $t(R){return decodeURIComponent(R)}function zn(R){return $t(R.replace(/\+/g,"%20"))}function Cn(R){return`${bi(R.path)}${function Ct(R){return Object.entries(R).map(([G,L])=>`;${bi(G)}=${bi(L)}`).join("")}(R.parameters)}`}const U=/^[^\/()?;#]+/;function K(R){const G=R.match(U);return G?G[0]:""}const de=/^[^\/()?;=#]+/,Xe=/^[^=?&#]+/,me=/^[^&#]+/;class be{constructor(G){this.url=G,this.remaining=G}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){const G={};if(this.consumeOptional("?"))do{this.parseQueryParam(G)}while(this.consumeOptional("&"));return G}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const G=[];for(this.peekStartsWith("(")||G.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),G.push(this.parseSegment());let L={};this.peekStartsWith("/(")&&(this.capture("/"),L=this.parseParens(!0));let $={};return this.peekStartsWith("(")&&($=this.parseParens(!1)),(G.length>0||Object.keys(L).length>0)&&($[It]=new Je(G,L)),$}parseSegment(){const G=K(this.remaining);if(""===G&&this.peekStartsWith(";"))throw new D.wOt(4009,!1);return this.capture(G),new Ue($t(G),this.parseMatrixParams())}parseMatrixParams(){const G={};for(;this.consumeOptional(";");)this.parseParam(G);return G}parseParam(G){const L=function Ee(R){const G=R.match(de);return G?G[0]:""}(this.remaining);if(!L)return;this.capture(L);let $="";if(this.consumeOptional("=")){const oe=K(this.remaining);oe&&($=oe,this.capture($))}G[$t(L)]=$t($)}parseQueryParam(G){const L=function De(R){const G=R.match(Xe);return G?G[0]:""}(this.remaining);if(!L)return;this.capture(L);let $="";if(this.consumeOptional("=")){const f=function ne(R){const G=R.match(me);return G?G[0]:""}(this.remaining);f&&($=f,this.capture($))}const oe=zn(L),we=zn($);if(G.hasOwnProperty(oe)){let f=G[oe];Array.isArray(f)||(f=[f],G[oe]=f),f.push(we)}else G[oe]=we}parseParens(G){const L={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const $=K(this.remaining),oe=this.remaining[$.length];if("/"!==oe&&")"!==oe&&";"!==oe)throw new D.wOt(4010,!1);let we;$.indexOf(":")>-1?(we=$.slice(0,$.indexOf(":")),this.capture(we),this.capture(":")):G&&(we=It);const f=this.parseChildren();L[we]=1===Object.keys(f).length?f[It]:new Je([],f),this.consumeOptional("//")}return L}peekStartsWith(G){return this.remaining.startsWith(G)}consumeOptional(G){return!!this.peekStartsWith(G)&&(this.remaining=this.remaining.substring(G.length),!0)}capture(G){if(!this.consumeOptional(G))throw new D.wOt(4011,!1)}}function at(R){return R.segments.length>0?new Je([],{[It]:R}):R}function Ge(R){const G={};for(const[$,oe]of Object.entries(R.children)){const we=Ge(oe);if($===It&&0===we.segments.length&&we.hasChildren())for(const[f,i]of Object.entries(we.children))G[f]=i;else(we.segments.length>0||we.hasChildren())&&(G[$]=we)}return function Fe(R){if(1===R.numberOfChildren&&R.children[It]){const G=R.children[It];return new Je(R.segments.concat(G.segments),G.children)}return R}(new Je(R.segments,G))}function ye(R){return R instanceof Pe}function mt(R){let G;const oe=at(function L(we){const f={};for(const d of we.children){const v=L(d);f[d.outlet]=v}const i=new Je(we.url,f);return we===R&&(G=i),i}(R.root));return G??oe}function Lt(R,G,L,$){let oe=R;for(;oe.parent;)oe=oe.parent;if(0===G.length)return Bi(oe,oe,oe,L,$);const we=function Yr(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new xt(!0,0,R);let G=0,L=!1;const $=R.reduce((oe,we,f)=>{if("object"==typeof we&&null!=we){if(we.outlets){const i={};return Object.entries(we.outlets).forEach(([d,v])=>{i[d]="string"==typeof v?v.split("/"):v}),[...oe,{outlets:i}]}if(we.segmentPath)return[...oe,we.segmentPath]}return"string"!=typeof we?[...oe,we]:0===f?(we.split("/").forEach((i,d)=>{0==d&&"."===i||(0==d&&""===i?L=!0:".."===i?G++:""!=i&&oe.push(i))}),oe):[...oe,we]},[]);return new xt(L,G,$)}(G);if(we.toRoot())return Bi(oe,oe,new Je([],{}),L,$);const f=function Eo(R,G,L){if(R.isAbsolute)return new or(G,!0,0);if(!L)return new or(G,!1,NaN);if(null===L.parent)return new or(L,!0,0);const $=kn(R.commands[0])?0:1;return function Gs(R,G,L){let $=R,oe=G,we=L;for(;we>oe;){if(we-=oe,$=$.parent,!$)throw new D.wOt(4005,!1);oe=$.segments.length}return new or($,!1,oe-we)}(L,L.segments.length-1+$,R.numberOfDoubleDots)}(we,oe,R),i=f.processChildren?Hs(f.segmentGroup,f.index,we.commands):$s(f.segmentGroup,f.index,we.commands);return Bi(oe,f.segmentGroup,i,L,$)}function kn(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function hi(R){return"object"==typeof R&&null!=R&&R.outlets}function Bi(R,G,L,$,oe){let f,we={};$&&Object.entries($).forEach(([d,v])=>{we[d]=Array.isArray(v)?v.map(E=>`${E}`):`${v}`}),f=R===G?L:Ri(R,G,L);const i=at(Ge(f));return new Pe(i,we,oe)}function Ri(R,G,L){const $={};return Object.entries(R.children).forEach(([oe,we])=>{$[oe]=we===G?L:Ri(we,G,L)}),new Je(R.segments,$)}class xt{constructor(G,L,$){if(this.isAbsolute=G,this.numberOfDoubleDots=L,this.commands=$,G&&$.length>0&&kn($[0]))throw new D.wOt(4003,!1);const oe=$.find(hi);if(oe&&oe!==gi($))throw new D.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class or{constructor(G,L,$){this.segmentGroup=G,this.processChildren=L,this.index=$}}function $s(R,G,L){if(R??=new Je([],{}),0===R.segments.length&&R.hasChildren())return Hs(R,G,L);const $=function ya(R,G,L){let $=0,oe=G;const we={match:!1,pathIndex:0,commandIndex:0};for(;oe<R.segments.length;){if($>=L.length)return we;const f=R.segments[oe],i=L[$];if(hi(i))break;const d=`${i}`,v=$<L.length-1?L[$+1]:null;if(oe>0&&void 0===d)break;if(d&&v&&"object"==typeof v&&void 0===v.outlets){if(!Xo(d,v,f))return we;$+=2}else{if(!Xo(d,{},f))return we;$++}oe++}return{match:!0,pathIndex:oe,commandIndex:$}}(R,G,L),oe=L.slice($.commandIndex);if($.match&&$.pathIndex<R.segments.length){const we=new Je(R.segments.slice(0,$.pathIndex),{});return we.children[It]=new Je(R.segments.slice($.pathIndex),R.children),Hs(we,0,oe)}return $.match&&0===oe.length?new Je(R.segments,{}):$.match&&!R.hasChildren()?Hn(R,G,L):$.match?Hs(R,0,oe):Hn(R,G,L)}function Hs(R,G,L){if(0===L.length)return new Je(R.segments,{});{const $=function Io(R){return hi(R[0])?R[0].outlets:{[It]:R}}(L),oe={};if(Object.keys($).some(we=>we!==It)&&R.children[It]&&1===R.numberOfChildren&&0===R.children[It].segments.length){const we=Hs(R.children[It],G,L);return new Je(R.segments,we.children)}return Object.entries($).forEach(([we,f])=>{"string"==typeof f&&(f=[f]),null!==f&&(oe[we]=$s(R.children[we],G,f))}),Object.entries(R.children).forEach(([we,f])=>{void 0===$[we]&&(oe[we]=f)}),new Je(R.segments,oe)}}function Hn(R,G,L){const $=R.segments.slice(0,G);let oe=0;for(;oe<L.length;){const we=L[oe];if(hi(we)){const d=Ui(we.outlets);return new Je($,d)}if(0===oe&&kn(L[0])){$.push(new Ue(R.segments[G].path,Li(L[0]))),oe++;continue}const f=hi(we)?we.outlets[It]:`${we}`,i=oe<L.length-1?L[oe+1]:null;f&&i&&kn(i)?($.push(new Ue(f,Li(i))),oe+=2):($.push(new Ue(f,{})),oe++)}return new Je($,{})}function Ui(R){const G={};return Object.entries(R).forEach(([L,$])=>{"string"==typeof $&&($=[$]),null!==$&&(G[L]=Hn(new Je([],{}),0,$))}),G}function Li(R){const G={};return Object.entries(R).forEach(([L,$])=>G[L]=`${$}`),G}function Xo(R,G,L){return R==L.path&&wt(G,L.parameters)}const Oe="imperative";var Be=function(R){return R[R.NavigationStart=0]="NavigationStart",R[R.NavigationEnd=1]="NavigationEnd",R[R.NavigationCancel=2]="NavigationCancel",R[R.NavigationError=3]="NavigationError",R[R.RoutesRecognized=4]="RoutesRecognized",R[R.ResolveStart=5]="ResolveStart",R[R.ResolveEnd=6]="ResolveEnd",R[R.GuardsCheckStart=7]="GuardsCheckStart",R[R.GuardsCheckEnd=8]="GuardsCheckEnd",R[R.RouteConfigLoadStart=9]="RouteConfigLoadStart",R[R.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",R[R.ChildActivationStart=11]="ChildActivationStart",R[R.ChildActivationEnd=12]="ChildActivationEnd",R[R.ActivationStart=13]="ActivationStart",R[R.ActivationEnd=14]="ActivationEnd",R[R.Scroll=15]="Scroll",R[R.NavigationSkipped=16]="NavigationSkipped",R}(Be||{});class ot{constructor(G,L){this.id=G,this.url=L}}class Yt extends ot{constructor(G,L,$="imperative",oe=null){super(G,L),this.type=Be.NavigationStart,this.navigationTrigger=$,this.restoredState=oe}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bn extends ot{constructor(G,L,$){super(G,L),this.urlAfterRedirects=$,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Dn=function(R){return R[R.Redirect=0]="Redirect",R[R.SupersededByNewNavigation=1]="SupersededByNewNavigation",R[R.NoDataFromResolver=2]="NoDataFromResolver",R[R.GuardRejected=3]="GuardRejected",R}(Dn||{}),xn=function(R){return R[R.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",R[R.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",R}(xn||{});class Ti extends ot{constructor(G,L,$,oe){super(G,L),this.reason=$,this.code=oe,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _i extends ot{constructor(G,L,$,oe){super(G,L),this.reason=$,this.code=oe,this.type=Be.NavigationSkipped}}class wr extends ot{constructor(G,L,$,oe){super(G,L),this.error=$,this.target=oe,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uo extends ot{constructor(G,L,$,oe){super(G,L),this.urlAfterRedirects=$,this.state=oe,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends ot{constructor(G,L,$,oe){super(G,L),this.urlAfterRedirects=$,this.state=oe,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go extends ot{constructor(G,L,$,oe,we){super(G,L),this.urlAfterRedirects=$,this.state=oe,this.shouldActivate=we,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sr extends ot{constructor(G,L,$,oe){super(G,L),this.urlAfterRedirects=$,this.state=oe,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends ot{constructor(G,L,$,oe){super(G,L),this.urlAfterRedirects=$,this.state=oe,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class er{constructor(G){this.route=G,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vr{constructor(G){this.route=G,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dr{constructor(G){this.snapshot=G,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Co{constructor(G){this.snapshot=G,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dr{constructor(G){this.snapshot=G,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(G){this.snapshot=G,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Or{constructor(G,L,$){this.routerEvent=G,this.position=L,this.anchor=$,this.type=Be.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Yo{}class Ws{constructor(G,L){this.url=G,this.navigationBehaviorOptions=L}}function Ps(R){return R.outlet||It}function Ls(R){if(!R)return null;if(R.routeConfig?._injector)return R.routeConfig._injector;for(let G=R.parent;G;G=G.parent){const L=G.routeConfig;if(L?._loadedInjector)return L._loadedInjector;if(L?._injector)return L._injector}return null}class va{get injector(){return Ls(this.route?.snapshot)??this.rootInjector}set injector(G){}constructor(G){this.rootInjector=G,this.outlet=null,this.route=null,this.children=new Cs(this.rootInjector),this.attachRef=null}}let Cs=(()=>{class R{constructor(L){this.rootInjector=L,this.contexts=new Map}onChildOutletCreated(L,$){const oe=this.getOrCreateContext(L);oe.outlet=$,this.contexts.set(L,oe)}onChildOutletDestroyed(L){const $=this.getContext(L);$&&($.outlet=null,$.attachRef=null)}onOutletDeactivated(){const L=this.contexts;return this.contexts=new Map,L}onOutletReAttached(L){this.contexts=L}getOrCreateContext(L){let $=this.getContext(L);return $||($=new va(this.rootInjector),this.contexts.set(L,$)),$}getContext(L){return this.contexts.get(L)||null}static#e=this.\u0275fac=function($){return new($||R)(D.KVO(D.uvJ))};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class Ks{constructor(G){this._root=G}get root(){return this._root.value}parent(G){const L=this.pathFromRoot(G);return L.length>1?L[L.length-2]:null}children(G){const L=Hl(G,this._root);return L?L.children.map($=>$.value):[]}firstChild(G){const L=Hl(G,this._root);return L&&L.children.length>0?L.children[0].value:null}siblings(G){const L=ba(G,this._root);return L.length<2?[]:L[L.length-2].children.map(oe=>oe.value).filter(oe=>oe!==G)}pathFromRoot(G){return ba(G,this._root).map(L=>L.value)}}function Hl(R,G){if(R===G.value)return G;for(const L of G.children){const $=Hl(R,L);if($)return $}return null}function ba(R,G){if(R===G.value)return[G];for(const L of G.children){const $=ba(R,L);if($.length)return $.unshift(G),$}return[]}class Ko{constructor(G,L){this.value=G,this.children=L}toString(){return`TreeNode(${this.value})`}}function ta(R){const G={};return R&&R.children.forEach(L=>G[L.value.outlet]=L),G}class Wl extends Ks{constructor(G,L){super(G),this.snapshot=L,ds(this,G)}toString(){return this.snapshot.toString()}}function rs(R){const G=function xa(R){const we=new dc([],{},{},"",{},It,R,null,{});return new Ya("",new Ko(we,[]))}(R),L=new ge.t([new Ue("",{})]),$=new ge.t({}),oe=new ge.t({}),we=new ge.t({}),f=new ge.t(""),i=new Zs(L,$,we,f,oe,It,R,G.root);return i.snapshot=G.root,new Wl(new Ko(i,[]),G)}class Zs{constructor(G,L,$,oe,we,f,i,d){this.urlSubject=G,this.paramsSubject=L,this.queryParamsSubject=$,this.fragmentSubject=oe,this.dataSubject=we,this.outlet=f,this.component=i,this._futureSnapshot=d,this.title=this.dataSubject?.pipe((0,Zt.T)(v=>v[_n]))??(0,h.of)(void 0),this.url=G,this.params=L,this.queryParams=$,this.fragment=oe,this.data=we}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Zt.T)(G=>ri(G))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Zt.T)(G=>ri(G))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wa(R,G,L="emptyOnly"){let $;const{routeConfig:oe}=R;return $=null===G||"always"!==L&&""!==oe?.path&&(G.component||G.routeConfig?.loadComponent)?{params:{...R.params},data:{...R.data},resolve:{...R.data,...R._resolvedData??{}}}:{params:{...G.params,...R.params},data:{...G.data,...R.data},resolve:{...R.data,...G.data,...oe?.data,...R._resolvedData}},oe&&na(oe)&&($.resolve[_n]=oe.title),$}class dc{get title(){return this.data?.[_n]}constructor(G,L,$,oe,we,f,i,d,v){this.url=G,this.params=L,this.queryParams=$,this.fragment=oe,this.data=we,this.outlet=f,this.component=i,this.routeConfig=d,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ri(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map($=>$.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ya extends Ks{constructor(G,L){super(L),this.url=G,ds(this,L)}toString(){return hc(this._root)}}function ds(R,G){G.value._routerState=R,G.children.forEach(L=>ds(R,L))}function hc(R){const G=R.children.length>0?` { ${R.children.map(hc).join(", ")} } `:"";return`${R.value}${G}`}function pc(R){if(R.snapshot){const G=R.snapshot,L=R._futureSnapshot;R.snapshot=L,wt(G.queryParams,L.queryParams)||R.queryParamsSubject.next(L.queryParams),G.fragment!==L.fragment&&R.fragmentSubject.next(L.fragment),wt(G.params,L.params)||R.paramsSubject.next(L.params),function fi(R,G){if(R.length!==G.length)return!1;for(let L=0;L<R.length;++L)if(!wt(R[L],G[L]))return!1;return!0}(G.url,L.url)||R.urlSubject.next(L.url),wt(G.data,L.data)||R.dataSubject.next(L.data)}else R.snapshot=R._futureSnapshot,R.dataSubject.next(R._futureSnapshot.data)}function Ea(R,G){const L=wt(R.params,G.params)&&function vt(R,G){return nn(R,G)&&R.every((L,$)=>wt(L.parameters,G[$].parameters))}(R.url,G.url);return L&&!(!R.parent!=!G.parent)&&(!R.parent||Ea(R.parent,G.parent))}function na(R){return"string"==typeof R.title||null===R.title}let vl=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=It,this.activateEvents=new D.bkB,this.deactivateEvents=new D.bkB,this.attachEvents=new D.bkB,this.detachEvents=new D.bkB,this.parentContexts=(0,D.WQX)(Cs),this.location=(0,D.WQX)(D.c1b),this.changeDetector=(0,D.WQX)(D.gRc),this.inputBinder=(0,D.WQX)(hs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(L){if(L.name){const{firstChange:$,previousValue:oe}=L.name;if($)return;this.isTrackedInParentContexts(oe)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(oe)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(L){return this.parentContexts.getContext(L)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const L=this.parentContexts.getContext(this.name);L?.route&&(L.attachRef?this.attach(L.attachRef,L.route):this.activateWith(L.route,L.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.wOt(4012,!1);this.location.detach();const L=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(L.instance),L}attach(L,$){this.activated=L,this._activatedRoute=$,this.location.insert(L.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(L.instance)}deactivate(){if(this.activated){const L=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(L)}}activateWith(L,$){if(this.isActivated)throw new D.wOt(4013,!1);this._activatedRoute=L;const oe=this.location,f=L.snapshot.component,i=this.parentContexts.getOrCreateContext(this.name).children,d=new Qa(L,i,oe.injector);this.activated=oe.createComponent(f,{index:oe.length,injector:d,environmentInjector:$}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275dir=D.FsC({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.OA$]})}return R})();class Qa{__ngOutletInjector(G){return new Qa(this.route,this.childContexts,G)}constructor(G,L,$){this.route=G,this.childContexts=L,this.parent=$}get(G,L){return G===Zs?this.route:G===Cs?this.childContexts:this.parent.get(G,L)}}const hs=new D.nKC("");let Zo=(()=>{class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(L){this.unsubscribeFromRouteData(L),this.subscribeToRouteData(L)}unsubscribeFromRouteData(L){this.outletDataSubscriptions.get(L)?.unsubscribe(),this.outletDataSubscriptions.delete(L)}subscribeToRouteData(L){const{activatedRoute:$}=L,oe=(0,Te.z)([$.queryParams,$.params,$.data]).pipe((0,At.n)(([we,f,i],d)=>(i={...we,...f,...i},0===d?(0,h.of)(i):Promise.resolve(i)))).subscribe(we=>{if(!L.isActivated||!L.activatedComponentRef||L.activatedRoute!==$||null===$.component)return void this.unsubscribeFromRouteData(L);const f=(0,D.HJs)($.component);if(f)for(const{templateName:i}of f.inputs)L.activatedComponentRef.setInput(i,we[i]);else this.unsubscribeFromRouteData(L)});this.outletDataSubscriptions.set(L,oe)}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac})}return R})();function Fs(R,G,L){if(L&&R.shouldReuseRoute(G.value,L.value.snapshot)){const $=L.value;$._futureSnapshot=G.value;const oe=function Ts(R,G,L){return G.children.map($=>{for(const oe of L.children)if(R.shouldReuseRoute($.value,oe.value.snapshot))return Fs(R,$,oe);return Fs(R,$)})}(R,G,L);return new Ko($,oe)}{if(R.shouldAttach(G.value)){const we=R.retrieve(G.value);if(null!==we){const f=we.route;return f.value._futureSnapshot=G.value,f.children=G.children.map(i=>Fs(R,i)),f}}const $=function fc(R){return new Zs(new ge.t(R.url),new ge.t(R.params),new ge.t(R.queryParams),new ge.t(R.fragment),new ge.t(R.data),R.outlet,R.component,R)}(G.value),oe=G.children.map(we=>Fs(R,we));return new Ko($,oe)}}class bl{constructor(G,L){this.redirectTo=G,this.navigationBehaviorOptions=L}}const Ca="ngNavigationCancelingError";function ps(R,G){const{redirectTo:L,navigationBehaviorOptions:$}=ye(G)?{redirectTo:G,navigationBehaviorOptions:void 0}:G,oe=Ns(!1,Dn.Redirect);return oe.url=L,oe.navigationBehaviorOptions=$,oe}function Ns(R,G){const L=new Error(`NavigationCancelingError: ${R||""}`);return L[Ca]=!0,L.cancellationCode=G,L}function os(R){return!!R&&R[Ca]}class wl{constructor(G,L,$,oe,we){this.routeReuseStrategy=G,this.futureState=L,this.currState=$,this.forwardEvent=oe,this.inputBindingEnabled=we}activate(G){const L=this.futureState._root,$=this.currState?this.currState._root:null;this.deactivateChildRoutes(L,$,G),pc(this.futureState.root),this.activateChildRoutes(L,$,G)}deactivateChildRoutes(G,L,$){const oe=ta(L);G.children.forEach(we=>{const f=we.value.outlet;this.deactivateRoutes(we,oe[f],$),delete oe[f]}),Object.values(oe).forEach(we=>{this.deactivateRouteAndItsChildren(we,$)})}deactivateRoutes(G,L,$){const oe=G.value,we=L?L.value:null;if(oe===we)if(oe.component){const f=$.getContext(oe.outlet);f&&this.deactivateChildRoutes(G,L,f.children)}else this.deactivateChildRoutes(G,L,$);else we&&this.deactivateRouteAndItsChildren(L,$)}deactivateRouteAndItsChildren(G,L){G.value.component&&this.routeReuseStrategy.shouldDetach(G.value.snapshot)?this.detachAndStoreRouteSubtree(G,L):this.deactivateRouteAndOutlet(G,L)}detachAndStoreRouteSubtree(G,L){const $=L.getContext(G.value.outlet),oe=$&&G.value.component?$.children:L,we=ta(G);for(const f of Object.values(we))this.deactivateRouteAndItsChildren(f,oe);if($&&$.outlet){const f=$.outlet.detach(),i=$.children.onOutletDeactivated();this.routeReuseStrategy.store(G.value.snapshot,{componentRef:f,route:G,contexts:i})}}deactivateRouteAndOutlet(G,L){const $=L.getContext(G.value.outlet),oe=$&&G.value.component?$.children:L,we=ta(G);for(const f of Object.values(we))this.deactivateRouteAndItsChildren(f,oe);$&&($.outlet&&($.outlet.deactivate(),$.children.onOutletDeactivated()),$.attachRef=null,$.route=null)}activateChildRoutes(G,L,$){const oe=ta(L);G.children.forEach(we=>{this.activateRoutes(we,oe[we.value.outlet],$),this.forwardEvent(new Rs(we.value.snapshot))}),G.children.length&&this.forwardEvent(new Co(G.value.snapshot))}activateRoutes(G,L,$){const oe=G.value,we=L?L.value:null;if(pc(oe),oe===we)if(oe.component){const f=$.getOrCreateContext(oe.outlet);this.activateChildRoutes(G,L,f.children)}else this.activateChildRoutes(G,L,$);else if(oe.component){const f=$.getOrCreateContext(oe.outlet);if(this.routeReuseStrategy.shouldAttach(oe.snapshot)){const i=this.routeReuseStrategy.retrieve(oe.snapshot);this.routeReuseStrategy.store(oe.snapshot,null),f.children.onOutletReAttached(i.contexts),f.attachRef=i.componentRef,f.route=i.route.value,f.outlet&&f.outlet.attach(i.componentRef,i.route.value),pc(i.route.value),this.activateChildRoutes(G,null,f.children)}else f.attachRef=null,f.route=oe,f.outlet&&f.outlet.activateWith(oe,f.injector),this.activateChildRoutes(G,null,f.children)}else this.activateChildRoutes(G,null,$)}}class ia{constructor(G){this.path=G,this.route=this.path[this.path.length-1]}}class Xl{constructor(G,L){this.component=G,this.route=L}}function ho(R,G,L){const $=R._root;return vr($,G?G._root:null,L,[$.value])}function Ta(R,G){const L=Symbol(),$=G.get(R,L);return $===L?"function"!=typeof R||(0,D.LfX)(R)?G.get(R):R:$}function vr(R,G,L,$,oe={canDeactivateChecks:[],canActivateChecks:[]}){const we=ta(G);return R.children.forEach(f=>{(function Nc(R,G,L,$,oe={canDeactivateChecks:[],canActivateChecks:[]}){const we=R.value,f=G?G.value:null,i=L?L.getContext(R.value.outlet):null;if(f&&we.routeConfig===f.routeConfig){const d=function Ao(R,G,L){if("function"==typeof L)return L(R,G);switch(L){case"pathParamsChange":return!nn(R.url,G.url);case"pathParamsOrQueryParamsChange":return!nn(R.url,G.url)||!wt(R.queryParams,G.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ea(R,G)||!wt(R.queryParams,G.queryParams);default:return!Ea(R,G)}}(f,we,we.routeConfig.runGuardsAndResolvers);d?oe.canActivateChecks.push(new ia($)):(we.data=f.data,we._resolvedData=f._resolvedData),vr(R,G,we.component?i?i.children:null:L,$,oe),d&&i&&i.outlet&&i.outlet.isActivated&&oe.canDeactivateChecks.push(new Xl(i.outlet.component,f))}else f&&Ja(G,i,oe),oe.canActivateChecks.push(new ia($)),vr(R,null,we.component?i?i.children:null:L,$,oe)})(f,we[f.value.outlet],L,$.concat([f.value]),oe),delete we[f.value.outlet]}),Object.entries(we).forEach(([f,i])=>Ja(i,L.getContext(f),oe)),oe}function Ja(R,G,L){const $=ta(R),oe=R.value;Object.entries($).forEach(([we,f])=>{Ja(f,oe.component?G?G.children.getContext(we):null:G,L)}),L.canDeactivateChecks.push(new Xl(oe.component&&G&&G.outlet&&G.outlet.isActivated?G.outlet.component:null,oe))}function lr(R){return"function"==typeof R}function ra(R){return R instanceof nt.G||"EmptyError"===R?.name}const lu=Symbol("INITIAL_VALUE");function fs(){return(0,At.n)(R=>(0,Te.z)(R.map(G=>G.pipe((0,dt.s)(1),(0,sn.Z)(lu)))).pipe((0,Zt.T)(G=>{for(const L of G)if(!0!==L){if(L===lu)return lu;if(!1===L||od(L))return L}return!0}),(0,Gt.p)(G=>G!==lu),(0,dt.s)(1)))}function od(R){return ye(R)||R instanceof bl}function mc(R){return(0,st.F)((0,ft.M)(G=>{if("boolean"!=typeof G)throw ps(0,G)}),(0,Zt.T)(G=>!0===G))}class Bc{constructor(G){this.segmentGroup=G||null}}class Lo extends Error{constructor(G){super(),this.urlTree=G}}function El(R){return(0,rt.$)(new Bc(R))}class Cl{constructor(G,L){this.urlSerializer=G,this.urlTree=L}lineralizeSegments(G,L){let $=[],oe=L.root;for(;;){if($=$.concat(oe.segments),0===oe.numberOfChildren)return(0,h.of)($);if(oe.numberOfChildren>1||!oe.children[It])return(0,rt.$)(new D.wOt(4e3,!1));oe=oe.children[It]}}applyRedirectCommands(G,L,$,oe,we){if("string"!=typeof L){const i=L,{queryParams:d,fragment:v,routeConfig:E,url:M,outlet:k,params:P,data:B,title:Z}=oe,Q=(0,D.N4e)(we,()=>i({params:P,data:B,queryParams:d,fragment:v,routeConfig:E,url:M,outlet:k,title:Z}));if(Q instanceof Pe)throw new Lo(Q);L=Q}const f=this.applyRedirectCreateUrlTree(L,this.urlSerializer.parse(L),G,$);if("/"===L[0])throw new Lo(f);return f}applyRedirectCreateUrlTree(G,L,$,oe){const we=this.createSegmentGroup(G,L.root,$,oe);return new Pe(we,this.createQueryParams(L.queryParams,this.urlTree.queryParams),L.fragment)}createQueryParams(G,L){const $={};return Object.entries(G).forEach(([oe,we])=>{if("string"==typeof we&&":"===we[0]){const i=we.substring(1);$[oe]=L[i]}else $[oe]=we}),$}createSegmentGroup(G,L,$,oe){const we=this.createSegments(G,L.segments,$,oe);let f={};return Object.entries(L.children).forEach(([i,d])=>{f[i]=this.createSegmentGroup(G,d,$,oe)}),new Je(we,f)}createSegments(G,L,$,oe){return L.map(we=>":"===we.path[0]?this.findPosParam(G,we,oe):this.findOrReturn(we,$))}findPosParam(G,L,$){const oe=$[L.path.substring(1)];if(!oe)throw new D.wOt(4001,!1);return oe}findOrReturn(G,L){let $=0;for(const oe of L){if(oe.path===G.path)return L.splice($),oe;$++}return G}}const qs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ss(R,G,L,$,oe){const we=gc(R,G,L);return we.matched?($=function Go(R,G){return R.providers&&!R._injector&&(R._injector=(0,D.Ol2)(R.providers,G,`Route: ${R.path}`)),R._injector??G}(G,$),function Bh(R,G,L,$){const oe=G.canMatch;if(!oe||0===oe.length)return(0,h.of)(!0);const we=oe.map(f=>{const i=Ta(f,R);return yi(function au(R){return R&&lr(R.canMatch)}(i)?i.canMatch(G,L):(0,D.N4e)(R,()=>i(G,L)))});return(0,h.of)(we).pipe(fs(),mc())}($,G,L).pipe((0,Zt.T)(f=>!0===f?we:{...qs}))):(0,h.of)(we)}function gc(R,G,L){if("**"===G.path)return function oa(R){return{matched:!0,parameters:R.length>0?gi(R).parameters:{},consumedSegments:R,remainingSegments:[],positionalParamSegments:{}}}(L);if(""===G.path)return"full"===G.pathMatch&&(R.hasChildren()||L.length>0)?{...qs}:{matched:!0,consumedSegments:[],remainingSegments:L,parameters:{},positionalParamSegments:{}};const oe=(G.matcher||Jn)(L,R,G);if(!oe)return{...qs};const we={};Object.entries(oe.posParams??{}).forEach(([i,d])=>{we[i]=d.path});const f=oe.consumed.length>0?{...we,...oe.consumed[oe.consumed.length-1].parameters}:we;return{matched:!0,consumedSegments:oe.consumed,remainingSegments:L.slice(oe.consumed.length),parameters:f,positionalParamSegments:oe.posParams??{}}}function ro(R,G,L,$){return L.length>0&&function Dl(R,G,L){return L.some($=>oo(R,G,$)&&Ps($)!==It)}(R,L,$)?{segmentGroup:new Je(G,Tl($,new Je(L,R.children))),slicedSegments:[]}:0===L.length&&function zi(R,G,L){return L.some($=>oo(R,G,$))}(R,L,$)?{segmentGroup:new Je(R.segments,_c(R,L,$,R.children)),slicedSegments:L}:{segmentGroup:new Je(R.segments,R.children),slicedSegments:L}}function _c(R,G,L,$){const oe={};for(const we of L)if(oo(R,G,we)&&!$[Ps(we)]){const f=new Je([],{});oe[Ps(we)]=f}return{...$,...oe}}function Tl(R,G){const L={};L[It]=G;for(const $ of R)if(""===$.path&&Ps($)!==It){const oe=new Je([],{});L[Ps($)]=oe}return L}function oo(R,G,L){return(!(R.hasChildren()||G.length>0)||"full"!==L.pathMatch)&&""===L.path}class yc{}class jd{constructor(G,L,$,oe,we,f,i){this.injector=G,this.configLoader=L,this.rootComponentType=$,this.config=oe,this.urlTree=we,this.paramsInheritanceStrategy=f,this.urlSerializer=i,this.applyRedirects=new Cl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(G){return new D.wOt(4002,`'${G.segmentGroup}'`)}recognize(){const G=ro(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(G).pipe((0,Zt.T)(({children:L,rootSnapshot:$})=>{const oe=new Ko($,L),we=new Ya("",oe),f=function $e(R,G,L=null,$=null){return Lt(mt(R),G,L,$)}($,[],this.urlTree.queryParams,this.urlTree.fragment);return f.queryParams=this.urlTree.queryParams,we.url=this.urlSerializer.serialize(f),{state:we,tree:f}}))}match(G){const L=new dc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),It,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,G,It,L).pipe((0,Zt.T)($=>({children:$,rootSnapshot:L})),(0,Ut.W)($=>{if($ instanceof Lo)return this.urlTree=$.urlTree,this.match($.urlTree.root);throw $ instanceof Bc?this.noMatchError($):$}))}processSegmentGroup(G,L,$,oe,we){return 0===$.segments.length&&$.hasChildren()?this.processChildren(G,L,$,we):this.processSegment(G,L,$,$.segments,oe,!0,we).pipe((0,Zt.T)(f=>f instanceof Ko?[f]:[]))}processChildren(G,L,$,oe){const we=[];for(const f of Object.keys($.children))"primary"===f?we.unshift(f):we.push(f);return(0,ue.H)(we).pipe((0,He.H)(f=>{const i=$.children[f],d=function Pu(R,G){const L=R.filter($=>Ps($)===G);return L.push(...R.filter($=>Ps($)!==G)),L}(L,f);return this.processSegmentGroup(G,d,i,f,oe)}),(0,on.S)((f,i)=>(f.push(...i),f)),(0,Fn.U)(null),function Nn(R,G){const L=arguments.length>=2;return $=>$.pipe(R?(0,Gt.p)((oe,we)=>R(oe,we,$)):ai.D,mn(1),L?(0,Fn.U)(G):(0,Sn.v)(()=>new nt.G))}(),(0,Qt.Z)(f=>{if(null===f)return El($);const i=tr(f);return function sd(R){R.sort((G,L)=>G.value.outlet===It?-1:L.value.outlet===It?1:G.value.outlet.localeCompare(L.value.outlet))}(i),(0,h.of)(i)}))}processSegment(G,L,$,oe,we,f,i){return(0,ue.H)(L).pipe((0,He.H)(d=>this.processSegmentAgainstRoute(d._injector??G,L,d,$,oe,we,f,i).pipe((0,Ut.W)(v=>{if(v instanceof Bc)return(0,h.of)(null);throw v}))),(0,Wt.$)(d=>!!d),(0,Ut.W)(d=>{if(ra(d))return function Fo(R,G,L){return 0===G.length&&!R.children[L]}($,oe,we)?(0,h.of)(new yc):El($);throw d}))}processSegmentAgainstRoute(G,L,$,oe,we,f,i,d){return function Da(R,G,L,$){return!!(Ps(R)===$||$!==It&&oo(G,L,R))&&gc(G,R,L).matched}($,oe,we,f)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(G,oe,$,we,f,d):this.allowRedirects&&i?this.expandSegmentAgainstRouteUsingRedirect(G,oe,L,$,we,f,d):El(oe):El(oe)}expandSegmentAgainstRouteUsingRedirect(G,L,$,oe,we,f,i){const{matched:d,parameters:v,consumedSegments:E,positionalParamSegments:M,remainingSegments:k}=gc(L,oe,we);if(!d)return El(L);"string"==typeof oe.redirectTo&&"/"===oe.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const P=new dc(we,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zl(oe),Ps(oe),oe.component??oe._loadedComponent??null,oe,$o(oe)),B=wa(P,i,this.paramsInheritanceStrategy);P.params=Object.freeze(B.params),P.data=Object.freeze(B.data);const Z=this.applyRedirects.applyRedirectCommands(E,oe.redirectTo,M,P,G);return this.applyRedirects.lineralizeSegments(oe,Z).pipe((0,Qt.Z)(Q=>this.processSegment(G,$,L,Q.concat(k),f,!1,i)))}matchSegmentAgainstRoute(G,L,$,oe,we,f){const i=ss(L,$,oe,G);return"**"===$.path&&(L.children={}),i.pipe((0,At.n)(d=>d.matched?this.getChildConfig(G=$._injector??G,$,oe).pipe((0,At.n)(({routes:v})=>{const E=$._loadedInjector??G,{parameters:M,consumedSegments:k,remainingSegments:P}=d,B=new dc(k,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zl($),Ps($),$.component??$._loadedComponent??null,$,$o($)),Z=wa(B,f,this.paramsInheritanceStrategy);B.params=Object.freeze(Z.params),B.data=Object.freeze(Z.data);const{segmentGroup:Q,slicedSegments:ae}=ro(L,k,P,v);if(0===ae.length&&Q.hasChildren())return this.processChildren(E,v,Q,B).pipe((0,Zt.T)(Ce=>new Ko(B,Ce)));if(0===v.length&&0===ae.length)return(0,h.of)(new Ko(B,[]));const pe=Ps($)===we;return this.processSegment(E,v,Q,ae,pe?It:we,!0,B).pipe((0,Zt.T)(Ce=>new Ko(B,Ce instanceof Ko?[Ce]:[])))})):El(L)))}getChildConfig(G,L,$){return L.children?(0,h.of)({routes:L.children,injector:G}):L.loadChildren?void 0!==L._loadedRoutes?(0,h.of)({routes:L._loadedRoutes,injector:L._loadedInjector}):function mi(R,G,L,$){const oe=G.canLoad;if(void 0===oe||0===oe.length)return(0,h.of)(!0);const we=oe.map(f=>{const i=Ta(f,R);return yi(function el(R){return R&&lr(R.canLoad)}(i)?i.canLoad(G,L):(0,D.N4e)(R,()=>i(G,L)))});return(0,h.of)(we).pipe(fs(),mc())}(G,L,$).pipe((0,Qt.Z)(oe=>oe?this.configLoader.loadChildren(G,L).pipe((0,ft.M)(we=>{L._loadedRoutes=we.routes,L._loadedInjector=we.injector})):function Fa(R){return(0,rt.$)(Ns(!1,Dn.GuardRejected))}())):(0,h.of)({routes:[],injector:G})}}function Ir(R){const G=R.value.routeConfig;return G&&""===G.path}function tr(R){const G=[],L=new Set;for(const $ of R){if(!Ir($)){G.push($);continue}const oe=G.find(we=>$.value.routeConfig===we.value.routeConfig);void 0!==oe?(oe.children.push(...$.children),L.add(oe)):G.push($)}for(const $ of L){const oe=tr($.children);G.push(new Ko($.value,oe))}return G.filter($=>!L.has($))}function Zl(R){return R.data||{}}function $o(R){return R.resolve||{}}function sa(R){const G=R.children.map(L=>sa(L)).flat();return[R,...G]}function br(R){return(0,At.n)(G=>{const L=R(G);return L?(0,ue.H)(L).pipe((0,Zt.T)(()=>G)):(0,h.of)(G)})}let Fu=(()=>{class R{buildTitle(L){let $,oe=L.root;for(;void 0!==oe;)$=this.getResolvedTitleForRoute(oe)??$,oe=oe.children.find(we=>we.outlet===It);return $}getResolvedTitleForRoute(L){return L.data[_n]}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:()=>(0,D.WQX)(Uc),providedIn:"root"})}return R})(),Uc=(()=>{class R extends Fu{constructor(L){super(),this.title=L}updateTitle(L){const $=this.buildTitle(L);void 0!==$&&this.title.setTitle($)}static#e=this.\u0275fac=function($){return new($||R)(D.KVO(kt.hE))};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const Na=new D.nKC("",{providedIn:"root",factory:()=>({})});let uu=(()=>{class R{static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275cmp=D.VBU({type:R,selectors:[["ng-component"]],standalone:!0,features:[D.aNF],decls:1,vars:0,template:function($,oe){1&$&&D.nrm(0,"router-outlet")},dependencies:[vl],encapsulation:2})}return R})();function Ml(R){const G=R.children&&R.children.map(Ml),L=G?{...R,children:G}:{...R};return!L.component&&!L.loadComponent&&(G||L.loadChildren)&&L.outlet&&L.outlet!==It&&(L.component=uu),L}const Kn=new D.nKC("");let Wi=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.WQX)(D.Ql9)}loadComponent(L){if(this.componentLoaders.get(L))return this.componentLoaders.get(L);if(L._loadedComponent)return(0,h.of)(L._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(L);const $=yi(L.loadComponent()).pipe((0,Zt.T)(Ds),(0,ft.M)(we=>{this.onLoadEndListener&&this.onLoadEndListener(L),L._loadedComponent=we}),(0,an.j)(()=>{this.componentLoaders.delete(L)})),oe=new Rt($,()=>new On.B).pipe(zt());return this.componentLoaders.set(L,oe),oe}loadChildren(L,$){if(this.childrenLoaders.get($))return this.childrenLoaders.get($);if($._loadedRoutes)return(0,h.of)({routes:$._loadedRoutes,injector:$._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener($);const we=function xc(R,G,L,$){return yi(R.loadChildren()).pipe((0,Zt.T)(Ds),(0,Qt.Z)(oe=>oe instanceof D.Co$||Array.isArray(oe)?(0,h.of)(oe):(0,ue.H)(G.compileModuleAsync(oe))),(0,Zt.T)(oe=>{$&&$(R);let we,f,i=!1;return Array.isArray(oe)?(f=oe,!0):(we=oe.create(L).injector,f=we.get(Kn,[],{optional:!0,self:!0}).flat()),{routes:f.map(Ml),injector:we}}))}($,this.compiler,L,this.onLoadEndListener).pipe((0,an.j)(()=>{this.childrenLoaders.delete($)})),f=new Rt(we,()=>new On.B).pipe(zt());return this.childrenLoaders.set($,f),f}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Ds(R){return function Ma(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let aa=(()=>{class R{static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:()=>(0,D.WQX)($d),providedIn:"root"})}return R})(),$d=(()=>{class R{shouldProcessUrl(L){return!0}extract(L){return L}merge(L,$){return L}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const ql=new D.nKC(""),Yl=new D.nKC("");function Ql(R,G,L){const $=R.get(Yl),oe=R.get(An.qQ);return R.get(D.SKi).runOutsideAngular(()=>{if(!oe.startViewTransition||$.skipNextTransition)return $.skipNextTransition=!1,new Promise(v=>setTimeout(v));let we;const f=new Promise(v=>{we=v}),i=oe.startViewTransition(()=>(we(),function V(R){return new Promise(G=>{(0,D.mal)({read:()=>setTimeout(G)},{injector:R})})}(R))),{onViewTransitionCreated:d}=$;return d&&(0,D.N4e)(R,()=>d({transition:i,from:G,to:L})),f})}const he=new D.nKC("");let q=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new On.B,this.transitionAbortSubject=new On.B,this.configLoader=(0,D.WQX)(Wi),this.environmentInjector=(0,D.WQX)(D.uvJ),this.urlSerializer=(0,D.WQX)(Gn),this.rootContexts=(0,D.WQX)(Cs),this.location=(0,D.WQX)(An.aZ),this.inputBindingEnabled=null!==(0,D.WQX)(hs,{optional:!0}),this.titleStrategy=(0,D.WQX)(Fu),this.options=(0,D.WQX)(Na,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,D.WQX)(aa),this.createViewTransition=(0,D.WQX)(ql,{optional:!0}),this.navigationErrorHandler=(0,D.WQX)(he,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,h.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=oe=>this.events.next(new Vr(oe)),this.configLoader.onLoadStartListener=oe=>this.events.next(new er(oe))}complete(){this.transitions?.complete()}handleNavigationRequest(L){const $=++this.navigationId;this.transitions?.next({...this.transitions.value,...L,id:$})}setupNavigations(L,$,oe){return this.transitions=new ge.t({id:0,currentUrlTree:$,currentRawUrl:$,extractedUrl:this.urlHandlingStrategy.extract($),urlAfterRedirects:this.urlHandlingStrategy.extract($),rawUrl:$,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Oe,restoredState:null,currentSnapshot:oe.snapshot,targetSnapshot:null,currentRouterState:oe,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Gt.p)(we=>0!==we.id),(0,Zt.T)(we=>({...we,extractedUrl:this.urlHandlingStrategy.extract(we.rawUrl)})),(0,At.n)(we=>{let f=!1,i=!1;return(0,h.of)(we).pipe((0,At.n)(d=>{if(this.navigationId>we.id)return this.cancelNavigationTransition(we,"",Dn.SupersededByNewNavigation),ut.w;this.currentTransition=we,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:"string"==typeof d.extras.browserUrl?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const v=!L.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!v&&"reload"!==(d.extras.onSameUrlNavigation??L.onSameUrlNavigation)){const M="";return this.events.next(new _i(d.id,this.urlSerializer.serialize(d.rawUrl),M,xn.IgnoredSameUrlNavigation)),d.resolve(!1),ut.w}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return(0,h.of)(d).pipe((0,At.n)(M=>{const k=this.transitions?.getValue();return this.events.next(new Yt(M.id,this.urlSerializer.serialize(M.extractedUrl),M.source,M.restoredState)),k!==this.transitions?.getValue()?ut.w:Promise.resolve(M)}),function vc(R,G,L,$,oe,we){return(0,Qt.Z)(f=>function zc(R,G,L,$,oe,we,f="emptyOnly"){return new jd(R,G,L,$,oe,f,we).recognize()}(R,G,L,$,f.extractedUrl,oe,we).pipe((0,Zt.T)(({state:i,tree:d})=>({...f,targetSnapshot:i,urlAfterRedirects:d}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,L.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ft.M)(M=>{we.targetSnapshot=M.targetSnapshot,we.urlAfterRedirects=M.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects};const k=new uo(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(k)}));if(v&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){const{id:M,extractedUrl:k,source:P,restoredState:B,extras:Z}=d,Q=new Yt(M,this.urlSerializer.serialize(k),P,B);this.events.next(Q);const ae=rs(this.rootComponentType).snapshot;return this.currentTransition=we={...d,targetSnapshot:ae,urlAfterRedirects:k,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=k,(0,h.of)(we)}{const M="";return this.events.next(new _i(d.id,this.urlSerializer.serialize(d.extractedUrl),M,xn.IgnoredByUrlHandlingStrategy)),d.resolve(!1),ut.w}}),(0,ft.M)(d=>{const v=new Tr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(v)}),(0,Zt.T)(d=>(this.currentTransition=we={...d,guards:ho(d.targetSnapshot,d.currentSnapshot,this.rootContexts)},we)),function te(R,G){return(0,Qt.Z)(L=>{const{targetSnapshot:$,currentSnapshot:oe,guards:{canActivateChecks:we,canDeactivateChecks:f}}=L;return 0===f.length&&0===we.length?(0,h.of)({...L,guardsResult:!0}):function re(R,G,L,$){return(0,ue.H)(R).pipe((0,Qt.Z)(oe=>function io(R,G,L,$,oe){const we=G&&G.routeConfig?G.routeConfig.canDeactivate:null;if(!we||0===we.length)return(0,h.of)(!0);const f=we.map(i=>{const d=Ls(G)??oe,v=Ta(i,d);return yi(function qo(R){return R&&lr(R.canDeactivate)}(v)?v.canDeactivate(R,G,L,$):(0,D.N4e)(d,()=>v(R,G,L,$))).pipe((0,Wt.$)())});return(0,h.of)(f).pipe(fs())}(oe.component,oe.route,L,G,$)),(0,Wt.$)(oe=>!0!==oe,!0))}(f,$,oe,R).pipe((0,Qt.Z)(i=>i&&function su(R){return"boolean"==typeof R}(i)?function X(R,G,L,$){return(0,ue.H)(G).pipe((0,He.H)(oe=>(0,ke.x)(function gt(R,G){return null!==R&&G&&G(new Dr(R)),(0,h.of)(!0)}(oe.route.parent,$),function _e(R,G){return null!==R&&G&&G(new dr(R)),(0,h.of)(!0)}(oe.route,$),function mr(R,G,L){const $=G[G.length-1],we=G.slice(0,G.length-1).reverse().map(f=>function Lu(R){const G=R.routeConfig?R.routeConfig.canActivateChild:null;return G&&0!==G.length?{node:R,guards:G}:null}(f)).filter(f=>null!==f).map(f=>(0,Ve.v)(()=>{const i=f.guards.map(d=>{const v=Ls(f.node)??L,E=Ta(d,v);return yi(function Kl(R){return R&&lr(R.canActivateChild)}(E)?E.canActivateChild($,R):(0,D.N4e)(v,()=>E($,R))).pipe((0,Wt.$)())});return(0,h.of)(i).pipe(fs())}));return(0,h.of)(we).pipe(fs())}(R,oe.path,L),function Ei(R,G,L){const $=G.routeConfig?G.routeConfig.canActivate:null;if(!$||0===$.length)return(0,h.of)(!0);const oe=$.map(we=>(0,Ve.v)(()=>{const f=Ls(G)??L,i=Ta(we,f);return yi(function Ni(R){return R&&lr(R.canActivate)}(i)?i.canActivate(G,R):(0,D.N4e)(f,()=>i(G,R))).pipe((0,Wt.$)())}));return(0,h.of)(oe).pipe(fs())}(R,oe.route,L))),(0,Wt.$)(oe=>!0!==oe,!0))}($,we,R,G):(0,h.of)(i)),(0,Zt.T)(i=>({...L,guardsResult:i})))})}(this.environmentInjector,d=>this.events.next(d)),(0,ft.M)(d=>{if(we.guardsResult=d.guardsResult,d.guardsResult&&"boolean"!=typeof d.guardsResult)throw ps(0,d.guardsResult);const v=new go(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(v)}),(0,Gt.p)(d=>!!d.guardsResult||(this.cancelNavigationTransition(d,"",Dn.GuardRejected),!1)),br(d=>{if(d.guards.canActivateChecks.length)return(0,h.of)(d).pipe((0,ft.M)(v=>{const E=new sr(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}),(0,At.n)(v=>{let E=!1;return(0,h.of)(v).pipe(function bc(R,G){return(0,Qt.Z)(L=>{const{targetSnapshot:$,guards:{canActivateChecks:oe}}=L;if(!oe.length)return(0,h.of)(L);const we=new Set(oe.map(d=>d.route)),f=new Set;for(const d of we)if(!f.has(d))for(const v of sa(d))f.add(v);let i=0;return(0,ue.H)(f).pipe((0,He.H)(d=>we.has(d)?function cu(R,G,L,$){const oe=R.routeConfig,we=R._resolve;return void 0!==oe?.title&&!na(oe)&&(we[_n]=oe.title),function Vc(R,G,L,$){const oe=qt(R);if(0===oe.length)return(0,h.of)({});const we={};return(0,ue.H)(oe).pipe((0,Qt.Z)(f=>function Ki(R,G,L,$){const oe=Ls(G)??$,we=Ta(R,oe);return yi(we.resolve?we.resolve(G,L):(0,D.N4e)(oe,()=>we(G,L)))}(R[f],G,L,$).pipe((0,Wt.$)(),(0,ft.M)(i=>{if(i instanceof bl)throw ps(new si,i);we[f]=i}))),mn(1),(0,tn.u)(we),(0,Ut.W)(f=>ra(f)?ut.w:(0,rt.$)(f)))}(we,R,G,$).pipe((0,Zt.T)(f=>(R._resolvedData=f,R.data=wa(R,R.parent,L).resolve,null)))}(d,$,R,G):(d.data=wa(d,d.parent,R).resolve,(0,h.of)(void 0))),(0,ft.M)(()=>i++),mn(1),(0,Qt.Z)(d=>i===f.size?(0,h.of)(L):ut.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ft.M)({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(v,"",Dn.NoDataFromResolver)}}))}),(0,ft.M)(v=>{const E=new ar(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}))}),br(d=>{const v=E=>{const M=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,ft.M)(k=>{E.component=k}),(0,Zt.T)(()=>{})));for(const k of E.children)M.push(...v(k));return M};return(0,Te.z)(v(d.targetSnapshot.root)).pipe((0,Fn.U)(null),(0,dt.s)(1))}),br(()=>this.afterPreactivation()),(0,At.n)(()=>{const{currentSnapshot:d,targetSnapshot:v}=we,E=this.createViewTransition?.(this.environmentInjector,d.root,v.root);return E?(0,ue.H)(E).pipe((0,Zt.T)(()=>we)):(0,h.of)(we)}),(0,Zt.T)(d=>{const v=function wn(R,G,L){const $=Fs(R,G._root,L?L._root:void 0);return new Wl($,G)}(L.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=we={...d,targetRouterState:v},this.currentNavigation.targetRouterState=v,we}),(0,ft.M)(()=>{this.events.next(new Yo)}),((R,G,L,$)=>(0,Zt.T)(oe=>(new wl(G,oe.targetRouterState,oe.currentRouterState,L,$).activate(R),oe)))(this.rootContexts,L.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),(0,dt.s)(1),(0,ft.M)({next:d=>{f=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new bn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{f=!0}}),(0,Pn.Q)(this.transitionAbortSubject.pipe((0,ft.M)(d=>{throw d}))),(0,an.j)(()=>{!f&&!i&&this.cancelNavigationTransition(we,"",Dn.SupersededByNewNavigation),this.currentTransition?.id===we.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ut.W)(d=>{if(i=!0,os(d))this.events.next(new Ti(we.id,this.urlSerializer.serialize(we.extractedUrl),d.message,d.cancellationCode)),function Xi(R){return os(R)&&ye(R.url)}(d)?this.events.next(new Ws(d.url,d.navigationBehaviorOptions)):we.resolve(!1);else{const v=new wr(we.id,this.urlSerializer.serialize(we.extractedUrl),d,we.targetSnapshot??void 0);try{const E=(0,D.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(v));if(E instanceof bl){const{message:M,cancellationCode:k}=ps(0,E);this.events.next(new Ti(we.id,this.urlSerializer.serialize(we.extractedUrl),M,k)),this.events.next(new Ws(E.redirectTo,E.navigationBehaviorOptions))}else{this.events.next(v);const M=L.errorHandler(d);we.resolve(!!M)}}catch(E){this.options.resolveNavigationPromiseOnError?we.resolve(!1):we.reject(E)}}return ut.w}))}))}cancelNavigationTransition(L,$,oe){const we=new Ti(L.id,this.urlSerializer.serialize(L.extractedUrl),$,oe);this.events.next(we),L.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const L=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),$=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return L.toString()!==$?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function ce(R){return R!==Oe}let Ye=(()=>{class R{static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:()=>(0,D.WQX)(En),providedIn:"root"})}return R})();class Bt{shouldDetach(G){return!1}store(G,L){}shouldAttach(G){return!1}retrieve(G){return null}shouldReuseRoute(G,L){return G.routeConfig===L.routeConfig}}let En=(()=>{class R extends Bt{static#e=this.\u0275fac=(()=>{let L;return function(oe){return(L||(L=D.xGo(R)))(oe||R)}})();static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),Un=(()=>{class R{static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:()=>(0,D.WQX)(Hr),providedIn:"root"})}return R})(),Hr=(()=>{class R extends Un{constructor(){super(...arguments),this.location=(0,D.WQX)(An.aZ),this.urlSerializer=(0,D.WQX)(Gn),this.options=(0,D.WQX)(Na,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,D.WQX)(aa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pe,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rs(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(L){return this.location.subscribe($=>{"popstate"===$.type&&L($.url,$.state)})}handleRouterEvent(L,$){if(L instanceof Yt)this.stateMemento=this.createStateMemento();else if(L instanceof _i)this.rawUrlTree=$.initialUrl;else if(L instanceof uo){if("eager"===this.urlUpdateStrategy&&!$.extras.skipLocationChange){const oe=this.urlHandlingStrategy.merge($.finalUrl,$.initialUrl);this.setBrowserUrl($.targetBrowserUrl??oe,$)}}else L instanceof Yo?(this.currentUrlTree=$.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge($.finalUrl,$.initialUrl),this.routerState=$.targetRouterState,"deferred"===this.urlUpdateStrategy&&!$.extras.skipLocationChange&&this.setBrowserUrl($.targetBrowserUrl??this.rawUrlTree,$)):L instanceof Ti&&(L.code===Dn.GuardRejected||L.code===Dn.NoDataFromResolver)?this.restoreHistory($):L instanceof wr?this.restoreHistory($,!0):L instanceof bn&&(this.lastSuccessfulId=L.id,this.currentPageId=this.browserPageId)}setBrowserUrl(L,$){const oe=L instanceof Pe?this.urlSerializer.serialize(L):L;if(this.location.isCurrentPathEqualTo(oe)||$.extras.replaceUrl){const f={...$.extras.state,...this.generateNgRouterState($.id,this.browserPageId)};this.location.replaceState(oe,"",f)}else{const we={...$.extras.state,...this.generateNgRouterState($.id,this.browserPageId+1)};this.location.go(oe,"",we)}}restoreHistory(L,$=!1){if("computed"===this.canceledNavigationResolution){const we=this.currentPageId-this.browserPageId;0!==we?this.location.historyGo(we):this.currentUrlTree===L.finalUrl&&0===we&&(this.resetState(L),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&($&&this.resetState(L),this.resetUrlToCurrentUrlTree())}resetState(L){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,L.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(L,$){return"computed"===this.canceledNavigationResolution?{navigationId:L,\u0275routerPageId:$}:{navigationId:L}}static#e=this.\u0275fac=(()=>{let L;return function(oe){return(L||(L=D.xGo(R)))(oe||R)}})();static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();var qi=function(R){return R[R.COMPLETE=0]="COMPLETE",R[R.FAILED=1]="FAILED",R[R.REDIRECTING=2]="REDIRECTING",R}(qi||{});function Fr(R,G){R.events.pipe((0,Gt.p)(L=>L instanceof bn||L instanceof Ti||L instanceof wr||L instanceof _i),(0,Zt.T)(L=>L instanceof bn||L instanceof _i?qi.COMPLETE:L instanceof Ti&&(L.code===Dn.Redirect||L.code===Dn.SupersededByNewNavigation)?qi.REDIRECTING:qi.FAILED),(0,Gt.p)(L=>L!==qi.REDIRECTING),(0,dt.s)(1)).subscribe(()=>{G()})}function Vn(R){throw R}const so={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pr=(()=>{class R{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,D.WQX)(D.H3F),this.stateManager=(0,D.WQX)(Un),this.options=(0,D.WQX)(Na,{optional:!0})||{},this.pendingTasks=(0,D.WQX)(D.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,D.WQX)(q),this.urlSerializer=(0,D.WQX)(Gn),this.location=(0,D.WQX)(An.aZ),this.urlHandlingStrategy=(0,D.WQX)(aa),this._events=new On.B,this.errorHandler=this.options.errorHandler||Vn,this.navigated=!1,this.routeReuseStrategy=(0,D.WQX)(Ye),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,D.WQX)(Kn,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,D.WQX)(hs,{optional:!0}),this.eventsSubscription=new Mt.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:L=>{this.console.warn(L)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const L=this.navigationTransitions.events.subscribe($=>{try{const oe=this.navigationTransitions.currentTransition,we=this.navigationTransitions.currentNavigation;if(null!==oe&&null!==we)if(this.stateManager.handleRouterEvent($,we),$ instanceof Ti&&$.code!==Dn.Redirect&&$.code!==Dn.SupersededByNewNavigation)this.navigated=!0;else if($ instanceof bn)this.navigated=!0;else if($ instanceof Ws){const f=$.navigationBehaviorOptions,i=this.urlHandlingStrategy.merge($.url,oe.currentRawUrl),d={browserUrl:oe.extras.browserUrl,info:oe.extras.info,skipLocationChange:oe.extras.skipLocationChange,replaceUrl:oe.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ce(oe.source),...f};this.scheduleNavigation(i,Oe,null,d,{resolve:oe.resolve,reject:oe.reject,promise:oe.promise})}(function Ia(R){return!(R instanceof Yo||R instanceof Ws)})($)&&this._events.next($)}catch(oe){this.navigationTransitions.transitionAbortSubject.next(oe)}});this.eventsSubscription.add(L)}resetRootComponentType(L){this.routerState.root.component=L,this.navigationTransitions.rootComponentType=L}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oe,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((L,$)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(L,"popstate",$)},0)})}navigateToSyncWithBrowser(L,$,oe){const we={replaceUrl:!0},f=oe?.navigationId?oe:null;if(oe){const d={...oe};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(we.state=d)}const i=this.parseUrl(L);this.scheduleNavigation(i,$,f,we)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(L){this.config=L.map(Ml),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(L,$={}){const{relativeTo:oe,queryParams:we,fragment:f,queryParamsHandling:i,preserveFragment:d}=$,v=d?this.currentUrlTree.fragment:f;let M,E=null;switch(i){case"merge":E={...this.currentUrlTree.queryParams,...we};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=we||null}null!==E&&(E=this.removeEmptyProps(E));try{M=mt(oe?oe.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof L[0]||"/"!==L[0][0])&&(L=[]),M=this.currentUrlTree.root}return Lt(M,L,E,v??null)}navigateByUrl(L,$={skipLocationChange:!1}){const oe=ye(L)?L:this.parseUrl(L),we=this.urlHandlingStrategy.merge(oe,this.rawUrlTree);return this.scheduleNavigation(we,Oe,null,$)}navigate(L,$={skipLocationChange:!1}){return function Sa(R){for(let G=0;G<R.length;G++)if(null==R[G])throw new D.wOt(4008,!1)}(L),this.navigateByUrl(this.createUrlTree(L,$),$)}serializeUrl(L){return this.urlSerializer.serialize(L)}parseUrl(L){try{return this.urlSerializer.parse(L)}catch{return this.urlSerializer.parse("/")}}isActive(L,$){let oe;if(oe=!0===$?{...so}:!1===$?{...Rr}:$,ye(L))return _r(this.currentUrlTree,L,oe);const we=this.parseUrl(L);return _r(this.currentUrlTree,we,oe)}removeEmptyProps(L){return Object.entries(L).reduce(($,[oe,we])=>(null!=we&&($[oe]=we),$),{})}scheduleNavigation(L,$,oe,we,f){if(this.disposed)return Promise.resolve(!1);let i,d,v;f?(i=f.resolve,d=f.reject,v=f.promise):v=new Promise((M,k)=>{i=M,d=k});const E=this.pendingTasks.add();return Fr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:$,restoredState:oe,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:L,extras:we,resolve:i,reject:d,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(M=>Promise.reject(M))}static#e=this.\u0275fac=function($){return new($||R)};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),zs=(()=>{class R{constructor(L,$,oe,we,f,i){this.router=L,this.route=$,this.tabIndexAttribute=oe,this.renderer=we,this.el=f,this.locationStrategy=i,this.href=null,this.onChanges=new On.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const d=f.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===d||"area"===d,this.isAnchorElement?this.subscription=L.events.subscribe(v=>{v instanceof bn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(L){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",L)}ngOnChanges(L){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(L){null==L?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=ye(L)||Array.isArray(L)?L:[L],this.setTabIndexIfNotOnNativeEl("0"))}onClick(L,$,oe,we,f){const i=this.urlTree;return!!(null===i||this.isAnchorElement&&(0!==L||$||oe||we||f||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(i,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const L=this.urlTree;this.href=null!==L&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(L)):null;const $=null===this.href?null:(0,D.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",$)}applyAttributeValue(L,$){const oe=this.renderer,we=this.el.nativeElement;null!==$?oe.setAttribute(we,L,$):oe.removeAttribute(we,L)}get urlTree(){return null===this.routerLinkInput?null:ye(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function($){return new($||R)(D.rXU(Pr),D.rXU(Zs),D.kS0("tabindex"),D.rXU(D.sFG),D.rXU(D.aKT),D.rXU(An.hb))};static#t=this.\u0275dir=D.FsC({type:R,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function($,oe){1&$&&D.bIt("click",function(f){return oe.onClick(f.button,f.ctrlKey,f.shiftKey,f.altKey,f.metaKey)}),2&$&&D.BMQ("target",oe.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",D.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",D.L39],replaceUrl:[2,"replaceUrl","replaceUrl",D.L39],routerLink:"routerLink"},standalone:!0,features:[D.GFd,D.OA$]})}return R})(),la=(()=>{class R{get isActive(){return this._isActive}constructor(L,$,oe,we,f){this.router=L,this.element=$,this.renderer=oe,this.cdr=we,this.link=f,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.bkB,this.routerEventsSubscription=L.events.subscribe(i=>{i instanceof bn&&this.update()})}ngAfterContentInit(){(0,h.of)(this.links.changes,(0,h.of)(null)).pipe((0,ui.U)()).subscribe(L=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const L=[...this.links.toArray(),this.link].filter($=>!!$).map($=>$.onChanges);this.linkInputChangesSubscription=(0,ue.H)(L).pipe((0,ui.U)()).subscribe($=>{this._isActive!==this.isLinkActive(this.router)($)&&this.update()})}set routerLinkActive(L){const $=Array.isArray(L)?L:L.split(" ");this.classes=$.filter(oe=>!!oe)}ngOnChanges(L){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const L=this.hasActiveLinks();this.classes.forEach($=>{L?this.renderer.addClass(this.element.nativeElement,$):this.renderer.removeClass(this.element.nativeElement,$)}),L&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==L&&(this._isActive=L,this.cdr.markForCheck(),this.isActiveChange.emit(L))})}isLinkActive(L){const $=function Aa(R){return!!R.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return oe=>{const we=oe.urlTree;return!!we&&L.isActive(we,$)}}hasActiveLinks(){const L=this.isLinkActive(this.router);return this.link&&L(this.link)||this.links.some(L)}static#e=this.\u0275fac=function($){return new($||R)(D.rXU(Pr),D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(D.gRc),D.rXU(zs,8))};static#t=this.\u0275dir=D.FsC({type:R,selectors:[["","routerLinkActive",""]],contentQueries:function($,oe,we){if(1&$&&D.wni(we,zs,5),2&$){let f;D.mGM(f=D.lsd())&&(oe.links=f)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[D.OA$]})}return R})();class ca{}let Il=(()=>{class R{constructor(L,$,oe,we,f){this.router=L,this.injector=oe,this.preloadingStrategy=we,this.loader=f}setUpPreloading(){this.subscription=this.router.events.pipe((0,Gt.p)(L=>L instanceof bn),(0,He.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(L,$){const oe=[];for(const we of $){we.providers&&!we._injector&&(we._injector=(0,D.Ol2)(we.providers,L,`Route: ${we.path}`));const f=we._injector??L,i=we._loadedInjector??f;(we.loadChildren&&!we._loadedRoutes&&void 0===we.canLoad||we.loadComponent&&!we._loadedComponent)&&oe.push(this.preloadConfig(f,we)),(we.children||we._loadedRoutes)&&oe.push(this.processRoutes(i,we.children??we._loadedRoutes))}return(0,ue.H)(oe).pipe((0,ui.U)())}preloadConfig(L,$){return this.preloadingStrategy.preload($,()=>{let oe;oe=$.loadChildren&&void 0===$.canLoad?this.loader.loadChildren(L,$):(0,h.of)(null);const we=oe.pipe((0,Qt.Z)(f=>null===f?(0,h.of)(void 0):($._loadedRoutes=f.routes,$._loadedInjector=f.injector,this.processRoutes(f.injector??L,f.routes))));if($.loadComponent&&!$._loadedComponent){const f=this.loader.loadComponent($);return(0,ue.H)([we,f]).pipe((0,ui.U)())}return we})}static#e=this.\u0275fac=function($){return new($||R)(D.KVO(Pr),D.KVO(D.Ql9),D.KVO(D.uvJ),D.KVO(ca),D.KVO(Wi))};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const _o=new D.nKC("");let Vs=(()=>{class R{constructor(L,$,oe,we,f={}){this.urlSerializer=L,this.transitions=$,this.viewportScroller=oe,this.zone=we,this.options=f,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},f.scrollPositionRestoration||="disabled",f.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(L=>{L instanceof Yt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=L.navigationTrigger,this.restoredId=L.restoredState?L.restoredState.navigationId:0):L instanceof bn?(this.lastId=L.id,this.scheduleScrollEvent(L,this.urlSerializer.parse(L.urlAfterRedirects).fragment)):L instanceof _i&&L.code===xn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(L,this.urlSerializer.parse(L.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(L=>{L instanceof Or&&(L.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(L.position):L.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(L.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(L,$){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Or(L,"popstate"===this.lastSource?this.store[this.restoredId]:null,$))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function($){D.QTQ()};static#t=this.\u0275prov=D.jDH({token:R,factory:R.\u0275fac})}return R})();function ka(R,G){return{\u0275kind:R,\u0275providers:G}}function Nu(){const R=(0,D.WQX)(D.zZn);return G=>{const L=R.get(D.o8S);if(G!==L.components[0])return;const $=R.get(Pr),oe=R.get(Wn);1===R.get(hu)&&$.initialNavigation(),R.get(ms,null,D.$GK.Optional)?.setUpPreloading(),R.get(_o,null,D.$GK.Optional)?.init(),$.resetRootComponentType(L.componentTypes[0]),oe.closed||(oe.next(),oe.complete(),oe.unsubscribe())}}const Wn=new D.nKC("",{factory:()=>new On.B}),hu=new D.nKC("",{providedIn:"root",factory:()=>1}),ms=new D.nKC("");function Nr(R){return ka(0,[{provide:ms,useExisting:Il},{provide:ca,useExisting:R}])}function wc(R){return ka(9,[{provide:ql,useValue:Ql},{provide:Yl,useValue:{skipNextTransition:!!R?.skipInitialTransition,...R}}])}const Va=new D.nKC("ROUTER_FORROOT_GUARD"),dd=[An.aZ,{provide:Gn,useClass:si},Pr,Cs,{provide:Zs,useFactory:function ad(R){return R.routerState.root},deps:[Pr]},Wi,[]];let Uu=(()=>{class R{constructor(L){}static forRoot(L,$){return{ngModule:R,providers:[dd,[],{provide:Kn,multi:!0,useValue:L},{provide:Va,useFactory:ju,deps:[[Pr,new D.Xx1,new D.kdw]]},{provide:Na,useValue:$||{}},$?.useHash?{provide:An.hb,useClass:An.fw}:{provide:An.hb,useClass:An.Sm},{provide:_o,useFactory:()=>{const R=(0,D.WQX)(An.Xr),G=(0,D.WQX)(D.SKi),L=(0,D.WQX)(Na),$=(0,D.WQX)(q),oe=(0,D.WQX)(Gn);return L.scrollOffset&&R.setOffset(L.scrollOffset),new Vs(oe,$,R,G,L)}},$?.preloadingStrategy?Nr($.preloadingStrategy).\u0275providers:[],$?.initialNavigation?pu($):[],$?.bindToComponentInputs?ka(8,[Zo,{provide:hs,useExisting:Zo}]).\u0275providers:[],$?.enableViewTransitions?wc().\u0275providers:[],[{provide:Wd,useFactory:Nu},{provide:D.iLQ,multi:!0,useExisting:Wd}]]}}static forChild(L){return{ngModule:R,providers:[{provide:Kn,multi:!0,useValue:L}]}}static#e=this.\u0275fac=function($){return new($||R)(D.KVO(Va,8))};static#t=this.\u0275mod=D.$C({type:R});static#n=this.\u0275inj=D.G2t({})}return R})();function ju(R){return"guarded"}function pu(R){return["disabled"===R.initialNavigation?ka(3,[{provide:D.hnV,multi:!0,useFactory:()=>{const G=(0,D.WQX)(Pr);return()=>{G.setUpLocationChangeListener()}}},{provide:hu,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?ka(2,[{provide:hu,useValue:0},{provide:D.hnV,multi:!0,deps:[D.zZn],useFactory:G=>{const L=G.get(An.hj,Promise.resolve());return()=>L.then(()=>new Promise($=>{const oe=G.get(Pr),we=G.get(Wn);Fr(oe,()=>{$(!0)}),G.get(q).afterPreactivation=()=>($(!0),we.closed?(0,h.of)(void 0):we),oe.initialNavigation()}))}}]).\u0275providers:[]]}const Wd=new D.nKC("")}},$n=>{$n($n.s=9401)}]);